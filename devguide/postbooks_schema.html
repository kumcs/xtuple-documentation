<!-- $Header: /cvsroot/autodoc/autodoc/html.tmpl,v 1.4 2006/05/16 19:01:27 rbt Exp $ -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html>
  <head>
    <title>Index for Postbooks</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <style type="text/css">
	BODY {
		color:	#000000;
		background-color: #FFFFFF;
		font-family: Helvetica, sans-serif;
	}

	P {
		margin-top: 5px;
		margin-bottom: 5px;
	}

	P.w3ref {
		font-size: 8pt;
		font-style: italic;
		text-align: right;
	}

	P.detail {
		font-size: 10pt;
	}

	.error {
		color: #FFFFFF;
		background-color: #FF0000;
	}

	H1, H2, H3, H4, H5, H6 {
	}

	OL {
		list-style-type: upper-alpha;
	}

	UL.topic {
		list-style-type: upper-alpha;
	}

	LI.topic {
		font-weight : bold;
	}

	HR {
		color: #00FF00;
		background-color: #808080;
	}

	TABLE {
		border-width: medium;
		padding: 3px;
		background-color: #000000;
		width: 90%;
	}

	CAPTION {
		text-transform: capitalize;
		font-weight : bold;
		font-size: 14pt;
	}

	TH {
		color: #FFFFFF;
		background-color: #000000;
		text-align: left;
	}

	TR {
		color: #000000;
		background-color: #000000;
		vertical-align: top;
	}

	TR.tr0 {
		background-color: #F0F0F0;
	}

	TR.tr1 {
		background-color: #D8D8D8;
	}

	TD {
		font-size: 12pt;
	}

	TD.col0 {
		font-weight : bold;
		width: 20%;
	}

	TD.col1 {
		font-style: italic;
		width: 15%;
	}

	TD.col2 {
		font-size: 12px;
	}
    </style>
    <link rel="stylesheet" type="text/css" media="all" href="all.css">
    <link rel="stylesheet" type="text/css" media="screen" href="screen.css">
    <link rel="stylesheet" type="text/css" media="print" href="print.css">
    <meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
  </head>
  <body>

    <!-- Primary Index -->
	<p><br><br>Dumped on 2009-02-06</p>
<h1><a name="index">Index of database - postbooks_empty</a></h1>
<ul>
    
    <li><a name="api.schema">api</a></li><ul>
    	<li><a href="#api.view.account">account</a></li><li><a href="#api.view.accountchar">accountchar</a></li><li><a href="#api.view.accountcomment">accountcomment</a></li><li><a href="#api.view.accountfile">accountfile</a></li><li><a href="#api.view.accountimage">accountimage</a></li><li><a href="#api.view.address">address</a></li><li><a href="#api.view.addresschar">addresschar</a></li><li><a href="#api.view.addresscomment">addresscomment</a></li><li><a href="#api.view.armemo">armemo</a></li><li><a href="#api.view.bom">bom</a></li><li><a href="#api.view.bomitem">bomitem</a></li><li><a href="#api.view.bomitemcomment">bomitemcomment</a></li><li><a href="#api.view.bomitemsubstitute">bomitemsubstitute</a></li><li><a href="#api.view.cashreceipt">cashreceipt</a></li><li><a href="#api.view.cashreceiptapply">cashreceiptapply</a></li><li><a href="#api.view.cashreceiptapplymisc">cashreceiptapplymisc</a></li><li><a href="#api.view.contact">contact</a></li><li><a href="#api.view.contactchar">contactchar</a></li><li><a href="#api.view.contactcomment">contactcomment</a></li><li><a href="#api.view.creditmemo">creditmemo</a></li><li><a href="#api.view.creditmemoline">creditmemoline</a></li><li><a href="#api.view.custchar">custchar</a></li><li><a href="#api.view.custcomment">custcomment</a></li><li><a href="#api.view.custcreditcard">custcreditcard</a></li><li><a href="#api.view.customer">customer</a></li><li><a href="#api.view.customertaxreg">customertaxreg</a></li><li><a href="#api.view.customertype">customertype</a></li><li><a href="#api.view.customertypechar">customertypechar</a></li><li><a href="#api.view.custshipto">custshipto</a></li><li><a href="#api.view.custtax">custtax</a></li><li><a href="#api.view.employee">employee</a></li><li><a href="#api.view.employeechar">employeechar</a></li><li><a href="#api.view.employeecomment">employeecomment</a></li><li><a href="#api.view.extshipmaint">extshipmaint</a></li><li><a href="#api.view.freightpricingscheduleitem">freightpricingscheduleitem</a></li><li><a href="#api.view.glaccount">glaccount</a></li><li><a href="#api.view.incident">incident</a></li><li><a href="#api.view.incidentcomment">incidentcomment</a></li><li><a href="#api.view.incidentfile">incidentfile</a></li><li><a href="#api.view.incidentimage">incidentimage</a></li><li><a href="#api.view.invoice">invoice</a></li><li><a href="#api.view.invoiceline">invoiceline</a></li><li><a href="#api.view.item">item</a></li><li><a href="#api.view.itemalias">itemalias</a></li><li><a href="#api.view.itemchar">itemchar</a></li><li><a href="#api.view.itemcomment">itemcomment</a></li><li><a href="#api.view.itemcost">itemcost</a></li><li><a href="#api.view.itemfile">itemfile</a></li><li><a href="#api.view.itemimage">itemimage</a></li><li><a href="#api.view.itemsite">itemsite</a></li><li><a href="#api.view.itemsitecomment">itemsitecomment</a></li><li><a href="#api.view.itemsource">itemsource</a></li><li><a href="#api.view.itemsourceprice">itemsourceprice</a></li><li><a href="#api.view.itemsubstitute">itemsubstitute</a></li><li><a href="#api.view.itemtaxtype">itemtaxtype</a></li><li><a href="#api.view.itemuomconversion">itemuomconversion</a></li><li><a href="#api.view.journalentry">journalentry</a></li><li><a href="#api.view.location">location</a></li><li><a href="#api.view.misccounttag">misccounttag</a></li><li><a href="#api.view.pricingschedule">pricingschedule</a></li><li><a href="#api.view.pricingscheduleassign">pricingscheduleassign</a></li><li><a href="#api.view.pricingscheduleitem">pricingscheduleitem</a></li><li><a href="#api.view.pricingscheduleitemchar">pricingscheduleitemchar</a></li><li><a href="#api.view.prospect">prospect</a></li><li><a href="#api.view.purchaseline">purchaseline</a></li><li><a href="#api.view.purchaselinechar">purchaselinechar</a></li><li><a href="#api.view.purchaselinecomment">purchaselinecomment</a></li><li><a href="#api.view.purchaseorder">purchaseorder</a></li><li><a href="#api.view.purchaseordercomment">purchaseordercomment</a></li><li><a href="#api.view.quote">quote</a></li><li><a href="#api.view.quotecomment">quotecomment</a></li><li><a href="#api.view.quoteline">quoteline</a></li><li><a href="#api.view.quotelinechar">quotelinechar</a></li><li><a href="#api.view.quotelinecomment">quotelinecomment</a></li><li><a href="#api.view.saleshistory">saleshistory</a></li><li><a href="#api.view.salesline">salesline</a></li><li><a href="#api.view.saleslinechar">saleslinechar</a></li><li><a href="#api.view.saleslinecomment">saleslinecomment</a></li><li><a href="#api.view.salesorder">salesorder</a></li><li><a href="#api.view.salesordercomment">salesordercomment</a></li><li><a href="#api.view.salesrep">salesrep</a></li><li><a href="#api.view.site">site</a></li><li><a href="#api.view.sitezone">sitezone</a></li><li><a href="#api.view.todo">todo</a></li><li><a href="#api.view.vendor">vendor</a></li><li><a href="#api.view.vendoraddress">vendoraddress</a></li><li><a href="#api.view.vendortype">vendortype</a></li>
  	
    </ul>
    
    <li><a name="public.schema">public</a></li><ul>
    	<li><a href="#public.table.acalitem">acalitem</a></li><li><a href="#public.table.accnt">accnt</a></li><li><a href="#public.table.addr">addr</a></li><li><a href="#public.table.alarm">alarm</a></li><li><a href="#public.table.apaccnt">apaccnt</a></li><li><a href="#public.table.apapply">apapply</a></li><li><a href="#public.view.apchk">apchk</a></li><li><a href="#public.view.apchkitem">apchkitem</a></li><li><a href="#public.table.apcreditapply">apcreditapply</a></li><li><a href="#public.table.apopen">apopen</a></li><li><a href="#public.table.apselect">apselect</a></li><li><a href="#public.table.araccnt">araccnt</a></li><li><a href="#public.table.arapply">arapply</a></li><li><a href="#public.table.arcreditapply">arcreditapply</a></li><li><a href="#public.table.armemo">armemo</a></li><li><a href="#public.table.aropen">aropen</a></li><li><a href="#public.table.aropenco">aropenco</a></li><li><a href="#public.table.asohist">asohist</a></li><li><a href="#public.table.asshead">asshead</a></li><li><a href="#public.table.assitem">assitem</a></li><li><a href="#public.table.backup-ccpay">backup_ccpay</a></li><li><a href="#public.table.backup-payco">backup_payco</a></li><li><a href="#public.table.backup-usr">backup_usr</a></li><li><a href="#public.table.bankaccnt">bankaccnt</a></li><li><a href="#public.table.bankadj">bankadj</a></li><li><a href="#public.table.bankadjtype">bankadjtype</a></li><li><a href="#public.table.bankrec">bankrec</a></li><li><a href="#public.table.bankrecitem">bankrecitem</a></li><li><a href="#public.view.billingeditlist">billingeditlist</a></li><li><a href="#public.table.bomhead">bomhead</a></li><li><a href="#public.table.bomitem">bomitem</a></li><li><a href="#public.table.bomitemsub">bomitemsub</a></li><li><a href="#public.table.bomwork">bomwork</a></li><li><a href="#public.table.brddist">brddist</a></li><li><a href="#public.view.budget">budget</a></li><li><a href="#public.table.budghead">budghead</a></li><li><a href="#public.table.budgitem">budgitem</a></li><li><a href="#public.table.calhead">calhead</a></li><li><a href="#public.table.carrier">carrier</a></li><li><a href="#public.table.cashrcpt">cashrcpt</a></li><li><a href="#public.table.cashrcptitem">cashrcptitem</a></li><li><a href="#public.table.cashrcptmisc">cashrcptmisc</a></li><li><a href="#public.table.ccard">ccard</a></li><li><a href="#public.table.ccardaud">ccardaud</a></li><li><a href="#public.table.ccpay">ccpay</a></li><li><a href="#public.table.char">char</a></li><li><a href="#public.table.charass">charass</a></li><li><a href="#public.table.checkhead">checkhead</a></li><li><a href="#public.table.checkitem">checkitem</a></li><li><a href="#public.view.checkrecip">checkrecip</a></li><li><a href="#public.table.classcode">classcode</a></li><li><a href="#public.table.cmd">cmd</a></li><li><a href="#public.table.cmdarg">cmdarg</a></li><li><a href="#public.table.cmhead">cmhead</a></li><li><a href="#public.table.cmitem">cmitem</a></li><li><a href="#public.table.cmnttype">cmnttype</a></li><li><a href="#public.table.cntct">cntct</a></li><li><a href="#public.table.cntslip">cntslip</a></li><li><a href="#public.table.cobill">cobill</a></li><li><a href="#public.table.cobmisc">cobmisc</a></li><li><a href="#public.table.cohead">cohead</a></li><li><a href="#public.table.cohist">cohist</a></li><li><a href="#public.table.coitem">coitem</a></li><li><a href="#public.table.comment">comment</a></li><li><a href="#public.table.company">company</a></li><li><a href="#public.view.coship">coship</a></li><li><a href="#public.view.cosmisc">cosmisc</a></li><li><a href="#public.table.costcat">costcat</a></li><li><a href="#public.table.costelem">costelem</a></li><li><a href="#public.table.costhist">costhist</a></li><li><a href="#public.table.costupdate">costupdate</a></li><li><a href="#public.table.country">country</a></li><li><a href="#public.view.creditmemoeditlist">creditmemoeditlist</a></li><li><a href="#public.table.crmacct">crmacct</a></li><li><a href="#public.table.curr">curr</a></li><li><a href="#public.table.curr-rate">curr_rate</a></li><li><a href="#public.table.curr-symbol">curr_symbol</a></li><li><a href="#public.view.cust">cust</a></li><li><a href="#public.table.custform">custform</a></li><li><a href="#public.table.custgrp">custgrp</a></li><li><a href="#public.table.custgrpitem">custgrpitem</a></li><li><a href="#public.table.custinfo">custinfo</a></li><li><a href="#public.table.custtype">custtype</a></li><li><a href="#public.table.dept">dept</a></li><li><a href="#public.table.destination">destination</a></li><li><a href="#public.table.ediprofile">ediprofile</a></li><li><a href="#public.table.emp">emp</a></li><li><a href="#public.table.empgrp">empgrp</a></li><li><a href="#public.table.empgrpitem">empgrpitem</a></li><li><a href="#public.table.evntlog">evntlog</a></li><li><a href="#public.table.evntnot">evntnot</a></li><li><a href="#public.table.evnttype">evnttype</a></li><li><a href="#public.table.expcat">expcat</a></li><li><a href="#public.table.flcol">flcol</a></li><li><a href="#public.table.flgrp">flgrp</a></li><li><a href="#public.table.flhead">flhead</a></li><li><a href="#public.table.flitem">flitem</a></li><li><a href="#public.table.flrpt">flrpt</a></li><li><a href="#public.table.flspec">flspec</a></li><li><a href="#public.table.form">form</a></li><li><a href="#public.table.freightclass">freightclass</a></li><li><a href="#public.table.glseries">glseries</a></li><li><a href="#public.table.gltrans">gltrans</a></li><li><a href="#public.table.grp">grp</a></li><li><a href="#public.table.grppriv">grppriv</a></li><li><a href="#public.table.headlock">headlock</a></li><li><a href="#public.table.hnfc">hnfc</a></li><li><a href="#public.table.image">image</a></li><li><a href="#public.table.imageass">imageass</a></li><li><a href="#public.table.incdt">incdt</a></li><li><a href="#public.table.incdtcat">incdtcat</a></li><li><a href="#public.table.incdthist">incdthist</a></li><li><a href="#public.table.incdtpriority">incdtpriority</a></li><li><a href="#public.table.incdtresolution">incdtresolution</a></li><li><a href="#public.table.incdtseverity">incdtseverity</a></li><li><a href="#public.table.invchead">invchead</a></li><li><a href="#public.table.invcitem">invcitem</a></li><li><a href="#public.table.invcnt">invcnt</a></li><li><a href="#public.table.invdetail">invdetail</a></li><li><a href="#public.table.invhist">invhist</a></li><li><a href="#public.table.ipsass">ipsass</a></li><li><a href="#public.table.ipsfreight">ipsfreight</a></li><li><a href="#public.table.ipshead">ipshead</a></li><li><a href="#public.table.ipsitem">ipsitem</a></li><li><a href="#public.table.ipsitemchar">ipsitemchar</a></li><li><a href="#public.view.ipsprice">ipsprice</a></li><li><a href="#public.table.ipsprodcat">ipsprodcat</a></li><li><a href="#public.table.item">item</a></li><li><a href="#public.table.itemalias">itemalias</a></li><li><a href="#public.table.itemcost">itemcost</a></li><li><a href="#public.view.itemfile">itemfile</a></li><li><a href="#public.table.itemgrp">itemgrp</a></li><li><a href="#public.table.itemgrpitem">itemgrpitem</a></li><li><a href="#public.view.itemimage">itemimage</a></li><li><a href="#public.table.itemloc">itemloc</a></li><li><a href="#public.table.itemlocdist">itemlocdist</a></li><li><a href="#public.table.itemlocpost">itemlocpost</a></li><li><a href="#public.table.itemsite">itemsite</a></li><li><a href="#public.table.itemsrc">itemsrc</a></li><li><a href="#public.table.itemsrcp">itemsrcp</a></li><li><a href="#public.table.itemsub">itemsub</a></li><li><a href="#public.table.itemtax">itemtax</a></li><li><a href="#public.table.itemtrans">itemtrans</a></li><li><a href="#public.table.itemuom">itemuom</a></li><li><a href="#public.table.itemuomconv">itemuomconv</a></li><li><a href="#public.table.jrnluse">jrnluse</a></li><li><a href="#public.table.labelform">labelform</a></li><li><a href="#public.table.lang">lang</a></li><li><a href="#public.table.locale">locale</a></li><li><a href="#public.table.location">location</a></li><li><a href="#public.table.locitem">locitem</a></li><li><a href="#public.table.metasql">metasql</a></li><li><a href="#public.table.metric">metric</a></li><li><a href="#public.table.metricenc">metricenc</a></li><li><a href="#public.table.msg">msg</a></li><li><a href="#public.table.msguser">msguser</a></li><li><a href="#public.table.obsolete-poheadcol">obsolete_poheadcol</a></li><li><a href="#public.table.obsolete-poitemcol">obsolete_poitemcol</a></li><li><a href="#public.table.ophead">ophead</a></li><li><a href="#public.table.opsource">opsource</a></li><li><a href="#public.table.opstage">opstage</a></li><li><a href="#public.table.optype">optype</a></li><li><a href="#public.view.orderhead">orderhead</a></li><li><a href="#public.view.orderitem">orderitem</a></li><li><a href="#public.table.orderseq">orderseq</a></li><li><a href="#public.table.pack">pack</a></li><li><a href="#public.table.payaropen">payaropen</a></li><li><a href="#public.table.payco">payco</a></li><li><a href="#public.table.period">period</a></li><li><a href="#public.table.pkgdep">pkgdep</a></li><li><a href="#public.table.pkghead">pkghead</a></li><li><a href="#public.table.pkgitem">pkgitem</a></li><li><a href="#public.table.plancode">plancode</a></li><li><a href="#public.table.pohead">pohead</a></li><li><a href="#public.table.poitem">poitem</a></li><li><a href="#public.view.porecv">porecv</a></li><li><a href="#public.table.poreject">poreject</a></li><li><a href="#public.table.potype">potype</a></li><li><a href="#public.table.pr">pr</a></li><li><a href="#public.table.prftcntr">prftcntr</a></li><li><a href="#public.table.priv">priv</a></li><li><a href="#public.table.prj">prj</a></li><li><a href="#public.table.prjtask">prjtask</a></li><li><a href="#public.table.prjtaskuser">prjtaskuser</a></li><li><a href="#public.table.prodcat">prodcat</a></li><li><a href="#public.table.prospect">prospect</a></li><li><a href="#public.table.quhead">quhead</a></li><li><a href="#public.table.quitem">quitem</a></li><li><a href="#public.table.rcalitem">rcalitem</a></li><li><a href="#public.table.recv">recv</a></li><li><a href="#public.view.remitto">remitto</a></li><li><a href="#public.table.report">report</a></li><li><a href="#public.table.rjctcode">rjctcode</a></li><li><a href="#public.table.rsncode">rsncode</a></li><li><a href="#public.table.sale">sale</a></li><li><a href="#public.table.salesaccnt">salesaccnt</a></li><li><a href="#public.table.salescat">salescat</a></li><li><a href="#public.view.saleshistory">saleshistory</a></li><li><a href="#public.view.salesquoteitem">salesquoteitem</a></li><li><a href="#public.table.salesrep">salesrep</a></li><li><a href="#public.table.script">script</a></li><li><a href="#public.table.sequence">sequence</a></li><li><a href="#public.table.shift">shift</a></li><li><a href="#public.table.shipchrg">shipchrg</a></li><li><a href="#public.table.shipdata">shipdata</a></li><li><a href="#public.table.shipdatasum">shipdatasum</a></li><li><a href="#public.table.shipform">shipform</a></li><li><a href="#public.table.shiphead">shiphead</a></li><li><a href="#public.table.shipitem">shipitem</a></li><li><a href="#public.view.shipto">shipto</a></li><li><a href="#public.table.shiptoinfo">shiptoinfo</a></li><li><a href="#public.table.shipvia">shipvia</a></li><li><a href="#public.table.shipzone">shipzone</a></li><li><a href="#public.table.sitetype">sitetype</a></li><li><a href="#public.table.soheadlock">soheadlock</a></li><li><a href="#public.view.sopack">sopack</a></li><li><a href="#public.table.stdjrnl">stdjrnl</a></li><li><a href="#public.table.stdjrnlgrp">stdjrnlgrp</a></li><li><a href="#public.table.stdjrnlgrpitem">stdjrnlgrpitem</a></li><li><a href="#public.table.stdjrnlitem">stdjrnlitem</a></li><li><a href="#public.table.stdopn">stdopn</a></li><li><a href="#public.table.subaccnt">subaccnt</a></li><li><a href="#public.table.subaccnttype">subaccnttype</a></li><li><a href="#public.table.tax">tax</a></li><li><a href="#public.table.taxauth">taxauth</a></li><li><a href="#public.table.taxreg">taxreg</a></li><li><a href="#public.table.taxsel">taxsel</a></li><li><a href="#public.table.taxtype">taxtype</a></li><li><a href="#public.table.terms">terms</a></li><li><a href="#public.table.todoassoc">todoassoc</a></li><li><a href="#public.table.todoitem">todoitem</a></li><li><a href="#public.table.trialbal">trialbal</a></li><li><a href="#public.table.uiform">uiform</a></li><li><a href="#public.table.uom">uom</a></li><li><a href="#public.table.uomconv">uomconv</a></li><li><a href="#public.table.uomtype">uomtype</a></li><li><a href="#public.table.url">url</a></li><li><a href="#public.table.usr">usr</a></li><li><a href="#public.table.usrgrp">usrgrp</a></li><li><a href="#public.table.usrpref">usrpref</a></li><li><a href="#public.table.usrpriv">usrpriv</a></li><li><a href="#public.view.vend">vend</a></li><li><a href="#public.view.vendaddr">vendaddr</a></li><li><a href="#public.table.vendaddrinfo">vendaddrinfo</a></li><li><a href="#public.table.vendinfo">vendinfo</a></li><li><a href="#public.table.vendtype">vendtype</a></li><li><a href="#public.table.vodist">vodist</a></li><li><a href="#public.table.vohead">vohead</a></li><li><a href="#public.table.voitem">voitem</a></li><li><a href="#public.view.voucheringeditlist">voucheringeditlist</a></li><li><a href="#public.view.warehous">warehous</a></li><li><a href="#public.table.whsezone">whsezone</a></li><li><a href="#public.table.whsinfo">whsinfo</a></li><li><a href="#public.table.wo">wo</a></li><li><a href="#public.table.womatl">womatl</a></li><li><a href="#public.table.womatlpost">womatlpost</a></li><li><a href="#public.table.womatlvar">womatlvar</a></li><li><a href="#public.table.woopervar">woopervar</a></li><li><a href="#public.table.workglhead">workglhead</a></li><li><a href="#public.table.workglitem">workglitem</a></li><li><a href="#public.table.workgltotal">workgltotal</a></li><li><a href="#public.table.workgltotaleq">workgltotaleq</a></li><li><a href="#public.table.xsltmap">xsltmap</a></li><li><a href="#public.table.yearperiod">yearperiod</a></li>
  	<li><a href="#public.function.-accnttrigger">_accnttrigger(  )</a></li><li><a href="#public.function.-addrtrigger">_addrtrigger(  )</a></li><li><a href="#public.function.-apapplytrigger">_apapplytrigger(  )</a></li><li><a href="#public.function.-apopentrigger">_apopentrigger(  )</a></li><li><a href="#public.function.-aropenaftertrigger">_aropenaftertrigger(  )</a></li><li><a href="#public.function.-aropentrigger">_aropentrigger(  )</a></li><li><a href="#public.function.-bomheadtrigger">_bomheadtrigger(  )</a></li><li><a href="#public.function.-bomitemsubtrigger">_bomitemsubtrigger(  )</a></li><li><a href="#public.function.-bomitemtrigger">_bomitemtrigger(  )</a></li><li><a href="#public.function.-cashrcptitemaftertrigger">_cashrcptitemaftertrigger(  )</a></li><li><a href="#public.function.-cashrcptitemtrigger">_cashrcptitemtrigger(  )</a></li><li><a href="#public.function.-cashrcptmisctrigger">_cashrcptmisctrigger(  )</a></li><li><a href="#public.function.-cashrcpttrigger">_cashrcpttrigger(  )</a></li><li><a href="#public.function.-ccardtrigger">_ccardtrigger(  )</a></li><li><a href="#public.function.-charasstrigger">_charasstrigger(  )</a></li><li><a href="#public.function.-charbeforetrigger">_charbeforetrigger(  )</a></li><li><a href="#public.function.-checkheadbeforetrigger">_checkheadbeforetrigger(  )</a></li><li><a href="#public.function.-cmheadbeforetrigger">_cmheadbeforetrigger(  )</a></li><li><a href="#public.function.-cmheadtrigger">_cmheadtrigger(  )</a></li><li><a href="#public.function.-cmitembeforetrigger">_cmitembeforetrigger(  )</a></li><li><a href="#public.function.-cmitemtrigger">_cmitemtrigger(  )</a></li><li><a href="#public.function.-cntsliptrigger">_cntsliptrigger(  )</a></li><li><a href="#public.function.-cobilltrigger">_cobilltrigger(  )</a></li><li><a href="#public.function.-cobmisctrigger">_cobmisctrigger(  )</a></li><li><a href="#public.function.-commenttrigger">_commenttrigger(  )</a></li><li><a href="#public.function.-companytrigger">_companytrigger(  )</a></li><li><a href="#public.function.-crmacctaftertrigger">_crmacctaftertrigger(  )</a></li><li><a href="#public.function.-crmacctbeforetrigger">_crmacctbeforetrigger(  )</a></li><li><a href="#public.function.-custaftertrigger">_custaftertrigger(  )</a></li><li><a href="#public.function.-custtrigger">_custtrigger(  )</a></li><li><a href="#public.function.-custtypetrigger">_custtypetrigger(  )</a></li><li><a href="#public.function.-empaftertrigger">_empaftertrigger(  )</a></li><li><a href="#public.function.-empbeforetrigger">_empbeforetrigger(  )</a></li><li><a href="#public.function.-gltransaltertrigger">_gltransaltertrigger(  )</a></li><li><a href="#public.function.-gltransinserttrigger">_gltransinserttrigger(  )</a></li><li><a href="#public.function.-grpprivtrigger">_grpprivtrigger(  )</a></li><li><a href="#public.function.-incdtbeforetrigger">_incdtbeforetrigger(  )</a></li><li><a href="#public.function.-incdttrigger">_incdttrigger(  )</a></li><li><a href="#public.function.-invcheadtrigger">_invcheadtrigger(  )</a></li><li><a href="#public.function.-invcitemtrigger">_invcitemtrigger(  )</a></li><li><a href="#public.function.-ipsassbeforetrigger">_ipsassbeforetrigger(  )</a></li><li><a href="#public.function.-ipsheadbeforetrigger">_ipsheadbeforetrigger(  )</a></li><li><a href="#public.function.-ipsitembeforetrigger">_ipsitembeforetrigger(  )</a></li><li><a href="#public.function.-ipsitemcharbeforetrigger">_ipsitemcharbeforetrigger(  )</a></li><li><a href="#public.function.-itemaftertrigger">_itemaftertrigger(  )</a></li><li><a href="#public.function.-itemaliastrigger">_itemaliastrigger(  )</a></li><li><a href="#public.function.-itemcosttrigger">_itemcosttrigger(  )</a></li><li><a href="#public.function.-itemfiletrigger">_itemfiletrigger(  )</a></li><li><a href="#public.function.-itemimagetrigger">_itemimagetrigger(  )</a></li><li><a href="#public.function.-itemsiteaftertrigger">_itemsiteaftertrigger(  )</a></li><li><a href="#public.function.-itemsitetrigger">_itemsitetrigger(  )</a></li><li><a href="#public.function.-itemsrcptrigger">_itemsrcptrigger(  )</a></li><li><a href="#public.function.-itemsrctrigger">_itemsrctrigger(  )</a></li><li><a href="#public.function.-itemsubtrigger">_itemsubtrigger(  )</a></li><li><a href="#public.function.-itemtaxtrigger">_itemtaxtrigger(  )</a></li><li><a href="#public.function.-itemtrigger">_itemtrigger(  )</a></li><li><a href="#public.function.-itemuomconvtrigger">_itemuomconvtrigger(  )</a></li><li><a href="#public.function.-locationaftertrigger">_locationaftertrigger(  )</a></li><li><a href="#public.function.-locationtrigger">_locationtrigger(  )</a></li><li><a href="#public.function.-metasqlaltertrigger">_metasqlaltertrigger(  )</a></li><li><a href="#public.function.-metasqltrigger">_metasqltrigger(  )</a></li><li><a href="#public.function.-packbeforetrigger">_packbeforetrigger(  )</a></li><li><a href="#public.function.-periodaftertrigger">_periodaftertrigger(  )</a></li><li><a href="#public.function.-pkgcmdaftertrigger">_pkgcmdaftertrigger(  )</a></li><li><a href="#public.function.-pkgcmdaltertrigger">_pkgcmdaltertrigger(  )</a></li><li><a href="#public.function.-pkgcmdargaftertrigger">_pkgcmdargaftertrigger(  )</a></li><li><a href="#public.function.-pkgcmdargaltertrigger">_pkgcmdargaltertrigger(  )</a></li><li><a href="#public.function.-pkgcmdargbeforetrigger">_pkgcmdargbeforetrigger(  )</a></li><li><a href="#public.function.-pkgcmdbeforetrigger">_pkgcmdbeforetrigger(  )</a></li><li><a href="#public.function.-pkgheadbeforetrigger">_pkgheadbeforetrigger(  )</a></li><li><a href="#public.function.-pkgimageaftertrigger">_pkgimageaftertrigger(  )</a></li><li><a href="#public.function.-pkgimagealtertrigger">_pkgimagealtertrigger(  )</a></li><li><a href="#public.function.-pkgimagebeforetrigger">_pkgimagebeforetrigger(  )</a></li><li><a href="#public.function.-pkgitembeforetrigger">_pkgitembeforetrigger(  )</a></li><li><a href="#public.function.-pkgmetasqlaftertrigger">_pkgmetasqlaftertrigger(  )</a></li><li><a href="#public.function.-pkgmetasqlaltertrigger">_pkgmetasqlaltertrigger(  )</a></li><li><a href="#public.function.-pkgmetasqlbeforetrigger">_pkgmetasqlbeforetrigger(  )</a></li><li><a href="#public.function.-pkgprivaftertrigger">_pkgprivaftertrigger(  )</a></li><li><a href="#public.function.-pkgprivaltertrigger">_pkgprivaltertrigger(  )</a></li><li><a href="#public.function.-pkgprivbeforetrigger">_pkgprivbeforetrigger(  )</a></li><li><a href="#public.function.-pkgreportaftertrigger">_pkgreportaftertrigger(  )</a></li><li><a href="#public.function.-pkgreportaltertrigger">_pkgreportaltertrigger(  )</a></li><li><a href="#public.function.-pkgreportbeforetrigger">_pkgreportbeforetrigger(  )</a></li><li><a href="#public.function.-pkgscriptaftertrigger">_pkgscriptaftertrigger(  )</a></li><li><a href="#public.function.-pkgscriptaltertrigger">_pkgscriptaltertrigger(  )</a></li><li><a href="#public.function.-pkgscriptbeforetrigger">_pkgscriptbeforetrigger(  )</a></li><li><a href="#public.function.-pkguiformaftertrigger">_pkguiformaftertrigger(  )</a></li><li><a href="#public.function.-pkguiformaltertrigger">_pkguiformaltertrigger(  )</a></li><li><a href="#public.function.-pkguiformbeforetrigger">_pkguiformbeforetrigger(  )</a></li><li><a href="#public.function.-poheadtrigger">_poheadtrigger(  )</a></li><li><a href="#public.function.-poitemtrigger">_poitemtrigger(  )</a></li><li><a href="#public.function.-prospectaftertrigger">_prospectaftertrigger(  )</a></li><li><a href="#public.function.-prospecttrigger">_prospecttrigger(  )</a></li><li><a href="#public.function.-quheadtrigger">_quheadtrigger(  )</a></li><li><a href="#public.function.-quitemaftertrigger">_quitemaftertrigger(  )</a></li><li><a href="#public.function.-quitembeforetrigger">_quitembeforetrigger(  )</a></li><li><a href="#public.function.-quitemtrigger">_quitemtrigger(  )</a></li><li><a href="#public.function.-reporttrigger">_reporttrigger(  )</a></li><li><a href="#public.function.-salesrepbeforetrigger">_salesrepbeforetrigger(  )</a></li><li><a href="#public.function.-shipdatasumtrigger">_shipdatasumtrigger(  )</a></li><li><a href="#public.function.-shipdatatrigger">_shipdatatrigger(  )</a></li><li><a href="#public.function.-shipheadbeforetrigger">_shipheadbeforetrigger(  )</a></li><li><a href="#public.function.-shiptoinfoaftertrigger">_shiptoinfoaftertrigger(  )</a></li><li><a href="#public.function.-soheadtrigger">_soheadtrigger(  )</a></li><li><a href="#public.function.-soitemaftertrigger">_soitemaftertrigger(  )</a></li><li><a href="#public.function.-soitembeforetrigger">_soitembeforetrigger(  )</a></li><li><a href="#public.function.-soitemtrigger">_soitemtrigger(  )</a></li><li><a href="#public.function.-taxauthaftertrigger">_taxauthaftertrigger(  )</a></li><li><a href="#public.function.-uomconvupdate">_uomconvupdate(  )</a></li><li><a href="#public.function.-usraftertrigger">_usraftertrigger(  )</a></li><li><a href="#public.function.-usrprivtrigger">_usrprivtrigger(  )</a></li><li><a href="#public.function.-vendaddrtrigger">_vendaddrtrigger(  )</a></li><li><a href="#public.function.-vendaftertrigger">_vendaftertrigger(  )</a></li><li><a href="#public.function.-vendtrigger">_vendtrigger(  )</a></li><li><a href="#public.function.-warehoustrigger">_warehoustrigger(  )</a></li><li><a href="#public.function.-whsezonetrigger">_whsezonetrigger(  )</a></li><li><a href="#public.function.-wotrigger">_wotrigger(  )</a></li><li><a href="#public.function.acknowledgemessage-integer">acknowledgemessage( integer )</a></li><li><a href="#public.function.actcost-integer">actcost( integer )</a></li><li><a href="#public.function.actcost-integer-integer">actcost( integer, integer )</a></li><li><a href="#public.function.addtaxtoglseries-integer-integer-text-text-text-date-date-integer-numeric-numeric-numeric-text">addtaxtoglseries( integer, integer, text, text, text, date, date, integer, numeric, numeric, numeric, text )</a></li><li><a href="#public.function.addtopackinglistbatch-integer">addtopackinglistbatch( integer )</a></li><li><a href="#public.function.addtopackinglistbatch-integer-integer">addtopackinglistbatch( integer, integer )</a></li><li><a href="#public.function.addtopackinglistbatch-text-integer">addtopackinglistbatch( text, integer )</a></li><li><a href="#public.function.addtopackinglistbatch-text-integer-integer">addtopackinglistbatch( text, integer, integer )</a></li><li><a href="#public.function.adjustments-text">adjustments( text )</a></li><li><a href="#public.function.allocatedforso-integer-date">allocatedforso( integer, date )</a></li><li><a href="#public.function.allocatedforso-integer-date-date">allocatedforso( integer, date, date )</a></li><li><a href="#public.function.allocatedforso-integer-integer">allocatedforso( integer, integer )</a></li><li><a href="#public.function.allocatedforwo-integer-date">allocatedforwo( integer, date )</a></li><li><a href="#public.function.allocatedforwo-integer-date-date">allocatedforwo( integer, date, date )</a></li><li><a href="#public.function.allocatedforwo-integer-integer">allocatedforwo( integer, integer )</a></li><li><a href="#public.function.alterencrypt-text-text">alterencrypt( text, text )</a></li><li><a href="#public.function.apaging-date-boolean">apaging( date, boolean )</a></li><li><a href="#public.function.apapplied-integer-date">apapplied( integer, date )</a></li><li><a href="#public.function.apcurrgain-integer-integer-numeric-date">apcurrgain( integer, integer, numeric, date )</a></li><li><a href="#public.function.applyapcreditmemotobalance-integer">applyapcreditmemotobalance( integer )</a></li><li><a href="#public.function.applyarcreditmemotobalance-integer">applyarcreditmemotobalance( integer )</a></li><li><a href="#public.function.applyarmemotobalance-integer">applyarmemotobalance( integer )</a></li><li><a href="#public.function.applycashreceiptlinebalance-integer-integer-numeric-integer">applycashreceiptlinebalance( integer, integer, numeric, integer )</a></li><li><a href="#public.function.applycashreceipttobalance-integer-numeric">applycashreceipttobalance( integer, numeric )</a></li><li><a href="#public.function.applycashreceipttobalance-integer-numeric-integer">applycashreceipttobalance( integer, numeric, integer )</a></li><li><a href="#public.function.araging-date-boolean">araging( date, boolean )</a></li><li><a href="#public.function.arapplied-integer-date">arapplied( integer, date )</a></li><li><a href="#public.function.archivesaleshistory-integer">archivesaleshistory( integer )</a></li><li><a href="#public.function.armor-bytea">armor( bytea )</a></li><li><a href="#public.function.attachcontact-integer-integer">attachcontact( integer, integer )</a></li><li><a href="#public.function.averagesalesprice-integer-date-date">averagesalesprice( integer, date, date )</a></li><li><a href="#public.function.avgcost-integer">avgcost( integer )</a></li><li><a href="#public.function.balanceitemsite-integer">balanceitemsite( integer )</a></li><li><a href="#public.function.basecurrid">basecurrid(  )</a></li><li><a href="#public.function.bomcontains-integer-integer">bomcontains( integer, integer )</a></li><li><a href="#public.function.bomhistsequence-integer">bomhistsequence( integer )</a></li><li><a href="#public.function.bomitem-integer">bomitem( integer )</a></li><li><a href="#public.function.bomitem-integer-integer">bomitem( integer, integer )</a></li><li><a href="#public.function.bomlevelbyitem-integer">bomlevelbyitem( integer )</a></li><li><a href="#public.function.bomlevelbyitem-integer-integer">bomlevelbyitem( integer, integer )</a></li><li><a href="#public.function.bomworkeffective-integer-date">bomworkeffective( integer, date )</a></li><li><a href="#public.function.bomworkexpired-integer-date">bomworkexpired( integer, date )</a></li><li><a href="#public.function.bomworkitemsequence-integer">bomworkitemsequence( integer )</a></li><li><a href="#public.function.bomworksequence-integer">bomworksequence( integer )</a></li><li><a href="#public.function.bookingsbycustomervalue-integer-integer">bookingsbycustomervalue( integer, integer )</a></li><li><a href="#public.function.bookingsbyitemqty-integer-integer">bookingsbyitemqty( integer, integer )</a></li><li><a href="#public.function.bookingsbyitemvalue-integer-integer">bookingsbyitemvalue( integer, integer )</a></li><li><a href="#public.function.calccashbudget-integer-integer-bpchar">calccashbudget( integer, integer, bpchar )</a></li><li><a href="#public.function.calcpendingarapplications-integer">calcpendingarapplications( integer )</a></li><li><a href="#public.function.calculatetax-integer-numeric-numeric">calculatetax( integer, numeric, numeric )</a></li><li><a href="#public.function.calculatetax-integer-numeric-numeric-bpchar">calculatetax( integer, numeric, numeric, bpchar )</a></li><li><a href="#public.function.calcwooperstart-integer-integer">calcwooperstart( integer, integer )</a></li><li><a href="#public.function.cancelbatchitem-integer">cancelbatchitem( integer )</a></li><li><a href="#public.function.cancelbillingselection-integer">cancelbillingselection( integer )</a></li><li><a href="#public.function.changeaccountingperioddates-integer-date-date">changeaccountingperioddates( integer, date, date )</a></li><li><a href="#public.function.changeaccountingyearperioddates-integer-date-date">changeaccountingyearperioddates( integer, date, date )</a></li><li><a href="#public.function.changecmheadtaxauth-integer-integer">changecmheadtaxauth( integer, integer )</a></li><li><a href="#public.function.changecobtaxauth-integer-integer">changecobtaxauth( integer, integer )</a></li><li><a href="#public.function.changeinvoicetaxauth-integer-integer">changeinvoicetaxauth( integer, integer )</a></li><li><a href="#public.function.changepoitemduedate-integer-date">changepoitemduedate( integer, date )</a></li><li><a href="#public.function.changepoitemqty-integer-numeric">changepoitemqty( integer, numeric )</a></li><li><a href="#public.function.changeprqty-integer-numeric">changeprqty( integer, numeric )</a></li><li><a href="#public.function.changequotetaxauth-integer-integer">changequotetaxauth( integer, integer )</a></li><li><a href="#public.function.changesotaxauth-integer-integer">changesotaxauth( integer, integer )</a></li><li><a href="#public.function.changetotaxauth-integer-integer">changetotaxauth( integer, integer )</a></li><li><a href="#public.function.changewodates-integer-date-date-boolean">changewodates( integer, date, date, boolean )</a></li><li><a href="#public.function.changewoproject-integer-integer-boolean">changewoproject( integer, integer, boolean )</a></li><li><a href="#public.function.changewoqty-integer-numeric-boolean">changewoqty( integer, numeric, boolean )</a></li><li><a href="#public.function.characteristicstostring-text-integer-text-text">characteristicstostring( text, integer, text, text )</a></li><li><a href="#public.function.checkboositeprivs-integer">checkboositeprivs( integer )</a></li><li><a href="#public.function.checkcreditmemositeprivs-integer">checkcreditmemositeprivs( integer )</a></li><li><a href="#public.function.checkdetailformatted-integer-integer">checkdetailformatted( integer, integer )</a></li><li><a href="#public.function.checkinvoicesiteprivs-integer">checkinvoicesiteprivs( integer )</a></li><li><a href="#public.function.checkpositeprivs-integer">checkpositeprivs( integer )</a></li><li><a href="#public.function.checkprivilege-text">checkprivilege( text )</a></li><li><a href="#public.function.checkquotesiteprivs-integer">checkquotesiteprivs( integer )</a></li><li><a href="#public.function.checkrasiteprivs-integer">checkrasiteprivs( integer )</a></li><li><a href="#public.function.checkshipmentsiteprivs-integer">checkshipmentsiteprivs( integer )</a></li><li><a href="#public.function.checksositeprivs-integer">checksositeprivs( integer )</a></li><li><a href="#public.function.checkvouchersiteprivs-integer">checkvouchersiteprivs( integer )</a></li><li><a href="#public.function.clearpayment-integer">clearpayment( integer )</a></li><li><a href="#public.function.closeaccountingperiod-integer">closeaccountingperiod( integer )</a></li><li><a href="#public.function.closeaccountingyearperiod-integer">closeaccountingyearperiod( integer )</a></li><li><a href="#public.function.closepo-integer">closepo( integer )</a></li><li><a href="#public.function.closewo-integer-boolean-boolean">closewo( integer, boolean, boolean )</a></li><li><a href="#public.function.completebatchitem-integer">completebatchitem( integer )</a></li><li><a href="#public.function.completebatchitem-integer-text">completebatchitem( integer, text )</a></li><li><a href="#public.function.consolidateitemloc">consolidateitemloc(  )</a></li><li><a href="#public.function.consolidatelocations-integer">consolidatelocations( integer )</a></li><li><a href="#public.function.convertcustomertoprospect-integer">convertcustomertoprospect( integer )</a></li><li><a href="#public.function.convertprospecttocustomer-integer">convertprospecttocustomer( integer )</a></li><li><a href="#public.function.convertquote-integer">convertquote( integer )</a></li><li><a href="#public.function.copyassortment-integer-integer">copyassortment( integer, integer )</a></li><li><a href="#public.function.copybom-integer-integer">copybom( integer, integer )</a></li><li><a href="#public.function.copybom-integer-integer-boolean">copybom( integer, integer, boolean )</a></li><li><a href="#public.function.copybudget-integer-text-text-integer">copybudget( integer, text, text, integer )</a></li><li><a href="#public.function.copycmd-integer-text-text">copycmd( integer, text, text )</a></li><li><a href="#public.function.copyfinancialgroup-integer-integer-integer">copyfinancialgroup( integer, integer, integer )</a></li><li><a href="#public.function.copyfinanciallayout-integer-text">copyfinanciallayout( integer, text )</a></li><li><a href="#public.function.copyinvoice-integer-date">copyinvoice( integer, date )</a></li><li><a href="#public.function.copyitem-integer-text">copyitem( integer, text )</a></li><li><a href="#public.function.copyitem-integer-text-boolean-boolean-boolean">copyitem( integer, text, boolean, boolean, boolean )</a></li><li><a href="#public.function.copyitem-integer-text-boolean-boolean-boolean-boolean">copyitem( integer, text, boolean, boolean, boolean, boolean )</a></li><li><a href="#public.function.copyitemsite-integer-integer">copyitemsite( integer, integer )</a></li><li><a href="#public.function.copylocale-integer">copylocale( integer )</a></li><li><a href="#public.function.copypo-integer-integer-date-boolean">copypo( integer, integer, date, boolean )</a></li><li><a href="#public.function.copypricingschedule-integer">copypricingschedule( integer )</a></li><li><a href="#public.function.copyso-integer-date">copyso( integer, date )</a></li><li><a href="#public.function.copytransferorder-integer-date">copytransferorder( integer, date )</a></li><li><a href="#public.function.correctporeceipt-integer-numeric-numeric-integer">correctporeceipt( integer, numeric, numeric, integer )</a></li><li><a href="#public.function.correctporeceipt-integer-numeric-numeric-integer-integer-date">correctporeceipt( integer, numeric, numeric, integer, integer, date )</a></li><li><a href="#public.function.correctproduction-integer-numeric-boolean-boolean">correctproduction( integer, numeric, boolean, boolean )</a></li><li><a href="#public.function.correctproduction-integer-numeric-boolean-boolean-integer">correctproduction( integer, numeric, boolean, boolean, integer )</a></li><li><a href="#public.function.correctreceipt-integer-numeric-numeric-integer-integer-date">correctreceipt( integer, numeric, numeric, integer, integer, date )</a></li><li><a href="#public.function.cosbycustomervalue-integer-integer">cosbycustomervalue( integer, integer )</a></li><li><a href="#public.function.costsbycustomerbyitemsite-integer-integer-integer">costsbycustomerbyitemsite( integer, integer, integer )</a></li><li><a href="#public.function.costsbycustomervalue-integer-integer">costsbycustomervalue( integer, integer )</a></li><li><a href="#public.function.costsbycustomervalue-integer-integer-integer">costsbycustomervalue( integer, integer, integer )</a></li><li><a href="#public.function.costsbycustomervalue-integer-integer-text">costsbycustomervalue( integer, integer, text )</a></li><li><a href="#public.function.createaccountingperiod-date-date">createaccountingperiod( date, date )</a></li><li><a href="#public.function.createaccountingperiod-date-date-integer-integer">createaccountingperiod( date, date, integer, integer )</a></li><li><a href="#public.function.createaccountingyearperiod-date-date">createaccountingyearperiod( date, date )</a></li><li><a href="#public.function.createapchecks-integer-date">createapchecks( integer, date )</a></li><li><a href="#public.function.createapcreditmemo-integer-integer-text-text-date-numeric-text">createapcreditmemo( integer, integer, text, text, date, numeric, text )</a></li><li><a href="#public.function.createapcreditmemo-integer-integer-text-text-date-numeric-text-integer">createapcreditmemo( integer, integer, text, text, date, numeric, text, integer )</a></li><li><a href="#public.function.createapcreditmemo-integer-integer-text-text-date-numeric-text-integer-date-integer">createapcreditmemo( integer, integer, text, text, date, numeric, text, integer, date, integer )</a></li><li><a href="#public.function.createapcreditmemo-integer-integer-text-text-date-numeric-text-integer-date-integer-integer">createapcreditmemo( integer, integer, text, text, date, numeric, text, integer, date, integer, integer )</a></li><li><a href="#public.function.createapcreditmemo-integer-text-text-date-numeric-text">createapcreditmemo( integer, text, text, date, numeric, text )</a></li><li><a href="#public.function.createapcreditmemo-integer-text-text-date-numeric-text-integer">createapcreditmemo( integer, text, text, date, numeric, text, integer )</a></li><li><a href="#public.function.createapcreditmemo-integer-text-text-date-numeric-text-integer-date-integer">createapcreditmemo( integer, text, text, date, numeric, text, integer, date, integer )</a></li><li><a href="#public.function.createapcreditmemoapplication-integer-integer-numeric-integer">createapcreditmemoapplication( integer, integer, numeric, integer )</a></li><li><a href="#public.function.createapdebitmemo-integer-integer-text-text-date-numeric-text">createapdebitmemo( integer, integer, text, text, date, numeric, text )</a></li><li><a href="#public.function.createapdebitmemo-integer-integer-text-text-date-numeric-text-integer">createapdebitmemo( integer, integer, text, text, date, numeric, text, integer )</a></li><li><a href="#public.function.createapdebitmemo-integer-integer-text-text-date-numeric-text-integer-date-integer">createapdebitmemo( integer, integer, text, text, date, numeric, text, integer, date, integer )</a></li><li><a href="#public.function.createapdebitmemo-integer-integer-text-text-date-numeric-text-integer-date-integer-integer">createapdebitmemo( integer, integer, text, text, date, numeric, text, integer, date, integer, integer )</a></li><li><a href="#public.function.createapdebitmemo-integer-text-text-date-numeric-text">createapdebitmemo( integer, text, text, date, numeric, text )</a></li><li><a href="#public.function.createapdebitmemo-integer-text-text-date-numeric-text-integer">createapdebitmemo( integer, text, text, date, numeric, text, integer )</a></li><li><a href="#public.function.createapdebitmemo-integer-text-text-date-numeric-text-integer-date-integer">createapdebitmemo( integer, text, text, date, numeric, text, integer, date, integer )</a></li><li><a href="#public.function.createapdiscount-integer-integer-numeric">createapdiscount( integer, integer, numeric )</a></li><li><a href="#public.function.createapdiscount-integer-numeric">createapdiscount( integer, numeric )</a></li><li><a href="#public.function.createarcashdeposit-integer-text-text-date-numeric-text-integer-integer">createarcashdeposit( integer, text, text, date, numeric, text, integer, integer )</a></li><li><a href="#public.function.createarcreditmemo-integer-text-text-date-numeric-text">createarcreditmemo( integer, text, text, date, numeric, text )</a></li><li><a href="#public.function.createarcreditmemo-integer-text-text-date-numeric-text-integer">createarcreditmemo( integer, text, text, date, numeric, text, integer )</a></li><li><a href="#public.function.createarcreditmemo-integer-text-text-date-numeric-text-integer-integer-integer">createarcreditmemo( integer, text, text, date, numeric, text, integer, integer, integer )</a></li><li><a href="#public.function.createarcreditmemo-integer-text-text-date-numeric-text-integer-integer-integer-date-integer-integer-numeric">createarcreditmemo( integer, text, text, date, numeric, text, integer, integer, integer, date, integer, integer, numeric )</a></li><li><a href="#public.function.createarcreditmemo-integer-text-text-date-numeric-text-integer-integer-integer-date-integer-integer-numeric-integer">createarcreditmemo( integer, text, text, date, numeric, text, integer, integer, integer, date, integer, integer, numeric, integer )</a></li><li><a href="#public.function.createarcreditmemo-integer-text-text-date-numeric-text-integer-integer-integer-date-integer-integer-numeric-integer-integer">createarcreditmemo( integer, text, text, date, numeric, text, integer, integer, integer, date, integer, integer, numeric, integer, integer )</a></li><li><a href="#public.function.createardebitmemo-integer-integer-text-text-date-numeric-text-integer-integer-integer-date-integer-integer-numeric-integer">createardebitmemo( integer, integer, text, text, date, numeric, text, integer, integer, integer, date, integer, integer, numeric, integer )</a></li><li><a href="#public.function.createardebitmemo-integer-text-text-date-numeric-text">createardebitmemo( integer, text, text, date, numeric, text )</a></li><li><a href="#public.function.createardebitmemo-integer-text-text-date-numeric-text-integer">createardebitmemo( integer, text, text, date, numeric, text, integer )</a></li><li><a href="#public.function.createardebitmemo-integer-text-text-date-numeric-text-integer-integer-integer">createardebitmemo( integer, text, text, date, numeric, text, integer, integer, integer )</a></li><li><a href="#public.function.createardebitmemo-integer-text-text-date-numeric-text-integer-integer-integer-date-integer-integer-numeric">createardebitmemo( integer, text, text, date, numeric, text, integer, integer, integer, date, integer, integer, numeric )</a></li><li><a href="#public.function.createardebitmemo-integer-text-text-date-numeric-text-integer-integer-integer-date-integer-integer-numeric-integer">createardebitmemo( integer, text, text, date, numeric, text, integer, integer, integer, date, integer, integer, numeric, integer )</a></li><li><a href="#public.function.createardebitmemo-integer-text-text-text-date-numeric-text-integer-integer-integer-date-integer-integer-numeric-integer">createardebitmemo( integer, text, text, text, date, numeric, text, integer, integer, integer, date, integer, integer, numeric, integer )</a></li><li><a href="#public.function.createaropenitem-integer-text-bpchar-text-date-date-numeric-text">createaropenitem( integer, text, bpchar, text, date, date, numeric, text )</a></li><li><a href="#public.function.createbillingheader-integer">createbillingheader( integer )</a></li><li><a href="#public.function.createbomitem-integer-integer-integer-bpchar-integer-numeric-numeric-date-date-boolean-integer-boolean-text-bpchar-integer-integer-text-text-text">createbomitem( integer, integer, integer, bpchar, integer, numeric, numeric, date, date, boolean, integer, boolean, text, bpchar, integer, integer, text, text, text )</a></li><li><a href="#public.function.createbomitem-integer-integer-integer-integer-bpchar-integer-numeric-numeric-date-date-boolean-integer-boolean-text-bpchar-integer-integer-text">createbomitem( integer, integer, integer, integer, bpchar, integer, numeric, numeric, date, date, boolean, integer, boolean, text, bpchar, integer, integer, text )</a></li><li><a href="#public.function.createbomitem-integer-integer-integer-integer-bpchar-integer-numeric-numeric-date-date-boolean-integer-boolean-text-bpchar-integer-integer-text-text-text">createbomitem( integer, integer, integer, integer, bpchar, integer, numeric, numeric, date, date, boolean, integer, boolean, text, bpchar, integer, integer, text, text, text )</a></li><li><a href="#public.function.createcheck-integer-text-integer-date-numeric-integer-integer-integer-text-text-boolean">createcheck( integer, text, integer, date, numeric, integer, integer, integer, text, text, boolean )</a></li><li><a href="#public.function.createcheck-integer-text-integer-date-numeric-integer-integer-integer-text-text-boolean-integer">createcheck( integer, text, integer, date, numeric, integer, integer, integer, text, text, boolean, integer )</a></li><li><a href="#public.function.createchecks-integer-date">createchecks( integer, date )</a></li><li><a href="#public.function.createcounttag-integer-text-boolean-boolean">createcounttag( integer, text, boolean, boolean )</a></li><li><a href="#public.function.createcounttag-integer-text-boolean-boolean-integer">createcounttag( integer, text, boolean, boolean, integer )</a></li><li><a href="#public.function.createcrmacct-text-text-boolean-text-integer-integer-integer-integer-integer-integer-integer">createcrmacct( text, text, boolean, text, integer, integer, integer, integer, integer, integer, integer )</a></li><li><a href="#public.function.createcrmacct-text-text-boolean-text-integer-integer-integer-integer-integer-integer-integer-integer">createcrmacct( text, text, boolean, text, integer, integer, integer, integer, integer, integer, integer, integer )</a></li><li><a href="#public.function.createcustomer-integer">createcustomer( integer )</a></li><li><a href="#public.function.createcyclecountsbywarehouse-integer-integer-integer-text-boolean-boolean">createcyclecountsbywarehouse( integer, integer, integer, text, boolean, boolean )</a></li><li><a href="#public.function.createcyclecountsbywarehouse-integer-integer-text-boolean-boolean">createcyclecountsbywarehouse( integer, integer, text, boolean, boolean )</a></li><li><a href="#public.function.createcyclecountsbywarehouse-integer-integer-text-boolean-boolean-integer-boolean">createcyclecountsbywarehouse( integer, integer, text, boolean, boolean, integer, boolean )</a></li><li><a href="#public.function.createcyclecountsbywarehouse-integer-text-integer-text-boolean-boolean">createcyclecountsbywarehouse( integer, text, integer, text, boolean, boolean )</a></li><li><a href="#public.function.createcyclecountsbywarehousebyclasscode-integer-integer-integer-text-boolean-boolean-integer-boolean">createcyclecountsbywarehousebyclasscode( integer, integer, integer, text, boolean, boolean, integer, boolean )</a></li><li><a href="#public.function.createcyclecountsbywarehousebyclasscode-integer-text-integer-text-boolean-boolean-integer-boolean">createcyclecountsbywarehousebyclasscode( integer, text, integer, text, boolean, boolean, integer, boolean )</a></li><li><a href="#public.function.createcyclecountsbywarehousebyplannercode-integer-integer-integer-text-boolean-boolean-integer-boolean">createcyclecountsbywarehousebyplannercode( integer, integer, integer, text, boolean, boolean, integer, boolean )</a></li><li><a href="#public.function.createcyclecountsbywarehousebyplannercode-integer-text-integer-text-boolean-boolean-integer-boolean">createcyclecountsbywarehousebyplannercode( integer, text, integer, text, boolean, boolean, integer, boolean )</a></li><li><a href="#public.function.createglreport-integer">createglreport( integer )</a></li><li><a href="#public.function.createmiscapcheck-integer-integer-date-numeric-integer-integer-text-text">createmiscapcheck( integer, integer, date, numeric, integer, integer, text, text )</a></li><li><a href="#public.function.createmiscapcheck-integer-integer-date-numeric-integer-text-text">createmiscapcheck( integer, integer, date, numeric, integer, text, text )</a></li><li><a href="#public.function.createpkgschema-text-text">createpkgschema( text, text )</a></li><li><a href="#public.function.createpr-bpchar-integer">createpr( bpchar, integer )</a></li><li><a href="#public.function.createpr-integer-bpchar-integer">createpr( integer, bpchar, integer )</a></li><li><a href="#public.function.createpr-integer-integer-numeric-date-text">createpr( integer, integer, numeric, date, text )</a></li><li><a href="#public.function.createpr-integer-integer-numeric-date-text-bpchar-integer">createpr( integer, integer, numeric, date, text, bpchar, integer )</a></li><li><a href="#public.function.createpriv-text-text-text">createpriv( text, text, text )</a></li><li><a href="#public.function.createprospect-integer">createprospect( integer )</a></li><li><a href="#public.function.createprospectsfromcrmaccts">createprospectsfromcrmaccts(  )</a></li><li><a href="#public.function.createrecurringinvoices">createrecurringinvoices(  )</a></li><li><a href="#public.function.createtodoitem-integer-integer-text-text-integer-integer-integer-date-date-bpchar-date-date-integer-text-text">createtodoitem( integer, integer, text, text, integer, integer, integer, date, date, bpchar, date, date, integer, text, text )</a></li><li><a href="#public.function.createuser-text-boolean">createuser( text, boolean )</a></li><li><a href="#public.function.createwo-integer-integer-integer-numeric-date-date-text-bpchar-integer-integer">createwo( integer, integer, integer, numeric, date, date, text, bpchar, integer, integer )</a></li><li><a href="#public.function.createwo-integer-integer-integer-numeric-date-date-text-bpchar-integer-integer-integer-integer">createwo( integer, integer, integer, numeric, date, date, text, bpchar, integer, integer, integer, integer )</a></li><li><a href="#public.function.createwo-integer-integer-integer-numeric-date-date-text-bpchar-integer-integer-integer-integer-text">createwo( integer, integer, integer, numeric, date, date, text, bpchar, integer, integer, integer, integer, text )</a></li><li><a href="#public.function.createwo-integer-integer-integer-numeric-integer-date-text-bpchar-integer">createwo( integer, integer, integer, numeric, integer, date, text, bpchar, integer )</a></li><li><a href="#public.function.createwo-integer-integer-integer-numeric-integer-date-text-bpchar-integer-integer">createwo( integer, integer, integer, numeric, integer, date, text, bpchar, integer, integer )</a></li><li><a href="#public.function.createwo-integer-integer-integer-numeric-integer-date-text-bpchar-integer-integer-integer-integer">createwo( integer, integer, integer, numeric, integer, date, text, bpchar, integer, integer, integer, integer )</a></li><li><a href="#public.function.createwo-integer-integer-numeric-date-date-text">createwo( integer, integer, numeric, date, date, text )</a></li><li><a href="#public.function.createwo-integer-integer-numeric-integer-date-text">createwo( integer, integer, numeric, integer, date, text )</a></li><li><a href="#public.function.createwo-integer-integer-numeric-integer-date-text-bpchar-integer">createwo( integer, integer, numeric, integer, date, text, bpchar, integer )</a></li><li><a href="#public.function.createwomaterial-integer-integer-bpchar-integer-numeric-numeric">createwomaterial( integer, integer, bpchar, integer, numeric, numeric )</a></li><li><a href="#public.function.createwomaterial-integer-integer-bpchar-integer-numeric-numeric-integer">createwomaterial( integer, integer, bpchar, integer, numeric, numeric, integer )</a></li><li><a href="#public.function.createwomaterial-integer-integer-bpchar-integer-numeric-numeric-integer-text-text">createwomaterial( integer, integer, bpchar, integer, numeric, numeric, integer, text, text )</a></li><li><a href="#public.function.createwomaterial-integer-integer-bpchar-numeric-numeric">createwomaterial( integer, integer, bpchar, numeric, numeric )</a></li><li><a href="#public.function.crmacctnumberused-text-integer">crmacctnumberused( text, integer )</a></li><li><a href="#public.function.crypt-text-text">crypt( text, text )</a></li><li><a href="#public.function.currconcat-character-varying-character-varying">currconcat( character varying, character varying )</a></li><li><a href="#public.function.currconcat-integer">currconcat( integer )</a></li><li><a href="#public.function.currentapmemonumber">currentapmemonumber(  )</a></li><li><a href="#public.function.currentarmemonumber">currentarmemonumber(  )</a></li><li><a href="#public.function.currentnumber-text">currentnumber( text )</a></li><li><a href="#public.function.currentuserid">currentuserid(  )</a></li><li><a href="#public.function.currexchangecheckoverlap">currexchangecheckoverlap(  )</a></li><li><a href="#public.function.currgain-integer-numeric-date-date">currgain( integer, numeric, date, date )</a></li><li><a href="#public.function.curronebase">curronebase(  )</a></li><li><a href="#public.function.currrate-integer-date">currrate( integer, date )</a></li><li><a href="#public.function.currtobase-integer-numeric-date">currtobase( integer, numeric, date )</a></li><li><a href="#public.function.currtocurr-integer-integer-numeric-date">currtocurr( integer, integer, numeric, date )</a></li><li><a href="#public.function.currtolocal-integer-numeric-date">currtolocal( integer, numeric, date )</a></li><li><a href="#public.function.customercanpurchase-integer-integer">customercanpurchase( integer, integer )</a></li><li><a href="#public.function.customercanpurchase-integer-integer-integer">customercanpurchase( integer, integer, integer )</a></li><li><a href="#public.function.dearmor-text">dearmor( text )</a></li><li><a href="#public.function.decrypt-bytea-bytea-text">decrypt( bytea, bytea, text )</a></li><li><a href="#public.function.decrypt-iv-bytea-bytea-bytea-text">decrypt_iv( bytea, bytea, bytea, text )</a></li><li><a href="#public.function.defaultlocationname-integer">defaultlocationname( integer )</a></li><li><a href="#public.function.deleteaccount-integer">deleteaccount( integer )</a></li><li><a href="#public.function.deleteaccountingperiod-integer">deleteaccountingperiod( integer )</a></li><li><a href="#public.function.deleteaccountingyearperiod-integer">deleteaccountingyearperiod( integer )</a></li><li><a href="#public.function.deleteaddress-integer">deleteaddress( integer )</a></li><li><a href="#public.function.deleteapcheck-integer">deleteapcheck( integer )</a></li><li><a href="#public.function.deletebankadjustmenttype-integer">deletebankadjustmenttype( integer )</a></li><li><a href="#public.function.deletebankreconciliation-integer">deletebankreconciliation( integer )</a></li><li><a href="#public.function.deletebom-integer">deletebom( integer )</a></li><li><a href="#public.function.deletebomworkset-integer">deletebomworkset( integer )</a></li><li><a href="#public.function.deletebudget-integer">deletebudget( integer )</a></li><li><a href="#public.function.deletecashrcpt-integer">deletecashrcpt( integer )</a></li><li><a href="#public.function.deletecharacteristic-integer">deletecharacteristic( integer )</a></li><li><a href="#public.function.deletecheck-integer">deletecheck( integer )</a></li><li><a href="#public.function.deleteclasscode-integer">deleteclasscode( integer )</a></li><li><a href="#public.function.deletecompany-integer">deletecompany( integer )</a></li><li><a href="#public.function.deletecontact-integer">deletecontact( integer )</a></li><li><a href="#public.function.deletecreditmemo-integer">deletecreditmemo( integer )</a></li><li><a href="#public.function.deletecrmaccount-integer">deletecrmaccount( integer )</a></li><li><a href="#public.function.deletecustomer-integer">deletecustomer( integer )</a></li><li><a href="#public.function.deletecustomertype-integer">deletecustomertype( integer )</a></li><li><a href="#public.function.deleteemp-integer">deleteemp( integer )</a></li><li><a href="#public.function.deleteempgrp-integer">deleteempgrp( integer )</a></li><li><a href="#public.function.deleteflgrp-integer">deleteflgrp( integer )</a></li><li><a href="#public.function.deleteform-integer">deleteform( integer )</a></li><li><a href="#public.function.deletefreightclass-integer">deletefreightclass( integer )</a></li><li><a href="#public.function.deleteglseries-integer">deleteglseries( integer )</a></li><li><a href="#public.function.deleteincident-integer">deleteincident( integer )</a></li><li><a href="#public.function.deleteinvoice-integer">deleteinvoice( integer )</a></li><li><a href="#public.function.deleteipsitem-integer">deleteipsitem( integer )</a></li><li><a href="#public.function.deleteipsprodcat-integer">deleteipsprodcat( integer )</a></li><li><a href="#public.function.deleteitem-integer">deleteitem( integer )</a></li><li><a href="#public.function.deleteitemcost-integer-integer">deleteitemcost( integer, integer )</a></li><li><a href="#public.function.deleteitemsite-integer">deleteitemsite( integer )</a></li><li><a href="#public.function.deleteitemuom-integer">deleteitemuom( integer )</a></li><li><a href="#public.function.deleteitemuomconv-integer">deleteitemuomconv( integer )</a></li><li><a href="#public.function.deletelocation-integer">deletelocation( integer )</a></li><li><a href="#public.function.deleteopportunity-integer">deleteopportunity( integer )</a></li><li><a href="#public.function.deletepackage-integer">deletepackage( integer )</a></li><li><a href="#public.function.deletepo-integer">deletepo( integer )</a></li><li><a href="#public.function.deletepr-bpchar-integer">deletepr( bpchar, integer )</a></li><li><a href="#public.function.deletepr-integer">deletepr( integer )</a></li><li><a href="#public.function.deleteproductcategory-integer">deleteproductcategory( integer )</a></li><li><a href="#public.function.deleteprofitcenter-integer">deleteprofitcenter( integer )</a></li><li><a href="#public.function.deleteproject-integer">deleteproject( integer )</a></li><li><a href="#public.function.deleteprospect-integer">deleteprospect( integer )</a></li><li><a href="#public.function.deletequote-integer">deletequote( integer )</a></li><li><a href="#public.function.deletequote-integer-integer">deletequote( integer, integer )</a></li><li><a href="#public.function.deleterecvfororder-text-integer">deleterecvfororder( text, integer )</a></li><li><a href="#public.function.deletesalescategory-integer">deletesalescategory( integer )</a></li><li><a href="#public.function.deletesalesrep-integer">deletesalesrep( integer )</a></li><li><a href="#public.function.deleteshippingcharge-integer">deleteshippingcharge( integer )</a></li><li><a href="#public.function.deleteshippingchargetype-integer">deleteshippingchargetype( integer )</a></li><li><a href="#public.function.deleteshipto-integer">deleteshipto( integer )</a></li><li><a href="#public.function.deleteso-integer">deleteso( integer )</a></li><li><a href="#public.function.deleteso-integer-text">deleteso( integer, text )</a></li><li><a href="#public.function.deletesoitem-integer">deletesoitem( integer )</a></li><li><a href="#public.function.deletestandardjournal-integer">deletestandardjournal( integer )</a></li><li><a href="#public.function.deletestandardjournalgroup-integer">deletestandardjournalgroup( integer )</a></li><li><a href="#public.function.deletesubaccount-integer">deletesubaccount( integer )</a></li><li><a href="#public.function.deletesubaccounttype-integer">deletesubaccounttype( integer )</a></li><li><a href="#public.function.deletetax-integer">deletetax( integer )</a></li><li><a href="#public.function.deletetaxauthority-integer">deletetaxauthority( integer )</a></li><li><a href="#public.function.deletetaxtype-integer">deletetaxtype( integer )</a></li><li><a href="#public.function.deletetodoitem-integer">deletetodoitem( integer )</a></li><li><a href="#public.function.deleteunusedclasscodes">deleteunusedclasscodes(  )</a></li><li><a href="#public.function.deleteunusedfreightclasses">deleteunusedfreightclasses(  )</a></li><li><a href="#public.function.deleteunusedproductcategories">deleteunusedproductcategories(  )</a></li><li><a href="#public.function.deleteuom-integer">deleteuom( integer )</a></li><li><a href="#public.function.deleteuomconv-integer">deleteuomconv( integer )</a></li><li><a href="#public.function.deleteuserpreference-text">deleteuserpreference( text )</a></li><li><a href="#public.function.deleteuserpreference-text-text">deleteuserpreference( text, text )</a></li><li><a href="#public.function.deletevendor-integer">deletevendor( integer )</a></li><li><a href="#public.function.deletevendoraddress-integer">deletevendoraddress( integer )</a></li><li><a href="#public.function.deletevendortype-integer">deletevendortype( integer )</a></li><li><a href="#public.function.deletevoucher-integer">deletevoucher( integer )</a></li><li><a href="#public.function.deletewo-integer-boolean">deletewo( integer, boolean )</a></li><li><a href="#public.function.deletewo-integer-boolean-boolean">deletewo( integer, boolean, boolean )</a></li><li><a href="#public.function.deletewomaterial-integer">deletewomaterial( integer )</a></li><li><a href="#public.function.deleteworkcenter-integer">deleteworkcenter( integer )</a></li><li><a href="#public.function.detachccpayfromso-integer-integer-integer">detachccpayfromso( integer, integer, integer )</a></li><li><a href="#public.function.detachcontact-integer-integer">detachcontact( integer, integer )</a></li><li><a href="#public.function.detag-text">detag( text )</a></li><li><a href="#public.function.detailednnqoh-integer-boolean">detailednnqoh( integer, boolean )</a></li><li><a href="#public.function.detailedqoh-integer-boolean">detailedqoh( integer, boolean )</a></li><li><a href="#public.function.determineduedate-integer-date">determineduedate( integer, date )</a></li><li><a href="#public.function.digest-bytea-text">digest( bytea, text )</a></li><li><a href="#public.function.digest-text-text">digest( text, text )</a></li><li><a href="#public.function.disablepackage-integer">disablepackage( integer )</a></li><li><a href="#public.function.disablepackage-text">disablepackage( text )</a></li><li><a href="#public.function.distributeitemlocseries-integer">distributeitemlocseries( integer )</a></li><li><a href="#public.function.distributetodefault-integer">distributetodefault( integer )</a></li><li><a href="#public.function.distributetodefaultitemloc-integer">distributetodefaultitemloc( integer )</a></li><li><a href="#public.function.distributetolocations-integer">distributetolocations( integer )</a></li><li><a href="#public.function.distributevoucherline-integer-integer-integer">distributevoucherline( integer, integer, integer )</a></li><li><a href="#public.function.dopostcosts-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean">dopostcosts( boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean )</a></li><li><a href="#public.function.dopostcosts-integer-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean">dopostcosts( integer, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean )</a></li><li><a href="#public.function.doupdatecosts-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean">doupdatecosts( boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean )</a></li><li><a href="#public.function.doupdatecosts-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean">doupdatecosts( boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean )</a></li><li><a href="#public.function.doupdatecosts-integer-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean">doupdatecosts( integer, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean )</a></li><li><a href="#public.function.doupdatecosts-integer-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean">doupdatecosts( integer, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean )</a></li><li><a href="#public.function.dropifexists-text-text">dropifexists( text, text )</a></li><li><a href="#public.function.dropifexists-text-text-text">dropifexists( text, text, text )</a></li><li><a href="#public.function.dropifexists-text-text-text-boolean">dropifexists( text, text, text, boolean )</a></li><li><a href="#public.function.dropifexists-text-text-text-text">dropifexists( text, text, text, text )</a></li><li><a href="#public.function.editccnumber-text-text">editccnumber( text, text )</a></li><li><a href="#public.function.enablepackage-integer">enablepackage( integer )</a></li><li><a href="#public.function.enablepackage-text">enablepackage( text )</a></li><li><a href="#public.function.encrypt-bytea-bytea-text">encrypt( bytea, bytea, text )</a></li><li><a href="#public.function.encrypt-iv-bytea-bytea-bytea-text">encrypt_iv( bytea, bytea, bytea, text )</a></li><li><a href="#public.function.endoftime">endoftime(  )</a></li><li><a href="#public.function.entercount-integer-numeric-text">entercount( integer, numeric, text )</a></li><li><a href="#public.function.enterporeceipt-integer-numeric">enterporeceipt( integer, numeric )</a></li><li><a href="#public.function.enterporeceipt-integer-numeric-numeric-text">enterporeceipt( integer, numeric, numeric, text )</a></li><li><a href="#public.function.enterporeceipt-integer-numeric-numeric-text-integer-date">enterporeceipt( integer, numeric, numeric, text, integer, date )</a></li><li><a href="#public.function.enterporeceipt-integer-numeric-text">enterporeceipt( integer, numeric, text )</a></li><li><a href="#public.function.enterporeturn-integer-numeric-integer">enterporeturn( integer, numeric, integer )</a></li><li><a href="#public.function.enterreceipt-text-integer-numeric-numeric-text-integer-date">enterreceipt( text, integer, numeric, numeric, text, integer, date )</a></li><li><a href="#public.function.expirecreditcard-integer-bytea">expirecreditcard( integer, bytea )</a></li><li><a href="#public.function.explodebom-integer-integer-integer">explodebom( integer, integer, integer )</a></li><li><a href="#public.function.explodebom-integer-integer-integer-integer">explodebom( integer, integer, integer, integer )</a></li><li><a href="#public.function.explodekit-integer-integer-integer-integer-numeric">explodekit( integer, integer, integer, integer, numeric )</a></li><li><a href="#public.function.explodephantomorder-integer-integer-numeric">explodephantomorder( integer, integer, numeric )</a></li><li><a href="#public.function.explodeplannedorder-integer-boolean">explodeplannedorder( integer, boolean )</a></li><li><a href="#public.function.explodesummarizedbom-integer-integer-integer-integer-integer-numeric-date-date">explodesummarizedbom( integer, integer, integer, integer, integer, numeric, date, date )</a></li><li><a href="#public.function.explodewo-integer-boolean">explodewo( integer, boolean )</a></li><li><a href="#public.function.explodewoeffective">explodewoeffective(  )</a></li><li><a href="#public.function.fetchapmemonumber">fetchapmemonumber(  )</a></li><li><a href="#public.function.fetcharmemonumber">fetcharmemonumber(  )</a></li><li><a href="#public.function.fetchbatchitem">fetchbatchitem(  )</a></li><li><a href="#public.function.fetchcmnumber">fetchcmnumber(  )</a></li><li><a href="#public.function.fetchcrmaccountnumber">fetchcrmaccountnumber(  )</a></li><li><a href="#public.function.fetchdefaultfob-integer">fetchdefaultfob( integer )</a></li><li><a href="#public.function.fetchdefaultshipvia">fetchdefaultshipvia(  )</a></li><li><a href="#public.function.fetchglsequence">fetchglsequence(  )</a></li><li><a href="#public.function.fetchincidentnumber">fetchincidentnumber(  )</a></li><li><a href="#public.function.fetchinvcnumber">fetchinvcnumber(  )</a></li><li><a href="#public.function.fetchitemuomconvtypes-integer">fetchitemuomconvtypes( integer )</a></li><li><a href="#public.function.fetchjournalnumber-text">fetchjournalnumber( text )</a></li><li><a href="#public.function.fetchmetricbool-text">fetchmetricbool( text )</a></li><li><a href="#public.function.fetchmetrictext-text">fetchmetrictext( text )</a></li><li><a href="#public.function.fetchmetricvalue-text">fetchmetricvalue( text )</a></li><li><a href="#public.function.fetchnextchecknumber-integer">fetchnextchecknumber( integer )</a></li><li><a href="#public.function.fetchnextnumber-text">fetchnextnumber( text )</a></li><li><a href="#public.function.fetchponumber">fetchponumber(  )</a></li><li><a href="#public.function.fetchprefwarehousid">fetchprefwarehousid(  )</a></li><li><a href="#public.function.fetchprnumber">fetchprnumber(  )</a></li><li><a href="#public.function.fetchqunumber">fetchqunumber(  )</a></li><li><a href="#public.function.fetchshipmentnumber">fetchshipmentnumber(  )</a></li><li><a href="#public.function.fetchsonumber">fetchsonumber(  )</a></li><li><a href="#public.function.fetchtonumber">fetchtonumber(  )</a></li><li><a href="#public.function.fetchusrprefbool-text">fetchusrprefbool( text )</a></li><li><a href="#public.function.fetchvonumber">fetchvonumber(  )</a></li><li><a href="#public.function.fetchwonumber">fetchwonumber(  )</a></li><li><a href="#public.function.financialreport-integer-integer">financialreport( integer, integer )</a></li><li><a href="#public.function.financialreport-integer-integer-boolean-boolean">financialreport( integer, integer, boolean, boolean )</a></li><li><a href="#public.function.financialreport-integer-integer-bpchar">financialreport( integer, integer, bpchar )</a></li><li><a href="#public.function.financialreport-integer-integerARRAY-bpchar-boolean">financialreport( integer, integer[], bpchar, boolean )</a></li><li><a href="#public.function.findapaccount-integer">findapaccount( integer )</a></li><li><a href="#public.function.findapdiscountaccount-integer">findapdiscountaccount( integer )</a></li><li><a href="#public.function.findapprepaidaccount-integer">findapprepaidaccount( integer )</a></li><li><a href="#public.function.findaraccount-integer">findaraccount( integer )</a></li><li><a href="#public.function.findcalendarorigin-integer">findcalendarorigin( integer )</a></li><li><a href="#public.function.findcustomerform-integer-bpchar">findcustomerform( integer, bpchar )</a></li><li><a href="#public.function.finddeferredaccount-integer">finddeferredaccount( integer )</a></li><li><a href="#public.function.findfreightaccount-integer">findfreightaccount( integer )</a></li><li><a href="#public.function.findperiodend-integer">findperiodend( integer )</a></li><li><a href="#public.function.findperiodstart-integer">findperiodstart( integer )</a></li><li><a href="#public.function.findprepaidaccount-integer">findprepaidaccount( integer )</a></li><li><a href="#public.function.findsalesaccnt-integer-integer">findsalesaccnt( integer, integer )</a></li><li><a href="#public.function.findsalesaccnt-integer-text-integer">findsalesaccnt( integer, text, integer )</a></li><li><a href="#public.function.findspecialfinancial-text-text-integer">findspecialfinancial( text, text, integer )</a></li><li><a href="#public.function.first-anyelement">first( anyelement )</a></li><li><a href="#public.function.first-agg-anyelement-anyelement">first_agg( anyelement, anyelement )</a></li><li><a href="#public.function.firstline-text">firstline( text )</a></li><li><a href="#public.function.fixacl">fixacl(  )</a></li><li><a href="#public.function.formatachcompanyid">formatachcompanyid(  )</a></li><li><a href="#public.function.formataddr-integer">formataddr( integer )</a></li><li><a href="#public.function.formataddr-text-text-text-text-integer">formataddr( text, text, text, text, integer )</a></li><li><a href="#public.function.formataddr-text-text-text-text-text">formataddr( text, text, text, text, text )</a></li><li><a href="#public.function.formataddr-text-text-text-text-text-integer">formataddr( text, text, text, text, text, integer )</a></li><li><a href="#public.function.formatboolyn-boolean">formatboolyn( boolean )</a></li><li><a href="#public.function.formatbooseq-integer-integer">formatbooseq( integer, integer )</a></li><li><a href="#public.function.formatbytea-bytea">formatbytea( bytea )</a></li><li><a href="#public.function.formatccdashes-text-text">formatccdashes( text, text )</a></li><li><a href="#public.function.formatccnumber-bytea">formatccnumber( bytea )</a></li><li><a href="#public.function.formatccnumber-text">formatccnumber( text )</a></li><li><a href="#public.function.formatcost-numeric">formatcost( numeric )</a></li><li><a href="#public.function.formatcounttagbarcode-integer">formatcounttagbarcode( integer )</a></li><li><a href="#public.function.formatcreditmemonumber-integer">formatcreditmemonumber( integer )</a></li><li><a href="#public.function.formatdate-date">formatdate( date )</a></li><li><a href="#public.function.formatdate-date-text">formatdate( date, text )</a></li><li><a href="#public.function.formatdate-timestamp-with-time-zone">formatdate( timestamp with time zone )</a></li><li><a href="#public.function.formatdatetime-timestamp-with-time-zone">formatdatetime( timestamp with time zone )</a></li><li><a href="#public.function.formatdatetime-timestamp-without-time-zone">formatdatetime( timestamp without time zone )</a></li><li><a href="#public.function.formatextprice-numeric">formatextprice( numeric )</a></li><li><a href="#public.function.formatflitemdescrip-integer">formatflitemdescrip( integer )</a></li><li><a href="#public.function.formatglaccount-integer">formatglaccount( integer )</a></li><li><a href="#public.function.formatglaccountlong-integer">formatglaccountlong( integer )</a></li><li><a href="#public.function.formatindent-text-integer">formatindent( text, integer )</a></li><li><a href="#public.function.formatinterval-interval">formatinterval( interval )</a></li><li><a href="#public.function.formatinterval-numeric">formatinterval( numeric )</a></li><li><a href="#public.function.formatinvcnumber-integer">formatinvcnumber( integer )</a></li><li><a href="#public.function.formatitemsitebarcode-integer">formatitemsitebarcode( integer )</a></li><li><a href="#public.function.formatlocationbarcode-integer">formatlocationbarcode( integer )</a></li><li><a href="#public.function.formatlocationcontentsbarcode-integer">formatlocationcontentsbarcode( integer )</a></li><li><a href="#public.function.formatlocationissuebarcode-integer">formatlocationissuebarcode( integer )</a></li><li><a href="#public.function.formatlocationname-integer">formatlocationname( integer )</a></li><li><a href="#public.function.formatlotserialnumber-integer">formatlotserialnumber( integer )</a></li><li><a href="#public.function.formatmoney-numeric">formatmoney( numeric )</a></li><li><a href="#public.function.formatnumeric-numeric-text">formatnumeric( numeric, text )</a></li><li><a href="#public.function.formatperiodname-integer-bpchar">formatperiodname( integer, bpchar )</a></li><li><a href="#public.function.formatplonumber-integer">formatplonumber( integer )</a></li><li><a href="#public.function.formatprcnt-numeric">formatprcnt( numeric )</a></li><li><a href="#public.function.formatprice-numeric">formatprice( numeric )</a></li><li><a href="#public.function.formatpurchprice-numeric">formatpurchprice( numeric )</a></li><li><a href="#public.function.formatqty-numeric">formatqty( numeric )</a></li><li><a href="#public.function.formatqtyper-numeric">formatqtyper( numeric )</a></li><li><a href="#public.function.formatratio-numeric">formatratio( numeric )</a></li><li><a href="#public.function.formatrevnumber-text-integer">formatrevnumber( text, integer )</a></li><li><a href="#public.function.formatsalesprice-numeric">formatsalesprice( numeric )</a></li><li><a href="#public.function.formatscrap-numeric">formatscrap( numeric )</a></li><li><a href="#public.function.formatshipmentnumber-integer">formatshipmentnumber( integer )</a></li><li><a href="#public.function.formatsobarcode-integer">formatsobarcode( integer )</a></li><li><a href="#public.function.formatsoitembarcode-integer">formatsoitembarcode( integer )</a></li><li><a href="#public.function.formatsoitemnumber-integer">formatsoitemnumber( integer )</a></li><li><a href="#public.function.formatsolinenumber-integer">formatsolinenumber( integer )</a></li><li><a href="#public.function.formatsonumber-integer">formatsonumber( integer )</a></li><li><a href="#public.function.formattime-numeric">formattime( numeric )</a></li><li><a href="#public.function.formattime-timestamp-with-time-zone">formattime( timestamp with time zone )</a></li><li><a href="#public.function.formatuomratio-numeric">formatuomratio( numeric )</a></li><li><a href="#public.function.formatuserbarcode-integer">formatuserbarcode( integer )</a></li><li><a href="#public.function.formatweight-numeric">formatweight( numeric )</a></li><li><a href="#public.function.formatwobarcode-integer">formatwobarcode( integer )</a></li><li><a href="#public.function.formatwonumber-integer">formatwonumber( integer )</a></li><li><a href="#public.function.formatwooperseq-integer">formatwooperseq( integer )</a></li><li><a href="#public.function.forwardupdateaccount-integer">forwardupdateaccount( integer )</a></li><li><a href="#public.function.forwardupdatetrialbalance-integer">forwardupdatetrialbalance( integer )</a></li><li><a href="#public.function.freezeaccountingperiod-integer">freezeaccountingperiod( integer )</a></li><li><a href="#public.function.freightdetail-text-integer-integer-integer-date-text-integer">freightdetail( text, integer, integer, integer, date, text, integer )</a></li><li><a href="#public.function.freightforrecv-text-integer-boolean">freightforrecv( text, integer, boolean )</a></li><li><a href="#public.function.gen-salt-text">gen_salt( text )</a></li><li><a href="#public.function.gen-salt-text-integer">gen_salt( text, integer )</a></li><li><a href="#public.function.getactiverevid-text-integer">getactiverevid( text, integer )</a></li><li><a href="#public.function.getaddrid-text">getaddrid( text )</a></li><li><a href="#public.function.getaropenid-text-bpchar-text">getaropenid( text, bpchar, text )</a></li><li><a href="#public.function.getbankaccntid-text">getbankaccntid( text )</a></li><li><a href="#public.function.getbomitemid-text-text-text">getbomitemid( text, text, text )</a></li><li><a href="#public.function.getbooitemseqid-text-text">getbooitemseqid( text, text )</a></li><li><a href="#public.function.getcashrcptid-text-text-text">getcashrcptid( text, text, text )</a></li><li><a href="#public.function.getcharid-text-text">getcharid( text, text )</a></li><li><a href="#public.function.getclasscodeid-text">getclasscodeid( text )</a></li><li><a href="#public.function.getcmheadid-text">getcmheadid( text )</a></li><li><a href="#public.function.getcmheadid-text-boolean">getcmheadid( text, boolean )</a></li><li><a href="#public.function.getcmnttypeid-text">getcmnttypeid( text )</a></li><li><a href="#public.function.getcntctid-text">getcntctid( text )</a></li><li><a href="#public.function.getcoheadid-text">getcoheadid( text )</a></li><li><a href="#public.function.getcoitemid-text-text">getcoitemid( text, text )</a></li><li><a href="#public.function.getcostcatid-text">getcostcatid( text )</a></li><li><a href="#public.function.getcostelemid-text">getcostelemid( text )</a></li><li><a href="#public.function.getcrmacctid-text">getcrmacctid( text )</a></li><li><a href="#public.function.getcurrid-text">getcurrid( text )</a></li><li><a href="#public.function.getcustid-text">getcustid( text )</a></li><li><a href="#public.function.getcustid-text-boolean">getcustid( text, boolean )</a></li><li><a href="#public.function.getcustnamefrominfo-text-text-text-text-text-boolean">getcustnamefrominfo( text, text, text, text, text, boolean )</a></li><li><a href="#public.function.getcustnumberfrominfo-text-text-text-text-text-boolean">getcustnumberfrominfo( text, text, text, text, text, boolean )</a></li><li><a href="#public.function.getcusttypeid-text">getcusttypeid( text )</a></li><li><a href="#public.function.getdeptid-text">getdeptid( text )</a></li><li><a href="#public.function.getediprofileid-text">getediprofileid( text )</a></li><li><a href="#public.function.getempid-text">getempid( text )</a></li><li><a href="#public.function.getexpcatid-text">getexpcatid( text )</a></li><li><a href="#public.function.getflitemaccntid-integer">getflitemaccntid( integer )</a></li><li><a href="#public.function.getflstmthead-integer-integer">getflstmthead( integer, integer )</a></li><li><a href="#public.function.getfltrendhead-integer-integerARRAY-bpchar">getfltrendhead( integer, integer[], bpchar )</a></li><li><a href="#public.function.getfreightclassid-text">getfreightclassid( text )</a></li><li><a href="#public.function.getfreighttaxselection-integer">getfreighttaxselection( integer )</a></li><li><a href="#public.function.getfreighttaxtypeid">getfreighttaxtypeid(  )</a></li><li><a href="#public.function.getgainlossaccntid">getgainlossaccntid(  )</a></li><li><a href="#public.function.getglaccntid-text">getglaccntid( text )</a></li><li><a href="#public.function.getimageid-text">getimageid( text )</a></li><li><a href="#public.function.getincdtcatid-text">getincdtcatid( text )</a></li><li><a href="#public.function.getincdtcrmacctid-integer">getincdtcrmacctid( integer )</a></li><li><a href="#public.function.getincdtpriorityid-text">getincdtpriorityid( text )</a></li><li><a href="#public.function.getincdtresolutionid-text">getincdtresolutionid( text )</a></li><li><a href="#public.function.getincdtseverityid-text">getincdtseverityid( text )</a></li><li><a href="#public.function.getincidentid-integer">getincidentid( integer )</a></li><li><a href="#public.function.getinvcheadid-text">getinvcheadid( text )</a></li><li><a href="#public.function.getinvcitemlotserial-integer">getinvcitemlotserial( integer )</a></li><li><a href="#public.function.getipsheadid-text">getipsheadid( text )</a></li><li><a href="#public.function.getipsitemid-text-text-numeric-text-text">getipsitemid( text, text, numeric, text, text )</a></li><li><a href="#public.function.getipsprodcatid-text-text-numeric">getipsprodcatid( text, text, numeric )</a></li><li><a href="#public.function.getitemid-text">getitemid( text )</a></li><li><a href="#public.function.getitemsiteid-text-text">getitemsiteid( text, text )</a></li><li><a href="#public.function.getitemsiteid-text-text-text">getitemsiteid( text, text, text )</a></li><li><a href="#public.function.getitemsrcid-text-text">getitemsrcid( text, text )</a></li><li><a href="#public.function.getitemtaxtype-integer-integer">getitemtaxtype( integer, integer )</a></li><li><a href="#public.function.getlasttrialbalid-integer-integer">getlasttrialbalid( integer, integer )</a></li><li><a href="#public.function.getlocationid-text-text">getlocationid( text, text )</a></li><li><a href="#public.function.getlotserialid-text-text">getlotserialid( text, text )</a></li><li><a href="#public.function.getopheadid-text">getopheadid( text )</a></li><li><a href="#public.function.getpacklistcharname-integer-integer">getpacklistcharname( integer, integer )</a></li><li><a href="#public.function.getpacklistcharvalue-integer-integer">getpacklistcharvalue( integer, integer )</a></li><li><a href="#public.function.getpacklistitemlotserial-integer-integer">getpacklistitemlotserial( integer, integer )</a></li><li><a href="#public.function.getperiodid-integer-bpchar">getperiodid( integer, bpchar )</a></li><li><a href="#public.function.getpkgheadid-text">getpkgheadid( text )</a></li><li><a href="#public.function.getplancodeid-text">getplancodeid( text )</a></li><li><a href="#public.function.getpoheadid-text">getpoheadid( text )</a></li><li><a href="#public.function.getpoitemid-text-integer">getpoitemid( text, integer )</a></li><li><a href="#public.function.getprjid-text">getprjid( text )</a></li><li><a href="#public.function.getprodcatid-text">getprodcatid( text )</a></li><li><a href="#public.function.getprospectid-text">getprospectid( text )</a></li><li><a href="#public.function.getquoteid-text">getquoteid( text )</a></li><li><a href="#public.function.getquotelineitemid-text-integer">getquotelineitemid( text, integer )</a></li><li><a href="#public.function.getrevid-text-text-text">getrevid( text, text, text )</a></li><li><a href="#public.function.getrsnid-text">getrsnid( text )</a></li><li><a href="#public.function.getsalescatid-text">getsalescatid( text )</a></li><li><a href="#public.function.getsaleslineitemid-text">getsaleslineitemid( text )</a></li><li><a href="#public.function.getsaleslineitemid-text-integer">getsaleslineitemid( text, integer )</a></li><li><a href="#public.function.getsaleslineitemid-text-integer-integer">getsaleslineitemid( text, integer, integer )</a></li><li><a href="#public.function.getsalesorderid-text">getsalesorderid( text )</a></li><li><a href="#public.function.getsalesrepid-text">getsalesrepid( text )</a></li><li><a href="#public.function.getshiftid-text">getshiftid( text )</a></li><li><a href="#public.function.getshipchrgid-text">getshipchrgid( text )</a></li><li><a href="#public.function.getshipformid-text">getshipformid( text )</a></li><li><a href="#public.function.getshipheadid-text">getshipheadid( text )</a></li><li><a href="#public.function.getshiptoid-text-text">getshiptoid( text, text )</a></li><li><a href="#public.function.getshiptonumberfrominfo-text-text-text-text-text-text-text-text-text-text-text-text-text-boolean-boolean">getshiptonumberfrominfo( text, text, text, text, text, text, text, text, text, text, text, text, text, boolean, boolean )</a></li><li><a href="#public.function.getshipviaid-text">getshipviaid( text )</a></li><li><a href="#public.function.getshipzoneid-text">getshipzoneid( text )</a></li><li><a href="#public.function.getsitetypeid-text">getsitetypeid( text )</a></li><li><a href="#public.function.gettaxauthid-text">gettaxauthid( text )</a></li><li><a href="#public.function.gettaxid-text">gettaxid( text )</a></li><li><a href="#public.function.gettaxselection-integer-integer">gettaxselection( integer, integer )</a></li><li><a href="#public.function.gettaxtypeid-text">gettaxtypeid( text )</a></li><li><a href="#public.function.gettermsid-text">gettermsid( text )</a></li><li><a href="#public.function.getuomid-text">getuomid( text )</a></li><li><a href="#public.function.getuomtypeid-text">getuomtypeid( text )</a></li><li><a href="#public.function.getuomtypeid-textARRAY">getuomtypeid( text[] )</a></li><li><a href="#public.function.getusername-integer">getusername( integer )</a></li><li><a href="#public.function.getusrid-text">getusrid( text )</a></li><li><a href="#public.function.getvendaddrid-text-text">getvendaddrid( text, text )</a></li><li><a href="#public.function.getvendid-text">getvendid( text )</a></li><li><a href="#public.function.getvendtypeid-text">getvendtypeid( text )</a></li><li><a href="#public.function.getwarehousid-text-text">getwarehousid( text, text )</a></li><li><a href="#public.function.getwhsezoneid-text-text">getwhsezoneid( text, text )</a></li><li><a href="#public.function.grantallmodulepriv-integer-text">grantallmodulepriv( integer, text )</a></li><li><a href="#public.function.grantallmodulepriv-text-text">grantallmodulepriv( text, text )</a></li><li><a href="#public.function.grantallmoduleprivgroup-integer-text">grantallmoduleprivgroup( integer, text )</a></li><li><a href="#public.function.grantgroup-text-integer">grantgroup( text, integer )</a></li><li><a href="#public.function.grantpriv-integer-integer">grantpriv( integer, integer )</a></li><li><a href="#public.function.grantpriv-text-integer">grantpriv( text, integer )</a></li><li><a href="#public.function.grantprivgroup-integer-integer">grantprivgroup( integer, integer )</a></li><li><a href="#public.function.hasalarms">hasalarms(  )</a></li><li><a href="#public.function.hasevents">hasevents(  )</a></li><li><a href="#public.function.hasmessages">hasmessages(  )</a></li><li><a href="#public.function.haspriv-text">haspriv( text )</a></li><li><a href="#public.function.hmac-bytea-bytea-text">hmac( bytea, bytea, text )</a></li><li><a href="#public.function.hmac-text-text-text">hmac( text, text, text )</a></li><li><a href="#public.function.implodewo-integer-boolean">implodewo( integer, boolean )</a></li><li><a href="#public.function.indentedbom-integer">indentedbom( integer )</a></li><li><a href="#public.function.indentedbom-integer-integer">indentedbom( integer, integer )</a></li><li><a href="#public.function.indentedbom-integer-integer-integer-integer">indentedbom( integer, integer, integer, integer )</a></li><li><a href="#public.function.indentedwhereused-integer">indentedwhereused( integer )</a></li><li><a href="#public.function.initialdistribution-integer-integer">initialdistribution( integer, integer )</a></li><li><a href="#public.function.insertarmemo-api.armemo">insertarmemo( api.armemo )</a></li><li><a href="#public.function.insertccard-text-boolean-text-bytea-bytea-bytea-bytea-bytea-bytea-bytea-bytea-bytea-bytea-text">insertccard( text, boolean, text, bytea, bytea, bytea, bytea, bytea, bytea, bytea, bytea, bytea, bytea, text )</a></li><li><a href="#public.function.insertcreditmemo-api.creditmemo">insertcreditmemo( api.creditmemo )</a></li><li><a href="#public.function.insertcreditmemoline-api.creditmemoline">insertcreditmemoline( api.creditmemoline )</a></li><li><a href="#public.function.insertflgroup-integer-integer-integer-integer-boolean">insertflgroup( integer, integer, integer, integer, boolean )</a></li><li><a href="#public.function.insertflgroup-integer-integer-integer-integer-boolean-bpchar">insertflgroup( integer, integer, integer, integer, boolean, bpchar )</a></li><li><a href="#public.function.insertgltransaction-integer-text-text-text-text-integer-integer-integer-numeric-date">insertgltransaction( integer, text, text, text, text, integer, integer, integer, numeric, date )</a></li><li><a href="#public.function.insertgltransaction-integer-text-text-text-text-integer-integer-integer-numeric-date-boolean">insertgltransaction( integer, text, text, text, text, integer, integer, integer, numeric, date, boolean )</a></li><li><a href="#public.function.insertgltransaction-text-text-text-text-integer-integer-integer-numeric-date">insertgltransaction( text, text, text, text, integer, integer, integer, numeric, date )</a></li><li><a href="#public.function.insertgltransaction-text-text-text-text-integer-integer-integer-numeric-date-boolean">insertgltransaction( text, text, text, text, integer, integer, integer, numeric, date, boolean )</a></li><li><a href="#public.function.insertintoglseries-integer-text-text-text-integer-numeric">insertintoglseries( integer, text, text, text, integer, numeric )</a></li><li><a href="#public.function.insertintoglseries-integer-text-text-text-integer-numeric-date">insertintoglseries( integer, text, text, text, integer, numeric, date )</a></li><li><a href="#public.function.insertintoglseries-integer-text-text-text-integer-numeric-date-text">insertintoglseries( integer, text, text, text, integer, numeric, date, text )</a></li><li><a href="#public.function.insertinvoice-api.invoice">insertinvoice( api.invoice )</a></li><li><a href="#public.function.insertinvoicelineitem-api.invoiceline">insertinvoicelineitem( api.invoiceline )</a></li><li><a href="#public.function.insertitemcost-integer-integer-integer-numeric-boolean">insertitemcost( integer, integer, integer, numeric, boolean )</a></li><li><a href="#public.function.intervaltominutes-interval">intervaltominutes( interval )</a></li><li><a href="#public.function.invadjustment-integer-numeric-text-text">invadjustment( integer, numeric, text, text )</a></li><li><a href="#public.function.invadjustment-integer-numeric-text-text-timestamp-with-time-zone">invadjustment( integer, numeric, text, text, timestamp with time zone )</a></li><li><a href="#public.function.invadjustment-integer-numeric-text-text-timestamp-with-time-zone-numeric">invadjustment( integer, numeric, text, text, timestamp with time zone, numeric )</a></li><li><a href="#public.function.invexpense-integer-numeric-integer-text-text">invexpense( integer, numeric, integer, text, text )</a></li><li><a href="#public.function.invexpense-integer-numeric-integer-text-text-timestamp-with-time-zone">invexpense( integer, numeric, integer, text, text, timestamp with time zone )</a></li><li><a href="#public.function.invhisttrig">invhisttrig(  )</a></li><li><a href="#public.function.invreceipt-integer-numeric-text-text-text">invreceipt( integer, numeric, text, text, text )</a></li><li><a href="#public.function.invreceipt-integer-numeric-text-text-text-timestamp-with-time-zone">invreceipt( integer, numeric, text, text, text, timestamp with time zone )</a></li><li><a href="#public.function.invreceipt-integer-numeric-text-text-text-timestamp-with-time-zone-numeric">invreceipt( integer, numeric, text, text, text, timestamp with time zone, numeric )</a></li><li><a href="#public.function.invreceiptissuetowomatl-integer-numeric-text-integer-text">invreceiptissuetowomatl( integer, numeric, text, integer, text )</a></li><li><a href="#public.function.invscrap-integer-numeric-text-text">invscrap( integer, numeric, text, text )</a></li><li><a href="#public.function.invscrap-integer-numeric-text-text-timestamp-with-time-zone">invscrap( integer, numeric, text, text, timestamp with time zone )</a></li><li><a href="#public.function.isnumeric-text">isnumeric( text )</a></li><li><a href="#public.function.issueallbalancetoshipping-integer">issueallbalancetoshipping( integer )</a></li><li><a href="#public.function.issueallbalancetoshipping-text-integer-integer-timestamp-with-time-zone">issueallbalancetoshipping( text, integer, integer, timestamp with time zone )</a></li><li><a href="#public.function.issuelinebalancetoshipping-integer">issuelinebalancetoshipping( integer )</a></li><li><a href="#public.function.issuelinebalancetoshipping-text-integer-timestamp-with-time-zone">issuelinebalancetoshipping( text, integer, timestamp with time zone )</a></li><li><a href="#public.function.issues-text">issues( text )</a></li><li><a href="#public.function.issuetoshipping-integer-numeric">issuetoshipping( integer, numeric )</a></li><li><a href="#public.function.issuetoshipping-integer-numeric-integer">issuetoshipping( integer, numeric, integer )</a></li><li><a href="#public.function.issuetoshipping-text-integer-numeric-integer-timestamp-with-time-zone">issuetoshipping( text, integer, numeric, integer, timestamp with time zone )</a></li><li><a href="#public.function.issuewomaterial-integer-numeric">issuewomaterial( integer, numeric )</a></li><li><a href="#public.function.issuewomaterial-integer-numeric-boolean">issuewomaterial( integer, numeric, boolean )</a></li><li><a href="#public.function.issuewomaterial-integer-numeric-integer">issuewomaterial( integer, numeric, integer )</a></li><li><a href="#public.function.issuewomaterial-integer-numeric-integer-boolean">issuewomaterial( integer, numeric, integer, boolean )</a></li><li><a href="#public.function.issuewomaterialbatch-integer">issuewomaterialbatch( integer )</a></li><li><a href="#public.function.itemaltcapinvrat-integer">itemaltcapinvrat( integer )</a></li><li><a href="#public.function.itemaltcapuom-integer">itemaltcapuom( integer )</a></li><li><a href="#public.function.itemcapinvrat-integer">itemcapinvrat( integer )</a></li><li><a href="#public.function.itemcapuom-integer">itemcapuom( integer )</a></li><li><a href="#public.function.itemcharprice-integer-integer-text-integer-integer-numeric">itemcharprice( integer, integer, text, integer, integer, numeric )</a></li><li><a href="#public.function.itemcharprice-integer-integer-text-integer-integer-numeric-integer">itemcharprice( integer, integer, text, integer, integer, numeric, integer )</a></li><li><a href="#public.function.itemcharprice-integer-integer-text-integer-integer-numeric-integer-date">itemcharprice( integer, integer, text, integer, integer, numeric, integer, date )</a></li><li><a href="#public.function.itemcharprice-integer-integer-text-integer-numeric">itemcharprice( integer, integer, text, integer, numeric )</a></li><li><a href="#public.function.itemcharvalue-integer-text">itemcharvalue( integer, text )</a></li><li><a href="#public.function.iteminventoryuominuse-integer">iteminventoryuominuse( integer )</a></li><li><a href="#public.function.iteminvpricerat-integer">iteminvpricerat( integer )</a></li><li><a href="#public.function.itemlocdistqty-integer-integer">itemlocdistqty( integer, integer )</a></li><li><a href="#public.function.itemlocdistqty-text-integer-integer">itemlocdistqty( text, integer, integer )</a></li><li><a href="#public.function.itemprice-integer-integer-integer-numeric">itemprice( integer, integer, integer, numeric )</a></li><li><a href="#public.function.itemprice-integer-integer-integer-numeric-integer">itemprice( integer, integer, integer, numeric, integer )</a></li><li><a href="#public.function.itemprice-integer-integer-integer-numeric-integer-date">itemprice( integer, integer, integer, numeric, integer, date )</a></li><li><a href="#public.function.itemprice-integer-integer-numeric">itemprice( integer, integer, numeric )</a></li><li><a href="#public.function.itemsellinguom-integer">itemsellinguom( integer )</a></li><li><a href="#public.function.itemuombytype-integer-text">itemuombytype( integer, text )</a></li><li><a href="#public.function.itemuomfractionalbytype-integer-text">itemuomfractionalbytype( integer, text )</a></li><li><a href="#public.function.itemuomfractionalbyuom-integer-integer">itemuomfractionalbyuom( integer, integer )</a></li><li><a href="#public.function.itemuomratiobytype-integer-text">itemuomratiobytype( integer, text )</a></li><li><a href="#public.function.itemuomtouom-integer-integer-integer-numeric">itemuomtouom( integer, integer, integer, numeric )</a></li><li><a href="#public.function.itemuomtouomratio-integer-integer-integer">itemuomtouomratio( integer, integer, integer )</a></li><li><a href="#public.function.last-anyelement">last( anyelement )</a></li><li><a href="#public.function.last-agg-anyelement-anyelement">last_agg( anyelement, anyelement )</a></li><li><a href="#public.function.lockhead-text-integer">lockhead( text, integer )</a></li><li><a href="#public.function.locksohead-integer">locksohead( integer )</a></li><li><a href="#public.function.login">login(  )</a></li><li><a href="#public.function.logwotcevent-integer-integer-text">logwotcevent( integer, integer, text )</a></li><li><a href="#public.function.lowercost-integer-text">lowercost( integer, text )</a></li><li><a href="#public.function.lowercost-integer-text-boolean">lowercost( integer, text, boolean )</a></li><li><a href="#public.function.maintainbomworkspace">maintainbomworkspace(  )</a></li><li><a href="#public.function.markapcheckasposted-integer">markapcheckasposted( integer )</a></li><li><a href="#public.function.markapcheckasprinted-integer">markapcheckasprinted( integer )</a></li><li><a href="#public.function.markcheckasposted-integer">markcheckasposted( integer )</a></li><li><a href="#public.function.markcheckasprinted-integer">markcheckasprinted( integer )</a></li><li><a href="#public.function.massexpirebomitem-integer-date-text">massexpirebomitem( integer, date, text )</a></li><li><a href="#public.function.massreplacebomitem-integer-integer-date-text">massreplacebomitem( integer, integer, date, text )</a></li><li><a href="#public.function.movebomitemdown-integer">movebomitemdown( integer )</a></li><li><a href="#public.function.movebomitemup-integer">movebomitemup( integer )</a></li><li><a href="#public.function.moveccarddown-integer">moveccarddown( integer )</a></li><li><a href="#public.function.moveccardup-integer">moveccardup( integer )</a></li><li><a href="#public.function.moveflgroupdown-integer">moveflgroupdown( integer )</a></li><li><a href="#public.function.moveflgroupup-integer">moveflgroupup( integer )</a></li><li><a href="#public.function.moveflitemdown-integer">moveflitemdown( integer )</a></li><li><a href="#public.function.moveflitemup-integer">moveflitemup( integer )</a></li><li><a href="#public.function.moveflspecdown-integer">moveflspecdown( integer )</a></li><li><a href="#public.function.moveflspecup-integer">moveflspecup( integer )</a></li><li><a href="#public.function.nextperiodbyinterval-integer-integer">nextperiodbyinterval( integer, integer )</a></li><li><a href="#public.function.nextprsubnumber-integer">nextprsubnumber( integer )</a></li><li><a href="#public.function.nextwosubnumber-integer">nextwosubnumber( integer )</a></li><li><a href="#public.function.noneg-numeric">noneg( numeric )</a></li><li><a href="#public.function.nopos-numeric">nopos( numeric )</a></li><li><a href="#public.function.normalizetrialbal-integer-bpchar">normalizetrialbal( integer, bpchar )</a></li><li><a href="#public.function.numofdatabaseusers">numofdatabaseusers(  )</a></li><li><a href="#public.function.numofserverusers">numofserverusers(  )</a></li><li><a href="#public.function.openaccountingperiod-integer">openaccountingperiod( integer )</a></li><li><a href="#public.function.openaccountingyearperiod-integer">openaccountingyearperiod( integer )</a></li><li><a href="#public.function.openapitemsvalue-integer-integer">openapitemsvalue( integer, integer )</a></li><li><a href="#public.function.openaritemsvalue-integer-integer">openaritemsvalue( integer, integer )</a></li><li><a href="#public.function.orderedbypo-integer-date-date">orderedbypo( integer, date, date )</a></li><li><a href="#public.function.orderedbypo-integer-integer">orderedbypo( integer, integer )</a></li><li><a href="#public.function.orderedbywo-integer-date-date">orderedbywo( integer, date, date )</a></li><li><a href="#public.function.orderedbywo-integer-integer">orderedbywo( integer, integer )</a></li><li><a href="#public.function.orderhead">orderhead(  )</a></li><li><a href="#public.function.orderitem">orderitem(  )</a></li><li><a href="#public.function.orderitemdata-text-integer-integer">orderitemdata( text, integer, integer )</a></li><li><a href="#public.function.packageisenabled-integer">packageisenabled( integer )</a></li><li><a href="#public.function.packageisenabled-text">packageisenabled( text )</a></li><li><a href="#public.function.pgp-key-id-bytea">pgp_key_id( bytea )</a></li><li><a href="#public.function.pgp-pub-decrypt-bytea-bytea">pgp_pub_decrypt( bytea, bytea )</a></li><li><a href="#public.function.pgp-pub-decrypt-bytea-bytea-text">pgp_pub_decrypt( bytea, bytea, text )</a></li><li><a href="#public.function.pgp-pub-decrypt-bytea-bytea-text-text">pgp_pub_decrypt( bytea, bytea, text, text )</a></li><li><a href="#public.function.pgp-pub-decrypt-bytea-bytea-bytea">pgp_pub_decrypt_bytea( bytea, bytea )</a></li><li><a href="#public.function.pgp-pub-decrypt-bytea-bytea-bytea-text">pgp_pub_decrypt_bytea( bytea, bytea, text )</a></li><li><a href="#public.function.pgp-pub-decrypt-bytea-bytea-bytea-text-text">pgp_pub_decrypt_bytea( bytea, bytea, text, text )</a></li><li><a href="#public.function.pgp-pub-encrypt-text-bytea">pgp_pub_encrypt( text, bytea )</a></li><li><a href="#public.function.pgp-pub-encrypt-text-bytea-text">pgp_pub_encrypt( text, bytea, text )</a></li><li><a href="#public.function.pgp-pub-encrypt-bytea-bytea-bytea">pgp_pub_encrypt_bytea( bytea, bytea )</a></li><li><a href="#public.function.pgp-pub-encrypt-bytea-bytea-bytea-text">pgp_pub_encrypt_bytea( bytea, bytea, text )</a></li><li><a href="#public.function.pgp-sym-decrypt-bytea-text">pgp_sym_decrypt( bytea, text )</a></li><li><a href="#public.function.pgp-sym-decrypt-bytea-text-text">pgp_sym_decrypt( bytea, text, text )</a></li><li><a href="#public.function.pgp-sym-decrypt-bytea-bytea-text">pgp_sym_decrypt_bytea( bytea, text )</a></li><li><a href="#public.function.pgp-sym-decrypt-bytea-bytea-text-text">pgp_sym_decrypt_bytea( bytea, text, text )</a></li><li><a href="#public.function.pgp-sym-encrypt-text-text">pgp_sym_encrypt( text, text )</a></li><li><a href="#public.function.pgp-sym-encrypt-text-text-text">pgp_sym_encrypt( text, text, text )</a></li><li><a href="#public.function.pgp-sym-encrypt-bytea-bytea-text">pgp_sym_encrypt_bytea( bytea, text )</a></li><li><a href="#public.function.pgp-sym-encrypt-bytea-bytea-text-text">pgp_sym_encrypt_bytea( bytea, text, text )</a></li><li><a href="#public.function.pkgmaybemodified-name">pkgmaybemodified( name )</a></li><li><a href="#public.function.postapcheck-integer">postapcheck( integer )</a></li><li><a href="#public.function.postapcheck-integer-integer">postapcheck( integer, integer )</a></li><li><a href="#public.function.postapchecks-integer">postapchecks( integer )</a></li><li><a href="#public.function.postapcreditmemoapplication-integer">postapcreditmemoapplication( integer )</a></li><li><a href="#public.function.postapopenitems">postapopenitems(  )</a></li><li><a href="#public.function.postarcreditmemoapplication-integer">postarcreditmemoapplication( integer )</a></li><li><a href="#public.function.postarmemo-integer">postarmemo( integer )</a></li><li><a href="#public.function.postaropenitems">postaropenitems(  )</a></li><li><a href="#public.function.postbankadjustment-integer">postbankadjustment( integer )</a></li><li><a href="#public.function.postbankreconciliation-integer">postbankreconciliation( integer )</a></li><li><a href="#public.function.postbillingselection-integer">postbillingselection( integer )</a></li><li><a href="#public.function.postbillingselectionconsolidated-integer">postbillingselectionconsolidated( integer )</a></li><li><a href="#public.function.postbillingselections">postbillingselections(  )</a></li><li><a href="#public.function.postbillingselections-integer">postbillingselections( integer )</a></li><li><a href="#public.function.postbillingselections-integer-boolean">postbillingselections( integer, boolean )</a></li><li><a href="#public.function.postcashreceipt-integer-integer">postcashreceipt( integer, integer )</a></li><li><a href="#public.function.postcccashreceipt-integer-integer">postcccashreceipt( integer, integer )</a></li><li><a href="#public.function.postcccashreceipt-integer-integer-text">postcccashreceipt( integer, integer, text )</a></li><li><a href="#public.function.postcccredit-integer-text-integer">postcccredit( integer, text, integer )</a></li><li><a href="#public.function.postccvoid-integer">postccvoid( integer )</a></li><li><a href="#public.function.postcheck-integer-integer">postcheck( integer, integer )</a></li><li><a href="#public.function.postchecks-integer">postchecks( integer )</a></li><li><a href="#public.function.postcomment-integer-text-integer-text">postcomment( integer, text, integer, text )</a></li><li><a href="#public.function.postcost-integer">postcost( integer )</a></li><li><a href="#public.function.postcountslip-integer">postcountslip( integer )</a></li><li><a href="#public.function.postcounttag-integer-boolean">postcounttag( integer, boolean )</a></li><li><a href="#public.function.postcounttaglocation-integer-boolean">postcounttaglocation( integer, boolean )</a></li><li><a href="#public.function.postcounttags-integer-boolean">postcounttags( integer, boolean )</a></li><li><a href="#public.function.postcreditmemo-integer-integer">postcreditmemo( integer, integer )</a></li><li><a href="#public.function.postcreditmemo-integer-integer-integer">postcreditmemo( integer, integer, integer )</a></li><li><a href="#public.function.postcreditmemos-boolean">postcreditmemos( boolean )</a></li><li><a href="#public.function.postcreditmemos-boolean-integer">postcreditmemos( boolean, integer )</a></li><li><a href="#public.function.postglseries-integer">postglseries( integer )</a></li><li><a href="#public.function.postglseries-integer-integer">postglseries( integer, integer )</a></li><li><a href="#public.function.postglseries-integer-integer-boolean">postglseries( integer, integer, boolean )</a></li><li><a href="#public.function.postglseriesnosumm-integer">postglseriesnosumm( integer )</a></li><li><a href="#public.function.postglseriesnosumm-integer-integer">postglseriesnosumm( integer, integer )</a></li><li><a href="#public.function.postintotrialbalance-integer">postintotrialbalance( integer )</a></li><li><a href="#public.function.postinvhist-integer">postinvhist( integer )</a></li><li><a href="#public.function.postinvoice-integer">postinvoice( integer )</a></li><li><a href="#public.function.postinvoice-integer-integer">postinvoice( integer, integer )</a></li><li><a href="#public.function.postinvoices-boolean">postinvoices( boolean )</a></li><li><a href="#public.function.postinvoices-boolean-boolean">postinvoices( boolean, boolean )</a></li><li><a href="#public.function.postinvtrans-integer-text-numeric-text-text-text-text-text-integer-integer-integer">postinvtrans( integer, text, numeric, text, text, text, text, text, integer, integer, integer )</a></li><li><a href="#public.function.postinvtrans-integer-text-numeric-text-text-text-text-text-integer-integer-integer-timestamp-with-time-zone">postinvtrans( integer, text, numeric, text, text, text, text, text, integer, integer, integer, timestamp with time zone )</a></li><li><a href="#public.function.postinvtrans-integer-text-numeric-text-text-text-text-text-integer-integer-integer-timestamp-with-time-zone-numeric">postinvtrans( integer, text, numeric, text, text, text, text, text, integer, integer, integer, timestamp with time zone, numeric )</a></li><li><a href="#public.function.postitemlocseries-integer">postitemlocseries( integer )</a></li><li><a href="#public.function.postmessage-text-text">postmessage( text, text )</a></li><li><a href="#public.function.postmessage-timestamp-without-time-zone-timestamp-without-time-zone-text">postmessage( timestamp without time zone, timestamp without time zone, text )</a></li><li><a href="#public.function.postmessage-timestamp-without-time-zone-timestamp-without-time-zone-text-text">postmessage( timestamp without time zone, timestamp without time zone, text, text )</a></li><li><a href="#public.function.postmiscconsumption-integer-numeric-integer-integer-integer-numeric-text-text">postmiscconsumption( integer, numeric, integer, integer, integer, numeric, text, text )</a></li><li><a href="#public.function.postmisccount-integer-numeric-text">postmisccount( integer, numeric, text )</a></li><li><a href="#public.function.postmiscproduction-integer-numeric-boolean-text-text">postmiscproduction( integer, numeric, boolean, text, text )</a></li><li><a href="#public.function.postpogltransactions">postpogltransactions(  )</a></li><li><a href="#public.function.postporeceipt-integer-integer">postporeceipt( integer, integer )</a></li><li><a href="#public.function.postporeceipts-integer">postporeceipts( integer )</a></li><li><a href="#public.function.postporeturncreditmemo-integer">postporeturncreditmemo( integer )</a></li><li><a href="#public.function.postporeturncreditmemo-integer-numeric">postporeturncreditmemo( integer, numeric )</a></li><li><a href="#public.function.postporeturns-integer">postporeturns( integer )</a></li><li><a href="#public.function.postporeturns-integer-boolean">postporeturns( integer, boolean )</a></li><li><a href="#public.function.postproduction-integer-numeric-boolean-boolean">postproduction( integer, numeric, boolean, boolean )</a></li><li><a href="#public.function.postproduction-integer-numeric-boolean-boolean-integer">postproduction( integer, numeric, boolean, boolean, integer )</a></li><li><a href="#public.function.postproduction-integer-numeric-boolean-boolean-integer-text-text">postproduction( integer, numeric, boolean, boolean, integer, text, text )</a></li><li><a href="#public.function.postpurchaseorder-integer">postpurchaseorder( integer )</a></li><li><a href="#public.function.postreceipt-integer-integer">postreceipt( integer, integer )</a></li><li><a href="#public.function.postreceipts-text-integer-integer">postreceipts( text, integer, integer )</a></li><li><a href="#public.function.postsogltransactions">postsogltransactions(  )</a></li><li><a href="#public.function.poststandardjournal-integer-date">poststandardjournal( integer, date )</a></li><li><a href="#public.function.poststandardjournal-integer-date-boolean">poststandardjournal( integer, date, boolean )</a></li><li><a href="#public.function.poststandardjournal-integer-date-boolean-integer">poststandardjournal( integer, date, boolean, integer )</a></li><li><a href="#public.function.poststandardjournal-integer-date-integer">poststandardjournal( integer, date, integer )</a></li><li><a href="#public.function.poststandardjournalgroup-integer-date">poststandardjournalgroup( integer, date )</a></li><li><a href="#public.function.poststandardjournalgroup-integer-date-boolean">poststandardjournalgroup( integer, date, boolean )</a></li><li><a href="#public.function.postvoucher-integer-boolean">postvoucher( integer, boolean )</a></li><li><a href="#public.function.postvoucher-integer-integer-boolean">postvoucher( integer, integer, boolean )</a></li><li><a href="#public.function.postvouchers-boolean">postvouchers( boolean )</a></li><li><a href="#public.function.purgecreditmemos-date">purgecreditmemos( date )</a></li><li><a href="#public.function.purgeinvoicerecords-date">purgeinvoicerecords( date )</a></li><li><a href="#public.function.purgepostedcountslips-date-integer">purgepostedcountslips( date, integer )</a></li><li><a href="#public.function.purgepostedcounttags-date-integer">purgepostedcounttags( date, integer )</a></li><li><a href="#public.function.purgeshipments-date">purgeshipments( date )</a></li><li><a href="#public.function.qtyallocated-integer-date">qtyallocated( integer, date )</a></li><li><a href="#public.function.qtyallocated-integer-date-date">qtyallocated( integer, date, date )</a></li><li><a href="#public.function.qtyallocated-integer-integer">qtyallocated( integer, integer )</a></li><li><a href="#public.function.qtyatshipping-integer">qtyatshipping( integer )</a></li><li><a href="#public.function.qtyatshipping-text-integer">qtyatshipping( text, integer )</a></li><li><a href="#public.function.qtyavailable-integer-date">qtyavailable( integer, date )</a></li><li><a href="#public.function.qtyavailable-integer-integer">qtyavailable( integer, integer )</a></li><li><a href="#public.function.qtyinshipment-text-integer-integer">qtyinshipment( text, integer, integer )</a></li><li><a href="#public.function.qtylocation-integer-integer-date-date-integer-text-integer">qtylocation( integer, integer, date, date, integer, text, integer )</a></li><li><a href="#public.function.qtyordered-integer-date">qtyordered( integer, date )</a></li><li><a href="#public.function.qtyordered-integer-date-date">qtyordered( integer, date, date )</a></li><li><a href="#public.function.qtyordered-integer-integer">qtyordered( integer, integer )</a></li><li><a href="#public.function.qtytoreceive-text-integer">qtytoreceive( text, integer )</a></li><li><a href="#public.function.recalculatecmheadtaxtotal-integer">recalculatecmheadtaxtotal( integer )</a></li><li><a href="#public.function.recalculatecobmisctaxtotal-integer">recalculatecobmisctaxtotal( integer )</a></li><li><a href="#public.function.recalculateinvcheadtaxtotal-integer">recalculateinvcheadtaxtotal( integer )</a></li><li><a href="#public.function.recallshipment-integer">recallshipment( integer )</a></li><li><a href="#public.function.recallshipment-integer-timestamp-with-time-zone">recallshipment( integer, timestamp with time zone )</a></li><li><a href="#public.function.recallwo-integer-boolean">recallwo( integer, boolean )</a></li><li><a href="#public.function.receipts-text">receipts( text )</a></li><li><a href="#public.function.releaseapmemonumber-integer">releaseapmemonumber( integer )</a></li><li><a href="#public.function.releasearmemonumber-integer">releasearmemonumber( integer )</a></li><li><a href="#public.function.releasecmnumber-integer">releasecmnumber( integer )</a></li><li><a href="#public.function.releasecmnumber-text">releasecmnumber( text )</a></li><li><a href="#public.function.releasecrmaccountnumber-integer">releasecrmaccountnumber( integer )</a></li><li><a href="#public.function.releaseheadlock-text-integer">releaseheadlock( text, integer )</a></li><li><a href="#public.function.releaseincidentnumber-integer">releaseincidentnumber( integer )</a></li><li><a href="#public.function.releaseinvcnumber-integer">releaseinvcnumber( integer )</a></li><li><a href="#public.function.releaseinvcnumber-text">releaseinvcnumber( text )</a></li><li><a href="#public.function.releasenumber-text-integer">releasenumber( text, integer )</a></li><li><a href="#public.function.releaseponumber-integer">releaseponumber( integer )</a></li><li><a href="#public.function.releaseponumber-text">releaseponumber( text )</a></li><li><a href="#public.function.releaseprnumber-integer">releaseprnumber( integer )</a></li><li><a href="#public.function.releasequnumber-integer">releasequnumber( integer )</a></li><li><a href="#public.function.releaseshipmentnumber-integer">releaseshipmentnumber( integer )</a></li><li><a href="#public.function.releasesohead-integer">releasesohead( integer )</a></li><li><a href="#public.function.releasesonumber-integer">releasesonumber( integer )</a></li><li><a href="#public.function.releaseunusedbillingheader-integer">releaseunusedbillingheader( integer )</a></li><li><a href="#public.function.releasevonumber-integer">releasevonumber( integer )</a></li><li><a href="#public.function.releasewo-integer-boolean">releasewo( integer, boolean )</a></li><li><a href="#public.function.releasewonumber-integer">releasewonumber( integer )</a></li><li><a href="#public.function.relocateinventory-integer-integer-integer-numeric-text">relocateinventory( integer, integer, integer, numeric, text )</a></li><li><a href="#public.function.relocateinventory-integer-integer-integer-numeric-text-timestamp-with-time-zone">relocateinventory( integer, integer, integer, numeric, text, timestamp with time zone )</a></li><li><a href="#public.function.reorderdate-integer-integer-boolean">reorderdate( integer, integer, boolean )</a></li><li><a href="#public.function.replaceallvoidedapchecks-integer">replaceallvoidedapchecks( integer )</a></li><li><a href="#public.function.replaceallvoidedchecks-integer">replaceallvoidedchecks( integer )</a></li><li><a href="#public.function.replacevoidedapcheck-integer">replacevoidedapcheck( integer )</a></li><li><a href="#public.function.replacevoidedcheck-integer">replacevoidedcheck( integer )</a></li><li><a href="#public.function.reportbatchitemerror-integer-text">reportbatchitemerror( integer, text )</a></li><li><a href="#public.function.reprioritizewo-integer-integer-boolean">reprioritizewo( integer, integer, boolean )</a></li><li><a href="#public.function.reschedulebatchitem-integer-timestamp-with-time-zone">reschedulebatchitem( integer, timestamp with time zone )</a></li><li><a href="#public.function.reschedulebatchitem-integer-timestamp-with-time-zone-bpchar">reschedulebatchitem( integer, timestamp with time zone, bpchar )</a></li><li><a href="#public.function.resetdbobjperms">resetdbobjperms(  )</a></li><li><a href="#public.function.resetdbobjperms-text">resetdbobjperms( text )</a></li><li><a href="#public.function.resetlowlevelcode-integer">resetlowlevelcode( integer )</a></li><li><a href="#public.function.resetqohbalance-integer">resetqohbalance( integer )</a></li><li><a href="#public.function.resetqohbalance-integer-timestamp-with-time-zone">resetqohbalance( integer, timestamp with time zone )</a></li><li><a href="#public.function.resolvecosaccount-integer-integer">resolvecosaccount( integer, integer )</a></li><li><a href="#public.function.resolvecowaccount-integer-integer">resolvecowaccount( integer, integer )</a></li><li><a href="#public.function.resolvecreditaccount-integer-integer">resolvecreditaccount( integer, integer )</a></li><li><a href="#public.function.resolvesalesaccount-integer-integer">resolvesalesaccount( integer, integer )</a></li><li><a href="#public.function.restoresaleshistory-integer">restoresaleshistory( integer )</a></li><li><a href="#public.function.returncompleteshipment-integer">returncompleteshipment( integer )</a></li><li><a href="#public.function.returncompleteshipment-integer-integer-timestamp-with-time-zone">returncompleteshipment( integer, integer, timestamp with time zone )</a></li><li><a href="#public.function.returnitemshipments-integer">returnitemshipments( integer )</a></li><li><a href="#public.function.returnitemshipments-integer-integer">returnitemshipments( integer, integer )</a></li><li><a href="#public.function.returnitemshipments-text-integer-integer-timestamp-with-time-zone">returnitemshipments( text, integer, integer, timestamp with time zone )</a></li><li><a href="#public.function.returnshipmenttransaction-integer">returnshipmenttransaction( integer )</a></li><li><a href="#public.function.returnshipmenttransaction-integer-integer">returnshipmenttransaction( integer, integer )</a></li><li><a href="#public.function.returnshipmenttransaction-integer-integer-timestamp-with-time-zone">returnshipmenttransaction( integer, integer, timestamp with time zone )</a></li><li><a href="#public.function.returnwomaterial-integer-numeric">returnwomaterial( integer, numeric )</a></li><li><a href="#public.function.returnwomaterial-integer-numeric-integer">returnwomaterial( integer, numeric, integer )</a></li><li><a href="#public.function.returnwomaterialbatch-integer">returnwomaterialbatch( integer )</a></li><li><a href="#public.function.reverseglseries-integer-date-text">reverseglseries( integer, date, text )</a></li><li><a href="#public.function.revokeallmodulepriv-integer-text">revokeallmodulepriv( integer, text )</a></li><li><a href="#public.function.revokeallmodulepriv-text-text">revokeallmodulepriv( text, text )</a></li><li><a href="#public.function.revokeallmoduleprivgroup-integer-text">revokeallmoduleprivgroup( integer, text )</a></li><li><a href="#public.function.revokegroup-text-integer">revokegroup( text, integer )</a></li><li><a href="#public.function.revokepriv-integer-integer">revokepriv( integer, integer )</a></li><li><a href="#public.function.revokepriv-text-integer">revokepriv( text, integer )</a></li><li><a href="#public.function.revokeprivgroup-integer-integer">revokeprivgroup( integer, integer )</a></li><li><a href="#public.function.rollupactualcost-integer">rollupactualcost( integer )</a></li><li><a href="#public.function.rollupsoracost-integer-boolean">rollupsoracost( integer, boolean )</a></li><li><a href="#public.function.rollupstandardcost-integer">rollupstandardcost( integer )</a></li><li><a href="#public.function.roundcost-numeric">roundcost( numeric )</a></li><li><a href="#public.function.roundqty-boolean-numeric">roundqty( boolean, numeric )</a></li><li><a href="#public.function.roundup-numeric">roundup( numeric )</a></li><li><a href="#public.function.salesbycustomerbyitemsite-integer-integer-integer">salesbycustomerbyitemsite( integer, integer, integer )</a></li><li><a href="#public.function.saveaddr-integer-text-text-text-text-text-text-text-text-boolean-text-text">saveaddr( integer, text, text, text, text, text, text, text, text, boolean, text, text )</a></li><li><a href="#public.function.saveaddr-integer-text-text-text-text-text-text-text-text-text">saveaddr( integer, text, text, text, text, text, text, text, text, text )</a></li><li><a href="#public.function.savealarm-integer-text-date-time-without-time-zone-integer-text-boolean-text-boolean-text-boolean-text-text-integer-text">savealarm( integer, text, date, time without time zone, integer, text, boolean, text, boolean, text, boolean, text, text, integer, text )</a></li><li><a href="#public.function.savebomhead-integer-text-date-text-numeric-numeric">savebomhead( integer, text, date, text, numeric, numeric )</a></li><li><a href="#public.function.savecntct-integer-text-integer-integer-text-text-text-text-text-text-boolean-text-text-text-text-text-text-text-text">savecntct( integer, text, integer, integer, text, text, text, text, text, text, boolean, text, text, text, text, text, text, text, text )</a></li><li><a href="#public.function.savecntct-integer-text-integer-integer-text-text-text-text-text-text-boolean-text-text-text-text-text-text-text-text-text">savecntct( integer, text, integer, integer, text, text, text, text, text, text, boolean, text, text, text, text, text, text, text, text, text )</a></li><li><a href="#public.function.savecntct-integer-text-integer-text-text-text-text-text-text-text-text-text-text-text-text">savecntct( integer, text, integer, text, text, text, text, text, text, text, text, text, text, text, text )</a></li><li><a href="#public.function.saveimageass-text-integer-bpchar-integer">saveimageass( text, integer, bpchar, integer )</a></li><li><a href="#public.function.saveipsitem-integer-integer-integer-numeric-numeric-integer-integer">saveipsitem( integer, integer, integer, numeric, numeric, integer, integer )</a></li><li><a href="#public.function.saveipsprodcat-integer-integer-integer-numeric-numeric">saveipsprodcat( integer, integer, integer, numeric, numeric )</a></li><li><a href="#public.function.saveitemimage-integer-bpchar-integer">saveitemimage( integer, bpchar, integer )</a></li><li><a href="#public.function.saveitemuomconv-integer-integer-numeric-integer-numeric-boolean-integerARRAY">saveitemuomconv( integer, integer, numeric, integer, numeric, boolean, integer[] )</a></li><li><a href="#public.function.savemetasql-text-text-text-text">savemetasql( text, text, text, text )</a></li><li><a href="#public.function.savemetasql-text-text-text-text-boolean">savemetasql( text, text, text, text, boolean )</a></li><li><a href="#public.function.scraps-text">scraps( text )</a></li><li><a href="#public.function.scraptoplevel-integer-numeric">scraptoplevel( integer, numeric )</a></li><li><a href="#public.function.scraptoplevel-integer-numeric-boolean">scraptoplevel( integer, numeric, boolean )</a></li><li><a href="#public.function.scrapwomaterial-integer-numeric">scrapwomaterial( integer, numeric )</a></li><li><a href="#public.function.scrapwomaterial-integer-numeric-boolean">scrapwomaterial( integer, numeric, boolean )</a></li><li><a href="#public.function.selectbalanceforbilling-integer">selectbalanceforbilling( integer )</a></li><li><a href="#public.function.selectdiscountitemsforpayment-integer-integer">selectdiscountitemsforpayment( integer, integer )</a></li><li><a href="#public.function.selectdueitemsforpayment-integer-integer">selectdueitemsforpayment( integer, integer )</a></li><li><a href="#public.function.selectforbilling-integer-numeric-boolean">selectforbilling( integer, numeric, boolean )</a></li><li><a href="#public.function.selectforbilling-integer-numeric-boolean-integer-integer">selectforbilling( integer, numeric, boolean, integer, integer )</a></li><li><a href="#public.function.selectpayment-integer-integer">selectpayment( integer, integer )</a></li><li><a href="#public.function.selectuninvoicedshipment-integer">selectuninvoicedshipment( integer )</a></li><li><a href="#public.function.selectuninvoicedshipments-integer">selectuninvoicedshipments( integer )</a></li><li><a href="#public.function.selectuninvoicedshipments-integer-integer">selectuninvoicedshipments( integer, integer )</a></li><li><a href="#public.function.selectuninvoicedshipments-integer-text">selectuninvoicedshipments( integer, text )</a></li><li><a href="#public.function.setapjournalnumber">setapjournalnumber(  )</a></li><li><a href="#public.function.setarjournalnumber">setarjournalnumber(  )</a></li><li><a href="#public.function.setbudget-integer-integer-integer-numeric">setbudget( integer, integer, integer, numeric )</a></li><li><a href="#public.function.setbudget-integer-integer-numeric">setbudget( integer, integer, numeric )</a></li><li><a href="#public.function.setbytea-bytea">setbytea( bytea )</a></li><li><a href="#public.function.setbytea-text">setbytea( text )</a></li><li><a href="#public.function.setgljournalnumber-date-date">setgljournalnumber( date, date )</a></li><li><a href="#public.function.setmetric-text-text">setmetric( text, text )</a></li><li><a href="#public.function.setmetricenc-text-text-text">setmetricenc( text, text, text )</a></li><li><a href="#public.function.setnextapmemonumber-integer">setnextapmemonumber( integer )</a></li><li><a href="#public.function.setnextarmemonumber-integer">setnextarmemonumber( integer )</a></li><li><a href="#public.function.setnextchecknumber-integer-integer">setnextchecknumber( integer, integer )</a></li><li><a href="#public.function.setnextcmnumber-integer">setnextcmnumber( integer )</a></li><li><a href="#public.function.setnextcrmaccountnumber-integer">setnextcrmaccountnumber( integer )</a></li><li><a href="#public.function.setnextincidentnumber-integer">setnextincidentnumber( integer )</a></li><li><a href="#public.function.setnextinvcnumber-integer">setnextinvcnumber( integer )</a></li><li><a href="#public.function.setnextnumber-text-integer">setnextnumber( text, integer )</a></li><li><a href="#public.function.setnextponumber-integer">setnextponumber( integer )</a></li><li><a href="#public.function.setnextprnumber-integer">setnextprnumber( integer )</a></li><li><a href="#public.function.setnextqunumber-integer">setnextqunumber( integer )</a></li><li><a href="#public.function.setnextsonumber-integer">setnextsonumber( integer )</a></li><li><a href="#public.function.setnextvcnumber-integer">setnextvcnumber( integer )</a></li><li><a href="#public.function.setnextwonumber-integer">setnextwonumber( integer )</a></li><li><a href="#public.function.setusercancreateusers-text-boolean">setusercancreateusers( text, boolean )</a></li><li><a href="#public.function.setuserpreference-integer-text-text">setuserpreference( integer, text, text )</a></li><li><a href="#public.function.setuserpreference-text-text">setuserpreference( text, text )</a></li><li><a href="#public.function.setuserpreference-text-text-text">setuserpreference( text, text, text )</a></li><li><a href="#public.function.shipments-text">shipments( text )</a></li><li><a href="#public.function.shipmentsbycustomervalue-integer-integer">shipmentsbycustomervalue( integer, integer )</a></li><li><a href="#public.function.shipmentsbycustomervalue-integer-integer-integer">shipmentsbycustomervalue( integer, integer, integer )</a></li><li><a href="#public.function.shipmentsbycustomervalue-integer-integer-text">shipmentsbycustomervalue( integer, integer, text )</a></li><li><a href="#public.function.shipmentsbyitemqty-integer-integer">shipmentsbyitemqty( integer, integer )</a></li><li><a href="#public.function.shipmentsbyitemvalue-integer-integer">shipmentsbyitemvalue( integer, integer )</a></li><li><a href="#public.function.shipshipment-integer">shipshipment( integer )</a></li><li><a href="#public.function.shipshipment-integer-timestamp-with-time-zone">shipshipment( integer, timestamp with time zone )</a></li><li><a href="#public.function.singlecharacteristicstostring-text-integer-text-text-integer">singlecharacteristicstostring( text, integer, text, text, integer )</a></li><li><a href="#public.function.singlelevelbom-integer-integer-integer-integer">singlelevelbom( integer, integer, integer, integer )</a></li><li><a href="#public.function.site">site(  )</a></li><li><a href="#public.function.snoozemessage-integer">snoozemessage( integer )</a></li><li><a href="#public.function.spellamount-numeric">spellamount( numeric )</a></li><li><a href="#public.function.spellamount-numeric-integer">spellamount( numeric, integer )</a></li><li><a href="#public.function.splitreceipt-integer-numeric-numeric">splitreceipt( integer, numeric, numeric )</a></li><li><a href="#public.function.startoftime">startoftime(  )</a></li><li><a href="#public.function.stdcost-integer">stdcost( integer )</a></li><li><a href="#public.function.sufficientinventorytoshipitem-text-integer">sufficientinventorytoshipitem( text, integer )</a></li><li><a href="#public.function.sufficientinventorytoshipitem-text-integer-numeric">sufficientinventorytoshipitem( text, integer, numeric )</a></li><li><a href="#public.function.sufficientinventorytoshiporder-text-integer">sufficientinventorytoshiporder( text, integer )</a></li><li><a href="#public.function.summarizedbom-integer">summarizedbom( integer )</a></li><li><a href="#public.function.summarizedbom-integer-integer">summarizedbom( integer, integer )</a></li><li><a href="#public.function.summarizedbom-integer-integer-integer">summarizedbom( integer, integer, integer )</a></li><li><a href="#public.function.summarizedbom-integer-integer-integer-integer">summarizedbom( integer, integer, integer, integer )</a></li><li><a href="#public.function.summarizetransactions-integer-date-date">summarizetransactions( integer, date, date )</a></li><li><a href="#public.function.summdemand-integer-date-date">summdemand( integer, date, date )</a></li><li><a href="#public.function.summdemand-integer-integer">summdemand( integer, integer )</a></li><li><a href="#public.function.summprod-integer-date-date">summprod( integer, date, date )</a></li><li><a href="#public.function.summprod-integer-integer">summprod( integer, integer )</a></li><li><a href="#public.function.summtransa-integer-date-date">summtransa( integer, date, date )</a></li><li><a href="#public.function.summtransa-integer-integer">summtransa( integer, integer )</a></li><li><a href="#public.function.summtransc-integer-date-date">summtransc( integer, date, date )</a></li><li><a href="#public.function.summtransc-integer-integer">summtransc( integer, integer )</a></li><li><a href="#public.function.summtransi-integer-date-date">summtransi( integer, date, date )</a></li><li><a href="#public.function.summtransi-integer-integer">summtransi( integer, integer )</a></li><li><a href="#public.function.summtransr-integer-date-date">summtransr( integer, date, date )</a></li><li><a href="#public.function.summtransr-integer-integer">summtransr( integer, integer )</a></li><li><a href="#public.function.summtranss-integer-date-date">summtranss( integer, date, date )</a></li><li><a href="#public.function.summtranss-integer-integer">summtranss( integer, integer )</a></li><li><a href="#public.function.thawaccountingperiod-integer">thawaccountingperiod( integer )</a></li><li><a href="#public.function.thawitemsite-integer">thawitemsite( integer )</a></li><li><a href="#public.function.todoitemmove-integer-integer">todoitemmove( integer, integer )</a></li><li><a href="#public.function.todoitemmovedown-integer">todoitemmovedown( integer )</a></li><li><a href="#public.function.todoitemmoveup-integer">todoitemmoveup( integer )</a></li><li><a href="#public.function.togglebankreccleared-integer-text-integer">togglebankreccleared( integer, text, integer )</a></li><li><a href="#public.function.tonumeric-text-numeric">tonumeric( text, numeric )</a></li><li><a href="#public.function.transitwhs">transitwhs(  )</a></li><li><a href="#public.function.transtype-text-integer">transtype( text, integer )</a></li><li><a href="#public.function.triggeritemcost">triggeritemcost(  )</a></li><li><a href="#public.function.unwoclockout-integer">unwoclockout( integer )</a></li><li><a href="#public.function.uomusedforitem-integer">uomusedforitem( integer )</a></li><li><a href="#public.function.updateabcclass-integer-integer-numeric-numeric-date-date">updateabcclass( integer, integer, numeric, numeric, date, date )</a></li><li><a href="#public.function.updateabcclass-integer-numeric-numeric-date-date">updateabcclass( integer, numeric, numeric, date, date )</a></li><li><a href="#public.function.updateabcclass-text-integer-numeric-numeric-date-date">updateabcclass( text, integer, numeric, numeric, date, date )</a></li><li><a href="#public.function.updateabcclass-text-numeric-numeric-date-date">updateabcclass( text, numeric, numeric, date, date )</a></li><li><a href="#public.function.updatecharassignment-text-integer-integer-text">updatecharassignment( text, integer, integer, text )</a></li><li><a href="#public.function.updatecharassignment-text-integer-integer-text-numeric">updatecharassignment( text, integer, integer, text, numeric )</a></li><li><a href="#public.function.updatecost-integer-integer-boolean-numeric">updatecost( integer, integer, boolean, numeric )</a></li><li><a href="#public.function.updatecost-integer-integer-boolean-numeric-integer">updatecost( integer, integer, boolean, numeric, integer )</a></li><li><a href="#public.function.updatecost-integer-numeric">updatecost( integer, numeric )</a></li><li><a href="#public.function.updatecost-integer-numeric-integer">updatecost( integer, numeric, integer )</a></li><li><a href="#public.function.updatecost-integer-text-boolean-numeric">updatecost( integer, text, boolean, numeric )</a></li><li><a href="#public.function.updatecost-integer-text-boolean-numeric-integer">updatecost( integer, text, boolean, numeric, integer )</a></li><li><a href="#public.function.updatecreditmemoline-api.creditmemoline-api.creditmemoline">updatecreditmemoline( api.creditmemoline, api.creditmemoline )</a></li><li><a href="#public.function.updatecustomprivs">updatecustomprivs(  )</a></li><li><a href="#public.function.updateinvoicelineitem-api.invoiceline-api.invoiceline">updateinvoicelineitem( api.invoiceline, api.invoiceline )</a></li><li><a href="#public.function.updateitemcost-integer-integer-integer-numeric-boolean">updateitemcost( integer, integer, integer, numeric, boolean )</a></li><li><a href="#public.function.updateitemsiteleadtime-integer-integer">updateitemsiteleadtime( integer, integer )</a></li><li><a href="#public.function.updatelistprice-integer-numeric">updatelistprice( integer, numeric )</a></li><li><a href="#public.function.updatelowerusercosts-integer">updatelowerusercosts( integer )</a></li><li><a href="#public.function.updatelowerusercosts-integer-boolean">updatelowerusercosts( integer, boolean )</a></li><li><a href="#public.function.updatelowlevel-integer">updatelowlevel( integer )</a></li><li><a href="#public.function.updateoutlevel-integer-integer-integerARRAY">updateoutlevel( integer, integer, integer[] )</a></li><li><a href="#public.function.updateprice-integer-bpchar-numeric">updateprice( integer, bpchar, numeric )</a></li><li><a href="#public.function.updateprice-integer-numeric">updateprice( integer, numeric )</a></li><li><a href="#public.function.updatereorderlevel-integer-integer-integerARRAY">updatereorderlevel( integer, integer, integer[] )</a></li><li><a href="#public.function.updatereorderlevel-integerARRAY-integer-boolean-integerARRAY">updatereorderlevel( integer[], integer, boolean, integer[] )</a></li><li><a href="#public.function.updatesoracost-integer-text-boolean-numeric-boolean">updatesoracost( integer, text, boolean, numeric, boolean )</a></li><li><a href="#public.function.updatestdcost-integer-numeric-numeric-text-text">updatestdcost( integer, numeric, numeric, text, text )</a></li><li><a href="#public.function.updatestdcost-integer-text-boolean-numeric">updatestdcost( integer, text, boolean, numeric )</a></li><li><a href="#public.function.updatetodoitem-integer-integer-text-text-integer-date-date-bpchar-date-date-integer-text-boolean">updatetodoitem( integer, integer, text, text, integer, date, date, bpchar, date, date, integer, text, boolean )</a></li><li><a href="#public.function.updatetodoitem-integer-integer-text-text-integer-integer-date-date-bpchar-date-date-integer-text-boolean">updatetodoitem( integer, integer, text, text, integer, integer, date, date, bpchar, date, date, integer, text, boolean )</a></li><li><a href="#public.function.updatetodoitem-integer-integer-text-text-integer-integer-integer-date-date-bpchar-date-date-integer-text-boolean">updatetodoitem( integer, integer, text, text, integer, integer, integer, date, date, bpchar, date, date, integer, text, boolean )</a></li><li><a href="#public.function.updatetodoitem-integer-integer-text-text-integer-integer-integer-date-date-bpchar-date-date-integer-text-boolean-text">updatetodoitem( integer, integer, text, text, integer, integer, integer, date, date, bpchar, date, date, integer, text, boolean, text )</a></li><li><a href="#public.function.usedefaultlocation-integer">usedefaultlocation( integer )</a></li><li><a href="#public.function.usercancreateusers-text">usercancreateusers( text )</a></li><li><a href="#public.function.userid-text">userid( text )</a></li><li><a href="#public.function.validateorderqty-integer-numeric-boolean">validateorderqty( integer, numeric, boolean )</a></li><li><a href="#public.function.validlocation-integer-integer">validlocation( integer, integer )</a></li><li><a href="#public.function.voidapcheck-integer">voidapcheck( integer )</a></li><li><a href="#public.function.voidapopenvoucher-integer">voidapopenvoucher( integer )</a></li><li><a href="#public.function.voidapopenvoucher-integer-integer">voidapopenvoucher( integer, integer )</a></li><li><a href="#public.function.voidcheck-integer">voidcheck( integer )</a></li><li><a href="#public.function.voidpostedapcheck-integer">voidpostedapcheck( integer )</a></li><li><a href="#public.function.voidpostedapcheck-integer-integer">voidpostedapcheck( integer, integer )</a></li><li><a href="#public.function.voidpostedapcheck-integer-integer-date">voidpostedapcheck( integer, integer, date )</a></li><li><a href="#public.function.voidpostedcheck-integer-integer-date">voidpostedcheck( integer, integer, date )</a></li><li><a href="#public.function.woeffectivedate-date">woeffectivedate( date )</a></li>
    </ul>
    
</ul>

    <!-- Schema Creation -->
    <!-- apiapi -->

		
		<hr>
		<h1>Schema api</h1>
		

		
		
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.account">account</a>
		</h2>
        
         <p>Account</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.account Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>account_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>parent_account</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>account_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>primary_contact_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>primary_contact_honorific</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>primary_contact_first</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>primary_contact_middle</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>primary_contact_last</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>primary_contact_suffix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>primary_contact_job_title</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>primary_contact_voice</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>primary_contact_fax</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>primary_contact_email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>primary_contact_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>primary_contact_address_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>primary_contact_address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>primary_contact_address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>primary_contact_address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>primary_contact_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>primary_contact_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>primary_contact_postalcode</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>primary_contact_country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>primary_contact_address_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>secondary_contact_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>secondary_contact_honorific</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>secondary_contact_first</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>secondary_contact_middle</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>secondary_contact_last</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>secondary_contact_suffix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>secondary_contact_job_title</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>secondary_contact_voice</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>secondary_contact_fax</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>secondary_contact_email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>secondary_contact_web</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>secondary_contact_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>secondary_contact_address_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>secondary_contact_address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>secondary_contact_address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>secondary_contact_address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>secondary_contact_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>secondary_contact_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>secondary_contact_postalcode</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>secondary_contact_country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>secondary_contact_address_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (c.crmacct_number)::character varying AS account_number
, p.crmacct_number AS parent_account
, c.crmacct_name AS account_name
, c.crmacct_active AS active
, CASE WHEN 
(c.crmacct_type = &#39;O&#39;::bpchar) THEN &#39;Organization&#39;::text ELSE &#39;Individual&#39;::text END AS &quot;type&quot;
, pc.cntct_number AS primary_contact_number
, pc.cntct_honorific AS primary_contact_honorific
, pc.cntct_first_name AS primary_contact_first
, pc.cntct_middle AS primary_contact_middle
, pc.cntct_last_name AS primary_contact_last
, pc.cntct_suffix AS primary_contact_suffix
, pc.cntct_title AS primary_contact_job_title
, pc.cntct_phone AS primary_contact_voice
, pc.cntct_fax AS primary_contact_fax
, pc.cntct_email AS primary_contact_email
,&#39;&#39;::text AS primary_contact_change
, m.addr_number AS primary_contact_address_number
, m.addr_line1 AS primary_contact_address1
, m.addr_line2 AS primary_contact_address2
, m.addr_line3 AS primary_contact_address3
, m.addr_city AS primary_contact_city
, m.addr_state AS primary_contact_state
, m.addr_postalcode AS primary_contact_postalcode
, m.addr_country AS primary_contact_country
,&#39;&#39;::text AS primary_contact_address_change
, sc.cntct_number AS secondary_contact_number
, sc.cntct_honorific AS secondary_contact_honorific
, sc.cntct_first_name AS secondary_contact_first
, sc.cntct_middle AS secondary_contact_middle
, sc.cntct_last_name AS secondary_contact_last
, sc.cntct_suffix AS secondary_contact_suffix
, sc.cntct_title AS secondary_contact_job_title
, sc.cntct_phone AS secondary_contact_voice
, sc.cntct_fax AS secondary_contact_fax
, sc.cntct_email AS secondary_contact_email
, sc.cntct_webaddr AS secondary_contact_web
,&#39;&#39;::text AS secondary_contact_change
, s.addr_number AS secondary_contact_address_number
, s.addr_line1 AS secondary_contact_address1
, s.addr_line2 AS secondary_contact_address2
, s.addr_line3 AS secondary_contact_address3
, s.addr_city AS secondary_contact_city
, s.addr_state AS secondary_contact_state
, s.addr_postalcode AS secondary_contact_postalcode
, s.addr_country AS secondary_contact_country
,&#39;&#39;::text AS secondary_contact_address_change
, c.crmacct_notes AS notes 
FROM (
     (
           (
                 (
                       (crmacct c 
                     LEFT JOIN crmacct p 
                            ON (
                                   (c.crmacct_id = p.crmacct_parent_id)
                             )
                       )
               LEFT JOIN cntct pc 
                      ON (
                             (c.crmacct_cntct_id_1 = pc.cntct_id)
                       )
                 )
         LEFT JOIN addr m 
                ON (
                       (pc.cntct_addr_id = m.addr_id)
                 )
           )
   LEFT JOIN cntct sc 
          ON (
                 (c.crmacct_cntct_id_2 = sc.cntct_id)
           )
     )
LEFT JOIN addr s 
    ON (
           (sc.cntct_addr_id = s.addr_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.accountchar">accountchar</a>
		</h2>
        
         <p>Account Characteristics</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.accountchar Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>account_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>characteristic</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>value</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (crmacct.crmacct_number)::character varying AS account_number
, (&quot;char&quot;.char_name)::character varying AS characteristic
, charass.charass_value AS value 
FROM crmacct
,&quot;char&quot;
, charass 
WHERE (
     (
           (&#39;CRMACCT&#39;::text = charass.charass_target_type)
         AND (crmacct.crmacct_id = charass.charass_target_id)
     )
   AND (charass.charass_char_id = &quot;char&quot;.char_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.accountcomment">accountcomment</a>
		</h2>
        
         <p>Account Comment</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.accountcomment Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>account_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>date</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>text</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (crmacct.crmacct_number)::character varying AS account_number
, cmnttype.cmnttype_name AS &quot;type&quot;
,&quot;comment&quot;.comment_date AS date
,&quot;comment&quot;.comment_user AS username
,&quot;comment&quot;.comment_text AS text 
FROM crmacct
, cmnttype
,&quot;comment&quot;
WHERE (
     (
           (&quot;comment&quot;.comment_source = &#39;CRMA&#39;::text)
         AND (&quot;comment&quot;.comment_source_id = crmacct.crmacct_id)
     )
   AND (&quot;comment&quot;.comment_cmnttype_id = cmnttype.cmnttype_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.accountfile">accountfile</a>
		</h2>
        
         <p>Account File</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.accountfile Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>account_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>title</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>url</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT crmacct.crmacct_number AS account_number
, url.url_title AS title
, url.url_url AS url 
FROM crmacct
, url 
WHERE (
     (crmacct.crmacct_id = url.url_source_id)
   AND (url.url_source = &#39;CRMA&#39;::text)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.accountimage">accountimage</a>
		</h2>
        
         <p>Account Image</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.accountimage Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>account_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>image_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT crmacct.crmacct_number AS account_number
, image.image_name 
FROM crmacct
, imageass
, image 
WHERE (
     (
           (crmacct.crmacct_id = imageass.imageass_source_id)
         AND (imageass.imageass_source = &#39;CRMA&#39;::text)
     )
   AND (imageass.imageass_image_id = image.image_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.address">address</a>
		</h2>
        
         <p>Address</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.address Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>address_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>postal_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (addr.addr_number)::character varying AS address_number
, addr.addr_line1 AS address1
, addr.addr_line2 AS address2
, addr.addr_line3 AS address3
, addr.addr_city AS city
, addr.addr_state AS state
, addr.addr_postalcode AS postal_code
, addr.addr_country AS country
, addr.addr_active AS active
, addr.addr_notes AS notes
,&#39;&#39;::text AS change 
FROM addr;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.addresschar">addresschar</a>
		</h2>
        
         <p>Address Characteristics</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.addresschar Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>address_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>characteristic</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>value</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (addr.addr_number)::character varying AS address_number
, (&quot;char&quot;.char_name)::character varying AS characteristic
, charass.charass_value AS value 
FROM addr
,&quot;char&quot;
, charass 
WHERE (
     (
           (&#39;ADDR&#39;::text = charass.charass_target_type)
         AND (addr.addr_id = charass.charass_target_id)
     )
   AND (charass.charass_char_id = &quot;char&quot;.char_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.addresscomment">addresscomment</a>
		</h2>
        
         <p>Address Comment</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.addresscomment Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>address_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>date</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>text</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (addr.addr_number)::character varying AS address_number
, cmnttype.cmnttype_name AS &quot;type&quot;
,&quot;comment&quot;.comment_date AS date
,&quot;comment&quot;.comment_user AS username
,&quot;comment&quot;.comment_text AS text 
FROM addr
, cmnttype
,&quot;comment&quot;
WHERE (
     (
           (&quot;comment&quot;.comment_source = &#39;ADDR&#39;::text)
         AND (&quot;comment&quot;.comment_source_id = addr.addr_id)
     )
   AND (&quot;comment&quot;.comment_cmnttype_id = cmnttype.cmnttype_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.armemo">armemo</a>
		</h2>
        
         <p>A/R Credit and Debit Memo</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.armemo Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>customer_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>document_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>due_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>document_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>document_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>order_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>journal_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>reason_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>terms</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>sales_rep</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>currency</td>
            	<td>character varying(3)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>amount</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>paid</td>
            	<td>numeric(12,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>balance</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>commission_due</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>commission_paid</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>alternate_prepaid_sales_category</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>alternate_prepaid_account</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT custinfo.cust_number AS customer_number
, aropen.aropen_docdate AS document_date
, aropen.aropen_duedate AS due_date
, CASE WHEN 
(aropen.aropen_doctype = &#39;C&#39;::bpchar) THEN &#39;Credit Memo&#39;::text ELSE &#39;Debit Memo&#39;::text END AS document_type
, aropen.aropen_docnumber AS document_number
, aropen.aropen_applyto AS order_number
, aropen.aropen_journalnumber AS journal_number
, rsncode.rsncode_code AS reason_code
, terms.terms_code AS terms
, salesrep.salesrep_number AS sales_rep
, curr.curr_abbr AS currency
, aropen.aropen_amount AS amount
, aropen.aropen_paid AS paid
, (aropen.aropen_amount - aropen.aropen_paid) AS balance
, aropen.aropen_commission_due AS commission_due
, aropen.aropen_commission_paid AS commission_paid
, aropen.aropen_notes AS notes
, salescat.salescat_name AS alternate_prepaid_sales_category
, CASE WHEN 
(aropen.aropen_accnt_id = -1) THEN NULL::text ELSE formatglaccount
(aropen.aropen_accnt_id) END AS alternate_prepaid_account 
FROM (
     (
           (
                 (
                       (
                             (aropen 
                           LEFT JOIN custinfo 
                                  ON (
                                         (custinfo.cust_id = aropen.aropen_cust_id)
                                   )
                             )
                     LEFT JOIN curr_symbol curr 
                            ON (
                                   (curr.curr_id = aropen.aropen_curr_id)
                             )
                       )
               LEFT JOIN salesrep 
                      ON (
                             (salesrep.salesrep_id = aropen.aropen_salesrep_id)
                       )
                 )
         LEFT JOIN terms 
                ON (
                       (terms.terms_id = aropen.aropen_terms_id)
                 )
           )
   LEFT JOIN salescat 
          ON (
                 (salescat.salescat_id = aropen.aropen_salescat_id)
           )
     )
LEFT JOIN rsncode 
    ON (
           (rsncode.rsncode_id = aropen.aropen_rsncode_id)
     )
)
WHERE (
     (aropen.aropen_doctype = &#39;C&#39;::bpchar)
    OR (aropen.aropen_doctype = &#39;D&#39;::bpchar)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.bom">bom</a>
		</h2>
        
         <p>Bill of Material Header</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.bom Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>revision</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>document_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>revision_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>batch_size</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>total_qty_per</td>
            	<td>numeric(20,8)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (item.item_number)::character varying AS item_number
, (bomhead.bomhead_revision)::character varying AS revision
, bomhead.bomhead_docnum AS document_number
, bomhead.bomhead_revisiondate AS revision_date
, bomhead.bomhead_batchsize AS batch_size
, bomhead.bomhead_requiredqtyper AS total_qty_per 
FROM bomhead
, item 
WHERE (bomhead.bomhead_item_id = item.item_id);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.bomitem">bomitem</a>
		</h2>
        
         <p>Bill of Material Item</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.bomitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bom_item_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bom_revision</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>sequence_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>effective</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>expires</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>qty_per</td>
            	<td>numeric(20,8)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>issue_uom</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>scrap</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>create_child_wo</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>issue_method</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>used_at</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>schedule_at_wo_operation</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ecn_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>reference</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>substitutions</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>characteristic</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>value</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT bomitem.bomitem_id AS id
, (p.item_number)::character varying AS bom_item_number
, (bomhead.bomhead_revision)::character varying AS bom_revision
, bomitem.bomitem_seqnumber AS sequence_number
, i.item_number
, CASE WHEN 
(bomitem.bomitem_effective = startoftime
     ()
) THEN &#39;Always&#39;::text ELSE formatdate
(bomitem.bomitem_effective) END AS effective
, CASE WHEN 
(bomitem.bomitem_expires = endoftime
     ()
) THEN &#39;Never&#39;::text ELSE formatdate
(bomitem.bomitem_expires) END AS expires
, bomitem.bomitem_qtyper AS qty_per
, uom.uom_name AS issue_uom
, bomitem.bomitem_scrap AS scrap
, bomitem.bomitem_createwo AS create_child_wo
, CASE WHEN 
(bomitem.bomitem_issuemethod = &#39;M&#39;::bpchar) THEN &#39;Mixed&#39;::text WHEN 
(bomitem.bomitem_issuemethod = &#39;L&#39;::bpchar) THEN &#39;Pull&#39;::text WHEN 
(bomitem.bomitem_issuemethod = &#39;S&#39;::bpchar) THEN &#39;Push&#39;::text ELSE NULL::text END AS issue_method
, formatbooseq
(p.item_id
     , bomitem.bomitem_booitem_seq_id
) AS used_at
, bomitem.bomitem_schedatwooper AS schedule_at_wo_operation
, bomitem.bomitem_ecn AS ecn_number
, bomitem.bomitem_notes AS notes
, bomitem.bomitem_ref AS reference
, CASE WHEN 
(bomitem.bomitem_subtype = &#39;N&#39;::bpchar) THEN &#39;No&#39;::text WHEN 
(bomitem.bomitem_subtype = &#39;I&#39;::bpchar) THEN &#39;Item-Defined&#39;::text WHEN 
(bomitem.bomitem_subtype = &#39;B&#39;::bpchar) THEN &#39;BOM-Defined&#39;::text ELSE NULL::text END AS substitutions
,&quot;char&quot;.char_name AS characteristic
, bomitem.bomitem_value AS value 
FROM (
     (bomitem 
   LEFT JOIN bomhead 
          ON (
                 (
                       (bomitem.bomitem_parent_item_id = bomhead.bomhead_item_id)
                     AND (bomitem.bomitem_rev_id = bomhead.bomhead_rev_id)
                 )
           )
     )
LEFT JOIN&quot;char&quot;
    ON (
           (bomitem.bomitem_char_id = &quot;char&quot;.char_id)
     )
)
, item p
, item i
, uom 
WHERE (
     (
           (bomitem.bomitem_parent_item_id = p.item_id)
         AND (bomitem.bomitem_item_id = i.item_id)
     )
   AND (bomitem.bomitem_uom_id = uom.uom_id)
)
ORDER BY p.item_number
, bomitem.bomitem_seqnumber;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.bomitemcomment">bomitemcomment</a>
		</h2>
        
         <p>Bill of Material Comment</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.bomitemcomment Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>date</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>text</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT bomitem.bomitem_id
, cmnttype.cmnttype_name AS &quot;type&quot;
,&quot;comment&quot;.comment_date AS date
,&quot;comment&quot;.comment_user AS username
,&quot;comment&quot;.comment_text AS text 
FROM (bomitem 
LEFT JOIN bomhead 
    ON (
           (
                 (bomitem.bomitem_parent_item_id = bomhead.bomhead_item_id)
               AND (bomitem.bomitem_rev_id = bomhead.bomhead_rev_id)
           )
     )
)
, item
, cmnttype
,&quot;comment&quot;
WHERE (
     (
           (
                 (&quot;comment&quot;.comment_source = &#39;BMI&#39;::text)
               AND (&quot;comment&quot;.comment_source_id = bomitem.bomitem_id)
           )
         AND (&quot;comment&quot;.comment_cmnttype_id = cmnttype.cmnttype_id)
     )
   AND (bomitem.bomitem_parent_item_id = item.item_id)
)
ORDER BY item.item_number
, bomhead.bomhead_revision
, bomitem.bomitem_seqnumber
,&quot;comment&quot;.comment_date;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.bomitemsubstitute">bomitemsubstitute</a>
		</h2>
        
         <p>Bill of Material Item Substitute</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.bomitemsubstitute Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bom_item_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bom_revision</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>sequence_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>substitute_item_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>sub_parent_uom_ratio</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ranking</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT bomitem.bomitem_id
, (p.item_number)::character varying AS bom_item_number
, (bomhead.bomhead_revision)::character varying AS bom_revision
, bomitem.bomitem_seqnumber AS sequence_number
, (s.item_number)::character varying AS substitute_item_number
, bomitemsub.bomitemsub_uomratio AS sub_parent_uom_ratio
, bomitemsub.bomitemsub_rank AS ranking 
FROM item p
, item s
, (bomitem 
LEFT JOIN bomhead 
    ON (
           (
                 (bomitem.bomitem_parent_item_id = bomhead.bomhead_item_id)
               AND (bomitem.bomitem_rev_id = bomhead.bomhead_rev_id)
           )
     )
)
, bomitemsub 
WHERE (
     (
           (p.item_id = bomitem.bomitem_parent_item_id)
         AND (s.item_id = bomitemsub.bomitemsub_item_id)
     )
   AND (bomitemsub.bomitemsub_bomitem_id = bomitem.bomitem_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.cashreceipt">cashreceipt</a>
		</h2>
        
         <p>
This view can be used as an interface to import Cash Receipt data directly  
into the system.  Required fields will be checked and default values will be 
populated</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.cashreceipt Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>customer_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>funds_type</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>check_document_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>customer_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>customer_address</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>currency</td>
            	<td>character varying(3)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>amount_received</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>post_to</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>distribution_date</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apply_balance_as</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>sales_category</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (cust.cust_number)::character varying AS customer_number
, CASE WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;C&#39;::bpchar) THEN &#39;Check&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;T&#39;::bpchar) THEN &#39;Certified Check&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;M&#39;::bpchar) THEN &#39;Master Card&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;V&#39;::bpchar) THEN &#39;Visa&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;A&#39;::bpchar) THEN &#39;American Express&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;D&#39;::bpchar) THEN &#39;Discover Card&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;R&#39;::bpchar) THEN &#39;Other Credit Card&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;K&#39;::bpchar) THEN &#39;Cash&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;W&#39;::bpchar) THEN &#39;Wire Transfer&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;O&#39;::bpchar) THEN &#39;Other&#39;::character varying ELSE NULL::character varying END AS funds_type
, (cashrcpt.cashrcpt_docnumber)::character varying AS check_document_number
, cust.cust_name AS customer_name
, cust.cust_address1 AS customer_address
, curr_symbol.curr_abbr AS currency
, cashrcpt.cashrcpt_amount AS amount_received
, bankaccnt.bankaccnt_name AS post_to
, formatdate
(cashrcpt.cashrcpt_distdate) AS distribution_date
, CASE WHEN cashrcpt.cashrcpt_usecustdeposit THEN &#39;Customer Deposit&#39;::text ELSE &#39;Credit Memo&#39;::text END AS apply_balance_as
, salescat.salescat_name AS sales_category
, cashrcpt.cashrcpt_notes AS notes 
FROM (
     (
           (
                 (cashrcpt 
               LEFT JOIN cust 
                      ON (
                             (cust.cust_id = cashrcpt.cashrcpt_cust_id)
                       )
                 )
         LEFT JOIN curr_symbol 
                ON (
                       (curr_symbol.curr_id = cashrcpt.cashrcpt_curr_id)
                 )
           )
   LEFT JOIN bankaccnt 
          ON (
                 (bankaccnt.bankaccnt_id = cashrcpt.cashrcpt_bankaccnt_id)
           )
     )
LEFT JOIN salescat 
    ON (
           (salescat.salescat_id = cashrcpt.cashrcpt_salescat_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.cashreceiptapply">cashreceiptapply</a>
		</h2>
        
         <p>
This view can be used as an interface to import Cash Receipt Application data directly  
into the system.  Required fields will be checked and default values will be 
populated</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.cashreceiptapply Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>customer_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>funds_type</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>check_document_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>doc_type</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>doc_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>customer_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>customer_address</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>doc_date</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>due_date</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>currency</td>
            	<td>character varying(3)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>open_amount</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>amount_to_apply</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (cust.cust_number)::character varying AS customer_number
, CASE WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;C&#39;::bpchar) THEN &#39;Check&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;T&#39;::bpchar) THEN &#39;Certified Check&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;M&#39;::bpchar) THEN &#39;Master Card&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;V&#39;::bpchar) THEN &#39;Visa&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;A&#39;::bpchar) THEN &#39;American Express&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;D&#39;::bpchar) THEN &#39;Discover Card&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;R&#39;::bpchar) THEN &#39;Other Credit Card&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;K&#39;::bpchar) THEN &#39;Cash&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;W&#39;::bpchar) THEN &#39;Wire Transfer&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;O&#39;::bpchar) THEN &#39;Other&#39;::character varying ELSE NULL::character varying END AS funds_type
, (cashrcpt.cashrcpt_docnumber)::character varying AS check_document_number
, (aropen.aropen_doctype)::character varying AS doc_type
, (aropen.aropen_docnumber)::character varying AS doc_number
, cust.cust_name AS customer_name
, cust.cust_address1 AS customer_address
, formatdate
(aropen.aropen_docdate) AS doc_date
, formatdate
(aropen.aropen_duedate) AS due_date
, curr_symbol.curr_abbr AS currency
, aropen.aropen_amount AS open_amount
, cashrcptitem.cashrcptitem_amount AS amount_to_apply 
FROM (
     (
           (
                 (cashrcptitem 
               LEFT JOIN cashrcpt 
                      ON (
                             (cashrcpt.cashrcpt_id = cashrcptitem.cashrcptitem_cashrcpt_id)
                       )
                 )
         LEFT JOIN cust 
                ON (
                       (cust.cust_id = cashrcpt.cashrcpt_cust_id)
                 )
           )
   LEFT JOIN curr_symbol 
          ON (
                 (curr_symbol.curr_id = cashrcpt.cashrcpt_curr_id)
           )
     )
LEFT JOIN aropen 
    ON (
           (aropen.aropen_id = cashrcptitem.cashrcptitem_aropen_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.cashreceiptapplymisc">cashreceiptapplymisc</a>
		</h2>
        
         <p>
This view can be used as an interface to import Cash Receipt Miscellaneous Application
data directly into the system.  Required fields will be checked and default values
will be populated</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.cashreceiptapplymisc Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>customer_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>funds_type</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>check_document_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>account</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>customer_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>customer_address</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>account_description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>currency</td>
            	<td>character varying(3)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>amount_to_distribute</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (cust.cust_number)::character varying AS customer_number
, CASE WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;C&#39;::bpchar) THEN &#39;Check&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;T&#39;::bpchar) THEN &#39;Certified Check&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;M&#39;::bpchar) THEN &#39;Master Card&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;V&#39;::bpchar) THEN &#39;Visa&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;A&#39;::bpchar) THEN &#39;American Express&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;D&#39;::bpchar) THEN &#39;Discover Card&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;R&#39;::bpchar) THEN &#39;Other Credit Card&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;K&#39;::bpchar) THEN &#39;Cash&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;W&#39;::bpchar) THEN &#39;Wire Transfer&#39;::character varying WHEN 
(cashrcpt.cashrcpt_fundstype = &#39;O&#39;::bpchar) THEN &#39;Other&#39;::character varying ELSE NULL::character varying END AS funds_type
, (cashrcpt.cashrcpt_docnumber)::character varying AS check_document_number
, (formatglaccount
     (accnt.accnt_id)
)::character varying AS account
, cust.cust_name AS customer_name
, cust.cust_address1 AS customer_address
, accnt.accnt_descrip AS account_description
, curr_symbol.curr_abbr AS currency
, cashrcptmisc.cashrcptmisc_amount AS amount_to_distribute
, cashrcptmisc.cashrcptmisc_notes AS notes 
FROM (
     (
           (
                 (cashrcptmisc 
               LEFT JOIN cashrcpt 
                      ON (
                             (cashrcpt.cashrcpt_id = cashrcptmisc.cashrcptmisc_cashrcpt_id)
                       )
                 )
         LEFT JOIN cust 
                ON (
                       (cust.cust_id = cashrcpt.cashrcpt_cust_id)
                 )
           )
   LEFT JOIN curr_symbol 
          ON (
                 (curr_symbol.curr_id = cashrcpt.cashrcpt_curr_id)
           )
     )
LEFT JOIN accnt 
    ON (
           (accnt.accnt_id = cashrcptmisc.cashrcptmisc_accnt_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.contact">contact</a>
		</h2>
        
         <p>Contact</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.contact Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>honorific</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>first</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>middle</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>last</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>suffix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>initials</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>crm_account</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>job_title</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>voice</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>alternate</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>fax</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>web</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>address_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>postal_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>address_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (cntct.cntct_number)::character varying AS contact_number
, cntct.cntct_honorific AS honorific
, cntct.cntct_first_name AS &quot;first&quot;
, cntct.cntct_middle AS middle
, cntct.cntct_last_name AS &quot;last&quot;
, cntct.cntct_suffix AS suffix
, cntct.cntct_initials AS initials
, crmacct.crmacct_number AS crm_account
, cntct.cntct_active AS active
, cntct.cntct_title AS job_title
, cntct.cntct_phone AS voice
, cntct.cntct_phone2 AS alternate
, cntct.cntct_fax AS fax
, cntct.cntct_email AS email
, cntct.cntct_webaddr AS web
,&#39;&#39;::text AS contact_change
, addr.addr_number AS address_number
, addr.addr_line1 AS address1
, addr.addr_line2 AS address2
, addr.addr_line3 AS address3
, addr.addr_city AS city
, addr.addr_state AS state
, addr.addr_postalcode AS postal_code
, addr.addr_country AS country
, cntct.cntct_notes AS notes
,&#39;&#39;::text AS address_change 
FROM (
     (cntct 
   LEFT JOIN addr 
          ON (
                 (cntct.cntct_addr_id = addr.addr_id)
           )
     )
LEFT JOIN crmacct 
    ON (
           (cntct.cntct_crmacct_id = crmacct.crmacct_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.contactchar">contactchar</a>
		</h2>
        
         <p>Contact Characteristics</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.contactchar Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>characteristic</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>value</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT cntct.cntct_number AS contact_number
, (&quot;char&quot;.char_name)::character varying AS characteristic
, charass.charass_value AS value 
FROM cntct
,&quot;char&quot;
, charass 
WHERE (
     (
           (&#39;CNTCT&#39;::text = charass.charass_target_type)
         AND (cntct.cntct_id = charass.charass_target_id)
     )
   AND (charass.charass_char_id = &quot;char&quot;.char_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.contactcomment">contactcomment</a>
		</h2>
        
         <p>Contact Comment</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.contactcomment Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>date</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>text</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT cntct.cntct_number AS contact_number
, cmnttype.cmnttype_name AS &quot;type&quot;
,&quot;comment&quot;.comment_date AS date
,&quot;comment&quot;.comment_user AS username
,&quot;comment&quot;.comment_text AS text 
FROM cntct
, cmnttype
,&quot;comment&quot;
WHERE (
     (
           (&quot;comment&quot;.comment_source = &#39;T&#39;::text)
         AND (&quot;comment&quot;.comment_source_id = cntct.cntct_id)
     )
   AND (&quot;comment&quot;.comment_cmnttype_id = cmnttype.cmnttype_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.creditmemo">creditmemo</a>
		</h2>
        
         <p>Credit Memo Header</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.creditmemo Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>memo_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apply_to</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>memo_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>status</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>sales_rep</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>commission</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tax_authority</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>reason_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>on_hold</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>customer_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billto_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billto_address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billto_address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billto_address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billto_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billto_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billto_postal_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billto_country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_postal_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>customer_po_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>currency</td>
            	<td>character varying(3)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>misc_charge_description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>misc_charge_amount</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>misc_charge_credit_account</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>freight</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT cmhead.cmhead_number AS memo_number
, CASE WHEN 
(cmhead.cmhead_invcnumber = &#39;-1&#39;::text) THEN &#39;&#39;::text ELSE cmhead.cmhead_invcnumber END AS apply_to
, cmhead.cmhead_docdate AS memo_date
, CASE WHEN cmhead.cmhead_posted THEN &#39;Posted&#39;::text ELSE &#39;Unposted&#39;::text END AS status
, salesrep.salesrep_number AS sales_rep
, cmhead.cmhead_commission AS commission
, COALESCE
(taxauth.taxauth_code
     ,&#39;None&#39;::text
) AS tax_authority
, COALESCE
(rsncode.rsncode_code
     ,&#39;None&#39;::text
) AS reason_code
, cmhead.cmhead_hold AS on_hold
, custinfo.cust_number AS customer_number
, cmhead.cmhead_billtoname AS billto_name
, cmhead.cmhead_billtoaddress1 AS billto_address1
, cmhead.cmhead_billtoaddress2 AS billto_address2
, cmhead.cmhead_billtoaddress3 AS billto_address3
, cmhead.cmhead_billtocity AS billto_city
, cmhead.cmhead_billtostate AS billto_state
, cmhead.cmhead_billtozip AS billto_postal_code
, cmhead.cmhead_billtocountry AS billto_country
, shiptoinfo.shipto_num AS shipto_number
, cmhead.cmhead_shipto_name AS shipto_name
, cmhead.cmhead_shipto_address1 AS shipto_address1
, cmhead.cmhead_shipto_address2 AS shipto_address2
, cmhead.cmhead_shipto_address3 AS shipto_address3
, cmhead.cmhead_shipto_city AS shipto_city
, cmhead.cmhead_shipto_state AS shipto_state
, cmhead.cmhead_shipto_zipcode AS shipto_postal_code
, cmhead.cmhead_shipto_country AS shipto_country
, cmhead.cmhead_custponumber AS customer_po_number
, cmhead.cmhead_comments AS notes
, curr.curr_abbr AS currency
, cmhead.cmhead_misc_descrip AS misc_charge_description
, cmhead.cmhead_misc AS misc_charge_amount
, CASE WHEN 
(cmhead.cmhead_misc_accnt_id = -1) THEN &#39;&#39;::text ELSE formatglaccount
(cmhead.cmhead_misc_accnt_id) END AS misc_charge_credit_account
, cmhead.cmhead_freight AS freight 
FROM (
     (
           (
                 (
                       (
                             (cmhead 
                           LEFT JOIN custinfo 
                                  ON (
                                         (custinfo.cust_id = cmhead.cmhead_cust_id)
                                   )
                             )
                     LEFT JOIN shiptoinfo 
                            ON (
                                   (shiptoinfo.shipto_id = cmhead.cmhead_shipto_id)
                             )
                       )
               LEFT JOIN curr_symbol curr 
                      ON (
                             (curr.curr_id = cmhead.cmhead_curr_id)
                       )
                 )
         LEFT JOIN salesrep 
                ON (
                       (salesrep.salesrep_id = cmhead.cmhead_salesrep_id)
                 )
           )
   LEFT JOIN taxauth 
          ON (
                 (taxauth.taxauth_id = cmhead.cmhead_taxauth_id)
           )
     )
LEFT JOIN rsncode 
    ON (
           (rsncode.rsncode_id = cmhead.cmhead_rsncode_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.creditmemoline">creditmemoline</a>
		</h2>
        
         <p>Credit Memo Line</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.creditmemoline Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>memo_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>line_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>recv_site</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>reason_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>qty_returned</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>qty_to_credit</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>qty_uom</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>net_unit_price</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>price_uom</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tax_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>tax_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tax_amount_a</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>tax_amount_b</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tax_amount_c</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT cmhead.cmhead_number AS memo_number
, cmitem.cmitem_linenumber AS line_number
, item.item_number
, whsinfo.warehous_code AS recv_site
, rsncode.rsncode_code AS reason_code
, cmitem.cmitem_qtyreturned AS qty_returned
, cmitem.cmitem_qtycredit AS qty_to_credit
, COALESCE
(qty_uom.uom_name
     ,&#39;None&#39;::text
) AS qty_uom
, cmitem.cmitem_unitprice AS net_unit_price
, COALESCE
(price_uom.uom_name
     ,&#39;None&#39;::text
) AS price_uom
, COALESCE
(taxtype.taxtype_name
     ,&#39;None&#39;::text
) AS tax_type
, COALESCE
(tax.tax_code
     ,&#39;None&#39;::text
) AS tax_code
, cmitem.cmitem_tax_ratea AS tax_amount_a
, cmitem.cmitem_tax_rateb AS tax_amount_b
, cmitem.cmitem_tax_ratec AS tax_amount_c
, cmitem.cmitem_comments AS notes 
FROM (
     (
           (
                 (
                       (
                             (
                                   (
                                         (
                                               (cmitem 
                                             LEFT JOIN cmhead 
                                                    ON (
                                                           (cmitem.cmitem_cmhead_id = cmhead.cmhead_id)
                                                     )
                                               )
                                       LEFT JOIN itemsite 
                                              ON (
                                                     (itemsite.itemsite_id = cmitem.cmitem_itemsite_id)
                                               )
                                         )
                                 LEFT JOIN item 
                                        ON (
                                               (item.item_id = itemsite.itemsite_item_id)
                                         )
                                   )
                           LEFT JOIN whsinfo 
                                  ON (
                                         (whsinfo.warehous_id = itemsite.itemsite_warehous_id)
                                   )
                             )
                     LEFT JOIN rsncode 
                            ON (
                                   (rsncode.rsncode_id = cmitem.cmitem_rsncode_id)
                             )
                       )
               LEFT JOIN taxtype 
                      ON (
                             (taxtype.taxtype_id = cmitem.cmitem_taxtype_id)
                       )
                 )
         LEFT JOIN tax 
                ON (
                       (tax.tax_id = cmitem.cmitem_tax_id)
                 )
           )
   LEFT JOIN uom qty_uom 
          ON (
                 (qty_uom.uom_id = cmitem.cmitem_qty_uom_id)
           )
     )
LEFT JOIN uom price_uom 
    ON (
           (price_uom.uom_id = cmitem.cmitem_price_uom_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.custchar">custchar</a>
		</h2>
        
         <p>Customer Characteristics</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.custchar Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>customer_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>characteristic</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>value</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (custinfo.cust_number)::character varying AS customer_number
, (&quot;char&quot;.char_name)::character varying AS characteristic
, charass.charass_value AS value 
FROM custinfo
,&quot;char&quot;
, charass 
WHERE (
     (
           (&#39;C&#39;::text = charass.charass_target_type)
         AND (custinfo.cust_id = charass.charass_target_id)
     )
   AND (charass.charass_char_id = &quot;char&quot;.char_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.custcomment">custcomment</a>
		</h2>
        
         <p>Customer Comment</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.custcomment Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>customer_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>date</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>text</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (custinfo.cust_number)::character varying AS customer_number
, cmnttype.cmnttype_name AS &quot;type&quot;
,&quot;comment&quot;.comment_date AS date
,&quot;comment&quot;.comment_user AS username
,&quot;comment&quot;.comment_text AS text 
FROM custinfo
, cmnttype
,&quot;comment&quot;
WHERE (
     (
           (&quot;comment&quot;.comment_source = &#39;C&#39;::text)
         AND (&quot;comment&quot;.comment_source_id = custinfo.cust_id)
     )
   AND (&quot;comment&quot;.comment_cmnttype_id = cmnttype.cmnttype_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.custcreditcard">custcreditcard</a>
		</h2>
        
         <p>Customer Credit Cards.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.custcreditcard Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>customer_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>credit_card_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>credit_card_number</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>name</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>street_address1</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>street_address2</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>city</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>state</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>postal_code</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>country</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>expiration_month</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>expiration_year</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>key</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (custinfo.cust_number)::character varying AS customer_number
, CASE WHEN 
(ccard.ccard_type = &#39;V&#39;::bpchar) THEN &#39;Visa&#39;::text WHEN 
(ccard.ccard_type = &#39;M&#39;::bpchar) THEN &#39;Master Card&#39;::text WHEN 
(ccard.ccard_type = &#39;A&#39;::bpchar) THEN &#39;American Express&#39;::text WHEN 
(ccard.ccard_type = &#39;D&#39;::bpchar) THEN &#39;Discover&#39;::text ELSE &#39;Not Supported&#39;::text END AS credit_card_type
, ccard.ccard_active AS active
, ccard.ccard_number AS credit_card_number
, ccard.ccard_name AS name
, ccard.ccard_address1 AS street_address1
, ccard.ccard_address2 AS street_address2
, ccard.ccard_city AS city
, ccard.ccard_state AS state
, ccard.ccard_zip AS postal_code
, ccard.ccard_country AS country
, ccard.ccard_month_expired AS expiration_month
, ccard.ccard_year_expired AS expiration_year
,&#39;&#39;::text AS &quot;key&quot;
FROM ccard
, custinfo 
WHERE (ccard.ccard_cust_id = custinfo.cust_id);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.customer">customer</a>
		</h2>
        
         <p>Customer</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.customer Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>customer_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>customer_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>customer_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>sales_rep</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>commission</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ship_via</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ship_form</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipping_charges</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>accepts_backorders</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>accepts_partial_shipments</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>allow_free_form_shipto</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>allow_free_form_billto</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>preferred_selling_site</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>default_tax_authority</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>default_terms</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>balance_method</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>default_discount</td>
            	<td>numeric(10,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>default_currency</td>
            	<td>character varying(3)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>credit_limit_currency</td>
            	<td>character varying(3)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>credit_limit</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>alternate_grace_days</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>credit_rating</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>credit_status</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>credit_status_exceed_warn</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>credit_status_exceed_hold</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>uses_purchase_orders</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>uses_blanket_pos</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billing_contact_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billing_contact_honorific</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billing_contact_first</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billing_contact_middle</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billing_contact_last</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billing_contact_suffix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billing_contact_job_title</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billing_contact_voice</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billing_contact_alternate</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billing_contact_fax</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billing_contact_email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billing_contact_web</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billing_contact_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billing_contact_address_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billing_contact_address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billing_contact_address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billing_contact_address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billing_contact_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billing_contact_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billing_contact_postalcode</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billing_contact_country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billing_contact_address_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>correspond_contact_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>correspond_contact_honorific</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>correspond_contact_first</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>correspond_contact_middle</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>correspond_contact_last</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>correspond_contact_suffix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>correspond_contact_job_title</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>correspond_contact_voice</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>correspond_contact_alternate</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>correspond_contact_fax</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>correspond_contact_email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>correspond_contact_web</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>correspond_contact_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>correspond_contact_address_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>correspond_contact_address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>correspond_contact_address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>correspond_contact_address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>correspond_contact_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>correspond_contact_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>correspond_contact_postalcode</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>correspond_contact_country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>correspond_contact_address_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>so_edi_profile</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>so_edi_email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>so_edi_cc</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>so_edi_subject</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>so_edi_filename</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>so_edi_emailbody</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invc_edi_profile</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invc_edi_email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invc_edi_cc</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invc_edi_subject</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invc_edi_filename</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invc_edi_emailbody</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (custinfo.cust_number)::character varying AS customer_number
, custtype.custtype_code AS customer_type
, custinfo.cust_name AS customer_name
, custinfo.cust_active AS active
, salesrep.salesrep_number AS sales_rep
, (custinfo.cust_commprcnt * 
     (100)::numeric
) AS commission
, custinfo.cust_shipvia AS ship_via
, shipform.shipform_name AS ship_form
, shipchrg.shipchrg_name AS shipping_charges
, custinfo.cust_backorder AS accepts_backorders
, custinfo.cust_partialship AS accepts_partial_shipments
, custinfo.cust_ffshipto AS allow_free_form_shipto
, custinfo.cust_ffbillto AS allow_free_form_billto
, whsinfo.warehous_code AS preferred_selling_site
, taxauth.taxauth_code AS default_tax_authority
, terms.terms_code AS default_terms
, CASE WHEN 
(custinfo.cust_balmethod = &#39;B&#39;::bpchar) THEN &#39;Balance Forward&#39;::text ELSE &#39;Open Item&#39;::text END AS balance_method
, custinfo.cust_discntprcnt AS default_discount
, dc.curr_abbr AS default_currency
, clc.curr_abbr AS credit_limit_currency
, custinfo.cust_creditlmt AS credit_limit
, CASE WHEN 
(COALESCE
     (custinfo.cust_gracedays
           , 0
     ) &gt; 0
) THEN custinfo.cust_gracedays ELSE NULL::integer END AS alternate_grace_days
, custinfo.cust_creditrating AS credit_rating
, CASE WHEN 
(custinfo.cust_creditstatus = &#39;G&#39;::bpchar) THEN &#39;In Good Standing&#39;::text WHEN 
(custinfo.cust_creditstatus = &#39;W&#39;::bpchar) THEN &#39;On Credit Warning&#39;::text ELSE &#39;On Credit Hold&#39;::text END AS credit_status
, custinfo.cust_autoupdatestatus AS credit_status_exceed_warn
, custinfo.cust_autoholdorders AS credit_status_exceed_hold
, custinfo.cust_usespos AS uses_purchase_orders
, custinfo.cust_blanketpos AS uses_blanket_pos
, mc.cntct_number AS billing_contact_number
, mc.cntct_honorific AS billing_contact_honorific
, mc.cntct_first_name AS billing_contact_first
, mc.cntct_middle AS billing_contact_middle
, mc.cntct_last_name AS billing_contact_last
, mc.cntct_suffix AS billing_contact_suffix
, mc.cntct_title AS billing_contact_job_title
, mc.cntct_phone AS billing_contact_voice
, mc.cntct_phone2 AS billing_contact_alternate
, mc.cntct_fax AS billing_contact_fax
, mc.cntct_email AS billing_contact_email
, mc.cntct_webaddr AS billing_contact_web
,&#39;&#39;::text AS billing_contact_change
, m.addr_number AS billing_contact_address_number
, m.addr_line1 AS billing_contact_address1
, m.addr_line2 AS billing_contact_address2
, m.addr_line3 AS billing_contact_address3
, m.addr_city AS billing_contact_city
, m.addr_state AS billing_contact_state
, m.addr_postalcode AS billing_contact_postalcode
, m.addr_country AS billing_contact_country
,&#39;&#39;::text AS billing_contact_address_change
, cc.cntct_number AS correspond_contact_number
, cc.cntct_honorific AS correspond_contact_honorific
, cc.cntct_first_name AS correspond_contact_first
, cc.cntct_middle AS correspond_contact_middle
, cc.cntct_last_name AS correspond_contact_last
, cc.cntct_suffix AS correspond_contact_suffix
, cc.cntct_title AS correspond_contact_job_title
, cc.cntct_phone AS correspond_contact_voice
, cc.cntct_phone2 AS correspond_contact_alternate
, cc.cntct_fax AS correspond_contact_fax
, cc.cntct_email AS correspond_contact_email
, cc.cntct_webaddr AS correspond_contact_web
,&#39;&#39;::text AS correspond_contact_change
, c.addr_number AS correspond_contact_address_number
, c.addr_line1 AS correspond_contact_address1
, c.addr_line2 AS correspond_contact_address2
, c.addr_line3 AS correspond_contact_address3
, c.addr_city AS correspond_contact_city
, c.addr_state AS correspond_contact_state
, c.addr_postalcode AS correspond_contact_postalcode
, c.addr_country AS correspond_contact_country
,&#39;&#39;::text AS correspond_contact_address_change
, custinfo.cust_comments AS notes
, CASE WHEN 
(custinfo.cust_soediprofile_id IS NOT NULL) THEN sedi.ediprofile_name WHEN custinfo.cust_soemaildelivery THEN &#39;Custom Email&#39;::text ELSE &#39;No EDI&#39;::text END AS so_edi_profile
, custinfo.cust_soediemail AS so_edi_email
, custinfo.cust_soedicc AS so_edi_cc
, custinfo.cust_soedisubject AS so_edi_subject
, custinfo.cust_soedifilename AS so_edi_filename
, custinfo.cust_soediemailbody AS so_edi_emailbody
, CASE WHEN 
(custinfo.cust_ediprofile_id IS NOT NULL) THEN iedi.ediprofile_name WHEN custinfo.cust_emaildelivery THEN &#39;Custom Email&#39;::text ELSE &#39;No EDI&#39;::text END AS invc_edi_profile
, custinfo.cust_ediemail AS invc_edi_email
, custinfo.cust_edicc AS invc_edi_cc
, custinfo.cust_edisubject AS invc_edi_subject
, custinfo.cust_edifilename AS invc_edi_filename
, custinfo.cust_ediemailbody AS invc_edi_emailbody 
FROM (
     (
           (
                 (
                       (
                             (
                                   (
                                         (
                                               (custinfo 
                                             LEFT JOIN shipchrg 
                                                    ON (
                                                           (custinfo.cust_shipchrg_id = shipchrg.shipchrg_id)
                                                     )
                                               )
                                       LEFT JOIN whsinfo 
                                              ON (
                                                     (custinfo.cust_preferred_warehous_id = whsinfo.warehous_id)
                                               )
                                         )
                                 LEFT JOIN ediprofile sedi 
                                        ON (
                                               (custinfo.cust_ediprofile_id = sedi.ediprofile_id)
                                         )
                                   )
                           LEFT JOIN ediprofile iedi 
                                  ON (
                                         (custinfo.cust_ediprofile_id = iedi.ediprofile_id)
                                   )
                             )
                     LEFT JOIN cntct mc 
                            ON (
                                   (custinfo.cust_cntct_id = mc.cntct_id)
                             )
                       )
               LEFT JOIN addr m 
                      ON (
                             (mc.cntct_addr_id = m.addr_id)
                       )
                 )
         LEFT JOIN cntct cc 
                ON (
                       (custinfo.cust_corrcntct_id = cc.cntct_id)
                 )
           )
   LEFT JOIN addr c 
          ON (
                 (cc.cntct_addr_id = c.addr_id)
           )
     )
LEFT JOIN taxauth 
    ON (
           (custinfo.cust_taxauth_id = taxauth.taxauth_id)
     )
)
, custtype
, salesrep
, shipform
, curr_symbol dc
, curr_symbol clc
, terms 
WHERE (
     (
           (
                 (
                       (
                             (custinfo.cust_custtype_id = custtype.custtype_id)
                           AND (custinfo.cust_salesrep_id = salesrep.salesrep_id)
                       )
                     AND (custinfo.cust_shipform_id = shipform.shipform_id)
                 )
               AND (custinfo.cust_curr_id = dc.curr_id)
           )
         AND (custinfo.cust_creditlmt_curr_id = clc.curr_id)
     )
   AND (custinfo.cust_terms_id = terms.terms_id)
)
ORDER BY custinfo.cust_number;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.customertaxreg">customertaxreg</a>
		</h2>
        
         <p>Customer Tax Registrations</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.customertaxreg Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>customer_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>tax_authority</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>registration_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (custinfo.cust_number)::character varying AS customer_number
, (taxauth.taxauth_code)::character varying AS tax_authority
, taxreg.taxreg_number AS registration_number 
FROM (
     (taxreg 
   LEFT JOIN custinfo 
          ON (
                 (custinfo.cust_id = taxreg.taxreg_rel_id)
           )
     )
LEFT JOIN taxauth 
    ON (
           (taxauth.taxauth_id = taxreg.taxreg_taxauth_id)
     )
)
WHERE (taxreg.taxreg_rel_type = &#39;C&#39;::bpchar)
ORDER BY custinfo.cust_number
, taxreg.taxreg_number;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.customertype">customertype</a>
		</h2>
        
         <p>Customer Type</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.customertype Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>code</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>enable_characteristics_profile</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (custtype.custtype_code)::character varying AS code
, custtype.custtype_descrip AS description
, custtype.custtype_char AS enable_characteristics_profile 
FROM custtype 
ORDER BY custtype.custtype_code;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.customertypechar">customertypechar</a>
		</h2>
        
         <p>Customer Type Characteristics</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.customertypechar Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>customer_type</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>characteristic</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>value</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>is_default</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (custtype.custtype_code)::character varying AS customer_type
, (&quot;char&quot;.char_name)::character varying AS characteristic
, charass.charass_value AS value
, charass.charass_default AS is_default 
FROM custtype
,&quot;char&quot;
, charass 
WHERE (
     (
           (&#39;CT&#39;::text = charass.charass_target_type)
         AND (custtype.custtype_id = charass.charass_target_id)
     )
   AND (charass.charass_char_id = &quot;char&quot;.char_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.custshipto">custshipto</a>
		</h2>
        
         <p>Customer Shipto Address</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.custshipto Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>customer_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>default_flag</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>address_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>postal_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>address_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>honorific</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>first</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>middle</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>last</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>suffix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>job_title</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>phone</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>fax</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>sales_rep</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>commission</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>zone</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tax_authority</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ship_via</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ship_form</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipping_charges</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>edi_profile</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>general_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipping_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (custinfo.cust_number)::character varying AS customer_number
, (shiptoinfo.shipto_num)::character varying AS shipto_number
, shiptoinfo.shipto_active AS active
, shiptoinfo.shipto_name AS name
, shiptoinfo.shipto_default AS default_flag
, addr.addr_number AS address_number
, addr.addr_line1 AS address1
, addr.addr_line2 AS address2
, addr.addr_line3 AS address3
, addr.addr_city AS city
, addr.addr_state AS state
, addr.addr_postalcode AS postal_code
, addr.addr_country AS country
,&#39;&#39;::text AS address_change
, cntct.cntct_number AS contact_number
, cntct.cntct_honorific AS honorific
, cntct.cntct_first_name AS &quot;first&quot;
, cntct.cntct_middle AS middle
, cntct.cntct_last_name AS &quot;last&quot;
, cntct.cntct_suffix AS suffix
, cntct.cntct_title AS job_title
, cntct.cntct_phone AS phone
, cntct.cntct_fax AS fax
, cntct.cntct_email AS email
,&#39;&#39;::text AS contact_change
, salesrep.salesrep_number AS sales_rep
, (shiptoinfo.shipto_commission * 100.0) AS commission
, shipzone.shipzone_name AS &quot;zone&quot;
, taxauth.taxauth_code AS tax_authority
, shiptoinfo.shipto_shipvia AS ship_via
, shipform.shipform_name AS ship_form
, shipchrg.shipchrg_name AS shipping_charges
, CASE WHEN 
(shiptoinfo.shipto_ediprofile_id = -1) THEN &#39;No EDI&#39;::text WHEN 
(shiptoinfo.shipto_ediprofile_id = -2) THEN &#39;Use Customer Master&#39;::text ELSE ediprofile.ediprofile_name END AS edi_profile
, shiptoinfo.shipto_comments AS general_notes
, shiptoinfo.shipto_shipcomments AS shipping_notes 
FROM custinfo
, (
     (
           (
                 (
                       (
                             (shiptoinfo 
                           LEFT JOIN shipchrg 
                                  ON (
                                         (shiptoinfo.shipto_shipchrg_id = shipchrg.shipchrg_id)
                                   )
                             )
                     LEFT JOIN ediprofile 
                            ON (
                                   (shiptoinfo.shipto_ediprofile_id = ediprofile.ediprofile_id)
                             )
                       )
               LEFT JOIN cntct 
                      ON (
                             (shiptoinfo.shipto_cntct_id = cntct.cntct_id)
                       )
                 )
         LEFT JOIN addr 
                ON (
                       (shiptoinfo.shipto_addr_id = addr.addr_id)
                 )
           )
   LEFT JOIN taxauth 
          ON (
                 (shiptoinfo.shipto_taxauth_id = taxauth.taxauth_id)
           )
     )
LEFT JOIN shipzone 
    ON (
           (shiptoinfo.shipto_shipzone_id = shipzone.shipzone_id)
     )
)
, salesrep
, shipform 
WHERE (
     (
           (custinfo.cust_id = shiptoinfo.shipto_cust_id)
         AND (custinfo.cust_salesrep_id = salesrep.salesrep_id)
     )
   AND (custinfo.cust_shipform_id = shipform.shipform_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.custtax">custtax</a>
		</h2>
        
         <p>Customer Tax Registration</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.custtax Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>customer_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>tax_authority</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>registration_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (custinfo.cust_number)::character varying AS customer_number
, (taxauth.taxauth_code)::character varying AS tax_authority
, taxreg.taxreg_number AS registration_number 
FROM custinfo
, taxauth
, taxreg 
WHERE (
     (
           (taxreg.taxreg_rel_type = &#39;C&#39;::bpchar)
         AND (taxreg.taxreg_rel_id = custinfo.cust_id)
     )
   AND (taxreg.taxreg_taxauth_id = taxauth.taxauth_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.employee">employee</a>
		</h2>
        
         <p>Employee</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.employee Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>code</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>honorific</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>first</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>middle</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>last</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>suffix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>job_title</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>voice</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>alternate</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>fax</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>web</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>address_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>postalcode</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>address_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>site</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>manager_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>wage_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>wage</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>wage_currency</td>
            	<td>character varying(3)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>wage_period</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>department</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shift</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>is_user</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>is_salesrep</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>image</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (e.emp_code)::character varying AS code
, (e.emp_number)::character varying AS number
, e.emp_active AS active
, cntct.cntct_number AS contact_number
, cntct.cntct_honorific AS honorific
, cntct.cntct_first_name AS &quot;first&quot;
, cntct.cntct_middle AS middle
, cntct.cntct_last_name AS &quot;last&quot;
, cntct.cntct_suffix AS suffix
, cntct.cntct_title AS job_title
, cntct.cntct_phone AS voice
, cntct.cntct_phone2 AS alternate
, cntct.cntct_fax AS fax
, cntct.cntct_email AS email
, cntct.cntct_webaddr AS web
,&#39;&#39;::text AS contact_change
, addr.addr_number AS address_number
, addr.addr_line1 AS address1
, addr.addr_line2 AS address2
, addr.addr_line3 AS address3
, addr.addr_city AS city
, addr.addr_state AS state
, addr.addr_postalcode AS postalcode
, addr.addr_country AS country
,&#39;&#39;::text AS address_change
, whsinfo.warehous_code AS site
, m.emp_code AS manager_code
, CASE WHEN 
(e.emp_wage_type = &#39;H&#39;::text) THEN &#39;Hourly&#39;::text WHEN 
(e.emp_wage_type = &#39;S&#39;::text) THEN &#39;Salaried&#39;::text WHEN 
(e.emp_wage_type IS NULL) THEN NULL::text ELSE &#39;Error&#39;::text END AS wage_type
, e.emp_wage AS wage
, curr_symbol.curr_abbr AS wage_currency
, CASE WHEN 
(e.emp_wage_period = &#39;H&#39;::text) THEN &#39;Hour&#39;::text WHEN 
(e.emp_wage_period = &#39;D&#39;::text) THEN &#39;Day&#39;::text WHEN 
(e.emp_wage_period = &#39;W&#39;::text) THEN &#39;Week&#39;::text WHEN 
(e.emp_wage_period = &#39;BW&#39;::text) THEN &#39;Biweek&#39;::text WHEN 
(e.emp_wage_period = &#39;M&#39;::text) THEN &#39;Month&#39;::text WHEN 
(e.emp_wage_period = &#39;Y&#39;::text) THEN &#39;Year&#39;::text WHEN 
(e.emp_wage_period IS NULL) THEN NULL::text ELSE &#39;Error&#39;::text END AS wage_period
, dept.dept_number AS department
, shift.shift_number AS shift
, (e.emp_usr_id IS NOT NULL) AS is_user
, (salesrep.salesrep_id IS NOT NULL) AS is_salesrep
, e.emp_notes AS notes
, image.image_name AS image 
FROM (
     (
           (
                 (
                       (
                             (
                                   (
                                         (
                                               (emp e 
                                             LEFT JOIN cntct 
                                                    ON (
                                                           (e.emp_cntct_id = cntct.cntct_id)
                                                     )
                                               )
                                       LEFT JOIN addr 
                                              ON (
                                                     (cntct.cntct_addr_id = addr.addr_id)
                                               )
                                         )
                                 LEFT JOIN whsinfo 
                                        ON (
                                               (e.emp_warehous_id = whsinfo.warehous_id)
                                         )
                                   )
                           LEFT JOIN emp m 
                                  ON (
                                         (e.emp_mgr_emp_id = m.emp_id)
                                   )
                             )
                     LEFT JOIN dept 
                            ON (
                                   (e.emp_dept_id = dept.dept_id)
                             )
                       )
               LEFT JOIN shift 
                      ON (
                             (e.emp_shift_id = shift.shift_id)
                       )
                 )
         LEFT JOIN salesrep 
                ON (
                       (e.emp_code = salesrep.salesrep_number)
                 )
           )
   LEFT JOIN image 
          ON (
                 (e.emp_image_id = image.image_id)
           )
     )
  JOIN curr_symbol 
    ON (
           (e.emp_wage_curr_id = curr_symbol.curr_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.employeechar">employeechar</a>
		</h2>
        
         <p>Employee Characteristics</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.employeechar Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>employee_code</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>characteristic</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>value</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (emp.emp_code)::character varying AS employee_code
, (&quot;char&quot;.char_name)::character varying AS characteristic
, charass.charass_value AS value 
FROM emp
,&quot;char&quot;
, charass 
WHERE (
     (
           (&#39;EMP&#39;::text = charass.charass_target_type)
         AND (emp.emp_id = charass.charass_target_id)
     )
   AND (charass.charass_char_id = &quot;char&quot;.char_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.employeecomment">employeecomment</a>
		</h2>
        
         <p>Employee Comment</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.employeecomment Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>code</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>type</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>date</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>text</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (emp.emp_code)::character varying AS code
, (cmnttype.cmnttype_name)::character varying AS &quot;type&quot;
,&quot;comment&quot;.comment_date AS date
,&quot;comment&quot;.comment_user AS username
,&quot;comment&quot;.comment_text AS text 
FROM emp
, cmnttype
,&quot;comment&quot;
WHERE (
     (
           (&quot;comment&quot;.comment_source = &#39;EMP&#39;::text)
         AND (&quot;comment&quot;.comment_source_id = emp.emp_id)
     )
   AND (&quot;comment&quot;.comment_cmnttype_id = cmnttype.cmnttype_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.extshipmaint">extshipmaint</a>
		</h2>
        
         <p>External Shipping Maintenance</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.extshipmaint Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>so_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipment_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipper</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>package_tracking_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>void</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billing_option</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>weight</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>base_freight</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>base_freight_currency</td>
            	<td>character varying(3)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>total_freight</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>total_freight_currency</td>
            	<td>character varying(3)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>package_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tracking_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>last_updated</td>
            	<td>timestamp without time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (shipdata.shipdata_cohead_number)::character varying AS so_number
, (shipdata.shipdata_shiphead_number)::character varying AS shipment_number
, (shipdata.shipdata_shipper)::character varying AS shipper
, (shipdata.shipdata_cosmisc_packnum_tracknum)::character varying AS package_tracking_number
, shipdata.shipdata_void_ind AS void
, shipdata.shipdata_billing_option AS billing_option
, shipdata.shipdata_weight AS weight
, shipdata.shipdata_base_freight AS base_freight
, base.curr_abbr AS base_freight_currency
, shipdata.shipdata_total_freight AS total_freight
, total.curr_abbr AS total_freight_currency
, shipdata.shipdata_package_type AS package_type
, shipdata.shipdata_cosmisc_tracknum AS tracking_number
, shipdata.shipdata_lastupdated AS last_updated 
FROM shipdata
, curr_symbol base
, curr_symbol total 
WHERE (
     (shipdata.shipdata_base_freight_curr_id = base.curr_id)
   AND (shipdata.shipdata_total_freight_curr_id = total.curr_id)
)
ORDER BY shipdata.shipdata_cohead_number
, shipdata.shipdata_shiphead_number;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.freightpricingscheduleitem">freightpricingscheduleitem</a>
		</h2>
        
         <p>Freight Pricing Schedule Item</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.freightpricingscheduleitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>pricing_schedule</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>qty_break</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>qty_uom</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>price</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>price_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>from_site</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>to_shipzone</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ship_via</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>freight_class</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (ipshead.ipshead_name)::character varying AS pricing_schedule
, ipsfreight.ipsfreight_qtybreak AS qty_break
, (qtyuom.uom_name)::character varying AS qty_uom
, ipsfreight.ipsfreight_price AS price
, CASE WHEN 
(ipsfreight.ipsfreight_type = &#39;F&#39;::bpchar) THEN &#39;Flat Rate&#39;::text ELSE &#39;Price Per UOM&#39;::text END AS price_type
, COALESCE
(whsinfo.warehous_code
     ,&#39;Any&#39;::text
) AS from_site
, COALESCE
(shipzone.shipzone_name
     ,&#39;Any&#39;::text
) AS to_shipzone
, COALESCE
(ipsfreight.ipsfreight_shipvia
     ,&#39;Any&#39;::text
) AS ship_via
, COALESCE
(freightclass.freightclass_code
     ,&#39;Any&#39;::text
) AS freight_class 
FROM (
     (
           (
                 (
                       (ipsfreight 
                          JOIN ipshead 
                            ON (
                                   (ipsfreight.ipsfreight_ipshead_id = ipshead.ipshead_id)
                             )
                       )
               LEFT JOIN uom qtyuom 
                      ON (qtyuom.uom_item_weight)
                 )
         LEFT JOIN whsinfo 
                ON (
                       (whsinfo.warehous_id = ipsfreight.ipsfreight_warehous_id)
                 )
           )
   LEFT JOIN shipzone 
          ON (
                 (shipzone.shipzone_id = ipsfreight.ipsfreight_shipzone_id)
           )
     )
LEFT JOIN freightclass 
    ON (
           (freightclass.freightclass_id = ipsfreight.ipsfreight_freightclass_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.glaccount">glaccount</a>
		</h2>
        
         <p>GL Account</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.glaccount Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>company</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>profit_center</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>account_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>sub_account</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ext_reference</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>sub_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>allow_posting_to_closed_periods</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>forward_update_trial_balances</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (accnt.accnt_company)::character varying AS company
, (accnt.accnt_profit)::character varying AS profit_center
, (accnt.accnt_number)::character varying AS account_number
, (accnt.accnt_sub)::character varying AS sub_account
, accnt.accnt_descrip AS description
, accnt.accnt_extref AS ext_reference
, CASE WHEN 
(accnt.accnt_type = &#39;A&#39;::bpchar) THEN &#39;Asset&#39;::text WHEN 
(accnt.accnt_type = &#39;L&#39;::bpchar) THEN &#39;Liability&#39;::text WHEN 
(accnt.accnt_type = &#39;E&#39;::bpchar) THEN &#39;Expense&#39;::text WHEN 
(accnt.accnt_type = &#39;R&#39;::bpchar) THEN &#39;Revenue&#39;::text WHEN 
(accnt.accnt_type = &#39;Q&#39;::bpchar) THEN &#39;Equity&#39;::text ELSE &#39;?&#39;::text END AS &quot;type&quot;
, accnt.accnt_subaccnttype_code AS sub_type
, accnt.accnt_closedpost AS allow_posting_to_closed_periods
, accnt.accnt_forwardupdate AS forward_update_trial_balances
, accnt.accnt_comments AS notes 
FROM accnt 
ORDER BY accnt.accnt_company
, accnt.accnt_profit
, accnt.accnt_number
, accnt.accnt_sub;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.incident">incident</a>
		</h2>
        
         <p>Incident</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.incident Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>incident_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>category</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>crm_account</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>assigned_to</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>status</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>severity</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>priority</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>resolution</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>honorific</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>first</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>middle</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>last</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>suffix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>job_title</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>phone</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>fax</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>lot_serial_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ar_doc_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ar_doc_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT incdt.incdt_number AS incident_number
, incdtcat.incdtcat_name AS category
, incdt.incdt_summary AS description
, crmacct.crmacct_number AS crm_account
, incdt.incdt_assigned_username AS assigned_to
, CASE WHEN 
(incdt.incdt_status = &#39;N&#39;::bpchar) THEN &#39;New&#39;::text WHEN 
(incdt.incdt_status = &#39;F&#39;::bpchar) THEN &#39;Feedback&#39;::text WHEN 
(incdt.incdt_status = &#39;C&#39;::bpchar) THEN &#39;Confirmed&#39;::text WHEN 
(incdt.incdt_status = &#39;A&#39;::bpchar) THEN &#39;Assigned&#39;::text WHEN 
(incdt.incdt_status = &#39;R&#39;::bpchar) THEN &#39;Resolved&#39;::text WHEN 
(incdt.incdt_status = &#39;L&#39;::bpchar) THEN &#39;Closed&#39;::text ELSE &#39;?&#39;::text END AS status
, incdtseverity.incdtseverity_name AS severity
, incdtpriority.incdtpriority_name AS priority
, incdtresolution.incdtresolution_name AS resolution
, cntct.cntct_number AS contact_number
, cntct.cntct_honorific AS honorific
, cntct.cntct_first_name AS &quot;first&quot;
, cntct.cntct_middle AS middle
, cntct.cntct_last_name AS &quot;last&quot;
, cntct.cntct_suffix AS suffix
, cntct.cntct_title AS job_title
, cntct.cntct_phone AS phone
, cntct.cntct_fax AS fax
, cntct.cntct_email AS email
,&#39;&#39;::text AS contact_change
, incdt.incdt_descrip AS notes
, item.item_number
, incdt.incdt_lotserial AS lot_serial_number
, CASE WHEN 
(aropen.aropen_doctype = &#39;C&#39;::bpchar) THEN &#39;C/M&#39;::text WHEN 
(aropen.aropen_doctype = &#39;D&#39;::bpchar) THEN &#39;D/M&#39;::text WHEN 
(aropen.aropen_doctype = &#39;I&#39;::bpchar) THEN &#39;Invoice&#39;::text WHEN 
(aropen.aropen_doctype = &#39;R&#39;::bpchar) THEN &#39;C/D&#39;::text ELSE &#39;&#39;::text END AS ar_doc_type
, aropen.aropen_docnumber AS ar_doc_number 
FROM (
     (
           (
                 (
                       (
                             (
                                   (
                                         (incdt 
                                       LEFT JOIN incdtcat 
                                              ON (
                                                     (incdtcat.incdtcat_id = incdt.incdt_incdtcat_id)
                                               )
                                         )
                                 LEFT JOIN crmacct 
                                        ON (
                                               (crmacct.crmacct_id = incdt.incdt_crmacct_id)
                                         )
                                   )
                           LEFT JOIN incdtseverity 
                                  ON (
                                         (incdtseverity.incdtseverity_id = incdt.incdt_incdtseverity_id)
                                   )
                             )
                     LEFT JOIN incdtpriority 
                            ON (
                                   (incdtpriority.incdtpriority_id = incdt.incdt_incdtpriority_id)
                             )
                       )
               LEFT JOIN incdtresolution 
                      ON (
                             (incdtresolution.incdtresolution_id = incdt.incdt_incdtresolution_id)
                       )
                 )
         LEFT JOIN cntct 
                ON (
                       (cntct.cntct_id = incdt.incdt_cntct_id)
                 )
           )
   LEFT JOIN item 
          ON (
                 (item.item_id = incdt.incdt_item_id)
           )
     )
LEFT JOIN aropen 
    ON (
           (aropen.aropen_id = incdt.incdt_aropen_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.incidentcomment">incidentcomment</a>
		</h2>
        
         <p>Incident Comment</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.incidentcomment Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>incident_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>date</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>text</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT incdt.incdt_number AS incident_number
, cmnttype.cmnttype_name AS &quot;type&quot;
,&quot;comment&quot;.comment_date AS date
,&quot;comment&quot;.comment_user AS username
,&quot;comment&quot;.comment_text AS text 
FROM incdt
, cmnttype
,&quot;comment&quot;
WHERE (
     (
           (&quot;comment&quot;.comment_source = &#39;INCDT&#39;::text)
         AND (&quot;comment&quot;.comment_source_id = incdt.incdt_id)
     )
   AND (&quot;comment&quot;.comment_cmnttype_id = cmnttype.cmnttype_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.incidentfile">incidentfile</a>
		</h2>
        
         <p>Incident File</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.incidentfile Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>incident_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>title</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>url</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT incdt.incdt_number AS incident_number
, url.url_title AS title
, url.url_url AS url 
FROM incdt
, url 
WHERE (
     (incdt.incdt_id = url.url_source_id)
   AND (url.url_source = &#39;INCDT&#39;::text)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.incidentimage">incidentimage</a>
		</h2>
        
         <p>Incident Image</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.incidentimage Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>incident_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>image_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT incdt.incdt_number AS incident_number
, image.image_name 
FROM incdt
, imageass
, image 
WHERE (
     (
           (incdt.incdt_id = imageass.imageass_source_id)
         AND (imageass.imageass_source = &#39;INCDT&#39;::text)
     )
   AND (imageass.imageass_image_id = image.image_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.invoice">invoice</a>
		</h2>
        
         <p>
This view can be used as an interface to import Invioce Header data directly  
into the system.  Required fields will be checked and default values will be 
populated</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.invoice Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invoice_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>order_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invoice_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ship_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>order_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>sales_rep</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>commission</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>tax_authority</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>terms</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>customer_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billto_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billto_address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billto_address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billto_address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billto_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billto_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billto_postal_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billto_country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billto_phone</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_postal_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_phone</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>po_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ship_via</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>project_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>fob</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>misc_charge_description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>misc_charge</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>misc_charge_account_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>freight</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>currency</td>
            	<td>character varying(3)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tax_currency</td>
            	<td>character varying(3)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>misc_tax_adjustment_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>misc_tax_adjustment_amount_a</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>misc_tax_adjustment_amount_b</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>misc_tax_adjustment_amount_c</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>freight_tax_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>freight_tax_amount_a</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>freight_tax_amount_b</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>freight_tax_amount_c</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>payment</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT invchead.invchead_invcnumber AS invoice_number
, invchead.invchead_ordernumber AS order_number
, invchead.invchead_invcdate AS invoice_date
, invchead.invchead_shipdate AS ship_date
, invchead.invchead_orderdate AS order_date
, salesrep.salesrep_number AS sales_rep
, invchead.invchead_commission AS commission
, COALESCE
(taxauth.taxauth_code
     ,&#39;None&#39;::text
) AS tax_authority
, terms.terms_code AS terms
, custinfo.cust_number AS customer_number
, invchead.invchead_billto_name AS billto_name
, invchead.invchead_billto_address1 AS billto_address1
, invchead.invchead_billto_address2 AS billto_address2
, invchead.invchead_billto_address3 AS billto_address3
, invchead.invchead_billto_city AS billto_city
, invchead.invchead_billto_state AS billto_state
, invchead.invchead_billto_zipcode AS billto_postal_code
, invchead.invchead_billto_country AS billto_country
, invchead.invchead_billto_phone AS billto_phone
, shiptoinfo.shipto_num AS shipto_number
, invchead.invchead_shipto_name AS shipto_name
, invchead.invchead_shipto_address1 AS shipto_address1
, invchead.invchead_shipto_address2 AS shipto_address2
, invchead.invchead_shipto_address3 AS shipto_address3
, invchead.invchead_shipto_city AS shipto_city
, invchead.invchead_shipto_state AS shipto_state
, invchead.invchead_shipto_zipcode AS shipto_postal_code
, invchead.invchead_shipto_country AS shipto_country
, invchead.invchead_shipto_phone AS shipto_phone
, invchead.invchead_ponumber AS po_number
, invchead.invchead_shipvia AS ship_via
, prj.prj_number AS project_number
, invchead.invchead_fob AS fob
, invchead.invchead_misc_descrip AS misc_charge_description
, invchead.invchead_misc_amount AS misc_charge
, CASE WHEN 
(invchead.invchead_misc_accnt_id = -1) THEN NULL::text ELSE formatglaccount
(invchead.invchead_misc_accnt_id) END AS misc_charge_account_number
, invchead.invchead_freight AS freight
, curr.curr_abbr AS currency
, taxcurr.curr_abbr AS tax_currency
, COALESCE
(adjtax.tax_code
     ,&#39;None&#39;::text
) AS misc_tax_adjustment_code
, invchead.invchead_adjtax_ratea AS misc_tax_adjustment_amount_a
, invchead.invchead_adjtax_rateb AS misc_tax_adjustment_amount_b
, invchead.invchead_adjtax_ratec AS misc_tax_adjustment_amount_c
, COALESCE
(frttax.tax_code
     ,&#39;None&#39;::text
) AS freight_tax_code
, invchead.invchead_freighttax_ratea AS freight_tax_amount_a
, invchead.invchead_freighttax_rateb AS freight_tax_amount_b
, invchead.invchead_freighttax_ratec AS freight_tax_amount_c
, invchead.invchead_payment AS payment
, invchead.invchead_notes AS notes 
FROM (
     (
           (
                 (
                       (
                             (
                                   (
                                         (
                                               (
                                                     (invchead 
                                                   LEFT JOIN custinfo 
                                                          ON (
                                                                 (custinfo.cust_id = invchead.invchead_cust_id)
                                                           )
                                                     )
                                             LEFT JOIN shiptoinfo 
                                                    ON (
                                                           (shiptoinfo.shipto_id = invchead.invchead_shipto_id)
                                                     )
                                               )
                                       LEFT JOIN prj 
                                              ON (
                                                     (prj.prj_id = invchead.invchead_prj_id)
                                               )
                                         )
                                 LEFT JOIN curr_symbol curr 
                                        ON (
                                               (curr.curr_id = invchead.invchead_curr_id)
                                         )
                                   )
                           LEFT JOIN curr_symbol taxcurr 
                                  ON (
                                         (taxcurr.curr_id = invchead.invchead_tax_curr_id)
                                   )
                             )
                     LEFT JOIN salesrep 
                            ON (
                                   (salesrep.salesrep_id = invchead.invchead_salesrep_id)
                             )
                       )
               LEFT JOIN terms 
                      ON (
                             (terms.terms_id = invchead.invchead_terms_id)
                       )
                 )
         LEFT JOIN tax adjtax 
                ON (
                       (adjtax.tax_id = invchead.invchead_adjtax_id)
                 )
           )
   LEFT JOIN tax frttax 
          ON (
                 (frttax.tax_id = invchead.invchead_adjtax_id)
           )
     )
LEFT JOIN taxauth 
    ON (
           (taxauth.taxauth_id = invchead.invchead_taxauth_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.invoiceline">invoiceline</a>
		</h2>
        
         <p>
This view can be used as an interface to import Invioce Line Items data directly  
into the system.  Required fields will be checked and default values will be 
populated</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.invoiceline Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invoice_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>line_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>misc_item_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>misc_item_description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>sales_category</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>customer_part_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>qty_ordered</td>
            	<td>numeric(20,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>qty_billed</td>
            	<td>numeric(20,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>net_unit_price</td>
            	<td>numeric(20,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tax_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>tax_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tax_amount_a</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>tax_amount_b</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tax_amount_c</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>qty_uom</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>price_uom</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT invchead.invchead_invcnumber AS invoice_number
, invcitem.invcitem_linenumber AS line_number
, item.item_number
, invcitem.invcitem_number AS misc_item_number
, invcitem.invcitem_descrip AS misc_item_description
, salescat.salescat_name AS sales_category
, invcitem.invcitem_custpn AS customer_part_number
, invcitem.invcitem_ordered AS qty_ordered
, invcitem.invcitem_billed AS qty_billed
, invcitem.invcitem_price AS net_unit_price
, COALESCE
(taxtype.taxtype_name
     ,&#39;None&#39;::text
) AS tax_type
, COALESCE
(tax.tax_code
     ,&#39;None&#39;::text
) AS tax_code
, invcitem.invcitem_tax_ratea AS tax_amount_a
, invcitem.invcitem_tax_rateb AS tax_amount_b
, invcitem.invcitem_tax_ratec AS tax_amount_c
, COALESCE
(qty_uom.uom_name
     ,&#39;None&#39;::text
) AS qty_uom
, COALESCE
(price_uom.uom_name
     ,&#39;None&#39;::text
) AS price_uom
, invcitem.invcitem_notes AS notes 
FROM (
     (
           (
                 (
                       (
                             (
                                   (invcitem 
                                 LEFT JOIN invchead 
                                        ON (
                                               (invcitem.invcitem_invchead_id = invchead.invchead_id)
                                         )
                                   )
                           LEFT JOIN item 
                                  ON (
                                         (item.item_id = invcitem.invcitem_item_id)
                                   )
                             )
                     LEFT JOIN salescat 
                            ON (
                                   (salescat.salescat_id = invcitem.invcitem_salescat_id)
                             )
                       )
               LEFT JOIN taxtype 
                      ON (
                             (taxtype.taxtype_id = invcitem.invcitem_taxtype_id)
                       )
                 )
         LEFT JOIN tax 
                ON (
                       (tax.tax_id = invcitem.invcitem_tax_id)
                 )
           )
   LEFT JOIN uom qty_uom 
          ON (
                 (qty_uom.uom_id = invcitem.invcitem_qty_uom_id)
           )
     )
LEFT JOIN uom price_uom 
    ON (
           (price_uom.uom_id = invcitem.invcitem_price_uom_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.item">item</a>
		</h2>
        
         <p>Item</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.item Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>description1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>description2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>maximum_desired_cost</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>class_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>inventory_uom</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>pick_list_item</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>fractional</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>configured</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>planning_system</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_is_sold</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>product_category</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>exclusive</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>list_price</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>list_price_uom</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>upc_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>product_weight</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>packaging_weight</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ext_description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (item.item_number)::character varying AS item_number
, item.item_active AS active
, item.item_descrip1 AS description1
, item.item_descrip2 AS description2
, CASE WHEN 
(item.item_type = &#39;P&#39;::bpchar) THEN &#39;Purchased&#39;::text WHEN 
(item.item_type = &#39;M&#39;::bpchar) THEN &#39;Manufactured&#39;::text WHEN 
(item.item_type = &#39;J&#39;::bpchar) THEN &#39;Job&#39;::text WHEN 
(item.item_type = &#39;F&#39;::bpchar) THEN &#39;Phantom&#39;::text WHEN 
(item.item_type = &#39;R&#39;::bpchar) THEN &#39;Reference&#39;::text WHEN 
(item.item_type = &#39;S&#39;::bpchar) THEN &#39;Costing&#39;::text WHEN 
(item.item_type = &#39;T&#39;::bpchar) THEN &#39;Tooling&#39;::text WHEN 
(item.item_type = &#39;O&#39;::bpchar) THEN &#39;Outside Process&#39;::text WHEN 
(item.item_type = &#39;L&#39;::bpchar) THEN &#39;Planning&#39;::text WHEN 
(item.item_type = &#39;B&#39;::bpchar) THEN &#39;Breeder&#39;::text WHEN 
(item.item_type = &#39;C&#39;::bpchar) THEN &#39;Co-Product&#39;::text WHEN 
(item.item_type = &#39;Y&#39;::bpchar) THEN &#39;By-Product&#39;::text ELSE NULL::text END AS item_type
, item.item_maxcost AS maximum_desired_cost
, classcode.classcode_code AS class_code
, i.uom_name AS inventory_uom
, item.item_picklist AS pick_list_item
, item.item_fractional AS fractional
, item.item_config AS configured
, CASE WHEN 
(item.item_planning_type = &#39;N&#39;::bpchar) THEN &#39;None&#39;::text WHEN 
(item.item_planning_type = &#39;M&#39;::bpchar) THEN &#39;MRP&#39;::text WHEN 
(item.item_planning_type = &#39;S&#39;::bpchar) THEN &#39;MPS&#39;::text ELSE NULL::text END AS planning_system
, item.item_sold AS item_is_sold
, prodcat.prodcat_code AS product_category
, item.item_exclusive AS &quot;exclusive&quot;
, item.item_listprice AS list_price
, p.uom_name AS list_price_uom
, item.item_upccode AS upc_code
, item.item_prodweight AS product_weight
, item.item_packweight AS packaging_weight
, item.item_comments AS notes
, item.item_extdescrip AS ext_description 
FROM (item 
LEFT JOIN prodcat 
    ON (
           (item.item_prodcat_id = prodcat.prodcat_id)
     )
)
, classcode
, uom i
, uom p 
WHERE (
     (
           (item.item_classcode_id = classcode.classcode_id)
         AND (item.item_inv_uom_id = i.uom_id)
     )
   AND (item.item_price_uom_id = p.uom_id)
)
ORDER BY (item.item_number)::character varying;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.itemalias">itemalias</a>
		</h2>
        
         <p>Item Alias</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.itemalias Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>alias_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>use_description</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>description1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>description2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (item.item_number)::character varying AS item_number
, itemalias.itemalias_number AS alias_number
, itemalias.itemalias_usedescrip AS use_description
, itemalias.itemalias_descrip1 AS description1
, itemalias.itemalias_descrip2 AS description2
, itemalias.itemalias_comments AS comments 
FROM item
, itemalias 
WHERE (item.item_id = itemalias.itemalias_item_id);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.itemchar">itemchar</a>
		</h2>
        
         <p>Item Characteristic</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.itemchar Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>characteristic</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>value</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>is_default</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (item.item_number)::character varying AS item_number
, (&quot;char&quot;.char_name)::character varying AS characteristic
, charass.charass_value AS value
, charass.charass_default AS is_default 
FROM item
,&quot;char&quot;
, charass 
WHERE (
     (
           (&#39;I&#39;::text = charass.charass_target_type)
         AND (item.item_id = charass.charass_target_id)
     )
   AND (charass.charass_char_id = &quot;char&quot;.char_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.itemcomment">itemcomment</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.itemcomment Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>date</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>text</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (item.item_number)::character varying AS item_number
, cmnttype.cmnttype_name AS &quot;type&quot;
,&quot;comment&quot;.comment_date AS date
,&quot;comment&quot;.comment_user AS username
,&quot;comment&quot;.comment_text AS text 
FROM item
, cmnttype
,&quot;comment&quot;
WHERE (
     (
           (&quot;comment&quot;.comment_source = &#39;I&#39;::text)
         AND (&quot;comment&quot;.comment_source_id = item.item_id)
     )
   AND (&quot;comment&quot;.comment_cmnttype_id = cmnttype.cmnttype_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.itemcost">itemcost</a>
		</h2>
        
         <p>Item Cost</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.itemcost Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>character varying(100)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>costing_element</td>
            	<td>character varying(100)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>actual_cost</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>currency</td>
            	<td>character varying(3)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>post_to_standard</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (item.item_number)::character varying
(100) AS item_number
, (costelem.costelem_type)::character varying
(100) AS costing_element
, itemcost.itemcost_actcost AS actual_cost
, curr_symbol.curr_abbr AS currency
, false AS post_to_standard 
FROM (
     (
           (itemcost 
         LEFT JOIN item 
                ON (
                       (itemcost.itemcost_item_id = item.item_id)
                 )
           )
   LEFT JOIN costelem 
          ON (
                 (itemcost.itemcost_costelem_id = costelem.costelem_id)
           )
     )
LEFT JOIN curr_symbol 
    ON (
           (itemcost.itemcost_curr_id = curr_symbol.curr_id)
     )
)
ORDER BY (item.item_number)::character varying
(100)
, (costelem.costelem_type)::character varying
(100);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.itemfile">itemfile</a>
		</h2>
        
         <p>Item File</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.itemfile Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>title</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>url</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (item.item_number)::character varying AS item_number
, url.url_title AS title
, url.url_url AS url 
FROM item
, url 
WHERE (
     (item.item_id = url.url_source_id)
   AND (url.url_source = &#39;I&#39;::text)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.itemimage">itemimage</a>
		</h2>
        
         <p>Item Image</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.itemimage Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>purpose</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>image_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (item.item_number)::character varying AS item_number
, CASE WHEN 
(imageass.imageass_purpose = &#39;P&#39;::bpchar) THEN &#39;Product Description&#39;::text WHEN 
(imageass.imageass_purpose = &#39;I&#39;::bpchar) THEN &#39;Inventory Description&#39;::text WHEN 
(imageass.imageass_purpose = &#39;E&#39;::bpchar) THEN &#39;Engineering Reference&#39;::text WHEN 
(imageass.imageass_purpose = &#39;M&#39;::bpchar) THEN &#39;Miscellaneous&#39;::text ELSE &#39;Other&#39;::text END AS purpose
, image.image_name 
FROM item
, imageass
, image 
WHERE (
     (
           (item.item_id = imageass.imageass_source_id)
         AND (imageass.imageass_source = &#39;I&#39;::text)
     )
   AND (imageass.imageass_image_id = image.image_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.itemsite">itemsite</a>
		</h2>
        
         <p>Item Site</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.itemsite Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>site</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>supplied_at_site</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>create_prs</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>create_wos</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>sold_from_site</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ranking</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cost_method</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>control_method</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>planner_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cost_category</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>multiple_location_control</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>location</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>user_defined_location</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>location_comment</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>disallow_blank_wip_locations</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>stocked</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>abc_class</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>allow_automatic_updates</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cycl_cnt_freq</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>event_fence</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>enforce_order_parameters</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>reorder_level</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>order_up_to</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>minimum_order</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>maximum_order</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>order_multiple</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>enforce_on_manual_orders</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>group_mps_mrp_orders</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>mps_time_fence</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>lead_time</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>safety_stock</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>perishable</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>require_warranty</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>auto_register</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (item.item_number)::character varying AS item_number
, (whsinfo.warehous_code)::character varying AS site
, itemsite.itemsite_active AS active
, itemsite.itemsite_supply AS supplied_at_site
, itemsite.itemsite_createpr AS create_prs
, itemsite.itemsite_createwo AS create_wos
, itemsite.itemsite_sold AS sold_from_site
, itemsite.itemsite_soldranking AS ranking
, CASE WHEN 
(itemsite.itemsite_costmethod = &#39;N&#39;::bpchar) THEN &#39;None&#39;::text WHEN 
(itemsite.itemsite_costmethod = &#39;A&#39;::bpchar) THEN &#39;Average&#39;::text WHEN 
(itemsite.itemsite_costmethod = &#39;S&#39;::bpchar) THEN &#39;Standard&#39;::text WHEN 
(itemsite.itemsite_costmethod = &#39;J&#39;::bpchar) THEN &#39;Job&#39;::text ELSE NULL::text END AS cost_method
, CASE WHEN 
(itemsite.itemsite_controlmethod = &#39;N&#39;::bpchar) THEN &#39;None&#39;::text WHEN 
(itemsite.itemsite_controlmethod = &#39;R&#39;::bpchar) THEN &#39;Regular&#39;::text WHEN 
(itemsite.itemsite_controlmethod = &#39;S&#39;::bpchar) THEN &#39;Serial #&#39;::text WHEN 
(itemsite.itemsite_controlmethod = &#39;L&#39;::bpchar) THEN &#39;Lot #&#39;::text ELSE NULL::text END AS control_method
, plancode.plancode_code AS planner_code
, costcat.costcat_code AS cost_category
, itemsite.itemsite_loccntrl AS multiple_location_control
, formatlocationname
(itemsite.itemsite_location_id) AS &quot;location&quot;
, itemsite.itemsite_location AS user_defined_location
, itemsite.itemsite_location_comments AS location_comment
, itemsite.itemsite_disallowblankwip AS disallow_blank_wip_locations
, itemsite.itemsite_stocked AS stocked
, itemsite.itemsite_abcclass AS abc_class
, itemsite.itemsite_autoabcclass AS allow_automatic_updates
, itemsite.itemsite_cyclecountfreq AS cycl_cnt_freq
, itemsite.itemsite_eventfence AS event_fence
, itemsite.itemsite_useparams AS enforce_order_parameters
, itemsite.itemsite_reorderlevel AS reorder_level
, itemsite.itemsite_ordertoqty AS order_up_to
, itemsite.itemsite_minordqty AS minimum_order
, itemsite.itemsite_maxordqty AS maximum_order
, itemsite.itemsite_multordqty AS order_multiple
, itemsite.itemsite_useparamsmanual AS enforce_on_manual_orders
, itemsite.itemsite_ordergroup AS group_mps_mrp_orders
, itemsite.itemsite_mps_timefence AS mps_time_fence
, itemsite.itemsite_leadtime AS lead_time
, itemsite.itemsite_safetystock AS safety_stock
, itemsite.itemsite_notes AS notes
, itemsite.itemsite_perishable AS perishable
, itemsite.itemsite_warrpurc AS require_warranty
, itemsite.itemsite_autoreg AS auto_register 
FROM item
, (itemsite 
LEFT JOIN&quot;location&quot;
    ON (
           (itemsite.itemsite_location_id = &quot;location&quot;.location_id)
     )
)
, plancode
, costcat
, whsinfo 
WHERE (
     (
           (
                 (item.item_id = itemsite.itemsite_item_id)
               AND (itemsite.itemsite_plancode_id = plancode.plancode_id)
           )
         AND (itemsite.itemsite_costcat_id = costcat.costcat_id)
     )
   AND (itemsite.itemsite_warehous_id = whsinfo.warehous_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.itemsitecomment">itemsitecomment</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.itemsitecomment Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>site</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>date</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>text</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (item.item_number)::character varying AS item_number
, (whsinfo.warehous_code)::character varying AS site
, cmnttype.cmnttype_name AS &quot;type&quot;
,&quot;comment&quot;.comment_date AS date
,&quot;comment&quot;.comment_user AS username
,&quot;comment&quot;.comment_text AS text 
FROM itemsite
, item
, whsinfo
, cmnttype
,&quot;comment&quot;
WHERE (
     (itemsite.itemsite_item_id = item.item_id)
   AND (
           (
                 (
                       (itemsite.itemsite_warehous_id = whsinfo.warehous_id)
                     AND (&quot;comment&quot;.comment_source = &#39;IS&#39;::text)
                 )
               AND (&quot;comment&quot;.comment_source_id = itemsite.itemsite_id)
           )
         AND (&quot;comment&quot;.comment_cmnttype_id = cmnttype.cmnttype_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.itemsource">itemsource</a>
		</h2>
        
         <p>Item Source</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.itemsource Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vendor</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vendor_item_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vendor_uom</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>inventory_vendor_uom_ratio</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>minimum_order</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>order_multiple</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vendor_ranking</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>lead_time</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vendor_description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>manufacturer_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>manufacturer_item_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>manufacturer_description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (item.item_number)::character varying AS item_number
, (vendinfo.vend_number)::character varying AS vendor
, itemsrc.itemsrc_vend_item_number AS vendor_item_number
, itemsrc.itemsrc_active AS active
, itemsrc.itemsrc_vend_uom AS vendor_uom
, itemsrc.itemsrc_invvendoruomratio AS inventory_vendor_uom_ratio
, itemsrc.itemsrc_minordqty AS minimum_order
, itemsrc.itemsrc_multordqty AS order_multiple
, itemsrc.itemsrc_ranking AS vendor_ranking
, itemsrc.itemsrc_leadtime AS lead_time
, itemsrc.itemsrc_comments AS notes
, itemsrc.itemsrc_vend_item_descrip AS vendor_description
, itemsrc.itemsrc_manuf_name AS manufacturer_name
, itemsrc.itemsrc_manuf_item_number AS manufacturer_item_number
, itemsrc.itemsrc_manuf_item_descrip AS manufacturer_description 
FROM (
     (itemsrc 
   LEFT JOIN item 
          ON (
                 (itemsrc.itemsrc_item_id = item.item_id)
           )
     )
LEFT JOIN vendinfo 
    ON (
           (itemsrc.itemsrc_vend_id = vendinfo.vend_id)
     )
)
ORDER BY (item.item_number)::character varying
(100)
, (vendinfo.vend_number)::character varying
(100);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.itemsourceprice">itemsourceprice</a>
		</h2>
        
         <p>Item Source Price</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.itemsourceprice Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vendor</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>qty_break</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>price_per_unit</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>currency</td>
            	<td>character varying(3)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (item.item_number)::character varying AS item_number
, (vendinfo.vend_number)::character varying AS vendor
, itemsrcp.itemsrcp_qtybreak AS qty_break
, itemsrcp.itemsrcp_price AS price_per_unit
, curr_symbol.curr_abbr AS currency 
FROM (
     (
           (
                 (itemsrcp 
               LEFT JOIN itemsrc 
                      ON (
                             (itemsrc.itemsrc_id = itemsrcp.itemsrcp_itemsrc_id)
                       )
                 )
         LEFT JOIN item 
                ON (
                       (itemsrc.itemsrc_item_id = item.item_id)
                 )
           )
   LEFT JOIN vendinfo 
          ON (
                 (itemsrc.itemsrc_vend_id = vendinfo.vend_id)
           )
     )
LEFT JOIN curr_symbol 
    ON (
           (itemsrcp.itemsrcp_curr_id = curr_symbol.curr_id)
     )
)
ORDER BY (item.item_number)::character varying
(100)
, (vendinfo.vend_number)::character varying
(100);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.itemsubstitute">itemsubstitute</a>
		</h2>
        
         <p>Item Substitute</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.itemsubstitute Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>root_item_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>substitute_item_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>sub_parent_uom_ratio</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ranking</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (p.item_number)::character varying AS root_item_number
, (s.item_number)::character varying AS substitute_item_number
, itemsub.itemsub_uomratio AS sub_parent_uom_ratio
, itemsub.itemsub_rank AS ranking 
FROM item p
, item s
, itemsub 
WHERE (
     (p.item_id = itemsub.itemsub_parent_item_id)
   AND (s.item_id = itemsub.itemsub_sub_item_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.itemtaxtype">itemtaxtype</a>
		</h2>
        
         <p>Item Tax Type</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.itemtaxtype Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>tax_authority</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tax_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (item.item_number)::character varying AS item_number
, CASE WHEN 
(taxauth.taxauth_id IS NULL) THEN &#39;Any&#39;::character varying ELSE 
(taxauth.taxauth_code)::character varying END AS tax_authority
, taxtype.taxtype_name AS tax_type 
FROM item
, (itemtax 
LEFT JOIN taxauth 
    ON (
           (itemtax.itemtax_taxauth_id = taxauth.taxauth_id)
     )
)
, taxtype 
WHERE (
     (item.item_id = itemtax.itemtax_item_id)
   AND (itemtax.itemtax_taxtype_id = taxtype.taxtype_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.itemuomconversion">itemuomconversion</a>
		</h2>
        
         <p>Item Unit of Measure Conversion</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.itemuomconversion Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>uom</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>uom_value</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>per_uom</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>per_uom_value</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>fractional</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>selected_types</td>
            	<td>text[]</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (item.item_number)::character varying AS item_number
, (f.uom_name)::character varying AS uom
, itemuomconv.itemuomconv_from_value AS uom_value
, p.uom_name AS per_uom
, itemuomconv.itemuomconv_to_value AS per_uom_value
, itemuomconv.itemuomconv_fractional AS fractional
, fetchitemuomconvtypes
(itemuomconv.itemuomconv_id) AS selected_types 
FROM item
, itemuomconv
, uom f
, uom p 
WHERE (
     (
           (item.item_id = itemuomconv.itemuomconv_item_id)
         AND (itemuomconv.itemuomconv_from_uom_id = f.uom_id)
     )
   AND (itemuomconv.itemuomconv_to_uom_id = p.uom_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.journalentry">journalentry</a>
		</h2>
        
         <p>Journal Entry</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.journalentry Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>currency</td>
            	<td>character varying(3)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>amount</td>
            	<td>numeric(12,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>dist_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>doc_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>debit</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>credit</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT curr_symbol.curr_abbr AS currency
, c.gltrans_amount AS amount
, c.gltrans_date AS dist_date
, c.gltrans_docnumber AS doc_number
, formatglaccount
(da.accnt_id) AS debit
, formatglaccount
(ca.accnt_id) AS credit
, c.gltrans_notes AS notes 
FROM gltrans d
, gltrans c
, accnt da
, accnt ca
, curr_symbol 
WHERE (
     (
           (
                 (
                       (
                             (
                                   (
                                         (d.gltrans_sequence = c.gltrans_sequence)
                                       AND (d.gltrans_accnt_id = da.accnt_id)
                                   )
                                 AND (c.gltrans_accnt_id = ca.accnt_id)
                             )
                           AND (d.gltrans_amount &lt; 
                                   (0)::numeric
                             )
                       )
                     AND (c.gltrans_amount &gt; 
                             (0)::numeric
                       )
                 )
               AND (d.gltrans_doctype = &#39;JE&#39;::text)
           )
         AND (c.gltrans_doctype = &#39;JE&#39;::text)
     )
   AND (curr_symbol.curr_id = basecurrid
           ()
     )
)
ORDER BY d.gltrans_date DESC;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.location">location</a>
		</h2>
        
         <p>Location</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.location Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>site</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>aisle</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>rack</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bin</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>location</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>zone</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>netable</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>restricted</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (whsinfo.warehous_code)::character varying AS site
, (&quot;location&quot;.location_aisle)::character varying AS aisle
, (&quot;location&quot;.location_rack)::character varying AS rack
, (&quot;location&quot;.location_bin)::character varying AS bin
, (&quot;location&quot;.location_name)::character varying AS &quot;location&quot;
, whsezone.whsezone_name AS &quot;zone&quot;
,&quot;location&quot;.location_netable AS netable
,&quot;location&quot;.location_restrict AS restricted
,&quot;location&quot;.location_descrip AS description 
FROM (
     (&quot;location&quot;
   LEFT JOIN whsinfo 
          ON (
                 (whsinfo.warehous_id = &quot;location&quot;.location_warehous_id)
           )
     )
LEFT JOIN whsezone 
    ON (
           (whsezone.whsezone_id = &quot;location&quot;.location_whsezone_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.misccounttag">misccounttag</a>
		</h2>
        
         <p>Miscellaneous Count Tag</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.misccounttag Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>site</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quantity</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>comment</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT&#39;This view is for inserts only&#39;::text AS site
,&#39;This view is for inserts only&#39;::text AS item_number
, (0)::numeric AS quantity
,&#39;This view is for inserts only&#39;::text AS &quot;comment&quot;;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.pricingschedule">pricingschedule</a>
		</h2>
        
         <p>Pricing Schedule</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.pricingschedule Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>name</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>effective</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>expires</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>currency</td>
            	<td>character varying(3)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (ipshead.ipshead_name)::character varying AS name
, ipshead.ipshead_descrip AS description
, formatdate
(ipshead.ipshead_effective
     ,&#39;Always&#39;::text
) AS effective
, formatdate
(ipshead.ipshead_expires
     ,&#39;Never&#39;::text
) AS expires
, curr_symbol.curr_abbr AS currency 
FROM ipshead
, curr_symbol 
WHERE (curr_symbol.curr_id = ipshead.ipshead_curr_id);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.pricingscheduleassign">pricingscheduleassign</a>
		</h2>
        
         <p>Pricing Schedule Assignments</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.pricingscheduleassign Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>customer_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>customer_shipto</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>customer_shipto_pattern</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>customer_type</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>customer_type_pattern</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>pricing_schedule</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (COALESCE
     (custinfo.cust_number
           ,&#39;Any&#39;::text
     )
)::character varying AS customer_number
, (COALESCE
     (shiptoinfo.shipto_num
           ,&#39;Any&#39;::text
     )
)::character varying AS customer_shipto
, (COALESCE
     (ipsass.ipsass_shipto_pattern
           ,&#39;N/A&#39;::text
     )
)::character varying AS customer_shipto_pattern
, (COALESCE
     (custtype.custtype_code
           ,&#39;N/A&#39;::text
     )
)::character varying AS customer_type
, (COALESCE
     (ipsass.ipsass_custtype_pattern
           ,&#39;N/A&#39;::text
     )
)::character varying AS customer_type_pattern
, (ipshead.ipshead_name)::character varying AS pricing_schedule 
FROM (
     (
           (
                 (ipshead 
                    JOIN ipsass 
                      ON (
                             (ipshead.ipshead_id = ipsass.ipsass_ipshead_id)
                       )
                 )
         LEFT JOIN custinfo 
                ON (
                       (ipsass.ipsass_cust_id = custinfo.cust_id)
                 )
           )
   LEFT JOIN custtype 
          ON (
                 (ipsass.ipsass_custtype_id = custtype.custtype_id)
           )
     )
LEFT JOIN shiptoinfo 
    ON (
           (ipsass.ipsass_shipto_id = shiptoinfo.shipto_id)
     )
)
ORDER BY (COALESCE
     (custinfo.cust_number
           ,&#39;Any&#39;::text
     )
)::character varying
, (COALESCE
     (shiptoinfo.shipto_num
           ,&#39;Any&#39;::text
     )
)::character varying
, (COALESCE
     (custtype.custtype_code
           ,&#39;N/A&#39;::text
     )
)::character varying
, (COALESCE
     (ipsass.ipsass_custtype_pattern
           ,&#39;N/A&#39;::text
     )
)::character varying
, (ipshead.ipshead_name)::character varying;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.pricingscheduleitem">pricingscheduleitem</a>
		</h2>
        
         <p>Pricing Schedule Item</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.pricingscheduleitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>pricing_schedule</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>type</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>product_category</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>qty_break</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>qty_uom</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>price_uom</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>price</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>discount_percent</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (ipshead.ipshead_name)::character varying AS pricing_schedule
,&#39;Item&#39;::character varying AS &quot;type&quot;
, (item.item_number)::character varying AS item_number
,&#39;&#39;::character varying AS product_category
, ipsitem.ipsitem_qtybreak AS qty_break
, (qtyuom.uom_name)::character varying AS qty_uom
, (priceuom.uom_name)::character varying AS price_uom
, ipsitem.ipsitem_price AS price
, 0 AS discount_percent 
FROM (
     (
           (
                 (ipsitem 
                    JOIN ipshead 
                      ON (
                             (ipsitem.ipsitem_ipshead_id = ipshead.ipshead_id)
                       )
                 )
              JOIN item 
                ON (
                       (ipsitem.ipsitem_item_id = item.item_id)
                 )
           )
        JOIN uom qtyuom 
          ON (
                 (ipsitem.ipsitem_qty_uom_id = qtyuom.uom_id)
           )
     )
  JOIN uom priceuom 
    ON (
           (ipsitem.ipsitem_price_uom_id = priceuom.uom_id)
     )
)
UNIONSELECT (ipshead.ipshead_name)::character varying AS pricing_schedule
,&#39;Product Category&#39;::character varying AS &quot;type&quot;
,&#39;&#39;::character varying AS item_number
, (prodcat.prodcat_code)::character varying AS product_category
, ipsprodcat.ipsprodcat_qtybreak AS qty_break
, NULL::&quot;unknown&quot; AS qty_uom
, NULL::&quot;unknown&quot; AS price_uom
, NULL::&quot;unknown&quot; AS price
, ipsprodcat.ipsprodcat_discntprcnt AS discount_percent 
FROM (
     (ipsprodcat 
        JOIN ipshead 
          ON (
                 (ipsprodcat.ipsprodcat_ipshead_id = ipshead.ipshead_id)
           )
     )
  JOIN prodcat 
    ON (
           (ipsprodcat.ipsprodcat_prodcat_id = prodcat.prodcat_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.pricingscheduleitemchar">pricingscheduleitemchar</a>
		</h2>
        
         <p>Pricing Schedule Item Characteristics</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.pricingscheduleitemchar Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>pricing_schedule</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>qty_break</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>qty_uom</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>price_uom</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>characteristic</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>value</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>price</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (ipshead.ipshead_name)::character varying AS pricing_schedule
, (item.item_number)::character varying AS item_number
, ipsitem.ipsitem_qtybreak AS qty_break
, (qtyuom.uom_name)::character varying AS qty_uom
, (priceuom.uom_name)::character varying AS price_uom
, (&quot;char&quot;.char_name)::character varying AS characteristic
, (ipsitemchar.ipsitemchar_value)::character varying AS value
, ipsitemchar.ipsitemchar_price AS price 
FROM ipshead
, ipsitem
, ipsitemchar
, item
,&quot;char&quot;
, uom qtyuom
, uom priceuom 
WHERE (
     (
           (
                 (
                       (
                             (ipshead.ipshead_id = ipsitem.ipsitem_ipshead_id)
                           AND (ipsitem.ipsitem_id = ipsitemchar.ipsitemchar_ipsitem_id)
                       )
                     AND (ipsitem.ipsitem_item_id = item.item_id)
                 )
               AND (ipsitem.ipsitem_qty_uom_id = qtyuom.uom_id)
           )
         AND (ipsitem.ipsitem_price_uom_id = priceuom.uom_id)
     )
   AND (ipsitemchar.ipsitemchar_char_id = &quot;char&quot;.char_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.prospect">prospect</a>
		</h2>
        
         <p>Prospect</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.prospect Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>prospect_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>prospect_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>sales_rep</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>site_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>default_tax_authority</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact_honorific</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_first</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact_middle</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_last</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact_suffix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_job_title</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact_voice</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_alternate</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact_fax</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact_web</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact_address_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact_address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact_postalcode</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact_address_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (prospect.prospect_number)::character varying AS prospect_number
, prospect.prospect_name
, prospect.prospect_active AS active
, salesrep.salesrep_number AS sales_rep
, whsinfo.warehous_code AS site_code
, taxauth.taxauth_code AS default_tax_authority
, prospect.prospect_comments AS notes
, cntct.cntct_number AS contact_number
, cntct.cntct_honorific AS contact_honorific
, cntct.cntct_first_name AS contact_first
, cntct.cntct_middle AS contact_middle
, cntct.cntct_last_name AS contact_last
, cntct.cntct_suffix AS contact_suffix
, cntct.cntct_title AS contact_job_title
, cntct.cntct_phone AS contact_voice
, cntct.cntct_phone2 AS contact_alternate
, cntct.cntct_fax AS contact_fax
, cntct.cntct_email AS contact_email
, cntct.cntct_webaddr AS contact_web
,&#39;&#39;::text AS contact_change
, addr.addr_number AS contact_address_number
, addr.addr_line1 AS contact_address1
, addr.addr_line2 AS contact_address2
, addr.addr_line3 AS contact_address3
, addr.addr_city AS contact_city
, addr.addr_state AS contact_state
, addr.addr_postalcode AS contact_postalcode
, addr.addr_country AS contact_country
,&#39;&#39;::text AS contact_address_change 
FROM (
     (
           (
                 (
                       (prospect 
                     LEFT JOIN cntct 
                            ON (
                                   (prospect.prospect_cntct_id = cntct.cntct_id)
                             )
                       )
               LEFT JOIN addr 
                      ON (
                             (cntct.cntct_addr_id = addr.addr_id)
                       )
                 )
         LEFT JOIN taxauth 
                ON (
                       (prospect.prospect_taxauth_id = taxauth.taxauth_id)
                 )
           )
   LEFT JOIN salesrep 
          ON (
                 (prospect.prospect_salesrep_id = salesrep.salesrep_id)
           )
     )
LEFT JOIN whsinfo 
    ON (
           (prospect.prospect_warehous_id = whsinfo.warehous_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.purchaseline">purchaseline</a>
		</h2>
        
         <p>Purchase Order Line</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.purchaseline Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>order_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>line_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>site</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>expense_category</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>qty_ordered</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>unit_price</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>freight</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>due_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>project_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_item_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vendor_description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>manufacturer_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>manufacturer_item_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>manufacturer_description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bill_of_materials_revision</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bill_of_operations_revision</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (pohead.pohead_number)::character varying AS order_number
, poitem.poitem_linenumber AS line_number
, item.item_number
, whsinfo.warehous_code AS site
, expcat.expcat_code AS expense_category
, poitem.poitem_qty_ordered AS qty_ordered
, poitem.poitem_unitprice AS unit_price
, poitem.poitem_freight AS freight
, poitem.poitem_duedate AS due_date
, prj.prj_number AS project_number
, poitem.poitem_vend_item_number AS vend_item_number
, poitem.poitem_vend_item_descrip AS vendor_description
, poitem.poitem_manuf_name AS manufacturer_name
, poitem.poitem_manuf_item_number AS manufacturer_item_number
, poitem.poitem_manuf_item_descrip AS manufacturer_description
, poitem.poitem_comments AS notes
, formatrevnumber
(&#39;BOM&#39;::text
     , poitem.poitem_bom_rev_id
) AS bill_of_materials_revision
, formatrevnumber
(&#39;BOO&#39;::text
     , poitem.poitem_boo_rev_id
) AS bill_of_operations_revision 
FROM (
     (
           (
                 (
                       (
                             (pohead 
                                JOIN poitem 
                                  ON (
                                         (pohead.pohead_id = poitem.poitem_pohead_id)
                                   )
                             )
                     LEFT JOIN prj 
                            ON (
                                   (poitem.poitem_prj_id = prj.prj_id)
                             )
                       )
               LEFT JOIN expcat 
                      ON (
                             (poitem.poitem_expcat_id = expcat.expcat_id)
                       )
                 )
         LEFT JOIN itemsite 
                ON (
                       (poitem.poitem_itemsite_id = itemsite.itemsite_id)
                 )
           )
   LEFT JOIN item 
          ON (
                 (itemsite.itemsite_item_id = item.item_id)
           )
     )
LEFT JOIN whsinfo 
    ON (
           (itemsite.itemsite_warehous_id = whsinfo.warehous_id)
     )
)
ORDER BY pohead.pohead_number
, poitem.poitem_linenumber;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.purchaselinechar">purchaselinechar</a>
		</h2>
        
         <p>Purchase Order Line Item Characteristic</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.purchaselinechar Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>order_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>line_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>characteristic</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>value</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (data.order_number)::character varying AS order_number
, data.line_number
, data.characteristic
, COALESCE
(pi.charass_value
     , i3.charass_value
) AS value 
FROM (
     (
           (
                 (
                       (
                        SELECT DISTINCT &quot;char&quot;.char_id
                             , poitem.poitem_id
                             , poitem.poitem_itemsite_id
                             , pohead.pohead_number AS order_number
                             , poitem.poitem_linenumber AS line_number
                             ,&quot;char&quot;.char_name AS characteristic 
                          FROM pohead
                             , poitem
                             , itemsite
                             , item
                             , charass
                             ,&quot;char&quot;
                         WHERE (
                                   (
                                         (
                                               (
                                                     (
                                                           (pohead.pohead_id = poitem.poitem_pohead_id)
                                                         AND (poitem.poitem_itemsite_id = itemsite.itemsite_id)
                                                     )
                                                   AND (itemsite.itemsite_item_id = item.item_id)
                                               )
                                             AND (charass.charass_char_id = &quot;char&quot;.char_id)
                                         )
                                       AND (charass.charass_target_type = &#39;I&#39;::text)
                                   )
                                 AND (charass.charass_target_id = item.item_id)
                             )
                      ORDER BY&quot;char&quot;.char_id
                             , poitem.poitem_id
                             , poitem.poitem_itemsite_id
                             , pohead.pohead_number
                             , poitem.poitem_linenumber
                             ,&quot;char&quot;.char_name
                       ) data 
               LEFT JOIN charass pi 
                      ON (
                             (
                                   (
                                         (data.poitem_id = pi.charass_target_id)
                                       AND (&#39;PI&#39;::text = pi.charass_target_type)
                                   )
                                 AND (pi.charass_char_id = data.char_id)
                             )
                       )
                 )
         LEFT JOIN itemsite i1 
                ON (
                       (data.poitem_itemsite_id = i1.itemsite_id)
                 )
           )
   LEFT JOIN item i2 
          ON (
                 (i1.itemsite_item_id = i2.item_id)
           )
     )
LEFT JOIN charass i3 
    ON (
           (
                 (
                       (
                             (i2.item_id = i3.charass_target_id)
                           AND (&#39;I&#39;::text = i3.charass_target_type)
                       )
                     AND (i3.charass_char_id = data.char_id)
                 )
               AND i3.charass_default
           )
     )
)
ORDER BY (data.order_number)::character varying
, data.line_number
, data.characteristic;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.purchaselinecomment">purchaselinecomment</a>
		</h2>
        
         <p>Purchase Order Line Item Comment</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.purchaselinecomment Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>order_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>line_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>date</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>text</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (pohead.pohead_number)::character varying AS order_number
, poitem.poitem_linenumber AS line_number
, cmnttype.cmnttype_name AS &quot;type&quot;
,&quot;comment&quot;.comment_date AS date
,&quot;comment&quot;.comment_user AS username
,&quot;comment&quot;.comment_text AS text 
FROM pohead
, poitem
, cmnttype
,&quot;comment&quot;
WHERE (
     (
           (
                 (pohead.pohead_id = poitem.poitem_pohead_id)
               AND (&quot;comment&quot;.comment_source = &#39;PI&#39;::text)
           )
         AND (&quot;comment&quot;.comment_source_id = poitem.poitem_id)
     )
   AND (&quot;comment&quot;.comment_cmnttype_id = cmnttype.cmnttype_id)
)
ORDER BY pohead.pohead_number
, poitem.poitem_linenumber
,&quot;comment&quot;.comment_date DESC;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.purchaseorder">purchaseorder</a>
		</h2>
        
         <p>Purchase Order</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.purchaseorder Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>order_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>order_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>terms</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>receiving_site</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>purchasing_agent</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vendor_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>alt_address</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>fob</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ship_via</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>currency</td>
            	<td>character varying(3)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tax</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>freight</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (pohead.pohead_number)::character varying AS order_number
, pohead.pohead_orderdate AS order_date
, terms.terms_code AS terms
, whsinfo.warehous_code AS receiving_site
, pohead.pohead_agent_username AS purchasing_agent
, vendinfo.vend_number AS vendor_number
, COALESCE
(ua.vendaddr_code
     ,&#39;MAIN&#39;::text
) AS alt_address
, pohead.pohead_fob AS fob
, pohead.pohead_shipvia AS ship_via
, curr_symbol.curr_abbr AS currency
, pohead.pohead_tax AS tax
, pohead.pohead_freight AS freight
, pohead.pohead_comments AS notes 
FROM (
     (
           (
                 (
                       (pohead 
                     LEFT JOIN terms 
                            ON (
                                   (pohead.pohead_terms_id = terms.terms_id)
                             )
                       )
               LEFT JOIN whsinfo 
                      ON (
                             (pohead.pohead_warehous_id = whsinfo.warehous_id)
                       )
                 )
         LEFT JOIN vendaddrinfo ua 
                ON (
                       (pohead.pohead_vendaddr_id = ua.vendaddr_id)
                 )
           )
        JOIN vendinfo 
          ON (
                 (pohead.pohead_vend_id = vendinfo.vend_id)
           )
     )
  JOIN curr_symbol 
    ON (
           (pohead.pohead_curr_id = curr_symbol.curr_id)
     )
)
ORDER BY pohead.pohead_number;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.purchaseordercomment">purchaseordercomment</a>
		</h2>
        
         <p>Purchase Order Comment</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.purchaseordercomment Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>order_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>date</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>text</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (pohead.pohead_number)::character varying AS order_number
, cmnttype.cmnttype_name AS &quot;type&quot;
,&quot;comment&quot;.comment_date AS date
,&quot;comment&quot;.comment_user AS username
,&quot;comment&quot;.comment_text AS text 
FROM pohead
, cmnttype
,&quot;comment&quot;
WHERE (
     (
           (&quot;comment&quot;.comment_source = &#39;P&#39;::text)
         AND (&quot;comment&quot;.comment_source_id = pohead.pohead_id)
     )
   AND (&quot;comment&quot;.comment_cmnttype_id = cmnttype.cmnttype_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.quote">quote</a>
		</h2>
        
         <p>Quote</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.quote Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quote_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>site</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quote_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>pack_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>originated_by</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>sales_rep</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>commission</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>tax_authority</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>terms</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>project_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>customer_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billto_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billto_address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billto_address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billto_address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billto_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billto_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billto_postal_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billto_country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_phone</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_postal_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_po_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>fob</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ship_via</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>currency</td>
            	<td>character varying(3)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>misc_charge_description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>misc_account_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>misc_charge</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>freight</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>order_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipping_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>add_to_packing_list_batch</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>expire_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT quhead.quhead_number AS quote_number
, whsinfo.warehous_code AS site
, quhead.quhead_quotedate AS quote_date
, quhead.quhead_packdate AS pack_date
, CASE WHEN 
(quhead.quhead_origin = &#39;C&#39;::bpchar) THEN &#39;Customer&#39;::text WHEN 
(quhead.quhead_origin = &#39;I&#39;::bpchar) THEN &#39;Internet&#39;::text WHEN 
(quhead.quhead_origin = &#39;S&#39;::bpchar) THEN &#39;Sales Rep.&#39;::text ELSE &#39;Error&#39;::text END AS originated_by
, salesrep.salesrep_number AS sales_rep
, quhead.quhead_commission AS commission
, taxauth.taxauth_code AS tax_authority
, terms.terms_code AS terms
, prj.prj_number AS project_number
, COALESCE
(custinfo.cust_number
     , prospect.prospect_number
) AS customer_number
, quhead.quhead_billtoname AS billto_name
, quhead.quhead_billtoaddress1 AS billto_address1
, quhead.quhead_billtoaddress2 AS billto_address2
, quhead.quhead_billtoaddress3 AS billto_address3
, quhead.quhead_billtocity AS billto_city
, quhead.quhead_billtostate AS billto_state
, quhead.quhead_billtozip AS billto_postal_code
, quhead.quhead_billtocountry AS billto_country
, shiptoinfo.shipto_num AS shipto_number
, quhead.quhead_shiptoname AS shipto_name
, quhead.quhead_shiptophone AS shipto_phone
, quhead.quhead_shiptoaddress1 AS shipto_address1
, quhead.quhead_shiptoaddress2 AS shipto_address2
, quhead.quhead_shiptoaddress3 AS shipto_address3
, quhead.quhead_shiptocity AS shipto_city
, quhead.quhead_shiptostate AS shipto_state
, quhead.quhead_shiptozipcode AS shipto_postal_code
, quhead.quhead_shiptocountry AS shipto_country
, quhead.quhead_custponumber AS cust_po_number
, quhead.quhead_fob AS fob
, quhead.quhead_shipvia AS ship_via
, curr_symbol.curr_abbr AS currency
, quhead.quhead_misc_descrip AS misc_charge_description
, CASE WHEN 
(quhead.quhead_misc_accnt_id IS NULL) THEN NULL::text ELSE formatglaccount
(quhead.quhead_misc_accnt_id) END AS misc_account_number
, quhead.quhead_misc AS misc_charge
, quhead.quhead_freight AS freight
, quhead.quhead_ordercomments AS order_notes
, quhead.quhead_shipcomments AS shipping_notes
, false AS add_to_packing_list_batch
, quhead.quhead_expire AS expire_date 
FROM curr_symbol
, (
     (
           (
                 (
                       (
                             (
                                   (
                                         (quhead 
                                       LEFT JOIN whsinfo 
                                              ON (
                                                     (quhead.quhead_warehous_id = whsinfo.warehous_id)
                                               )
                                         )
                                 LEFT JOIN prj 
                                        ON (
                                               (quhead.quhead_prj_id = prj.prj_id)
                                         )
                                   )
                           LEFT JOIN shiptoinfo 
                                  ON (
                                         (quhead.quhead_shipto_id = shiptoinfo.shipto_id)
                                   )
                             )
                     LEFT JOIN taxauth 
                            ON (
                                   (quhead.quhead_taxauth_id = taxauth.taxauth_id)
                             )
                       )
               LEFT JOIN custinfo 
                      ON (
                             (quhead.quhead_cust_id = custinfo.cust_id)
                       )
                 )
         LEFT JOIN prospect 
                ON (
                       (quhead.quhead_cust_id = prospect.prospect_id)
                 )
           )
   LEFT JOIN salesrep 
          ON (
                 (quhead.quhead_salesrep_id = salesrep.salesrep_id)
           )
     )
LEFT JOIN terms 
    ON (
           (quhead.quhead_terms_id = terms.terms_id)
     )
)
WHERE (quhead.quhead_curr_id = curr_symbol.curr_id);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.quotecomment">quotecomment</a>
		</h2>
        
         <p>Quote Comment</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.quotecomment Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quote_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>date</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>text</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT quhead.quhead_number AS quote_number
, cmnttype.cmnttype_name AS &quot;type&quot;
,&quot;comment&quot;.comment_date AS date
,&quot;comment&quot;.comment_user AS username
,&quot;comment&quot;.comment_text AS text 
FROM quhead
, cmnttype
,&quot;comment&quot;
WHERE (
     (
           (&quot;comment&quot;.comment_source = &#39;Q&#39;::text)
         AND (&quot;comment&quot;.comment_source_id = quhead.quhead_id)
     )
   AND (&quot;comment&quot;.comment_cmnttype_id = cmnttype.cmnttype_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.quoteline">quoteline</a>
		</h2>
        
         <p>Quote Line Item</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.quoteline Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quote_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>line_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>customer_pn</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>sold_from_site</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>qty_ordered</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>qty_uom</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>net_unit_price</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>price_uom</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>scheduled_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tax_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>tax_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>discount_pct_from_list</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>create_order</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>supplying_site</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>overwrite_po_price</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT quhead.quhead_number AS quote_number
, quitem.quitem_linenumber AS line_number
, l.item_number
, quitem.quitem_custpn AS customer_pn
, i.warehous_code AS sold_from_site
, quitem.quitem_qtyord AS qty_ordered
, q.uom_name AS qty_uom
, quitem.quitem_price AS net_unit_price
, p.uom_name AS price_uom
, quitem.quitem_scheddate AS scheduled_date
, COALESCE
(
     (
      SELECT taxtype.taxtype_name 
        FROM taxtype 
       WHERE (taxtype.taxtype_id = getitemtaxtype
                 (l.item_id
                       , quhead.quhead_taxauth_id
                 )
           )
     )
     ,&#39;None&#39;::text
) AS tax_type
, COALESCE
(tax.tax_code
     ,&#39;None&#39;::text
) AS tax_code
, CASE WHEN 
(quitem.quitem_price = 
     (0)::numeric
) THEN &#39;100&#39;::text WHEN 
(quitem.quitem_custprice = 
     (0)::numeric
) THEN &#39;N/A&#39;::text ELSE 
(round
     (
           (
                 (
                       (1)::numeric - 
                       (quitem.quitem_price / quitem.quitem_custprice)
                 ) * 
                 (100)::numeric
           )
           , 4
     )
)::text END AS discount_pct_from_list
, quitem.quitem_createorder AS create_order
, s.warehous_code AS supplying_site
, quitem.quitem_prcost AS overwrite_po_price
, quitem.quitem_memo AS notes 
FROM quhead
, uom q
, uom p
, (
     (quitem 
   LEFT JOIN tax 
          ON (
                 (quitem.quitem_tax_id = tax.tax_id)
           )
     )
LEFT JOIN whsinfo s 
    ON (
           (quitem.quitem_order_warehous_id = s.warehous_id)
     )
)
, itemsite il
, item l
, whsinfo i 
WHERE (
     (
           (
                 (
                       (
                             (quhead.quhead_id = quitem.quitem_quhead_id)
                           AND (quitem.quitem_itemsite_id = il.itemsite_id)
                       )
                     AND (il.itemsite_item_id = l.item_id)
                 )
               AND (il.itemsite_warehous_id = i.warehous_id)
           )
         AND (quitem.quitem_qty_uom_id = q.uom_id)
     )
   AND (quitem.quitem_price_uom_id = p.uom_id)
)
ORDER BY quhead.quhead_number
, quitem.quitem_linenumber;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.quotelinechar">quotelinechar</a>
		</h2>
        
         <p>Quote Line Item Characteristics</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.quotelinechar Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quote_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>line_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>characteristic</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>value</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT DISTINCT quhead.quhead_number AS quote_number
, quitem.quitem_linenumber AS line_number
,&quot;char&quot;.char_name AS characteristic
, COALESCE
(
     (
      SELECT b.charass_value 
        FROM charass b 
       WHERE (
                 (
                       (b.charass_target_type = &#39;QI&#39;::text)
                     AND (b.charass_target_id = quitem.quitem_id)
                 )
               AND (b.charass_char_id = &quot;char&quot;.char_id)
           )
     )
     , (
      SELECT c.charass_value 
        FROM charass c 
       WHERE (
                 (
                       (
                             (c.charass_target_type = &#39;I&#39;::text)
                           AND (c.charass_target_id = item.item_id)
                       )
                     AND c.charass_default
                 )
               AND (c.charass_char_id = &quot;char&quot;.char_id)
           ) LIMIT 1
     )
) AS value 
FROM quhead
, quitem
, itemsite
, item
, charass a
,&quot;char&quot;
WHERE (
     (
           (
                 (
                       (
                             (quhead.quhead_id = quitem.quitem_quhead_id)
                           AND (quitem.quitem_itemsite_id = itemsite.itemsite_id)
                       )
                     AND (itemsite.itemsite_item_id = item.item_id)
                 )
               AND (a.charass_char_id = &quot;char&quot;.char_id)
           )
         AND (a.charass_target_type = &#39;I&#39;::text)
     )
   AND (a.charass_target_id = item.item_id)
)
ORDER BY quhead.quhead_number
, quitem.quitem_linenumber
,&quot;char&quot;.char_name
, COALESCE
(
     (
      SELECT b.charass_value 
        FROM charass b 
       WHERE (
                 (
                       (b.charass_target_type = &#39;QI&#39;::text)
                     AND (b.charass_target_id = quitem.quitem_id)
                 )
               AND (b.charass_char_id = &quot;char&quot;.char_id)
           )
     )
     , (
      SELECT c.charass_value 
        FROM charass c 
       WHERE (
                 (
                       (
                             (c.charass_target_type = &#39;I&#39;::text)
                           AND (c.charass_target_id = item.item_id)
                       )
                     AND c.charass_default
                 )
               AND (c.charass_char_id = &quot;char&quot;.char_id)
           ) LIMIT 1
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.quotelinecomment">quotelinecomment</a>
		</h2>
        
         <p>Quote Line Item Comment</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.quotelinecomment Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quote_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>line_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>date</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>text</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT quhead.quhead_number AS quote_number
, quitem.quitem_linenumber AS line_number
, cmnttype.cmnttype_name AS &quot;type&quot;
,&quot;comment&quot;.comment_date AS date
,&quot;comment&quot;.comment_user AS username
,&quot;comment&quot;.comment_text AS text 
FROM quhead
, quitem
, cmnttype
,&quot;comment&quot;
WHERE (
     (
           (
                 (quhead.quhead_id = quitem.quitem_quhead_id)
               AND (&quot;comment&quot;.comment_source = &#39;QI&#39;::text)
           )
         AND (&quot;comment&quot;.comment_source_id = quitem.quitem_id)
     )
   AND (&quot;comment&quot;.comment_cmnttype_id = cmnttype.cmnttype_id)
)
ORDER BY quhead.quhead_number
, quitem.quitem_linenumber
,&quot;comment&quot;.comment_date DESC;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.saleshistory">saleshistory</a>
		</h2>
        
         <p>Sales History</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.saleshistory Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>customer_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>site_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ship_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ship_via</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>order_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>purchase_order_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>order_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invoice_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invoice_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quantity_shipped</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>unit_price</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>sales_rep</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>due_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>promise_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>imported</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billto_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billto_address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billto_address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billto_address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billto_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billto_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billto_zip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_zip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>commission</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>commission_paid</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>unit_cost</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>misc_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>misc_description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>misc_info</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>tax_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tax_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>document_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>currency</td>
            	<td>character varying(3)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>gl_sequence</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tax_pct_a</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>tax_pct_b</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tax_pct_c</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>tax_rate_a</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tax_rate_b</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>tax_rate_c</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT custinfo.cust_number AS customer_number
, item.item_number
, whsinfo.warehous_code AS site_code
, cohist.cohist_shipdate AS ship_date
, cohist.cohist_shipvia AS ship_via
, cohist.cohist_ordernumber AS order_number
, cohist.cohist_ponumber AS purchase_order_number
, cohist.cohist_orderdate AS order_date
, cohist.cohist_invcnumber AS invoice_number
, cohist.cohist_invcdate AS invoice_date
, cohist.cohist_qtyshipped AS quantity_shipped
, cohist.cohist_unitprice AS unit_price
, shiptoinfo.shipto_num AS shipto_number
, salesrep.salesrep_number AS sales_rep
, cohist.cohist_duedate AS due_date
, cohist.cohist_promisedate AS promise_date
, cohist.cohist_imported AS imported
, cohist.cohist_billtoname AS billto_name
, cohist.cohist_billtoaddress1 AS billto_address1
, cohist.cohist_billtoaddress2 AS billto_address2
, cohist.cohist_billtoaddress3 AS billto_address3
, cohist.cohist_billtocity AS billto_city
, cohist.cohist_billtostate AS billto_state
, cohist.cohist_billtozip AS billto_zip
, cohist.cohist_shiptoname AS shipto_name
, cohist.cohist_shiptoaddress1 AS shipto_address1
, cohist.cohist_shiptoaddress2 AS shipto_address2
, cohist.cohist_shiptoaddress3 AS shipto_address3
, cohist.cohist_shiptocity AS shipto_city
, cohist.cohist_shiptostate AS shipto_state
, cohist.cohist_shiptozip AS shipto_zip
, cohist.cohist_commission AS commission
, cohist.cohist_commissionpaid AS commission_paid
, cohist.cohist_unitcost AS unit_cost
, CASE WHEN 
(cohist.cohist_misc_type IS NULL) THEN &#39;&#39;::text WHEN 
(cohist.cohist_misc_type = &#39;M&#39;::bpchar) THEN &#39;Misc. Charge&#39;::text WHEN 
(cohist.cohist_misc_type = &#39;F&#39;::bpchar) THEN &#39;Freight&#39;::text WHEN 
(cohist.cohist_misc_type = &#39;T&#39;::bpchar) THEN &#39;Tax&#39;::text ELSE &#39;Unknown&#39;::text END AS misc_type
, cohist.cohist_misc_descrip AS misc_description
, CASE WHEN 
(cohist.cohist_misc_id IS NULL) THEN &#39;&#39;::text WHEN 
(cohist.cohist_misc_type = &#39;M&#39;::bpchar) THEN formatglaccount
(cohist.cohist_misc_id) WHEN 
(cohist.cohist_misc_type = &#39;T&#39;::bpchar) THEN tax.tax_code ELSE &#39;Unknown&#39;::text END AS misc_info
, taxtype.taxtype_name AS tax_type
, tax.tax_code
, CASE WHEN 
(cohist.cohist_doctype = &#39;I&#39;::text) THEN &#39;Invoice&#39;::text WHEN 
(cohist.cohist_doctype = &#39;C&#39;::text) THEN &#39;Credit Memo&#39;::text ELSE &#39;Unknown&#39;::text END AS document_type
, curr_symbol.curr_abbr AS currency
, cohist.cohist_sequence AS gl_sequence
, (cohist.cohist_tax_pcta * 
     (100)::numeric
) AS tax_pct_a
, (cohist.cohist_tax_pctb * 
     (100)::numeric
) AS tax_pct_b
, (cohist.cohist_tax_pctc * 
     (100)::numeric
) AS tax_pct_c
, cohist.cohist_tax_ratea AS tax_rate_a
, cohist.cohist_tax_rateb AS tax_rate_b
, cohist.cohist_tax_ratec AS tax_rate_c 
FROM (
     (
           (
                 (
                       (
                             (
                                   (
                                         (
                                               (cohist 
                                             LEFT JOIN custinfo 
                                                    ON (
                                                           (cohist.cohist_cust_id = custinfo.cust_id)
                                                     )
                                               )
                                       LEFT JOIN shiptoinfo 
                                              ON (
                                                     (cohist.cohist_shipto_id = shiptoinfo.shipto_id)
                                               )
                                         )
                                 LEFT JOIN tax 
                                        ON (
                                               (cohist.cohist_tax_id = tax.tax_id)
                                         )
                                   )
                           LEFT JOIN taxtype 
                                  ON (
                                         (cohist.cohist_taxtype_id = taxtype.taxtype_id)
                                   )
                             )
                     LEFT JOIN salesrep 
                            ON (
                                   (cohist.cohist_salesrep_id = salesrep.salesrep_id)
                             )
                       )
               LEFT JOIN itemsite 
                      ON (
                             (cohist.cohist_itemsite_id = itemsite.itemsite_id)
                       )
                 )
         LEFT JOIN item 
                ON (
                       (itemsite.itemsite_item_id = item.item_id)
                 )
           )
   LEFT JOIN whsinfo 
          ON (
                 (itemsite.itemsite_warehous_id = whsinfo.warehous_id)
           )
     )
LEFT JOIN curr_symbol 
    ON (
           (cohist.cohist_curr_id = curr_symbol.curr_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.salesline">salesline</a>
		</h2>
        
         <p>Sales Order Line Item</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.salesline Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>order_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>line_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>customer_pn</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>substitute_for</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>sold_from_site</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>status</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>qty_ordered</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>qty_uom</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>net_unit_price</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>price_uom</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>scheduled_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>promise_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warranty</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tax_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>tax_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>discount_pct_from_list</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>create_order</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>overwrite_po_price</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>alternate_cos_account</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (cohead.cohead_number)::character varying AS order_number
, (formatsolinenumber
     (coitem.coitem_id)
)::character varying AS line_number
, l.item_number
, coitem.coitem_custpn AS customer_pn
, s.item_number AS substitute_for
, whsinfo.warehous_code AS sold_from_site
, coitem.coitem_status AS status
, coitem.coitem_qtyord AS qty_ordered
, q.uom_name AS qty_uom
, coitem.coitem_price AS net_unit_price
, p.uom_name AS price_uom
, coitem.coitem_scheddate AS scheduled_date
, coitem.coitem_promdate AS promise_date
, coitem.coitem_warranty AS warranty
, COALESCE
(
     (
      SELECT taxtype.taxtype_name 
        FROM taxtype 
       WHERE (taxtype.taxtype_id = getitemtaxtype
                 (l.item_id
                       , cohead.cohead_taxauth_id
                 )
           )
     )
     ,&#39;None&#39;::text
) AS tax_type
, COALESCE
(tax.tax_code
     ,&#39;None&#39;::text
) AS tax_code
, CASE WHEN 
(coitem.coitem_price = 
     (0)::numeric
) THEN &#39;100&#39;::text WHEN 
(coitem.coitem_custprice = 
     (0)::numeric
) THEN &#39;N/A&#39;::text ELSE 
(round
     (
           (
                 (
                       (1)::numeric - 
                       (coitem.coitem_price / coitem.coitem_custprice)
                 ) * 
                 (100)::numeric
           )
           , 4
     )
)::text END AS discount_pct_from_list
, CASE WHEN 
(coitem.coitem_order_id = -1) THEN false ELSE true END AS create_order
, coitem.coitem_prcost AS overwrite_po_price
, coitem.coitem_memo AS notes
, CASE WHEN 
(coitem.coitem_cos_accnt_id IS NOT NULL) THEN formatglaccount
(coitem.coitem_cos_accnt_id) ELSE NULL::text END AS alternate_cos_account 
FROM cohead
, (
     (
           (coitem 
         LEFT JOIN itemsite isb 
                ON (
                       (coitem.coitem_substitute_item_id = isb.itemsite_id)
                 )
           )
   LEFT JOIN item s 
          ON (
                 (isb.itemsite_item_id = s.item_id)
           )
     )
LEFT JOIN tax 
    ON (
           (coitem.coitem_tax_id = tax.tax_id)
     )
)
, itemsite il
, item l
, whsinfo
, uom q
, uom p 
WHERE (
     (
           (
                 (
                       (
                             (cohead.cohead_id = coitem.coitem_cohead_id)
                           AND (coitem.coitem_itemsite_id = il.itemsite_id)
                       )
                     AND (il.itemsite_item_id = l.item_id)
                 )
               AND (il.itemsite_warehous_id = whsinfo.warehous_id)
           )
         AND (coitem.coitem_qty_uom_id = q.uom_id)
     )
   AND (coitem.coitem_price_uom_id = p.uom_id)
)
ORDER BY cohead.cohead_number
, coitem.coitem_linenumber
, coitem.coitem_subnumber;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.saleslinechar">saleslinechar</a>
		</h2>
        
         <p>Sales Order Line Item Characteristic</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.saleslinechar Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>order_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>line_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>characteristic</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>value</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>price</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (data.order_number)::character varying AS order_number
, data.line_number
, data.characteristic
, COALESCE
(si.charass_value
     , i3.charass_value
) AS value
, (COALESCE
     (si.charass_price
           , itemcharprice
           (data.item_id
                 , data.char_id
                 , COALESCE
                 (si.charass_value
                       , i3.charass_value
                 )
                 , data.cohead_cust_id
                 , data.cohead_shipto_id
                 , data.coitem_qtyord
                 , data.cohead_curr_id
                 , data.cohead_orderdate
           )
           , (0)::numeric
     )
)::numeric
(16
     ,4
) AS price 
FROM (
     (
           (
                 (
                       (
                        SELECT DISTINCT cohead.cohead_cust_id
                             , cohead.cohead_shipto_id
                             , cohead.cohead_curr_id
                             , cohead.cohead_orderdate
                             , coitem.coitem_id
                             , coitem.coitem_itemsite_id
                             , coitem.coitem_qtyord
                             ,&quot;char&quot;.char_id
                             , item.item_id
                             , cohead.cohead_number AS order_number
                             , CASE WHEN 
                             (coitem.coitem_subnumber = 0) THEN 
                             (
                                   (coitem.coitem_linenumber)::character varying
                             )::text ELSE 
                             (
                                   (
                                         (
                                               (coitem.coitem_linenumber)::character varying
                                         )::text || 
                                         (&#39;.&#39;::character varying)::text
                                   ) || 
                                   (
                                         (coitem.coitem_subnumber)::character varying
                                   )::text
                             ) END AS line_number
                             ,&quot;char&quot;.char_name AS characteristic 
                          FROM cohead
                             , coitem
                             , itemsite
                             , item
                             , charass
                             ,&quot;char&quot;
                         WHERE (
                                   (
                                         (
                                               (
                                                     (
                                                           (cohead.cohead_id = coitem.coitem_cohead_id)
                                                         AND (coitem.coitem_itemsite_id = itemsite.itemsite_id)
                                                     )
                                                   AND (itemsite.itemsite_item_id = item.item_id)
                                               )
                                             AND (charass.charass_char_id = &quot;char&quot;.char_id)
                                         )
                                       AND (charass.charass_target_type = &#39;I&#39;::text)
                                   )
                                 AND (charass.charass_target_id = item.item_id)
                             )
                      ORDER BY cohead.cohead_cust_id
                             , cohead.cohead_shipto_id
                             , cohead.cohead_curr_id
                             , cohead.cohead_orderdate
                             , coitem.coitem_id
                             , coitem.coitem_itemsite_id
                             , coitem.coitem_qtyord
                             ,&quot;char&quot;.char_id
                             , item.item_id
                             , cohead.cohead_number
                             , CASE WHEN 
                             (coitem.coitem_subnumber = 0) THEN 
                             (
                                   (coitem.coitem_linenumber)::character varying
                             )::text ELSE 
                             (
                                   (
                                         (
                                               (coitem.coitem_linenumber)::character varying
                                         )::text || 
                                         (&#39;.&#39;::character varying)::text
                                   ) || 
                                   (
                                         (coitem.coitem_subnumber)::character varying
                                   )::text
                             ) END
                             ,&quot;char&quot;.char_name
                       ) data 
               LEFT JOIN charass si 
                      ON (
                             (
                                   (
                                         (data.coitem_id = si.charass_target_id)
                                       AND (&#39;SI&#39;::text = si.charass_target_type)
                                   )
                                 AND (si.charass_char_id = data.char_id)
                             )
                       )
                 )
         LEFT JOIN itemsite i1 
                ON (
                       (data.coitem_itemsite_id = i1.itemsite_id)
                 )
           )
   LEFT JOIN item i2 
          ON (
                 (i1.itemsite_item_id = i2.item_id)
           )
     )
LEFT JOIN charass i3 
    ON (
           (
                 (
                       (
                             (i2.item_id = i3.charass_target_id)
                           AND (&#39;I&#39;::text = i3.charass_target_type)
                       )
                     AND (i3.charass_char_id = data.char_id)
                 )
               AND i3.charass_default
           )
     )
)
ORDER BY (data.order_number)::character varying
, data.line_number
, data.characteristic;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.saleslinecomment">saleslinecomment</a>
		</h2>
        
         <p>Sales Order Line Item Comment</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.saleslinecomment Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>order_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>line_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>date</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>text</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (cohead.cohead_number)::character varying AS order_number
, CASE WHEN 
(coitem.coitem_subnumber = 0) THEN 
(
     (coitem.coitem_linenumber)::character varying
)::text ELSE 
(
     (
           (
                 (coitem.coitem_linenumber)::character varying
           )::text || 
           (&#39;.&#39;::character varying)::text
     ) || 
     (
           (coitem.coitem_subnumber)::character varying
     )::text
) END AS line_number
, cmnttype.cmnttype_name AS &quot;type&quot;
,&quot;comment&quot;.comment_date AS date
,&quot;comment&quot;.comment_user AS username
,&quot;comment&quot;.comment_text AS text 
FROM cohead
, coitem
, cmnttype
,&quot;comment&quot;
WHERE (
     (
           (
                 (cohead.cohead_id = coitem.coitem_cohead_id)
               AND (&quot;comment&quot;.comment_source = &#39;SI&#39;::text)
           )
         AND (&quot;comment&quot;.comment_source_id = coitem.coitem_id)
     )
   AND (&quot;comment&quot;.comment_cmnttype_id = cmnttype.cmnttype_id)
)
ORDER BY cohead.cohead_number
, coitem.coitem_linenumber
,&quot;comment&quot;.comment_date DESC;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.salesorder">salesorder</a>
		</h2>
        
         <p>Sales Order</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.salesorder Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>order_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>site</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>order_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>pack_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>originated_by</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>sales_rep</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>commission</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>tax_authority</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>terms</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>project_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>customer_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billto_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billto_address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billto_address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billto_address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billto_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billto_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>billto_postal_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billto_country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_phone</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_postal_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_po_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>fob</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ship_via</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>hold_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipping_chgs</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipping_form</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ship_complete</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>currency</td>
            	<td>character varying(3)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>misc_charge_description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>misc_account_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>misc_charge</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>freight</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>calculate_freight</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>order_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipping_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>add_to_packing_list_batch</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (cohead.cohead_number)::character varying AS order_number
, whsinfo.warehous_code AS site
, cohead.cohead_orderdate AS order_date
, cohead.cohead_packdate AS pack_date
, CASE WHEN 
(cohead.cohead_origin = &#39;C&#39;::bpchar) THEN &#39;Customer&#39;::text WHEN 
(cohead.cohead_origin = &#39;I&#39;::bpchar) THEN &#39;Internet&#39;::text WHEN 
(cohead.cohead_origin = &#39;S&#39;::bpchar) THEN &#39;Sales Rep.&#39;::text ELSE &#39;Error&#39;::text END AS originated_by
, salesrep.salesrep_number AS sales_rep
, cohead.cohead_commission AS commission
, taxauth.taxauth_code AS tax_authority
, terms.terms_code AS terms
, prj.prj_number AS project_number
, custinfo.cust_number AS customer_number
, cohead.cohead_billtoname AS billto_name
, cohead.cohead_billtoaddress1 AS billto_address1
, cohead.cohead_billtoaddress2 AS billto_address2
, cohead.cohead_billtoaddress3 AS billto_address3
, cohead.cohead_billtocity AS billto_city
, cohead.cohead_billtostate AS billto_state
, cohead.cohead_billtozipcode AS billto_postal_code
, cohead.cohead_billtocountry AS billto_country
, shiptoinfo.shipto_num AS shipto_number
, cohead.cohead_shiptoname AS shipto_name
, cohead.cohead_shiptophone AS shipto_phone
, cohead.cohead_shiptoaddress1 AS shipto_address1
, cohead.cohead_shiptoaddress2 AS shipto_address2
, cohead.cohead_shiptoaddress3 AS shipto_address3
, cohead.cohead_shiptocity AS shipto_city
, cohead.cohead_shiptostate AS shipto_state
, cohead.cohead_shiptozipcode AS shipto_postal_code
, cohead.cohead_shiptocountry AS shipto_country
, cohead.cohead_custponumber AS cust_po_number
, cohead.cohead_fob AS fob
, cohead.cohead_shipvia AS ship_via
, CASE WHEN 
(cohead.cohead_holdtype = &#39;N&#39;::bpchar) THEN &#39;None&#39;::text WHEN 
(cohead.cohead_holdtype = &#39;C&#39;::bpchar) THEN &#39;Credit&#39;::text WHEN 
(cohead.cohead_holdtype = &#39;S&#39;::bpchar) THEN &#39;Shipping&#39;::text WHEN 
(cohead.cohead_holdtype = &#39;P&#39;::bpchar) THEN &#39;Packing&#39;::text WHEN 
(cohead.cohead_holdtype = &#39;R&#39;::bpchar) THEN &#39;Return&#39;::text ELSE &#39;Error&#39;::text END AS hold_type
, shipchrg.shipchrg_name AS shipping_chgs
, shipform.shipform_name AS shipping_form
, cohead.cohead_shipcomplete AS ship_complete
, curr_symbol.curr_abbr AS currency
, cohead.cohead_misc_descrip AS misc_charge_description
, CASE WHEN 
(cohead.cohead_misc_accnt_id IS NULL) THEN NULL::text ELSE formatglaccount
(cohead.cohead_misc_accnt_id) END AS misc_account_number
, cohead.cohead_misc AS misc_charge
, cohead.cohead_freight AS freight
, cohead.cohead_calcfreight AS calculate_freight
, cohead.cohead_ordercomments AS order_notes
, cohead.cohead_shipcomments AS shipping_notes
, false AS add_to_packing_list_batch 
FROM (
     (
           (
                 (
                       (cohead 
                     LEFT JOIN whsinfo 
                            ON (
                                   (cohead.cohead_warehous_id = whsinfo.warehous_id)
                             )
                       )
               LEFT JOIN prj 
                      ON (
                             (cohead.cohead_prj_id = prj.prj_id)
                       )
                 )
         LEFT JOIN shiptoinfo 
                ON (
                       (cohead.cohead_shipto_id = shiptoinfo.shipto_id)
                 )
           )
   LEFT JOIN shipchrg 
          ON (
                 (cohead.cohead_shipchrg_id = shipchrg.shipchrg_id)
           )
     )
LEFT JOIN taxauth 
    ON (
           (cohead.cohead_taxauth_id = taxauth.taxauth_id)
     )
)
, custinfo
, shipform
, salesrep
, terms
, curr_symbol 
WHERE (
     (
           (
                 (
                       (cohead.cohead_cust_id = custinfo.cust_id)
                     AND (cohead.cohead_shipform_id = shipform.shipform_id)
                 )
               AND (cohead.cohead_salesrep_id = salesrep.salesrep_id)
           )
         AND (cohead.cohead_terms_id = terms.terms_id)
     )
   AND (cohead.cohead_curr_id = curr_symbol.curr_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.salesordercomment">salesordercomment</a>
		</h2>
        
         <p>Sales Order Comment</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.salesordercomment Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>order_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>date</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>text</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (cohead.cohead_number)::character varying AS order_number
, cmnttype.cmnttype_name AS &quot;type&quot;
,&quot;comment&quot;.comment_date AS date
,&quot;comment&quot;.comment_user AS username
,&quot;comment&quot;.comment_text AS text 
FROM cohead
, cmnttype
,&quot;comment&quot;
WHERE (
     (
           (&quot;comment&quot;.comment_source = &#39;S&#39;::text)
         AND (&quot;comment&quot;.comment_source_id = cohead.cohead_id)
     )
   AND (&quot;comment&quot;.comment_cmnttype_id = cmnttype.cmnttype_id)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.salesrep">salesrep</a>
		</h2>
        
         <p>Sales Rep</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.salesrep Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>commission_percent</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>employee</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (salesrep.salesrep_number)::character varying AS number
, salesrep.salesrep_active AS active
, salesrep.salesrep_name AS name
, (salesrep.salesrep_commission * 
     (100)::numeric
) AS commission_percent
, emp.emp_number AS employee 
FROM (salesrep 
LEFT JOIN emp 
    ON (
           (emp.emp_id = salesrep.salesrep_emp_id)
     )
)
ORDER BY salesrep.salesrep_number;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.site">site</a>
		</h2>
        
         <p>Site</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.site Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>code</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>address_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>postal_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>address_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>honorific</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>first</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>middle</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>last</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>suffix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>job_title</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>phone</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>fax</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>post_unassigned_transactions_to</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>post_unassigned_transactions_to_description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>transit_type</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>inventory_type</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>next_bill_of_lading_prefix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>next_bill_of_lading_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipping_site</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>next_count_tag_prefix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>next_count_tag_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>force_the_use_of_count_slips</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>force_the_use_of_zones</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipping_commission</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tax_authority</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>default_fob</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>default_ship_via</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>default_shipping_form</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>default_cost_category</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipping_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>enforce_arbl_naming_convention</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>aisle_size</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>aisle_allow_alpha_characters</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>rack_size</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>rack_allow_alpha_characters</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bin_size</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bin_allow_alpha_characters</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>location_size</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>location_allow_alpha_characters</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (whsinfo.warehous_code)::character varying AS code
, st.sitetype_name AS &quot;type&quot;
, whsinfo.warehous_active AS active
, whsinfo.warehous_descrip AS description
, m.addr_number AS address_number
, m.addr_line1 AS address1
, m.addr_line2 AS address2
, m.addr_line3 AS address3
, m.addr_city AS city
, m.addr_state AS state
, m.addr_postalcode AS postal_code
, m.addr_country AS country
,&#39;&#39;::text AS address_change
, c.cntct_number AS contact_number
, c.cntct_honorific AS honorific
, c.cntct_first_name AS &quot;first&quot;
, c.cntct_middle AS middle
, c.cntct_last_name AS &quot;last&quot;
, c.cntct_suffix AS suffix
, c.cntct_title AS job_title
, c.cntct_phone AS phone
, c.cntct_fax AS fax
, c.cntct_email AS email
,&#39;&#39;::text AS contact_change
, formatglaccount
(a.accnt_id) AS post_unassigned_transactions_to
, a.accnt_descrip AS post_unassigned_transactions_to_description
, whsinfo.warehous_transit AS transit_type
, CASE WHEN whsinfo.warehous_transit THEN false ELSE true END AS inventory_type
, CASE WHEN whsinfo.warehous_transit THEN &#39;&#39;::text ELSE whsinfo.warehous_bol_prefix END AS next_bill_of_lading_prefix
, CASE WHEN whsinfo.warehous_transit THEN 0 ELSE whsinfo.warehous_bol_number END AS next_bill_of_lading_number
, CASE WHEN whsinfo.warehous_transit THEN false ELSE whsinfo.warehous_shipping END AS shipping_site
, CASE WHEN whsinfo.warehous_transit THEN &#39;&#39;::text ELSE whsinfo.warehous_counttag_prefix END AS next_count_tag_prefix
, CASE WHEN whsinfo.warehous_transit THEN 0 ELSE whsinfo.warehous_counttag_number END AS next_count_tag_number
, CASE WHEN whsinfo.warehous_transit THEN false ELSE whsinfo.warehous_useslips END AS force_the_use_of_count_slips
, CASE WHEN whsinfo.warehous_transit THEN false ELSE whsinfo.warehous_usezones END AS force_the_use_of_zones
, CASE WHEN whsinfo.warehous_transit THEN 
(0)::numeric ELSE 
(whsinfo.warehous_shipping_commission * 100.0) END AS shipping_commission
, CASE WHEN whsinfo.warehous_transit THEN &#39;&#39;::text ELSE t.taxauth_code END AS tax_authority
, CASE WHEN whsinfo.warehous_transit THEN &#39;&#39;::text ELSE whsinfo.warehous_fob END AS default_fob
, CASE WHEN whsinfo.warehous_transit THEN s.shipvia_code ELSE &#39;&#39;::text END AS default_ship_via
, CASE WHEN whsinfo.warehous_transit THEN f.shipform_name ELSE &#39;&#39;::text END AS default_shipping_form
, CASE WHEN whsinfo.warehous_transit THEN cc.costcat_code ELSE &#39;&#39;::text END AS default_cost_category
, CASE WHEN whsinfo.warehous_transit THEN whsinfo.warehous_shipcomments ELSE &#39;&#39;::text END AS shipping_comments
, CASE WHEN whsinfo.warehous_transit THEN false ELSE whsinfo.warehous_enforcearbl END AS enforce_arbl_naming_convention
, CASE WHEN whsinfo.warehous_transit THEN 0 WHEN whsinfo.warehous_enforcearbl THEN whsinfo.warehous_aislesize ELSE 0 END AS aisle_size
, CASE WHEN whsinfo.warehous_transit THEN false WHEN 
(whsinfo.warehous_enforcearbl 
   AND whsinfo.warehous_aislealpha
) THEN true ELSE false END AS aisle_allow_alpha_characters
, CASE WHEN whsinfo.warehous_transit THEN 0 WHEN whsinfo.warehous_enforcearbl THEN whsinfo.warehous_racksize ELSE 0 END AS rack_size
, CASE WHEN whsinfo.warehous_transit THEN false WHEN 
(whsinfo.warehous_enforcearbl 
   AND whsinfo.warehous_rackalpha
) THEN true ELSE false END AS rack_allow_alpha_characters
, CASE WHEN whsinfo.warehous_transit THEN 0 WHEN whsinfo.warehous_enforcearbl THEN whsinfo.warehous_binsize ELSE 0 END AS bin_size
, CASE WHEN whsinfo.warehous_transit THEN false WHEN 
(whsinfo.warehous_enforcearbl 
   AND whsinfo.warehous_binalpha
) THEN true ELSE false END AS bin_allow_alpha_characters
, CASE WHEN whsinfo.warehous_transit THEN 0 WHEN whsinfo.warehous_enforcearbl THEN whsinfo.warehous_locationsize ELSE 0 END AS location_size
, CASE WHEN whsinfo.warehous_transit THEN false WHEN 
(whsinfo.warehous_enforcearbl 
   AND whsinfo.warehous_locationalpha
) THEN true ELSE false END AS location_allow_alpha_characters 
FROM (
     (
           (
                 (
                       (
                             (
                                   (
                                         (whsinfo 
                                       LEFT JOIN addr m 
                                              ON (
                                                     (whsinfo.warehous_addr_id = m.addr_id)
                                               )
                                         )
                                 LEFT JOIN cntct c 
                                        ON (
                                               (whsinfo.warehous_cntct_id = c.cntct_id)
                                         )
                                   )
                           LEFT JOIN accnt a 
                                  ON (
                                         (whsinfo.warehous_default_accnt_id = a.accnt_id)
                                   )
                             )
                     LEFT JOIN taxauth t 
                            ON (
                                   (whsinfo.warehous_taxauth_id = t.taxauth_id)
                             )
                       )
               LEFT JOIN shipvia s 
                      ON (
                             (whsinfo.warehous_shipvia_id = s.shipvia_id)
                       )
                 )
         LEFT JOIN shipform f 
                ON (
                       (whsinfo.warehous_shipform_id = f.shipform_id)
                 )
           )
   LEFT JOIN costcat cc 
          ON (
                 (whsinfo.warehous_costcat_id = cc.costcat_id)
           )
     )
LEFT JOIN sitetype st 
    ON (
           (whsinfo.warehous_sitetype_id = st.sitetype_id)
     )
)
ORDER BY whsinfo.warehous_code;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.sitezone">sitezone</a>
		</h2>
        
         <p>Site Zone</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.sitezone Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>site</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>name</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (whsinfo.warehous_code)::character varying AS site
, (whsezone.whsezone_name)::character varying AS name
, whsezone.whsezone_descrip AS description 
FROM (whsezone 
LEFT JOIN whsinfo 
    ON (
           (whsinfo.warehous_id = whsezone.whsezone_warehous_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.todo">todo</a>
		</h2>
        
         <p>To-Do List</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.todo Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>task_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>owner</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>assigned_to</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>task_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>priority</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>incident</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>opportunity</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>account</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>date_due</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>date_assigned</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>date_started</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>date_completed</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>status</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT todoitem.todoitem_id AS task_number
, todoitem.todoitem_owner_username AS &quot;owner&quot;
, usr.usr_username AS assigned_to
, todoitem.todoitem_name AS task_name
, incdtpriority.incdtpriority_name AS priority
, incdt.incdt_number AS incident
, ophead.ophead_name AS opportunity
, crmacct.crmacct_number AS account
, formatdate
(todoitem.todoitem_due_date) AS date_due
, formatdate
(todoitem.todoitem_assigned_date) AS date_assigned
, formatdate
(todoitem.todoitem_start_date) AS date_started
, formatdate
(todoitem.todoitem_completed_date) AS date_completed
, CASE WHEN 
(todoitem.todoitem_status = &#39;P&#39;::bpchar) THEN &#39;Pending Input&#39;::text WHEN 
(todoitem.todoitem_status = &#39;D&#39;::bpchar) THEN &#39;Deferred&#39;::text ELSE &#39;Neither&#39;::text END AS status
, todoitem.todoitem_active AS active
, todoitem.todoitem_description AS description
, todoitem.todoitem_notes AS notes 
FROM (
     (
           (
                 (
                       (todoitem 
                     LEFT JOIN usr 
                            ON (
                                   (usr.usr_id = todoitem.todoitem_usr_id)
                             )
                       )
               LEFT JOIN incdt 
                      ON (
                             (incdt.incdt_id = todoitem.todoitem_incdt_id)
                       )
                 )
         LEFT JOIN ophead 
                ON (
                       (ophead.ophead_id = todoitem.todoitem_ophead_id)
                 )
           )
   LEFT JOIN crmacct 
          ON (
                 (crmacct.crmacct_id = todoitem.todoitem_crmacct_id)
           )
     )
LEFT JOIN incdtpriority 
    ON (
           (incdtpriority.incdtpriority_id = todoitem.todoitem_priority_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.vendor">vendor</a>
		</h2>
        
         <p>vendor</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.vendor Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vendor_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vendor_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vendor_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>account_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>address_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>postalcode</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>address_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>default_terms</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ship_via</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>default_currency</td>
            	<td>character varying(3)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>default_fob</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>sells_purchase_order_items</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>may_only_sell_item_source</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>qualified</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>matching_vo_po_amounts</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>receives_1099</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>default_tax_authority</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact1_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact1_honorific</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact1_first</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact1_middle</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact1_last</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact1_suffix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact1_job_title</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact1_voice</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact1_alternate</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact1_fax</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact1_email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact1_web</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact1_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact2_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact2_honorific</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact2_first</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact2_middle</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact2_last</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact2_suffix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact2_job_title</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact2_voice</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact2_alternate</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact2_fax</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact2_email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact2_web</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact2_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>po_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>allow_email_po_delivery</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>po_edi_email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>po_edi_cc</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>po_edi_subject</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>po_edi_filename</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>po_edi_emailbody</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (vendinfo.vend_number)::character varying AS vendor_number
, vendtype.vendtype_code AS vendor_type
, vendinfo.vend_name AS vendor_name
, vendinfo.vend_active AS active
, vendinfo.vend_accntnum AS account_number
, addr.addr_number AS address_number
, addr.addr_line1 AS address1
, addr.addr_line2 AS address2
, addr.addr_line3 AS address3
, addr.addr_city AS city
, addr.addr_state AS state
, addr.addr_postalcode AS postalcode
, addr.addr_country AS country
,&#39;&#39;::text AS address_change
, terms.terms_code AS default_terms
, vendinfo.vend_shipvia AS ship_via
, curr_symbol.curr_abbr AS default_currency
, CASE WHEN 
(vendinfo.vend_fobsource = &#39;W&#39;::bpchar) THEN &#39;Receiving Site&#39;::text ELSE vendinfo.vend_fob END AS default_fob
, vendinfo.vend_po AS sells_purchase_order_items
, vendinfo.vend_restrictpurch AS may_only_sell_item_source
, vendinfo.vend_qualified AS qualified
, vendinfo.vend_match AS matching_vo_po_amounts
, vendinfo.vend_1099 AS receives_1099
, taxauth.taxauth_code AS default_tax_authority
, c1.cntct_number AS contact1_number
, c1.cntct_honorific AS contact1_honorific
, c1.cntct_first_name AS contact1_first
, c1.cntct_middle AS contact1_middle
, c1.cntct_last_name AS contact1_last
, c1.cntct_suffix AS contact1_suffix
, c1.cntct_title AS contact1_job_title
, c1.cntct_phone AS contact1_voice
, c1.cntct_phone2 AS contact1_alternate
, c1.cntct_fax AS contact1_fax
, c1.cntct_email AS contact1_email
, c1.cntct_webaddr AS contact1_web
,&#39;&#39;::text AS contact1_change
, c2.cntct_number AS contact2_number
, c2.cntct_honorific AS contact2_honorific
, c2.cntct_first_name AS contact2_first
, c2.cntct_middle AS contact2_middle
, c2.cntct_last_name AS contact2_last
, c2.cntct_suffix AS contact2_suffix
, c2.cntct_title AS contact2_job_title
, c2.cntct_phone AS contact2_voice
, c2.cntct_phone2 AS contact2_alternate
, c2.cntct_fax AS contact2_fax
, c2.cntct_email AS contact2_email
, c2.cntct_webaddr AS contact2_web
,&#39;&#39;::text AS contact2_change
, vendinfo.vend_comments AS notes
, vendinfo.vend_pocomments AS po_comments
, vendinfo.vend_emailpodelivery AS allow_email_po_delivery
, vendinfo.vend_ediemail AS po_edi_email
, vendinfo.vend_edicc AS po_edi_cc
, vendinfo.vend_edisubject AS po_edi_subject
, vendinfo.vend_edifilename AS po_edi_filename
, vendinfo.vend_ediemailbody AS po_edi_emailbody 
FROM (
     (
           (
                 (
                       (
                             (
                                   (vendinfo 
                                 LEFT JOIN addr 
                                        ON (
                                               (vendinfo.vend_addr_id = addr.addr_id)
                                         )
                                   )
                           LEFT JOIN cntct c1 
                                  ON (
                                         (vendinfo.vend_cntct1_id = c1.cntct_id)
                                   )
                             )
                     LEFT JOIN cntct c2 
                            ON (
                                   (vendinfo.vend_cntct2_id = c2.cntct_id)
                             )
                       )
               LEFT JOIN taxauth 
                      ON (
                             (vendinfo.vend_taxauth_id = taxauth.taxauth_id)
                       )
                 )
         LEFT JOIN curr_symbol 
                ON (
                       (vendinfo.vend_curr_id = curr_symbol.curr_id)
                 )
           )
   LEFT JOIN terms 
          ON (
                 (vendinfo.vend_terms_id = terms.terms_id)
           )
     )
LEFT JOIN vendtype 
    ON (
           (vendinfo.vend_vendtype_id = vendtype.vendtype_id)
     )
)
ORDER BY vendinfo.vend_number;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.vendoraddress">vendoraddress</a>
		</h2>
        
         <p>vendor address</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.vendoraddress Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vendor_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vendor_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vendor_address_number</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vendor_address_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>address_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>postalcode</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>address_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>default_tax_authority</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_honorific</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact_first</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_middle</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact_last</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_suffix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact_job_title</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_voice</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact_alternate</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_fax</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact_email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>contact_web</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>contact_change</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (vendinfo.vend_number)::character varying AS vendor_number
, vendinfo.vend_name AS vendor_name
, (vendaddrinfo.vendaddr_code)::character varying AS vendor_address_number
, vendaddrinfo.vendaddr_name AS vendor_address_name
, addr.addr_number AS address_number
, addr.addr_line1 AS address1
, addr.addr_line2 AS address2
, addr.addr_line3 AS address3
, addr.addr_city AS city
, addr.addr_state AS state
, addr.addr_postalcode AS postalcode
, addr.addr_country AS country
,&#39;&#39;::text AS address_change
, taxauth.taxauth_code AS default_tax_authority
, cntct.cntct_number AS contact_number
, cntct.cntct_honorific AS contact_honorific
, cntct.cntct_first_name AS contact_first
, cntct.cntct_middle AS contact_middle
, cntct.cntct_last_name AS contact_last
, cntct.cntct_suffix AS contact_suffix
, cntct.cntct_title AS contact_job_title
, cntct.cntct_phone AS contact_voice
, cntct.cntct_phone2 AS contact_alternate
, cntct.cntct_fax AS contact_fax
, cntct.cntct_email AS contact_email
, cntct.cntct_webaddr AS contact_web
,&#39;&#39;::text AS contact_change
, vendaddrinfo.vendaddr_comments AS notes 
FROM (
     (
           (
                 (vendaddrinfo 
               LEFT JOIN vendinfo 
                      ON (
                             (vendinfo.vend_id = vendaddrinfo.vendaddr_vend_id)
                       )
                 )
         LEFT JOIN addr 
                ON (
                       (vendaddrinfo.vendaddr_addr_id = addr.addr_id)
                 )
           )
   LEFT JOIN cntct 
          ON (
                 (vendaddrinfo.vendaddr_cntct_id = cntct.cntct_id)
           )
     )
LEFT JOIN taxauth 
    ON (
           (vendaddrinfo.vendaddr_taxauth_id = taxauth.taxauth_id)
     )
)
ORDER BY vendaddrinfo.vendaddr_code;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#api.schema">api</a>.<a name="api.view.vendortype">vendortype</a>
		</h2>
        
         <p>Vendor Type</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>api.vendortype Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>code</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (vendtype.vendtype_code)::character varying AS code
, vendtype.vendtype_descrip AS description 
FROM vendtype 
ORDER BY vendtype.vendtype_code;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#api.schema">Schema api</a>
    </p>
	

	<!-- We've gone through the table structure, now lets take a look at user functions -->
	

<!-- publicpublic -->

		
		<hr>
		<h1>Schema public</h1>
		
			<p>Standard public schema</p>
		

		
		
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.acalitem">acalitem</a>
		</h2>
        
         <p>Absolute Calendar Item information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.acalitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>acalitem_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;xcalitem_xcalitem_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>acalitem_calhead_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>acalitem_periodstart</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>acalitem_periodlength</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>acalitem_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.accnt">accnt</a>
		</h2>
        
         <p>General Ledger (G/L) Account Number information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.accnt Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>accnt_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;accnt_accnt_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>accnt_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>accnt_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>accnt_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>accnt_profit</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>accnt_sub</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>accnt_type</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>accnt_extref</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.company">public.company.company_number</a>
                  
                
                </td>
            	<td>accnt_company</td>
            	<td>text</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>accnt_closedpost</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>accnt_forwardupdate</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>accnt_subaccnttype_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>accnt_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.budgitem">public.budgitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.cashrcptmisc">public.cashrcptmisc</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.cohead">public.cohead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.coitem">public.coitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.costcat">public.costcat</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.quhead">public.quhead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.salesaccnt">public.salesaccnt</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.taxauth">public.taxauth</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.whsinfo">public.whsinfo</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.addr">addr</a>
		</h2>
        
         <p>Postal Address</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.addr Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>addr_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>addr_active</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>addr_line1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>addr_line2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>addr_line3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>addr_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>addr_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>addr_postalcode</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>addr_country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>addr_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>addr_number</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.cntct">public.cntct</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.shiptoinfo">public.shiptoinfo</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.taxauth">public.taxauth</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.vendaddrinfo">public.vendaddrinfo</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.vendinfo">public.vendinfo</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.whsinfo">public.whsinfo</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.alarm">alarm</a>
		</h2>
        
         <p>This table is the open alarms.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.alarm Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>alarm_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>alarm_number</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>alarm_event</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>alarm_email</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>alarm_sysmsg</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>alarm_trigger</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>alarm_time</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>alarm_time_offset</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>alarm_time_qualifier</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>alarm_creator</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>alarm_event_recipient</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>alarm_email_recipient</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>alarm_sysmsg_recipient</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>alarm_source</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>alarm_source_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.apaccnt">apaccnt</a>
		</h2>
        
         <p>Accounts Payable (A/P) Account assignment information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.apaccnt Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>apaccnt_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apaccnt_vendtype_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apaccnt_vendtype</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apaccnt_ap_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apaccnt_prepaid_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apaccnt_discount_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.apapply">apapply</a>
		</h2>
        
         <p>Applications (e.g., Payments, A/P Credit Memos) made to Accounts Payable (A/P) Documents</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.apapply Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>apapply_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apapply_vend_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apapply_postdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apapply_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apapply_source_apopen_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				<br><br>If apapply_source_doctype is &quot;C&quot; (credit memo) then apapply_source_apopen_id acts as a foreign key to the apopen table. If the source doctype is &quot;K&quot; (check) then the apapply_source_apopen_id acts as a foreign key to the checkhead table. If the apapply_source_apopen_id is -1 then the internal id of the source document is not known (always the case for checks posted before release 3.2.0BETA).
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apapply_source_doctype</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apapply_source_docnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apapply_target_apopen_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apapply_target_doctype</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apapply_target_docnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apapply_journalnumber</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apapply_amount</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>apapply_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apapply_target_paid</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.apchk">apchk</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.apchk Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apchk_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apchk_vend_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apchk_bankaccnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apchk_printed</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apchk_checkdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apchk_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apchk_amount</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apchk_void</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apchk_replaced</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apchk_posted</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apchk_rec</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apchk_misc</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apchk_expcat_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apchk_for</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apchk_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apchk_journalnumber</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apchk_curr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apchk_deleted</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT checkhead.checkhead_id AS apchk_id
, checkhead.checkhead_recip_id AS apchk_vend_id
, checkhead.checkhead_bankaccnt_id AS apchk_bankaccnt_id
, checkhead.checkhead_printed AS apchk_printed
, checkhead.checkhead_checkdate AS apchk_checkdate
, checkhead.checkhead_number AS apchk_number
, checkhead.checkhead_amount AS apchk_amount
, checkhead.checkhead_void AS apchk_void
, checkhead.checkhead_replaced AS apchk_replaced
, checkhead.checkhead_posted AS apchk_posted
, checkhead.checkhead_rec AS apchk_rec
, checkhead.checkhead_misc AS apchk_misc
, checkhead.checkhead_expcat_id AS apchk_expcat_id
, checkhead.checkhead_for AS apchk_for
, checkhead.checkhead_notes AS apchk_notes
, checkhead.checkhead_journalnumber AS apchk_journalnumber
, checkhead.checkhead_curr_id AS apchk_curr_id
, checkhead.checkhead_deleted AS apchk_deleted 
FROM checkhead 
WHERE (checkhead.checkhead_recip_type = &#39;V&#39;::text);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.apchkitem">apchkitem</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.apchkitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apchkitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apchkitem_apchk_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apchkitem_vouchernumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apchkitem_ponumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apchkitem_amount</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apchkitem_invcnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apchkitem_apopen_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apchkitem_docdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apchkitem_curr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apchkitem_discount</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT checkitem.checkitem_id AS apchkitem_id
, checkitem.checkitem_checkhead_id AS apchkitem_apchk_id
, checkitem.checkitem_vouchernumber AS apchkitem_vouchernumber
, checkitem.checkitem_ponumber AS apchkitem_ponumber
, checkitem.checkitem_amount AS apchkitem_amount
, checkitem.checkitem_invcnumber AS apchkitem_invcnumber
, checkitem.checkitem_apopen_id AS apchkitem_apopen_id
, checkitem.checkitem_docdate AS apchkitem_docdate
, checkitem.checkitem_curr_id AS apchkitem_curr_id
, checkitem.checkitem_discount AS apchkitem_discount 
FROM checkhead
, checkitem 
WHERE (
     (checkitem.checkitem_checkhead_id = checkhead.checkhead_id)
   AND (checkhead.checkhead_recip_type = &#39;V&#39;::text)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.apcreditapply">apcreditapply</a>
		</h2>
        
         <p>Temporary table for storing details of Accounts Payable (A/P) Credit Memo applications before those applications are posted</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.apcreditapply Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>apcreditapply_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apcreditapply_source_apopen_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apcreditapply_target_apopen_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apcreditapply_amount</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>apcreditapply_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.apopen">apopen</a>
		</h2>
        
         <p>Accounts Payable (A/P) open Items information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.apopen Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>apopen_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;apopen_apopen_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apopen_docdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apopen_duedate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apopen_terms_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apopen_vend_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apopen_doctype</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apopen_docnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apopen_amount</td>
            	<td>numeric(12,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apopen_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apopen_posted</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apopen_reference</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apopen_invcnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apopen_ponumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apopen_journalnumber</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apopen_paid</td>
            	<td>numeric(12,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apopen_open</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apopen_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apopen_discount</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apopen_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				DEFAULT -1
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>apopen_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apopen_closedate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apopen_distdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apopen_void</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apopen_curr_rate</td>
            	<td>numeric(11,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.checkitem">public.checkitem</a></li>
			</ul>
		
		

    <!-- Indexes -->
    
       apopen_apopen_open_idx apopen_open
    
       apopen_apopen_vend_id_idx apopen_vend_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.apselect">apselect</a>
		</h2>
        
         <p>Temporary table for storing details of Accounts Payable (A/P) Payment selections</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.apselect Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>apselect_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>apselect_apopen_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apselect_amount</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apselect_bankaccnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>apselect_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>apselect_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>apselect_discount</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				NOT NULL
				DEFAULT 0.0
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       apselect_apselect_apopen_id_idx apselect_apopen_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.araccnt">araccnt</a>
		</h2>
        
         <p>Accounts Receivable (A/R) Account assignment information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.araccnt Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>araccnt_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;araccnt_araccnt_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>araccnt_custtype_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>araccnt_custtype</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>araccnt_freight_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>araccnt_ar_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>araccnt_prepaid_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>araccnt_deferred_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.arapply">arapply</a>
		</h2>
        
         <p>Applications (e.g., Cash Receipts, A/R Credit Memos) made to Accounts Receivable (A/R) Documents</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.arapply Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>arapply_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>arapply_postdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>arapply_cust_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>arapply_source_doctype</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>arapply_source_docnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>arapply_target_doctype</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>arapply_target_docnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>arapply_fundstype</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>arapply_refnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>arapply_applied</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>arapply_closed</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>arapply_journalnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>arapply_source_aropen_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>arapply_target_aropen_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>arapply_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>arapply_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>arapply_distdate</td>
            	<td>date</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.arcreditapply">arcreditapply</a>
		</h2>
        
         <p>Temporary table for storing details of Accounts Receivable (A/R) Credit Memo applications before those applications are posted</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.arcreditapply Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>arcreditapply_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>arcreditapply_source_aropen_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>arcreditapply_target_aropen_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>arcreditapply_amount</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>arcreditapply_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.armemo">armemo</a>
		</h2>
        
         <p>Obsolete table</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.armemo Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>armemo_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>armemo_cust_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>armemo_docdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>armemo_docnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>armemo_amount</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>armemo_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>armemo_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>armemo_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.aropen">aropen</a>
		</h2>
        
         <p>Accounts Receivable (A/R) open Items information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.aropen Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>aropen_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;aropen_aropen_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>aropen_docdate</td>
            	<td>date</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>aropen_duedate</td>
            	<td>date</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>aropen_terms_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>aropen_cust_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>aropen_doctype</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>aropen_docnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>aropen_applyto</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>aropen_ponumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>aropen_amount</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>aropen_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>aropen_posted</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>aropen_salesrep_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>aropen_commission_due</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>aropen_commission_paid</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>aropen_ordernumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>aropen_cobmisc_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>aropen_journalnumber</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>aropen_paid</td>
            	<td>numeric(12,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>aropen_open</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>aropen_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>aropen_rsncode_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>aropen_salescat_id</td>
            	<td>integer</td>
                <td><i>
				

				
				DEFAULT -1
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>aropen_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				DEFAULT -1
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>aropen_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>aropen_closedate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>aropen_distdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.cashrcptitem">public.cashrcptitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.checkitem">public.checkitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.incdt">public.incdt</a></li>
			</ul>
		
		

    <!-- Indexes -->
    
       aropen_aropen_cust_id_idx aropen_cust_id
    
       aropen_aropen_doctype_idx aropen_doctype
    
       aropen_aropen_open_idx aropen_open
    
       aropen_posted_idx aropen_posted
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.aropenco">aropenco</a>
		</h2>
        
         <p>Credit Memo to sales order join table</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.aropenco Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>aropenco_aropen_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>aropenco_cohead_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>aropenco_amount</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				NOT NULL
				DEFAULT 0.00
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>aropenco_curr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       aropenco_aropen_id_idx aropenco_aropen_id
    
       aropenco_cohead_id_idx aropenco_cohead_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.asohist">asohist</a>
		</h2>
        
         <p>Archived Sales history</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.asohist Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>asohist_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asohist_cust_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asohist_itemsite_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asohist_shipdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asohist_invcdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asohist_duedate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asohist_promisedate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asohist_ordernumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asohist_invcnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asohist_qtyshipped</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asohist_unitprice</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asohist_unitcost</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asohist_billtoname</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asohist_billtoaddress1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asohist_billtoaddress2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asohist_billtoaddress3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asohist_billtocity</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asohist_billtostate</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asohist_billtozip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asohist_shiptoname</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asohist_shiptoaddress1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asohist_shiptoaddress2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asohist_shiptoaddress3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asohist_shiptocity</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asohist_shiptostate</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asohist_shiptozip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asohist_shipto_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asohist_shipvia</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asohist_salesrep_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asohist_tax_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asohist_misc_type</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asohist_misc_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asohist_misc_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asohist_commission</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asohist_commissionpaid</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asohist_doctype</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asohist_orderdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asohist_imported</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asohist_ponumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>asohist_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.taxtype">public.taxtype.taxtype_id</a>
                  
                
                </td>
            	<td>asohist_taxtype_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asohist_tax_pcta</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asohist_tax_pctb</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asohist_tax_pctc</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asohist_tax_ratea</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asohist_tax_rateb</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asohist_tax_ratec</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.asshead">asshead</a>
		</h2>
        
         <p>Assortment header information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.asshead Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>asshead_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asshead_item_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asshead_docnum</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>asshead_revision</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>asshead_revisiondate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.assitem">assitem</a>
		</h2>
        
         <p>Assortment Line Item information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.assitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>assitem_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>assitem_parent_item_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>assitem_item_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>assitem_seqnumber</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>assitem_qtyper</td>
            	<td>numeric(20,8)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>assitem_effective</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>assitem_expires</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.backup-ccpay">backup_ccpay</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.backup_ccpay Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_ccard_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_cust_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_amount</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_auth</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_status</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_type</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_auth_charge</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_order_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_order_number_seq</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_pfpro_pnref</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_pfpro_result</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_pfpro_cvv2match</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_pfpro_respmsg</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_pfpro_authcode</td>
            	<td>character(6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_pfpro_avsaddr</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_pfpro_avszip</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_pfpro_iavs</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_yp_r_avs</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_yp_r_ordernum</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_yp_r_error</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_yp_r_approved</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_yp_r_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_yp_r_message</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_yp_r_time</td>
            	<td>timestamp without time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_yp_r_ref</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_yp_r_tdate</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_yp_r_tax</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_yp_r_shipping</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_yp_r_score</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_transaction_datetime</td>
            	<td>timestamp without time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_by_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_curr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.backup-payco">backup_payco</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.backup_payco Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>payco_ccpay_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>payco_cohead_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>payco_amount</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>payco_curr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.backup-usr">backup_usr</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.backup_usr Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>usr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>usr_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>usr_propername</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>usr_passwd</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>usr_locale_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>usr_initials</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>usr_agent</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>usr_active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>usr_email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>usr_dept_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>usr_shift_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>usr_window</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.bankaccnt">bankaccnt</a>
		</h2>
        
         <p>Bank Account information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.bankaccnt Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>bankaccnt_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>bankaccnt_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankaccnt_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankaccnt_bankname</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankaccnt_accntnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankaccnt_ar</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankaccnt_ap</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankaccnt_nextchknum</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankaccnt_type</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankaccnt_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankaccnt_check_form_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankaccnt_userec</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankaccnt_rec_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>bankaccnt_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankaccnt_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankaccnt_routing</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				DEFAULT &#39;&#39;::text
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankaccnt_ach_enabled</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankaccnt_ach_origin</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				DEFAULT &#39;&#39;::text
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankaccnt_ach_genchecknum</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankaccnt_ach_leadtime</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankaccnt_ach_lastdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankaccnt_ach_lastfileid</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankaccnt_ach_origintype</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankaccnt_ach_originname</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankaccnt_ach_desttype</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankaccnt_ach_fed_dest</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankaccnt_ach_destname</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankaccnt_ach_dest</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.cashrcpt">public.cashrcpt</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.checkhead">public.checkhead</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.bankadj">bankadj</a>
		</h2>
        
         <p>Bank Adjustments information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.bankadj Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>bankadj_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankadj_bankaccnt_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankadj_bankadjtype_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankadj_created</td>
            	<td>timestamp without time zone</td>
                <td><i>
				

				NOT NULL
				DEFAULT now()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankadj_username</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				DEFAULT &quot;current_user&quot;()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankadj_date</td>
            	<td>date</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankadj_docnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankadj_amount</td>
            	<td>numeric(10,2)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankadj_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankadj_sequence</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankadj_posted</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>bankadj_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.bankadjtype">bankadjtype</a>
		</h2>
        
         <p>Bank Adjustment Types information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.bankadjtype Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>bankadjtype_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>bankadjtype_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankadjtype_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankadjtype_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankadjtype_iscredit</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.bankrec">bankrec</a>
		</h2>
        
         <p>Bank Reconciliation posting history</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.bankrec Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>bankrec_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankrec_created</td>
            	<td>timestamp without time zone</td>
                <td><i>
				

				NOT NULL
				DEFAULT (&#39;now&#39;::text)::timestamp(6) with time zone
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankrec_username</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				DEFAULT &quot;current_user&quot;()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankrec_bankaccnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankrec_opendate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankrec_enddate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankrec_openbal</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankrec_endbal</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankrec_posted</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.bankrecitem">bankrecitem</a>
		</h2>
        
         <p>Posted Bank Reconciliation Line Item information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.bankrecitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>bankrecitem_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankrecitem_bankrec_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankrecitem_source</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bankrecitem_source_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bankrecitem_cleared</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.billingeditlist">billingeditlist</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.billingeditlist Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderid</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemid</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>documentnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billtoname</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ordernumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>linenumber</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>item</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemdescrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>iteminvuom</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>qtytobill</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>f_qtytobill</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>price</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>f_price</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>extprice</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>f_extprice</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>sence</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>account</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>curr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
(
     (
      SELECT cohead.cohead_id AS orderid
           , -2 AS itemid
           , CASE WHEN 
           (formatinvcnumber
                 (cobmisc.cobmisc_id) &lt;&gt; &#39;&#39;::text
           ) THEN 
           (&#39;Invc-&#39;::text || formatinvcnumber
                 (cobmisc.cobmisc_id)
           ) ELSE &#39;?&#39;::text END AS documentnumber
           , custinfo.cust_number
           , cohead.cohead_billtoname AS billtoname
           , cohead.cohead_number AS ordernumber
           , -1 AS linenumber
           ,&#39;&#39; AS item
           ,&#39;&#39; AS itemdescrip
           ,&#39;&#39; AS iteminvuom
           , NULL::numeric AS qtytobill
           ,&#39;&#39; AS f_qtytobill
           , NULL::numeric AS price
           ,&#39;&#39; AS f_price
           , (
                 (
                       (sum
                             (round
                                   (
                                         (
                                               (cobill.cobill_qty * coitem.coitem_qty_invuomratio) * 
                                               (coitem.coitem_price / coitem.coitem_price_invuomratio)
                                         )
                                         , 2
                                   )
                             ) + cobmisc.cobmisc_freight
                       ) + cobmisc.cobmisc_misc
                 ) + cobmisc.cobmisc_tax
           ) AS extprice
           , formatmoney
           (
                 (
                       (
                             (sum
                                   (round
                                         (
                                               (
                                                     (cobill.cobill_qty * coitem.coitem_qty_invuomratio) * 
                                                     (coitem.coitem_price / coitem.coitem_price_invuomratio)
                                               )
                                               , 2
                                         )
                                   ) + cobmisc.cobmisc_freight
                             ) + cobmisc.cobmisc_misc
                       ) + cobmisc.cobmisc_tax
                 )
           ) AS f_extprice
           ,&#39;Debit&#39; AS sence
           , COALESCE
           (
                 (
                  SELECT formatglaccountlong
                       (accnt.accnt_id) AS formatglaccountlong 
                    FROM accnt 
                   WHERE (accnt.accnt_id = findaraccount
                             (custinfo.cust_id)
                       )
                 )
                 ,&#39;Not Assigned&#39;::text
           ) AS account
           , cobmisc.cobmisc_curr_id AS curr_id 
        FROM cohead
           , custinfo
           , (cobmisc 
         LEFT JOIN (cobill 
                    JOIN (coitem 
                          JOIN (itemsite 
                                JOIN item 
                                  ON (
                                         (itemsite.itemsite_item_id = item.item_id)
                                   )
                             )
                            ON (
                                   (coitem.coitem_itemsite_id = itemsite.itemsite_id)
                             )
                       )
                      ON (
                             (cobill.cobill_coitem_id = coitem.coitem_id)
                       )
                 )
                ON (
                       (cobill.cobill_cobmisc_id = cobmisc.cobmisc_id)
                 )
           )
       WHERE (
                 (
                       (cobmisc.cobmisc_cohead_id = cohead.cohead_id)
                     AND (cohead.cohead_cust_id = custinfo.cust_id)
                 )
               AND (NOT cobmisc.cobmisc_posted)
           )
    GROUP BY cohead.cohead_id
           , cobmisc.cobmisc_id
           , custinfo.cust_id
           , custinfo.cust_number
           , cohead.cohead_billtoname
           , cohead.cohead_number
           , cobmisc.cobmisc_freight
           , cobmisc.cobmisc_misc
           , cobmisc.cobmisc_tax
           , cobmisc.cobmisc_curr_id 
       UNIONSELECT cohead.cohead_id AS orderid
           , -1 AS itemid
           ,&#39;&#39; AS documentnumber
           ,&#39;&#39; AS cust_number
           ,&#39;&#39; AS billtoname
           , cohead.cohead_number AS ordernumber
           , -1 AS linenumber
           ,&#39;Freight&#39; AS item
           ,&#39;Freight Charge&#39; AS itemdescrip
           ,&#39;&#39; AS iteminvuom
           , NULL::&quot;unknown&quot; AS qtytobill
           ,&#39;&#39; AS f_qtytobill
           , cobmisc.cobmisc_freight AS price
           , formatmoney
           (cobmisc.cobmisc_freight) AS f_price
           , cobmisc.cobmisc_freight AS extprice
           , formatmoney
           (cobmisc.cobmisc_freight) AS f_extprice
           ,&#39;Credit&#39; AS sence
           , COALESCE
           (
                 (
                  SELECT formatglaccountlong
                       (accnt.accnt_id) AS formatglaccountlong 
                    FROM accnt 
                   WHERE (accnt.accnt_id = findfreightaccount
                             (cohead.cohead_cust_id)
                       )
                 )
                 ,&#39;Not Assigned&#39;::text
           ) AS account
           , cobmisc.cobmisc_curr_id AS curr_id 
        FROM cobmisc
           , cohead 
       WHERE (
                 (
                       (cobmisc.cobmisc_cohead_id = cohead.cohead_id)
                     AND (NOT cobmisc.cobmisc_posted)
                 )
               AND (cobmisc.cobmisc_freight &lt;&gt; 
                       (0)::numeric
                 )
           )
     )
 UNIONSELECT cohead.cohead_id AS orderid
     , -1 AS itemid
     ,&#39;&#39; AS documentnumber
     ,&#39;&#39; AS cust_number
     ,&#39;&#39; AS billtoname
     , cohead.cohead_number AS ordernumber
     , -1 AS linenumber
     ,&#39;Misc. Charge&#39; AS item
     , cohead.cohead_misc_descrip AS itemdescrip
     ,&#39;&#39; AS iteminvuom
     , NULL::&quot;unknown&quot; AS qtytobill
     ,&#39;&#39; AS f_qtytobill
     , cobmisc.cobmisc_misc AS price
     , formatmoney
     (cobmisc.cobmisc_misc) AS f_price
     , cobmisc.cobmisc_misc AS extprice
     , formatmoney
     (cobmisc.cobmisc_misc) AS f_extprice
     ,&#39;Credit&#39; AS sence
     , formatglaccountlong
     (cobmisc.cobmisc_misc_accnt_id) AS account
     , cobmisc.cobmisc_curr_id AS curr_id 
  FROM cobmisc
     , cohead 
 WHERE (
           (
                 (cobmisc.cobmisc_cohead_id = cohead.cohead_id)
               AND (NOT cobmisc.cobmisc_posted)
           )
         AND (cobmisc.cobmisc_misc &lt;&gt; 
                 (0)::numeric
           )
     )
)
UNIONSELECT cohead.cohead_id AS orderid
, coitem.coitem_id AS itemid
,&#39;&#39; AS documentnumber
,&#39;&#39; AS cust_number
,&#39;&#39; AS billtoname
, cohead.cohead_number AS ordernumber
, coitem.coitem_linenumber AS linenumber
, item.item_number AS item
, item.item_descrip1 AS itemdescrip
, uom.uom_name AS iteminvuom
, cobill.cobill_qty AS qtytobill
, formatqty
(cobill.cobill_qty) AS f_qtytobill
, coitem.coitem_price AS price
, formatprice
(coitem.coitem_price) AS f_price
, round
(
     (
           (cobill.cobill_qty * coitem.coitem_qty_invuomratio) * 
           (coitem.coitem_price / coitem.coitem_price_invuomratio)
     )
     , 2
) AS extprice
, formatmoney
(round
     (
           (
                 (cobill.cobill_qty * coitem.coitem_qty_invuomratio) * 
                 (coitem.coitem_price / coitem.coitem_price_invuomratio)
           )
           , 2
     )
) AS f_extprice
,&#39;Credit&#39; AS sence
, COALESCE
(
     (
      SELECT formatglaccountlong
           (accnt.accnt_id) AS formatglaccountlong 
        FROM accnt
           , salesaccnt 
       WHERE (
                 (salesaccnt.salesaccnt_sales_accnt_id = accnt.accnt_id)
               AND (salesaccnt.salesaccnt_id = findsalesaccnt
                       (itemsite.itemsite_id
                             , cohead.cohead_cust_id
                       )
                 )
           )
     )
     ,&#39;Not Assigned&#39;::text
) AS account
, cobmisc.cobmisc_curr_id AS curr_id 
FROM item
, itemsite
, cobmisc
, cohead
, cobill
, coitem
, uom 
WHERE (
     (
           (
                 (
                       (
                             (
                                   (
                                         (coitem.coitem_itemsite_id = itemsite.itemsite_id)
                                       AND (cobill.cobill_coitem_id = coitem.coitem_id)
                                   )
                                 AND (cobill.cobill_cobmisc_id = cobmisc.cobmisc_id)
                             )
                           AND (cobmisc.cobmisc_cohead_id = cohead.cohead_id)
                       )
                     AND (itemsite.itemsite_item_id = item.item_id)
                 )
               AND (item.item_inv_uom_id = uom.uom_id)
           )
         AND (cobill.cobill_cobmisc_id = cobmisc.cobmisc_id)
     )
   AND (NOT cobmisc.cobmisc_posted)
)
ORDER BY 6
, 7;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.bomhead">bomhead</a>
		</h2>
        
         <p>Bill of Materials (BOM) header information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.bomhead Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>bomhead_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;bomhead_bomhead_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.item">public.item.item_id</a>
                  
                
                </td>
            	<td>bomhead_item_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomhead_serial</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bomhead_docnum</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomhead_revision</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bomhead_revisiondate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomhead_batchsize</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bomhead_requiredqtyper</td>
            	<td>numeric(20,8)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomhead_rev_id</td>
            	<td>integer</td>
                <td><i>
				

				
				DEFAULT -1
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.bomitem">bomitem</a>
		</h2>
        
         <p>Bill of Materials (BOM) component Items information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.bomitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>bomitem_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;bomitem_bomitem_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.item">public.item.item_id</a>
                  
                
                </td>
            	<td>bomitem_parent_item_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomitem_seqnumber</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.item">public.item.item_id</a>
                  
                
                </td>
            	<td>bomitem_item_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomitem_qtyper</td>
            	<td>numeric(20,8)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bomitem_scrap</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomitem_status</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bomitem_effective</td>
            	<td>date</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomitem_expires</td>
            	<td>date</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bomitem_createwo</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomitem_issuemethod</td>
            	<td>character(1)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bomitem_schedatwooper</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomitem_ecn</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bomitem_moddate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomitem_subtype</td>
            	<td>character(1)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.uom">public.uom.uom_id</a>
                  
                
                </td>
            	<td>bomitem_uom_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomitem_rev_id</td>
            	<td>integer</td>
                <td><i>
				

				
				DEFAULT -1
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bomitem_booitem_seq_id</td>
            	<td>integer</td>
                <td><i>
				

				
				DEFAULT -1
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.char">public.char.char_id</a>
                  
                
                </td>
            	<td>bomitem_char_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bomitem_value</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomitem_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bomitem_ref</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.bomitem Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>bomitem_bomitem_issuemethod_check</td>
                <td>CHECK ((((bomitem_issuemethod = &#39;M&#39;::bpchar) OR (bomitem_issuemethod = &#39;S&#39;::bpchar)) OR (bomitem_issuemethod = &#39;L&#39;::bpchar)))</td>
            </tr>
			
            <tr class="tr1">
				<td>bomitem_bomitem_subtype_check</td>
                <td>CHECK ((((bomitem_subtype = &#39;N&#39;::bpchar) OR (bomitem_subtype = &#39;I&#39;::bpchar)) OR (bomitem_subtype = &#39;B&#39;::bpchar)))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.bomitemsub">public.bomitemsub</a></li>
			</ul>
		
		

    <!-- Indexes -->
    
       bomitem_bomitem_item_id_idx bomitem_item_id
    
       bomitem_effective_key bomitem_effective
    
       bomitem_expires_key bomitem_expires
    
       bomitem_parent_item_id bomitem_parent_item_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.bomitemsub">bomitemsub</a>
		</h2>
        
         <p>Bill of Materials (BOM) defined Substitutions information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.bomitemsub Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>bomitemsub_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.bomitem">public.bomitem.bomitem_id</a>
                  
                
                </td>
            	<td>bomitemsub_bomitem_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.item">public.item.item_id</a>
                  
                
                </td>
            	<td>bomitemsub_item_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bomitemsub_uomratio</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomitemsub_rank</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.bomwork">bomwork</a>
		</h2>
        
         <p>Temporary table for storing information requested by Bill of Materials (BOM) displays and reports</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.bomwork Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>bomwork_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bomwork_set_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomwork_seqnumber</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bomwork_item_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomwork_item_type</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bomwork_qtyper</td>
            	<td>numeric(20,8)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomwork_scrap</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bomwork_status</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomwork_level</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bomwork_parent_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomwork_effective</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bomwork_expires</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomwork_stdunitcost</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bomwork_actunitcost</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomwork_parent_seqnumber</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bomwork_createwo</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomwork_issuemethod</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.char">public.char.char_id</a>
                  
                
                </td>
            	<td>bomwork_char_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomwork_value</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bomwork_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomwork_ref</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>bomwork_bomitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>bomwork_ecn</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.brddist">brddist</a>
		</h2>
        
         <p>Temporary table for storing Breeder distribution records before Breeder Work Orders are closed </p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.brddist Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>brddist_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>brddist_wo_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>brddist_wo_qty</td>
            	<td>numeric(20,8)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>brddist_itemsite_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>brddist_stdqtyper</td>
            	<td>numeric(20,8)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>brddist_qty</td>
            	<td>numeric(20,8)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>brddist_posted</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.budget">budget</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.budget Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>budget_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>budget_period_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>budget_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>budget_amount</td>
            	<td>numeric(20,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT budgitem.budgitem_id AS budget_id
, budgitem.budgitem_period_id AS budget_period_id
, budgitem.budgitem_accnt_id AS budget_accnt_id
, budgitem.budgitem_amount AS budget_amount 
FROM budgitem;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.budghead">budghead</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.budghead Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>budghead_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>budghead_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>budghead_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.budgitem">public.budgitem</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.budgitem">budgitem</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.budgitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>budgitem_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.budghead">public.budghead.budghead_id</a>
                  
                
                </td>
            	<td>budgitem_budghead_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.period">public.period.period_id</a>
                  
                
                </td>
            	<td>budgitem_period_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.accnt">public.accnt.accnt_id</a>
                  
                
                </td>
            	<td>budgitem_accnt_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>budgitem_amount</td>
            	<td>numeric(20,4)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.calhead">calhead</a>
		</h2>
        
         <p>Calendar header information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.calhead Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>calhead_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;calhead_calhead_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>calhead_type</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>calhead_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>calhead_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>calhead_origin</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.carrier">carrier</a>
		</h2>
        
         <p>Carrier information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.carrier Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>carrier_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;carrier_carrier_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>carrier_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>carrier_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.cashrcpt">cashrcpt</a>
		</h2>
        
         <p>Temporary table for storing Cash Receipt information before Cash Receipts are posted</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.cashrcpt Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>cashrcpt_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.custinfo">public.custinfo.cust_id</a>
                  
                
                </td>
            	<td>cashrcpt_cust_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cashrcpt_amount</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cashrcpt_fundstype</td>
            	<td>character(1)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cashrcpt_docnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.bankaccnt">public.bankaccnt.bankaccnt_id</a>
                  
                
                </td>
            	<td>cashrcpt_bankaccnt_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cashrcpt_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cashrcpt_distdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cashrcpt_salescat_id</td>
            	<td>integer</td>
                <td><i>
				

				
				DEFAULT -1
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>cashrcpt_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cashrcpt_usecustdeposit</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.cashrcptitem">public.cashrcptitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.cashrcptmisc">public.cashrcptmisc</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.cashrcptitem">cashrcptitem</a>
		</h2>
        
         <p>Temporary table for storing information about applications of Cash Receipts before Cash Receipts are posted</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.cashrcptitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>cashrcptitem_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.cashrcpt">public.cashrcpt.cashrcpt_id</a>
                  
                
                </td>
            	<td>cashrcptitem_cashrcpt_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.aropen">public.aropen.aropen_id</a>
                  
                
                </td>
            	<td>cashrcptitem_aropen_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cashrcptitem_amount</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.cashrcptmisc">cashrcptmisc</a>
		</h2>
        
         <p>Cash Receipt Miscellaneous Application information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.cashrcptmisc Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>cashrcptmisc_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.cashrcpt">public.cashrcpt.cashrcpt_id</a>
                  
                
                </td>
            	<td>cashrcptmisc_cashrcpt_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.accnt">public.accnt.accnt_id</a>
                  
                
                </td>
            	<td>cashrcptmisc_accnt_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cashrcptmisc_amount</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cashrcptmisc_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.ccard">ccard</a>
		</h2>
        
         <p>Credit Card Information - all bytea data is encrypted</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.ccard Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>ccard_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccard_seq</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				DEFAULT 10
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccard_cust_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccard_active</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccard_name</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccard_address1</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccard_address2</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccard_city</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccard_state</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccard_zip</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccard_country</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccard_number</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccard_debit</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccard_month_expired</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccard_year_expired</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccard_type</td>
            	<td>character(1)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccard_date_added</td>
            	<td>timestamp without time zone</td>
                <td><i>
				

				NOT NULL
				DEFAULT (&#39;now&#39;::text)::timestamp(6) with time zone
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccard_lastupdated</td>
            	<td>timestamp without time zone</td>
                <td><i>
				

				NOT NULL
				DEFAULT (&#39;now&#39;::text)::timestamp(6) with time zone
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccard_added_by_username</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				DEFAULT &quot;current_user&quot;()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccard_last_updated_by_username</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				DEFAULT &quot;current_user&quot;()
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       ccard_cust_id_idx ccard_cust_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.ccardaud">ccardaud</a>
		</h2>
        
         <p>Credit Card Information tracking data</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.ccardaud Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>ccardaud_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccardaud_ccard_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccardaud_ccard_seq_old</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccardaud_ccard_seq_new</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccardaud_ccard_cust_id_old</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccardaud_ccard_cust_id_new</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccardaud_ccard_active_old</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccardaud_ccard_active_new</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccardaud_ccard_name_old</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccardaud_ccard_name_new</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccardaud_ccard_address1_old</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccardaud_ccard_address1_new</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccardaud_ccard_address2_old</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccardaud_ccard_address2_new</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccardaud_ccard_city_old</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccardaud_ccard_city_new</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccardaud_ccard_state_old</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccardaud_ccard_state_new</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccardaud_ccard_zip_old</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccardaud_ccard_zip_new</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccardaud_ccard_country_old</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccardaud_ccard_country_new</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccardaud_ccard_number_old</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccardaud_ccard_number_new</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccardaud_ccard_debit_old</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccardaud_ccard_debit_new</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccardaud_ccard_month_expired_old</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccardaud_ccard_month_expired_new</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccardaud_ccard_year_expired_old</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccardaud_ccard_year_expired_new</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccardaud_ccard_type_old</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccardaud_ccard_type_new</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccardaud_ccard_last_updated</td>
            	<td>timestamp without time zone</td>
                <td><i>
				

				NOT NULL
				DEFAULT (&#39;now&#39;::text)::timestamp(6) with time zone
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccardaud_ccard_last_updated_by_username</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				DEFAULT &quot;current_user&quot;()
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       ccardaud_ccard_cust_id_idx ccardaud_ccard_cust_id_new
    
       ccardaud_ccard_id_idx ccardaud_ccard_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.ccpay">ccpay</a>
		</h2>
        
         <p>Credit Card Transaction data - all bytea data is encrypted</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.ccpay Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>ccpay_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_ccard_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_cust_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_amount</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				NOT NULL
				DEFAULT 0.00
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_auth</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_status</td>
            	<td>character(1)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_type</td>
            	<td>character(1)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_auth_charge</td>
            	<td>character(1)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_order_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_order_number_seq</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_r_avs</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_r_ordernum</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_r_error</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_r_approved</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_r_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_r_message</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_yp_r_time</td>
            	<td>timestamp without time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_r_ref</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_yp_r_tdate</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_r_tax</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_r_shipping</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_yp_r_score</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_transaction_datetime</td>
            	<td>timestamp without time zone</td>
                <td><i>
				

				NOT NULL
				DEFAULT (&#39;now&#39;::text)::timestamp(6) with time zone
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ccpay_by_username</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				DEFAULT &quot;current_user&quot;()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ccpay_curr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.payco">public.payco</a></li>
			</ul>
		
		

    <!-- Indexes -->
    
       ccpay_ccard_id_idx ccpay_ccard_id
    
       ccpay_cust_id_idx ccpay_cust_id
    
       ccpay_order_number_idx ccpay_order_number
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.char">char</a>
		</h2>
        
         <p>Characteristic information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.char Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>char_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>char_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>char_items</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>char_options</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>char_attributes</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>char_lotserial</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>char_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>char_customers</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>char_crmaccounts</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>char_addresses</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>char_contacts</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>char_opportunity</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>char_employees</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.bomitem">public.bomitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.bomwork">public.bomwork</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.ipsitemchar">public.ipsitemchar</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.charass">charass</a>
		</h2>
        
         <p>Characteristic assignment information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.charass Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>charass_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>charass_target_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>charass_target_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>charass_char_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>charass_value</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>charass_default</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>charass_price</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       charass_target_idx charass_target_type, charass_target_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.checkhead">checkhead</a>
		</h2>
        
         <p>Accounts Payable Check Information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.checkhead Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>checkhead_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>checkhead_recip_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>checkhead_recip_type</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.bankaccnt">public.bankaccnt.bankaccnt_id</a>
                  
                
                </td>
            	<td>checkhead_bankaccnt_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>checkhead_printed</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>checkhead_checkdate</td>
            	<td>date</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>checkhead_number</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>checkhead_amount</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>checkhead_void</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>checkhead_replaced</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>checkhead_posted</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>checkhead_rec</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>checkhead_misc</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.expcat">public.expcat.expcat_id</a>
                  
                
                </td>
            	<td>checkhead_expcat_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>checkhead_for</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>checkhead_notes</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>checkhead_journalnumber</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>checkhead_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>checkhead_deleted</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>checkhead_ach_batch</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>checkhead_curr_rate</td>
            	<td>numeric(11,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.checkhead Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>checkhead_checkhead_amount_check</td>
                <td>CHECK ((checkhead_amount &gt; (0)::numeric))</td>
            </tr>
			
            <tr class="tr1">
				<td>checkhead_checkhead_recip_type_check</td>
                <td>CHECK ((((checkhead_recip_type = &#39;C&#39;::text) OR (checkhead_recip_type = &#39;V&#39;::text)) OR (checkhead_recip_type = &#39;T&#39;::text)))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.checkitem">public.checkitem</a></li>
			</ul>
		
		

    <!-- Indexes -->
    
       checkhead_posted_idx checkhead_posted
    
       checkhead_replaced_idx checkhead_replaced
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.checkitem">checkitem</a>
		</h2>
        
         <p>Accounts Payable Check Line Item Information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.checkitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>checkitem_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.checkhead">public.checkhead.checkhead_id</a>
                  
                
                </td>
            	<td>checkitem_checkhead_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>checkitem_amount</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				NOT NULL
				DEFAULT 0.0
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>checkitem_discount</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				NOT NULL
				DEFAULT 0.0
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>checkitem_ponumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>checkitem_vouchernumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>checkitem_invcnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.apopen">public.apopen.apopen_id</a>
                  
                
                </td>
            	<td>checkitem_apopen_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.aropen">public.aropen.aropen_id</a>
                  
                
                </td>
            	<td>checkitem_aropen_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>checkitem_docdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>checkitem_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>checkitem_cmnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>checkitem_ranumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>checkitem_curr_rate</td>
            	<td>numeric(11,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.checkitem Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>checkitem_check</td>
                <td>CHECK ((NOT ((checkitem_apopen_id IS NOT NULL) AND (checkitem_aropen_id IS NOT NULL))))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.checkrecip">checkrecip</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.checkrecip Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>checkrecip_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>checkrecip_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>checkrecip_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>checkrecip_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>checkrecip_gltrans_source</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>checkrecip_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>checkrecip_addr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
(
SELECT custinfo.cust_id AS checkrecip_id
     ,&#39;C&#39; AS checkrecip_type
     , custinfo.cust_number AS checkrecip_number
     , custinfo.cust_name AS checkrecip_name
     ,&#39;A/R&#39; AS checkrecip_gltrans_source
     , findaraccount
     (custinfo.cust_id) AS checkrecip_accnt_id
     , cntct.cntct_addr_id AS checkrecip_addr_id 
  FROM (custinfo 
   LEFT JOIN cntct 
          ON (
                 (custinfo.cust_cntct_id = cntct.cntct_id)
           )
     )
 UNIONSELECT taxauth.taxauth_id AS checkrecip_id
     ,&#39;T&#39; AS checkrecip_type
     , taxauth.taxauth_code AS checkrecip_number
     , taxauth.taxauth_name AS checkrecip_name
     ,&#39;G/L&#39; AS checkrecip_gltrans_source
     , taxauth.taxauth_accnt_id AS checkrecip_accnt_id
     , taxauth.taxauth_addr_id AS checkrecip_addr_id 
  FROM taxauth
)
UNIONSELECT vendinfo.vend_id AS checkrecip_id
,&#39;V&#39; AS checkrecip_type
, vendinfo.vend_number AS checkrecip_number
, vendinfo.vend_name AS checkrecip_name
,&#39;A/P&#39; AS checkrecip_gltrans_source
, findapaccount
(vendinfo.vend_id) AS checkrecip_accnt_id
, vendaddrinfo.vendaddr_addr_id AS checkrecip_addr_id 
FROM (vendinfo 
LEFT JOIN vendaddrinfo 
    ON (
           (
                 (vendinfo.vend_id = vendaddrinfo.vendaddr_vend_id)
               AND (upper
                       (vendaddrinfo.vendaddr_code) = &#39;REMIT&#39;::text
                 )
           )
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.classcode">classcode</a>
		</h2>
        
         <p>Class Code information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.classcode Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>classcode_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;classcode_classcode_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>classcode_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>classcode_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>classcode_mfg</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.item">public.item</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.cmd">cmd</a>
		</h2>
        
         <p>Custom menu command table.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.cmd Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>cmd_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmd_module</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmd_title</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmd_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmd_privname</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmd_executable</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmd_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.cmdarg">public.cmdarg</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.cmdarg">cmdarg</a>
		</h2>
        
         <p>Command argument for custom menu command table.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.cmdarg Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>cmdarg_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.cmd">public.cmd.cmd_id</a>
                  
                
                </td>
            	<td>cmdarg_cmd_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmdarg_order</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmdarg_arg</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.cmhead">cmhead</a>
		</h2>
        
         <p>S/O Credit Memo header information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.cmhead Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>cmhead_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;cmhead_cmhead_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_posted</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_invcnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_custponumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_cust_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_docdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_shipto_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_shipto_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_shipto_address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_shipto_address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_shipto_address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_shipto_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_shipto_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_shipto_zipcode</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_salesrep_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_tax_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				<br><br>Deprecated in 2.1 and replaced with cmhead_taxauth_id.
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_freight</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_misc</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_printed</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_billtoname</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_billtoaddress1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_billtoaddress2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_billtoaddress3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_billtocity</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_billtostate</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_billtozip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_hold</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_commission</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_misc_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_misc_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_tax</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_tax_ratea</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				DEFAULT 0.0
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_tax_rateb</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				DEFAULT 0.0
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_tax_ratec</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				DEFAULT 0.0
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_rsncode_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>cmhead_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.taxauth">public.taxauth.taxauth_id</a>
                  
                
                </td>
            	<td>cmhead_taxauth_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>cmhead_tax_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.tax">public.tax.tax_id</a>
                  
                
                </td>
            	<td>cmhead_adjtax_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.taxtype">public.taxtype.taxtype_id</a>
                  
                
                </td>
            	<td>cmhead_adjtaxtype_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_adjtax_pcta</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_adjtax_pctb</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_adjtax_pctc</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_adjtax_ratea</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_adjtax_rateb</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_adjtax_ratec</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.tax">public.tax.tax_id</a>
                  
                
                </td>
            	<td>cmhead_freighttax_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.taxtype">public.taxtype.taxtype_id</a>
                  
                
                </td>
            	<td>cmhead_freighttaxtype_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_freighttax_pcta</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_freighttax_pctb</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_freighttax_pctc</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_freighttax_ratea</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_freighttax_rateb</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_freighttax_ratec</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_gldistdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_billtocountry</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmhead_shipto_country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmhead_rahead_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.cmitem">public.cmitem</a></li>
			</ul>
		
		

    <!-- Indexes -->
    
       cmhead_invcnumber_idx cmhead_invcnumber
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.cmitem">cmitem</a>
		</h2>
        
         <p>S/O Credit Memo Line Item information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.cmitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>cmitem_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;cmitem_cmitem_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.cmhead">public.cmhead.cmhead_id</a>
                  
                
                  
                
                </td>
            	<td>cmitem_cmhead_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				
					

					
                       UNIQUE#1
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>cmitem_linenumber</td>
            	<td>integer</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmitem_itemsite_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmitem_qtycredit</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmitem_qtyreturned</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmitem_unitprice</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmitem_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmitem_rsncode_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmitem_tax_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.taxtype">public.taxtype.taxtype_id</a>
                  
                
                </td>
            	<td>cmitem_taxtype_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmitem_tax_pcta</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmitem_tax_pctb</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmitem_tax_pctc</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmitem_tax_ratea</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmitem_tax_rateb</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmitem_tax_ratec</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.uom">public.uom.uom_id</a>
                  
                
                </td>
            	<td>cmitem_qty_uom_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmitem_qty_invuomratio</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.uom">public.uom.uom_id</a>
                  
                
                </td>
            	<td>cmitem_price_uom_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmitem_price_invuomratio</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmitem_raitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.cmnttype">cmnttype</a>
		</h2>
        
         <p>Comment Type information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.cmnttype Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>cmnttype_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>cmnttype_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmnttype_descrip</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cmnttype_usedin</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cmnttype_sys</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.comment">public.comment</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.cntct">cntct</a>
		</h2>
        
         <p>Contact - information on how to reach a living person</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.cntct Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>cntct_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.crmacct">public.crmacct.crmacct_id</a>
                  
                
                </td>
            	<td>cntct_crmacct_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.addr">public.addr.addr_id</a>
                  
                
                </td>
            	<td>cntct_addr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cntct_first_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cntct_last_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cntct_honorific</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cntct_initials</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cntct_active</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cntct_phone</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cntct_phone2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cntct_fax</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cntct_email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cntct_webaddr</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cntct_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cntct_title</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>cntct_number</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cntct_middle</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cntct_suffix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cntct_owner_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.crmacct">public.crmacct</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.custinfo">public.custinfo</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.emp">public.emp</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.incdt">public.incdt</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.prospect">public.prospect</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.whsinfo">public.whsinfo</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.cntslip">cntslip</a>
		</h2>
        
         <p>Count Slip information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.cntslip Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>cntslip_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;cntslip_cntslip_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cntslip_cnttag_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cntslip_user_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cntslip_entered</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cntslip_posted</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cntslip_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cntslip_qty</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cntslip_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cntslip_location_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cntslip_lotserial</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cntslip_lotserial_expiration</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cntslip_lotserial_warrpurc</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.cobill">cobill</a>
		</h2>
        
         <p>Billing Selection Line Item information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.cobill Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>cobill_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;cobill_cobill_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cobill_coitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cobill_selectdate</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cobill_qty</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cobill_invcnum</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cobill_toclose</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cobill_cobmisc_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cobill_select_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.invcitem">public.invcitem.invcitem_id</a>
                  
                
                </td>
            	<td>cobill_invcitem_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cobill_tax_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.taxtype">public.taxtype.taxtype_id</a>
                  
                
                </td>
            	<td>cobill_taxtype_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cobill_tax_pcta</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cobill_tax_pctb</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cobill_tax_pctc</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cobill_tax_ratea</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cobill_tax_rateb</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cobill_tax_ratec</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       cobill_cobmisc_id cobill_cobmisc_id
    
       cobill_coitem_id cobill_coitem_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.cobmisc">cobmisc</a>
		</h2>
        
         <p>General information about Billing Selections</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.cobmisc Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>cobmisc_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;cobmisc_cobmisc_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cobmisc_cohead_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cobmisc_shipvia</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cobmisc_freight</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cobmisc_misc</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cobmisc_payment</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cobmisc_paymentref</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cobmisc_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cobmisc_shipdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cobmisc_invcnumber</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cobmisc_invcdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cobmisc_posted</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cobmisc_tax</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cobmisc_misc_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cobmisc_misc_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cobmisc_closeorder</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cobmisc_tax_ratea</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				DEFAULT 0.0
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cobmisc_tax_rateb</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				DEFAULT 0.0
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cobmisc_tax_ratec</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				DEFAULT 0.0
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>cobmisc_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.invchead">public.invchead.invchead_id</a>
                  
                
                </td>
            	<td>cobmisc_invchead_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.taxauth">public.taxauth.taxauth_id</a>
                  
                
                </td>
            	<td>cobmisc_taxauth_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>cobmisc_tax_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.tax">public.tax.tax_id</a>
                  
                
                </td>
            	<td>cobmisc_adjtax_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.taxtype">public.taxtype.taxtype_id</a>
                  
                
                </td>
            	<td>cobmisc_adjtaxtype_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cobmisc_adjtax_pcta</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cobmisc_adjtax_pctb</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cobmisc_adjtax_pctc</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cobmisc_adjtax_ratea</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cobmisc_adjtax_rateb</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cobmisc_adjtax_ratec</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.tax">public.tax.tax_id</a>
                  
                
                </td>
            	<td>cobmisc_freighttax_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.taxtype">public.taxtype.taxtype_id</a>
                  
                
                </td>
            	<td>cobmisc_freighttaxtype_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cobmisc_freighttax_pcta</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cobmisc_freighttax_pctb</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cobmisc_freighttax_pctc</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cobmisc_freighttax_ratea</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cobmisc_freighttax_rateb</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cobmisc_freighttax_ratec</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       cobmisc_cohead_id cobmisc_cohead_id
    
       cobmisc_posted cobmisc_posted
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.cohead">cohead</a>
		</h2>
        
         <p>Sales Order header information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.cohead Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>cohead_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;cohead_cohead_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>cohead_number</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.custinfo">public.custinfo.cust_id</a>
                  
                
                </td>
            	<td>cohead_cust_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_custponumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_type</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_orderdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.whsinfo">public.whsinfo.warehous_id</a>
                  
                
                </td>
            	<td>cohead_warehous_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.shiptoinfo">public.shiptoinfo.shipto_id</a>
                  
                
                </td>
            	<td>cohead_shipto_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_shiptoname</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_shiptoaddress1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_shiptoaddress2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_shiptoaddress3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_shiptoaddress4</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_shiptoaddress5</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.salesrep">public.salesrep.salesrep_id</a>
                  
                
                </td>
            	<td>cohead_salesrep_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.terms">public.terms.terms_id</a>
                  
                
                </td>
            	<td>cohead_terms_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_origin</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_fob</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_shipvia</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_shiptocity</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_shiptostate</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_shiptozipcode</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_freight</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_misc</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_imported</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_ordercomments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_shipcomments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_shiptophone</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_shipchrg_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.shipform">public.shipform.shipform_id</a>
                  
                
                </td>
            	<td>cohead_shipform_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_billtoname</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_billtoaddress1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_billtoaddress2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_billtoaddress3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_billtocity</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_billtostate</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_billtozipcode</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.accnt">public.accnt.accnt_id</a>
                  
                
                </td>
            	<td>cohead_misc_accnt_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_misc_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_commission</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_miscdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_holdtype</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_packdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.prj">public.prj.prj_id</a>
                  
                
                </td>
            	<td>cohead_prj_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_wasquote</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_lastupdated</td>
            	<td>timestamp without time zone</td>
                <td><i>
				

				NOT NULL
				DEFAULT (&#39;now&#39;::text)::timestamp(6) with time zone
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_shipcomplete</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_created</td>
            	<td>timestamp without time zone</td>
                <td><i>
				

				
				DEFAULT (&#39;now&#39;::text)::timestamp(6) with time zone
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_creator</td>
            	<td>text</td>
                <td><i>
				

				
				DEFAULT &quot;current_user&quot;()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_quote_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_billtocountry</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_shiptocountry</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>cohead_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.taxauth">public.taxauth.taxauth_id</a>
                  
                
                </td>
            	<td>cohead_taxauth_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_calcfreight</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_shipto_cntct_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_shipto_cntct_honorific</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_shipto_cntct_first_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_shipto_cntct_middle</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_shipto_cntct_last_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_shipto_cntct_suffix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_shipto_cntct_phone</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_shipto_cntct_title</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_shipto_cntct_fax</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_shipto_cntct_email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_billto_cntct_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_billto_cntct_honorific</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_billto_cntct_first_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_billto_cntct_middle</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_billto_cntct_last_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_billto_cntct_suffix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_billto_cntct_phone</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_billto_cntct_title</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohead_billto_cntct_fax</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohead_billto_cntct_email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.cohead Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>cohead_check</td>
                <td>CHECK (((cohead_misc = (0)::numeric) OR ((cohead_misc &lt;&gt; (0)::numeric) AND (cohead_misc_accnt_id IS NOT NULL))))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.coitem">public.coitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.payco">public.payco</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.soheadlock">public.soheadlock</a></li>
			</ul>
		
		

    <!-- Indexes -->
    
       cohead_cust_id_key cohead_cust_id
    
       cohead_custponumber_idx cohead_custponumber
    
       cohead_shipto_id cohead_shipto_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.cohist">cohist</a>
		</h2>
        
         <p>Sales Order history</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.cohist Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>cohist_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;cohist_cohist_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_cust_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_itemsite_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_shipdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_shipvia</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_ordernumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_orderdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_invcnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_invcdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_qtyshipped</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_unitprice</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_shipto_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_salesrep_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_duedate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_imported</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_billtoname</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_billtoaddress1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_billtoaddress2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_billtoaddress3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_billtocity</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_billtostate</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_billtozip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_shiptoname</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_shiptoaddress1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_shiptoaddress2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_shiptoaddress3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_shiptocity</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_shiptostate</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_shiptozip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_commission</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_commissionpaid</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_unitcost</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_misc_type</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_misc_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_misc_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_tax_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_doctype</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_promisedate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_ponumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>cohist_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_sequence</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.taxtype">public.taxtype.taxtype_id</a>
                  
                
                </td>
            	<td>cohist_taxtype_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_tax_pcta</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_tax_pctb</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_tax_pctc</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_tax_ratea</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_tax_rateb</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_tax_ratec</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       cohist_cust_id cohist_cust_id
    
       cohist_invcnumber cohist_invcnumber
    
       cohist_itemsite_id cohist_itemsite_id
    
       cohist_shipdate cohist_shipdate
    
       cohist_shipto_id cohist_shipto_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.coitem">coitem</a>
		</h2>
        
         <p>Sales Order Line Item information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.coitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>coitem_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;coitem_coitem_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.cohead">public.cohead.cohead_id</a>
                  
                
                </td>
            	<td>coitem_cohead_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>coitem_linenumber</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.itemsite">public.itemsite.itemsite_id</a>
                  
                
                </td>
            	<td>coitem_itemsite_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>coitem_status</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>coitem_scheddate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>coitem_promdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>coitem_qtyord</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>coitem_unitcost</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>coitem_price</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>coitem_custprice</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>coitem_qtyshipped</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>coitem_order_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>coitem_memo</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>coitem_imported</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>coitem_qtyreturned</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>coitem_closedate</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>coitem_custpn</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>coitem_order_type</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>coitem_close_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>coitem_lastupdated</td>
            	<td>timestamp without time zone</td>
                <td><i>
				

				NOT NULL
				DEFAULT (&#39;now&#39;::text)::timestamp(6) with time zone
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.itemsite">public.itemsite.itemsite_id</a>
                  
                
                </td>
            	<td>coitem_substitute_item_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>coitem_created</td>
            	<td>timestamp without time zone</td>
                <td><i>
				

				
				DEFAULT (&#39;now&#39;::text)::timestamp(6) with time zone
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>coitem_creator</td>
            	<td>text</td>
                <td><i>
				

				
				DEFAULT &quot;current_user&quot;()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>coitem_prcost</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.tax">public.tax.tax_id</a>
                  
                
                </td>
            	<td>coitem_tax_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.uom">public.uom.uom_id</a>
                  
                
                </td>
            	<td>coitem_qty_uom_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>coitem_qty_invuomratio</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.uom">public.uom.uom_id</a>
                  
                
                </td>
            	<td>coitem_price_uom_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>coitem_price_invuomratio</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>coitem_warranty</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.accnt">public.accnt.accnt_id</a>
                  
                
                </td>
            	<td>coitem_cos_accnt_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>coitem_qtyreserved</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				DEFAULT 0.0
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>coitem_subnumber</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>coitem_firm</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.coitem Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>coitem_coitem_status_check</td>
                <td>CHECK ((((coitem_status = &#39;O&#39;::bpchar) OR (coitem_status = &#39;C&#39;::bpchar)) OR (coitem_status = &#39;X&#39;::bpchar)))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       coitem_cohead_id_key coitem_cohead_id
    
       coitem_itemsite_id coitem_itemsite_id
    
       coitem_linenumber_key coitem_linenumber
    
       coitem_status_key coitem_status
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.comment">comment</a>
		</h2>
        
         <p>Comment information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.comment Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>comment_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;comment_comment_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>comment_source_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>comment_date</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>comment_user</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>comment_text</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.cmnttype">public.cmnttype.cmnttype_id</a>
                  
                
                </td>
            	<td>comment_cmnttype_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>comment_source</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       comment_comment_source_idx comment_source, comment_source_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.company">company</a>
		</h2>
        
         <p>Company information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.company Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>company_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>company_number</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>company_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>company_currency_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>company_external</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>company_server</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>company_port</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>company_database</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.accnt">public.accnt</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.coship">coship</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.coship Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>coship_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>coship_coitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>coship_shipdate</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>coship_qty</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>coship_transdate</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>coship_shipped</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>coship_invoiced</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>coship_cosmisc_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>coship_trans_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>coship_invcitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT shipitem.shipitem_id AS coship_id
, shipitem.shipitem_orderitem_id AS coship_coitem_id
, shipitem.shipitem_shipdate AS coship_shipdate
, shipitem.shipitem_qty AS coship_qty
, shipitem.shipitem_transdate AS coship_transdate
, shipitem.shipitem_shipped AS coship_shipped
, shipitem.shipitem_invoiced AS coship_invoiced
, shipitem.shipitem_shiphead_id AS coship_cosmisc_id
, shipitem.shipitem_trans_username AS coship_trans_username
, shipitem.shipitem_invcitem_id AS coship_invcitem_id 
FROM shipitem
, shiphead 
WHERE (
     (shipitem.shipitem_shiphead_id = shiphead.shiphead_id)
   AND (shiphead.shiphead_order_type = &#39;SO&#39;::text)
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.cosmisc">cosmisc</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.cosmisc Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cosmisc_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cosmisc_cohead_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cosmisc_shipvia</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cosmisc_freight</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cosmisc_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cosmisc_shipdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cosmisc_shipchrg_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cosmisc_shipform_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cosmisc_shipped</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cosmisc_sfstatus</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cosmisc_tracknum</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cosmisc_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT shiphead.shiphead_id AS cosmisc_id
, shiphead.shiphead_order_id AS cosmisc_cohead_id
, shiphead.shiphead_shipvia AS cosmisc_shipvia
, shiphead.shiphead_freight AS cosmisc_freight
, shiphead.shiphead_notes AS cosmisc_notes
, shiphead.shiphead_shipdate AS cosmisc_shipdate
, shiphead.shiphead_shipchrg_id AS cosmisc_shipchrg_id
, shiphead.shiphead_shipform_id AS cosmisc_shipform_id
, shiphead.shiphead_shipped AS cosmisc_shipped
, shiphead.shiphead_sfstatus AS cosmisc_sfstatus
, shiphead.shiphead_tracknum AS cosmisc_tracknum
, shiphead.shiphead_number AS cosmisc_number 
FROM shiphead 
WHERE (shiphead.shiphead_order_type = &#39;SO&#39;::text);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.costcat">costcat</a>
		</h2>
        
         <p>Cost Category information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.costcat Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>costcat_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;costcat_costcat_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>costcat_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>costcat_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>costcat_asset_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>costcat_liability_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>costcat_adjustment_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>costcat_matusage_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>costcat_purchprice_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>costcat_laboroverhead_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>costcat_scrap_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>costcat_invcost_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>costcat_wip_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>costcat_shipasset_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>costcat_mfgscrap_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>costcat_transform_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>costcat_freight_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.accnt">public.accnt.accnt_id</a>
                  
                
                </td>
            	<td>costcat_toliability_accnt_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.itemsite">public.itemsite</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.whsinfo">public.whsinfo</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.costelem">costelem</a>
		</h2>
        
         <p>Costing Element information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.costelem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>costelem_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;costelem_costelem_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>costelem_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>costelem_sys</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>costelem_po</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>costelem_active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>costelem_exp_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>costelem_cost_item_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.itemcost">public.itemcost</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.costhist">costhist</a>
		</h2>
        
         <p>Item Cost history</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.costhist Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>costhist_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;costhist_costhist_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>costhist_item_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>costhist_costelem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>costhist_type</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>costhist_user_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>costhist_date</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>costhist_oldcost</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>costhist_newcost</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>costhist_lowlevel</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>costhist_oldcurr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>costhist_newcurr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.costupdate">costupdate</a>
		</h2>
        
         <p>Scratch area for sequencing the updating of item costs</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.costupdate Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>costupdate_item_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>costupdate_lowlevel_code</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				DEFAULT 1
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>costupdate_item_type</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.country">country</a>
		</h2>
        
         <p>Basic information and properties about countries.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.country Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>country_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>country_abbr</td>
            	<td>character(2)</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>country_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>country_curr_abbr</td>
            	<td>character(3)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>country_curr_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>country_curr_number</td>
            	<td>character(3)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>country_curr_symbol</td>
            	<td>character varying(9)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>country_qt_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.creditmemoeditlist">creditmemoeditlist</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.creditmemoeditlist Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderid</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemid</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>documentnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>billtoname</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ordernumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>linenumber</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>item</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemdescrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>iteminvuom</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>qtytobill</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>price</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>extprice</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>sence</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>account</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
(
     (
           (
            SELECT cmhead.cmhead_id AS orderid
                 , -2 AS itemid
                 , (&#39;C/M-&#39;::text || formatcreditmemonumber
                       (cmhead.cmhead_id)
                 ) AS documentnumber
                 , custinfo.cust_number
                 , cmhead.cmhead_billtoname AS billtoname
                 , cmhead.cmhead_number AS ordernumber
                 , -1 AS linenumber
                 ,&#39;&#39; AS item
                 ,&#39;&#39; AS itemdescrip
                 ,&#39;&#39; AS iteminvuom
                 ,&#39;&#39; AS qtytobill
                 ,&#39;&#39; AS price
                 , formatmoney
                 (
                       (
                             (
                                   (sum
                                         (round
                                               (
                                                     (
                                                           (cmitem.cmitem_qtycredit * cmitem.cmitem_qty_invuomratio) * 
                                                           (cmitem.cmitem_unitprice / cmitem.cmitem_price_invuomratio)
                                                     )
                                                     , 2
                                               )
                                         ) + cmhead.cmhead_freight
                                   ) + cmhead.cmhead_misc
                             ) + cmhead.cmhead_tax
                       )
                 ) AS extprice
                 ,&#39;Credit&#39; AS sence
                 , COALESCE
                 (
                       (
                        SELECT formatglaccountlong
                             (accnt.accnt_id) AS formatglaccountlong 
                          FROM accnt 
                         WHERE (accnt.accnt_id = findaraccount
                                   (custinfo.cust_id)
                             )
                       )
                       ,&#39;Not Assigned&#39;::text
                 ) AS account 
              FROM custinfo
                 , (cmhead 
               LEFT JOIN (cmitem 
                          JOIN (itemsite 
                                JOIN item 
                                  ON (
                                         (itemsite.itemsite_item_id = item.item_id)
                                   )
                             )
                            ON (
                                   (cmitem.cmitem_itemsite_id = itemsite.itemsite_id)
                             )
                       )
                      ON (
                             (cmitem.cmitem_cmhead_id = cmhead.cmhead_id)
                       )
                 )
             WHERE (
                       (
                             (
                                   (cmhead.cmhead_cust_id = custinfo.cust_id)
                                 AND (cmhead.cmhead_cust_id = custinfo.cust_id)
                             )
                           AND (NOT cmhead.cmhead_posted)
                       )
                     AND (NOT cmhead.cmhead_hold)
                 )
          GROUP BY cmhead.cmhead_id
                 , custinfo.cust_id
                 , custinfo.cust_number
                 , cmhead.cmhead_billtoname
                 , cmhead.cmhead_number
                 , cmhead.cmhead_freight
                 , cmhead.cmhead_misc
                 , cmhead.cmhead_tax 
             UNIONSELECT cmhead.cmhead_id AS orderid
                 , -1 AS itemid
                 ,&#39;&#39; AS documentnumber
                 ,&#39;&#39; AS cust_number
                 ,&#39;&#39; AS billtoname
                 , cmhead.cmhead_number AS ordernumber
                 , -1 AS linenumber
                 ,&#39;Freight&#39; AS item
                 ,&#39;Freight Charge&#39; AS itemdescrip
                 ,&#39;&#39; AS iteminvuom
                 ,&#39;&#39; AS qtytobill
                 , formatmoney
                 (cmhead.cmhead_freight) AS price
                 , formatmoney
                 (cmhead.cmhead_freight) AS extprice
                 ,&#39;Debit&#39; AS sence
                 , CASE WHEN 
                 (accnt.accnt_id IS NULL) THEN &#39;Not Assigned&#39;::text ELSE formatglaccountlong
                 (accnt.accnt_id) END AS account 
              FROM (cmhead 
               LEFT JOIN accnt 
                      ON (
                             (accnt.accnt_id = findfreightaccount
                                   (cmhead.cmhead_cust_id)
                             )
                       )
                 )
             WHERE (
                       (
                             (NOT cmhead.cmhead_posted)
                           AND (NOT cmhead.cmhead_hold)
                       )
                     AND (cmhead.cmhead_freight &lt;&gt; 
                             (0)::numeric
                       )
                 )
           )
       UNIONSELECT cmhead.cmhead_id AS orderid
           , -1 AS itemid
           ,&#39;&#39; AS documentnumber
           ,&#39;&#39; AS cust_number
           ,&#39;&#39; AS billtoname
           , cmhead.cmhead_number AS ordernumber
           , -1 AS linenumber
           ,&#39;Misc. Charge&#39; AS item
           , cmhead.cmhead_misc_descrip AS itemdescrip
           ,&#39;&#39; AS iteminvuom
           ,&#39;&#39; AS qtytobill
           , formatmoney
           (cmhead.cmhead_misc) AS price
           , formatmoney
           (cmhead.cmhead_misc) AS extprice
           ,&#39;Debit&#39; AS sence
           , formatglaccountlong
           (cmhead.cmhead_misc_accnt_id) AS account 
        FROM cmhead 
       WHERE (
                 (
                       (NOT cmhead.cmhead_posted)
                     AND (NOT cmhead.cmhead_hold)
                 )
               AND (cmhead.cmhead_misc &lt;&gt; 
                       (0)::numeric
                 )
           )
     )
 UNIONSELECT cmhead.cmhead_id AS orderid
     , -1 AS itemid
     ,&#39;&#39; AS documentnumber
     ,&#39;&#39; AS cust_number
     ,&#39;&#39; AS billtoname
     , cmhead.cmhead_number AS ordernumber
     , -1 AS linenumber
     ,&#39;Sales Tax&#39; AS item
     , tax.tax_descrip AS itemdescrip
     ,&#39;&#39; AS iteminvuom
     ,&#39;&#39; AS qtytobill
     , formatmoney
     (cmhead.cmhead_tax) AS price
     , formatmoney
     (cmhead.cmhead_tax) AS extprice
     ,&#39;Debit&#39; AS sence
     , CASE WHEN 
     (accnt.accnt_id IS NULL) THEN &#39;Not Assigned&#39;::text ELSE 
     (
           (formatglaccountlong
                 (accnt.accnt_id) || &#39; - &#39;::text
           ) || accnt.accnt_descrip
     ) END AS account 
  FROM cmhead
     , tax
     , accnt 
 WHERE (
           (
                 (
                       (
                             (cmhead.cmhead_tax_id = tax.tax_id)
                           AND (tax.tax_sales_accnt_id = accnt.accnt_id)
                       )
                     AND (NOT cmhead.cmhead_posted)
                 )
               AND (NOT cmhead.cmhead_hold)
           )
         AND (cmhead.cmhead_tax &lt;&gt; 
                 (0)::numeric
           )
     )
)
UNIONSELECT cmhead.cmhead_id AS orderid
, cmitem.cmitem_id AS itemid
,&#39;&#39; AS documentnumber
,&#39;&#39; AS cust_number
,&#39;&#39; AS billtoname
, cmhead.cmhead_number AS ordernumber
, cmitem.cmitem_linenumber AS linenumber
, item.item_number AS item
, item.item_descrip1 AS itemdescrip
, uom.uom_name AS iteminvuom
, formatqty
(
     (cmitem.cmitem_qtycredit * cmitem.cmitem_qty_invuomratio)
) AS qtytobill
, formatprice
(
     (cmitem.cmitem_unitprice / cmitem.cmitem_price_invuomratio)
) AS price
, formatmoney
(round
     (
           (
                 (cmitem.cmitem_qtycredit * cmitem.cmitem_qty_invuomratio) * 
                 (cmitem.cmitem_unitprice / cmitem.cmitem_price_invuomratio)
           )
           , 2
     )
) AS extprice
,&#39;Debit&#39; AS sence
, COALESCE
(
     (
      SELECT formatglaccountlong
           (accnt.accnt_id) AS formatglaccountlong 
        FROM accnt
           , salesaccnt 
       WHERE (
                 (salesaccnt.salesaccnt_sales_accnt_id = accnt.accnt_id)
               AND (salesaccnt.salesaccnt_id = findsalesaccnt
                       (itemsite.itemsite_id
                             , cmhead.cmhead_cust_id
                       )
                 )
           )
     )
     ,&#39;Not Assigned&#39;::text
) AS account 
FROM item
, itemsite
, cmhead
, cmitem
, uom 
WHERE (
     (
           (
                 (
                       (
                             (cmitem.cmitem_itemsite_id = itemsite.itemsite_id)
                           AND (cmitem.cmitem_cmhead_id = cmhead.cmhead_id)
                       )
                     AND (itemsite.itemsite_item_id = item.item_id)
                 )
               AND (item.item_inv_uom_id = uom.uom_id)
           )
         AND (NOT cmhead.cmhead_posted)
     )
   AND (NOT cmhead.cmhead_hold)
)
ORDER BY 6
, 7;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.crmacct">crmacct</a>
		</h2>
        
         <p>Account - Entities with which we have Business Relationships</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.crmacct Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>crmacct_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>crmacct_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>crmacct_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>crmacct_active</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>crmacct_type</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.custinfo">public.custinfo.cust_id</a>
                  
                
                </td>
            	<td>crmacct_cust_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>crmacct_competitor_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>crmacct_partner_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.prospect">public.prospect.prospect_id</a>
                  
                
                </td>
            	<td>crmacct_prospect_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>crmacct_vend_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.cntct">public.cntct.cntct_id</a>
                  
                
                </td>
            	<td>crmacct_cntct_id_1</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.cntct">public.cntct.cntct_id</a>
                  
                
                </td>
            	<td>crmacct_cntct_id_2</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.crmacct">public.crmacct.crmacct_id</a>
                  
                
                </td>
            	<td>crmacct_parent_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>crmacct_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.taxauth">public.taxauth.taxauth_id</a>
                  
                
                </td>
            	<td>crmacct_taxauth_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>crmacct_owner_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.cntct">public.cntct</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.crmacct">public.crmacct</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.incdt">public.incdt</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.ophead">public.ophead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.todoitem">public.todoitem</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.curr">curr</a>
		</h2>
        
         <p>Obsolete Table</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.curr Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>curr_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>curr_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>curr_symbol</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>curr_rate</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>curr_fractional</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>curr_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.curr-rate">curr_rate</a>
		</h2>
        
         <p>Exchange Rates Between Base and Foreign Currencies</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.curr_rate Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>curr_rate_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>curr_rate</td>
            	<td>numeric(11,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>curr_effective</td>
            	<td>date</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>curr_expires</td>
            	<td>date</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.curr_rate Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>curr_rate_curr_rate_check</td>
                <td>CHECK ((curr_rate &gt; (0)::numeric))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.curr-symbol">curr_symbol</a>
		</h2>
        
         <p>Currency Names, Symbols, and Abbreviations</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.curr_symbol Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>curr_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>curr_base</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>curr_name</td>
            	<td>character varying(50)</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>curr_symbol</td>
            	<td>character varying(9)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>curr_abbr</td>
            	<td>character varying(3)</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.accnt">public.accnt</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.apapply">public.apapply</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.apcreditapply">public.apcreditapply</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.apopen">public.apopen</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.apselect">public.apselect</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.arapply">public.arapply</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.arcreditapply">public.arcreditapply</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.armemo">public.armemo</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.aropen">public.aropen</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.asohist">public.asohist</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.bankaccnt">public.bankaccnt</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.bankadj">public.bankadj</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.cashrcpt">public.cashrcpt</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.checkhead">public.checkhead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.checkitem">public.checkitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.cmhead">public.cmhead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.cobmisc">public.cobmisc</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.cohead">public.cohead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.cohist">public.cohist</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.costhist">public.costhist</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.curr-rate">public.curr_rate</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.custinfo">public.custinfo</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.emp">public.emp</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.invchead">public.invchead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.ipshead">public.ipshead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.itemcost">public.itemcost</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.itemsrcp">public.itemsrcp</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.pohead">public.pohead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.quhead">public.quhead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.recv">public.recv</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.shipdata">public.shipdata</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.shipdatasum">public.shipdatasum</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.shiphead">public.shiphead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.taxauth">public.taxauth</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.vendinfo">public.vendinfo</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.vohead">public.vohead</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.cust">cust</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.cust Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_custtype_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_salesrep_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_commprcnt</td>
            	<td>numeric(10,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_zipcode</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_contact</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_phone</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_fax</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_corraddress1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_corraddress2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_corraddress3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_corrcity</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_corrstate</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_corrzipcode</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_corrcontact</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_corrphone</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_corrfax</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_corremail</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_creditlmt</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_creditrating</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_financecharge</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_backorder</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_partialship</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_terms_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_discntprcnt</td>
            	<td>numeric(10,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_tax_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_taxidnum</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_balmethod</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_ffshipto</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_shipform_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_shipvia</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_blanketpos</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_shipchrg_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_creditstatus</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_ffbillto</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_corrcountry</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_usespos</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_dateadded</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_exported</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_emaildelivery</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_ediemail</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_edisubject</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_edifilename</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_ediemailbody</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_autoupdatestatus</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_autoholdorders</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_edicc</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_ediprofile_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_preferred_warehous_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_curr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_creditlmt_curr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT custinfo.cust_id
, custinfo.cust_active
, custinfo.cust_custtype_id
, custinfo.cust_salesrep_id
, custinfo.cust_commprcnt
, custinfo.cust_name
, m.addr_line1 AS cust_address1
, m.addr_line2 AS cust_address2
, m.addr_line3 AS cust_address3
, m.addr_city AS cust_city
, m.addr_state AS cust_state
, m.addr_postalcode AS cust_zipcode
, btrim
(
     (
           (mc.cntct_first_name || &#39; &#39;::text) || mc.cntct_last_name
     )
) AS cust_contact
, mc.cntct_phone AS cust_phone
, mc.cntct_fax AS cust_fax
, mc.cntct_email AS cust_email
, c.addr_line1 AS cust_corraddress1
, c.addr_line2 AS cust_corraddress2
, c.addr_line3 AS cust_corraddress3
, c.addr_city AS cust_corrcity
, c.addr_state AS cust_corrstate
, c.addr_postalcode AS cust_corrzipcode
, btrim
(
     (
           (cc.cntct_first_name || &#39; &#39;::text) || cc.cntct_last_name
     )
) AS cust_corrcontact
, cc.cntct_phone AS cust_corrphone
, cc.cntct_fax AS cust_corrfax
, cc.cntct_email AS cust_corremail
, custinfo.cust_creditlmt
, custinfo.cust_creditrating
, custinfo.cust_financecharge
, custinfo.cust_backorder
, custinfo.cust_partialship
, custinfo.cust_terms_id
, custinfo.cust_discntprcnt
, custinfo.cust_tax_id
, custinfo.cust_taxidnum
, custinfo.cust_balmethod
, custinfo.cust_ffshipto
, custinfo.cust_shipform_id
, custinfo.cust_shipvia
, custinfo.cust_blanketpos
, custinfo.cust_shipchrg_id
, custinfo.cust_creditstatus
, custinfo.cust_comments
, custinfo.cust_ffbillto
, m.addr_country AS cust_country
, c.addr_country AS cust_corrcountry
, custinfo.cust_usespos
, custinfo.cust_number
, custinfo.cust_dateadded
, custinfo.cust_exported
, custinfo.cust_emaildelivery
, custinfo.cust_ediemail
, custinfo.cust_edisubject
, custinfo.cust_edifilename
, custinfo.cust_ediemailbody
, custinfo.cust_autoupdatestatus
, custinfo.cust_autoholdorders
, custinfo.cust_edicc
, custinfo.cust_ediprofile_id
, custinfo.cust_preferred_warehous_id
, custinfo.cust_curr_id
, custinfo.cust_creditlmt_curr_id 
FROM (
     (
           (
                 (custinfo 
               LEFT JOIN cntct mc 
                      ON (
                             (custinfo.cust_cntct_id = mc.cntct_id)
                       )
                 )
         LEFT JOIN addr m 
                ON (
                       (mc.cntct_addr_id = m.addr_id)
                 )
           )
   LEFT JOIN cntct cc 
          ON (
                 (custinfo.cust_corrcntct_id = cc.cntct_id)
           )
     )
LEFT JOIN addr c 
    ON (
           (cc.cntct_addr_id = c.addr_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.custform">custform</a>
		</h2>
        
         <p>Customer Form assignment information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.custform Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>custform_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;custform_custform_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>custform_custtype_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>custform_custtype</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>custform_invoice_report_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>custform_creditmemo_report_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>custform_quote_report_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>custform_packinglist_report_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>custform_statement_report_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>custform_sopicklist_report_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.custgrp">custgrp</a>
		</h2>
        
         <p>Customer Group information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.custgrp Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>custgrp_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;custgrp_custgrp_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>custgrp_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>custgrp_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.custgrpitem">custgrpitem</a>
		</h2>
        
         <p>Customer Group Item information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.custgrpitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>custgrpitem_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;custgrpitem_custgrpitem_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>custgrpitem_custgrp_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>custgrpitem_cust_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.custinfo">custinfo</a>
		</h2>
        
         <p>Customer information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.custinfo Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>cust_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;cust_cust_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_active</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.custtype">public.custtype.custtype_id</a>
                  
                
                </td>
            	<td>cust_custtype_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.salesrep">public.salesrep.salesrep_id</a>
                  
                
                </td>
            	<td>cust_salesrep_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_commprcnt</td>
            	<td>numeric(10,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_creditlmt</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_creditrating</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_financecharge</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_backorder</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_partialship</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.terms">public.terms.terms_id</a>
                  
                
                </td>
            	<td>cust_terms_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_discntprcnt</td>
            	<td>numeric(10,4)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_tax_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				<br><br>Deprecated in 2.1 and replaced with cust_taxauth_id.
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_taxidnum</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>Deprecated in 2.1 and moved to taxreg table.
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_balmethod</td>
            	<td>character(1)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_ffshipto</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.shipform">public.shipform.shipform_id</a>
                  
                
                </td>
            	<td>cust_shipform_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_shipvia</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_blanketpos</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_shipchrg_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_creditstatus</td>
            	<td>character(1)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_ffbillto</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_usespos</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>cust_number</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_dateadded</td>
            	<td>date</td>
                <td><i>
				

				
				DEFAULT (&#39;now&#39;::text)::date
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_exported</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_emaildelivery</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_ediemail</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_edisubject</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_edifilename</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_ediemailbody</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_autoupdatestatus</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_autoholdorders</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_edicc</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_ediprofile_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_preferred_warehous_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				DEFAULT -1
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>cust_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>cust_creditlmt_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.cntct">public.cntct.cntct_id</a>
                  
                
                </td>
            	<td>cust_cntct_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.cntct">public.cntct.cntct_id</a>
                  
                
                </td>
            	<td>cust_corrcntct_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.taxauth">public.taxauth.taxauth_id</a>
                  
                
                </td>
            	<td>cust_taxauth_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_soemaildelivery</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_soediemail</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_soedisubject</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_soedifilename</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_soediemailbody</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_soedicc</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_soediprofile_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_gracedays</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_ediemailhtml</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_soediemailhtml</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.custinfo Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>custinfo_balmethod_check</td>
                <td>CHECK (((cust_balmethod = &#39;B&#39;::bpchar) OR (cust_balmethod = &#39;O&#39;::bpchar)))</td>
            </tr>
			
            <tr class="tr1">
				<td>custinfo_creditstatus_check</td>
                <td>CHECK ((((cust_creditstatus = &#39;G&#39;::bpchar) OR (cust_creditstatus = &#39;W&#39;::bpchar)) OR (cust_creditstatus = &#39;H&#39;::bpchar)))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.cashrcpt">public.cashrcpt</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.cohead">public.cohead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.crmacct">public.crmacct</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.shiptoinfo">public.shiptoinfo</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.custtype">custtype</a>
		</h2>
        
         <p>Customer Type information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.custtype Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>custtype_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;custtype_custtype_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>custtype_code</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>custtype_descrip</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>custtype_char</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.custinfo">public.custinfo</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.dept">dept</a>
		</h2>
        
         <p>List of Departments</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.dept Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>dept_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>dept_number</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>dept_name</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.emp">public.emp</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.destination">destination</a>
		</h2>
        
         <p>Destination information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.destination Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>destination_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;destination_destination_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>destination_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>destination_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>destination_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>destination_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.ediprofile">ediprofile</a>
		</h2>
        
         <p>EDI Profile record. This record has a unique name to identify the profile along with a type and several optionX values depending on the type.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.ediprofile Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>ediprofile_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>ediprofile_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ediprofile_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ediprofile_type</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ediprofile_option1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ediprofile_option2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ediprofile_option3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ediprofile_option4</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ediprofile_option5</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.incdtcat">public.incdtcat</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.emp">emp</a>
		</h2>
        
         <p>Employee table describing the basic properties of an employee. Employees need not be system users.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.emp Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>emp_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>emp_code</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				<br><br>Short, human-readable name for employee. This value is kept synchronized with usr_username and salesrep_number, and so is unique across all three tables emp, usr, and salesrep.
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>emp_number</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				<br><br>Official employee number. This might be used for ID badges, payroll accounting, or other purposes.
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>emp_active</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.cntct">public.cntct.cntct_id</a>
                  
                
                </td>
            	<td>emp_cntct_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.whsinfo">public.whsinfo.warehous_id</a>
                  
                
                </td>
            	<td>emp_warehous_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.emp">public.emp.emp_id</a>
                  
                
                </td>
            	<td>emp_mgr_emp_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				<br><br>Internal ID of this employee&#39;s manager/supervisor.
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>emp_wage_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>The nature of the wage or employment agreement. &#39;H&#39; indicates this employee is paid on an hourly basis (or some other period) while &#39;S&#39; indicates this employee is salaried.
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>emp_wage</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>emp_wage_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>emp_wage_period</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>The periodicity of wage payment: &#39;H&#39; for hourly, &#39;D&#39; for daily, &#39;W&#39; for weekly, &#39;BW&#39; for biweekly, &#39;M&#39; for monthly, &#39;Y&#39; for yearly.
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.dept">public.dept.dept_id</a>
                  
                
                </td>
            	<td>emp_dept_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.shift">public.shift.shift_id</a>
                  
                
                </td>
            	<td>emp_shift_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.usr">public.usr.usr_id</a>
                  
                
                </td>
            	<td>emp_usr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>emp_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.image">public.image.image_id</a>
                  
                
                </td>
            	<td>emp_image_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.emp Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>emp_check</td>
                <td>CHECK (((((COALESCE(emp_wage_type, &#39;&#39;::text) = &#39;&#39;::text) OR (COALESCE(emp_wage_type, &#39;&#39;::text) = &#39;H&#39;::text)) OR (COALESCE(emp_wage_type, &#39;&#39;::text) = &#39;S&#39;::text)) AND ((COALESCE(emp_wage, (0)::numeric) = (0)::numeric) OR ((COALESCE(emp_wage_type, &#39;&#39;::text) &lt;&gt; &#39;&#39;::text) AND (emp_wage IS NOT NULL)))))</td>
            </tr>
			
            <tr class="tr1">
				<td>emp_emp_wage_period_check</td>
                <td>CHECK ((((((((COALESCE(emp_wage_period, &#39;&#39;::text) = &#39;&#39;::text) OR (COALESCE(emp_wage_period, &#39;&#39;::text) = &#39;H&#39;::text)) OR (COALESCE(emp_wage_period, &#39;&#39;::text) = &#39;D&#39;::text)) OR (COALESCE(emp_wage_period, &#39;&#39;::text) = &#39;W&#39;::text)) OR (COALESCE(emp_wage_period, &#39;&#39;::text) = &#39;BW&#39;::text)) OR (COALESCE(emp_wage_period, &#39;&#39;::text) = &#39;M&#39;::text)) OR (COALESCE(emp_wage_period, &#39;&#39;::text) = &#39;Y&#39;::text)))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.emp">public.emp</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.empgrpitem">public.empgrpitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.salesrep">public.salesrep</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.empgrp">empgrp</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.empgrp Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>empgrp_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>empgrp_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>empgrp_descrip</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.empgrpitem">public.empgrpitem</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.empgrpitem">empgrpitem</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.empgrpitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>empgrpitem_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.empgrp">public.empgrp.empgrp_id</a>
                  
                
                </td>
            	<td>empgrpitem_empgrp_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.emp">public.emp.emp_id</a>
                  
                
                </td>
            	<td>empgrpitem_emp_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.evntlog">evntlog</a>
		</h2>
        
         <p>Event Notification history</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.evntlog Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>evntlog_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;evntlog_evntlog_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>evntlog_evnttime</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>evntlog_evnttype_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>evntlog_ord_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>evntlog_dispatched</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>evntlog_action</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>evntlog_warehous_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>evntlog_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>evntlog_newvalue</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>evntlog_oldvalue</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>evntlog_newdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>evntlog_olddate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>evntlog_ordtype</td>
            	<td>character(2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>evntlog_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       evntlog_dispatched_idx evntlog_dispatched
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.evntnot">evntnot</a>
		</h2>
        
         <p>Temporary table for storing information about user Event Notification selections</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.evntnot Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>evntnot_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;evntnot_evntnot_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>evntnot_evnttype_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>evntnot_warehous_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>evntnot_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       evntnot_evnttype_id_idx evntnot_evnttype_id
    
       evntnot_warehous_id_idx evntnot_warehous_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.evnttype">evnttype</a>
		</h2>
        
         <p>Event Type information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.evnttype Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>evnttype_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;evnttype_evnttype_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>evnttype_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>evnttype_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>evnttype_module</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       evnttype_name_idx evnttype_name
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.expcat">expcat</a>
		</h2>
        
         <p>Expense Category information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.expcat Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>expcat_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>expcat_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>expcat_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>expcat_exp_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>expcat_liability_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>expcat_active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>expcat_purchprice_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>expcat_freight_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.checkhead">public.checkhead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.poitem">public.poitem</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.flcol">flcol</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.flcol Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>flcol_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flcol_flhead_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flcol_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flcol_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flcol_report_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flcol_month</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flcol_quarter</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flcol_year</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flcol_showdb</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flcol_prcnt</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flcol_priortype</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flcol_priormonth</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flcol_priorquarter</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flcol_prioryear</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flcol_priorprcnt</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flcol_priordiff</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flcol_priordiffprcnt</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flcol_budget</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flcol_budgetprcnt</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flcol_budgetdiff</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flcol_budgetdiffprcnt</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.flgrp">flgrp</a>
		</h2>
        
         <p>Financial Layout Group information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.flgrp Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>flgrp_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flgrp_flhead_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flgrp_flgrp_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flgrp_order</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flgrp_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flgrp_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flgrp_subtotal</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flgrp_summarize</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flgrp_subtract</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flgrp_showstart</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flgrp_showend</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flgrp_showdelta</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flgrp_showbudget</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flgrp_showstartprcnt</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flgrp_showendprcnt</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flgrp_showdeltaprcnt</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flgrp_showbudgetprcnt</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flgrp_prcnt_flgrp_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				DEFAULT -1
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flgrp_showdiff</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flgrp_showdiffprcnt</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flgrp_showcustom</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flgrp_showcustomprcnt</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flgrp_usealtsubtotal</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flgrp_altsubtotal</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.flhead">flhead</a>
		</h2>
        
         <p>Financial Layout header information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.flhead Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>flhead_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flhead_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flhead_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flhead_showtotal</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flhead_showstart</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flhead_showend</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flhead_showdelta</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flhead_showbudget</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flhead_showdiff</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flhead_showcustom</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flhead_custom_label</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flhead_usealttotal</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flhead_alttotal</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flhead_usealtbegin</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flhead_altbegin</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flhead_usealtend</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flhead_altend</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flhead_usealtdebits</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flhead_altdebits</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flhead_usealtcredits</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flhead_altcredits</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flhead_usealtbudget</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flhead_altbudget</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flhead_usealtdiff</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flhead_altdiff</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flhead_type</td>
            	<td>character(1)</td>
                <td><i>
				

				NOT NULL
				DEFAULT &#39;A&#39;::bpchar
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flhead_active</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flhead_sys</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.flitem">flitem</a>
		</h2>
        
         <p>Financial Layout Account information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.flitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>flitem_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flitem_flhead_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flitem_flgrp_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flitem_order</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flitem_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flitem_showstart</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flitem_showend</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flitem_showdelta</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flitem_showbudget</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flitem_subtract</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flitem_showstartprcnt</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flitem_showendprcnt</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flitem_showdeltaprcnt</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flitem_showbudgetprcnt</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flitem_prcnt_flgrp_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				DEFAULT -1
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flitem_showdiff</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flitem_showdiffprcnt</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flitem_showcustom</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flitem_showcustomprcnt</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flitem_custom_source</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flitem_company</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flitem_profit</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flitem_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flitem_sub</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flitem_type</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flitem_subaccnttype_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.flrpt">flrpt</a>
		</h2>
        
         <p>Scratch table where financial reporting information is processed before being displayed.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.flrpt Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flrpt_flhead_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flrpt_period_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flrpt_username</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flrpt_order</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flrpt_level</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flrpt_type</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flrpt_type_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flrpt_beginning</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flrpt_ending</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flrpt_debits</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flrpt_credits</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flrpt_budget</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flrpt_beginningprcnt</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flrpt_endingprcnt</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flrpt_debitsprcnt</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flrpt_creditsprcnt</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flrpt_budgetprcnt</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flrpt_parent_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flrpt_diff</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flrpt_diffprcnt</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flrpt_custom</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flrpt_customprcnt</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flrpt_altname</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flrpt_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flrpt_interval</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.flspec">flspec</a>
		</h2>
        
         <p>Financial Layout Special entries.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.flspec Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>flspec_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flspec_flhead_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flspec_flgrp_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flspec_order</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flspec_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flspec_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flspec_showstart</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flspec_showend</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flspec_showdelta</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flspec_showbudget</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flspec_subtract</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flspec_showstartprcnt</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flspec_showendprcnt</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flspec_showdeltaprcnt</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flspec_showbudgetprcnt</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flspec_showdiff</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flspec_showdiffprcnt</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flspec_prcnt_flgrp_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				DEFAULT -1
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flspec_showcustom</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>flspec_showcustomprcnt</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>flspec_custom_source</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.form">form</a>
		</h2>
        
         <p>Form information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.form Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>form_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;form_form_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>form_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>form_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>form_report_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>form_key</td>
            	<td>character varying(4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.freightclass">freightclass</a>
		</h2>
        
         <p>This table is the freight price schedules.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.freightclass Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>freightclass_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>freightclass_code</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>freightclass_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.ipsfreight">public.ipsfreight</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.item">public.item</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.glseries">glseries</a>
		</h2>
        
         <p>Temporary table for storing information about General Ledger (G/L) Series Entries before Series Entries are posted</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.glseries Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>glseries_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;glseries_glseries_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>glseries_sequence</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>glseries_doctype</td>
            	<td>character(2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>glseries_docnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>glseries_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>glseries_amount</td>
            	<td>numeric(12,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>glseries_source</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>glseries_distdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>glseries_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.gltrans">gltrans</a>
		</h2>
        
         <p>General Ledger (G/L) transaction information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.gltrans Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>gltrans_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;gltrans_gltrans_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>gltrans_exported</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>gltrans_created</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>gltrans_date</td>
            	<td>date</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>gltrans_sequence</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>gltrans_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>gltrans_source</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>gltrans_docnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>gltrans_misc_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>gltrans_amount</td>
            	<td>numeric(12,2)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>gltrans_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>gltrans_journalnumber</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>gltrans_posted</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>gltrans_doctype</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>gltrans_rec</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>gltrans_username</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				DEFAULT &quot;current_user&quot;()
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       gltrans_gltrans_accnt_id_idx gltrans_accnt_id
    
       gltrans_gltrans_date_idx gltrans_date
    
       gltrans_gltrans_journalnumber_idx gltrans_journalnumber
    
       gltrans_sequence_idx gltrans_sequence
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.grp">grp</a>
		</h2>
        
         <p>This table is the basic group information.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.grp Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>grp_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>grp_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>grp_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.grppriv">public.grppriv</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.usrgrp">public.usrgrp</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.grppriv">grppriv</a>
		</h2>
        
         <p>This is a specific priv for a specific group.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.grppriv Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>grppriv_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.grp">public.grp.grp_id</a>
                  
                
                </td>
            	<td>grppriv_grp_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>grppriv_priv_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.headlock">headlock</a>
		</h2>
        
         <p>Hold IDs of locked records</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.headlock Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>headlock_head_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>headlock_table</td>
            	<td>text</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>headlock_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>headlock_procpid</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.hnfc">hnfc</a>
		</h2>
        
         <p>List of personal titles/honorifics used in cntct table.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.hnfc Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>hnfc_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>hnfc_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.image">image</a>
		</h2>
        
         <p>Image information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.image Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>image_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;image_image_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>image_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>image_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>image_data</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.emp">public.emp</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.imageass">public.imageass</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.imageass">imageass</a>
		</h2>
        
         <p>Image Assignement References</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.imageass Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>imageass_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>imageass_source_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>imageass_source</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.image">public.image.image_id</a>
                  
                
                </td>
            	<td>imageass_image_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>imageass_purpose</td>
            	<td>character(1)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.imageass Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>imageass_imageass_purpose_check</td>
                <td>CHECK (((((imageass_purpose = &#39;I&#39;::bpchar) OR (imageass_purpose = &#39;E&#39;::bpchar)) OR (imageass_purpose = &#39;M&#39;::bpchar)) OR (imageass_purpose = &#39;P&#39;::bpchar)))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.incdt">incdt</a>
		</h2>
        
         <p>Incident table</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.incdt Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>incdt_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>incdt_number</td>
            	<td>integer</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.crmacct">public.crmacct.crmacct_id</a>
                  
                
                </td>
            	<td>incdt_crmacct_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.cntct">public.cntct.cntct_id</a>
                  
                
                </td>
            	<td>incdt_cntct_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>incdt_summary</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>incdt_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.item">public.item.item_id</a>
                  
                
                </td>
            	<td>incdt_item_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>incdt_timestamp</td>
            	<td>timestamp without time zone</td>
                <td><i>
				

				NOT NULL
				DEFAULT now()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>incdt_status</td>
            	<td>character(1)</td>
                <td><i>
				

				NOT NULL
				DEFAULT &#39;N&#39;::bpchar
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>incdt_assigned_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.incdtcat">public.incdtcat.incdtcat_id</a>
                  
                
                </td>
            	<td>incdt_incdtcat_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.incdtseverity">public.incdtseverity.incdtseverity_id</a>
                  
                
                </td>
            	<td>incdt_incdtseverity_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.incdtpriority">public.incdtpriority.incdtpriority_id</a>
                  
                
                </td>
            	<td>incdt_incdtpriority_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.incdtresolution">public.incdtresolution.incdtresolution_id</a>
                  
                
                </td>
            	<td>incdt_incdtresolution_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>incdt_lotserial</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>incdt_lotserial is deprecated
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>incdt_ls_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.aropen">public.aropen.aropen_id</a>
                  
                
                </td>
            	<td>incdt_aropen_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>incdt_owner_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.incdthist">public.incdthist</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.todoitem">public.todoitem</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.incdtcat">incdtcat</a>
		</h2>
        
         <p>Incident Category table</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.incdtcat Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>incdtcat_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>incdtcat_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>incdtcat_order</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>incdtcat_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.ediprofile">public.ediprofile.ediprofile_id</a>
                  
                
                </td>
            	<td>incdtcat_ediprofile_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.incdt">public.incdt</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.incdthist">incdthist</a>
		</h2>
        
         <p>Incident history changes</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.incdthist Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>incdthist_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.incdt">public.incdt.incdt_id</a>
                  
                
                </td>
            	<td>incdthist_incdt_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>incdthist_change</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>incdthist_target_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>incdthist_timestamp</td>
            	<td>timestamp without time zone</td>
                <td><i>
				

				NOT NULL
				DEFAULT now()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>incdthist_username</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				DEFAULT &quot;current_user&quot;()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>incdthist_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.incdtpriority">incdtpriority</a>
		</h2>
        
         <p>Incident Priority table</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.incdtpriority Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>incdtpriority_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>incdtpriority_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>incdtpriority_order</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>incdtpriority_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.incdt">public.incdt</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.incdtresolution">incdtresolution</a>
		</h2>
        
         <p>Incident Resolution table</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.incdtresolution Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>incdtresolution_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>incdtresolution_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>incdtresolution_order</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>incdtresolution_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.incdt">public.incdt</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.incdtseverity">incdtseverity</a>
		</h2>
        
         <p>Incident Severity table</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.incdtseverity Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>incdtseverity_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>incdtseverity_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>incdtseverity_order</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>incdtseverity_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.incdt">public.incdt</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.invchead">invchead</a>
		</h2>
        
         <p>Invoice header information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.invchead Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>invchead_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_cust_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_shipto_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_ordernumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_orderdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_posted</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_printed</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>invchead_invcnumber</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_invcdate</td>
            	<td>date</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_shipdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_ponumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_shipvia</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_fob</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_billto_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_billto_address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_billto_address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_billto_address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_billto_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_billto_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_billto_zipcode</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_billto_phone</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_shipto_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_shipto_address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_shipto_address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_shipto_address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_shipto_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_shipto_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_shipto_zipcode</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_shipto_phone</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_salesrep_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_commission</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_terms_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_freight</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_tax</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_misc_amount</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_misc_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_misc_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_payment</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_paymentref</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_tax_ratea</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				DEFAULT 0.0
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_tax_rateb</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				DEFAULT 0.0
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_tax_ratec</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				DEFAULT 0.0
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_billto_country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_shipto_country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_prj_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>invchead_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_gldistdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.taxauth">public.taxauth.taxauth_id</a>
                  
                
                </td>
            	<td>invchead_taxauth_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>invchead_tax_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.tax">public.tax.tax_id</a>
                  
                
                </td>
            	<td>invchead_adjtax_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.taxtype">public.taxtype.taxtype_id</a>
                  
                
                </td>
            	<td>invchead_adjtaxtype_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_adjtax_pcta</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_adjtax_pctb</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_adjtax_pctc</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_adjtax_ratea</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_adjtax_rateb</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_adjtax_ratec</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.tax">public.tax.tax_id</a>
                  
                
                </td>
            	<td>invchead_freighttax_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.taxtype">public.taxtype.taxtype_id</a>
                  
                
                </td>
            	<td>invchead_freighttaxtype_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_freighttax_pcta</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_freighttax_pctb</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_freighttax_pctc</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_freighttax_ratea</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_freighttax_rateb</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_freighttax_ratec</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_recurring</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_recurring_interval</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_recurring_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_recurring_until</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invchead_recurring_invchead_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invchead_shipchrg_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.cobmisc">public.cobmisc</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.invcitem">public.invcitem</a></li>
			</ul>
		
		

    <!-- Indexes -->
    
       invchead_invchead_ordernumber_idx invchead_ordernumber
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.invcitem">invcitem</a>
		</h2>
        
         <p>Invoice Line Item information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.invcitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>invcitem_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.invchead">public.invchead.invchead_id</a>
                  
                
                  
                
                </td>
            	<td>invcitem_invchead_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				
					

					
                       UNIQUE#1
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>invcitem_linenumber</td>
            	<td>integer</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invcitem_item_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invcitem_warehous_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invcitem_custpn</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invcitem_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invcitem_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invcitem_ordered</td>
            	<td>numeric(20,4)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invcitem_billed</td>
            	<td>numeric(20,4)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invcitem_custprice</td>
            	<td>numeric(20,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invcitem_price</td>
            	<td>numeric(20,4)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invcitem_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invcitem_salescat_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invcitem_tax_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.taxtype">public.taxtype.taxtype_id</a>
                  
                
                </td>
            	<td>invcitem_taxtype_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invcitem_tax_pcta</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invcitem_tax_pctb</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invcitem_tax_pctc</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invcitem_tax_ratea</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invcitem_tax_rateb</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invcitem_tax_ratec</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.uom">public.uom.uom_id</a>
                  
                
                </td>
            	<td>invcitem_qty_uom_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invcitem_qty_invuomratio</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.uom">public.uom.uom_id</a>
                  
                
                </td>
            	<td>invcitem_price_uom_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invcitem_price_invuomratio</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invcitem_coitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.cobill">public.cobill</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.shipitem">public.shipitem</a></li>
			</ul>
		
		

    <!-- Indexes -->
    
       invcitem_invcitem_invchead_id_idx invcitem_invchead_id
    
       invcitem_invcitem_itemsite_id_idx invcitem_item_id, invcitem_warehous_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.invcnt">invcnt</a>
		</h2>
        
         <p>Count Tag information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.invcnt Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>invcnt_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;invcnt_invcnt_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invcnt_itemsite_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invcnt_tagdate</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invcnt_cntdate</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invcnt_qoh_before</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invcnt_qoh_after</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invcnt_matcost</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invcnt_cnt_usr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invcnt_posted</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invcnt_post_usr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invcnt_postdate</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invcnt_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invcnt_priority</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invcnt_tag_usr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invcnt_tagnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invcnt_invhist_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invcnt_location_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.invdetail">invdetail</a>
		</h2>
        
         <p>Detailed Inventory transaction information for Lot/Serial and Multiple Location Control (MLC) Items</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.invdetail Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>invdetail_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;invdetail_invdetail_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invdetail_transtype</td>
            	<td>character(2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invdetail_invhist_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invdetail_location_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invdetail_qty</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invdetail_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invdetail_qty_before</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invdetail_qty_after</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invdetail_invcitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invdetail_expiration</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invdetail_warrpurc</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invdetail_ls_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       invdetail_invdetail_invcitem_id_idx invdetail_invcitem_id
    
       invdetail_invdetail_invhist_id_idx invdetail_invhist_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.invhist">invhist</a>
		</h2>
        
         <p>Inventory transaction history</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.invhist Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>invhist_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;invhist_invhist_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invhist_itemsite_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invhist_transdate</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				DEFAULT (&#39;now&#39;::text)::timestamp(6) with time zone
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invhist_transtype</td>
            	<td>character(2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invhist_invqty</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invhist_invuom</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invhist_ordnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invhist_docnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invhist_qoh_before</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invhist_qoh_after</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invhist_unitcost</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invhist_acct_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invhist_xfer_warehous_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invhist_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invhist_posted</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invhist_imported</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invhist_hasdetail</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invhist_ordtype</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invhist_analyze</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invhist_user</td>
            	<td>text</td>
                <td><i>
				

				
				DEFAULT &quot;current_user&quot;()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invhist_created</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				NOT NULL
				DEFAULT now()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invhist_costmethod</td>
            	<td>character(1)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invhist_value_before</td>
            	<td>numeric(12,2)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invhist_value_after</td>
            	<td>numeric(12,2)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.invhist Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>invhist_invhist_costmethod_check</td>
                <td>CHECK (((invhist_costmethod = &#39;S&#39;::bpchar) OR (invhist_costmethod = &#39;A&#39;::bpchar)))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.shipitem">public.shipitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.womatlpost">public.womatlpost</a></li>
			</ul>
		
		

    <!-- Indexes -->
    
       invhist_hasdetail invhist_hasdetail
    
       invhist_invhist_ordnumber_idx invhist_ordnumber
    
       invhist_itemsite_id invhist_itemsite_id
    
       invhist_transdate invhist_transdate
    
       invhist_transtype invhist_transtype
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.ipsass">ipsass</a>
		</h2>
        
         <p>Pricing Schedule assignment information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.ipsass Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>ipsass_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.ipshead">public.ipshead.ipshead_id</a>
                  
                
                  
                
                </td>
            	<td>ipsass_ipshead_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				
					

					
                       UNIQUE#1
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>ipsass_cust_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>ipsass_custtype_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>ipsass_custtype_pattern</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>ipsass_shipto_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				

				
				DEFAULT -1
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>ipsass_shipto_pattern</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.ipsfreight">ipsfreight</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.ipsfreight Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>ipsfreight_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.ipshead">public.ipshead.ipshead_id</a>
                  
                
                </td>
            	<td>ipsfreight_ipshead_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ipsfreight_qtybreak</td>
            	<td>numeric</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ipsfreight_price</td>
            	<td>numeric</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ipsfreight_type</td>
            	<td>character(1)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.whsinfo">public.whsinfo.warehous_id</a>
                  
                
                </td>
            	<td>ipsfreight_warehous_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.shipzone">public.shipzone.shipzone_id</a>
                  
                
                </td>
            	<td>ipsfreight_shipzone_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.freightclass">public.freightclass.freightclass_id</a>
                  
                
                </td>
            	<td>ipsfreight_freightclass_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ipsfreight_shipvia</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.ipshead">ipshead</a>
		</h2>
        
         <p>Pricing Schedule header information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.ipshead Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>ipshead_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;ipshead_ipshead_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>ipshead_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ipshead_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ipshead_effective</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ipshead_expires</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>ipshead_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ipshead_updated</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.ipsass">public.ipsass</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.ipsfreight">public.ipsfreight</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.ipsitem">public.ipsitem</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.ipsitem">ipsitem</a>
		</h2>
        
         <p>Pricing Schedule Item information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.ipsitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>ipsitem_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;ipsitem_ipsitem_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.ipshead">public.ipshead.ipshead_id</a>
                  
                
                  
                
                </td>
            	<td>ipsitem_ipshead_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				
					

					
                       UNIQUE#1
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                  
                  <a href="#public.table.item">public.item.item_id</a>
                  
                
                </td>
            	<td>ipsitem_item_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>ipsitem_qtybreak</td>
            	<td>numeric(18,6)</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ipsitem_price</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                  
                  <a href="#public.table.uom">public.uom.uom_id</a>
                  
                
                </td>
            	<td>ipsitem_qty_uom_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                  
                  <a href="#public.table.uom">public.uom.uom_id</a>
                  
                
                </td>
            	<td>ipsitem_price_uom_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.ipsitemchar">public.ipsitemchar</a></li>
			</ul>
		
		

    <!-- Indexes -->
    
       ipsitem_ipshead_id_idx ipsitem_ipshead_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.ipsitemchar">ipsitemchar</a>
		</h2>
        
         <p>Item Price Schedule Characteristic Prices.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.ipsitemchar Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>ipsitemchar_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.ipsitem">public.ipsitem.ipsitem_id</a>
                  
                
                  
                
                  
                
                </td>
            	<td>ipsitemchar_ipsitem_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				
					

					
                       UNIQUE#2
                    
				
					

					
                       UNIQUE#1
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.char">public.char.char_id</a>
                  
                
                  
                
                  
                
                </td>
            	<td>ipsitemchar_char_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				
					

					
                       UNIQUE#2
                    
				
					

					
                       UNIQUE#1
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                  
                
                </td>
            	<td>ipsitemchar_value</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE#2
                    
				
					

					
                       UNIQUE#1
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ipsitemchar_price</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.ipsprice">ipsprice</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.ipsprice Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ipsprice_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ipsprice_source</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ipsprice_ipshead_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ipsprice_item_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ipsprice_qtybreak</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ipsprice_price</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT ipsitem.ipsitem_id AS ipsprice_id
,&#39;I&#39; AS ipsprice_source
, ipsitem.ipsitem_ipshead_id AS ipsprice_ipshead_id
, ipsitem.ipsitem_item_id AS ipsprice_item_id
, itemuomtouom
(ipsitem.ipsitem_item_id
     , ipsitem.ipsitem_qty_uom_id
     , NULL::integer
     , ipsitem.ipsitem_qtybreak
) AS ipsprice_qtybreak
, (
     (ipsitem.ipsitem_price * itemuomtouomratio
           (ipsitem.ipsitem_item_id
                 , NULL::integer
                 , ipsitem.ipsitem_price_uom_id
           )
     ) * iteminvpricerat
     (ipsitem.ipsitem_item_id)
) AS ipsprice_price 
FROM ipsitem 
UNIONSELECT ipsprodcat.ipsprodcat_id AS ipsprice_id
,&#39;P&#39; AS ipsprice_source
, ipsprodcat.ipsprodcat_ipshead_id AS ipsprice_ipshead_id
, item.item_id AS ipsprice_item_id
, ipsprodcat.ipsprodcat_qtybreak AS ipsprice_qtybreak
, (
     (item.item_listprice - 
           (item.item_listprice * ipsprodcat.ipsprodcat_discntprcnt)
     )
)::numeric
(16
     ,4
) AS ipsprice_price 
FROM (ipsprodcat 
  JOIN item 
    ON (
           (ipsprodcat.ipsprodcat_prodcat_id = item.item_prodcat_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.ipsprodcat">ipsprodcat</a>
		</h2>
        
         <p>Pricing Schedule Product Category information.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.ipsprodcat Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>ipsprodcat_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ipsprodcat_ipshead_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ipsprodcat_prodcat_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ipsprodcat_qtybreak</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ipsprodcat_discntprcnt</td>
            	<td>numeric(10,4)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.item">item</a>
		</h2>
        
         <p>Item information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.item Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>item_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;item_item_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>item_number</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_descrip1</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>item_descrip2</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.classcode">public.classcode.classcode_id</a>
                  
                
                </td>
            	<td>item_classcode_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>item_picklist</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>item_sold</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_fractional</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>item_active</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_type</td>
            	<td>character(1)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>item_prodweight</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_packweight</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>item_prodcat_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_exclusive</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>item_listprice</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_config</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>item_extdescrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_upccode</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>item_maxcost</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_planning_type</td>
            	<td>character(1)</td>
                <td><i>
				

				NOT NULL
				DEFAULT &#39;M&#39;::bpchar
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.uom">public.uom.uom_id</a>
                  
                
                </td>
            	<td>item_inv_uom_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.uom">public.uom.uom_id</a>
                  
                
                </td>
            	<td>item_price_uom_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>item_warrdays</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.freightclass">public.freightclass.freightclass_id</a>
                  
                
                </td>
            	<td>item_freightclass_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.item Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>item_item_planning_type_check</td>
                <td>CHECK ((((item_planning_type = &#39;M&#39;::bpchar) OR (item_planning_type = &#39;N&#39;::bpchar)) OR (item_planning_type = &#39;S&#39;::bpchar)))</td>
            </tr>
			
            <tr class="tr1">
				<td>item_item_type_check</td>
                <td>CHECK ((((((((((((((item_type = &#39;P&#39;::bpchar) OR (item_type = &#39;M&#39;::bpchar)) OR (item_type = &#39;F&#39;::bpchar)) OR (item_type = &#39;J&#39;::bpchar)) OR (item_type = &#39;O&#39;::bpchar)) OR (item_type = &#39;R&#39;::bpchar)) OR (item_type = &#39;S&#39;::bpchar)) OR (item_type = &#39;T&#39;::bpchar)) OR (item_type = &#39;B&#39;::bpchar)) OR (item_type = &#39;L&#39;::bpchar)) OR (item_type = &#39;Y&#39;::bpchar)) OR (item_type = &#39;C&#39;::bpchar)) OR (item_type = &#39;K&#39;::bpchar)))</td>
            </tr>
			
            <tr class="tr0">
				<td>item_sold_check</td>
                <td>CHECK ((NOT (item_sold AND (item_prodcat_id = -1))))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.bomhead">public.bomhead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.bomitem">public.bomitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.bomitemsub">public.bomitemsub</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.incdt">public.incdt</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.ipsitem">public.ipsitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.itemalias">public.itemalias</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.itemcost">public.itemcost</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.itemsite">public.itemsite</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.itemsrc">public.itemsrc</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.itemsub">public.itemsub</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.itemtax">public.itemtax</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.itemuomconv">public.itemuomconv</a></li>
			</ul>
		
		

    <!-- Indexes -->
    
       item_classcode_id item_classcode_id
    
       item_prodcat_id_idx item_prodcat_id
    
       item_upccode_idx item_upccode
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.itemalias">itemalias</a>
		</h2>
        
         <p>Item Alias information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.itemalias Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>itemalias_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;itemalias_itemalias_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.item">public.item.item_id</a>
                  
                
                  
                
                </td>
            	<td>itemalias_item_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				
					

					
                       UNIQUE#1
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>itemalias_number</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemalias_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemalias_usedescrip</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemalias_descrip1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemalias_descrip2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.itemcost">itemcost</a>
		</h2>
        
         <p>Item Cost information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.itemcost Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>itemcost_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;itemcost_itemcost_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.item">public.item.item_id</a>
                  
                
                </td>
            	<td>itemcost_item_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.costelem">public.costelem.costelem_id</a>
                  
                
                </td>
            	<td>itemcost_costelem_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemcost_lowlevel</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemcost_stdcost</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemcost_posted</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemcost_actcost</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemcost_updated</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>itemcost_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				
					

					
				

				NOT NULL
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       itemcost_item_id_key itemcost_item_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.itemfile">itemfile</a>
		</h2>
        
         <p>Itemfile view for legacy support. Use of itemfile is deprecated. Use url table for future development</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.itemfile Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemfile_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemfile_item_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemfile_title</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemfile_url</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT url.url_id AS itemfile_id
, url.url_source_id AS itemfile_item_id
, url.url_title AS itemfile_title
, url.url_url AS itemfile_url 
FROM url 
WHERE (url.url_source = &#39;I&#39;::text);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.itemgrp">itemgrp</a>
		</h2>
        
         <p>Item Group information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.itemgrp Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>itemgrp_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;itemgrp_itemgrp_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemgrp_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemgrp_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.itemgrpitem">itemgrpitem</a>
		</h2>
        
         <p>Item Group Item information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.itemgrpitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>itemgrpitem_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;itemgrpitem_itemgrpitem_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemgrpitem_itemgrp_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemgrpitem_item_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.itemimage">itemimage</a>
		</h2>
        
         <p>Itemimage view for legacy support. Use of itemimage is deprecated. Use imageass table for future development</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.itemimage Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemimage_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemimage_item_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemimage_image_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemimage_purpose</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT imageass.imageass_id AS itemimage_id
, imageass.imageass_source_id AS itemimage_item_id
, imageass.imageass_image_id AS itemimage_image_id
, imageass.imageass_purpose AS itemimage_purpose 
FROM imageass 
WHERE (imageass.imageass_source = &#39;I&#39;::text);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.itemloc">itemloc</a>
		</h2>
        
         <p>Detailed Location information for Lot/Serial and Multiple Location Control (MLC) Items</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.itemloc Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>itemloc_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;itemloc_itemloc_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemloc_itemsite_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemloc_location_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemloc_qty</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemloc_expiration</td>
            	<td>date</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemloc_consolflag</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemloc_ls_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemloc_warrpurc</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.itemlocdist">itemlocdist</a>
		</h2>
        
         <p>Temporary table for storing information about Inventory distributions involving Lot/Serial and Multiple Location Control (MLC) Items</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.itemlocdist Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>itemlocdist_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;itemlocdist_itemlocdist_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemlocdist_itemlocdist_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemlocdist_source_type</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemlocdist_source_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemlocdist_qty</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemlocdist_series</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemlocdist_invhist_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemlocdist_itemsite_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemlocdist_reqlotserial</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemlocdist_flush</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemlocdist_expiration</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemlocdist_distlotserial</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemlocdist_warranty</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemlocdist_ls_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemlocdist_order_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemlocdist_order_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.itemlocpost">itemlocpost</a>
		</h2>
        
         <p>Temporary table for storing information about Inventory distribution G/L postings involving Lot/Serial and Multiple Location Control (MLC) Items</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.itemlocpost Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>itemlocpost_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemlocpost_itemlocseries</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemlocpost_glseq</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.itemsite">itemsite</a>
		</h2>
        
         <p>Item Site information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.itemsite Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>itemsite_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;itemsite_itemsite_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.item">public.item.item_id</a>
                  
                
                </td>
            	<td>itemsite_item_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.whsinfo">public.whsinfo.warehous_id</a>
                  
                
                </td>
            	<td>itemsite_warehous_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsite_qtyonhand</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsite_reorderlevel</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsite_ordertoqty</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsite_cyclecountfreq</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsite_datelastcount</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsite_datelastused</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsite_supply</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsite_loccntrl</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsite_safetystock</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsite_minordqty</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsite_multordqty</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsite_leadtime</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsite_abcclass</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsite_issuemethod</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsite_controlmethod</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsite_active</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.plancode">public.plancode.plancode_id</a>
                  
                
                </td>
            	<td>itemsite_plancode_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.costcat">public.costcat.costcat_id</a>
                  
                
                </td>
            	<td>itemsite_costcat_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsite_eventfence</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsite_sold</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsite_stocked</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsite_freeze</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsite_location_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsite_useparams</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsite_useparamsmanual</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsite_soldranking</td>
            	<td>integer</td>
                <td><i>
				

				
				DEFAULT 1
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsite_createpr</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsite_location</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsite_location_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsite_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsite_perishable</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsite_nnqoh</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsite_autoabcclass</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsite_ordergroup</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsite_disallowblankwip</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsite_maxordqty</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				DEFAULT 0.0
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsite_mps_timefence</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsite_createwo</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsite_warrpurc</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsite_autoreg</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsite_costmethod</td>
            	<td>character(1)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsite_value</td>
            	<td>numeric(12,2)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsite_ordergroup_first</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.itemsite Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>itemsite_itemsite_abcclass_check</td>
                <td>CHECK (((((itemsite_abcclass = &#39;A&#39;::bpchar) OR (itemsite_abcclass = &#39;B&#39;::bpchar)) OR (itemsite_abcclass = &#39;C&#39;::bpchar)) OR (itemsite_abcclass = &#39;T&#39;::bpchar)))</td>
            </tr>
			
            <tr class="tr1">
				<td>itemsite_itemsite_controlmethod_check</td>
                <td>CHECK (((((itemsite_controlmethod = &#39;N&#39;::bpchar) OR (itemsite_controlmethod = &#39;R&#39;::bpchar)) OR (itemsite_controlmethod = &#39;S&#39;::bpchar)) OR (itemsite_controlmethod = &#39;L&#39;::bpchar)))</td>
            </tr>
			
            <tr class="tr0">
				<td>itemsite_itemsite_costmethod_check</td>
                <td>CHECK (((((itemsite_costmethod = &#39;N&#39;::bpchar) OR (itemsite_costmethod = &#39;A&#39;::bpchar)) OR (itemsite_costmethod = &#39;S&#39;::bpchar)) OR (itemsite_costmethod = &#39;J&#39;::bpchar)))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.coitem">public.coitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.poitem">public.poitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.recv">public.recv</a></li>
			</ul>
		
		

    <!-- Indexes -->
    
       itemsite_active_key itemsite_active
    
       itemsite_item_id_key itemsite_item_id
    
       itemsite_plancode_id_key itemsite_plancode_id
    
       itemsite_warehous_id_key itemsite_warehous_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.itemsrc">itemsrc</a>
		</h2>
        
         <p>Item Source information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.itemsrc Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>itemsrc_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;itemsrc_itemsrc_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.item">public.item.item_id</a>
                  
                
                  
                
                </td>
            	<td>itemsrc_item_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				
					

					
                       UNIQUE#1
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.vendinfo">public.vendinfo.vend_id</a>
                  
                
                  
                
                </td>
            	<td>itemsrc_vend_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				
					

					
                       UNIQUE#1
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>itemsrc_vend_item_number</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsrc_vend_item_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsrc_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsrc_vend_uom</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsrc_invvendoruomratio</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsrc_minordqty</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsrc_multordqty</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsrc_leadtime</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsrc_ranking</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsrc_active</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>itemsrc_manuf_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				

				NOT NULL
				DEFAULT &#39;&#39;::text
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>itemsrc_manuf_item_number</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				

				NOT NULL
				DEFAULT &#39;&#39;::text
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsrc_manuf_item_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.itemsrcp">public.itemsrcp</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.poitem">public.poitem</a></li>
			</ul>
		
		

    <!-- Indexes -->
    
       itemsrc_vend_id_idx itemsrc_vend_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.itemsrcp">itemsrcp</a>
		</h2>
        
         <p>Item Source Price information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.itemsrcp Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>itemsrcp_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;itemsrcp_itemsrcp_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.itemsrc">public.itemsrc.itemsrc_id</a>
                  
                
                  
                
                </td>
            	<td>itemsrcp_itemsrc_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				
					

					
                       UNIQUE#1
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>itemsrcp_qtybreak</td>
            	<td>numeric(18,6)</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsrcp_price</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsrcp_updated</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>itemsrcp_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       itemsrcp_itemsrc_id_key itemsrcp_itemsrc_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.itemsub">itemsub</a>
		</h2>
        
         <p>Item Substitutes information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.itemsub Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>itemsub_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;itemsub_itemsub_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.item">public.item.item_id</a>
                  
                
                  
                
                </td>
            	<td>itemsub_parent_item_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				
					

					
                       UNIQUE#1
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                  
                  <a href="#public.table.item">public.item.item_id</a>
                  
                
                </td>
            	<td>itemsub_sub_item_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsub_uomratio</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsub_rank</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       itemsub_parent_item_id_key itemsub_parent_item_id
    
       itemsub_sub_item_id_key itemsub_sub_item_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.itemtax">itemtax</a>
		</h2>
        
         <p>This table associates tax types in a specified tax authority for the given item.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.itemtax Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>itemtax_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.item">public.item.item_id</a>
                  
                
                  
                
                </td>
            	<td>itemtax_item_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				
					

					
                       UNIQUE#1
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                  
                  <a href="#public.table.taxauth">public.taxauth.taxauth_id</a>
                  
                
                </td>
            	<td>itemtax_taxauth_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				
					

					
				

				
				
				</i>
				<br><br>This is the tax authority for the specified item and tax type. If NULL any tax authority applies.
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.taxtype">public.taxtype.taxtype_id</a>
                  
                
                </td>
            	<td>itemtax_taxtype_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.itemtrans">itemtrans</a>
		</h2>
        
         <p>Item Transformation information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.itemtrans Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>itemtrans_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemtrans_source_item_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemtrans_target_item_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.itemuom">itemuom</a>
		</h2>
        
         <p>A UOM type relation for a specific conversion.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.itemuom Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>itemuom_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.itemuomconv">public.itemuomconv.itemuomconv_id</a>
                  
                
                </td>
            	<td>itemuom_itemuomconv_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.uomtype">public.uomtype.uomtype_id</a>
                  
                
                </td>
            	<td>itemuom_uomtype_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.itemuomconv">itemuomconv</a>
		</h2>
        
         <p>UOM conversion information. From Unit to To Unit with a value per.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.itemuomconv Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>itemuomconv_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.item">public.item.item_id</a>
                  
                
                </td>
            	<td>itemuomconv_item_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.uom">public.uom.uom_id</a>
                  
                
                </td>
            	<td>itemuomconv_from_uom_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemuomconv_from_value</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.uom">public.uom.uom_id</a>
                  
                
                </td>
            	<td>itemuomconv_to_uom_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemuomconv_to_value</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemuomconv_fractional</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.itemuomconv Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>itemuomconv_uom</td>
                <td>CHECK ((itemuomconv_from_uom_id &lt;&gt; itemuomconv_to_uom_id))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.itemuom">public.itemuom</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.jrnluse">jrnluse</a>
		</h2>
        
         <p>Journal entry and use information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.jrnluse Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>jrnluse_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;jrnluse_jrnluse_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>jrnluse_date</td>
            	<td>timestamp without time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>jrnluse_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>jrnluse_use</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.labelform">labelform</a>
		</h2>
        
         <p>Label Form information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.labelform Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>labelform_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;labelform_labelform_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>labelform_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>labelform_report_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>labelform_perpage</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.lang">lang</a>
		</h2>
        
         <p>Table mapping ISO 639-1 and 639-2 language codes to Qt&#39;s enum QLocale::Language integer values. See http://www.loc.gov/standards/iso639-2/php/code_list.php and the QLocale documentation..</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.lang Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>lang_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>lang_qt_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>lang_abbr3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>ISO 639-2 code for language. Where there is a choice between bibliographic (B) and terminology (T) usage, this value is the T code
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>lang_abbr2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>ISO 639-1 code for language
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>lang_name</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				<br><br>Name of a human language, taken from the ISO 639-2 documentation
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.locale">locale</a>
		</h2>
        
         <p>The locale table holds information required to show data to the user in a localized format. Colors are either names documented by the WWW Consortium or RGB colors. Format for RGB colors is #RGB, #RRGGBB, or #RRRGGGBBB, where the letters R, G, and B stand for hexidecimal digits.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.locale Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>locale_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;locale_locale_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>locale_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>locale_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>locale_lang_file</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>Deprecated
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>locale_dateformat</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>Deprecated
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>locale_currformat</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>Deprecated
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>locale_qtyformat</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>Deprecated
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>locale_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>locale_qtyperformat</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>Deprecated
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>locale_salespriceformat</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>Deprecated
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>locale_extpriceformat</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>Deprecated
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>locale_timeformat</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>Deprecated
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>locale_timestampformat</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>Deprecated
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>local_costformat</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>Deprecated
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>locale_costformat</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>Deprecated
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>locale_purchpriceformat</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>Deprecated
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>locale_uomratioformat</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>Deprecated
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>locale_intervalformat</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>Deprecated
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>locale_lang_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>locale_country_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>locale_error_color</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>Color to use to mark data that require immediate attention.
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>locale_warning_color</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>Color to use to mark data that require attention soon.
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>locale_emphasis_color</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>Color to use to mark data that need to stand out but are not in error.
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>locale_altemphasis_color</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>Color to use to mark data that need to stand out and be differentiated from other emphasized data.
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>locale_expired_color</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>Color to use to mark data that are no longer current.
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>locale_future_color</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>Color to use to mark data that will not be effective until some point in the future.
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>locale_curr_scale</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				<br><br>Number of decimal places to show when displaying Currency values.
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>locale_salesprice_scale</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				<br><br>Number of decimal places to show when displaying Sales Prices.
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>locale_purchprice_scale</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				<br><br>Number of decimal places to show when displaying Purchase Prices.
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>locale_extprice_scale</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				<br><br>Number of decimal places to show when displaying Extended Prices.
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>locale_cost_scale</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				<br><br>Number of decimal places to show when displaying Costs.
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>locale_qty_scale</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				<br><br>Number of decimal places to show when displaying Quantities.
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>locale_qtyper_scale</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				<br><br>Number of decimal places to show when displaying Quantities Per.
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>locale_uomratio_scale</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				<br><br>Number of decimal places to show when displaying UOM Ratios.
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.location">location</a>
		</h2>
        
         <p>Warehouse Location information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.location Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>location_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;location_location_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>location_warehous_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>location_name</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>location_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>location_restrict</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>location_netable</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>location_whsezone_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>location_aisle</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>location_rack</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>location_bin</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.locitem">locitem</a>
		</h2>
        
         <p>Restricted Warehouse Location Allowable Items information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.locitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>locitem_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;locitem_locitem_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>locitem_location_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>locitem_item_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.metasql">metasql</a>
		</h2>
        
         <p>MetaSQL Table</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.metasql Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>metasql_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>metasql_group</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>metasql_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>metasql_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>metasql_query</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>metasql_lastuser</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>metasql_lastupdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.metric">metric</a>
		</h2>
        
         <p>Application-wide settings information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.metric Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>metric_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;metric_metric_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>metric_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>metric_value</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>metric_module</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       metric_name_key metric_name bpchar_ops
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.metricenc">metricenc</a>
		</h2>
        
         <p>Application-wide settings information encrypted data</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.metricenc Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>metricenc_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>metricenc_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>metricenc_value</td>
            	<td>bytea</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>metricenc_module</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       metricenc_name_key metricenc_name
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.msg">msg</a>
		</h2>
        
         <p>System Message information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.msg Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>msg_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;msg_msg_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>msg_posted</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>msg_scheduled</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>msg_text</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>msg_expires</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>msg_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.msguser">msguser</a>
		</h2>
        
         <p>System Message user information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.msguser Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>msguser_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;msguser_msguser_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>msguser_msg_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>msguser_viewed</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>msguser_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.obsolete-poheadcol">obsolete_poheadcol</a>
		</h2>
        
         <p>Backup table to store any data in columns that appear
to have never been implemented and will be dropped.  If no objections surface, this table can be dropped by v. 4.0</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.obsolete_poheadcol Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>pohead_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>pohead_release</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>pohead_changedate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>pohead_prj_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>pohead_ppdcol</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>pohead_specmsg</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.obsolete-poitemcol">obsolete_poitemcol</a>
		</h2>
        
         <p>Backup table to store any data in columns that appear
to have never been implemented and will be dropped.  If no objections surface, this table can be dropped by v. 4.0</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.obsolete_poitemcol Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>poitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poitem_vend_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>poitem_nocharge</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poitem_date_promise</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>poitem_date_lastreceive</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poitem_date_lastreturn</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>poitem_date_closed</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.ophead">ophead</a>
		</h2>
        
         <p>Opportunity header.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.ophead Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>ophead_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ophead_name</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.crmacct">public.crmacct.crmacct_id</a>
                  
                
                </td>
            	<td>ophead_crmacct_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ophead_owner_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.opstage">public.opstage.opstage_id</a>
                  
                
                </td>
            	<td>ophead_opstage_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.opsource">public.opsource.opsource_id</a>
                  
                
                </td>
            	<td>ophead_opsource_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.optype">public.optype.optype_id</a>
                  
                
                </td>
            	<td>ophead_optype_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ophead_probability_prcnt</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ophead_amount</td>
            	<td>numeric(20,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ophead_target_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ophead_actual_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>ophead_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ophead_curr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.todoitem">public.todoitem</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.opsource">opsource</a>
		</h2>
        
         <p>Opportunity Lead Source values.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.opsource Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>opsource_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>opsource_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>opsource_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.ophead">public.ophead</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.opstage">opstage</a>
		</h2>
        
         <p>Opportunity stage values.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.opstage Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>opstage_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>opstage_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>opstage_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>opstage_order</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.ophead">public.ophead</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.optype">optype</a>
		</h2>
        
         <p>Opportunity Type values.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.optype Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>optype_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>optype_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>optype_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.ophead">public.ophead</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.orderhead">orderhead</a>
		</h2>
        
         <p>Union of all orders for use by widgets and stored procedures which process multiple types of order</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.orderhead Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderhead_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderhead_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderhead_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderhead_status</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderhead_orderdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderhead_linecount</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderhead_from_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderhead_from</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderhead_to_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderhead_to</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderhead_curr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderhead_agent_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderhead_shipvia</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT orderhead.orderhead_id
, orderhead.orderhead_type
, orderhead.orderhead_number
, orderhead.orderhead_status
, orderhead.orderhead_orderdate
, orderhead.orderhead_linecount
, orderhead.orderhead_from_id
, orderhead.orderhead_from
, orderhead.orderhead_to_id
, orderhead.orderhead_to
, orderhead.orderhead_curr_id
, orderhead.orderhead_agent_username
, orderhead.orderhead_shipvia 
FROM orderhead
() orderhead
(orderhead_id
     , orderhead_type
     , orderhead_number
     , orderhead_status
     , orderhead_orderdate
     , orderhead_linecount
     , orderhead_from_id
     , orderhead_from
     , orderhead_to_id
     , orderhead_to
     , orderhead_curr_id
     , orderhead_agent_username
     , orderhead_shipvia
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.orderitem">orderitem</a>
		</h2>
        
         <p>Union of all order line items for use by widgets and stored procedures which process sales order and quote line items</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.orderitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderitem_orderhead_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderitem_orderhead_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderitem_linenumber</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderitem_status</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderitem_itemsite_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderitem_scheddate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderitem_qty_ordered</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderitem_qty_shipped</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderitem_qty_received</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderitem_qty_uom_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderitem_qty_invuomratio</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderitem_unitcost</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderitem_unitcost_curr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderitem_freight</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderitem_freight_received</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderitem_freight_curr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT orderitem.orderitem_id
, orderitem.orderitem_orderhead_type
, orderitem.orderitem_orderhead_id
, orderitem.orderitem_linenumber
, orderitem.orderitem_status
, orderitem.orderitem_itemsite_id
, orderitem.orderitem_scheddate
, orderitem.orderitem_qty_ordered
, orderitem.orderitem_qty_shipped
, orderitem.orderitem_qty_received
, orderitem.orderitem_qty_uom_id
, orderitem.orderitem_qty_invuomratio
, orderitem.orderitem_unitcost
, orderitem.orderitem_unitcost_curr_id
, orderitem.orderitem_freight
, orderitem.orderitem_freight_received
, orderitem.orderitem_freight_curr_id 
FROM orderitem
() orderitem
(orderitem_id
     , orderitem_orderhead_type
     , orderitem_orderhead_id
     , orderitem_linenumber
     , orderitem_status
     , orderitem_itemsite_id
     , orderitem_scheddate
     , orderitem_qty_ordered
     , orderitem_qty_shipped
     , orderitem_qty_received
     , orderitem_qty_uom_id
     , orderitem_qty_invuomratio
     , orderitem_unitcost
     , orderitem_unitcost_curr_id
     , orderitem_freight
     , orderitem_freight_received
     , orderitem_freight_curr_id
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.orderseq">orderseq</a>
		</h2>
        
         <p>Configuration information for common numbering sequences</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.orderseq Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>orderseq_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;orderseq_orderseq_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderseq_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderseq_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderseq_table</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderseq_numcol</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.pack">pack</a>
		</h2>
        
         <p>Temporary table for storing information about Orders added to the Packing List Batch</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.pack Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>pack_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>pack_head_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>pack_head_type</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.shiphead">public.shiphead.shiphead_id</a>
                  
                
                </td>
            	<td>pack_shiphead_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>pack_printed</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.pack Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>pack_pack_head_type_check</td>
                <td>CHECK (((pack_head_type = &#39;SO&#39;::text) OR (pack_head_type = &#39;TO&#39;::text)))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.payaropen">payaropen</a>
		</h2>
        
         <p>Credit Card payment to credit memo join table</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.payaropen Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>payaropen_ccpay_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>payaropen_aropen_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>payaropen_amount</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				NOT NULL
				DEFAULT 0.00
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>payaropen_curr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       payaropen_aropen_id_idx payaropen_aropen_id
    
       payaropen_ccpay_id_idx payaropen_ccpay_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.payco">payco</a>
		</h2>
        
         <p>Credit Card payment to sales order join table</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.payco Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.ccpay">public.ccpay.ccpay_id</a>
                  
                
                </td>
            	<td>payco_ccpay_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.cohead">public.cohead.cohead_id</a>
                  
                
                </td>
            	<td>payco_cohead_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>payco_amount</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				NOT NULL
				DEFAULT 0.00
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>payco_curr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       payco_ccpay_id_idx payco_ccpay_id
    
       payco_cohead_id_idx payco_cohead_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.period">period</a>
		</h2>
        
         <p>Accounting Period information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.period Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>period_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>period_start</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>period_end</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>period_closed</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>period_freeze</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>period_initial</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>period_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>period_yearperiod_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>period_quarter</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.budgitem">public.budgitem</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.pkgdep">pkgdep</a>
		</h2>
        
         <p>Package Dependencies list describing which packages are dependent on which other packages.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.pkgdep Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>pkgdep_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.pkghead">public.pkghead.pkghead_id</a>
                  
                
                </td>
            	<td>pkgdep_pkghead_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				<br><br>This is the internal ID of a package which requires at least one other package to be installed first to operate successfully
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.pkghead">public.pkghead.pkghead_id</a>
                  
                
                </td>
            	<td>pkgdep_parent_pkghead_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				<br><br>This is the internal ID of a package which must be installed for the package pointed to by pkgdep_pkghead_id to operate successfully.
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.pkghead">pkghead</a>
		</h2>
        
         <p>Information about non-core Packages added to the database</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.pkghead Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>pkghead_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>pkghead_name</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>pkghead_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>pkghead_version</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>pkghead_developer</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>pkghead_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>pkghead_created</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>pkghead_updated</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>pkghead_indev</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				<br><br>Flag indicating whether the contents of this package may be modified in-place - this package is /in dev/elopment.
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.pkghead Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>pkghead_pkghead_name_check</td>
                <td>CHECK ((length(pkghead_name) &gt; 0))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.pkgdep">public.pkgdep</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.pkgitem">public.pkgitem</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.pkgitem">pkgitem</a>
		</h2>
        
         <p>Detailed information about the contents of non-core Packages added to the database</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.pkgitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>pkgitem_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.pkghead">public.pkghead.pkghead_id</a>
                  
                
                  
                
                  
                
                </td>
            	<td>pkgitem_pkghead_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				
					

					
                       UNIQUE#2
                    
				
					

					
                       UNIQUE#1
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                  
                
                </td>
            	<td>pkgitem_type</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE#2
                    
				
					

					
                       UNIQUE#1
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>pkgitem_item_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>pkgitem_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE#2
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>pkgitem_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.pkgitem Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>pkgitem_pkgitem_type_check</td>
                <td>CHECK (((((((((((((pkgitem_type = &#39;C&#39;::text) OR (pkgitem_type = &#39;D&#39;::text)) OR (pkgitem_type = &#39;F&#39;::text)) OR (pkgitem_type = &#39;G&#39;::text)) OR (pkgitem_type = &#39;I&#39;::text)) OR (pkgitem_type = &#39;M&#39;::text)) OR (pkgitem_type = &#39;P&#39;::text)) OR (pkgitem_type = &#39;R&#39;::text)) OR (pkgitem_type = &#39;S&#39;::text)) OR (pkgitem_type = &#39;T&#39;::text)) OR (pkgitem_type = &#39;U&#39;::text)) OR (pkgitem_type = &#39;V&#39;::text)))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.plancode">plancode</a>
		</h2>
        
         <p>Planner Code information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.plancode Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>plancode_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;plancode_plancode_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>plancode_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>plancode_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>plancode_mpsexplosion</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>plancode_consumefcst</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.itemsite">public.itemsite</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.pohead">pohead</a>
		</h2>
        
         <p>Purchase Order header information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.pohead Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>pohead_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;pohead_pohead_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>pohead_status</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>pohead_number</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>pohead_orderdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.vendinfo">public.vendinfo.vend_id</a>
                  
                
                </td>
            	<td>pohead_vend_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>pohead_fob</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>pohead_shipvia</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>pohead_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>pohead_freight</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>pohead_printed</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>pohead_tax</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.terms">public.terms.terms_id</a>
                  
                
                </td>
            	<td>pohead_terms_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.whsinfo">public.whsinfo.warehous_id</a>
                  
                
                </td>
            	<td>pohead_warehous_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.vendaddrinfo">public.vendaddrinfo.vendaddr_id</a>
                  
                
                </td>
            	<td>pohead_vendaddr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>pohead_agent_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>pohead_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>pohead_saved</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.pohead Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>pohead_pohead_status_check</td>
                <td>CHECK ((((pohead_status = &#39;U&#39;::bpchar) OR (pohead_status = &#39;O&#39;::bpchar)) OR (pohead_status = &#39;C&#39;::bpchar)))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.poitem">poitem</a>
		</h2>
        
         <p>Purchase Order Line Item information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.poitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>poitem_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;poitem_poitem_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poitem_status</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>poitem_pohead_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>poitem_linenumber</td>
            	<td>integer</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>poitem_duedate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.wo">public.wo.wo_id</a>
                  
                
                </td>
            	<td>poitem_wohead_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.itemsite">public.itemsite.itemsite_id</a>
                  
                
                </td>
            	<td>poitem_itemsite_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poitem_vend_item_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>poitem_vend_uom</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poitem_invvenduomratio</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>poitem_qty_ordered</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poitem_qty_received</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				DEFAULT 0.0
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>poitem_qty_returned</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				DEFAULT 0.0
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poitem_qty_vouchered</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				DEFAULT 0.0
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>poitem_unitprice</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poitem_vend_item_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>poitem_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poitem_qty_toreceive</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.expcat">public.expcat.expcat_id</a>
                  
                
                </td>
            	<td>poitem_expcat_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.itemsrc">public.itemsrc.itemsrc_id</a>
                  
                
                </td>
            	<td>poitem_itemsrc_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>poitem_freight</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				NOT NULL
				DEFAULT 0.0
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poitem_freight_received</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				NOT NULL
				DEFAULT 0.0
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>poitem_freight_vouchered</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				NOT NULL
				DEFAULT 0.0
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poitem_soitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.prj">public.prj.prj_id</a>
                  
                
                </td>
            	<td>poitem_prj_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poitem_stdcost</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>poitem_bom_rev_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poitem_boo_rev_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>poitem_manuf_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poitem_manuf_item_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>poitem_manuf_item_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.poitem Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>poitem_poitem_status_check</td>
                <td>CHECK ((((poitem_status = &#39;U&#39;::bpchar) OR (poitem_status = &#39;O&#39;::bpchar)) OR (poitem_status = &#39;C&#39;::bpchar)))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       poitem_itemsite_id_key poitem_itemsite_id
    
       poitem_itemsite_status_duedate_key poitem_itemsite_id, poitem_status, poitem_duedate
    
       poitem_pohead_id_key poitem_pohead_id
    
       poitem_status_key poitem_status
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.porecv">porecv</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.porecv Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>porecv_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>porecv_date</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>porecv_ponumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>porecv_itemsite_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>porecv_vend_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>porecv_vend_item_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>porecv_vend_item_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>porecv_vend_uom</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>porecv_qty</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>porecv_posted</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>porecv_invoiced</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>porecv_trans_usr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>porecv_poitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>porecv_linenumber</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>porecv_purchcost</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>porecv_vohead_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>porecv_recvcost</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>porecv_duedate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>porecv_agent_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>porecv_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>porecv_freight</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>porecv_curr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>porecv_gldistdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>porecv_voitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>porecv_value</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT recv.recv_id AS porecv_id
, recv.recv_date AS porecv_date
, recv.recv_order_number AS porecv_ponumber
, recv.recv_itemsite_id AS porecv_itemsite_id
, recv.recv_vend_id AS porecv_vend_id
, recv.recv_vend_item_number AS porecv_vend_item_number
, recv.recv_vend_item_descrip AS porecv_vend_item_descrip
, recv.recv_vend_uom AS porecv_vend_uom
, recv.recv_qty AS porecv_qty
, recv.recv_posted AS porecv_posted
, recv.recv_invoiced AS porecv_invoiced
, (pg_user.usesysid)::integer AS porecv_trans_usr_id
, recv.recv_orderitem_id AS porecv_poitem_id
, NULL::integer AS porecv_linenumber
, recv.recv_purchcost AS porecv_purchcost
, recv.recv_vohead_id AS porecv_vohead_id
, recv.recv_recvcost AS porecv_recvcost
, recv.recv_duedate AS porecv_duedate
, recv.recv_agent_username AS porecv_agent_username
, recv.recv_notes AS porecv_notes
, recv.recv_freight AS porecv_freight
, recv.recv_freight_curr_id AS porecv_curr_id
, recv.recv_gldistdate AS porecv_gldistdate
, recv.recv_voitem_id AS porecv_voitem_id
, recv.recv_value AS porecv_value 
FROM (recv 
LEFT JOIN pg_user 
    ON (
           (recv.recv_trans_usr_name = 
                 (pg_user.usename)::text
           )
     )
)
WHERE (recv.recv_order_type = &#39;PO&#39;::text);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.poreject">poreject</a>
		</h2>
        
         <p>Purchase Order Return information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.poreject Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>poreject_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;poreject_poreject_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poreject_date</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>poreject_ponumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poreject_itemsite_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>poreject_vend_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poreject_vend_item_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>poreject_vend_item_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poreject_vend_uom</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>poreject_qty</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poreject_posted</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>poreject_rjctcode_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poreject_trans_usr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>poreject_poitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poreject_invoiced</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>poreject_vohead_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poreject_agent_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>poreject_voitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>poreject_value</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.potype">potype</a>
		</h2>
        
         <p>Purchase Order Type information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.potype Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>potype_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>potype_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>potype_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.pr">pr</a>
		</h2>
        
         <p>Purchase Request information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.pr Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>pr_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;pr_pr_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>pr_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>pr_subnumber</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>pr_status</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>pr_order_type</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>pr_order_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>pr_poitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>pr_duedate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>pr_itemsite_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>pr_qtyreq</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>pr_prj_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.prftcntr">prftcntr</a>
		</h2>
        
         <p>Profit Center information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.prftcntr Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>prftcntr_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>prftcntr_number</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>prftcntr_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.priv">priv</a>
		</h2>
        
         <p>System Privilege information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.priv Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>priv_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;priv_priv_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>priv_module</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>priv_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>priv_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.prj">prj</a>
		</h2>
        
         <p>Project information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.prj Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>prj_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>prj_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>prj_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>prj_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>prj_status</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>prj_so</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>prj_wo</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>prj_po</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>prj_owner_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>prj_usr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>prj_start_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>prj_due_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>prj_assigned_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>prj_completed_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.cohead">public.cohead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.poitem">public.poitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.quhead">public.quhead</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.prjtask">prjtask</a>
		</h2>
        
         <p>Project Task information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.prjtask Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>prjtask_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>prjtask_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>prjtask_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>prjtask_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>prjtask_prj_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>prjtask_anyuser</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>prjtask_status</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>prjtask_hours_budget</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>prjtask_hours_actual</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>prjtask_exp_budget</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>prjtask_exp_actual</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>prjtask_owner_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>prjtask_usr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>prjtask_start_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>prjtask_due_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>prjtask_assigned_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>prjtask_completed_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.prjtaskuser">prjtaskuser</a>
		</h2>
        
         <p>Project Task user information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.prjtaskuser Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>prjtaskuser_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>prjtaskuser_prjtask_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>prjtaskuser_usr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.prodcat">prodcat</a>
		</h2>
        
         <p>Product Category information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.prodcat Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>prodcat_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;prodcat_prodcat_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>prodcat_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>prodcat_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.prospect">prospect</a>
		</h2>
        
         <p>Prospect Information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.prospect Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>prospect_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval(&#39;cust_cust_id_seq&#39;::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>prospect_active</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>prospect_number</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>prospect_name</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.cntct">public.cntct.cntct_id</a>
                  
                
                </td>
            	<td>prospect_cntct_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.taxauth">public.taxauth.taxauth_id</a>
                  
                
                </td>
            	<td>prospect_taxauth_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>prospect_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>prospect_created</td>
            	<td>date</td>
                <td><i>
				

				NOT NULL
				DEFAULT (&#39;now&#39;::text)::date
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.salesrep">public.salesrep.salesrep_id</a>
                  
                
                </td>
            	<td>prospect_salesrep_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.whsinfo">public.whsinfo.warehous_id</a>
                  
                
                </td>
            	<td>prospect_warehous_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.crmacct">public.crmacct</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.quhead">quhead</a>
		</h2>
        
         <p>Quote header information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.quhead Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>quhead_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;quhead_quhead_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>quhead_number</td>
            	<td>integer</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_cust_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_quotedate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.shiptoinfo">public.shiptoinfo.shipto_id</a>
                  
                
                </td>
            	<td>quhead_shipto_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_shiptoname</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_shiptoaddress1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_shiptoaddress2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_shiptoaddress3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_shiptocity</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_shiptostate</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_shiptozipcode</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_shiptophone</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.salesrep">public.salesrep.salesrep_id</a>
                  
                
                </td>
            	<td>quhead_salesrep_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_tax_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				<br><br>Deprecated in 2.1 and moved to quitem table.
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.terms">public.terms.terms_id</a>
                  
                
                </td>
            	<td>quhead_terms_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_origin</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_freight</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_ordercomments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_shipcomments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_billtoname</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_billtoaddress1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_billtoaddress2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_billtoaddress3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_billtocity</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_billtostate</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_billtozip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_commission</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_custponumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_fob</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_shipvia</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.whsinfo">public.whsinfo.warehous_id</a>
                  
                
                </td>
            	<td>quhead_warehous_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_packdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.prj">public.prj.prj_id</a>
                  
                
                </td>
            	<td>quhead_prj_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_misc</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.accnt">public.accnt.accnt_id</a>
                  
                
                </td>
            	<td>quhead_misc_accnt_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_misc_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_billtocountry</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_shiptocountry</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>quhead_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.taxauth">public.taxauth.taxauth_id</a>
                  
                
                </td>
            	<td>quhead_taxauth_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_imported</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_expire</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_calcfreight</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_shipto_cntct_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_shipto_cntct_honorific</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_shipto_cntct_first_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_shipto_cntct_middle</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_shipto_cntct_last_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_shipto_cntct_suffix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_shipto_cntct_phone</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_shipto_cntct_title</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_shipto_cntct_fax</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_shipto_cntct_email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_billto_cntct_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_billto_cntct_honorific</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_billto_cntct_first_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_billto_cntct_middle</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_billto_cntct_last_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_billto_cntct_suffix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_billto_cntct_phone</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_billto_cntct_title</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quhead_billto_cntct_fax</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quhead_billto_cntct_email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.quhead Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>quhead_check</td>
                <td>CHECK ((((quhead_misc = (0)::numeric) AND (quhead_misc_accnt_id IS NULL)) OR ((quhead_misc &lt;&gt; (0)::numeric) AND (quhead_misc_accnt_id IS NOT NULL))))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.quitem">quitem</a>
		</h2>
        
         <p>Quote Line Item information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.quitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>quitem_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;quitem_quitem_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quitem_quhead_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quitem_linenumber</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quitem_itemsite_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quitem_scheddate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quitem_qtyord</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quitem_unitcost</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quitem_price</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quitem_custprice</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quitem_memo</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quitem_custpn</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quitem_createorder</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quitem_order_warehous_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quitem_item_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quitem_prcost</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.tax">public.tax.tax_id</a>
                  
                
                </td>
            	<td>quitem_tax_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quitem_imported</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.uom">public.uom.uom_id</a>
                  
                
                </td>
            	<td>quitem_qty_uom_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quitem_qty_invuomratio</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.uom">public.uom.uom_id</a>
                  
                
                </td>
            	<td>quitem_price_uom_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>quitem_price_invuomratio</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>quitem_promdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.rcalitem">rcalitem</a>
		</h2>
        
         <p>Relative Calendar Item information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.rcalitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>rcalitem_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;xcalitem_xcalitem_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>rcalitem_calhead_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>rcalitem_offsettype</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>rcalitem_offsetcount</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>rcalitem_periodtype</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>rcalitem_periodcount</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>rcalitem_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.recv">recv</a>
		</h2>
        
         <p>Information about Received Orders.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.recv Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>recv_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>recv_order_type</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>recv_order_number</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>recv_orderitem_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>recv_agent_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.itemsite">public.itemsite.itemsite_id</a>
                  
                
                </td>
            	<td>recv_itemsite_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.vendinfo">public.vendinfo.vend_id</a>
                  
                
                </td>
            	<td>recv_vend_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>recv_vend_item_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>recv_vend_item_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>recv_vend_uom</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>recv_purchcost</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>recv_purchcost_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>recv_duedate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>recv_qty</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>recv_recvcost</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>recv_recvcost_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>recv_freight</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>recv_freight_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>recv_date</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>recv_value</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>recv_posted</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>recv_invoiced</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.vohead">public.vohead.vohead_id</a>
                  
                
                </td>
            	<td>recv_vohead_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.voitem">public.voitem.voitem_id</a>
                  
                
                </td>
            	<td>recv_voitem_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>recv_trans_usr_name</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				DEFAULT &quot;current_user&quot;()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>recv_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>recv_gldistdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.recv">public.recv.recv_id</a>
                  
                
                </td>
            	<td>recv_splitfrom_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.recv Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>recv_recv_order_type_check</td>
                <td>CHECK ((((recv_order_type = &#39;PO&#39;::text) OR (recv_order_type = &#39;RA&#39;::text)) OR (recv_order_type = &#39;TO&#39;::text)))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.recv">public.recv</a></li>
			</ul>
		
		

    <!-- Indexes -->
    
       recv_ordertypeid_idx recv_order_type, recv_orderitem_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.remitto">remitto</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.remitto Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>remitto_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>remitto_address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>remitto_address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>remitto_address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>remitto_citystatezip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>remitto_country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>remitto_phone</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT (
SELECT metric.metric_value 
  FROM metric 
 WHERE (metric.metric_name = &#39;remitto_name&#39;::text)
) AS remitto_name
, (
SELECT metric.metric_value 
  FROM metric 
 WHERE (metric.metric_name = &#39;remitto_address1&#39;::text)
) AS remitto_address1
, (
SELECT metric.metric_value 
  FROM metric 
 WHERE (metric.metric_name = &#39;remitto_address2&#39;::text)
) AS remitto_address2
, (
SELECT metric.metric_value 
  FROM metric 
 WHERE (metric.metric_name = &#39;remitto_address3&#39;::text)
) AS remitto_address3
, (
     (
           (
                 (
                       (
                        SELECT metric.metric_value 
                          FROM metric 
                         WHERE (metric.metric_name = &#39;remitto_city&#39;::text)
                       ) || &#39;  &#39;::text
                 ) || 
                 (
                  SELECT metric.metric_value 
                    FROM metric 
                   WHERE (metric.metric_name = &#39;remitto_state&#39;::text)
                 )
           ) || &#39;  &#39;::text
     ) || 
     (
      SELECT metric.metric_value 
        FROM metric 
       WHERE (metric.metric_name = &#39;remitto_zipcode&#39;::text)
     )
) AS remitto_citystatezip
, (
SELECT metric.metric_value 
  FROM metric 
 WHERE (metric.metric_name = &#39;remitto_country&#39;::text)
) AS remitto_country
, (
SELECT metric.metric_value 
  FROM metric 
 WHERE (metric.metric_name = &#39;remitto_phone&#39;::text)
) AS remitto_phone;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.report">report</a>
		</h2>
        
         <p>Report definition information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.report Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>report_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;report_report_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>report_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>report_sys</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>report_source</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>report_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>report_grade</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>report_loaddate</td>
            	<td>timestamp without time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.rjctcode">rjctcode</a>
		</h2>
        
         <p>Reject Code information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.rjctcode Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>rjctcode_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;rjctcode_rjctcode_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>rjctcode_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>rjctcode_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.rsncode">rsncode</a>
		</h2>
        
         <p>Debit/Credit Memo Reason Code information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.rsncode Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>rsncode_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>rsncode_code</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>rsncode_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.sale">sale</a>
		</h2>
        
         <p>Sale information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.sale Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>sale_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;sale_sale_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>sale_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>sale_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>sale_ipshead_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>sale_startdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>sale_enddate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.salesaccnt">salesaccnt</a>
		</h2>
        
         <p>Sales Account assignment information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.salesaccnt Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>salesaccnt_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;salesaccnt_salesaccnt_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>salesaccnt_custtype_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>salesaccnt_prodcat_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>salesaccnt_warehous_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>salesaccnt_sales_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>salesaccnt_credit_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>salesaccnt_cos_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>salesaccnt_custtype</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>salesaccnt_prodcat</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.accnt">public.accnt.accnt_id</a>
                  
                
                </td>
            	<td>salesaccnt_returns_accnt_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.accnt">public.accnt.accnt_id</a>
                  
                
                </td>
            	<td>salesaccnt_cor_accnt_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.accnt">public.accnt.accnt_id</a>
                  
                
                </td>
            	<td>salesaccnt_cow_accnt_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       salesaccnt_prodcat_id_idx salesaccnt_prodcat_id
    
       salesaccnt_warehous_id_idx salesaccnt_warehous_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.salescat">salescat</a>
		</h2>
        
         <p>Sales Category information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.salescat Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>salescat_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>salescat_active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>salescat_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>salescat_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>salescat_sales_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>salescat_prepaid_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>salescat_ar_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.saleshistory">saleshistory</a>
		</h2>
        
         <p>Single point for sales history calculations.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.saleshistory Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_cust_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_itemsite_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_shipdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_shipvia</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_ordernumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_orderdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_invcnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_invcdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_qtyshipped</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_unitprice</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_shipto_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_salesrep_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_duedate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_imported</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_billtoname</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_billtoaddress1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_billtoaddress2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_billtoaddress3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_billtocity</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_billtostate</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_billtozip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_shiptoname</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_shiptoaddress1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_shiptoaddress2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_shiptoaddress3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_shiptocity</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_shiptostate</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_shiptozip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_commission</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_commissionpaid</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_unitcost</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_misc_type</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_misc_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_misc_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_tax_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_doctype</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_promisedate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_ponumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_curr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_sequence</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_taxtype_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_tax_pcta</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_tax_pctb</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_tax_pctc</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_tax_ratea</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_tax_rateb</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_tax_ratec</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>invoicenumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cust_curr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cust_custtype_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>custtype_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>salesrep_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>salesrep_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipzone_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipzone_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemsite_warehous_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemsite_item_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>item_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_descrip1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>itemdescription</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>item_prodcat_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>basecommission</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>baseunitprice</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>custunitprice</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>extprice</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>baseextprice</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>custextprice</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>extcost</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>currabbr</td>
            	<td>character varying</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_invcdate_xtnullrole</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cohist_qtyshipped_xtnumericrole</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_unitprice_xtnumericrole</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>baseunitprice_xtnumericrole</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>custunitprice_xtnumericrole</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>custextprice_xtnumericrole</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>extprice_xtnumericrole</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>baseextprice_xtnumericrole</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_unitcost_xtnumericrole</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>extcost_xtnumericrole</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_commission_xtnumericrole</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>basecommission_xtnumericrole</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>cohist_qtyshipped_xttotalrole</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>custextprice_xttotalrole</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>baseextprice_xttotalrole</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>extcost_xttotalrole</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>basecommission_xttotalrole</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT cohist.cohist_id
, cohist.cohist_cust_id
, cohist.cohist_itemsite_id
, cohist.cohist_shipdate
, cohist.cohist_shipvia
, cohist.cohist_ordernumber
, cohist.cohist_orderdate
, cohist.cohist_invcnumber
, cohist.cohist_invcdate
, cohist.cohist_qtyshipped
, cohist.cohist_unitprice
, cohist.cohist_shipto_id
, cohist.cohist_salesrep_id
, cohist.cohist_duedate
, cohist.cohist_imported
, cohist.cohist_billtoname
, cohist.cohist_billtoaddress1
, cohist.cohist_billtoaddress2
, cohist.cohist_billtoaddress3
, cohist.cohist_billtocity
, cohist.cohist_billtostate
, cohist.cohist_billtozip
, cohist.cohist_shiptoname
, cohist.cohist_shiptoaddress1
, cohist.cohist_shiptoaddress2
, cohist.cohist_shiptoaddress3
, cohist.cohist_shiptocity
, cohist.cohist_shiptostate
, cohist.cohist_shiptozip
, cohist.cohist_commission
, cohist.cohist_commissionpaid
, cohist.cohist_unitcost
, cohist.cohist_misc_type
, cohist.cohist_misc_descrip
, cohist.cohist_misc_id
, cohist.cohist_tax_id
, cohist.cohist_doctype
, cohist.cohist_promisedate
, cohist.cohist_ponumber
, cohist.cohist_curr_id
, cohist.cohist_sequence
, cohist.cohist_taxtype_id
, cohist.cohist_tax_pcta
, cohist.cohist_tax_pctb
, cohist.cohist_tax_pctc
, cohist.cohist_tax_ratea
, cohist.cohist_tax_rateb
, cohist.cohist_tax_ratec
, CASE WHEN 
(cohist.cohist_invcnumber = &#39;-1&#39;::text) THEN &#39;Credit&#39;::text ELSE cohist.cohist_invcnumber END AS invoicenumber
, cust.cust_id
, cust.cust_number
, cust.cust_name
, cust.cust_curr_id
, cust.cust_custtype_id
, custtype.custtype_code
, salesrep.salesrep_number
, salesrep.salesrep_name
, shipzone.shipzone_id
, shipzone.shipzone_name
, itemsite.itemsite_warehous_id
, itemsite.itemsite_item_id
, item.item_number
, item.item_descrip1
, (
     (item.item_descrip1 || &#39; &#39;::text) || item.item_descrip2
) AS itemdescription
, item.item_prodcat_id
, site.warehous_code
, currtobase
(cohist.cohist_curr_id
     , cohist.cohist_commission
     , cohist.cohist_invcdate
) AS basecommission
, currtobase
(cohist.cohist_curr_id
     , cohist.cohist_unitprice
     , cohist.cohist_invcdate
) AS baseunitprice
, currtocurr
(cohist.cohist_curr_id
     , cust.cust_curr_id
     , cohist.cohist_unitprice
     , cohist.cohist_invcdate
) AS custunitprice
, round
(
     (cohist.cohist_qtyshipped * cohist.cohist_unitprice)
     , 2
) AS extprice
, round
(
     (cohist.cohist_qtyshipped * currtobase
           (cohist.cohist_curr_id
                 , cohist.cohist_unitprice
                 , cohist.cohist_invcdate
           )
     )
     , 2
) AS baseextprice
, round
(
     (cohist.cohist_qtyshipped * currtocurr
           (cohist.cohist_curr_id
                 , cust.cust_curr_id
                 , cohist.cohist_unitprice
                 , cohist.cohist_invcdate
           )
     )
     , 2
) AS custextprice
, round
(
     (cohist.cohist_qtyshipped * cohist.cohist_unitcost)
     , 4
) AS extcost
, currconcat
(cohist.cohist_curr_id) AS currabbr
,&#39;Return&#39;::text AS cohist_invcdate_xtnullrole
,&#39;qty&#39;::text AS cohist_qtyshipped_xtnumericrole
,&#39;salesprice&#39;::text AS cohist_unitprice_xtnumericrole
,&#39;salesprice&#39;::text AS baseunitprice_xtnumericrole
,&#39;curr&#39;::text AS custunitprice_xtnumericrole
,&#39;curr&#39;::text AS custextprice_xtnumericrole
,&#39;curr&#39;::text AS extprice_xtnumericrole
,&#39;curr&#39;::text AS baseextprice_xtnumericrole
,&#39;cost&#39;::text AS cohist_unitcost_xtnumericrole
,&#39;curr&#39;::text AS extcost_xtnumericrole
,&#39;curr&#39;::text AS cohist_commission_xtnumericrole
,&#39;curr&#39;::text AS basecommission_xtnumericrole
, 0 AS cohist_qtyshipped_xttotalrole
, 0 AS custextprice_xttotalrole
, 0 AS baseextprice_xttotalrole
, 0 AS extcost_xttotalrole
, 0 AS basecommission_xttotalrole 
FROM (
     (
           (
                 (
                       (
                             (
                                   (
                                         (cohist 
                                            JOIN cust 
                                              ON (
                                                     (cust.cust_id = cohist.cohist_cust_id)
                                               )
                                         )
                                      JOIN custtype 
                                        ON (
                                               (custtype.custtype_id = cust.cust_custtype_id)
                                         )
                                   )
                                JOIN salesrep 
                                  ON (
                                         (salesrep.salesrep_id = cohist.cohist_salesrep_id)
                                   )
                             )
                          JOIN itemsite 
                            ON (
                                   (itemsite.itemsite_id = cohist.cohist_itemsite_id)
                             )
                       )
                    JOIN site
                       () site
                       (warehous_id
                             , warehous_code
                             , warehous_descrip
                             , warehous_fob
                             , warehous_active
                             , warehous_counttag_prefix
                             , warehous_counttag_number
                             , warehous_bol_prefix
                             , warehous_bol_number
                             , warehous_shipping
                             , warehous_useslips
                             , warehous_usezones
                             , warehous_aislesize
                             , warehous_aislealpha
                             , warehous_racksize
                             , warehous_rackalpha
                             , warehous_binsize
                             , warehous_binalpha
                             , warehous_locationsize
                             , warehous_locationalpha
                             , warehous_enforcearbl
                             , warehous_default_accnt_id
                             , warehous_shipping_commission
                             , warehous_cntct_id
                             , warehous_addr_id
                             , warehous_taxauth_id
                             , warehous_transit
                             , warehous_shipform_id
                             , warehous_shipvia_id
                             , warehous_shipcomments
                             , warehous_costcat_id
                             , warehous_sitetype_id
                       )
                      ON (
                             (site.warehous_id = itemsite.itemsite_warehous_id)
                       )
                 )
              JOIN item 
                ON (
                       (item.item_id = itemsite.itemsite_item_id)
                 )
           )
   LEFT JOIN shipto 
          ON (
                 (shipto.shipto_id = cohist.cohist_shipto_id)
           )
     )
LEFT JOIN shipzone 
    ON (
           (shipzone.shipzone_id = shipto.shipto_shipzone_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.salesquoteitem">salesquoteitem</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.salesquoteitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderitem_orderhead_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderitem_orderhead_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderitem_linenumber</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderitem_status</td>
            	<td>bpchar</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderitem_itemsite_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderitem_scheddate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderitem_qty_ordered</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderitem_qty_shipped</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderitem_qty_received</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderitem_qty_uom_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderitem_qty_invuomratio</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderitem_unitcost</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderitem_unitcost_curr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderitem_freight</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderitem_freight_received</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>orderitem_freight_curr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT coitem.coitem_id AS orderitem_id
,&#39;SO&#39; AS orderitem_orderhead_type
, coitem.coitem_cohead_id AS orderitem_orderhead_id
, coitem.coitem_linenumber AS orderitem_linenumber
, coitem.coitem_status AS orderitem_status
, coitem.coitem_itemsite_id AS orderitem_itemsite_id
, coitem.coitem_scheddate AS orderitem_scheddate
, coitem.coitem_qtyord AS orderitem_qty_ordered
, coitem.coitem_qtyshipped AS orderitem_qty_shipped
, coitem.coitem_qtyreturned AS orderitem_qty_received
, coitem.coitem_qty_uom_id AS orderitem_qty_uom_id
, coitem.coitem_qty_invuomratio AS orderitem_qty_invuomratio
, coitem.coitem_unitcost AS orderitem_unitcost
, basecurrid
() AS orderitem_unitcost_curr_id
, NULL::&quot;unknown&quot; AS orderitem_freight
, NULL::&quot;unknown&quot; AS orderitem_freight_received
, basecurrid
() AS orderitem_freight_curr_id 
FROM coitem 
UNIONSELECT quitem.quitem_id AS orderitem_id
,&#39;QU&#39; AS orderitem_orderhead_type
, quitem.quitem_quhead_id AS orderitem_orderhead_id
, quitem.quitem_linenumber AS orderitem_linenumber
,&#39;O&#39; AS orderitem_status
, quitem.quitem_itemsite_id AS orderitem_itemsite_id
, quitem.quitem_scheddate AS orderitem_scheddate
, quitem.quitem_qtyord AS orderitem_qty_ordered
, 0 AS orderitem_qty_shipped
, 0 AS orderitem_qty_received
, quitem.quitem_qty_uom_id AS orderitem_qty_uom_id
, quitem.quitem_qty_invuomratio AS orderitem_qty_invuomratio
, quitem.quitem_unitcost AS orderitem_unitcost
, basecurrid
() AS orderitem_unitcost_curr_id
, NULL::&quot;unknown&quot; AS orderitem_freight
, NULL::&quot;unknown&quot; AS orderitem_freight_received
, basecurrid
() AS orderitem_freight_curr_id 
FROM quitem;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.salesrep">salesrep</a>
		</h2>
        
         <p>Sales Representative information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.salesrep Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>salesrep_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;salesrep_salesrep_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>salesrep_active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>salesrep_number</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>salesrep_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>salesrep_commission</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>salesrep_method</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.emp">public.emp.emp_id</a>
                  
                
                </td>
            	<td>salesrep_emp_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.cohead">public.cohead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.custinfo">public.custinfo</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.prospect">public.prospect</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.quhead">public.quhead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.shiptoinfo">public.shiptoinfo</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.script">script</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.script Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>script_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>script_name</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>script_order</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>script_enabled</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>script_source</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>script_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.sequence">sequence</a>
		</h2>
        
         <p>Pre-populated list of sequence numbers (1-1000) used for printing Labels and other uses</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.sequence Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>sequence_value</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.shift">shift</a>
		</h2>
        
         <p>List of work Shifts</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.shift Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>shift_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shift_number</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shift_name</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.emp">public.emp</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.shipchrg">shipchrg</a>
		</h2>
        
         <p>Shipping Charge information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.shipchrg Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>shipchrg_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipchrg_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipchrg_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipchrg_custfreight</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipchrg_handling</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.shiphead">public.shiphead</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.shipdata">shipdata</a>
		</h2>
        
         <p>Shipping Interface information - note that the shipdata_cohead_nember is text and not int.  That is due to ODBC chopping off during the transfer</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.shipdata Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>shipdata_cohead_number</td>
            	<td>text</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>shipdata_cosmisc_tracknum</td>
            	<td>text</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>shipdata_cosmisc_packnum_tracknum</td>
            	<td>text</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipdata_weight</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipdata_base_freight</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipdata_total_freight</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipdata_shipper</td>
            	<td>text</td>
                <td><i>
				

				
				DEFAULT &#39;UPS&#39;::text
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipdata_billing_option</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipdata_package_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>shipdata_void_ind</td>
            	<td>character(1)</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipdata_lastupdated</td>
            	<td>timestamp without time zone</td>
                <td><i>
				

				NOT NULL
				DEFAULT (&#39;now&#39;::text)::timestamp(6) with time zone
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.shiphead">public.shiphead.shiphead_number</a>
                  
                
                </td>
            	<td>shipdata_shiphead_number</td>
            	<td>text</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>shipdata_base_freight_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>shipdata_total_freight_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       shipdata_cohead_number_idx shipdata_cohead_number
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.shipdatasum">shipdatasum</a>
		</h2>
        
         <p>Shipping Interface information.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.shipdatasum Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>shipdatasum_cohead_number</td>
            	<td>text</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>shipdatasum_cosmisc_tracknum</td>
            	<td>text</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>shipdatasum_cosmisc_packnum_tracknum</td>
            	<td>text</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipdatasum_weight</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipdatasum_base_freight</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipdatasum_total_freight</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipdatasum_shipper</td>
            	<td>text</td>
                <td><i>
				

				
				DEFAULT &#39;UPS&#39;::text
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipdatasum_billing_option</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipdatasum_package_type</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipdatasum_lastupdated</td>
            	<td>timestamp without time zone</td>
                <td><i>
				

				NOT NULL
				DEFAULT (&#39;now&#39;::text)::timestamp(6) with time zone
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipdatasum_shipped</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.shiphead">public.shiphead.shiphead_number</a>
                  
                
                </td>
            	<td>shipdatasum_shiphead_number</td>
            	<td>text</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>shipdatasum_base_freight_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>shipdatasum_total_freight_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       shipdatasum_cohead_number_idx shipdatasum_cohead_number
    
       shipdatasum_cosmisc_tracknum_idx shipdatasum_cosmisc_tracknum
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.shipform">shipform</a>
		</h2>
        
         <p>Shipping Form information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.shipform Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>shipform_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;shipform_shipform_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>shipform_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipform_report_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.cohead">public.cohead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.custinfo">public.custinfo</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.shiphead">public.shiphead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.shiptoinfo">public.shiptoinfo</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.whsinfo">public.whsinfo</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.shiphead">shiphead</a>
		</h2>
        
         <p>General information about Shipments</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.shiphead Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>shiphead_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shiphead_order_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shiphead_order_type</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>shiphead_number</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shiphead_shipvia</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shiphead_freight</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				NOT NULL
				DEFAULT 0.0
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>shiphead_freight_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shiphead_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shiphead_shipped</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shiphead_shipdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.shipchrg">public.shipchrg.shipchrg_id</a>
                  
                
                </td>
            	<td>shiphead_shipchrg_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.shipform">public.shipform.shipform_id</a>
                  
                
                </td>
            	<td>shiphead_shipform_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shiphead_sfstatus</td>
            	<td>character(1)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shiphead_tracknum</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.shiphead Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>shiphead_shiphead_order_type_check</td>
                <td>CHECK (((shiphead_order_type = &#39;SO&#39;::text) OR (shiphead_order_type = &#39;TO&#39;::text)))</td>
            </tr>
			
            <tr class="tr1">
				<td>shiphead_shiphead_sfstatus_check</td>
                <td>CHECK ((((shiphead_sfstatus = &#39;D&#39;::bpchar) OR (shiphead_sfstatus = &#39;N&#39;::bpchar)) OR (shiphead_sfstatus = &#39;P&#39;::bpchar)))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.pack">public.pack</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.shipdata">public.shipdata</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.shipdatasum">public.shipdatasum</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.shipitem">public.shipitem</a></li>
			</ul>
		
		

    <!-- Indexes -->
    
       shiphead_order_id_idx shiphead_order_id
    
       shiphead_shipped_idx shiphead_shipped
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.shipitem">shipitem</a>
		</h2>
        
         <p>Information about Shipment Line Items</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.shipitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>shipitem_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipitem_orderitem_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.shiphead">public.shiphead.shiphead_id</a>
                  
                
                </td>
            	<td>shipitem_shiphead_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipitem_qty</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipitem_shipped</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipitem_shipdate</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipitem_transdate</td>
            	<td>timestamp with time zone</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipitem_trans_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipitem_invoiced</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.invcitem">public.invcitem.invcitem_id</a>
                  
                
                </td>
            	<td>shipitem_invcitem_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipitem_value</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.invhist">public.invhist.invhist_id</a>
                  
                
                </td>
            	<td>shipitem_invhist_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       shipitem_orderitem_id_idx shipitem_orderitem_id
    
       shipitem_shiphead_id_idx shipitem_shiphead_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.shipto">shipto</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.shipto Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_cust_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_zipcode</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_taxcode_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_salesrep_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_phone</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_shipcomments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_contact</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_fax</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_shipzone_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_shipvia</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_commission</td>
            	<td>numeric(10,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_shipform_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_shipchrg_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_default</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_num</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_ediprofile_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT shiptoinfo.shipto_id
, shiptoinfo.shipto_cust_id
, shiptoinfo.shipto_name
, m.addr_line1 AS shipto_address1
, m.addr_line2 AS shipto_address2
, m.addr_line3 AS shipto_address3
, m.addr_city AS shipto_city
, m.addr_state AS shipto_state
, m.addr_postalcode AS shipto_zipcode
, shiptoinfo.shipto_taxcode_id
, shiptoinfo.shipto_salesrep_id
, c1.cntct_phone AS shipto_phone
, shiptoinfo.shipto_comments
, shiptoinfo.shipto_shipcomments
, btrim
(
     (
           (c1.cntct_first_name || &#39; &#39;::text) || c1.cntct_last_name
     )
) AS shipto_contact
, c1.cntct_fax AS shipto_fax
, c1.cntct_email AS shipto_email
, shiptoinfo.shipto_shipzone_id
, shiptoinfo.shipto_shipvia
, shiptoinfo.shipto_commission
, shiptoinfo.shipto_shipform_id
, shiptoinfo.shipto_shipchrg_id
, shiptoinfo.shipto_active
, shiptoinfo.shipto_default
, shiptoinfo.shipto_num
, shiptoinfo.shipto_ediprofile_id
, m.addr_country AS shipto_country 
FROM (
     (shiptoinfo 
   LEFT JOIN cntct c1 
          ON (
                 (shiptoinfo.shipto_cntct_id = c1.cntct_id)
           )
     )
LEFT JOIN addr m 
    ON (
           (shiptoinfo.shipto_addr_id = m.addr_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.shiptoinfo">shiptoinfo</a>
		</h2>
        
         <p>Ship-To information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.shiptoinfo Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>shipto_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;shipto_shipto_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                  
                  <a href="#public.table.custinfo">public.custinfo.cust_id</a>
                  
                
                </td>
            	<td>shipto_cust_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_taxcode_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.salesrep">public.salesrep.salesrep_id</a>
                  
                
                  
                  <a href="#public.table.salesrep">public.salesrep.salesrep_id</a>
                  
                
                </td>
            	<td>shipto_salesrep_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_shipcomments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.shipzone">public.shipzone.shipzone_id</a>
                  
                
                </td>
            	<td>shipto_shipzone_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_shipvia</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_commission</td>
            	<td>numeric(10,4)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.shipform">public.shipform.shipform_id</a>
                  
                
                  
                  <a href="#public.table.shipform">public.shipform.shipform_id</a>
                  
                
                </td>
            	<td>shipto_shipform_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_shipchrg_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_active</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_default</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>shipto_num</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipto_ediprofile_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipto_cntct_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.addr">public.addr.addr_id</a>
                  
                
                </td>
            	<td>shipto_addr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.taxauth">public.taxauth.taxauth_id</a>
                  
                
                </td>
            	<td>shipto_taxauth_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.cohead">public.cohead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.quhead">public.quhead</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.shipvia">shipvia</a>
		</h2>
        
         <p>Ship Via information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.shipvia Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>shipvia_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;shipvia_shipvia_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipvia_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipvia_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.whsinfo">public.whsinfo</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.shipzone">shipzone</a>
		</h2>
        
         <p>Shipping Zone information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.shipzone Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>shipzone_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;shipzone_shipzone_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>shipzone_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>shipzone_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.ipsfreight">public.ipsfreight</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.shiptoinfo">public.shiptoinfo</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.sitetype">sitetype</a>
		</h2>
        
         <p>This table is the different types of sites.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.sitetype Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>sitetype_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>sitetype_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>sitetype_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.whsinfo">public.whsinfo</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.soheadlock">soheadlock</a>
		</h2>
        
         <p>Table used to keep track of users who are editing a table so others can not edit it at the same time.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.soheadlock Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.cohead">public.cohead.cohead_id</a>
                  
                
                  
                
                </td>
            	<td>soheadlock_sohead_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>soheadlock_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>soheadlock_procpid</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.sopack">sopack</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.sopack Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>sopack_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>sopack_sohead_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>sopack_printed</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>sopack_cosmisc_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT pack.pack_id AS sopack_id
, pack.pack_head_id AS sopack_sohead_id
, pack.pack_printed AS sopack_printed
, pack.pack_shiphead_id AS sopack_cosmisc_id 
FROM pack 
WHERE (pack.pack_head_type = &#39;SO&#39;::text);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.stdjrnl">stdjrnl</a>
		</h2>
        
         <p>Standard Journal information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.stdjrnl Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>stdjrnl_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>stdjrnl_name</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>stdjrnl_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>stdjrnl_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.stdjrnlgrp">stdjrnlgrp</a>
		</h2>
        
         <p>Standard Journal Group information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.stdjrnlgrp Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>stdjrnlgrp_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>stdjrnlgrp_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>stdjrnlgrp_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.stdjrnlgrpitem">stdjrnlgrpitem</a>
		</h2>
        
         <p>Standard Journal Group Item information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.stdjrnlgrpitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>stdjrnlgrpitem_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>stdjrnlgrpitem_stdjrnl_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>stdjrnlgrpitem_toapply</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>stdjrnlgrpitem_applied</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>stdjrnlgrpitem_effective</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>stdjrnlgrpitem_expires</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>stdjrnlgrpitem_stdjrnlgrp_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.stdjrnlitem">stdjrnlitem</a>
		</h2>
        
         <p>Standard Journal Item information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.stdjrnlitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>stdjrnlitem_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>stdjrnlitem_stdjrnl_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>stdjrnlitem_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>stdjrnlitem_amount</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>stdjrnlitem_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.stdopn">stdopn</a>
		</h2>
        
         <p>Standard Operation information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.stdopn Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>stdopn_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;stdopn_stdopn_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>stdopn_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>stdopn_descrip1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>stdopn_descrip2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>stdopn_wrkcnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>stdopn_toolref</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>stdopn_stdtimes</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>stdopn_reportsetup</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>stdopn_reportrun</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>stdopn_rnqtyper</td>
            	<td>numeric(20,8)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>stdopn_produom</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>stdopn_sucosttype</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>stdopn_rncosttype</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>stdopn_invproduomratio</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>stdopn_instructions</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>stdopn_sutime</td>
            	<td>numeric(10,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>stdopn_rntime</td>
            	<td>numeric(10,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.subaccnt">subaccnt</a>
		</h2>
        
         <p>Subaccount information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.subaccnt Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>subaccnt_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>subaccnt_number</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>subaccnt_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.subaccnttype">subaccnttype</a>
		</h2>
        
         <p>User defined Sub Account Types.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.subaccnttype Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>subaccnttype_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>subaccnttype_accnt_type</td>
            	<td>character(1)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>subaccnttype_code</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>subaccnttype_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.tax">tax</a>
		</h2>
        
         <p>Tax information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.tax Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>tax_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;tax_tax_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>tax_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tax_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>tax_ratea</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tax_sales_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>tax_freight</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				<br><br>Deprecated in 2.1 and moved to taxsel table where taxtype is the system defined Freight.
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tax_cumulative</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>tax_rateb</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tax_salesb_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>tax_ratec</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>tax_salesc_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.cmhead">public.cmhead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.cobmisc">public.cobmisc</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.coitem">public.coitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.invchead">public.invchead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.quitem">public.quitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.taxsel">public.taxsel</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.vohead">public.vohead</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.taxauth">taxauth</a>
		</h2>
        
         <p>The Tax Authority table.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.taxauth Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>taxauth_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>taxauth_code</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>taxauth_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>taxauth_extref</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.addr">public.addr.addr_id</a>
                  
                
                </td>
            	<td>taxauth_addr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>taxauth_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				<br><br>The required currency for recording tax information as. NULL means no preference.
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>taxauth_county</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.accnt">public.accnt.accnt_id</a>
                  
                
                </td>
            	<td>taxauth_accnt_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.cmhead">public.cmhead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.cobmisc">public.cobmisc</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.cohead">public.cohead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.crmacct">public.crmacct</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.custinfo">public.custinfo</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.invchead">public.invchead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.itemtax">public.itemtax</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.prospect">public.prospect</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.quhead">public.quhead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.shiptoinfo">public.shiptoinfo</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.taxreg">public.taxreg</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.taxsel">public.taxsel</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.vendaddrinfo">public.vendaddrinfo</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.vendinfo">public.vendinfo</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.vohead">public.vohead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.whsinfo">public.whsinfo</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.taxreg">taxreg</a>
		</h2>
        
         <p>Stores Tax Registration numbers related to objects and a given tax authority. The rel_id specifies the object id and teh rel_type specifies the object type. See column comment for additional detail on types.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.taxreg Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>taxreg_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>taxreg_rel_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>taxreg_rel_type</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				<br><br>The type of relation this record is for. Known values are C=Customer, V=Vendor, NULL=This Manufacturer in which case taxreg_rel_id is meaningless and should be -1.
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.taxauth">public.taxauth.taxauth_id</a>
                  
                
                </td>
            	<td>taxreg_taxauth_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>taxreg_number</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.taxsel">taxsel</a>
		</h2>
        
         <p>The Tax Selection table associates different tax authorities and tax types to a given tax code. A NULL value in either taxauth_id or taxtype_id is considered to mean any value is accepted. The order of precedence is a field where both fields are non-null values, followed by a non-null taxauth with a null taxtype, followed by a non-null taxtype with a null taxauth, followed by a possible null, null combination that will match anything. If no matches are found then no tax is considered to be needed.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.taxsel Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>taxsel_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.taxauth">public.taxauth.taxauth_id</a>
                  
                
                  
                
                </td>
            	<td>taxsel_taxauth_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				
					

					
                       UNIQUE#1
                    
				

				
				
				</i>
				<br><br>The id of the tax authority. If NULL any tax authority will apply.
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                  
                  <a href="#public.table.taxtype">public.taxtype.taxtype_id</a>
                  
                
                </td>
            	<td>taxsel_taxtype_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
                       UNIQUE#1
                    
				
					

					
				

				
				
				</i>
				<br><br>The id of the tax type. If NULL any tax type will apply.
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.tax">public.tax.tax_id</a>
                  
                
                </td>
            	<td>taxsel_tax_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.taxtype">taxtype</a>
		</h2>
        
         <p>The list of Tax Types</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.taxtype Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>taxtype_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>taxtype_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>taxtype_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>taxtype_sys</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.asohist">public.asohist</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.cmhead">public.cmhead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.cmitem">public.cmitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.cobill">public.cobill</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.cobmisc">public.cobmisc</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.cohist">public.cohist</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.invchead">public.invchead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.invcitem">public.invcitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.itemtax">public.itemtax</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.taxsel">public.taxsel</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.vohead">public.vohead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.voitem">public.voitem</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.terms">terms</a>
		</h2>
        
         <p>Billing Terms information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.terms Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>terms_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;terms_terms_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>terms_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>terms_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>terms_type</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>terms_duedays</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>terms_discdays</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>terms_discprcnt</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>terms_cutoffday</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>terms_ap</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>terms_ar</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.cohead">public.cohead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.custinfo">public.custinfo</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.pohead">public.pohead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.quhead">public.quhead</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.todoassoc">todoassoc</a>
		</h2>
        
         <p>To-Do Item Associations.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.todoassoc Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>todoassoc_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.todoitem">public.todoitem.todoitem_id</a>
                  
                
                </td>
            	<td>todoassoc_todoitem_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>todoassoc_other_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>todoassoc_other_type</td>
            	<td>character(2)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.todoitem">todoitem</a>
		</h2>
        
         <p>To-Do List items.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.todoitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>todoitem_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.usr">public.usr.usr_id</a>
                  
                
                </td>
            	<td>todoitem_usr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>todoitem_name</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>todoitem_description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.incdt">public.incdt.incdt_id</a>
                  
                
                </td>
            	<td>todoitem_incdt_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>todoitem_creator_username</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				DEFAULT &quot;current_user&quot;()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>todoitem_status</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>todoitem_active</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>todoitem_start_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>todoitem_due_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>todoitem_assigned_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>todoitem_completed_date</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>todoitem_seq</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>todoitem_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.crmacct">public.crmacct.crmacct_id</a>
                  
                
                </td>
            	<td>todoitem_crmacct_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.ophead">public.ophead.ophead_id</a>
                  
                
                </td>
            	<td>todoitem_ophead_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>todoitem_owner_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>todoitem_priority_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.todoassoc">public.todoassoc</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.trialbal">trialbal</a>
		</h2>
        
         <p>Trial Balance information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.trialbal Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>trialbal_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>trialbal_period_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>trialbal_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>trialbal_beginning</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>trialbal_ending</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>trialbal_credits</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>trialbal_debits</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>trialbal_dirty</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>trialbal_yearend</td>
            	<td>numeric(20,2)</td>
                <td><i>
				

				NOT NULL
				DEFAULT 0.00
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.uiform">uiform</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.uiform Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>uiform_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>uiform_name</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>uiform_order</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>uiform_enabled</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>uiform_source</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>uiform_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.uom">uom</a>
		</h2>
        
         <p>Unit of Measure information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.uom Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>uom_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>uom_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>uom_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>uom_item_weight</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.bomitem">public.bomitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.cmitem">public.cmitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.coitem">public.coitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.invcitem">public.invcitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.ipsitem">public.ipsitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.item">public.item</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.itemuomconv">public.itemuomconv</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.quitem">public.quitem</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.uomconv">public.uomconv</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.womatl">public.womatl</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.uomconv">uomconv</a>
		</h2>
        
         <p>UOM conversion information. From Unit to To Unit with a value per ratio.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.uomconv Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>uomconv_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.uom">public.uom.uom_id</a>
                  
                
                </td>
            	<td>uomconv_from_uom_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>uomconv_from_value</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.uom">public.uom.uom_id</a>
                  
                
                </td>
            	<td>uomconv_to_uom_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>uomconv_to_value</td>
            	<td>numeric(20,10)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>uomconv_fractional</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.uomtype">uomtype</a>
		</h2>
        
         <p>UOM Type values.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.uomtype Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>uomtype_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>uomtype_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>uomtype_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>uomtype_multiple</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.itemuom">public.itemuom</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.url">url</a>
		</h2>
        
         <p>URL references to documents.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.url Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>url_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>url_source_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>url_source</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>url_title</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>url_url</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.usr">usr</a>
		</h2>
        
         <p>User information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.usr Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>usr_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;usr_usr_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>usr_username</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>usr_propername</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>usr_passwd</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>usr_locale_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>usr_initials</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>usr_agent</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>usr_active</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>usr_email</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>usr_window</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.emp">public.emp</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.todoitem">public.todoitem</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.usrgrp">usrgrp</a>
		</h2>
        
         <p>This is which group a user belongs to.</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.usrgrp Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>usrgrp_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.grp">public.grp.grp_id</a>
                  
                
                </td>
            	<td>usrgrp_grp_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>usrgrp_username</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.usrpref">usrpref</a>
		</h2>
        
         <p>User Preferences information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.usrpref Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>usrpref_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;usrpref_usrpref_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>usrpref_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>usrpref_value</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>usrpref_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.usrpriv">usrpriv</a>
		</h2>
        
         <p>User Privileges information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.usrpriv Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>usrpriv_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;usrpriv_usrpriv_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>usrpriv_priv_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>usrpriv_username</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.vend">vend</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.vend Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_zip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_contact1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_phone1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_contact2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_phone2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_lastpurchdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_po</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_pocomments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_number</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_fax1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_fax2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_email1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_email2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_1099</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_exported</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_fobsource</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_fob</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_terms_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_shipvia</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_vendtype_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_qualified</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_ediemail</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_ediemailbody</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_edisubject</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_edifilename</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_accntnum</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_emailpodelivery</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_restrictpurch</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_edicc</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_curr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT vendinfo.vend_id
, vendinfo.vend_name
, m.addr_line1 AS vend_address1
, m.addr_line2 AS vend_address2
, m.addr_line3 AS vend_address3
, m.addr_city AS vend_city
, m.addr_state AS vend_state
, m.addr_postalcode AS vend_zip
, btrim
(
     (
           (c1.cntct_first_name || &#39; &#39;::text) || c1.cntct_last_name
     )
) AS vend_contact1
, c1.cntct_phone AS vend_phone1
, btrim
(
     (
           (c2.cntct_first_name || &#39; &#39;::text) || c2.cntct_last_name
     )
) AS vend_contact2
, c2.cntct_phone AS vend_phone2
, vendinfo.vend_lastpurchdate
, vendinfo.vend_active
, vendinfo.vend_po
, vendinfo.vend_comments
, vendinfo.vend_pocomments
, vendinfo.vend_number
, c1.cntct_fax AS vend_fax1
, c2.cntct_fax AS vend_fax2
, c1.cntct_email AS vend_email1
, c2.cntct_email AS vend_email2
, vendinfo.vend_1099
, vendinfo.vend_exported
, vendinfo.vend_fobsource
, vendinfo.vend_fob
, vendinfo.vend_terms_id
, vendinfo.vend_shipvia
, vendinfo.vend_vendtype_id
, vendinfo.vend_qualified
, vendinfo.vend_ediemail
, vendinfo.vend_ediemailbody
, vendinfo.vend_edisubject
, vendinfo.vend_edifilename
, vendinfo.vend_accntnum
, vendinfo.vend_emailpodelivery
, vendinfo.vend_restrictpurch
, vendinfo.vend_edicc
, m.addr_country AS vend_country
, vendinfo.vend_curr_id 
FROM (
     (
           (vendinfo 
         LEFT JOIN cntct c1 
                ON (
                       (vendinfo.vend_cntct1_id = c1.cntct_id)
                 )
           )
   LEFT JOIN addr m 
          ON (
                 (vendinfo.vend_addr_id = m.addr_id)
           )
     )
LEFT JOIN cntct c2 
    ON (
           (vendinfo.vend_cntct2_id = c2.cntct_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.vendaddr">vendaddr</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.vendaddr Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vendaddr_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vendaddr_vend_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vendaddr_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vendaddr_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vendaddr_address1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vendaddr_address2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vendaddr_address3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vendaddr_contact1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vendaddr_phone1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vendaddr_fax1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vendaddr_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vendaddr_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vendaddr_zipcode</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vendaddr_country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT vendaddrinfo.vendaddr_id
, vendaddrinfo.vendaddr_vend_id
, vendaddrinfo.vendaddr_code
, vendaddrinfo.vendaddr_name
, m.addr_line1 AS vendaddr_address1
, m.addr_line2 AS vendaddr_address2
, m.addr_line3 AS vendaddr_address3
, btrim
(
     (
           (c1.cntct_first_name || &#39; &#39;::text) || c1.cntct_last_name
     )
) AS vendaddr_contact1
, c1.cntct_phone AS vendaddr_phone1
, c1.cntct_fax AS vendaddr_fax1
, m.addr_city AS vendaddr_city
, m.addr_state AS vendaddr_state
, m.addr_postalcode AS vendaddr_zipcode
, m.addr_country AS vendaddr_country 
FROM (
     (vendaddrinfo 
   LEFT JOIN cntct c1 
          ON (
                 (vendaddrinfo.vendaddr_cntct_id = c1.cntct_id)
           )
     )
LEFT JOIN addr m 
    ON (
           (vendaddrinfo.vendaddr_addr_id = m.addr_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.vendaddrinfo">vendaddrinfo</a>
		</h2>
        
         <p>Vendor Address information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.vendaddrinfo Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>vendaddr_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;vendaddr_vendaddr_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vendaddr_vend_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vendaddr_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vendaddr_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vendaddr_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vendaddr_cntct_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.addr">public.addr.addr_id</a>
                  
                
                </td>
            	<td>vendaddr_addr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.taxauth">public.taxauth.taxauth_id</a>
                  
                
                </td>
            	<td>vendaddr_taxauth_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.pohead">public.pohead</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.vendinfo">vendinfo</a>
		</h2>
        
         <p>Vendor information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.vendinfo Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>vend_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;vend_vend_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_name</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_lastpurchdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_po</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_comments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_pocomments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>vend_number</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_1099</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_exported</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_fobsource</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_fob</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_terms_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_shipvia</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.vendtype">public.vendtype.vendtype_id</a>
                  
                
                </td>
            	<td>vend_vendtype_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_qualified</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_ediemail</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_ediemailbody</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_edisubject</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_edifilename</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_accntnum</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_emailpodelivery</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_restrictpurch</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_edicc</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>vend_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_cntct1_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_cntct2_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.addr">public.addr.addr_id</a>
                  
                
                </td>
            	<td>vend_addr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_match</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.taxauth">public.taxauth.taxauth_id</a>
                  
                
                </td>
            	<td>vend_taxauth_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_ach_enabled</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_ach_accnttype</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				<br><br>Type of bank account: K = checKing, C = Cash = savings. These values were chosen to be consistent with bankaccnt_type.
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_ach_use_vendinfo</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT true
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_ach_indiv_number</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				DEFAULT &#39;&#39;::text
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_ach_indiv_name</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				DEFAULT &#39;&#39;::text
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_ediemailhtml</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vend_ach_routingnumber</td>
            	<td>bytea</td>
                <td><i>
				

				NOT NULL
				DEFAULT E&#39;\\000&#39;::bytea
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vend_ach_accntnumber</td>
            	<td>bytea</td>
                <td><i>
				

				NOT NULL
				DEFAULT E&#39;\\000&#39;::bytea
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.vendinfo Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>vendinfo_vend_ach_accnttype_check</td>
                <td>CHECK (((vend_ach_accnttype = &#39;K&#39;::text) OR (vend_ach_accnttype = &#39;C&#39;::text)))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.itemsrc">public.itemsrc</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.pohead">public.pohead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.recv">public.recv</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.vendtype">vendtype</a>
		</h2>
        
         <p>Vendor Type information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.vendtype Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>vendtype_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vendtype_code</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vendtype_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.vendinfo">public.vendinfo</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.vodist">vodist</a>
		</h2>
        
         <p>Voucher distribution information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.vodist Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>vodist_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;vodist_vodist_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vodist_poitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vodist_vohead_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vodist_costelem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vodist_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vodist_amount</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vodist_qty</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vodist_expcat_id</td>
            	<td>integer</td>
                <td><i>
				

				
				DEFAULT -1
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.vohead">vohead</a>
		</h2>
        
         <p>Voucher header information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.vohead Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>vohead_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;vohead_vohead_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>vohead_number</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vohead_pohead_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vohead_posted</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vohead_duedate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vohead_invcnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vohead_amount</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vohead_docdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vohead_1099</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vohead_distdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vohead_reference</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vohead_terms_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vohead_vend_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>vohead_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				DEFAULT basecurrid()
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.taxauth">public.taxauth.taxauth_id</a>
                  
                
                </td>
            	<td>vohead_taxauth_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.curr-symbol">public.curr_symbol.curr_id</a>
                  
                
                </td>
            	<td>vohead_tax_curr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.tax">public.tax.tax_id</a>
                  
                
                </td>
            	<td>vohead_adjtax_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.taxtype">public.taxtype.taxtype_id</a>
                  
                
                </td>
            	<td>vohead_adjtaxtype_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vohead_adjtax_pcta</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vohead_adjtax_pctb</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vohead_adjtax_pctc</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vohead_adjtax_ratea</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vohead_adjtax_rateb</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vohead_adjtax_ratec</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.tax">public.tax.tax_id</a>
                  
                
                </td>
            	<td>vohead_freighttax_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.taxtype">public.taxtype.taxtype_id</a>
                  
                
                </td>
            	<td>vohead_freighttaxtype_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vohead_freighttax_pcta</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vohead_freighttax_pctb</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vohead_freighttax_pctc</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vohead_freighttax_ratea</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vohead_freighttax_rateb</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vohead_freighttax_ratec</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vohead_gldistdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vohead_misc</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.recv">public.recv</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.voitem">voitem</a>
		</h2>
        
         <p>Voucher Line Item information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.voitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>voitem_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;voitem_voitem_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>voitem_vohead_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>voitem_poitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>voitem_close</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>voitem_qty</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>voitem_freight</td>
            	<td>numeric(16,4)</td>
                <td><i>
				

				NOT NULL
				DEFAULT 0.0
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>voitem_tax_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.taxtype">public.taxtype.taxtype_id</a>
                  
                
                </td>
            	<td>voitem_taxtype_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>voitem_tax_pcta</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>voitem_tax_pctb</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>voitem_tax_pctc</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>voitem_tax_ratea</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>voitem_tax_rateb</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>voitem_tax_ratec</td>
            	<td>numeric(16,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.recv">public.recv</a></li>
			</ul>
		
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.voucheringeditlist">voucheringeditlist</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.voucheringeditlist Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>vendid</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>orderid</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemid</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>vouchernumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>ponumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>invoicenumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemnumber</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>description</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>itemtype</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>iteminvuom</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>f_qty</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>cost</td>
            	<td>numeric</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>f_cost</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>account</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
(
     (
      SELECT vendinfo.vend_id AS vendid
           , vohead.vohead_id AS orderid
           , 1 AS itemid
           , vohead.vohead_number AS vouchernumber
           , COALESCE
           (pohead.pohead_number
                 ,&#39;Misc.&#39;::text
           ) AS ponumber
           , vohead.vohead_invcnumber AS invoicenumber
           , vendinfo.vend_number AS itemnumber
           , vendinfo.vend_name AS description
           , vendtype.vendtype_code AS itemtype
           ,&#39;&#39; AS iteminvuom
           ,&#39;&#39; AS f_qty
           , sum
           (vodist.vodist_amount) AS cost
           , formatmoney
           (sum
                 (vodist.vodist_amount)
           ) AS f_cost
           ,&#39;&#39; AS account 
        FROM vodist
           , vendinfo
           , vendtype
           , (vohead 
         LEFT JOIN pohead 
                ON (
                       (vohead.vohead_pohead_id = pohead.pohead_id)
                 )
           )
       WHERE (
                 (
                       (
                             (vodist.vodist_vohead_id = vohead.vohead_id)
                           AND (vohead.vohead_vend_id = vendinfo.vend_id)
                       )
                     AND (vendinfo.vend_vendtype_id = vendtype.vendtype_id)
                 )
               AND (NOT vohead.vohead_posted)
           )
    GROUP BY vendinfo.vend_id
           , vohead.vohead_id
           , vohead.vohead_number
           , pohead.pohead_number
           , vohead.vohead_invcnumber
           , vendinfo.vend_number
           , vendinfo.vend_name
           , vendtype.vendtype_code 
   UNION ALLSELECT vohead.vohead_vend_id AS vendid
           , vohead.vohead_id AS orderid
           , 2 AS itemid
           , vohead.vohead_number AS vouchernumber
           ,&#39;&#39; AS ponumber
           ,&#39;&#39; AS invoicenumber
           , item.item_number AS itemnumber
           , (
                 (item.item_descrip1 || &#39; &#39;::text) || item.item_descrip2
           ) AS description
           ,&#39;&#39; AS itemtype
           , uom.uom_name AS iteminvuom
           , formatqty
           (vodist.vodist_qty) AS f_qty
           , vodist.vodist_amount AS cost
           , formatmoney
           (vodist.vodist_amount) AS f_cost
           , CASE WHEN 
           (accnt.accnt_id IS NULL) THEN &#39;Not Assigned&#39;::text ELSE formatglaccountlong
           (accnt.accnt_id) END AS account 
        FROM vohead
           , vodist
           , poitem
           , item
           , uom
           , (itemsite 
         LEFT JOIN (costcat 
               LEFT JOIN accnt 
                      ON (
                             (costcat.costcat_liability_accnt_id = accnt.accnt_id)
                       )
                 )
                ON (
                       (itemsite.itemsite_costcat_id = costcat.costcat_id)
                 )
           )
       WHERE (
                 (
                       (
                             (
                                   (
                                         (
                                               (vodist.vodist_vohead_id = vohead.vohead_id)
                                             AND (vodist.vodist_poitem_id &lt;&gt; -1)
                                         )
                                       AND (vodist.vodist_poitem_id = poitem.poitem_id)
                                   )
                                 AND (poitem.poitem_itemsite_id = itemsite.itemsite_id)
                             )
                           AND (itemsite.itemsite_item_id = item.item_id)
                       )
                     AND (item.item_inv_uom_id = uom.uom_id)
                 )
               AND (NOT vohead.vohead_posted)
           )
     )
UNION ALLSELECT vohead.vohead_vend_id AS vendid
     , vohead.vohead_id AS orderid
     , 3 AS itemid
     , vohead.vohead_number AS vouchernumber
     ,&#39;&#39; AS ponumber
     ,&#39;&#39; AS invoicenumber
     ,&#39;Misc&#39; AS itemnumber
     ,&#39;Miscellaneous Distribution&#39; AS description
     ,&#39;&#39; AS itemtype
     ,&#39;&#39; AS iteminvuom
     ,&#39;&#39; AS f_qty
     , vodist.vodist_amount AS cost
     , formatmoney
     (vodist.vodist_amount) AS f_cost
     , CASE WHEN 
     (expcat.expcat_id IS NOT NULL) THEN 
     (
           (expcat.expcat_code || &#39; - &#39;::text) || expcat.expcat_descrip
     ) ELSE formatglaccountlong
     (vodist.vodist_accnt_id) END AS account 
  FROM vohead
     , (vodist 
   LEFT JOIN expcat 
          ON (
                 (vodist.vodist_expcat_id = expcat.expcat_id)
           )
     )
 WHERE (
           (
                 (vodist.vodist_vohead_id = vohead.vohead_id)
               AND (vodist.vodist_poitem_id = -1)
           )
         AND (NOT vohead.vohead_posted)
     )
)
UNION ALLSELECT vohead.vohead_vend_id AS vendid
, vohead.vohead_id AS orderid
, 4 AS itemid
, vohead.vohead_number AS vouchernumber
,&#39;&#39; AS ponumber
,&#39;&#39; AS invoicenumber
, poitem.poitem_vend_item_descrip AS itemnumber
,&#39;&#39; AS description
, poitem.poitem_vend_item_descrip AS itemtype
, poitem.poitem_vend_uom AS iteminvuom
, formatqty
(vodist.vodist_qty) AS f_qty
, vodist.vodist_amount AS cost
, formatmoney
(vodist.vodist_amount) AS f_cost
, CASE WHEN 
(accnt.accnt_id IS NULL) THEN &#39;Not Assigned&#39;::text ELSE formatglaccountlong
(accnt.accnt_id) END AS account 
FROM vohead
, vodist
, poitem
, (expcat 
LEFT JOIN accnt 
    ON (
           (expcat.expcat_liability_accnt_id = accnt.accnt_id)
     )
)
WHERE (
     (
           (
                 (
                       (
                             (vodist.vodist_vohead_id = vohead.vohead_id)
                           AND (vodist.vodist_poitem_id &lt;&gt; -1)
                       )
                     AND (vodist.vodist_poitem_id = poitem.poitem_id)
                 )
               AND (poitem.poitem_itemsite_id = -1)
           )
         AND (expcat.expcat_id = poitem.poitem_expcat_id)
     )
   AND (NOT vohead.vohead_posted)
)
ORDER BY 4
, 3;</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>View:
			
			<a href="#public.schema">public</a>.<a name="public.view.warehous">warehous</a>
		</h2>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.warehous Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_addr1</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_addr2</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_addr3</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_addr4</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_city</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_state</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_zip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_country</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_fob</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_sitetype_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_counttag_prefix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_counttag_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_bol_prefix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_bol_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_shipping</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_useslips</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_usezones</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_aislesize</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_aislealpha</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_racksize</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_rackalpha</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_binsize</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_binalpha</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_locationsize</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_locationalpha</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_enforcearbl</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_default_accnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_shipping_commission</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	
	<pre>
SELECT whsinfo.warehous_id
, whsinfo.warehous_code
, whsinfo.warehous_descrip
, m.addr_line1 AS warehous_addr1
, m.addr_line2 AS warehous_addr2
, m.addr_line3 AS warehous_addr3
, m.addr_city AS warehous_addr4
, m.addr_city AS warehous_city
, m.addr_state AS warehous_state
, m.addr_postalcode AS warehous_zip
, m.addr_country AS warehous_country
, whsinfo.warehous_fob
, whsinfo.warehous_active
, whsinfo.warehous_sitetype_id
, whsinfo.warehous_counttag_prefix
, whsinfo.warehous_counttag_number
, whsinfo.warehous_bol_prefix
, whsinfo.warehous_bol_number
, whsinfo.warehous_shipping
, whsinfo.warehous_useslips
, whsinfo.warehous_usezones
, whsinfo.warehous_aislesize
, whsinfo.warehous_aislealpha
, whsinfo.warehous_racksize
, whsinfo.warehous_rackalpha
, whsinfo.warehous_binsize
, whsinfo.warehous_binalpha
, whsinfo.warehous_locationsize
, whsinfo.warehous_locationalpha
, whsinfo.warehous_enforcearbl
, whsinfo.warehous_default_accnt_id
, whsinfo.warehous_shipping_commission 
FROM (
     (whsinfo 
   LEFT JOIN cntct c1 
          ON (
                 (whsinfo.warehous_cntct_id = c1.cntct_id)
           )
     )
LEFT JOIN addr m 
    ON (
           (whsinfo.warehous_addr_id = m.addr_id)
     )
);</pre>
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.whsezone">whsezone</a>
		</h2>
        
         <p>Warehouse Zone information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.whsezone Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>whsezone_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>whsezone_warehous_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>whsezone_name</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>whsezone_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.whsinfo">whsinfo</a>
		</h2>
        
         <p>Warehouse information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.whsinfo Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>warehous_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;warehous_warehous_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>warehous_code</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_descrip</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_fob</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_active</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_counttag_prefix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_counttag_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_bol_prefix</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_bol_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_shipping</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_useslips</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_usezones</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_aislesize</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_aislealpha</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_racksize</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_rackalpha</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_binsize</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_binalpha</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_locationsize</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_locationalpha</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_enforcearbl</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.accnt">public.accnt.accnt_id</a>
                  
                
                </td>
            	<td>warehous_default_accnt_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_shipping_commission</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				
				DEFAULT 0.00
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.cntct">public.cntct.cntct_id</a>
                  
                
                </td>
            	<td>warehous_cntct_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.addr">public.addr.addr_id</a>
                  
                
                </td>
            	<td>warehous_addr_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.taxauth">public.taxauth.taxauth_id</a>
                  
                
                </td>
            	<td>warehous_taxauth_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>warehous_transit</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.shipform">public.shipform.shipform_id</a>
                  
                
                </td>
            	<td>warehous_shipform_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.shipvia">public.shipvia.shipvia_id</a>
                  
                
                </td>
            	<td>warehous_shipvia_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>warehous_shipcomments</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.costcat">public.costcat.costcat_id</a>
                  
                
                </td>
            	<td>warehous_costcat_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.sitetype">public.sitetype.sitetype_id</a>
                  
                
                </td>
            	<td>warehous_sitetype_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.whsinfo Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>whsinfo_check</td>
                <td>CHECK (((warehous_transit AND (warehous_costcat_id IS NOT NULL)) OR (NOT warehous_transit)))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.cohead">public.cohead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.emp">public.emp</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.ipsfreight">public.ipsfreight</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.itemsite">public.itemsite</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.pohead">public.pohead</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.prospect">public.prospect</a></li>
			</ul>
		
			<ul>
				<li><a href="#public.table.quhead">public.quhead</a></li>
			</ul>
		
		

    <!-- Indexes -->
    
       warehous_code_key warehous_code bpchar_ops
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.wo">wo</a>
		</h2>
        
         <p>Work Order information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.wo Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>wo_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;wo_wo_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>wo_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>wo_subnumber</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>wo_status</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>wo_itemsite_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>wo_startdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>wo_duedate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>wo_ordtype</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>wo_ordid</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>wo_qtyord</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>wo_qtyrcv</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>wo_adhoc</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>wo_itemcfg_series</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>wo_imported</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>wo_wipvalue</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>wo_postedvalue</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>wo_prodnotes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>wo_prj_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>wo_priority</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				DEFAULT 1
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>wo_brdvalue</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>wo_bom_rev_id</td>
            	<td>integer</td>
                <td><i>
				

				
				DEFAULT -1
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>wo_boo_rev_id</td>
            	<td>integer</td>
                <td><i>
				

				
				DEFAULT -1
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>wo_cosmethod</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.wo Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>chk_wo_cosmethod</td>
                <td>CHECK ((((wo_cosmethod = NULL::bpchar) OR (wo_cosmethod = &#39;D&#39;::bpchar)) OR (wo_cosmethod = &#39;P&#39;::bpchar)))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.poitem">public.poitem</a></li>
			</ul>
		
		

    <!-- Indexes -->
    
       wo_duedate wo_duedate
    
       wo_itemsite_id wo_itemsite_id
    
       wo_ordtype wo_ordtype
    
       wo_startdate wo_startdate
    
       wo_status wo_status
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.womatl">womatl</a>
		</h2>
        
         <p>Work Order Material Requirements information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.womatl Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>womatl_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;womatl_womatl_id_seq&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>womatl_wo_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>womatl_itemsite_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>womatl_qtyper</td>
            	<td>numeric(20,8)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>womatl_scrap</td>
            	<td>numeric(8,4)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>womatl_qtyreq</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>womatl_qtyiss</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>womatl_qtywipscrap</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>womatl_lastissue</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>womatl_lastreturn</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>womatl_cost</td>
            	<td>numeric(16,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>womatl_picklist</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>womatl_status</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>womatl_imported</td>
            	<td>boolean</td>
                <td><i>
				

				
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>womatl_createwo</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>womatl_issuemethod</td>
            	<td>character(1)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>womatl_wooper_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>womatl_bomitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>womatl_duedate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>womatl_schedatwooper</td>
            	<td>boolean</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.uom">public.uom.uom_id</a>
                  
                
                </td>
            	<td>womatl_uom_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>womatl_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>womatl_ref</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		
			<p>Tables referencing this one via Foreign Key Constraints:</p>
		
			<ul>
				<li><a href="#public.table.womatlpost">public.womatlpost</a></li>
			</ul>
		
		

    <!-- Indexes -->
    
       womatl_itemsite_id_key womatl_itemsite_id
    
       womatl_wo_id_key womatl_wo_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.womatlpost">womatlpost</a>
		</h2>
        
         <p>Table to tie work order to work order material transactions for efficient queries</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.womatlpost Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>womatlpost_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                  <a href="#public.table.womatl">public.womatl.womatl_id</a>
                  
                
                </td>
            	<td>womatlpost_womatl_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                  
                  <a href="#public.table.invhist">public.invhist.invhist_id</a>
                  
                
                </td>
            	<td>womatlpost_invhist_id</td>
            	<td>integer</td>
                <td><i>
				
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.womatlvar">womatlvar</a>
		</h2>
        
         <p>Work Order Material Requirements Variance information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.womatlvar Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>womatlvar_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;womatlvar_womatlvar_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>womatlvar_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>womatlvar_subnumber</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>womatlvar_posted</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>womatlvar_parent_itemsite_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>womatlvar_component_itemsite_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>womatlvar_qtyord</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>womatlvar_qtyrcv</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>womatlvar_qtyiss</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>womatlvar_qtyper</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>womatlvar_scrap</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>womatlvar_wipscrap</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>womatlvar_bomitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>womatlvar_ref</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>womatlvar_notes</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.woopervar">woopervar</a>
		</h2>
        
         <p>Work Order Operations Variance information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.woopervar Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>woopervar_id</td>
            	<td>integer</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				DEFAULT nextval((&#39;&quot;woopervar_woopervar_id_seq&quot;&#39;::text)::regclass)
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>woopervar_number</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>woopervar_subnumber</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>woopervar_posted</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>woopervar_parent_itemsite_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>woopervar_booitem_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>woopervar_qtyord</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>woopervar_qtyrcv</td>
            	<td>numeric(18,6)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>woopervar_stdsutime</td>
            	<td>numeric(10,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>woopervar_sutime</td>
            	<td>numeric(10,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>woopervar_stdrntime</td>
            	<td>numeric(10,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>woopervar_rntime</td>
            	<td>numeric(10,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>woopervar_wrkcnt_id</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>woopervar_seqnumber</td>
            	<td>integer</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.workglhead">workglhead</a>
		</h2>
        
         <p>Temporary table for storing Balance Sheet and Income Statement header information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.workglhead Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>workglhead_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>workglhead_usr_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>workglhead_cyp_startdate</td>
            	<td>date</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>workglhead_cyp_enddate</td>
            	<td>date</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>workglhead_cy_startdate</td>
            	<td>date</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>workglhead_pyp_startdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>workglhead_pyp_enddate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>workglhead_py_startdate</td>
            	<td>date</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.workglitem">workglitem</a>
		</h2>
        
         <p>Temporary table for storing Balance Sheet and Income Statement Line Item information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.workglitem Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>workglitem_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>workglitem_workglhead_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>workglitem_account</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>workglitem_account_desc</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>workglitem_accnt_type</td>
            	<td>character(1)</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>workglitem_cyp_balance</td>
            	<td>numeric(12,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>workglitem_cy_balance</td>
            	<td>numeric(12,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>workglitem_pyp_balance</td>
            	<td>numeric(12,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>workglitem_py_balance</td>
            	<td>numeric(12,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>workglitem_cp_ending_trialbal</td>
            	<td>numeric(12,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>workglitem_pp_ending_trialbal</td>
            	<td>numeric(12,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>workglitem_subaccnttype_code</td>
            	<td>text</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       workglitem_accnt_type_idx workglitem_accnt_type
    
       workglitem_account_idx workglitem_account
    
       workglitem_workglhead_idx workglitem_workglhead_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.workgltotal">workgltotal</a>
		</h2>
        
         <p>Temporary table for storing Balance Sheet and Income Statement Period totals information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.workgltotal Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>workgltotal_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>workgltotal_workglhead_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>workgltotal_cp_ending_total</td>
            	<td>numeric(12,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>workgltotal_pp_ending_total</td>
            	<td>numeric(12,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       workgltotal_workglhead_idx workgltotal_workglhead_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.workgltotaleq">workgltotaleq</a>
		</h2>
        
         <p>Temporary table for storing Balance Sheet and Income Statement equity totals information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.workgltotaleq Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>workgltotaleq_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>workgltotaleq_workglhead_id</td>
            	<td>integer</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>workgltotaleq_cp_ending_total</td>
            	<td>numeric(12,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>workgltotaleq_pp_ending_total</td>
            	<td>numeric(12,2)</td>
                <td><i>
				

				
				
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    
       workgltotaleq_workglhead_idx workgltotaleq_workglhead_id
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.xsltmap">xsltmap</a>
		</h2>
        
         <p>Mapping of XML System identifiers to XSLT transformation files</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.xsltmap Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>xsltmap_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                  
                
                </td>
            	<td>xsltmap_name</td>
            	<td>text</td>
                <td><i>
				
					

					
                       UNIQUE
                    
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>xsltmap_doctype</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>xsltmap_system</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>xsltmap_import</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>xsltmap_export</td>
            	<td>text</td>
                <td><i>
				

				NOT NULL
				DEFAULT &#39;&#39;::text
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		
        <p>&nbsp;</p>
		<table width="100%" cellspacing="0" cellpadding="3">
            <caption>public.xsltmap Constraints</caption>
            <tr>
            	<th>Name</th>
            	<th>Constraint</th>
            </tr>
			
            <tr class="tr0">
				<td>xsltmap_check</td>
                <td>CHECK (((xsltmap_doctype &lt;&gt; &#39;&#39;::text) OR (xsltmap_system &lt;&gt; &#39;&#39;::text)))</td>
            </tr>
			
            <tr class="tr1">
				<td>xsltmap_xsltmap_import_check</td>
                <td>CHECK ((xsltmap_import &lt;&gt; &#39;&#39;::text))</td>
            </tr>
			
            <tr class="tr0">
				<td>xsltmap_xsltmap_name_check</td>
                <td>CHECK ((xsltmap_name &lt;&gt; &#39;&#39;::text))</td>
            </tr>
			
		</table>
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	
        <hr>
		<h2>Table:
			
			<a href="#public.schema">public</a>.<a name="public.table.yearperiod">yearperiod</a>
		</h2>
        
         <p>Accounting Year Periods information</p>
        


        <table width="100%" cellspacing="0" cellpadding="3">
                <caption>public.yearperiod Structure</caption>
                <tr>
                <th>F-Key</th>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                </tr>
            
            <tr class="tr0">
				<td>
                
                  
                
                </td>
            	<td>yearperiod_id</td>
            	<td>serial</td>
                <td><i>
				
					PRIMARY KEY
					

					
				

				
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>yearperiod_start</td>
            	<td>date</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr0">
				<td>
                
                </td>
            	<td>yearperiod_end</td>
            	<td>date</td>
                <td><i>
				

				NOT NULL
				
				</i>
				
				</td>
			 </tr>
            
            <tr class="tr1">
				<td>
                
                </td>
            	<td>yearperiod_closed</td>
            	<td>boolean</td>
                <td><i>
				

				NOT NULL
				DEFAULT false
				</i>
				
				</td>
			 </tr>
            
        </table>

        <!-- Inherits -->
		

		
		
		

        <!-- Constraint List -->
		

        <!-- Foreign Key Discovery -->
		

    <!-- Indexes -->
    

	<!-- View Definition -->
	

	<!-- List off permissions -->
	

	<p>
		<a href="#index">Index</a> -
		<a href="#public.schema">Schema public</a>
    </p>
	

	<!-- We've gone through the table structure, now lets take a look at user functions -->
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-accnttrigger">_accnttrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  ffSub BOOLEAN;
  ffProfit BOOLEAN;
  result INTEGER;
BEGIN
  SELECT (metric_value=&#39;t&#39;)
    INTO ffSub
    FROM metric
   WHERE(metric_name=&#39;GLFFSubaccounts&#39;)
   LIMIT 1;
  ffSub := COALESCE(ffSub, false);

  SELECT (metric_value=&#39;t&#39;)
    INTO ffProfit
    FROM metric
   WHERE(metric_name=&#39;GLFFProfitCenters&#39;)
   LIMIT 1;
  ffProfit := COALESCE(ffSub, false);

  IF (NEW.accnt_sub IS NOT NULL AND ffSub = false) THEN
    SELECT subaccnt_id
      INTO result
      FROM subaccnt
     WHERE(subaccnt_number=NEW.accnt_sub)
     LIMIT 1;
    IF (NOT FOUND) THEN
      RAISE EXCEPTION &#39;You must supply a valid Sub Account Number.&#39;;
    END IF;
  END IF;

  IF (NEW.accnt_profit IS NOT NULL AND ffProfit = false) THEN
    SELECT prftcntr_id
      INTO result
      FROM prftcntr
     WHERE(prftcntr_number=NEW.accnt_profit)
     LIMIT 1;
    IF (NOT FOUND) THEN
      RAISE EXCEPTION &#39;You must supply a valid Profit Center Number.&#39;;
    END IF;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-addrtrigger">_addrtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    _uses	INTEGER	:= 0;

  BEGIN
    SELECT count(*) INTO _uses
    FROM cntct
    WHERE ((cntct_addr_id=OLD.addr_id)
      AND   cntct_active);

    IF (TG_OP = &#39;UPDATE&#39;) THEN
      IF (OLD.addr_active AND NOT NEW.addr_active AND _uses &gt; 0) THEN
	RAISE EXCEPTION &#39;Cannot inactivate Address with Active Contacts (%)&#39;,
			_uses;
      END IF;
    ELSIF (TG_OP = &#39;DELETE&#39;) THEN
      IF (_uses &gt; 0) THEN
	RAISE EXCEPTION &#39;Cannot Delete Address with Active Contacts (%)&#39;,
			_uses;
      END IF;

      UPDATE cntct SET cntct_addr_id = NULL
      WHERE ((cntct_addr_id=OLD.addr_id)
	AND  (NOT cntct_active));

      RETURN OLD;
    END IF;

    RETURN NEW;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-apapplytrigger">_apapplytrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _tpaid NUMERIC;

BEGIN

-- get the exchange rate for the doc date
  IF (TG_OP = &#39;INSERT&#39;) THEN
    SELECT currtocurr(NEW.apapply_curr_id,apopen_curr_id,NEW.apapply_amount,NEW.apapply_postdate) 
      INTO _tpaid
    FROM apopen
    WHERE ( apopen_id=NEW.apapply_target_apopen_id );
    IF (FOUND) THEN
      NEW.apapply_target_paid := _tpaid;
    ELSE
      RAISE EXCEPTION &#39;Error calculating paid amount on application&#39;;
    END IF;
  END IF;

  RETURN NEW;

END;

</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-apopentrigger">_apopentrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _currrate NUMERIC;

BEGIN

-- get the base exchange rate for the doc date
  IF (TG_OP = &#39;INSERT&#39; AND NEW.apopen_curr_rate IS NULL) THEN
    SELECT curr_rate INTO _currrate
    FROM curr_rate
    WHERE ( (NEW.apopen_curr_id=curr_id)
      AND ( NEW.apopen_docdate BETWEEN curr_effective 
                                   AND curr_expires) );
    IF (FOUND) THEN
      NEW.apopen_curr_rate := _currrate;
    ELSE
      RAISE EXCEPTION &#39;Currency exchange rate not found&#39;;
    END IF;
  END IF;

  NEW.apopen_open := NEW.apopen_amount &gt; NEW.apopen_paid;

  RETURN NEW;

END;

</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-aropenaftertrigger">_aropenaftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _openAmount NUMERIC;
  _p RECORD;
  _lateCount INTEGER := 0;
  _graceDays INTEGER;
  _checkLate BOOLEAN := false;
  _checkLimit BOOLEAN := false;
  _id INTEGER;
BEGIN

-- If metric is set then auto close any associated incidents when AR is closed
  IF (fetchMetricBool(&#39;AutoCloseARIncident&#39;)) THEN
    IF (NEW.aropen_open = FALSE) THEN
      UPDATE incdt SET incdt_status=&#39;L&#39; WHERE (incdt_aropen_id=OLD.aropen_id);
    END IF;
  END IF;

  RETURN NEW;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-aropentrigger">_aropentrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _openAmount NUMERIC;
  _p RECORD;
  _lateCount INTEGER := 0;
  _graceDays INTEGER;
  _checkLate BOOLEAN := false;
  _checkLimit BOOLEAN := false;
  _id INTEGER;
BEGIN
  -- Checks
  -- Start with privileges
  IF ( (NOT checkPrivilege(&#39;MaintainARMemos&#39;)) AND
       (NOT checkPrivilege(&#39;PostMiscInvoices&#39;)) AND
       (NOT checkPrivilege(&#39;PostARDocuments&#39;)) ) THEN
    RAISE EXCEPTION &#39;You do not have privileges to maintain A/R Memos.&#39;;
  END IF;

  IF ( (NEW.aropen_docnumber IS NULL) OR (LENGTH(NEW.aropen_docnumber) = 0) ) THEN
    RAISE EXCEPTION &#39;You must enter a valid Document # for this A/R Memo.&#39;;
  END IF;

  IF ( (NEW.aropen_amount IS NOT NULL) AND (NEW.aropen_amount &lt;= 0) ) THEN
    RAISE EXCEPTION &#39;You must enter a positive Amount for this A/R Memo.&#39;;
  END IF;

  IF (TG_OP = &#39;INSERT&#39;) THEN
    SELECT aropen_id INTO _id
    FROM aropen
    WHERE ( (aropen_doctype=NEW.aropen_doctype)
      AND   (aropen_docnumber=NEW.aropen_docnumber) )
    LIMIT 1;
    IF (FOUND) THEN
      RAISE EXCEPTION &#39;This Document Type/Number already exists. You may not enter a duplicate A/R Memo.&#39;;
    END IF;
  END IF;

-- Determine the number of late invoices
  IF ( SELECT (metric_value=&#39;t&#39;)
         FROM metric
        WHERE(metric_name=&#39;AutoCreditWarnLateCustomers&#39;)) THEN
    _checkLate := true;

    SELECT COALESCE(metric_value::integer, _graceDays)
      INTO _graceDays
      FROM metric
     WHERE(metric_name=&#39;DefaultAutoCreditWarnGraceDays&#39;);
    IF (NOT FOUND) THEN
      _graceDays := 30;
    END IF;
    SELECT COALESCE(cust_gracedays, _graceDays)
      INTO _graceDays
      FROM custinfo
     WHERE(cust_id=NEW.aropen_cust_id);
    IF (NOT FOUND) THEN
      _graceDays := 30;
    END IF;

    SELECT count(aropen_id)
      INTO _lateCount
      FROM aropen
     WHERE((NEW.aropen_cust_id = aropen_cust_id)
       AND (aropen_open)
       AND (aropen_amount &gt; aropen_paid)
       AND (aropen_doctype IN (&#39;I&#39;, &#39;D&#39;))
       AND (aropen_duedate &lt; (CURRENT_DATE - _graceDays)));

  --  Adjust _lateCount if late invoice being paid
    IF ( (NEW.aropen_paid = NEW.aropen_amount)
     AND (NEW.aropen_doctype IN (&#39;I&#39;, &#39;D&#39;))
     AND (NEW.aropen_duedate &lt; (CURRENT_DATE - _graceDays))) THEN
      _lateCount := _lateCount - 1;
    END IF;
  END IF;

--  Close this aropen if it is paid
  IF (NEW.aropen_paid = NEW.aropen_amount) THEN
    NEW.aropen_open=FALSE;
    IF (TG_OP = &#39;UPDATE&#39;) THEN
      IF ((OLD.aropen_open=TRUE) and (NEW.aropen_open=FALSE)) THEN
        NEW.aropen_closedate=current_date;
      END IF;
    END IF;

--  Remove any aropenco regards that reference this aropen item
    DELETE FROM aropenco WHERE (aropenco_aropen_id=NEW.aropen_id);
  END IF;

--  Only check if the customer in question has a non-zero Credit Limit
  SELECT cust_id, cust_creditlmt, cust_creditstatus,
         cust_autoupdatestatus, cust_autoholdorders INTO _p
  FROM cust
  WHERE (cust_id=NEW.aropen_cust_id);
  IF (_p.cust_creditlmt &gt; 0) THEN
    _checkLimit := true;

    SELECT COALESCE(SUM( CASE WHEN (aropen_doctype IN (&#39;I&#39;, &#39;D&#39;)) THEN (aropen_amount - aropen_paid)
                     ELSE ((aropen_amount - aropen_paid) * -1)
                END ), 0.0) INTO _openAmount
    FROM aropen AS current
    WHERE ( (current.aropen_cust_id=NEW.aropen_cust_id)
     AND (current.aropen_open)
     AND (current.aropen_id &lt;&gt; NEW.aropen_id) );

--  Add in the value of the current aropen item
    IF (NEW.aropen_doctype IN (&#39;I&#39;, &#39;D&#39;)) THEN
      _openAmount := (_openAmount + (NEW.aropen_amount - NEW.aropen_paid));
    ELSE
      _openAmount := (_openAmount - (NEW.aropen_amount - NEW.aropen_paid));
    END IF;
  ELSE
    _openAmount := 0;
  END IF;

  IF (_checkLimit OR _checkLate) THEN
--  Handle a Customer that is going under its credit limit
    IF ((_p.cust_creditlmt &gt;= _openAmount) AND (_lateCount &lt;= 0)) THEN

--  Handle the Customer Status
      IF ( (_p.cust_autoupdatestatus) AND (_p.cust_creditstatus=&#39;W&#39;) ) THEN
        UPDATE custinfo
        SET cust_creditstatus=&#39;G&#39;
        WHERE (cust_id=NEW.aropen_cust_id);
      END IF;

--  Handle the open Sales Orders
      IF (_p.cust_autoholdorders) THEN
        UPDATE cohead
        SET cohead_holdtype=&#39;N&#39;
        FROM coitem
        WHERE ( (coitem_cohead_id=cohead_id)
         AND (cohead_holdtype=&#39;C&#39;)
         AND (coitem_status=&#39;O&#39;)
         AND (cohead_cust_id=_p.cust_id) );
      END IF;

--  Handle a Customer that is going over its credit limit
    ELSIF ((_p.cust_creditlmt &lt; _openAmount) OR (_lateCount &gt; 0)) THEN

--  Handle the Customer Status
      IF ( (_p.cust_autoupdatestatus) AND (_p.cust_creditstatus = &#39;G&#39;) ) THEN
        UPDATE custinfo
        SET cust_creditstatus=&#39;W&#39;
        WHERE (cust_id=NEW.aropen_cust_id);
      END IF;

--  Handle the open Sales Orders
      IF (_p.cust_autoholdorders) THEN
        UPDATE cohead
        SET cohead_holdtype=&#39;C&#39;
        FROM coitem
        WHERE ( (coitem_cohead_id=cohead_id)
         AND (cohead_holdtype=&#39;N&#39;)
         AND (coitem_status=&#39;O&#39;)
         AND (cohead_cust_id=_p.cust_id) );
      END IF;

    END IF;

  END IF;

  RETURN NEW;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-bomheadtrigger">_bomheadtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _revid INTEGER;
  _check TEXT;
BEGIN
-- Privilege Checks
  IF (NOT checkPrivilege(&#39;MaintainBOMs&#39;)) THEN
    RAISE EXCEPTION &#39;You do not have privileges to maintain Bills of Material.&#39;;
  END IF;
  
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-bomitemsubtrigger">_bomitemsubtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

-- Privilege Checks
  IF (NOT checkPrivilege(&#39;MaintainBOMs&#39;)) THEN
    RAISE EXCEPTION &#39;You do not have privileges to maintain Bills of Material.&#39;;
  END IF;

  IF (TG_OP = &#39;DELETE&#39;) THEN
    RETURN OLD;
  ELSE
    RETURN NEW;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-bomitemtrigger">_bomitemtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _cmnttypeid INTEGER;
  _parentType CHAR(1);
BEGIN

-- Privilege Checks
  IF (NOT checkPrivilege(&#39;MaintainBOMs&#39;)) THEN
    RAISE EXCEPTION &#39;You do not have privileges to maintain Bills of Material.&#39;;
  END IF;

  IF (TG_OP IN (&#39;INSERT&#39;,&#39;UPDATE&#39;)) THEN
-- Check for valid UOM
    IF (SELECT (count(*) != 1)
        FROM
               (SELECT uom_id
                  FROM item
                  JOIN uom ON (item_inv_uom_id=uom_id)
                 WHERE(item_id=NEW.bomitem_item_id)
                 UNION 
                SELECT uom_id
                  FROM item
                  JOIN itemuomconv ON (itemuomconv_item_id=item_id)
                  JOIN uom ON (itemuomconv_to_uom_id=uom_id),
                  itemuom, uomtype 
                 WHERE((itemuomconv_from_uom_id=item_inv_uom_id)
                   AND (item_id=NEW.bomitem_item_id) 
                   AND (itemuom_itemuomconv_id=itemuomconv_id) 
                   AND (uomtype_id=itemuom_uomtype_id) 
                   AND (uomtype_name=&#39;MaterialIssue&#39;))
                 UNION 
                SELECT uom_id
                  FROM item
                  JOIN itemuomconv ON (itemuomconv_item_id=item_id)
                  JOIN uom ON (itemuomconv_from_uom_id=uom_id),
                  itemuom, uomtype 
                 WHERE((itemuomconv_to_uom_id=item_inv_uom_id)
                   AND (item_id=NEW.bomitem_item_id) 
                   AND (itemuom_itemuomconv_id=itemuomconv_id) 
                   AND (uomtype_id=itemuom_uomtype_id) 
                   AND (uomtype_name=&#39;MaterialIssue&#39;))) AS data
          WHERE (uom_id=NEW.bomitem_uom_id)) THEN
      RAISE EXCEPTION &#39;Unit of Measure Invalid for Material Issue.&#39;;
    END IF;

-- Disallow changes that would compromise revision control integrity
    IF (TG_OP = &#39;UPDATE&#39;) THEN
      IF (NEW.bomitem_parent_item_id != OLD.bomitem_parent_item_id) THEN
        RAISE EXCEPTION &#39;Parent Item ID may not be changed.&#39;;
      END IF;

      IF (NEW.bomitem_item_id != OLD.bomitem_item_id) THEN
        RAISE EXCEPTION &#39;Item ID may not be changed.&#39;;
      END IF;

      IF ((fetchMetricBool(&#39;RevControl&#39;)) AND (OLD.bomitem_rev_id &gt; -1)) THEN
        IF (SELECT (rev_status = &#39;I&#39;) FROM rev WHERE (rev_id=OLD.bomitem_rev_id)) THEN
          RAISE EXCEPTION &#39;Bill of material is Inactive and may not be modified&#39;;
        END IF;
      END IF;
    END IF;

   SELECT item_type INTO _parentType
   FROM item
   WHERE (item_id=NEW.bomitem_parent_item_id);
         
-- Disallow configuration parameters if parent is not a job item
   IF (NEW.bomitem_char_id IS NOT NULL) THEN
     IF (_parentType != &#39;J&#39;) THEN
       RAISE EXCEPTION &#39;Configuration characteristics may only be defined for Job Items&#39;;
     END IF;
   END IF;

-- Kit items must be sold and not kits themselves
   IF (_parentType = &#39;K&#39;) THEN
     IF (SELECT (COUNT(item_id) = 0)
         FROM item
         WHERE ((item_id=NEW.bomitem_item_id)
         AND (item_sold)
         AND (item_type != &#39;K&#39;))) THEN
       RAISE EXCEPTION &#39;Bill of Material Items for kits must be sold and not kits themselves&#39;;
     END IF;
   END IF;

-- Over ride logic to disallow invalid data
    IF (NEW.bomitem_createwo) THEN
      IF (SELECT (item_type != &#39;M&#39;) 
          FROM item 
          WHERE (item_id=NEW.bomitem_item_id)) THEN
        NEW.bomitem_createwo := FALSE;
      END IF;
      IF (NEW.bomitem_booitem_seq_id = -1) THEN
        NEW.bomitem_schedatwooper := FALSE;
      END IF;
    END IF;
  END IF;
  

  IF ( SELECT (metric_value=&#39;t&#39;)
       FROM metric
       WHERE (metric_name=&#39;ItemChangeLog&#39;) ) THEN

--  Cache the cmnttype_id for ChangeLog
    SELECT cmnttype_id INTO _cmnttypeid
    FROM cmnttype
    WHERE (cmnttype_name=&#39;ChangeLog&#39;);
    IF (FOUND) THEN
      IF (TG_OP = &#39;INSERT&#39;) THEN
        PERFORM postComment(_cmnttypeid, &#39;BMI&#39;, NEW.bomitem_id, (&#39;Created BOM Item&#39; || NEW.bomitem_seqnumber::TEXT));

      ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
        IF (NEW.bomitem_effective &lt;&gt; OLD.bomitem_effective) THEN
          PERFORM postComment( _cmnttypeid, &#39;BMI&#39;, NEW.bomitem_id,
                               ( &#39;Effective Date Changed from &#39; || formatDate(OLD.bomitem_effective, &#39;Always&#39;) ||
                                 &#39; to &#39; || formatDate(NEW.bomitem_effective, &#39;Always&#39; ) ) );
        END IF;

        IF (NEW.bomitem_expires &lt;&gt; OLD.bomitem_expires) THEN
          PERFORM postComment( _cmnttypeid, &#39;BMI&#39;, NEW.bomitem_id,
                               ( &#39;Expiration Date Changed from &#39; || formatDate(OLD.bomitem_expires, &#39;Never&#39;) ||
                                 &#39; to &#39; || formatDate(NEW.bomitem_expires, &#39;Never&#39; ) ) );
        END IF;

        IF (NEW.bomitem_qtyper &lt;&gt; OLD.bomitem_qtyper) THEN
          PERFORM postComment( _cmnttypeid, &#39;BMI&#39;, NEW.bomitem_id,
                               ( &#39;Qty. Per Changed from &#39; || formatQtyPer(OLD.bomitem_qtyper) ||
                                 &#39; to &#39; || formatQtyPer(NEW.bomitem_qtyper ) ) );
        END IF;

        IF (NEW.bomitem_scrap &lt;&gt; OLD.bomitem_scrap) THEN
          PERFORM postComment( _cmnttypeid, &#39;BMI&#39;, NEW.bomitem_id,
                               ( &#39;Scrap % Changed from &#39; || formatPrcnt(OLD.bomitem_scrap) ||
                                 &#39; to &#39; || formatPrcnt(NEW.bomitem_scrap ) ) );
        END IF;

        IF (NEW.bomitem_issuemethod &lt;&gt; OLD.bomitem_issuemethod) THEN
          PERFORM postComment( _cmnttypeid, &#39;BMI&#39;, NEW.bomitem_id,
                               ( &#39;Issue Method Changed from &#39; || (CASE WHEN(OLD.bomitem_issuemethod=&#39;S&#39;) THEN &#39;Push&#39;
                                                                         WHEN(OLD.bomitem_issuemethod=&#39;L&#39;) THEN &#39;Pull&#39;
                                                                         WHEN(OLD.bomitem_issuemethod=&#39;M&#39;) THEN &#39;Mixed&#39;
                                                                         ELSE OLD.bomitem_issuemethod END) ||
                                 &#39; to &#39; || (CASE WHEN(NEW.bomitem_issuemethod=&#39;S&#39;) THEN &#39;Push&#39;
                                                   WHEN(NEW.bomitem_issuemethod=&#39;L&#39;) THEN &#39;Pull&#39;
                                                   WHEN(NEW.bomitem_issuemethod=&#39;M&#39;) THEN &#39;Mixed&#39;
                                                   ELSE NEW.bomitem_issuemethod END) ) );
        END IF;

        IF (NEW.bomitem_ecn &lt;&gt; OLD.bomitem_ecn) THEN
          PERFORM postComment( _cmnttypeid, &#39;BMI&#39;, NEW.bomitem_id,
                               ( &#39;ECN Changed from &#39; || OLD.bomitem_ecn ||
                                 &#39; to &#39; || NEW.bomitem_ecn ) );
        END IF;

      END IF;
    END IF;
  END IF;

  IF (TG_OP = &#39;DELETE&#39;) THEN
    DELETE FROM comment
     WHERE ( (comment_source=&#39;BMI&#39;)
       AND   (comment_source_id=OLD.bomitem_id) );

    RETURN OLD;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-cashrcptitemaftertrigger">_cashrcptitemaftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _total      NUMERIC;

BEGIN

  -- Checks
  -- Total Over Application Warning
  SELECT (cashrcpt_amount - SUM(COALESCE(cashrcptitem_amount, 0))) INTO _total
  FROM cashrcptitem JOIN cashrcpt ON (cashrcpt_id=cashrcptitem_cashrcpt_id)
  WHERE (cashrcptitem_cashrcpt_id=NEW.cashrcptitem_cashrcpt_id)
  GROUP BY cashrcpt_amount;
  IF (_total &lt; 0.0) THEN
    RAISE WARNING &#39;Warning -- the Cash Receipt has been over applied.&#39;;
  END IF;
  
  RETURN NEW;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-cashrcptitemtrigger">_cashrcptitemtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _check      BOOLEAN;
  _openAmount NUMERIC;

BEGIN

  -- Checks
  -- Start with Privileges
  IF (TG_OP = &#39;INSERT&#39;) THEN
    SELECT checkPrivilege(&#39;MaintainCashReceipts&#39;) INTO _check;
    IF NOT (_check) THEN
      RAISE EXCEPTION &#39;You do not have privileges to add a new Cash Receipt Application.&#39;;
    END IF;
  ELSE
    SELECT checkPrivilege(&#39;MaintainCashReceipts&#39;) INTO _check;
    IF NOT (_check) THEN
      RAISE EXCEPTION &#39;You do not have privileges to alter a Cash Receipt Application.&#39;;
    END IF;
  END IF;

  -- Over Application
  SELECT currToCurr(aropen_curr_id, cashrcpt_curr_id,
                    aropen_amount - aropen_paid, aropen_docdate) INTO _openAmount
  FROM aropen, cashrcpt
  WHERE ( (aropen_id=NEW.cashrcptitem_aropen_id)
    AND   (cashrcpt_id=NEW.cashrcptitem_cashrcpt_id) );
  IF (NEW.cashrcptitem_amount &gt; _openAmount) THEN
    RAISE EXCEPTION &#39;You may not apply more than the balance of this item.&#39;;
  END IF;

  RETURN NEW;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-cashrcptmisctrigger">_cashrcptmisctrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _check      BOOLEAN;

BEGIN

  -- Checks
  -- Start with Privileges
  IF (TG_OP = &#39;INSERT&#39;) THEN
    SELECT checkPrivilege(&#39;MaintainCashReceipts&#39;) INTO _check;
    IF NOT (_check) THEN
      RAISE EXCEPTION &#39;You do not have privileges to add a new Cash Receipt Misc. Application.&#39;;
    END IF;
  ELSE
    SELECT checkPrivilege(&#39;MaintainCashReceipts&#39;) INTO _check;
    IF NOT (_check) THEN
      RAISE EXCEPTION &#39;You do not have privileges to alter a Cash Receipt Misc. Application.&#39;;
    END IF;
  END IF;

  -- Account is required
  IF (NEW.cashrcptmisc_accnt_id IS NULL) THEN
    RAISE EXCEPTION &#39;You must supply a valid GL Account.&#39;;
  END IF;

  -- Amount is required
  IF (COALESCE(NEW.cashrcptmisc_amount, 0) = 0) THEN
    RAISE EXCEPTION &#39;You must supply a valid Amount.&#39;;
  END IF;

  RETURN NEW;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-cashrcpttrigger">_cashrcpttrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _check      BOOLEAN;
  _checkId    INTEGER;
  _currId     INTEGER;
  _bankCurrId INTEGER;

BEGIN

  -- Checks
  -- Start with privileges
  IF (TG_OP = &#39;INSERT&#39;) THEN
    SELECT checkPrivilege(&#39;MaintainCashReceipts&#39;) INTO _check;
    IF NOT (_check) THEN
      RAISE EXCEPTION &#39;You do not have privileges to add new Cash Receipts.&#39;;
    END IF;
  ELSE
    SELECT checkPrivilege(&#39;MaintainCashReceipts&#39;) INTO _check;
    IF NOT (_check) THEN
      RAISE EXCEPTION &#39;You do not have privileges to alter a Cash Receipt.&#39;;
    END IF;
  END IF;

  -- Currency must be same as Bank Currency
  IF (TG_OP = &#39;INSERT&#39;) THEN
    _currId = COALESCE(NEW.cashrcpt_curr_id, basecurrid());
  ELSE
    _currId = NEW.cashrcpt_curr_id;
  END IF;
  SELECT bankaccnt_curr_id INTO _bankCurrId
  FROM bankaccnt
  WHERE (bankaccnt_id=NEW.cashrcpt_bankaccnt_id);
  IF (_currId&lt;&gt;_bankCurrId) THEN
    RAISE EXCEPTION &#39;Currency supplied does not match Bank Currency.&#39;;
  END IF;

  RETURN NEW;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-ccardtrigger">_ccardtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE

BEGIN

  New.ccard_lastupdated := current_timestamp;
  New.ccard_last_updated_by_username := current_user;

  IF (TG_OP = &#39;UPDATE&#39;) THEN
    INSERT INTO ccardaud
         VALUES (nextval(&#39;ccardaud_ccardaud_id_seq&#39;), NEW.ccard_id,
                 OLD.ccard_seq, NEW.ccard_seq, OLD.ccard_cust_id, NEW.ccard_cust_id,
                 OLD.ccard_active, NEW.ccard_active, OLD.ccard_name, NEW.ccard_name,
                 OLD.ccard_address1, NEW.ccard_address1, OLD.ccard_address2,
                 NEW.ccard_address2, OLD.ccard_city, NEW.ccard_city, OLD.ccard_state,
                 NEW.ccard_state, OLD.ccard_zip, NEW.ccard_zip, OLD.ccard_country,
                 NEW.ccard_country, OLD.ccard_number, NEW.ccard_number, OLD.ccard_debit,
                 NEW.ccard_debit, OLD.ccard_month_expired, NEW.ccard_month_expired,
                 OLD.ccard_year_expired, NEW.ccard_year_expired, OLD.ccard_type, NEW.ccard_type);
  ELSE
-- We are inserting a record, therefore no old values
    INSERT INTO ccardaud
         VALUES (nextval(&#39;ccardaud_ccardaud_id_seq&#39;), NEW.ccard_id,
                 NULL, NEW.ccard_seq, NULL, NEW.ccard_cust_id, NULL,
                 NEW.ccard_active, NULL, NEW.ccard_name, NULL,
                 NEW.ccard_address1, NULL, NEW.ccard_address2, NULL,
                 NEW.ccard_city, NULL, NEW.ccard_state, NULL,
                 NEW.ccard_zip, NULL, NEW.ccard_country, NULL,
                 NEW.ccard_number, NULL, NEW.ccard_debit, NULL,
                 NEW.ccard_month_expired, NULL, NEW.ccard_year_expired, NULL,
                 NEW.ccard_type);
  END IF;

  RETURN NEW;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-charasstrigger">_charasstrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

-- Privilege Checks
   IF (NEW.charass_target_type = &#39;I&#39; AND NOT checkPrivilege(&#39;MaintainItemMasters&#39;)) THEN
     RAISE EXCEPTION &#39;You do not have privileges to maintain Items.&#39;;
   END IF;

   IF (NEW.charass_target_type = &#39;C&#39; AND NOT checkPrivilege(&#39;MaintainCustomerMasters&#39;)) THEN
     RAISE EXCEPTION &#39;You do not have privileges to maintain Customers.&#39;;
   END IF;

-- Data check
  IF (NEW.charass_char_id IS NULL) THEN
	RAISE EXCEPTION &#39;You must supply a valid Characteristic ID.&#39;;
  END IF;

-- Default Logic
  IF (NEW.charass_default) THEN
    UPDATE charass
    SET charass_default = false 
    WHERE ((charass_target_id=NEW.charass_target_id)
    AND  (charass_target_type=NEW.charass_target_type)
    AND  (charass_char_id=NEW.charass_char_id)
    AND  (charass_id &lt;&gt; NEW.charass_ID));
  END IF;
  
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-charbeforetrigger">_charbeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (NOT checkPrivilege(&#39;MaintainCharacteristics&#39;)) THEN
    RAISE EXCEPTION &#39;You do not have privileges to maintain Characteristics.&#39;;
  END IF;

  IF (NOT NEW.char_items       AND NOT NEW.char_customers  AND
      NOT NEW.char_lotserial   AND NOT NEW.char_addresses  AND
      NOT NEW.char_crmaccounts AND NOT NEW.char_contacts   AND
      NOT NEW.char_opportunity AND NOT NEW.char_employees
     ) THEN
    RAISE EXCEPTION &#39;You must apply this Characteristic to at least one type of application object.&#39;;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-checkheadbeforetrigger">_checkheadbeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE 
  _amount NUMERIC;
  _currrate NUMERIC;

BEGIN

-- get the base exchange rate for the check date
  IF (TG_OP = &#39;INSERT&#39; AND NEW.checkhead_curr_rate IS NULL) THEN
    SELECT curr_rate INTO _currrate
    FROM curr_rate
    WHERE ( (NEW.checkhead_curr_id=curr_id)
      AND ( NEW.checkhead_checkdate BETWEEN curr_effective 
                                   AND curr_expires) );
    IF (FOUND) THEN
      NEW.checkhead_curr_rate := _currrate;
    ELSE
      RAISE EXCEPTION &#39;Currency exchange rate not found&#39;;
    END IF;
  END IF;

  RETURN NEW;
  IF (TG_OP = &#39;INSERT&#39; OR TG_OP = &#39;UPDATE&#39;) THEN
    IF (NOT EXISTS (SELECT checkrecip_id
		    FROM checkrecip
		    WHERE ((checkrecip_type=NEW.checkhead_recip_type)
		      AND  (checkrecip_id=NEW.checkhead_recip_id)) )) THEN
      RAISE EXCEPTION &#39;Cannot verify recipient for check % (type %  id %)&#39;,
		      NEW.checkhead_number, NEW.checkhead_recip_type,
		      NEW.checkhead_recip_id;
    END IF;

    IF (NEW.checkhead_journalnumber IS NOT NULL
        AND NOT EXISTS (SELECT jrnluse_number
			FROM jrnluse
			WHERE (jrnluse_number=NEW.checkhead_journalnumber))
	) THEN
      RAISE EXCEPTION &#39;Journal Number % does not exist and cannot be used for check %.&#39;,
		      NEW.checkhead_journalnumber, NEW.checkhead_number;
    END IF;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-cmheadbeforetrigger">_cmheadbeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _check BOOLEAN;
  _id INTEGER;
BEGIN
  -- Checks
  -- Start with privileges
  SELECT checkPrivilege(&#39;MaintainCreditMemos&#39;) INTO _check;
  IF NOT (_check) THEN
    RAISE EXCEPTION &#39;You do not have privileges to maintain Credit Memos.&#39;;
  END IF;

  IF (TG_OP = &#39;DELETE&#39;) THEN
    RETURN OLD;
  END IF;

  IF ( (NEW.cmhead_number IS NULL) OR (LENGTH(NEW.cmhead_number) = 0) ) THEN
    RAISE EXCEPTION &#39;You must enter a valid Memo # for this Credit Memo.&#39;;
  END IF;

  IF (TG_OP = &#39;INSERT&#39;) THEN
    SELECT cmhead_id INTO _id
    FROM cmhead
    WHERE (cmhead_number=NEW.cmhead_number);
    IF (FOUND) THEN
      RAISE EXCEPTION &#39;The Memo # is already in use.&#39;;
    END IF;
  END IF;

  IF (NEW.cmhead_cust_id IS NOT NULL) THEN
    SELECT cust_id INTO _id
    FROM custinfo
    WHERE (cust_id=NEW.cmhead_cust_id);
    IF (NOT FOUND) THEN
      RAISE EXCEPTION &#39;You must enter a valid Customer # for this Credit Memo.&#39;;
    END IF;
  END IF;

  IF ( (NEW.cmhead_misc &gt; 0) AND (NEW.cmhead_misc_accnt_id = -1) ) THEN
    RAISE EXCEPTION &#39;You may not enter a Misc. Charge without indicating the G/L Sales Account.&#39;;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-cmheadtrigger">_cmheadtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (TG_OP = &#39;DELETE&#39;) THEN
    -- If this was created by a return, then reset the return
    IF (OLD.cmhead_rahead_id IS NOT NULL) THEN
      UPDATE rahead SET
        rahead_headcredited=false
      WHERE (rahead_id=OLD.cmhead_rahead_id);
      DELETE FROM rahist
      WHERE ((rahist_rahead_id=OLD.cmhead_rahead_id)
      AND (rahist_source=&#39;CM&#39;)
      AND (rahist_source_id=OLD.cmhead_id));
    END IF;
    RETURN OLD;
  END IF;
  IF (TG_OP = &#39;INSERT&#39;) THEN
    -- Something can go here
  ELSE
    IF((COALESCE(NEW.cmhead_adjtax_ratea,0.0)
      + COALESCE(NEW.cmhead_adjtax_rateb,0.0)
      + COALESCE(NEW.cmhead_adjtax_ratec,0.0)
      + COALESCE(NEW.cmhead_freighttax_ratea,0.0)
      + COALESCE(NEW.cmhead_freighttax_rateb,0.0)
      + COALESCE(NEW.cmhead_freighttax_ratec,0.0))
       &lt;&gt; 
       (COALESCE(OLD.cmhead_adjtax_ratea,0.0)
      + COALESCE(OLD.cmhead_adjtax_rateb,0.0)
      + COALESCE(OLD.cmhead_adjtax_ratec,0.0)
      + COALESCE(OLD.cmhead_freighttax_ratea,0.0)
      + COALESCE(OLD.cmhead_freighttax_rateb,0.0)
      + COALESCE(OLD.cmhead_freighttax_ratec,0.0)) ) THEN
      PERFORM recalculateCmheadTaxTotal(NEW.cmhead_id);
    END IF;
  END IF;
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-cmitembeforetrigger">_cmitembeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _check BOOLEAN;
  _id INTEGER;
BEGIN
  -- Checks
  -- Start with privileges
  SELECT checkPrivilege(&#39;MaintainCreditMemos&#39;) INTO _check;
  IF NOT (_check) THEN
    RAISE EXCEPTION &#39;You do not have privileges to maintain Credit Memos.&#39;;
  END IF;

  IF (TG_OP = &#39;DELETE&#39;) THEN
    RETURN OLD;
  END IF;

  IF (TG_OP = &#39;INSERT&#39;) THEN
    IF ( (NEW.cmitem_qtycredit IS NULL) OR (NEW.cmitem_qtycredit = 0) ) THEN
      RAISE EXCEPTION &#39;Quantity to Credit must be greater than zero.&#39;;
    END IF;
    SELECT cmitem_id INTO _id
    FROM cmitem
    WHERE ( (cmitem_cmhead_id=NEW.cmitem_cmhead_id) AND (cmitem_linenumber=NEW.cmitem_linenumber) );
    IF (FOUND) THEN
      RAISE EXCEPTION &#39;The Memo Line Number is already in use.&#39;;
    END IF;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-cmitemtrigger">_cmitemtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _ext NUMERIC;

BEGIN
  IF (TG_OP = &#39;DELETE&#39;) THEN
    IF((COALESCE(OLD.cmitem_tax_ratea,0.0)
      + COALESCE(OLD.cmitem_tax_rateb,0.0)
      + COALESCE(OLD.cmitem_tax_ratec,0.0)) &lt;&gt; 0.0) THEN
      PERFORM recalculateCmheadTaxTotal(OLD.cmitem_cmhead_id);
    END IF;

--  If this was created by a return, reset return values
    IF (OLD.cmitem_raitem_id) IS NOT NULL THEN
      _ext := ROUND((OLD.cmitem_qtycredit * OLD.cmitem_qty_invuomratio) *  (OLD.cmitem_unitprice / OLD.cmitem_price_invuomratio),2);
      UPDATE raitem SET
        raitem_qtycredited = raitem_qtycredited-OLD.cmitem_qtycredit,
        raitem_amtcredited = raitem_amtcredited-_ext
      WHERE (raitem_id=OLD.cmitem_raitem_id);
    END IF;
    RETURN OLD;
  END IF;
  IF (TG_OP = &#39;INSERT&#39;) THEN
    IF((COALESCE(NEW.cmitem_tax_ratea,0.0)
      + COALESCE(NEW.cmitem_tax_rateb,0.0)
      + COALESCE(NEW.cmitem_tax_ratec,0.0)) &lt;&gt; 0.0) THEN
      PERFORM recalculateCmheadTaxTotal(NEW.cmitem_cmhead_id);
    END IF;
  ELSE
    IF((COALESCE(NEW.cmitem_tax_ratea,0.0)
      + COALESCE(NEW.cmitem_tax_rateb,0.0)
      + COALESCE(NEW.cmitem_tax_ratec,0.0))
       &lt;&gt; 
       (COALESCE(OLD.cmitem_tax_ratea,0.0)
      + COALESCE(OLD.cmitem_tax_rateb,0.0)
      + COALESCE(OLD.cmitem_tax_ratec,0.0)) ) THEN
      PERFORM recalculateCmheadTaxTotal(NEW.cmitem_cmhead_id);
    END IF;
  END IF;
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-cntsliptrigger">_cntsliptrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _p RECORD;
  _comments TEXT;
  _temp TEXT;

BEGIN
  IF (TG_OP = &#39;DELETE&#39;) THEN
    SELECT itemsite_loccntrl, itemsite_controlmethod,
           cntslip_posted, cntslip_lotserial, cntslip_comments,
           cntslip_number, cntslip_qty INTO _p
      FROM cntslip, invcnt, itemsite
     WHERE ( (cntslip_cnttag_id=invcnt_id)
       AND   (invcnt_itemsite_id=itemsite_id)
       AND   (cntslip_id=OLD.cntslip_id) );

    IF(_p.cntslip_posted) THEN
      SELECT ( &#39;
Count Slip #&#39; || _p.cntslip_number ||
             &#39; deleted &#39; || formatQty(_p.cntslip_qty) ) INTO _comments;

--  Add the Location name if the itemsite is MLC
      IF (_p.itemsite_loccntrl) THEN
        SELECT ( &#39;, Location:&#39; || location_name ) INTO _temp
          FROM location, cntslip
         WHERE ( (cntslip_location_id=location_id)
           AND   (cntslip_id=OLD.cntslip_id) );
  
        _comments := (_comments || _temp);
      END IF;
  
--  Add the Lot/Serial if the itemsite is Lot or Serial controlled
      IF (_p.itemsite_controlmethod = &#39;L&#39;) THEN
        _comments := (_comments || ( &#39;, Lot #:&#39; || _p.cntslip_lotserial));
      ELSIF (_p.itemsite_controlmethod = &#39;S&#39;) THEN
        _comments := (_comments || ( &#39;, Serial #:&#39; || _p.cntslip_lotserial));
      END IF;
  
      _comments := (_comments || &#39; &#39; || _p.cntslip_comments);
  
      UPDATE invcnt
         SET invcnt_qoh_after = ( COALESCE(invcnt_qoh_after, 0) - cntslip_qty),
             invcnt_comments = (invcnt_comments || _comments)
        FROM cntslip
       WHERE ( (cntslip_cnttag_id=invcnt_id)
         AND   (NOT invcnt_posted)
         AND   (cntslip_id=OLD.cntslip_id) );

    END IF;

    RETURN OLD;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-cobilltrigger">_cobilltrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (TG_OP = &#39;DELETE&#39;) THEN
    IF((COALESCE(OLD.cobill_tax_ratea,0.0)
      + COALESCE(OLD.cobill_tax_rateb,0.0)
      + COALESCE(OLD.cobill_tax_ratec,0.0)) &lt;&gt; 0.0) THEN
      PERFORM recalculateCobmiscTaxTotal(OLD.cobill_cobmisc_id);
    END IF;
    RETURN OLD;
  END IF;
  IF (TG_OP = &#39;INSERT&#39;) THEN
    IF((COALESCE(NEW.cobill_tax_ratea,0.0)
      + COALESCE(NEW.cobill_tax_rateb,0.0)
      + COALESCE(NEW.cobill_tax_ratec,0.0)) &lt;&gt; 0.0) THEN
      PERFORM recalculateCobmiscTaxTotal(NEW.cobill_cobmisc_id);
    END IF;
  ELSE
    IF((COALESCE(NEW.cobill_tax_ratea,0.0)
      + COALESCE(NEW.cobill_tax_rateb,0.0)
      + COALESCE(NEW.cobill_tax_ratec,0.0))
       &lt;&gt; 
       (COALESCE(OLD.cobill_tax_ratea,0.0)
      + COALESCE(OLD.cobill_tax_rateb,0.0)
      + COALESCE(OLD.cobill_tax_ratec,0.0)) ) THEN
      PERFORM recalculateCobmiscTaxTotal(NEW.cobill_cobmisc_id);
    END IF;
  END IF;
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-cobmisctrigger">_cobmisctrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (TG_OP = &#39;DELETE&#39;) THEN
    -- Something can go here
    RETURN OLD;
  END IF;
  IF (TG_OP = &#39;INSERT&#39;) THEN
    -- Something can go here
  ELSE
    IF((COALESCE(NEW.cobmisc_adjtax_ratea,0.0)
      + COALESCE(NEW.cobmisc_adjtax_rateb,0.0)
      + COALESCE(NEW.cobmisc_adjtax_ratec,0.0)
      + COALESCE(NEW.cobmisc_freighttax_ratea,0.0)
      + COALESCE(NEW.cobmisc_freighttax_rateb,0.0)
      + COALESCE(NEW.cobmisc_freighttax_ratec,0.0))
       &lt;&gt; 
       (COALESCE(OLD.cobmisc_adjtax_ratea,0.0)
      + COALESCE(OLD.cobmisc_adjtax_rateb,0.0)
      + COALESCE(OLD.cobmisc_adjtax_ratec,0.0)
      + COALESCE(OLD.cobmisc_freighttax_ratea,0.0)
      + COALESCE(OLD.cobmisc_freighttax_rateb,0.0)
      + COALESCE(OLD.cobmisc_freighttax_ratec,0.0)) ) THEN
      PERFORM recalculateCobmiscTaxTotal(NEW.cobmisc_id);
    END IF;
  END IF;
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-commenttrigger">_commenttrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (NEW.comment_cmnttype_id IS NULL) THEN
	RAISE EXCEPTION &#39;You must supply a valid Comment Type ID.&#39;;
  END IF;
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-companytrigger">_companytrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _used	BOOLEAN := false;

BEGIN
  IF (NEW.company_external AND NOT OLD.company_external) THEN
    IF EXISTS(SELECT accnt_id
              FROM accnt, company, (
                  SELECT DISTINCT apaccnt_ap_accnt_id AS test_accnt_id FROM apaccnt
                  UNION SELECT DISTINCT apaccnt_discount_accnt_id FROM apaccnt
                  UNION SELECT DISTINCT apaccnt_prepaid_accnt_id FROM apaccnt
                  UNION SELECT DISTINCT apopen_accnt_id FROM apopen
                  UNION SELECT DISTINCT araccnt_ar_accnt_id FROM araccnt
                  UNION SELECT DISTINCT araccnt_deferred_accnt_id FROM araccnt
                  UNION SELECT DISTINCT araccnt_freight_accnt_id FROM araccnt
                  UNION SELECT DISTINCT araccnt_prepaid_accnt_id FROM araccnt
                  UNION SELECT DISTINCT armemo_accnt_id FROM armemo
                  UNION SELECT DISTINCT aropen_accnt_id FROM aropen
                  UNION SELECT DISTINCT bankaccnt_accnt_id FROM bankaccnt
                  UNION SELECT DISTINCT bankaccnt_rec_accnt_id FROM bankaccnt
                  UNION SELECT DISTINCT budgitem_accnt_id FROM budgitem
                  UNION SELECT DISTINCT cashrcptmisc_accnt_id FROM cashrcptmisc
                  UNION SELECT DISTINCT cmhead_misc_accnt_id FROM cmhead
                  UNION SELECT DISTINCT cobmisc_misc_accnt_id FROM cobmisc
                  UNION SELECT DISTINCT cohead_misc_accnt_id FROM cohead
                  UNION SELECT DISTINCT coitem_cos_accnt_id FROM coitem
                  UNION SELECT DISTINCT costcat_adjustment_accnt_id FROM costcat
                  UNION SELECT DISTINCT costcat_asset_accnt_id FROM costcat
                  UNION SELECT DISTINCT costcat_freight_accnt_id FROM costcat
                  UNION SELECT DISTINCT costcat_invcost_accnt_id FROM costcat
                  UNION SELECT DISTINCT costcat_laboroverhead_accnt_id FROM costcat
                  UNION SELECT DISTINCT costcat_liability_accnt_id FROM costcat
                  UNION SELECT DISTINCT costcat_matusage_accnt_id FROM costcat
                  UNION SELECT DISTINCT costcat_mfgscrap_accnt_id FROM costcat
                  UNION SELECT DISTINCT costcat_purchprice_accnt_id FROM costcat
                  UNION SELECT DISTINCT costcat_scrap_accnt_id FROM costcat
                  UNION SELECT DISTINCT costcat_shipasset_accnt_id FROM costcat
                  UNION SELECT DISTINCT costcat_toliability_accnt_id FROM costcat
                  UNION SELECT DISTINCT costcat_transform_accnt_id FROM costcat
                  UNION SELECT DISTINCT costcat_wip_accnt_id FROM costcat
                  UNION SELECT DISTINCT costelem_exp_accnt_id FROM costelem
                  UNION SELECT DISTINCT expcat_exp_accnt_id FROM expcat
                  UNION SELECT DISTINCT expcat_freight_accnt_id FROM expcat
                  UNION SELECT DISTINCT expcat_liability_accnt_id FROM expcat
                  UNION SELECT DISTINCT expcat_purchprice_accnt_id FROM expcat
                  UNION SELECT DISTINCT glseries_accnt_id FROM glseries
                  UNION SELECT DISTINCT gltrans_accnt_id FROM gltrans
                  UNION SELECT DISTINCT invchead_misc_accnt_id FROM invchead
                  UNION SELECT DISTINCT quhead_misc_accnt_id FROM quhead
                  UNION SELECT DISTINCT salesaccnt_cor_accnt_id FROM salesaccnt
                  UNION SELECT DISTINCT salesaccnt_cos_accnt_id FROM salesaccnt
                  UNION SELECT DISTINCT salesaccnt_cow_accnt_id FROM salesaccnt
                  UNION SELECT DISTINCT salesaccnt_credit_accnt_id FROM salesaccnt
                  UNION SELECT DISTINCT salesaccnt_returns_accnt_id FROM salesaccnt
                  UNION SELECT DISTINCT salesaccnt_sales_accnt_id FROM salesaccnt
                  UNION SELECT DISTINCT salescat_ar_accnt_id FROM salescat
                  UNION SELECT DISTINCT salescat_prepaid_accnt_id FROM salescat
                  UNION SELECT DISTINCT salescat_sales_accnt_id FROM salescat
                  UNION SELECT DISTINCT stdjrnlitem_accnt_id FROM stdjrnlitem
                  UNION SELECT DISTINCT tax_sales_accnt_id FROM tax
                  UNION SELECT DISTINCT tax_salesb_accnt_id FROM tax
                  UNION SELECT DISTINCT tax_salesc_accnt_id FROM tax
                  UNION SELECT DISTINCT taxauth_accnt_id FROM taxauth
                  UNION SELECT DISTINCT vodist_accnt_id FROM vodist
                  UNION SELECT DISTINCT warehous_default_accnt_id FROM whsinfo
                ) AS dummy
              WHERE ((accnt_id=test_accnt_id)
                AND  (accnt_company=company_number)
                AND  (accnt_company=NEW.company_number))
    ) THEN
      RAISE EXCEPTION &#39;Cannot make Company % External because it is used in the local database.&#39;,
                      NEW.company_number;
    ELSIF (fetchMetricBool(&#39;EnableReturnAuth&#39;)) THEN
      IF EXISTS(SELECT accnt_id
              FROM accnt, company, (
                  SELECT DISTINCT rahead_misc_accnt_id AS test_accnt_id FROM rahead
                  UNION SELECT DISTINCT raitem_cos_accnt_id FROM raitem
                ) AS dummy
              WHERE ((accnt_id=test_accnt_id)
                AND  (accnt_company=company_number)
                AND  (accnt_company=NEW.company_number))
      ) THEN
        RAISE EXCEPTION &#39;Cannot make Company % External because it is used in the local database.&#39;,
                        NEW.company_number;
      END IF;
    END IF;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-crmacctaftertrigger">_crmacctaftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _cmnttypeid INTEGER;
BEGIN
  -- propagate crmacct_number change
  IF (TG_OP = &#39;INSERT&#39; OR TG_OP = &#39;UPDATE&#39;) THEN
    IF (NEW.crmacct_cust_id IS NOT NULL) THEN
      UPDATE custinfo SET cust_number = NEW.crmacct_number
      WHERE ((cust_id=NEW.crmacct_cust_id)
        AND  (cust_number!=NEW.crmacct_number));
      UPDATE custinfo SET cust_name = NEW.crmacct_name
      WHERE ((cust_id=NEW.crmacct_cust_id)
        AND  (cust_name!=NEW.crmacct_name));
    END IF;

    IF (NEW.crmacct_prospect_id IS NOT NULL) THEN
      UPDATE prospect SET prospect_number = NEW.crmacct_number
      WHERE ((prospect_id=NEW.crmacct_prospect_id)
        AND  (prospect_number!=NEW.crmacct_number));
      UPDATE prospect SET prospect_name = NEW.crmacct_name
      WHERE ((prospect_id=NEW.crmacct_prospect_id)
        AND  (prospect_name!=NEW.crmacct_name));
    END IF;

    IF (NEW.crmacct_vend_id IS NOT NULL) THEN
      UPDATE vendinfo SET vend_number = NEW.crmacct_number
      WHERE ((vend_id=NEW.crmacct_vend_id)
        AND  (vend_number!=NEW.crmacct_number));
      UPDATE vendinfo SET vend_name = NEW.crmacct_name
      WHERE ((vend_id=NEW.crmacct_vend_id)
        AND  (vend_name!=NEW.crmacct_name));
    END IF;

    IF (NEW.crmacct_taxauth_id IS NOT NULL) THEN
      UPDATE taxauth SET taxauth_code = NEW.crmacct_number
      WHERE ((taxauth_id=NEW.crmacct_taxauth_id)
        AND  (taxauth_code!=NEW.crmacct_number));
      UPDATE taxauth SET taxauth_name = NEW.crmacct_name
      WHERE ((taxauth_id=NEW.crmacct_taxauth_id)
        AND  (taxauth_name!=NEW.crmacct_name));
    END IF;
  END IF;

--  Cache the cmnttype_id for ChangeLog
  SELECT cmnttype_id INTO _cmnttypeid
    FROM cmnttype
   WHERE (cmnttype_name=&#39;ChangeLog&#39;);
  IF (FOUND) THEN
    IF (TG_OP = &#39;INSERT&#39;) THEN
      PERFORM postComment(_cmnttypeid, &#39;CRMA&#39;, NEW.crmacct_id, (&#39;Created by &#39; || CURRENT_USER));
    END IF;
  END IF;

  IF (TG_OP = &#39;DELETE&#39;) THEN
    DELETE FROM imageass WHERE ((imageass_source_id=OLD.crmacct_id) AND (imageass_source=&#39;CRMA&#39;));
    DELETE FROM url WHERE ((url_source_id=OLD.crmacct_id) AND (url_source=&#39;CRMA&#39;));

    RETURN OLD;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-crmacctbeforetrigger">_crmacctbeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  -- disallow reusing crmacct_numbers
  IF (TG_OP = &#39;INSERT&#39;) THEN
    IF (crmAcctNumberUsed(NEW.crmacct_number, NEW.crmacct_id)) THEN
      RETURN OLD;
    END IF;

  ELSEIF (TG_OP = &#39;UPDATE&#39; AND OLD.crmacct_number != NEW.crmacct_number) THEN
    IF (crmAcctNumberUsed(NEW.crmacct_number, NEW.crmacct_id)) THEN
      RETURN OLD;
    END IF;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-custaftertrigger">_custaftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _crmacctid	INTEGER;
BEGIN
  SELECT crmacct_id INTO _crmacctid
  FROM crmacct
  WHERE crmacct_cust_id = NEW.cust_id;

  IF (TG_OP = &#39;INSERT&#39;) THEN
    SELECT crmacct_id INTO _crmacctid
    FROM crmacct
    WHERE crmacct_number=NEW.cust_number;
    IF (FOUND) THEN
      UPDATE crmacct 
      SET crmacct_cust_id=NEW.cust_id,crmacct_name=NEW.cust_name,crmacct_prospect_id=NULL
      WHERE crmacct_id=_crmacctid;
      DELETE FROM prospect WHERE prospect_id=NEW.cust_id;
    ELSE
      PERFORM createCrmAcct(NEW.cust_number, NEW.cust_name, NEW.cust_active, &#39;O&#39;, NEW.cust_id,
                            NULL, NULL, NULL, NULL, NULL, NEW.cust_cntct_id, NEW.cust_corrcntct_id); 
    END IF;
  END IF;

  IF (TG_OP = &#39;UPDATE&#39;) THEN
    UPDATE crmacct SET crmacct_number = NEW.cust_number
    WHERE ((crmacct_cust_id=NEW.cust_id)
      AND  (crmacct_number!=NEW.cust_number));
    UPDATE crmacct SET crmacct_name = NEW.cust_name
    WHERE ((crmacct_cust_id=NEW.cust_id)
      AND  (crmacct_name!=NEW.cust_name));
  END IF;

  -- If this is imported, go ahead and insert default characteristics
   IF (TG_OP = &#39;INSERT&#39;) THEN
     PERFORM updateCharAssignment(&#39;C&#39;, NEW.cust_id, char_id, charass_value) 
     FROM (
       SELECT DISTINCT char_id, char_name, charass_value
       FROM charass, char, custtype
       WHERE ((custtype_id=NEW.cust_custtype_id)
       AND (custtype_char)
       AND (charass_target_type=&#39;CT&#39;) 
       AND (charass_target_id=custtype_id)
       AND (charass_default)
       AND (char_id=charass_char_id))
       ORDER BY char_name) AS data;
   END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-custtrigger">_custtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _cmnttypeid INTEGER;
  _oldCreditStatus TEXT;
  _newCreditStatus TEXT;
  _openAmount NUMERIC;
  _check BOOLEAN;

BEGIN

--  Checks
  SELECT checkPrivilege(&#39;MaintainCustomerMasters&#39;) OR checkPrivilege(&#39;PostMiscInvoices&#39;) INTO _check;
  IF NOT (_check) THEN
    RAISE EXCEPTION &#39;You do not have privileges to maintain Customers.&#39;;
  END IF;

  IF (TG_OP IN (&#39;INSERT&#39;,&#39;UPDATE&#39;)) THEN
    IF (NEW.cust_number IS NULL) THEN
	  RAISE EXCEPTION &#39;You must supply a valid Customer Number.&#39;;
    END IF;

    IF (LENGTH(COALESCE(NEW.cust_name,&#39;&#39;))=0) THEN
	  RAISE EXCEPTION &#39;You must supply a valid Customer Name.&#39;;
    END IF;

    IF (NEW.cust_custtype_id IS NULL) THEN
	  RAISE EXCEPTION &#39;You must supply a valid Customer Type ID.&#39;;
    END IF;

    IF (NEW.cust_salesrep_id IS NULL) THEN
  	  RAISE EXCEPTION &#39;You must supply a valid Sales Rep ID.&#39;;
    END IF;

    IF (NEW.cust_shipform_id IS NULL) THEN
	  RAISE EXCEPTION &#39;You must supply a valid Ship Form ID.&#39;;
    END IF;

    IF (NEW.cust_terms_id IS NULL) THEN
	  RAISE EXCEPTION &#39;You must supply a valid Terms Code ID.&#39;;
    END IF;
  END IF;

  IF ( SELECT (metric_value=&#39;t&#39;)
       FROM metric
       WHERE (metric_name=&#39;CustomerChangeLog&#39;) ) THEN

--  Cache the cmnttype_id for ChangeLog
    SELECT cmnttype_id INTO _cmnttypeid
    FROM cmnttype
    WHERE (cmnttype_name=&#39;ChangeLog&#39;);
    IF (FOUND) THEN
      IF (TG_OP = &#39;INSERT&#39;) THEN
        PERFORM postComment(_cmnttypeid, &#39;C&#39;, NEW.cust_id, &#39;Created&#39;);

      ELSIF (TG_OP = &#39;DELETE&#39;) THEN
	PERFORM postComment(_cmnttypeid, &#39;C&#39;, OLD.cust_id,
			    (&#39;Deleted &quot;&#39; || OLD.cust_number || &#39;&quot;&#39;));

      ELSIF (TG_OP = &#39;UPDATE&#39;) THEN

--  Handle cust_number
        IF (OLD.cust_number &lt;&gt; NEW.cust_number) THEN
          PERFORM postComment( _cmnttypeid, &#39;C&#39;, NEW.cust_id,
                               (&#39;Number Changed from &quot;&#39; || OLD.cust_number || &#39;&quot; to &quot;&#39; || NEW.cust_number || &#39;&quot;&#39;) );
        END IF;

        IF (OLD.cust_name &lt;&gt; NEW.cust_name) THEN
          PERFORM postComment( _cmnttypeid, &#39;C&#39;, NEW.cust_id,
                               (&#39;Name Changed from &quot;&#39; || OLD.cust_name || &#39;&quot; to &quot;&#39; || NEW.cust_name || &#39;&quot;&#39;) );
        END IF;

--  Handle cust_active
        IF (OLD.cust_active &lt;&gt; NEW.cust_active) THEN
          IF (NEW.cust_active) THEN
            PERFORM postComment(_cmnttypeid, &#39;C&#39;, NEW.cust_id, &#39;Activated&#39;);
          ELSE
            PERFORM postComment(_cmnttypeid, &#39;C&#39;, NEW.cust_id, &#39;Deactivated&#39;);
          END IF;
        END IF;

--  Handle cust_discntprcnt
        IF (OLD.cust_discntprcnt &lt;&gt; NEW.cust_discntprcnt) THEN
          PERFORM postComment( _cmnttypeid, &#39;C&#39;, NEW.cust_id,
                               (&#39;Discount Changed from &quot;&#39; || formatprcnt(OLD.cust_discntprcnt)
                                 || &#39;%&quot; to &quot;&#39; || formatprcnt(NEW.cust_discntprcnt) || &#39;%&quot;&#39;) );
        END IF;

--  Handle cust_creditlmt
        IF (OLD.cust_creditlmt &lt;&gt; NEW.cust_creditlmt) THEN
          PERFORM postComment( _cmnttypeid, &#39;C&#39;, NEW.cust_id,
                               ( &#39;Credit Limit Changed from &#39; || formatMoney(OLD.cust_creditlmt) ||
                                 &#39; to &#39; || formatMoney(NEW.cust_creditlmt) ) );
        END IF;

        IF (OLD.cust_creditstatus &lt;&gt; NEW.cust_creditstatus) THEN
          IF (OLD.cust_creditstatus = &#39;G&#39;) THEN
            _oldCreditStatus := &#39;In Good Standing&#39;;
          ELSIF (OLD.cust_creditstatus = &#39;W&#39;) THEN
            _oldCreditStatus := &#39;Credit Warning&#39;;
          ELSIF (OLD.cust_creditstatus = &#39;H&#39;) THEN
            _oldCreditStatus := &#39;Credit Hold&#39;;
          ELSE
            _oldCreditStatus := &#39;Unknown/Error&#39;;
          END IF;

          IF (NEW.cust_creditstatus = &#39;G&#39;) THEN
            _newCreditStatus := &#39;In Good Standing&#39;;
          ELSIF (NEW.cust_creditstatus = &#39;W&#39;) THEN
            _newCreditStatus := &#39;Credit Warning&#39;;
          ELSIF (NEW.cust_creditstatus = &#39;H&#39;) THEN
            _newCreditStatus := &#39;Credit Hold&#39;;
          ELSE
            _newCreditStatus := &#39;Unknown/Error&#39;;
          END IF;

          PERFORM postComment( _cmnttypeid, &#39;C&#39;, NEW.cust_id,
                               (&#39;Credit Status Changed from &quot;&#39; || _oldCreditStatus || &#39;&quot; to &quot;&#39; || _newCreditStatus || &#39;&quot;&#39;) );
        END IF;

      END IF;
    END IF;
  END IF;

  IF (TG_OP = &#39;DELETE&#39;) THEN
    UPDATE crmacct SET crmacct_cust_id = NULL WHERE crmacct_cust_id = OLD.cust_id;
    RETURN OLD;
  END IF;
  
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-custtypetrigger">_custtypetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _check      BOOLEAN;
  _code       TEXT;

BEGIN

--  Checks
  IF (TG_OP IN (&#39;INSERT&#39;,&#39;UPDATE&#39;)) THEN

    IF (LENGTH(COALESCE(NEW.custtype_code, &#39;&#39;))=0) THEN
      RAISE EXCEPTION &#39;You must supply a valid Customer Type Code.&#39;;
    END IF;

    SELECT custtype_code INTO _code
    FROM custtype
    WHERE ( (UPPER(custtype_code)=UPPER(NEW.custtype_code))
      AND (custtype_id&lt;&gt;NEW.custtype_id) );
    IF (FOUND) THEN
      RAISE EXCEPTION &#39;The Customer Type Code entered cannot be used as it is in use.&#39;;
    END IF;

  END IF;
  
  IF (TG_OP = &#39;DELETE&#39;) THEN
    RETURN OLD;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-empaftertrigger">_empaftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _salesrepempid  INTEGER;
  _salesrepid     INTEGER;
  _salesrepnumber TEXT;
  _usrid          INTEGER;
  _username       TEXT;
BEGIN
  IF (TG_OP = &#39;INSERT&#39;) THEN
    SELECT usr_id INTO _usrid FROM usr WHERE (usr_username=NEW.emp_code);

    IF ((NOT FOUND AND COALESCE(NEW.emp_usr_id, -1) &gt; 0) OR
        (FOUND     AND COALESCE(NEW.emp_usr_id, _usrid) !=_usrid)) THEN
      RAISE EXCEPTION &#39;This Employee Code is associated with a User Name and may not be changed.&#39;;
    ELSIF (FOUND AND COALESCE(NEW.emp_usr_id, _usrid) != _usrid) THEN
      RAISE EXCEPTION &#39;This Employee Code is already in use as a User Name. Please choose a different Employee Code.&#39;;
    END IF;

  ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
    IF (OLD.emp_code != NEW.emp_code) THEN
      SELECT usr_id INTO _usrid FROM usr WHERE (usr_username=NEW.emp_code);

      IF ((NOT FOUND AND COALESCE(NEW.emp_usr_id, -1) &gt; 0) OR
          (FOUND     AND COALESCE(NEW.emp_usr_id, _usrid) !=_usrid)) THEN
        RAISE EXCEPTION &#39;This Employee Code is associated with a User Name and may not be changed.&#39;;
      ELSIF (FOUND AND COALESCE(NEW.emp_usr_id, _usrid) != _usrid) THEN
        RAISE EXCEPTION &#39;This Employee Code is already in use as a User Name. Please choose a different Employee Code.&#39;;
      END IF;
    END IF;
  END IF;

  IF (TG_OP = &#39;UPDATE&#39; OR TG_OP = &#39;INSERT&#39;) THEN
    SELECT salesrep_id, salesrep_emp_id INTO _salesrepid, _salesrepempid
    FROM salesrep
    WHERE (salesrep_number=NEW.emp_code);

    IF (NOT FOUND) THEN
      SELECT salesrep_number, salesrep_id INTO _salesrepnumber, _salesrepid
      FROM salesrep WHERE salesrep_emp_id=NEW.emp_id;
      IF (_salesrepnumber != NEW.emp_code) THEN
        UPDATE salesrep SET salesrep_number=NEW.emp_code WHERE (salesrep_id=_salesrepid);
      END IF;
    ELSIF (FOUND AND _salesrepempid IS NULL) THEN
      UPDATE salesrep SET salesrep_emp_id=NEW.emp_id
      WHERE salesrep_id=_salesrepid;
    ELSIF (FOUND AND COALESCE(_salesrepempid, NEW.emp_id) != NEW.emp_id) THEN
      RAISE EXCEPTION &#39;This Employee Code is already in use by a Sales Rep. Please choose a different Employee Code.&#39;;
    END IF;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-empbeforetrigger">_empbeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _cmnttypeid   INTEGER;

BEGIN

  --  Checks
  IF NOT (checkPrivilege(&#39;MaintainEmployees&#39;)) THEN
    RAISE EXCEPTION &#39;You do not have privileges to maintain Employees.&#39;;
  END IF;

  IF (TG_OP IN (&#39;INSERT&#39;,&#39;UPDATE&#39;)) THEN
    IF (NEW.emp_code IS NULL) THEN
      RAISE EXCEPTION &#39;You must supply a valid Employee Code.&#39;;
    END IF;

    IF (NEW.emp_number IS NULL) THEN
      RAISE EXCEPTION &#39;You must supply a valid Employee Number.&#39;;
    END IF;

    IF (NEW.emp_id = NEW.emp_mgr_emp_id) THEN
      RAISE EXCEPTION &#39;An Employee may not be his or her own Manager.&#39;;
    END IF;

  END IF;

  IF ( SELECT (metric_value=&#39;t&#39;)
       FROM metric
       WHERE (metric_name=&#39;EmployeeChangeLog&#39;) ) THEN

    SELECT cmnttype_id INTO _cmnttypeid
    FROM cmnttype
    WHERE (cmnttype_name=&#39;ChangeLog&#39;);

    IF (FOUND) THEN
      IF (TG_OP = &#39;INSERT&#39;) THEN
        PERFORM postComment(_cmnttypeid, &#39;EMP&#39;, NEW.emp_id, &#39;Created&#39;);

      ELSIF (TG_OP = &#39;DELETE&#39;) THEN
	PERFORM postComment(_cmnttypeid, &#39;EMP&#39;, OLD.emp_id,
			    (&#39;Deleted &quot;&#39; || OLD.emp_code || &#39;&quot;&#39;));

      ELSIF (TG_OP = &#39;UPDATE&#39;) THEN

        IF (OLD.emp_number &lt;&gt; NEW.emp_number) THEN
          PERFORM postComment( _cmnttypeid, &#39;EMP&#39;, NEW.emp_id,
                               (&#39;Number Changed from &quot;&#39; || OLD.emp_number || &#39;&quot; to &quot;&#39; || NEW.emp_number || &#39;&quot;&#39;) );
        END IF;

        IF (OLD.emp_code &lt;&gt; NEW.emp_code) THEN
          PERFORM postComment( _cmnttypeid, &#39;EMP&#39;, NEW.emp_id,
                               (&#39;Code Changed from &quot;&#39; || OLD.emp_code || &#39;&quot; to &quot;&#39; || NEW.emp_code || &#39;&quot;&#39;) );
        END IF;

        IF (OLD.emp_active &lt;&gt; NEW.emp_active) THEN
          IF (NEW.emp_active) THEN
            PERFORM postComment(_cmnttypeid, &#39;EMP&#39;, NEW.emp_id, &#39;Activated&#39;);
          ELSE
            PERFORM postComment(_cmnttypeid, &#39;EMP&#39;, NEW.emp_id, &#39;Deactivated&#39;);
          END IF;
        END IF;

        IF (COALESCE(OLD.emp_dept_id, -1) &lt;&gt; COALESCE(NEW.emp_dept_id, -1)) THEN
          PERFORM postComment(_cmnttypeid, &#39;EMP&#39;, NEW.emp_id,
                              (&#39;Department Changed from &quot;&#39; ||
                               COALESCE((SELECT dept_number FROM dept WHERE dept_id=OLD.emp_dept_id), &#39;&#39;)
                              || &#39;&quot; to &quot;&#39; ||
                               COALESCE((SELECT dept_number FROM dept WHERE dept_id=NEW.emp_dept_id), &#39;&#39;)
                               || &#39;&quot;&#39;));
        END IF;

        IF (COALESCE(OLD.emp_shift_id, -1) &lt;&gt; COALESCE(NEW.emp_shift_id, -1)) THEN
          PERFORM postComment(_cmnttypeid, &#39;EMP&#39;, NEW.emp_id,
                              (&#39;Shift Changed from &quot;&#39; ||
                               COALESCE((SELECT shift_number FROM shift WHERE shift_id=OLD.emp_shift_id), &#39;&#39;)
                              || &#39;&quot; to &quot;&#39; ||
                               COALESCE((SELECT shift_number FROM shift WHERE shift_id=NEW.emp_shift_id), &#39;&#39;)
                               || &#39;&quot;&#39;));
        END IF;

      END IF;
    END IF;
  END IF;

  IF (TG_OP = &#39;DELETE&#39;) THEN
    UPDATE salesrep SET salesrep_emp_id = NULL WHERE salesrep_emp_id = OLD.emp_id;
    RETURN OLD;
  ELSIF (TG_OP = &#39;INSERT&#39; ) THEN
    IF (NEW.emp_usr_id IS NULL) THEN
      SELECT usr_id INTO NEW.emp_usr_id
      FROM usr WHERE (usr_username=NEW.emp_code);
    END IF;
  ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
    IF (OLD.emp_code != NEW.emp_code AND NEW.emp_usr_id IS NULL) THEN
      SELECT usr_id INTO NEW.emp_usr_id
      FROM usr WHERE (usr_username=NEW.emp_code);
    END IF;
  END IF;
  
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-gltransaltertrigger">_gltransaltertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _externalCompany      BOOLEAN := false;
  _updated BOOLEAN := false;
BEGIN
  IF(TG_OP=&#39;DELETE&#39;) THEN
    RAISE EXCEPTION &#39;You may not delete G/L Transactions once they have been created.&#39;;
  ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
    SELECT company_external INTO _externalCompany
    FROM company JOIN accnt ON (company_number=accnt_company)
    WHERE (accnt_id=NEW.gltrans_accnt_id);
    IF (_externalCompany) THEN
      RAISE EXCEPTION &#39;Transactions are not allowed for G/L Accounts with External Company segments.&#39;;
    END IF;

    IF(OLD.gltrans_id != NEW.gltrans_id) THEN
      _updated := true;
    ELSIF(OLD.gltrans_date != NEW.gltrans_date) THEN
      _updated := true;
    ELSIF(OLD.gltrans_accnt_id != NEW.gltrans_accnt_id) THEN
      _updated := true;
    ELSIF(OLD.gltrans_amount != NEW.gltrans_amount) THEN
      _updated := true;
    ELSIF(OLD.gltrans_username != NEW.gltrans_username) THEN
      _updated := true;
    ELSIF( (OLD.gltrans_sequence IS NULL     AND NEW.gltrans_sequence IS NOT NULL)
        OR (OLD.gltrans_sequence IS NOT NULL AND NEW.gltrans_sequence IS NULL)
        OR (COALESCE(OLD.gltrans_sequence,0) != COALESCE(NEW.gltrans_sequence,0)) ) THEN
      _updated := true;
    ELSIF( (OLD.gltrans_created IS NULL     AND NEW.gltrans_created IS NOT NULL)
        OR (OLD.gltrans_created IS NOT NULL AND NEW.gltrans_created IS NULL)
        OR (COALESCE(OLD.gltrans_created,now()) != COALESCE(NEW.gltrans_created,now())) ) THEN
      _updated := true;
    ELSIF( (OLD.gltrans_source IS NULL     AND NEW.gltrans_source IS NOT NULL)
        OR (OLD.gltrans_source IS NOT NULL AND NEW.gltrans_source IS NULL)
        OR (COALESCE(OLD.gltrans_source,&#39;&#39;) != COALESCE(NEW.gltrans_source,&#39;&#39;)) ) THEN
      _updated := true;
    ELSIF( (OLD.gltrans_docnumber IS NULL     AND NEW.gltrans_docnumber IS NOT NULL)
        OR (OLD.gltrans_docnumber IS NOT NULL AND NEW.gltrans_docnumber IS NULL)
        OR (COALESCE(OLD.gltrans_docnumber,&#39;&#39;) != COALESCE(NEW.gltrans_docnumber,&#39;&#39;)) ) THEN
      _updated := true;
    ELSIF( (OLD.gltrans_doctype IS NULL     AND NEW.gltrans_doctype IS NOT NULL)
        OR (OLD.gltrans_doctype IS NOT NULL AND NEW.gltrans_doctype IS NULL)
        OR (COALESCE(OLD.gltrans_doctype,&#39;&#39;) != COALESCE(NEW.gltrans_doctype,&#39;&#39;)) ) THEN
      _updated := true;
    END IF;

    IF(_updated) THEN
      RAISE EXCEPTION &#39;You may not alter some G/L Transaction fields once they have been created.&#39;;
    END IF;
  ELSE
    RAISE EXCEPTION &#39;trigger for gltrans table called in unexpected state.&#39;;
  END IF;
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-gltransinserttrigger">_gltransinserttrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _reqNotes BOOLEAN;
  _externalCompany      BOOLEAN := false;
BEGIN
  -- Checks
  -- Start with privileges
  IF ((NEW.gltrans_doctype=&#39;JE&#39;) AND (NOT checkPrivilege(&#39;PostJournalEntries&#39;))) THEN
      RAISE EXCEPTION &#39;You do not have privileges to create a Journal Entry.&#39;;
  END IF;

  SELECT company_external INTO _externalCompany
  FROM company JOIN accnt ON (company_number=accnt_company)
  WHERE (accnt_id=NEW.gltrans_accnt_id);
  IF (_externalCompany) THEN
    RAISE EXCEPTION &#39;Transactions are not allowed for G/L Accounts with External Company segments.&#39;;
  END IF;
  -- RAISE NOTICE &#39;_gltransInsertTrigger(): company_external = %&#39;, _externalCompany;

  SELECT metric_value=&#39;t&#39;
    INTO _reqNotes
    FROM metric
   WHERE(metric_name=&#39;MandatoryGLEntryNotes&#39;);
  IF (_reqNotes IS NULL) THEN
    _reqNotes := false;
  END IF;
  IF ((NEW.gltrans_doctype=&#39;JE&#39;) AND _reqNotes AND (TRIM(BOTH FROM COALESCE(NEW.gltrans_notes,&#39;&#39;))=&#39;&#39;)) THEN
      RAISE EXCEPTION &#39;Notes are required for Journal Entries.&#39;;
  END IF;
  
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-grpprivtrigger">_grpprivtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _check BOOLEAN;
  _returnVal INTEGER;
BEGIN
  -- This looks like a candidate for a foreign key but isn&#39;t.
  -- fkeys don&#39;t work if the foreign key value resides in a child of the 
  -- table and not the table itself.
  IF ((TG_OP = &#39;UPDATE&#39; OR TG_OP = &#39;INSERT&#39;) AND
      (NOT EXISTS(SELECT priv_id
                  FROM priv
                  WHERE (priv_id=NEW.grppriv_priv_id)))) THEN
    RAISE EXCEPTION &#39;Privilege id % does not exist or is part of a disabled package.&#39;,
                NEW.grppriv_priv_id;
    RETURN OLD;

  ELSIF (TG_OP = &#39;DELETE&#39;) THEN
    RETURN OLD;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-incdtbeforetrigger">_incdtbeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _check        BOOLEAN;
  _crmacct      INTEGER;

BEGIN

  --  Checks
  -- Start with privileges
  IF (TG_OP = &#39;INSERT&#39;) THEN
    SELECT checkPrivilege(&#39;AddIncidents&#39;) INTO _check;
    IF NOT (_check) THEN
      RAISE EXCEPTION &#39;You do not have privileges to add new Incidents.&#39;;
    END IF;
  ELSE
    SELECT checkPrivilege(&#39;MaintainIncidents&#39;) INTO _check;
    IF NOT (_check) THEN
      RAISE EXCEPTION &#39;You do not have privileges to alter an Incident.&#39;;
    END IF;
  END IF;

  -- Set the incident number if blank
  IF (TG_OP = &#39;INSERT&#39;) THEN
    IF (NEW.incdt_number IS NULL) THEN
      SELECT fetchIncidentNumber() INTO NEW.incdt_number;
    END IF;
  END IF;

  -- Description is required
  IF (LENGTH(COALESCE(NEW.incdt_summary,&#39;&#39;))=0) THEN
    RAISE EXCEPTION &#39;You must supply a valid Incident Description.&#39;;
  END IF;
  
  -- CRM Account is required
  IF (NEW.incdt_crmacct_id IS NULL) THEN
    RAISE EXCEPTION &#39;You must supply a valid CRM Account.&#39;;
  END IF;

  -- Contact is required
  IF (NEW.incdt_cntct_id IS NULL) THEN
    RAISE EXCEPTION &#39;You must supply a valid Contact.&#39;;
  END IF;

  -- Make sure Contact is associated with CRM Account
  SELECT COALESCE(cntct_crmacct_id, -1) INTO _crmacct
  FROM cntct
  WHERE (cntct_id=NEW.incdt_cntct_id);
  IF (_crmacct != NEW.incdt_crmacct_id) THEN
    RAISE EXCEPTION &#39;This Contact is affiliated with a different CRM Account.&#39;;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-incdttrigger">_incdttrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _r		RECORD;
  _counter	INTEGER :=  0;
  _whsId	INTEGER := -1;
  _evntType	TEXT;
BEGIN

  IF (TG_OP = &#39;DELETE&#39;) THEN
--  This should never happen
    RETURN OLD;
  ELSIF (TG_OP = &#39;INSERT&#39;) THEN
    INSERT INTO incdthist
	  (incdthist_incdt_id,
	   incdthist_change, incdthist_target_id,
	   incdthist_descrip)
    VALUES(NEW.incdt_id,
	   &#39;N&#39;, NULL,
	   &#39;Incident Added&#39;);

    _evntType = &#39;NewIncident&#39;;

  ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
    _evntType = &#39;UpdatedIncident&#39;;

    IF (COALESCE(NEW.incdt_cntct_id,-1) &lt;&gt; COALESCE(OLD.incdt_cntct_id,-1)) THEN
      INSERT INTO incdthist
	    (incdthist_incdt_id,
	     incdthist_change, incdthist_target_id,
	     incdthist_descrip)
      VALUES(NEW.incdt_id,
	     &#39;C&#39;, NEW.incdt_cntct_id,
	     (&#39;Contact Changed: &quot;&#39; ||
	       COALESCE((SELECT cntct_first_name || &#39; &#39; || cntct_last_name
			   FROM cntct
			  WHERE (cntct_id=OLD.incdt_cntct_id)), &#39;&#39;)
	      || &#39;&quot; -&gt; &quot;&#39; ||
	       COALESCE((SELECT cntct_first_name || &#39; &#39; || cntct_last_name
			   FROM cntct
			  WHERE (cntct_id=NEW.incdt_cntct_id)), &#39;&#39;)
	      || &#39;&quot;&#39;) );
    END IF;

    IF (COALESCE(NEW.incdt_summary,&#39;&#39;) &lt;&gt; COALESCE(OLD.incdt_summary,&#39;&#39;)) THEN
      INSERT INTO incdthist
	    (incdthist_incdt_id,
	     incdthist_descrip)
      VALUES(NEW.incdt_id,
	     (&#39;Summary Updated: &quot;&#39; ||
	       COALESCE(OLD.incdt_summary, &#39;&#39;) ||
	      &#39;&quot; -&gt; &quot;&#39; ||
	       COALESCE(NEW.incdt_summary, &#39;&#39;) ||
	      &#39;&quot;&#39;) );
    END IF;

    IF (COALESCE(NEW.incdt_descrip,&#39;&#39;) &lt;&gt; COALESCE(OLD.incdt_descrip,&#39;&#39;)) THEN
      INSERT INTO incdthist
	    (incdthist_incdt_id,
	     incdthist_descrip)
      VALUES(NEW.incdt_id,
	     (&#39;Description Updated: &quot;&#39; ||
	       substr(COALESCE(OLD.incdt_descrip, &#39;&#39;), 1, 20) ||
	      &#39;...&quot; -&gt; &quot;&#39; ||
	       substr(COALESCE(NEW.incdt_descrip, &#39;&#39;), 1, 20) ||
	      &#39;...&quot;&#39;) );
    END IF;

    IF (NEW.incdt_status &lt;&gt; OLD.incdt_status) THEN
      INSERT INTO incdthist
	    (incdthist_incdt_id,
	     incdthist_change, incdthist_target_id,
	     incdthist_descrip)
      VALUES(NEW.incdt_id,
	     &#39;S&#39;, NULL,
	     (&#39;Status Changed: &#39; ||
	      CASE WHEN(OLD.incdt_status=&#39;N&#39;) THEN &#39;New&#39;
		   WHEN(OLD.incdt_status=&#39;F&#39;) THEN &#39;Feedback&#39;
		   WHEN(OLD.incdt_status=&#39;C&#39;) THEN &#39;Confirmed&#39;
		   WHEN(OLD.incdt_status=&#39;A&#39;) THEN &#39;Assigned&#39;
		   WHEN(OLD.incdt_status=&#39;R&#39;) THEN &#39;Resolved&#39;
		   WHEN(OLD.incdt_status=&#39;L&#39;) THEN &#39;Closed&#39;
		   ELSE OLD.incdt_status
	      END
	      || &#39; -&gt; &#39; ||
	      CASE WHEN(NEW.incdt_status=&#39;N&#39;) THEN &#39;New&#39;
		   WHEN(NEW.incdt_status=&#39;F&#39;) THEN &#39;Feedback&#39;
		   WHEN(NEW.incdt_status=&#39;C&#39;) THEN &#39;Confirmed&#39;
		   WHEN(NEW.incdt_status=&#39;A&#39;) THEN &#39;Assigned&#39;
		   WHEN(NEW.incdt_status=&#39;R&#39;) THEN &#39;Resolved&#39;
		   WHEN(NEW.incdt_status=&#39;L&#39;) THEN &#39;Closed&#39;
		   ELSE NEW.incdt_status
	      END
	      ) );
      IF (NEW.incdt_status = &#39;L&#39;) THEN
	_evntType = &#39;ClosedIncident&#39;;
      ELSIF (OLD.incdt_status = &#39;L&#39;) THEN
	_evntType = &#39;ReopenedIncident&#39;;
      END IF;
    END IF;

    IF (COALESCE(NEW.incdt_assigned_username,&#39;&#39;) &lt;&gt; COALESCE(OLD.incdt_assigned_username,&#39;&#39;)) THEN
      INSERT INTO incdthist
	    (incdthist_incdt_id,
	     incdthist_change, incdthist_target_id,
	     incdthist_descrip)
      VALUES(NEW.incdt_id,
	     &#39;A&#39;, NULL,
	     (&#39;Assigned to: &quot;&#39; ||
	       COALESCE(OLD.incdt_assigned_username, &#39;&#39;) ||
	      &#39;&quot; -&gt; &quot;&#39; ||
	       COALESCE(NEW.incdt_assigned_username, &#39;&#39;) ||
	      &#39;&quot;&#39;) );
    END IF;

    IF (COALESCE(NEW.incdt_incdtcat_id,-1) &lt;&gt; COALESCE(OLD.incdt_incdtcat_id,-1)) THEN
      INSERT INTO incdthist
	    (incdthist_incdt_id,
	     incdthist_change, incdthist_target_id,
	     incdthist_descrip)
      VALUES(NEW.incdt_id,
	     &#39;T&#39;, NEW.incdt_incdtcat_id,
	     (&#39;Category Changed: &#39; ||
	       COALESCE((SELECT incdtcat_name
			   FROM incdtcat
			  WHERE (incdtcat_id=OLD.incdt_incdtcat_id)), &#39;&#39;)
	      || &#39; -&gt; &#39; ||
	       COALESCE((SELECT incdtcat_name
			   FROM incdtcat
			  WHERE (incdtcat_id=NEW.incdt_incdtcat_id)), &#39;&#39;)
	      || &#39;&#39;) );
    END IF;

    IF (COALESCE(NEW.incdt_incdtseverity_id,-1) &lt;&gt; COALESCE(OLD.incdt_incdtseverity_id,-1)) THEN
      INSERT INTO incdthist
	    (incdthist_incdt_id,
	     incdthist_change, incdthist_target_id,
	     incdthist_descrip)
      VALUES(NEW.incdt_id,
	     &#39;V&#39;, NEW.incdt_incdtseverity_id,
	     (&#39;Severity Changed: &#39; ||
	       COALESCE((SELECT incdtseverity_name
			   FROM incdtseverity
			  WHERE (incdtseverity_id=OLD.incdt_incdtseverity_id)), &#39;&#39;)
	      || &#39; -&gt; &#39; ||
	       COALESCE((SELECT incdtseverity_name
			   FROM incdtseverity
			  WHERE (incdtseverity_id=NEW.incdt_incdtseverity_id)), &#39;&#39;)
	      || &#39;&#39;) );
    END IF;

    IF (COALESCE(NEW.incdt_incdtpriority_id,-1) &lt;&gt; COALESCE(OLD.incdt_incdtpriority_id,-1)) THEN
      INSERT INTO incdthist
	    (incdthist_incdt_id,
	     incdthist_change, incdthist_target_id,
	     incdthist_descrip)
      VALUES(NEW.incdt_id,
	     &#39;P&#39;, NEW.incdt_incdtpriority_id,
	     (&#39;Priority Changed: &#39; ||
	       COALESCE((SELECT incdtpriority_name
			   FROM incdtpriority
			  WHERE (incdtpriority_id=OLD.incdt_incdtpriority_id)), &#39;&#39;)
	      || &#39; -&gt; &#39; ||
	       COALESCE((SELECT incdtpriority_name
			   FROM incdtpriority
			  WHERE (incdtpriority_id=NEW.incdt_incdtpriority_id)), &#39;&#39;)
	      || &#39;&#39;) );
    END IF;

    IF (COALESCE(NEW.incdt_incdtresolution_id,-1) &lt;&gt; COALESCE(OLD.incdt_incdtresolution_id,-1)) THEN
      INSERT INTO incdthist
	    (incdthist_incdt_id,
	     incdthist_change, incdthist_target_id,
	     incdthist_descrip)
      VALUES(NEW.incdt_id,
	     &#39;E&#39;, NEW.incdt_incdtresolution_id,
	     (&#39;Resolution Changed: &#39; ||
	       COALESCE((SELECT incdtresolution_name
			   FROM incdtresolution
			  WHERE (incdtresolution_id=OLD.incdt_incdtresolution_id)), &#39;&#39;)
	      || &#39; -&gt; &#39; ||
	       COALESCE((SELECT incdtresolution_name
			   FROM incdtresolution
			  WHERE (incdtresolution_id=NEW.incdt_incdtresolution_id)), &#39;&#39;)
	      || &#39;&#39;) );
    END IF;
  END IF;

  -- find the warehouse for which to create evntlog entries
    SELECT usrpref_value  INTO _whsId
    FROM usrpref
    WHERE usrpref_username = CURRENT_USER
      AND usrpref_name = &#39;PreferredWarehouse&#39;;

  INSERT INTO evntlog (evntlog_evnttime, evntlog_username,
		       evntlog_evnttype_id, evntlog_ordtype,
		       evntlog_ord_id, evntlog_warehous_id, evntlog_number)
  SELECT DISTINCT CURRENT_TIMESTAMP, evntnot_username, evnttype_id,
		       &#39;IC&#39;, NEW.incdt_id, _whsId, NEW.incdt_number
  FROM evntnot, evnttype
  WHERE ((evntnot_evnttype_id=evnttype_id)
    AND  (evnttype_name=_evntType));

  RETURN NEW;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-invcheadtrigger">_invcheadtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (TG_OP = &#39;DELETE&#39;) THEN
    -- Something can go here
    RETURN OLD;
  END IF;
  IF (TG_OP = &#39;INSERT&#39;) THEN
    -- Something can go here
  ELSE
    IF((COALESCE(NEW.invchead_adjtax_ratea,0.0)
      + COALESCE(NEW.invchead_adjtax_rateb,0.0)
      + COALESCE(NEW.invchead_adjtax_ratec,0.0)
      + COALESCE(NEW.invchead_freighttax_ratea,0.0)
      + COALESCE(NEW.invchead_freighttax_rateb,0.0)
      + COALESCE(NEW.invchead_freighttax_ratec,0.0))
       &lt;&gt; 
       (COALESCE(OLD.invchead_adjtax_ratea,0.0)
      + COALESCE(OLD.invchead_adjtax_rateb,0.0)
      + COALESCE(OLD.invchead_adjtax_ratec,0.0)
      + COALESCE(OLD.invchead_freighttax_ratea,0.0)
      + COALESCE(OLD.invchead_freighttax_rateb,0.0)
      + COALESCE(OLD.invchead_freighttax_ratec,0.0)) ) THEN
      PERFORM recalculateInvcheadTaxTotal(NEW.invchead_id);
    END IF;
  END IF;
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-invcitemtrigger">_invcitemtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (TG_OP = &#39;DELETE&#39;) THEN
    IF((COALESCE(OLD.invcitem_tax_ratea,0.0)
      + COALESCE(OLD.invcitem_tax_rateb,0.0)
      + COALESCE(OLD.invcitem_tax_ratec,0.0)) &lt;&gt; 0.0) THEN
      PERFORM recalculateInvcheadTaxTotal(OLD.invcitem_invchead_id);
    END IF;
    RETURN OLD;
  END IF;
  IF (TG_OP = &#39;INSERT&#39;) THEN
    IF((COALESCE(NEW.invcitem_tax_ratea,0.0)
      + COALESCE(NEW.invcitem_tax_rateb,0.0)
      + COALESCE(NEW.invcitem_tax_ratec,0.0)) &lt;&gt; 0.0) THEN
      PERFORM recalculateInvcheadTaxTotal(NEW.invcitem_invchead_id);
    END IF;
  ELSE
    IF((COALESCE(NEW.invcitem_tax_ratea,0.0)
      + COALESCE(NEW.invcitem_tax_rateb,0.0)
      + COALESCE(NEW.invcitem_tax_ratec,0.0))
       &lt;&gt; 
       (COALESCE(OLD.invcitem_tax_ratea,0.0)
      + COALESCE(OLD.invcitem_tax_rateb,0.0)
      + COALESCE(OLD.invcitem_tax_ratec,0.0)) ) THEN
      PERFORM recalculateInvcheadTaxTotal(NEW.invcitem_invchead_id);
    END IF;
  END IF;
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-ipsassbeforetrigger">_ipsassbeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

  --  Checks
  IF NOT (checkPrivilege(&#39;MaintainPricingSchedules&#39;)) THEN
    RAISE EXCEPTION &#39;You do not have privileges to maintain Price Schedules.&#39;;
  END IF;

  -- Business logic, disallow invalid combinations
  IF (TG_OP IN (&#39;INSERT&#39;,&#39;UPDATE&#39;)) THEN
    IF (LENGTH(COALESCE(NEW.ipsass_custtype_pattern,&#39;&#39;)) != 0) THEN
      new.ipsass_cust_id 		= 	-1;
      new.ipsass_custtype_id 		= 	-1;
      new.ipsass_shipto_id		= 	-1;
      new.ipsass_shipto_pattern	=	&#39;&#39;;
    ELSIF (COALESCE(NEW.ipsass_custtype_id,-1) &gt; -1) THEN
      new.ipsass_cust_id 		= 	-1;
      new.ipsass_shipto_id		= 	-1;
      new.ipsass_shipto_pattern	=	&#39;&#39;;
      new.ipsass_custtype_pattern	=	&#39;&#39;;
    ELSIF (LENGTH(COALESCE(NEW.ipsass_shipto_pattern,&#39;&#39;)) != 0) THEN
      new.ipsass_custtype_id 		= 	-1;
      new.ipsass_shipto_id		= 	-1;
      new.ipsass_custtype_pattern	=	&#39;&#39;;
    ELSE
      new.ipsass_shipto_id		= 	COALESCE(NEW.ipsass_shipto_id,-1);
      new.ipsass_custtype_id 		= 	-1;
      new.ipsass_shipto_pattern	=	&#39;&#39;;
      new.ipsass_custtype_pattern	=	&#39;&#39;;
    END IF;

    RETURN NEW;
  ELSE
    RETURN OLD;
  END IF;
  
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-ipsheadbeforetrigger">_ipsheadbeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

  --  Checks
  IF NOT (checkPrivilege(&#39;MaintainPricingSchedules&#39;)) THEN
    RAISE EXCEPTION &#39;You do not have privileges to maintain Price Schedules.&#39;;
  END IF;

  IF (TG_OP IN (&#39;INSERT&#39;,&#39;UPDATE&#39;)) THEN
    RETURN NEW;
  ELSE
    RETURN OLD;
  END IF;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-ipsitembeforetrigger">_ipsitembeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

  --  Checks
  IF NOT (checkPrivilege(&#39;MaintainPricingSchedules&#39;)) THEN
    RAISE EXCEPTION &#39;You do not have privileges to maintain Price Schedules.&#39;;
  END IF;
  
  IF (TG_OP IN (&#39;INSERT&#39;,&#39;UPDATE&#39;)) THEN
    RETURN NEW;
  ELSE
    RETURN OLD;
  END IF;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-ipsitemcharbeforetrigger">_ipsitemcharbeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

  --  Checks
  IF NOT (checkPrivilege(&#39;MaintainPricingSchedules&#39;)) THEN
    RAISE EXCEPTION &#39;You do not have privileges to maintain Price Schedules.&#39;;
  END IF;
  
  IF (TG_OP IN (&#39;INSERT&#39;,&#39;UPDATE&#39;)) THEN
    IF (SELECT (COUNT(item_id)=0)
        FROM item,ipsitem 
        WHERE ((ipsitem_id=NEW.ipsitemchar_ipsitem_id)
        AND (item_id=ipsitem_item_id)
        AND (item_config))) THEN
      RAISE EXCEPTION &#39;Characteristic prices may only be set on configured items.&#39;;
    ELSIF (SELECT (COUNT(item_id)=0)
        FROM item,ipsitem,charass,char 
        WHERE ((ipsitem_id=NEW.ipsitemchar_ipsitem_id)
        AND (item_id=ipsitem_item_id)
        AND (item_id=charass_target_id)
        AND (&#39;I&#39;=charass_target_type)
        AND (charass_char_id=NEW.ipsitemchar_char_id)
        AND (charass_value=NEW.ipsitemchar_value))) THEN
      RAISE EXCEPTION &#39;No characteristic with matching value exists for this item.&#39;;
    END IF;
    RETURN NEW;
  ELSE
    RETURN OLD;
  END IF;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-itemaftertrigger">_itemaftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _cmnttypeid INTEGER;

BEGIN
-- Privilege Checks
   IF (NOT checkPrivilege(&#39;MaintainItemMasters&#39;)) THEN
     RAISE EXCEPTION &#39;You do not have privileges to maintain Items.&#39;;
   END IF;
   
-- Integrity checks
  IF (TG_OP = &#39;UPDATE&#39;) THEN
    IF ((OLD.item_type &lt;&gt; NEW.item_type) AND (NEW.item_type = &#39;L&#39;)) THEN
      IF (SELECT COUNT(*) != 0 FROM bomitem WHERE (bomitem_item_id = OLD.item_id)) THEN
        RAISE EXCEPTION &#39;This item is part of one or more Bills of Materials and cannot be a Planning Item.&#39;;
      END IF;
    END IF;

    IF ((OLD.item_type &lt;&gt; NEW.item_type) AND
       (NEW.item_type IN (&#39;J&#39;,&#39;R&#39;,&#39;S&#39;,&#39;T&#39;))) THEN
      IF (SELECT COUNT(*) != 0
        FROM itemsite
        WHERE ((itemsite_item_id=OLD.item_id)
        AND (itemsite_qtyonhand + qtyallocated(itemsite_id,startoftime(),endoftime()) +
	   qtyordered(itemsite_id,startoftime(),endoftime()) &gt; 0 ))) THEN
          RAISE EXCEPTION &#39;Item type not allowed when there are itemsites with quantities with on hand quantities or pending inventory activity for this item.&#39;;
      END IF;
    END IF;
-- If type changed remove costs and deactivate item sites
    IF (NEW.item_type &lt;&gt; OLD.item_type) THEN
      PERFORM updateCost(itemcost_id, 0) FROM itemcost WHERE (itemcost_item_id=OLD.item_id);
      UPDATE itemsite SET itemsite_active=false WHERE (itemsite_item_id=OLD.item_id);
    END IF;
  END IF;

  IF ( SELECT (metric_value=&#39;t&#39;)
       FROM metric
       WHERE (metric_name=&#39;ItemChangeLog&#39;) ) THEN

--  Cache the cmnttype_id for ChangeLog
    SELECT cmnttype_id INTO _cmnttypeid
    FROM cmnttype
    WHERE (cmnttype_name=&#39;ChangeLog&#39;);
    IF (FOUND) THEN
      IF (TG_OP = &#39;INSERT&#39;) THEN
        PERFORM postComment(_cmnttypeid, &#39;I&#39;, NEW.item_id, &#39;Created&#39;);

      ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
        IF (OLD.item_active &lt;&gt; NEW.item_active) THEN
          IF (NEW.item_active) THEN
            PERFORM postComment(_cmnttypeid, &#39;I&#39;, NEW.item_id, &#39;Activated&#39;);
          ELSE
            PERFORM postComment(_cmnttypeid, &#39;I&#39;, NEW.item_id, &#39;Deactivated&#39;);
          END IF;
        END IF;

        IF (OLD.item_descrip1 &lt;&gt; NEW.item_descrip1) THEN
          PERFORM postComment( _cmnttypeid, &#39;I&#39;, NEW.item_id,
                               ( &#39;Description 1 Changed from &quot;&#39; || OLD.item_descrip1 ||
                                 &#39;&quot; to &quot;&#39; || NEW.item_descrip1 || &#39;&quot;&#39; ) );
        END IF;

        IF (OLD.item_descrip2 &lt;&gt; NEW.item_descrip2) THEN
          PERFORM postComment( _cmnttypeid, &#39;I&#39;, NEW.item_id,
                               ( &#39;Description 2 Changed from &quot;&#39; || OLD.item_descrip2 ||
                                 &#39;&quot; to &quot;&#39; || NEW.item_descrip2 || &#39;&quot;&#39; ) );
        END IF;

        IF (OLD.item_inv_uom_id &lt;&gt; NEW.item_inv_uom_id) THEN
          PERFORM postComment( _cmnttypeid, &#39;I&#39;, NEW.item_id,
                               ( &#39;Inventory UOM Changed from &quot;&#39; ||
                                 (SELECT uom_name FROM uom WHERE uom_id=OLD.item_inv_uom_id) ||
                                 &#39;&quot; (&#39; || OLD.item_inv_uom_id ||
                                 &#39;) to &quot;&#39; ||
                                 (SELECT uom_name FROM uom WHERE uom_id=NEW.item_inv_uom_id) ||
                                 &#39;&quot; (&#39; || NEW.item_inv_uom_id || &#39;)&#39; ) );
        END IF;

        IF (OLD.item_sold &lt;&gt; NEW.item_sold) THEN
          PERFORM postComment( _cmnttypeid, &#39;I&#39;, NEW.item_id,
                               CASE WHEN (NEW.item_sold) THEN &#39;Sold Changed from FALSE to TRUE&#39;
                                    ELSE &#39;Sold Changed from TRUE to FALSE&#39;
                               END );
        END IF;

        IF (OLD.item_picklist &lt;&gt; NEW.item_picklist) THEN
          PERFORM postComment( _cmnttypeid, &#39;I&#39;, NEW.item_id,
                               CASE WHEN (NEW.item_picklist) THEN &#39;Pick List Changed from FALSE to TRUE&#39;
                                    ELSE &#39;Pick List Changed from TRUE to FALSE&#39;
                               END );
        END IF;

        IF (OLD.item_config &lt;&gt; NEW.item_config) THEN
          PERFORM postComment( _cmnttypeid, &#39;I&#39;, NEW.item_id,
                               CASE WHEN (NEW.item_config) THEN &#39;Configured Changed from FALSE to TRUE&#39;
                                    ELSE &#39;Configured Changed from TRUE to FALSE&#39;
                               END );
        END IF;

        IF (OLD.item_listprice &lt;&gt; NEW.item_listprice) THEN
          PERFORM postComment( _cmnttypeid, &#39;I&#39;, NEW.item_id,
                               ( &#39;List Price Changed from &quot;&#39; || OLD.item_listprice ||
                                 &#39;&quot; to &quot;&#39; || NEW.item_listprice || &#39;&quot;&#39; ) );
        END IF;

-- Add New stuff

        IF (OLD.item_type &lt;&gt; NEW.item_type) THEN
          PERFORM postComment( _cmnttypeid, &#39;I&#39;, NEW.item_id,
                               ( &#39;Type Changed from &quot;&#39; || OLD.item_type ||
                                 &#39;&quot; to &quot;&#39; || NEW.item_type || &#39;&quot;&#39; ) );
        END IF;

        IF (OLD.item_price_uom_id &lt;&gt; NEW.item_price_uom_id) THEN
          PERFORM postComment( _cmnttypeid, &#39;I&#39;, NEW.item_id,
                               ( &#39;Price UOM Changed from &quot;&#39; ||
                                 (SELECT uom_name FROM uom WHERE uom_id=OLD.item_price_uom_id) ||
                                 &#39;&quot; (&#39; || OLD.item_price_uom_id ||
                                 &#39;) to &quot;&#39; ||
                                 (SELECT uom_name FROM uom WHERE uom_id=NEW.item_price_uom_id) ||
                                 &#39;&quot; (&#39; || NEW.item_price_uom_id || &#39;)&#39; ) );
        END IF;

        IF (OLD.item_upccode &lt;&gt; NEW.item_upccode) THEN
          PERFORM postComment( _cmnttypeid, &#39;I&#39;, NEW.item_id,
                               ( &#39;UPC Code Changed from &quot;&#39; || OLD.item_upccode ||
                                 &#39;&quot; to &quot;&#39; || NEW.item_upccode || &#39;&quot;&#39; ) );
        END IF;

        IF (OLD.item_prodweight &lt;&gt; NEW.item_prodweight) THEN
          PERFORM postComment( _cmnttypeid, &#39;I&#39;, NEW.item_id,
                               ( &#39;Product Weight Changed from &quot;&#39; || OLD.item_prodweight ||
                                 &#39;&quot; to &quot;&#39; || NEW.item_prodweight || &#39;&quot;&#39; ) );
        END IF;

        IF (OLD.item_packweight &lt;&gt; NEW.item_packweight) THEN
          PERFORM postComment( _cmnttypeid, &#39;I&#39;, NEW.item_id,
                               ( &#39;Packaging Weight Changed from &quot;&#39; || OLD.item_packweight ||
                                 &#39;&quot; to &quot;&#39; || NEW.item_packweight || &#39;&quot;&#39; ) );
        END IF;

        IF (OLD.item_maxcost &lt;&gt; NEW.item_maxcost) THEN
          PERFORM postComment( _cmnttypeid, &#39;I&#39;, NEW.item_id,
                               ( &#39;Maximum Disired Cost Changed from &quot;&#39; || OLD.item_maxcost ||
                                 &#39;&quot; to &quot;&#39; || NEW.item_maxcost || &#39;&quot;&#39; ) );
        END IF;
-- End changes

      END IF;
    END IF;
  END IF;

  IF (TG_OP = &#39;DELETE&#39;) THEN
    DELETE FROM imageass WHERE ((imageass_source_id=OLD.item_id) AND (imageass_source=&#39;I&#39;));
    DELETE FROM url WHERE ((url_source_id=OLD.item_id) AND (url_source=&#39;I&#39;));

    RETURN OLD;
  END IF;
  
  RETURN NEW;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-itemaliastrigger">_itemaliastrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

-- Privilege Checks
   IF (NOT checkPrivilege(&#39;MaintainItemMasters&#39;) OR NOT checkPrivilege(&#39;MaintainItemAliases&#39;)) THEN
     RAISE EXCEPTION &#39;You do not have privileges to maintain Item Aliases.&#39;;
   END IF;
  
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-itemcosttrigger">_itemcosttrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

  --Privilege Checks
  IF ( (TG_OP = &#39;INSERT&#39;) AND (NOT checkPrivilege(&#39;CreateCosts&#39;)) ) THEN
    RAISE EXCEPTION &#39;You do not have privileges to enter Item Costs.&#39;;
  END IF;

  IF ( (TG_OP = &#39;UPDATE&#39;) AND (NOT checkPrivilege(&#39;EnterActualCosts&#39;)) AND (NOT checkPrivilege(&#39;PostVouchers&#39;)) ) THEN
    RAISE EXCEPTION &#39;You do not have privileges to update Item Costs.&#39;;
  END IF;

  IF ( (TG_OP = &#39;DELETE&#39;) AND (NOT checkPrivilege(&#39;DeleteCosts&#39;)) ) THEN
    RAISE EXCEPTION &#39;You do not have privileges to delete Item Costs.&#39;;
  END IF;

  IF (TG_OP = &#39;UPDATE&#39;) THEN
    IF (NEW.itemcost_actcost &lt;&gt; OLD.itemcost_actcost OR
        NEW.itemcost_curr_id &lt;&gt; OLD.itemcost_curr_id) THEN
      INSERT INTO costhist
      ( costhist_item_id, costhist_costelem_id, costhist_type,
        costhist_lowlevel, costhist_user_id, costhist_date,
        costhist_oldcost, costhist_newcost,
        costhist_oldcurr_id, costhist_newcurr_id )
      VALUES
      ( NEW.itemcost_item_id, NEW.itemcost_costelem_id, &#39;A&#39;,
        NEW.itemcost_lowlevel, currentUserId(), CURRENT_TIMESTAMP,
        OLD.itemcost_actcost, NEW.itemcost_actcost,
        OLD.itemcost_curr_id, NEW.itemcost_curr_id );
    END IF;

    IF (NEW.itemcost_stdcost &lt;&gt; OLD.itemcost_stdcost) THEN
      INSERT INTO costhist
      ( costhist_item_id, costhist_costelem_id, costhist_type,
        costhist_lowlevel, costhist_user_id, costhist_date,
        costhist_oldcost, costhist_newcost,
        costhist_oldcurr_id, costhist_newcurr_id )
      VALUES
      ( NEW.itemcost_item_id, NEW.itemcost_costelem_id, &#39;S&#39;,
        NEW.itemcost_lowlevel, currentUserId(), CURRENT_TIMESTAMP,
        OLD.itemcost_stdcost, NEW.itemcost_stdcost,
        baseCurrId(), baseCurrId() );
    END IF;

    RETURN NEW;

  ELSIF (TG_OP = &#39;INSERT&#39;) THEN
    INSERT INTO costhist
    ( costhist_item_id, costhist_costelem_id, costhist_type,
      costhist_lowlevel, costhist_user_id, costhist_date,
      costhist_oldcost, costhist_newcost,
      costhist_oldcurr_id, costhist_newcurr_id )
    VALUES
    ( NEW.itemcost_item_id, NEW.itemcost_costelem_id, &#39;N&#39;,
      NEW.itemcost_lowlevel, currentUserId(), CURRENT_TIMESTAMP,
      0, NEW.itemcost_actcost,
      baseCurrId(), NEW.itemcost_curr_id );

    RETURN NEW;

  ELSIF (TG_OP = &#39;DELETE&#39;) THEN
    INSERT INTO costhist
    ( costhist_item_id, costhist_costelem_id, costhist_type,
      costhist_lowlevel, costhist_user_id, costhist_date,
      costhist_oldcost, costhist_newcost,
      costhist_oldcurr_id, costhist_newcurr_id )
    VALUES
    ( OLD.itemcost_item_id, OLD.itemcost_costelem_id, &#39;D&#39;,
      OLD.itemcost_lowlevel, currentUserId(), CURRENT_TIMESTAMP,
      OLD.itemcost_stdcost, 0,
      OLD.itemcost_curr_id, baseCurrId() );

    RETURN OLD;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-itemfiletrigger">_itemfiletrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

-- Privilege Checks
   IF (NOT checkPrivilege(&#39;MaintainItemMasters&#39;) ) THEN
     RAISE EXCEPTION &#39;You do not have privileges to maintain Item Files.&#39;;
   END IF;
  
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-itemimagetrigger">_itemimagetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

-- Privilege Checks
   IF (NOT checkPrivilege(&#39;MaintainItemMasters&#39;)) THEN
     RAISE EXCEPTION &#39;You do not have privileges to maintain Items.&#39;;
   END IF;
  
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-itemsiteaftertrigger">_itemsiteaftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _state INTEGER;
  _wasLocationControl BOOLEAN;
  _isLocationControl BOOLEAN;
  _wasLotSerial BOOLEAN;
  _isLotSerial BOOLEAN;
  _qty NUMERIC;
  _maint BOOLEAN;
  _cost NUMERIC;
  _variance NUMERIC;

BEGIN
-- Check if we are doing maintenance
  IF (TG_OP = &#39;INSERT&#39;) THEN
    _maint := TRUE;
  ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
    IF ((OLD.itemsite_item_id           != NEW.itemsite_item_id)
     OR (OLD.itemsite_warehous_id       != NEW.itemsite_warehous_id)
     OR (OLD.itemsite_reorderlevel      != NEW.itemsite_reorderlevel)
     OR (OLD.itemsite_ordertoqty        != NEW.itemsite_ordertoqty)
     OR (OLD.itemsite_cyclecountfreq    != NEW.itemsite_cyclecountfreq)
     OR (OLD.itemsite_supply            != NEW.itemsite_supply)
     OR (OLD.itemsite_loccntrl          != NEW.itemsite_loccntrl)
     OR (OLD.itemsite_safetystock       != NEW.itemsite_safetystock)
     OR (OLD.itemsite_minordqty         != NEW.itemsite_minordqty)
     OR (OLD.itemsite_multordqty        != NEW.itemsite_multordqty)
     OR (OLD.itemsite_leadtime          != NEW.itemsite_leadtime)
     OR (OLD.itemsite_abcclass          != NEW.itemsite_abcclass)
     OR (OLD.itemsite_controlmethod     != NEW.itemsite_controlmethod)
     OR (OLD.itemsite_active            != NEW.itemsite_active)
     OR (OLD.itemsite_plancode_id       != NEW.itemsite_plancode_id)
     OR (OLD.itemsite_costcat_id        != NEW.itemsite_costcat_id)
     OR (OLD.itemsite_eventfence        != NEW.itemsite_eventfence)
     OR (OLD.itemsite_sold              != NEW.itemsite_sold)
     OR (OLD.itemsite_stocked           != NEW.itemsite_stocked)
     OR (OLD.itemsite_location_id       != NEW.itemsite_location_id)
     OR (OLD.itemsite_useparams         != NEW.itemsite_useparams)
     OR (OLD.itemsite_useparamsmanual   != NEW.itemsite_useparamsmanual)
     OR (OLD.itemsite_soldranking       != NEW.itemsite_soldranking)
     OR (OLD.itemsite_createpr          != NEW.itemsite_createpr)
     OR (OLD.itemsite_location          != NEW.itemsite_location)
     OR (OLD.itemsite_location_comments != NEW.itemsite_location_comments)
     OR (OLD.itemsite_notes             != NEW.itemsite_notes)
     OR (OLD.itemsite_perishable        != NEW.itemsite_perishable)
     OR (OLD.itemsite_autoabcclass      != NEW.itemsite_autoabcclass)
     OR (OLD.itemsite_ordergroup        != NEW.itemsite_ordergroup)
     OR (OLD.itemsite_disallowblankwip  != NEW.itemsite_disallowblankwip)
     OR (OLD.itemsite_maxordqty         != NEW.itemsite_maxordqty)
     OR (OLD.itemsite_mps_timefence     != NEW.itemsite_mps_timefence)
     OR (OLD.itemsite_createwo          != NEW.itemsite_createwo)
     OR (OLD.itemsite_warrpurc          != NEW.itemsite_warrpurc)
     OR (OLD.itemsite_costmethod        != NEW.itemsite_costmethod)
     OR (OLD.itemsite_autoreg           != NEW.itemsite_autoreg) ) THEN
      IF (OLD.itemsite_item_id != NEW.itemsite_item_id) THEN
        RAISE EXCEPTION &#39;The item number on an itemsite may not be changed.&#39;;
      ELSIF (OLD.itemsite_warehous_id != NEW.itemsite_warehous_id) THEN
        RAISE EXCEPTION &#39;The warehouse code on an itemsite may not be changed.&#39;;
      END IF;
      _maint := TRUE;
    END IF;
  ELSE
    _maint := FALSE;
  END IF;

  IF (_maint) THEN -- Begin Maintenance
-- Privilege Checks
    IF ( NOT checkPrivilege(&#39;MaintainItemSites&#39;) ) THEN
       RAISE EXCEPTION &#39;You do not have privileges to maintain Item Sites.&#39;;
    END IF;
    
-- Override values to avoid invalid data combinations
    IF (NOT NEW.itemsite_supply) THEN
      UPDATE itemsite SET
        itemsite_createpr = FALSE,
        itemsite_createwo = FALSE
      WHERE (itemsite_id=NEW.itemsite_id);
    END IF;

    IF (NEW.itemsite_controlmethod NOT IN (&#39;S&#39;,&#39;L&#39;)) THEN
      UPDATE itemsite SET
        itemsite_perishable = FALSE,
        itemsite_warrpurc = FALSE,
        itemsite_autoreg = FALSE
      WHERE (itemsite_id=NEW.itemsite_id);
    END IF;

    IF (NOT NEW.itemsite_loccntrl) THEN
      UPDATE itemsite SET
        itemsite_disallowblankwip = FALSE
      WHERE (itemsite_id=NEW.itemsite_id);
    END IF;

    IF (NOT NEW.itemsite_useparams) THEN
      UPDATE itemsite SET
        itemsite_reorderlevel    = 0,
        itemsite_ordertoqty      = 0,
        itemsite_minordqty       = 0,
        itemsite_maxordqty       = 0,
        itemsite_multordqty      = 0,
        itemsite_useparamsmanual = FALSE
      WHERE (itemsite_id = NEW.itemsite_id);
    END IF;
    
-- Integrity check
    IF (TG_OP = &#39;INSERT&#39;) THEN
      -- Handle MLC logic
      IF ( (NEW.itemsite_loccntrl) AND (NEW.itemsite_warehous_id IS NOT NULL) ) THEN
        IF (SELECT count(*)=0
            FROM location
            WHERE ((location_warehous_id=NEW.itemsite_warehous_id)
            AND ( (NOT location_restrict) OR
                ( (location_restrict) AND
                (location_id IN ( SELECT locitem_location_id
                                  FROM locitem
                                  WHERE (locitem_item_id=NEW.itemsite_item_id) ) ) ) ))) THEN
          RAISE EXCEPTION &#39;You must first create at least one valid
	    		  Location for this Item Site before it may be
	   	          multiply located.&#39;;
        END IF;
      END IF;

      --This could be made a table constraint later, but do not want to create a big problem
      --for users with problematic legacy data over a relatively trivial problem for now,
      --so we will just check moving forword.
      IF (NEW.itemsite_stocked AND NEW.itemsite_reorderlevel&lt;=0) THEN
        RAISE EXCEPTION &#39;Stocked items must have postive reorder level specified.&#39;;
      END IF;
    END IF;

    IF (TG_OP = &#39;UPDATE&#39;) THEN
      --This could be made a table constraint later, but do not want to create a big problem
      --for users with problematic legacy data over a relatively trivial problem for now,
      --so we will just check moving forword.
      IF ((NEW.itemsite_stocked)
        AND (NEW.itemsite_stocked != OLD.itemsite_stocked) --Avoid checking unless explicitly changed
        AND (NEW.itemsite_reorderlevel&lt;=0)) THEN
        RAISE EXCEPTION &#39;Stocked items must have postive reorder level specified.&#39;;
      END IF;
    END IF;
  
    IF (TG_OP = &#39;UPDATE&#39;) THEN
  
-- Integrity check
      IF (NOT OLD.itemsite_loccntrl AND NEW.itemsite_loccntrl) THEN
        IF (SELECT count(*)=0
          FROM location
          WHERE ((location_warehous_id=NEW.itemsite_warehous_id)
          AND ( (NOT location_restrict) OR
              ( (location_restrict) AND
              (location_id IN ( SELECT locitem_location_id
                                FROM locitem
                                WHERE (locitem_item_id=NEW.itemsite_item_id) ) ) ) ))) THEN
           RAISE EXCEPTION &#39;You must first create at least one valid
			  Location for this Item Site before it may be
		          multiply located.&#39;;
        END IF;
      END IF;
   
-- Update detail records based on control method changes 
      _wasLocationControl := OLD.itemsite_loccntrl;
      _isLocationControl := NEW.itemsite_loccntrl;
      _wasLotSerial := OLD.itemsite_controlmethod IN (&#39;S&#39;,&#39;L&#39;);
      _isLotSerial := NEW.itemsite_controlmethod IN (&#39;S&#39;,&#39;L&#39;); 
      _state := 0;
    
      IF ( (_wasLocationControl) AND (_isLocationControl) ) THEN
        _state := 10;
      ELSIF ( (NOT _wasLocationControl) AND (NOT _isLocationControl) ) THEN
        _state := 20;
      ELSIF ( (NOT _wasLocationControl) AND (_isLocationControl) ) THEN
        _state := 30;
      ELSIF ( (_wasLocationControl) AND (NOT _isLocationControl) ) THEN
        _state := 40;
      END IF;

      IF ( (_wasLotSerial) AND (_isLotSerial) ) THEN
        _state := _state + 1;
      ELSIF ( (NOT _wasLotSerial) AND (NOT _isLotSerial) ) THEN
        _state := _state + 2;
      ELSIF ( (NOT _wasLotSerial) AND (_isLotSerial) ) THEN
        _state := _state + 3;
      ELSIF ( (_wasLotSerial) AND (NOT _isLotSerial) ) THEN
        _state := _state + 4;
      END IF;

      IF (_state IN (41, 43)) THEN
        PERFORM consolidateLotSerial(OLD.itemsite_id);
      ELSIF (_state IN (14, 34)) THEN
        PERFORM consolidateLocations(OLD.itemsite_id);
      ELSIF (_state IN (24, 42, 44)) THEN

        RAISE NOTICE &#39;Deleting item site detail records,&#39;;

        SELECT SUM(itemloc_qty) INTO _qty
        FROM itemloc, location
        WHERE ((itemloc_location_id=location_id)
        AND (NOT location_netable) 
        AND (itemloc_itemsite_id=OLD.itemsite_id));

        IF (_qty != 0) THEN
          UPDATE itemsite
          SET itemsite_qtyonhand = itemsite_qtyonhand + _qty,
            itemsite_nnqoh = itemsite_nnqoh - _qty
          WHERE (itemsite_id=OLD.itemsite_id);
        END IF;

        DELETE FROM itemloc
        WHERE (itemloc_itemsite_id=OLD.itemsite_id);
      END IF;

     IF (NEW.itemsite_qtyonhand &gt; 0) THEN
--  Handle detail creation
--  Create itemloc records if they do not exist
       IF (_state IN (23, 32, 33)) THEN
          INSERT INTO itemloc 
            ( itemloc_itemsite_id, itemloc_location_id,
              itemloc_expiration, itemloc_qty )
            VALUES
            ( NEW.itemsite_id, -1,
              endOfTime(), NEW.itemsite_qtyonhand );
        END IF;

--  Handle Location distribution
        IF (_state IN (31, 32, 33, 34)) THEN
          IF (SELECT (COUNT(*)=1)
              FROM location
              WHERE ((location_id=NEW.itemsite_location_id)
              AND (location_warehous_id=NEW.itemsite_warehous_id)
              AND ( (NOT location_restrict) OR
                  ( (location_restrict) AND
                  (location_id IN ( SELECT locitem_location_id
                                    FROM locitem
                                    WHERE (locitem_item_id=NEW.itemsite_item_id) ) ) ) ))) THEN
           PERFORM initialDistribution(NEW.itemsite_id, NEW.itemsite_location_id);
          ELSE
            RAISE EXCEPTION &#39;A valid default location must be selected to distribute existing inventory to.&#39;;
          END IF;
        END IF;

--  Handle Lot/Serial distribution
        IF ( (_state = 13) OR (_state = 23) OR (_state = 33) OR (_state = 43) ) THEN
          RAISE NOTICE &#39;You should now use the Reassign Lot/Serial # window to assign Lot/Serial #s.&#39;;
        END IF;
      END IF;  
      IF (OLD.itemsite_costmethod=&#39;A&#39; AND NEW.itemsite_costmethod=&#39;S&#39;) THEN
        -- TODO: Average costing cost method change
        SELECT stdcost(NEW.itemsite_item_id) * NEW.itemsite_qtyonhand
          INTO _cost;
        _variance := _cost - NEW.itemsite_value;
        NEW.itemsite_value := _cost;
        IF(_variance &lt;&gt; 0.0) THEN
          PERFORM insertGLTransaction( &#39;P/D&#39;, &#39;&#39;, &#39;&#39;, &#39;Itemsite converted from Average to Standard cost.&#39;,
                                       costcat_invcost_accnt_id, costcat_asset_accnt_id, NEW.itemsite_id,
                                      _variance, CURRENT_DATE )
             FROM costcat
            WHERE(costcat_id=NEW.itemsite_costcat_id);
        END IF;
      END IF;
    END IF;
  END IF;  -- End Maintenance

  RETURN NEW;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-itemsitetrigger">_itemsitetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _cmnttypeid INTEGER;

BEGIN

  IF (TG_OP = &#39;UPDATE&#39;) THEN
    IF ( (NEW.itemsite_qtyonhand &lt;&gt; OLD.itemsite_qtyonhand) ) THEN
      IF (OLD.itemsite_freeze) THEN
        NEW.itemsite_qtyonhand := OLD.itemsite_qtyonhand;
      ELSE
        NEW.itemsite_datelastused := CURRENT_DATE;
      END IF;

      IF ( (NEW.itemsite_qtyonhand &lt; 0) AND (OLD.itemsite_qtyonhand &gt;= 0) ) THEN
        INSERT INTO evntlog
        ( evntlog_evnttime, evntlog_username, evntlog_evnttype_id,
          evntlog_ordtype, evntlog_ord_id, evntlog_warehous_id,
          evntlog_number )
        SELECT CURRENT_TIMESTAMP, evntnot_username, evnttype_id,
               &#39;I&#39;, NEW.itemsite_id, warehous_id,
               (item_number || &#39;/&#39; || warehous_code)
        FROM evntnot, evnttype, item, warehous
        WHERE ( (evntnot_evnttype_id=evnttype_id)
         AND (evntnot_warehous_id=NEW.itemsite_warehous_id)
         AND (NEW.itemsite_item_id=item_id)
         AND (NEW.itemsite_warehous_id=warehous_id)
         AND (evnttype_name=&#39;QOHBelowZero&#39;) );
      END IF;
    END IF;
  END IF;

  IF (NEW.itemsite_qtyonhand &lt; 0 AND NEW.itemsite_costmethod = &#39;A&#39;) THEN
    RAISE EXCEPTION &#39;Itemsite (%) is setup to use average costing and is not allowed to have a negative quantity on hand.&#39;, NEW.itemsite_id;
  END IF;

--  Handle the ChangeLog
  IF ( SELECT (metric_value=&#39;t&#39;)
       FROM metric
       WHERE (metric_name=&#39;ItemSiteChangeLog&#39;) ) THEN

--  Cache the cmnttype_id for ChangeLog
    SELECT cmnttype_id INTO _cmnttypeid
    FROM cmnttype
    WHERE (cmnttype_name=&#39;ChangeLog&#39;);
    IF (FOUND) THEN
      IF (TG_OP = &#39;INSERT&#39;) THEN
        PERFORM postComment(_cmnttypeid, &#39;IS&#39;, NEW.itemsite_id, &#39;Created&#39;);

      ELSIF (TG_OP = &#39;UPDATE&#39;) THEN

        IF (OLD.itemsite_plancode_id &lt;&gt; NEW.itemsite_plancode_id) THEN
          PERFORM postComment( _cmnttypeid, &#39;IS&#39;, NEW.itemsite_id,
                               ( &#39;Planner Code Changed from &quot;&#39; || oldplancode.plancode_code ||
                                 &#39;&quot; to &quot;&#39; || newplancode.plancode_code || &#39;&quot;&#39; ) )
          FROM plancode AS oldplancode, plancode AS newplancode
          WHERE ( (oldplancode.plancode_id=OLD.itemsite_plancode_id)
           AND (newplancode.plancode_id=NEW.itemsite_plancode_id) );
        END IF;

        IF (NEW.itemsite_reorderlevel &lt;&gt; OLD.itemsite_reorderlevel) THEN
          PERFORM postComment( _cmnttypeid, &#39;IS&#39;, NEW.itemsite_id,
                               ( &#39;Reorder Level Changed from &#39; || formatQty(OLD.itemsite_reorderlevel) ||
                                 &#39; to &#39; || formatQty(NEW.itemsite_reorderlevel ) ) );
        END IF;

        IF (NEW.itemsite_ordertoqty &lt;&gt; OLD.itemsite_ordertoqty) THEN
          PERFORM postComment( _cmnttypeid, &#39;IS&#39;, NEW.itemsite_id,
                               ( &#39;Order Up To Changed from &#39; || formatQty(OLD.itemsite_ordertoqty) ||
                                 &#39; to &#39; || formatQty(NEW.itemsite_ordertoqty ) ) );
        END IF;
      END IF;
    END IF;
  END IF;

  RETURN NEW;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-itemsrcptrigger">_itemsrcptrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

-- Privilege Checks
   IF (NOT checkPrivilege(&#39;MaintainItemSources&#39;)) THEN
     RAISE EXCEPTION &#39;You do not have privileges to maintain Item Sources.&#39;;
   END IF;

-- Set defaults
   NEW.itemsrcp_curr_id	:= COALESCE(NEW.itemsrcp_curr_id,basecurrid());
  
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-itemsrctrigger">_itemsrctrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

-- Privilege Checks
   IF (NOT checkPrivilege(&#39;MaintainItemSources&#39;)) THEN
     RAISE EXCEPTION &#39;You do not have privileges to maintain Item Sources.&#39;;
   END IF;

-- Set defaults
   NEW.itemsrc_invvendoruomratio	:= COALESCE(NEW.itemsrc_invvendoruomratio,1);
   NEW.itemsrc_minordqty		:= COALESCE(NEW.itemsrc_minordqty,0);
   NEW.itemsrc_multordqty		:= COALESCE(NEW.itemsrc_multordqty,0);
   NEW.itemsrc_active			:= COALESCE(NEW.itemsrc_active,true);
   NEW.itemsrc_leadtime			:= COALESCE(NEW.itemsrc_leadtime,0);
   NEW.itemsrc_ranking			:= COALESCE(NEW.itemsrc_ranking,1);
  
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-itemsubtrigger">_itemsubtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

-- Privilege Checks
   IF (NOT checkPrivilege(&#39;MaintainItemMasters&#39;) OR NOT checkPrivilege(&#39;MaintainItemSubstitutes&#39;)) THEN
     RAISE EXCEPTION &#39;You do not have privileges to maintain Item Substitutes.&#39;;
   END IF;
  
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-itemtaxtrigger">_itemtaxtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

-- Privilege Checks
   IF (NOT checkPrivilege(&#39;MaintainItemMasters&#39;)) THEN
     RAISE EXCEPTION &#39;You do not have privileges to maintain Items.&#39;;
   END IF;
  
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-itemtrigger">_itemtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
 
-- Override values to avoid invalid data combinations
  IF (NEW.item_type IN (&#39;J&#39;,&#39;R&#39;,&#39;S&#39;,&#39;O&#39;,&#39;L&#39;,&#39;B&#39;)) THEN
    NEW.item_picklist := FALSE;
  END IF;

  IF (NEW.item_type IN (&#39;J&#39;,&#39;R&#39;,&#39;S&#39;,&#39;T&#39;)) THEN
    NEW.item_planning_type := &#39;N&#39;;
  END IF;

  IF (NEW.item_type = &#39;L&#39;) THEN
    NEW.item_planning_type := &#39;S&#39;;
  END IF;

  IF (NEW.item_type IN (&#39;F&#39;,&#39;S&#39;,&#39;T&#39;,&#39;O&#39;,&#39;L&#39;,&#39;B&#39;)) THEN
    NEW.item_picklist := FALSE;
    NEW.item_sold := FALSE;
    NEW.item_prodcat_id := -1;
    NEW.item_exclusive := false;
    NEW.item_listprice := 0;
    NEW.item_upccode := &#39;&#39;;
    NEW.item_prodweight := 0;
    NEW.item_packweight := 0;
  END IF;

  IF (NEW.item_type NOT IN (&#39;J&#39;,&#39;R&#39;)) THEN
    NEW.item_config := false;
  END IF;

  RETURN NEW;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-itemuomconvtrigger">_itemuomconvtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

-- Privilege Checks
   IF (NOT checkPrivilege(&#39;MaintainItemMasters&#39;)) THEN
     RAISE EXCEPTION &#39;You do not have privileges to maintain Items.&#39;;
   END IF;
  
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-locationaftertrigger">_locationaftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _itemloc    RECORD;

BEGIN

  -- Maintain itemsite_qtyonhand and itemsite_nnqoh when location_netable changes
  IF (TG_OP = &#39;UPDATE&#39;) THEN
    IF (OLD.location_netable &lt;&gt; NEW.location_netable) THEN
      FOR _itemloc IN SELECT * FROM itemloc WHERE (itemloc_location_id=NEW.location_id) LOOP
        IF (NEW.location_netable) THEN
          UPDATE itemsite SET itemsite_qtyonhand = itemsite_qtyonhand + _itemloc.itemloc_qty,
                              itemsite_nnqoh = itemsite_nnqoh - _itemloc.itemloc_qty
          WHERE (itemsite_id=_itemloc.itemloc_itemsite_id);
        ELSE
          UPDATE itemsite SET itemsite_qtyonhand = itemsite_qtyonhand - _itemloc.itemloc_qty,
                              itemsite_nnqoh = itemsite_nnqoh + _itemloc.itemloc_qty
          WHERE (itemsite_id=_itemloc.itemloc_itemsite_id);
        END IF;
      END LOOP;
    END IF;
  END IF;
  
  RETURN NEW;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-locationtrigger">_locationtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _check      BOOLEAN;
  _checkId    INTEGER;

BEGIN

  -- Checks
  -- Start with privileges
  IF (TG_OP = &#39;INSERT&#39;) THEN
    SELECT checkPrivilege(&#39;MaintainLocations&#39;) INTO _check;
    IF NOT (_check) THEN
      RAISE EXCEPTION &#39;You do not have privileges to add new Locations.&#39;;
    END IF;
  ELSE
    SELECT checkPrivilege(&#39;MaintainLocations&#39;) INTO _check;
    IF NOT (_check) THEN
      RAISE EXCEPTION &#39;You do not have privileges to alter a Location.&#39;;
    END IF;
  END IF;

  -- Code is required
  IF ( (LENGTH(COALESCE(NEW.location_name,&#39;&#39;))=0) AND
       (LENGTH(COALESCE(NEW.location_aisle,&#39;&#39;))=0) AND
       (LENGTH(COALESCE(NEW.location_rack,&#39;&#39;))=0) AND
       (LENGTH(COALESCE(NEW.location_bin,&#39;&#39;))=0) ) THEN
    RAISE EXCEPTION &#39;You must supply a valid Location Identifier.&#39;;
  END IF;
  
  -- Site is required
  IF (NEW.location_warehous_id IS NULL) THEN
    RAISE EXCEPTION &#39;You must supply a valid Site.&#39;;
  END IF;

  -- Location Identifier must be unique
  SELECT location_id INTO _checkId
  FROM location
  WHERE ( (UPPER(location_name)=UPPER(NEW.location_name))
    AND   (UPPER(location_aisle)=UPPER(NEW.location_aisle))
    AND   (UPPER(location_rack)=UPPER(NEW.location_rack))
    AND   (UPPER(location_bin)=UPPER(NEW.location_bin))
    AND   (location_warehous_id=NEW.location_warehous_id)
    AND   (location_id&lt;&gt;NEW.location_id) );
  IF (FOUND) THEN
    RAISE EXCEPTION &#39;You must supply a unique Location Identifier for this Site.&#39;;
  END IF;
  
  RETURN NEW;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-metasqlaltertrigger">_metasqlaltertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

-- Disallow tampering
   IF (TG_OP = &#39;UPDATE&#39; OR TG_OP = &#39;DELETE&#39;) THEN
     RAISE EXCEPTION &#39;You may not alter metasql queries except using the xTuple Updater utility&#39;;
   END IF;
   RETURN NEW;
END;

</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-metasqltrigger">_metasqltrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

-- Update status info
  NEW.metasql_lastuser 		:= current_user;
  NEW.metasql_lastupdate 	:= current_date;
  RETURN NEW;

END;

</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-packbeforetrigger">_packbeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _cmnttypeid INTEGER;
BEGIN
  SELECT cmnttype_id INTO _cmnttypeid
    FROM cmnttype
    WHERE (cmnttype_name=&#39;ChangeLog&#39;);
  IF (FOUND) THEN
    IF ((TG_OP = &#39;INSERT&#39;) AND (NEW.pack_head_id) IS NOT NULL)THEN
      PERFORM postComment(_cmnttypeid, &#39;S&#39;, NEW.pack_head_id, &#39;Added to Packing List Batch&#39;);
    END IF;
  END IF;
  IF ((TG_OP = &#39;INSERT&#39;) OR (TG_OP = &#39;UPDATE&#39;)) THEN
    IF (NEW.pack_shiphead_id IS NOT NULL
	 AND NEW.pack_shiphead_id NOT IN (SELECT shiphead_id
			       FROM shiphead
			       WHERE (shiphead_order_id=NEW.pack_head_id)
				 AND (shiphead_order_type=NEW.pack_head_type))) THEN
      RAISE EXCEPTION &#39;Shipment does not exist for % id %&#39;,
		      NEW.pack_head_type, NEW.pack_head_id;
      RETURN OLD;
    END IF;

    IF (NEW.pack_head_type = &#39;SO&#39;
	AND NEW.pack_head_id   IN (SELECT cohead_id FROM cohead)) THEN
      RETURN NEW;

    ELSEIF (NEW.pack_head_type = &#39;TO&#39;) THEN
      IF (NOT fetchMetricBool(&#39;MultiWhs&#39;)) THEN
	RAISE EXCEPTION &#39;Transfer Orders are not supported by this version of the application&#39;;
      ELSEIF (NEW.pack_head_id IN (SELECT tohead_id FROM tohead)) THEN
	RETURN NEW;
      END IF;
    END IF;

    RAISE EXCEPTION &#39;% with id % does not exist&#39;,
		    NEW.pack_head_type, NEW.pack_head_id;
    RETURN OLD;

  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-periodaftertrigger">_periodaftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _idoffirst INTEGER;
  _test      INTEGER;
BEGIN
  -- This trigger can easily cause an infinite loop
  -- because of this we have to be very careful to not
  -- do an update on the period table if no updates
  -- are absolutely needed so we don&#39;t just keep
  -- trigger ourselves again and again

  -- Figure out which period is the first one
  SELECT period_id
    INTO _idoffirst
    FROM period
   ORDER BY period_start
   LIMIT 1;

  -- If we didn&#39;t find anything there is nothing to do
  IF( NOT FOUND ) THEN
    RETURN NEW;
  END IF;

  -- do a select to see if there is at least one record that needs to be
  -- updated. If we do not find any then we can just leave without
  -- causing a retrigger of ourselves
  SELECT period_id
    INTO _test
    FROM period
   WHERE((COALESCE(period_initial, true) AND (NOT period_id=_idoffirst))
      OR ((NOT COALESCE(period_initial, false)) AND (period_id=_idoffirst)))
   LIMIT 1;

  -- Nothing to update - get out of here
  IF( NOT FOUND ) THEN
    RETURN NEW;
  END IF;

  -- Update all the period records that already have the initial flag
  -- set and the one that we know should be the first.
  -- We don&#39;t have to be as careful here since we have already ruled
  -- out if don&#39;t need to update already.
  UPDATE period
     SET period_initial = (_idoffirst=period_id)
   WHERE((COALESCE(period_initial, true))
      OR (period_id=_idoffirst));

  RETURN NEW;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkgcmdaftertrigger">_pkgcmdaftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (TG_OP = &#39;DELETE&#39;) THEN
    DELETE FROM pkgitem
    WHERE ((pkgitem_type=&#39;D&#39;)
       AND (pkgitem_item_id=OLD.cmd_id)
       AND (pkgitem_pkghead_id IN (SELECT pkghead_id
                                   FROM pkghead
                                   WHERE pkghead_name = TG_TABLE_SCHEMA)));
    RETURN OLD;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkgcmdaltertrigger">_pkgcmdaltertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (pkgMayBeModified(TG_TABLE_SCHEMA)) THEN
    IF (TG_OP = &#39;DELETE&#39;) THEN
      RETURN OLD;
    ELSE
      RETURN NEW;
    END IF;
  END IF;

  IF (TG_OP = &#39;INSERT&#39;) THEN
    RAISE EXCEPTION &#39;You may not create custom commands in packages except using the xTuple Updater utility&#39;;

  ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
    RAISE EXCEPTION &#39;You may not alter custom commands in packages except using the xTuple Updater utility&#39;;

  ELSIF (TG_OP = &#39;DELETE&#39;) THEN
    RAISE EXCEPTION &#39;You may not delete custom commands from packages. Try deleting or disabling the package.&#39;;

  END IF;

  RETURN NEW;
END;

</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkgcmdargaftertrigger">_pkgcmdargaftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (TG_OP = &#39;DELETE&#39;) THEN
    RETURN OLD;
  END IF;
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkgcmdargaltertrigger">_pkgcmdargaltertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (pkgMayBeModified(TG_TABLE_SCHEMA)) THEN
    IF (TG_OP = &#39;DELETE&#39;) THEN
      RETURN OLD;
    ELSE
      RETURN NEW;
    END IF;
  END IF;

  IF (TG_OP = &#39;INSERT&#39;) THEN
    RAISE EXCEPTION &#39;You may not create command arguments in packages except using the xTuple Updater utility&#39;;

  ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
    RAISE EXCEPTION &#39;You may not alter command arguments in packages except using the xTuple Updater utility&#39;;

  ELSIF (TG_OP = &#39;DELETE&#39;) THEN
    RAISE EXCEPTION &#39;You may not delete command arguments from packages. Try deleting or disabling the package.&#39;;

  END IF;

  RETURN NEW;
END;

</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkgcmdargbeforetrigger">_pkgcmdargbeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _cmdargid     INTEGER;
  _debug        BOOL := false;

BEGIN
  IF (TG_OP = &#39;UPDATE&#39;) THEN
    RETURN NEW;

  ELSIF (TG_OP = &#39;INSERT&#39;) THEN
    RETURN NEW;

  ELSIF (TG_OP = &#39;DELETE&#39;) THEN
    RETURN OLD;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkgcmdbeforetrigger">_pkgcmdbeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _cmdid       INTEGER;
  _debug        BOOL := false;

BEGIN
    IF (TG_OP = &#39;UPDATE&#39;) THEN
      IF (_debug) THEN
        RAISE NOTICE &#39;OLD.cmd_name %, NEW.cmd_name %&#39;,
                     OLD.cmd_name, NEW.cmd_name;
      END IF;

      IF (NEW.cmd_name != OLD.cmd_name) THEN
        SELECT cmd_id INTO _cmdid FROM cmd WHERE cmd_name=NEW.cmd_name;
        IF (FOUND) THEN
          RAISE EXCEPTION &#39;Cannot change command name % because another command with that name already exists.&#39;, NEW.cmd_name;
        END IF;
      END IF;

    ELSIF (TG_OP = &#39;INSERT&#39;) THEN
      IF (_debug) THEN
        RAISE NOTICE &#39;inserting NEW.cmd_name %&#39;, NEW.cmd_name;
      END IF;
      SELECT cmd_id INTO _cmdid FROM cmd WHERE cmd_name=NEW.cmd_name;
      IF (FOUND) THEN
        RAISE EXCEPTION &#39;Cannot create new command % because another command with that name already exists.&#39;, NEW.cmd_name;
      END IF;

    ELSIF (TG_OP = &#39;DELETE&#39;) THEN
      DELETE FROM cmdarg WHERE cmdarg_cmd_id=OLD.cmd_id;

      RETURN OLD;
    END IF;

    RETURN NEW;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkgheadbeforetrigger">_pkgheadbeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    _r    RECORD;

  BEGIN
    IF (TG_OP = &#39;UPDATE&#39;) THEN
      NEW.pkghead_created := OLD.pkghead_created;
      NEW.pkghead_updated := CURRENT_TIMESTAMP;
      IF (NEW.pkghead_indev AND NOT userCanCreateUsers(CURRENT_USER)) THEN
        NEW.pkghead_indev = FALSE;
      END IF;

    ELSIF (TG_OP = &#39;INSERT&#39;) THEN
      NEW.pkghead_created := CURRENT_TIMESTAMP;
      NEW.pkghead_updated := NEW.pkghead_created;
      IF (NEW.pkghead_indev AND NOT userCanCreateUsers(CURRENT_USER)) THEN
        NEW.pkghead_indev = FALSE;
      END IF;

    ELSIF (TG_OP = &#39;DELETE&#39;) THEN
      DELETE FROM pkgdep WHERE pkgdep_pkghead_id=OLD.pkghead_id;

      -- enforce an order here to avoid dependency errors, saving the schema
      -- for later
      FOR _r IN SELECT *,
                      CASE WHEN pkgitem_type = &#39;V&#39; THEN 1
                           WHEN pkgitem_type = &#39;G&#39; THEN 2
                           WHEN pkgitem_type = &#39;T&#39; THEN 3
                           WHEN pkgitem_type = &#39;F&#39; THEN 4
                           WHEN pkgitem_type = &#39;P&#39; THEN 5
                           ELSE 0
                      END AS seq
                FROM pkgitem
                WHERE ((pkgitem_pkghead_id=OLD.pkghead_id)
                   AND (pkgitem_type != &#39;S&#39;))
                ORDER BY seq LOOP
        DELETE FROM pkgitem WHERE (pkgitem_id=_r.pkgitem_id);
      END LOOP;

      EXECUTE &#39;DROP SCHEMA &#39; || OLD.pkghead_name || &#39; CASCADE&#39;;

      RETURN OLD;
    END IF;

    RETURN NEW;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkgimageaftertrigger">_pkgimageaftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (TG_OP = &#39;DELETE&#39;) THEN
    DELETE FROM pkgitem
    WHERE ((pkgitem_type=&#39;I&#39;)
       AND (pkgitem_item_id=OLD.image_id)
       AND (pkgitem_pkghead_id IN (SELECT pkghead_id
                                   FROM pkghead
                                   WHERE pkghead_name = TG_TABLE_SCHEMA)));
    RETURN OLD;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkgimagealtertrigger">_pkgimagealtertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (pkgMayBeModified(TG_TABLE_SCHEMA)) THEN
    IF (TG_OP = &#39;DELETE&#39;) THEN
      RETURN OLD;
    ELSE
      RETURN NEW;
    END IF;
  END IF;

  IF (TG_OP = &#39;INSERT&#39;) THEN
    RAISE EXCEPTION &#39;You may not create images in packages except using the xTuple Updater utility&#39;;

  ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
    RAISE EXCEPTION &#39;You may not alter images in packages except using the xTuple Updater utility&#39;;

  ELSIF (TG_OP = &#39;DELETE&#39;) THEN
    RAISE EXCEPTION &#39;You may not delete images from packages. Try deleting or disabling the package.&#39;;

  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkgimagebeforetrigger">_pkgimagebeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _imageid     INTEGER;
  _debug       BOOL := false;

BEGIN
  IF (TG_OP = &#39;UPDATE&#39;) THEN
    IF (_debug) THEN
      RAISE NOTICE &#39;OLD.image_name %, NEW.image_name %&#39;,
                   OLD.image_name, NEW.image_name;
    END IF;

    IF (NEW.image_name != OLD.image_name) THEN
      SELECT image_id INTO _imageid FROM image WHERE image_name=NEW.image_name;
      IF (FOUND) THEN
        RAISE EXCEPTION &#39;Cannot change image named % because another image with that name already exists.&#39;, NEW.image_name;
      END IF;
    END IF;

  ELSIF (TG_OP = &#39;INSERT&#39;) THEN
    IF (_debug) THEN
      RAISE NOTICE &#39;inserting NEW.image_name %&#39;, NEW.image_name;
    END IF;
    SELECT image_id INTO _imageid FROM image WHERE image_name=NEW.image_name;
    IF (FOUND) THEN
      RAISE EXCEPTION &#39;Cannot create new image % because another image with that name already exists.&#39;, NEW.image_name;
    END IF;

  ELSIF (TG_OP = &#39;DELETE&#39;) THEN
    RETURN OLD;

  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkgitembeforetrigger">_pkgitembeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    _functionargs TEXT;
    _group        TEXT;
    _object       TEXT;
    _schema       TEXT;
    _debug        BOOL := false;
  BEGIN
    IF (TG_OP = &#39;INSERT&#39; OR TG_OP = &#39;UPDATE&#39;) THEN
      _object = NEW.pkgitem_name;

      SELECT LOWER(pkghead_name) INTO _schema
      FROM pkghead
      WHERE (pkghead_id=NEW.pkgitem_pkghead_id);
      IF (NOT FOUND) THEN
        _schema := &#39;public&#39;;
      END IF;

      IF (NEW.pkgitem_type = &#39;F&#39;) THEN
        _object := SPLIT_PART(_object, &#39;(&#39;, 1);
      ELSIF (NEW.pkgitem_type = &#39;M&#39;) THEN
        _group  := SPLIT_PART(_object, &#39;-&#39;, 1);
        _object := SPLIT_PART(_object, &#39;-&#39;, 2);
      END IF;
      IF _debug THEN
        RAISE NOTICE &#39;_schema % and _object %&#39;, _schema, _object;
      END IF;

      IF (NEW.pkgitem_type = &#39;C&#39;) THEN
        IF (NOT EXISTS(SELECT script_id
                       FROM script
                       WHERE ((script_id=NEW.pkgitem_item_id)
                          AND (script_name=NEW.pkgitem_name)))) THEN
          RAISE EXCEPTION &#39;Cannot create Script % as a Package Item without a corresponding script record.&#39;,
            NEW.pkgitem_name;
        END IF;

      ELSIF (NEW.pkgitem_type = &#39;D&#39;) THEN
        IF (NOT EXISTS(SELECT cmd_id
                       FROM cmd
                       WHERE ((cmd_id=NEW.pkgitem_item_id)
                          AND (cmd_name=NEW.pkgitem_name)))) THEN
          RAISE EXCEPTION &#39;Cannot create Custom Command % as a Package Item without a corresponding cmd record.&#39;,
            NEW.pkgitem_name;
        END IF;

      ELSIF (NEW.pkgitem_type = &#39;F&#39;) THEN
        IF (NOT EXISTS(SELECT pg_proc.oid
                       FROM pg_proc, pg_namespace
                       WHERE ((pg_proc.oid=NEW.pkgitem_item_id)
                          AND (proname = (_object))
                          AND (pronamespace=pg_namespace.oid)
                          AND (nspname=_schema)) )) THEN
          RAISE EXCEPTION &#39;Cannot create Function % (oid %) as a Package Item without a corresponding function in the database.&#39;,
                          NEW.pkgitem_name, NEW.pkgitem_item_id;
        END IF;

      ELSIF (NEW.pkgitem_type = &#39;G&#39;) THEN
        IF (NOT EXISTS(SELECT pg_class.oid
                     FROM pg_trigger, pg_class, pg_namespace
                     WHERE ((tgname=_object)
                        AND (tgrelid=pg_class.oid)
                        AND (relnamespace=pg_namespace.oid)
                        AND (nspname=_schema)))) THEN
          RAISE EXCEPTION &#39;Cannot create Trigger % as a Package Item without a corresponding trigger in the database.&#39;,
            NEW.pkgitem_name;
        END IF;

      ELSIF (NEW.pkgitem_type = &#39;I&#39;) THEN
        IF (NOT EXISTS(SELECT image_id
                       FROM image
                       WHERE ((image_id=NEW.pkgitem_item_id)
                          AND (image_name=NEW.pkgitem_name)))) THEN
          RAISE EXCEPTION &#39;Cannot create Image % as a Package Item without a corresponding image record.&#39;,
            NEW.pkgitem_name;
        END IF;

      ELSIF (NEW.pkgitem_type = &#39;M&#39;) THEN
        IF (NOT EXISTS(SELECT metasql_id
                       FROM metasql
                       WHERE ((metasql_id=NEW.pkgitem_item_id)
                          AND (metasql_group=_group)
                          AND (metasql_name=_object)))) THEN
          RAISE EXCEPTION &#39;Cannot create MetaSQL statement % as a Package Item without a corresponding metasql record.&#39;,
            NEW.pkgitem_name;
        END IF;

      ELSIF (NEW.pkgitem_type = &#39;P&#39;) THEN
        IF (NOT EXISTS(SELECT priv_id
                       FROM priv
                       WHERE ((priv_id=NEW.pkgitem_item_id)
                          AND (priv_name=NEW.pkgitem_name)))) THEN
          RAISE EXCEPTION &#39;Cannot create Privilege % as a Package Item without a corresponding priv record.&#39;,
            NEW.pkgitem_name;
        END IF;

      ELSIF (NEW.pkgitem_type = &#39;R&#39;) THEN
        IF (NOT EXISTS(SELECT report_id
                       FROM report
                       WHERE ((report_id=NEW.pkgitem_item_id)
                          AND (report_name=NEW.pkgitem_name)))) THEN
          RAISE EXCEPTION &#39;Cannot create Report % as a Package Item without a corresponding report record.&#39;,
            NEW.pkgitem_name;
        END IF;

      ELSIF (NEW.pkgitem_type = &#39;S&#39;) THEN
        IF (NOT EXISTS(SELECT oid
                       FROM pg_namespace
                       WHERE (LOWER(nspname)=LOWER(NEW.pkgitem_name)))) THEN
          RAISE EXCEPTION &#39;Cannot create Schema % as a Package Item without a corresponding schema in the database.&#39;,
            NEW.pkgitem_name;
        END IF;

      ELSIF (NEW.pkgitem_type = &#39;T&#39;) THEN
        IF (NOT EXISTS(SELECT pg_class.oid
                     FROM pg_class, pg_namespace
                     WHERE ((relname=_object)
                        AND (relnamespace=pg_namespace.oid)
                        AND (relkind=&#39;r&#39;)
                        AND (nspname=_schema)))) THEN
          RAISE EXCEPTION &#39;Cannot create Table % as a Package Item without a corresponding table in the database.&#39;,
            NEW.pkgitem_name;
        END IF;

      ELSIF (NEW.pkgitem_type = &#39;U&#39;) THEN
        IF (NOT EXISTS(SELECT uiform_id
                       FROM uiform
                       WHERE ((uiform_id=NEW.pkgitem_item_id)
                          AND (uiform_name=NEW.pkgitem_name)))) THEN
          RAISE EXCEPTION &#39;Cannot create User Interface Form % as a Package Item without a corresponding uiform record.&#39;,
            NEW.pkgitem_name;
        END IF;

      ELSIF (NEW.pkgitem_type = &#39;V&#39;) THEN
        IF (NOT EXISTS(SELECT pg_class.oid
                     FROM pg_class, pg_namespace
                     WHERE ((relname=_object)
                        AND (relnamespace=pg_namespace.oid)
                        AND (relkind=&#39;v&#39;)
                        AND (nspname=_schema)))) THEN
          RAISE EXCEPTION &#39;Cannot create View % as a Package Item without a corresponding view in the database.&#39;,
            NEW.pkgitem_name;
        END IF;

      ELSE
        RAISE EXCEPTION &#39;&quot;%&quot; is not a valid type of package item.&#39;,
          NEW.pkgitem_type;
      END IF;

    ELSIF (TG_OP = &#39;DELETE&#39;) THEN
      IF _debug THEN RAISE NOTICE &#39;Deleting % % %&#39;, OLD.pkgitem_item_id, OLD.pkgitem_name, OLD.pkgitem_type; END IF;

      _object = OLD.pkgitem_name;

      SELECT pkghead_name INTO _schema
      FROM pkghead
      WHERE (pkghead_id=OLD.pkgitem_pkghead_id);
      IF (NOT FOUND) THEN
        _schema := &#39;public&#39;;
      END IF;

      IF (OLD.pkgitem_type = &#39;F&#39;) THEN
        _object := SPLIT_PART(_object, &#39;(&#39;, 1);
      ELSIF (OLD.pkgitem_type = &#39;M&#39;) THEN
        _group  := SPLIT_PART(_object, &#39;-&#39;, 1);
        _object := SPLIT_PART(_object, &#39;-&#39;, 2);
      END IF;
      IF _debug THEN
        RAISE NOTICE &#39;_schema % and _object %&#39;, _schema, _object;
      END IF;

      IF (OLD.pkgitem_type = &#39;C&#39;) THEN
        DELETE FROM script WHERE ((script_id=OLD.pkgitem_item_id)
                              AND (script_name=OLD.pkgitem_name));

      ELSIF (OLD.pkgitem_type = &#39;D&#39;) THEN
        DELETE FROM cmd
          WHERE ((cmd_id=OLD.pkgitem_item_id)
            AND  (cmd_name=OLD.pkgitem_name));

      ELSIF (OLD.pkgitem_type = &#39;F&#39;) THEN
        -- SELECT dropIfExists(&#39;FUNCTION&#39;, CAST (oid::regprocedure AS TEXT), _schema)
        PERFORM dropIfExists(&#39;FUNCTION&#39;,
                            proname || &#39;(&#39; ||
                            oidvectortypes(proargtypes) || &#39;)&#39;,
                            _schema)
        FROM pg_proc
        WHERE (oid=OLD.pkgitem_item_id);

      ELSIF (OLD.pkgitem_type = &#39;G&#39;) THEN
        PERFORM dropIfExists(&#39;TRIGGER&#39;, _object, _schema);

      ELSIF (OLD.pkgitem_type = &#39;I&#39;) THEN
        DELETE FROM image WHERE ((image_id=OLD.pkgitem_item_id)
                             AND (image_name=OLD.pkgitem_name));

      ELSIF (OLD.pkgitem_type = &#39;M&#39;) THEN
        DELETE FROM metasql WHERE ((metasql_id=OLD.pkgitem_item_id)
                               AND (metasql_group=_group)
                               AND (metasql_name=_object));

      ELSIF (OLD.pkgitem_type = &#39;P&#39;) THEN
        DELETE FROM priv
        WHERE ((priv_id=OLD.pkgitem_item_id) 
           AND (priv_name=OLD.pkgitem_name));

      ELSIF (OLD.pkgitem_type = &#39;R&#39;) THEN
        DELETE FROM report
        WHERE ((report_id=OLD.pkgitem_item_id)
           AND (report_name=OLD.pkgitem_name));

      ELSIF (OLD.pkgitem_type = &#39;S&#39;) THEN
        PERFORM dropIfExists(&#39;SCHEMA&#39;, OLD.pkgitem_name, OLD.pkgitem_name);

      ELSIF (OLD.pkgitem_type = &#39;T&#39;) THEN
        PERFORM dropIfExists(&#39;TABLE&#39;, _object, _schema, true);

      ELSIF (OLD.pkgitem_type = &#39;U&#39;) THEN
        DELETE FROM uiform
        WHERE ((uiform_id=OLD.pkgitem_item_id)
           AND (uiform_name=OLD.pkgitem_name));

      ELSIF (OLD.pkgitem_type = &#39;V&#39;) THEN
        PERFORM dropIfExists(&#39;VIEW&#39;, _object, _schema, true);

      ELSE
        RAISE EXCEPTION &#39;&quot;%&quot; is not a valid type of package item.&#39;,
          OLD.pkgitem_type;
      END IF;
      RETURN OLD;
    END IF;

    RETURN NEW;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkgmetasqlaftertrigger">_pkgmetasqlaftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (TG_OP = &#39;DELETE&#39;) THEN
    DELETE FROM pkgitem
    WHERE ((pkgitem_type=&#39;M&#39;)
       AND (pkgitem_item_id=OLD.metasql_id)
       AND (pkgitem_pkghead_id IN (SELECT pkghead_id
                                   FROM pkghead
                                   WHERE pkghead_name = TG_TABLE_SCHEMA)));
    RETURN OLD;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkgmetasqlaltertrigger">_pkgmetasqlaltertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (pkgMayBeModified(TG_TABLE_SCHEMA)) THEN
    IF (TG_OP = &#39;DELETE&#39;) THEN
      RETURN OLD;
    ELSE
      RETURN NEW;
    END IF;
  END IF;

  IF (TG_OP = &#39;INSERT&#39;) THEN
    RAISE EXCEPTION &#39;You may not create MetaSQL statements in packages except using the xTuple Updater utility&#39;;

  ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
    RAISE EXCEPTION &#39;You may not alter MetaSQL statements in packages except using the xTuple Updater utility&#39;;

  ELSIF (TG_OP = &#39;DELETE&#39;) THEN
    RAISE EXCEPTION &#39;You may not delete MetaSQL statements from packages. Try deleting or disabling the package.&#39;;

  END IF;

  RETURN NEW;
END;

</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkgmetasqlbeforetrigger">_pkgmetasqlbeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _metasqlid    INTEGER;
  _debug        BOOL := false;

BEGIN
  IF (TG_OP = &#39;UPDATE&#39;) THEN
    IF (_debug) THEN
      RAISE NOTICE &#39;update OLD %-%, NEW %-%&#39;,
                   OLD.metasql_group, OLD.metasql_name,
                   NEW.metasql_group, NEW.metasql_name;
    END IF;

    IF (NEW.metasql_name != OLD.metasql_name OR NEW.metasql_group != OLD.metasql_group) THEN
      SELECT metasql_id INTO _metasqlid
      FROM metasql
      WHERE metasql_name=NEW.metasql_name AND metasql_group=NEW.metasql_group;
      IF (FOUND) THEN
        RAISE EXCEPTION &#39;Cannot change the MetaSQL statement named %-% because another MetaSQL statement with that group and name already exists.&#39;, NEW.metasql_group, NEW.metasql_name;
      END IF;
    END IF;

  ELSIF (TG_OP = &#39;INSERT&#39;) THEN
    IF (_debug) THEN
      RAISE NOTICE &#39;insert NEW %-%&#39;, NEW.metasql_group, NEW.metasql_name;
    END IF;
    SELECT metasql_id INTO _metasqlid
    FROM metasql
    WHERE metasql_name=NEW.metasql_name AND metasql_group=NEW.metasql_group;
    IF (FOUND) THEN
      RAISE EXCEPTION &#39;Cannot create new MetaSQL statement % because another MetaSQL statement with that name already exists.&#39;, NEW.metasql_name;
    END IF;

  ELSIF (TG_OP = &#39;DELETE&#39;) THEN
    RETURN OLD;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkgprivaftertrigger">_pkgprivaftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (TG_OP = &#39;DELETE&#39;) THEN
    DELETE FROM pkgitem
    WHERE ((pkgitem_type=&#39;P&#39;)
       AND (pkgitem_item_id=OLD.priv_id)
       AND (pkgitem_pkghead_id IN (SELECT pkghead_id
                                   FROM pkghead
                                   WHERE pkghead_name = TG_TABLE_SCHEMA)));
    RETURN OLD;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkgprivaltertrigger">_pkgprivaltertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (pkgMayBeModified(TG_TABLE_SCHEMA)) THEN
    IF (TG_OP = &#39;DELETE&#39;) THEN
      RETURN OLD;
    ELSE
      RETURN NEW;
    END IF;
  END IF;

  IF (TG_OP = &#39;INSERT&#39;) THEN
    RAISE EXCEPTION &#39;You may not create privileges in packages except using the xTuple Updater utility&#39;;

  ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
    RAISE EXCEPTION &#39;You may not alter privileges in packages except using the xTuple Updater utility&#39;;

  ELSIF (TG_OP = &#39;DELETE&#39;) THEN
    RAISE EXCEPTION &#39;You may not delete privileges from packages. Try deleting or disabling the package.&#39;;

  END IF;

  RETURN NEW;
END;

</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkgprivbeforetrigger">_pkgprivbeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _privid       INTEGER;
  _debug        BOOL := false;

BEGIN
  IF (TG_OP = &#39;UPDATE&#39;) THEN
    IF (_debug) THEN
      RAISE NOTICE &#39;OLD.priv_name %, NEW.priv_name %&#39;,
                   OLD.priv_name, NEW.priv_name;
    END IF;

    IF (NEW.priv_name != OLD.priv_name) THEN
      SELECT priv_id INTO _privid FROM priv WHERE priv_name=NEW.priv_name;
      IF (FOUND) THEN
        RAISE EXCEPTION &#39;Cannot change privilege name % because another privilege with that name already exists.&#39;, NEW.priv_name;
      END IF;
    END IF;

  ELSIF (TG_OP = &#39;INSERT&#39;) THEN
    IF (_debug) THEN
      RAISE NOTICE &#39;inserting NEW.priv_name %&#39;, NEW.priv_name;
    END IF;
    SELECT priv_id INTO _privid FROM priv WHERE priv_name=NEW.priv_name;
    IF (FOUND) THEN
      RAISE EXCEPTION &#39;Cannot create new privilege % because another privilege with that name already exists.&#39;, NEW.priv_name;
    END IF;

  ELSIF (TG_OP = &#39;DELETE&#39;) THEN
    IF (_debug) THEN RAISE NOTICE &#39;deleting pkgpriv_id %&#39;, OLD.priv_id; END IF;
    DELETE FROM usrpriv WHERE usrpriv_priv_id=OLD.priv_id;
    DELETE FROM grppriv WHERE grppriv_priv_id=OLD.priv_id;

    RETURN OLD;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkgreportaftertrigger">_pkgreportaftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (TG_OP = &#39;DELETE&#39;) THEN
    DELETE FROM pkgitem
    WHERE ((pkgitem_type=&#39;R&#39;)
       AND (pkgitem_item_id=OLD.report_id)
       AND (pkgitem_pkghead_id IN (SELECT pkghead_id
                                   FROM pkghead
                                   WHERE pkghead_name = TG_TABLE_SCHEMA)));
    RETURN OLD;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkgreportaltertrigger">_pkgreportaltertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (pkgMayBeModified(TG_TABLE_SCHEMA)) THEN
    IF (TG_OP = &#39;DELETE&#39;) THEN
      RETURN OLD;
    ELSE
      RETURN NEW;
    END IF;
  END IF;

  IF (TG_OP = &#39;INSERT&#39;) THEN
    RAISE EXCEPTION &#39;You may not create report definitions in packages except using the xTuple Updater utility&#39;;

  ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
    RAISE EXCEPTION &#39;You may not alter report definitions in packages except using the xTuple Updater utility&#39;;

  ELSIF (TG_OP = &#39;DELETE&#39;) THEN
    RAISE EXCEPTION &#39;You may not delete report definitions from packages. Try deleting or disabling the package.&#39;;

  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkgreportbeforetrigger">_pkgreportbeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _reportid     INTEGER;
  _debug        BOOL := false;

BEGIN
  IF (TG_OP = &#39;UPDATE&#39;) THEN
    IF (_debug) THEN
      RAISE NOTICE &#39;update OLD % %, NEW % %&#39;,
                   OLD.report_name, OLD.report_grade, NEW.report_name, NEW.report_grade;
    END IF;

    IF (NEW.report_name != OLD.report_name) THEN
      SELECT report_id INTO _reportid
      FROM report
      WHERE ((report_name=NEW.report_name)
        AND  (report_grade=NEW.report_grade));
      IF (FOUND) THEN
        RAISE EXCEPTION &#39;Cannot change report % % because another report with that name and grade already exists.&#39;, NEW.report_name, NEW.report_grade;
      END IF;
    END IF;

  ELSIF (TG_OP = &#39;INSERT&#39;) THEN
    IF (_debug) THEN
      RAISE NOTICE &#39;insert NEW % %&#39;, NEW.report_name, NEW.report_grade;
    END IF;
    SELECT report_id INTO _reportid
    FROM report
    WHERE ((report_name=NEW.report_name)
      AND  (report_grade=NEW.report_grade));
    IF (FOUND) THEN
      RAISE EXCEPTION &#39;Cannot create new report % % because another report with that name and grade already exists.&#39;, NEW.report_name, NEW.report_grade;
    END IF;

  ELSIF (TG_OP = &#39;DELETE&#39;) THEN

    RETURN OLD;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkgscriptaftertrigger">_pkgscriptaftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (TG_OP = &#39;DELETE&#39;) THEN
    DELETE FROM pkgitem
    WHERE ((pkgitem_type=&#39;C&#39;)
       AND (pkgitem_item_id=OLD.script_id)
       AND (pkgitem_pkghead_id IN (SELECT pkghead_id
                                   FROM pkghead
                                   WHERE pkghead_name = TG_TABLE_SCHEMA)));
    RETURN OLD;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkgscriptaltertrigger">_pkgscriptaltertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (pkgMayBeModified(TG_TABLE_SCHEMA)) THEN
    IF (TG_OP = &#39;DELETE&#39;) THEN
      RETURN OLD;
    ELSE
      RETURN NEW;
    END IF;
  END IF;

  IF (TG_OP = &#39;INSERT&#39;) THEN
    RAISE EXCEPTION &#39;You may not create scripts in packages except using the xTuple Updater utility&#39;;

  ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
    RAISE EXCEPTION &#39;You may not alter scripts in packages except using the xTuple Updater utility&#39;;

  ELSIF (TG_OP = &#39;DELETE&#39;) THEN
    RAISE EXCEPTION &#39;You may not delete scripts from packages. Try deleting or disabling the package.&#39;;

  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkgscriptbeforetrigger">_pkgscriptbeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _scriptid     INTEGER;
  _debug        BOOL := false;

BEGIN
  IF (TG_OP = &#39;UPDATE&#39;) THEN
    RETURN NEW;

  ELSIF (TG_OP = &#39;INSERT&#39;) THEN
    RETURN NEW;

  ELSIF (TG_OP = &#39;DELETE&#39;) THEN
    RETURN OLD;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkguiformaftertrigger">_pkguiformaftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (TG_OP = &#39;DELETE&#39;) THEN
    DELETE FROM pkgitem
    WHERE ((pkgitem_type=&#39;U&#39;)
       AND (pkgitem_item_id=OLD.uiform_id)
       AND (pkgitem_pkghead_id IN (SELECT pkghead_id
                                   FROM pkghead
                                   WHERE pkghead_name = TG_TABLE_SCHEMA)));
    RETURN OLD;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkguiformaltertrigger">_pkguiformaltertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (pkgMayBeModified(TG_TABLE_SCHEMA)) THEN
    IF (TG_OP = &#39;DELETE&#39;) THEN
      RETURN OLD;
    ELSE
      RETURN NEW;
    END IF;
  END IF;

  IF (TG_OP = &#39;INSERT&#39;) THEN
    RAISE EXCEPTION &#39;You may not create forms in packages except using the xTuple Updater utility&#39;;

  ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
    RAISE EXCEPTION &#39;You may not alter forms in packages except using the xTuple Updater utility&#39;;

  ELSIF (TG_OP = &#39;DELETE&#39;) THEN
    RAISE EXCEPTION &#39;You may not delete forms from packages. Try deleting or disabling the package.&#39;;

  END IF;

  RETURN NEW;
END;

</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-pkguiformbeforetrigger">_pkguiformbeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _uiformid     INTEGER;
  _debug        BOOL := false;

BEGIN
  IF (TG_OP = &#39;UPDATE&#39;) THEN
    RETURN NEW;

  ELSIF (TG_OP = &#39;INSERT&#39;) THEN
    RETURN NEW;

  ELSIF (TG_OP = &#39;DELETE&#39;) THEN
    RETURN OLD;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-poheadtrigger">_poheadtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _cmnttypeid 	INTEGER;
  _check	BOOLEAN;

BEGIN

  -- Check
  IF ( (TG_OP = &#39;UPDATE&#39;) AND (NOT checkPrivilege(&#39;MaintainPurchaseOrders&#39;)) AND (NOT checkPrivilege(&#39;PostVouchers&#39;)) ) THEN
    RAISE EXCEPTION &#39;You do not have privileges to alter a Purchase Order.&#39;;
  END IF;
  IF ( ( (TG_OP = &#39;INSERT&#39;) OR (TG_OP = &#39;DELETE&#39;) ) AND (NOT checkPrivilege(&#39;MaintainPurchaseOrders&#39;)) ) THEN
    RAISE EXCEPTION &#39;You do not have privileges to alter a Purchase Order.&#39;;
  END IF;

  IF ( (TG_OP = &#39;INSERT&#39;) OR (TG_op = &#39;UPDATE&#39;) ) THEN
    IF (NOT ISNUMERIC(NEW.pohead_number)) THEN
      RAISE EXCEPTION &#39;Purchase Order Number must be numeric.&#39;;
    END IF;
  END IF;

  IF ( SELECT (metric_value=&#39;t&#39;)
       FROM metric
       WHERE (metric_name=&#39;POChangeLog&#39;) ) THEN

--  Cache the cmnttype_id for ChangeLog
    SELECT cmnttype_id INTO _cmnttypeid
    FROM cmnttype
    WHERE (cmnttype_name=&#39;ChangeLog&#39;);
    IF (FOUND) THEN
      IF (TG_OP = &#39;INSERT&#39;) THEN
        PERFORM postComment(_cmnttypeid, &#39;P&#39;, NEW.pohead_id, &#39;Created&#39;);

      ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
        IF (OLD.pohead_terms_id &lt;&gt; NEW.pohead_terms_id) THEN
          PERFORM postComment( _cmnttypeid, &#39;P&#39;, NEW.pohead_id,
                               (&#39;Terms Changed from &quot;&#39; || oldterms.terms_code || &#39;&quot; to &quot;&#39; || newterms.terms_code || &#39;&quot;&#39;) )
          FROM terms AS oldterms, terms AS newterms
          WHERE ( (oldterms.terms_id=OLD.pohead_terms_id)
           AND (newterms.terms_id=NEW.pohead_terms_id) );
        END IF;

      ELSIF (TG_OP = &#39;DELETE&#39;) THEN
        DELETE FROM comment
        WHERE ( (comment_source=&#39;P&#39;)
         AND (comment_source_id=OLD.pohead_id) );
      END IF;
    END IF;
  END IF;

  IF (TG_OP = &#39;DELETE&#39;) THEN
    RETURN OLD;
  ELSE
    RETURN NEW;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-poitemtrigger">_poitemtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _cmnttypeid 	INTEGER;
  _status      	CHAR(1);
  _check      	BOOLEAN;
  _cnt     	INTEGER;
  _s 		RECORD;
BEGIN

  -- Check
  IF ( (TG_OP = &#39;UPDATE&#39;) AND
       (NOT checkPrivilege(&#39;MaintainPurchaseOrders&#39;)) AND
       (NOT checkPrivilege(&#39;ChangePurchaseOrderQty&#39;)) AND
       (NOT checkPrivilege(&#39;PostVouchers&#39;)) ) THEN
    RAISE EXCEPTION &#39;You do not have privileges to alter a Purchase Order.&#39;;
  END IF;
  IF ( ( (TG_OP = &#39;INSERT&#39;) OR (TG_OP = &#39;DELETE&#39;) ) AND (NOT checkPrivilege(&#39;MaintainPurchaseOrders&#39;)) ) THEN
    RAISE EXCEPTION &#39;You do not have privileges to alter a Purchase Order.&#39;;
  END IF;

  IF (TG_OP = &#39;INSERT&#39; OR TG_OP = &#39;UPDATE&#39;) THEN
    SELECT pohead_status INTO _status
    FROM pohead
    WHERE (pohead_id=NEW.poitem_pohead_id);

    IF (NEW.poitem_itemsite_id=-1) THEN
      NEW.poitem_itemsite_id := NULL;
    END IF;
    IF (NEW.poitem_expcat_id=-1) THEN
      NEW.poitem_expcat_id := NULL;
    END IF;

    IF (NEW.poitem_itemsite_id IS NOT NULL AND NEW.poitem_expcat_id IS NOT NULL) THEN
      RAISE EXCEPTION &#39;A purchase order line may not include both an inventory and non-inventory item&#39;;
    ELSIF (NEW.poitem_itemsite_id IS NULL AND NEW.poitem_expcat_id IS NULL) THEN
      RAISE EXCEPTION &#39;A purchase order line must specify either an inventory item or a non-inventory expense category&#39;;
    ELSIF (NEW.poitem_qty_ordered IS NULL) THEN
      RAISE EXCEPTION &#39;A purchase order line must specify a quantity&#39;;
    ELSIF (COALESCE(NEW.poitem_itemsite_id,-1) != -1) THEN
      SELECT (COUNT(item_id)=1) INTO _check
      FROM itemsite, item
      WHERE ((itemsite_id=NEW.poitem_itemsite_id)
      AND (itemsite_item_id=item_id)
      AND (item_type IN (&#39;P&#39;,&#39;O&#39;,&#39;M&#39;)));
      IF NOT (_check) THEN
        RAISE EXCEPTION &#39;The item is not a purchasable item type&#39;;
      END IF;
    END IF;
  END IF;

  IF (TG_OP = &#39;INSERT&#39;) THEN
    IF (_status=&#39;C&#39;) THEN
      RAISE EXCEPTION &#39;New lines may not be inserted into a closed purchase order&#39;;
    END IF;
    
    --Fetch and apply default item source data if applicable    
    IF ((NEW.poitem_itemsrc_id IS NULL) AND (NEW.poitem_itemsite_id IS NOT NULL)) THEN
      IF (NEW.poitem_itemsrc_id IS NULL) THEN
        SELECT COUNT(itemsrc_id)  INTO _cnt
        FROM pohead,itemsrc,itemsite
        WHERE ((pohead_id=NEW.poitem_pohead_id)
        AND (pohead_vend_id=itemsrc_vend_id)
        AND (itemsite_id=NEW.poitem_itemsite_id)
        AND (itemsite_item_id=itemsrc_item_id));

        IF (_cnt = 1) THEN
          -- We found the one and only item source, so populate data for it
          SELECT itemsrc.* INTO _s
          FROM pohead,itemsrc,itemsite
          WHERE ((pohead_id=NEW.poitem_pohead_id)
          AND (pohead_vend_id=itemsrc_vend_id)
          AND (itemsite_id=NEW.poitem_itemsite_id)
          AND (itemsite_item_id=itemsrc_item_id));
          IF (FOUND) THEN
            NEW.poitem_itemsrc_id 		:= _s.itemsrc_id;
            NEW.poitem_vend_uom            	:= _s.itemsrc_vend_uom;
            NEW.poitem_invvenduomratio    	:= _s.itemsrc_invvendoruomratio;
            NEW.poitem_duedate			:= COALESCE(NEW.poitem_duedate, CURRENT_DATE + _s.itemsrc_leadtime);
            NEW.poitem_vend_item_number 	:= COALESCE(NEW.poitem_vend_item_number,_s.itemsrc_vend_item_number);
            NEW.poitem_vend_item_descrip   	:= COALESCE(NEW.poitem_vend_item_descrip,_s.itemsrc_vend_item_descrip);
            NEW.poitem_manuf_name		:= COALESCE(NEW.poitem_manuf_name,_s.itemsrc_manuf_name);
            NEW.poitem_manuf_item_number	:= COALESCE(NEW.poitem_manuf_item_number, _s.itemsrc_manuf_item_number);
            NEW.poitem_manuf_item_descrip	:= COALESCE(NEW.poitem_manuf_item_descrip, _s.itemsrc_manuf_item_descrip);
          END IF;
        ELSIF (_cnt &gt; 1) THEN
          -- There are multiple sources, see if there is an exact match with provided vendor info.
          SELECT itemsrc.* INTO _s
          FROM pohead,itemsrc,itemsite
          WHERE ((pohead_id=NEW.poitem_pohead_id)
          AND (pohead_vend_id=itemsrc_vend_id)
          AND (itemsite_id=NEW.poitem_itemsite_id)
          AND (itemsite_item_id=itemsrc_item_id)
          AND (NEW.poitem_vend_item_number=itemsrc_vend_item_number)
          AND (COALESCE(NEW.poitem_manuf_name,&#39;&#39;)=COALESCE(itemsrc_manuf_name,&#39;&#39;))
          AND (COALESCE(NEW.poitem_manuf_item_number,&#39;&#39;)=COALESCE(itemsrc_manuf_item_number,&#39;&#39;)));
          IF (FOUND) THEN
            NEW.poitem_itemsrc_id 		:= _s.itemsrc_id;
            NEW.poitem_vend_uom            	:= _s.itemsrc_vend_uom;
            NEW.poitem_invvenduomratio    	:= _s.itemsrc_invvendoruomratio;
            NEW.poitem_duedate			:= COALESCE(NEW.poitem_duedate, CURRENT_DATE + _s.itemsrc_leadtime);
            NEW.poitem_vend_item_descrip   	:= COALESCE(NEW.poitem_vend_item_descrip,_s.itemsrc_vend_item_descrip);
            NEW.poitem_manuf_item_descrip	:= COALESCE(NEW.poitem_manuf_item_descrip, _s.itemsrc_manuf_item_descrip);
          END IF;
        END IF;
      END IF;
    END IF;

    IF (NEW.poitem_duedate IS NULL) THEN
      RAISE EXCEPTION  &#39;A due date is required&#39;;
    END IF;
    
    --Set defaults
    NEW.poitem_linenumber    		:= COALESCE(NEW.poitem_linenumber,(
						SELECT COALESCE(MAX(poitem_linenumber),0) + 1
						FROM poitem
						WHERE (poitem_pohead_id=NEW.poitem_pohead_id)));
    NEW.poitem_status                  := _status;
    NEW.poitem_invvenduomratio 	:= COALESCE(NEW.poitem_invvenduomratio,1);
    NEW.poitem_vend_item_number 	:= COALESCE(NEW.poitem_vend_item_number,&#39;&#39;);
    NEW.poitem_vend_item_descrip   	:= COALESCE(NEW.poitem_vend_item_descrip,&#39;&#39;);
    NEW.poitem_unitprice       	:= COALESCE(NEW.poitem_unitprice,(
						SELECT currToCurr(itemsrcp_curr_id, pohead_curr_id, itemsrcp_price, pohead_orderdate)
						FROM itemsrcp, pohead
						WHERE ( (itemsrcp_itemsrc_id=NEW.poitem_itemsrc_id)
						AND (itemsrcp_qtybreak &lt;= NEW.poitem_qty_ordered)
						AND (pohead_id=NEW.poitem_pohead_id) ) 
						ORDER BY itemsrcp_qtybreak DESC
						LIMIT 1), 0);
    NEW.poitem_stdcost			:= COALESCE(NEW.poitem_stdcost,(
						SELECT stdcost(itemsite_item_id)
						FROM itemsite
						WHERE (itemsite_id=NEW.poitem_itemsite_id)));
    NEW.poitem_bom_rev_id		:= COALESCE(NEW.poitem_bom_rev_id,(
						SELECT getActiveRevId(&#39;BOM&#39;,itemsite_item_id)
						FROM itemsite
						WHERE (itemsite_id=NEW.poitem_itemsite_id)));
    NEW.poitem_boo_rev_id		:= COALESCE(NEW.poitem_bom_rev_id,(
						SELECT getActiveRevId(&#39;BOO&#39;,itemsite_item_id)
						FROM itemsite
						WHERE (itemsite_id=NEW.poitem_itemsite_id)));
    NEW.poitem_comments		:= COALESCE(NEW.poitem_comments,&#39;&#39;);
    NEW.poitem_freight			:= COALESCE(NEW.poitem_freight,0);
    NEW.poitem_qty_received		:= 0;
    NEW.poitem_qty_returned		:= 0;
    NEW.poitem_qty_vouchered		:= 0;
      
--   Insert Event Start
       
    INSERT INTO evntlog ( evntlog_evnttime, evntlog_username, evntlog_evnttype_id,
                          evntlog_ordtype, evntlog_ord_id, evntlog_warehous_id, evntlog_number )
    SELECT CURRENT_TIMESTAMP, evntnot_username, evnttype_id,
                     &#39;P&#39;, NEW.poitem_id, itemsite_warehous_id, (pohead_number || &#39;-&#39; || NEW.poitem_linenumber || &#39;: &#39; || item_number)
    FROM evntnot, evnttype, itemsite, item, pohead
     WHERE ( (evntnot_evnttype_id=evnttype_id)
     AND (evntnot_warehous_id=itemsite_warehous_id)
     AND (itemsite_id=NEW.poitem_itemsite_id)
     AND (itemsite_item_id=item_id)
     AND (NEW.poitem_pohead_id=pohead_id)
     AND (NEW.poitem_duedate &lt;= (CURRENT_DATE + itemsite_eventfence))
     AND (evnttype_name=&#39;POitemCreate&#39;) );

--   Insert Event End

  END IF;

  IF ( SELECT (metric_value=&#39;t&#39;)
       FROM metric
       WHERE (metric_name=&#39;POChangeLog&#39;) ) THEN

--  Cache the cmnttype_id for ChangeLog
    SELECT cmnttype_id INTO _cmnttypeid
    FROM cmnttype
    WHERE (cmnttype_name=&#39;ChangeLog&#39;);
    IF (FOUND) THEN
      IF (TG_OP = &#39;INSERT&#39;) THEN
        PERFORM postComment(_cmnttypeid, &#39;P&#39;, NEW.poitem_pohead_id, (&#39;Created Line #&#39; || NEW.poitem_linenumber::TEXT));

      ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
        IF (NEW.poitem_qty_ordered &lt;&gt; OLD.poitem_qty_ordered) THEN
          PERFORM postComment( _cmnttypeid, &#39;PI&#39;, NEW.poitem_id,
                               ( &#39;Qty. Ordered Changed from &#39; || formatQty(OLD.poitem_qty_ordered) ||
                                 &#39; to &#39; || formatQty(NEW.poitem_qty_ordered ) ) );
        END IF;

      ELSIF (TG_OP = &#39;DELETE&#39;) THEN
        PERFORM postComment(_cmnttypeid, &#39;P&#39;, OLD.poitem_pohead_id, (&#39;Deleted Line #&#39; || OLD.poitem_linenumber::TEXT));
      END IF;
    END IF;
  END IF;

  IF (TG_OP = &#39;DELETE&#39;) THEN
    DELETE FROM comment
     WHERE ( (comment_source=&#39;PI&#39;)
       AND   (comment_source_id=OLD.poitem_id) );

    DELETE FROM charass
     WHERE ((charass_target_type=&#39;PI&#39;)
       AND  (charass_target_id=OLD.poitem_id));

    IF (OLD.poitem_status = &#39;O&#39;) THEN
      IF ( (SELECT (count(*) &lt; 1)
              FROM poitem
             WHERE ((poitem_pohead_id=OLD.poitem_pohead_id)
               AND  (poitem_id != OLD.poitem_id)
               AND  (poitem_status &lt;&gt; &#39;C&#39;)) ) ) THEN
        UPDATE pohead SET pohead_status = &#39;C&#39;
         WHERE ((pohead_id=OLD.poitem_pohead_id)
           AND  (pohead_status=&#39;O&#39;));
      END IF;
    END IF;

    RETURN OLD;
  ELSE
    IF (TG_OP = &#39;UPDATE&#39;) THEN

      IF (NEW.poitem_itemsite_id != OLD.poitem_itemsite_id) THEN
        RAISE EXCEPTION &#39;You may not change the item site for a line item.&#39;;
      ELSIF (NEW.poitem_expcat_id != OLD.poitem_expcat_id) THEN
        RAISE EXCEPTION &#39;You may not change the expense category for a line item.&#39;;
      END IF;
    
      IF (OLD.poitem_status &lt;&gt; NEW.poitem_status) THEN
        IF ( (SELECT (count(*) &lt; 1)
                FROM poitem
               WHERE ((poitem_pohead_id=NEW.poitem_pohead_id)
                 AND  (poitem_id != NEW.poitem_id)
                 AND  (poitem_status&lt;&gt;&#39;C&#39;)) ) AND (NEW.poitem_status=&#39;C&#39;) ) THEN
          UPDATE pohead SET pohead_status = &#39;C&#39;
           WHERE ((pohead_id=NEW.poitem_pohead_id)
             AND  (pohead_status=&#39;O&#39;));
        ELSE
          UPDATE pohead SET pohead_status = &#39;O&#39;
           WHERE ((pohead_id=NEW.poitem_pohead_id)
             AND  (pohead_status=&#39;C&#39;));
        END IF;
      END IF;
    END IF;

    RETURN NEW;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-prospectaftertrigger">_prospectaftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _crmacctid	INTEGER;
BEGIN
  SELECT crmacct_id INTO _crmacctid
  FROM crmacct
  WHERE crmacct_prospect_id = NEW.prospect_id;

  IF (crmAcctNumberUsed(NEW.prospect_number, _crmacctid)) THEN
    RAISE EXCEPTION &#39;Prospect Number % is already in use by another CRM entity&#39;,
      NEW.prospect_number;
  END IF;

  IF (TG_OP = &#39;INSERT&#39;) THEN
    SELECT crmacct_id INTO _crmacctid
    FROM crmacct
    WHERE crmacct_number=NEW.prospect_number;
    IF (FOUND) THEN
      UPDATE crmacct
      SET crmacct_prospect_id=NEW.prospect_id,crmacct_name=NEW.prospect_name
      WHERE crmacct_id=_crmacctid;
    ELSE
      PERFORM createCrmAcct(NEW.prospect_number, NEW.prospect_name, NEW.prospect_active, &#39;O&#39;, NULL,
                            NULL, NULL, NEW.prospect_id, NULL, NULL, NEW.prospect_cntct_id, NULL);
    END IF;
  ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
    UPDATE crmacct SET crmacct_number = NEW.prospect_number
    WHERE ((crmacct_prospect_id=NEW.prospect_id)
      AND  (crmacct_number!=NEW.prospect_number));
    UPDATE crmacct SET crmacct_name = NEW.prospect_name
    WHERE ((crmacct_prospect_id=NEW.prospect_id)
      AND  (crmacct_name!=NEW.prospect_name));
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-prospecttrigger">_prospecttrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _check BOOLEAN;
  _returnVal INTEGER;
BEGIN
  SELECT checkPrivilege(&#39;MaintainProspectMasters&#39;) OR checkPrivilege(&#39;MaintainProspects&#39;)
    INTO _check;
  IF (NOT _check) THEN
    RAISE EXCEPTION &#39;You do not have privileges to maintain Prospects.&#39;;
  END IF;

  _check := false;
  IF (TG_OP = &#39;INSERT&#39;) THEN
    _check := true;
  ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
    IF(OLD.prospect_number != NEW.prospect_number) THEN
      _check := true;
    END IF;
  END IF;
  IF (_check) THEN
    SELECT cust_id INTO _returnVal
      FROM custinfo
     WHERE (UPPER(cust_number)=UPPER(NEW.prospect_number));
    IF (_returnVal IS NULL) THEN
      SELECT prospect_id INTO _returnVal
        FROM prospect
       WHERE (UPPER(prospect_number)=UPPER(NEW.prospect_number));
      IF (_returnVal IS NOT NULL) THEN
        RAISE EXCEPTION &#39;The Number % is not unique for Prospects for Customers.&#39;, NEW.prospect_number;
      END IF;
    END IF;
  END IF;
  IF (TG_OP = &#39;DELETE&#39;) THEN
    UPDATE crmacct SET crmacct_prospect_id = NULL WHERE crmacct_prospect_id = OLD.prospect_id;
    RETURN OLD;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-quheadtrigger">_quheadtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _cmnttypeid INTEGER;
  _oldHoldType TEXT;
  _newHoldType TEXT;
  _p RECORD;
  _a RECORD;
  _w RECORD;
  _shiptoId INTEGER;
  _addrId INTEGER;
  _prjId INTEGER;
  _check BOOLEAN;
  _numGen CHAR(1);

BEGIN

  --  Checks
  SELECT checkPrivilege(&#39;MaintainQuotes&#39;) INTO _check;
  IF NOT (_check) THEN
    RAISE EXCEPTION &#39;You do not have privileges to maintain Quotes.&#39;;
  END IF;

  -- If this is imported, check the quote number
  IF (TG_OP = &#39;INSERT&#39;) THEN
    IF (NEW.quhead_imported) THEN
      SELECT fetchMetricText(&#39;QUNumberGeneration&#39;) INTO _numGen;
      IF ((NEW.quhead_number IS NULL) AND (_numGen=&#39;M&#39;)) THEN
        RAISE EXCEPTION &#39;You must supply a Quote Number.&#39;;
      ELSE
        IF ((NEW.quhead_number IS NOT NULL) AND (_numGen=&#39;A&#39;)) THEN
          RAISE EXCEPTION &#39;You may not supply a new Quote Number;
                          OpenMFG will generate the number.&#39;;
        ELSE
          IF ((NEW.quhead_number IS NULL) AND (_numGen=&#39;O&#39;)) THEN
            SELECT fetchqunumber() INTO NEW.quhead_number;
          ELSE
            IF (NEW.quhead_number IS NULL) THEN
              SELECT fetchsonumber() INTO NEW.quhead_number;
            END IF;
          END IF;
        END IF;
      END IF;
    END IF;
  ELSE
    IF (TG_OP = &#39;UPDATE&#39;) THEN
       IF (NEW.quhead_number &lt;&gt; OLD.quhead_number) THEN
         RAISE EXCEPTION &#39;The order number may not be changed.&#39;;
       END IF;
    END IF;
  END IF;

  IF (TG_OP IN (&#39;INSERT&#39;,&#39;UPDATE&#39;)) THEN
    -- Get Customer data
    IF (NEW.quhead_shipto_id IS NULL) THEN
      SELECT * INTO _p FROM (
      SELECT cust_number,cust_usespos,cust_blanketpos,cust_ffbillto,
	     cust_ffshipto,cust_name,cust_salesrep_id,cust_terms_id,cust_shipvia,
	     cust_commprcnt,cust_curr_id,cust_taxauth_id,
  	     addr_line1,addr_line2,addr_line3,addr_city,addr_state,addr_postalcode,addr_country,
	     shipto_id,shipto_addr_id,shipto_name,shipto_salesrep_id,shipto_shipvia,
	     shipto_shipchrg_id,shipto_shipform_id,shipto_commission,shipto_taxauth_id
      FROM custinfo
        LEFT OUTER JOIN cntct ON (cust_cntct_id=cntct_id)
        LEFT OUTER JOIN addr ON (cntct_addr_id=addr_id)
        LEFT OUTER JOIN shiptoinfo ON ((cust_id=shipto_cust_id) AND shipto_default)
      WHERE (cust_id=NEW.quhead_cust_id)
      UNION
      SELECT prospect_number,false,false,true,
	     true,prospect_name,prospect_salesrep_id,null,null,
	     null,null,prospect_taxauth_id,
  	     addr_line1,addr_line2,addr_line3,addr_city,addr_state,addr_postalcode,addr_country,
	     null,null,null,null,null,
	     null,null,null,null
      FROM prospect
        LEFT OUTER JOIN cntct ON (prospect_cntct_id=cntct_id)
        LEFT OUTER JOIN addr ON (cntct_addr_id=addr_id)
      WHERE (prospect_id=NEW.quhead_cust_id)) AS data;
    ELSE
      SELECT cust_creditstatus,cust_number,cust_usespos,cust_blanketpos,cust_ffbillto,
	     cust_ffshipto,cust_name,cust_salesrep_id,cust_terms_id,cust_shipvia,
	     cust_shipchrg_id,cust_shipform_id,cust_commprcnt,cust_curr_id,cust_taxauth_id,
  	     addr_line1,addr_line2,addr_line3,addr_city,addr_state,addr_postalcode,addr_country,
	     shipto_id,shipto_addr_id,shipto_name,shipto_salesrep_id,shipto_shipvia,
	     shipto_shipchrg_id,shipto_shipform_id,shipto_commission,shipto_taxauth_id INTO _p
      FROM shiptoinfo,custinfo
        LEFT OUTER JOIN cntct ON (cust_cntct_id=cntct_id)
        LEFT OUTER JOIN addr ON (cntct_addr_id=addr_id)
      WHERE ((cust_id=NEW.quhead_cust_id)
      AND (shipto_id=shipto_id));
    END IF;

    -- If there is customer data, then we can get to work
    IF (FOUND) THEN
      -- Only check PO number for imports because UI checks when whole quote is saved
      IF (TG_OP = &#39;INSERT&#39;) THEN
          -- Set to defaults if values not provided
          NEW.quhead_shipto_id 	:= COALESCE(NEW.quhead_shipto_id,_p.shipto_id);
	  NEW.quhead_salesrep_id 	:= COALESCE(NEW.quhead_salesrep_id,_p.shipto_salesrep_id,_p.cust_salesrep_id);
          NEW.quhead_terms_id		:= COALESCE(NEW.quhead_terms_id,_p.cust_terms_id);
          NEW.quhead_shipvia		:= COALESCE(NEW.quhead_shipvia,_p.shipto_shipvia,_p.cust_shipvia);
          NEW.quhead_commission	:= COALESCE(NEW.quhead_commission,_p.shipto_commission,_p.cust_commprcnt);
          NEW.quhead_quotedate		:= COALESCE(NEW.quhead_quotedate,current_date);
          NEW.quhead_packdate		:= COALESCE(NEW.quhead_packdate,NEW.quhead_quotedate);
          NEW.quhead_curr_id		:= COALESCE(NEW.quhead_curr_id,_p.cust_curr_id,basecurrid());
          NEW.quhead_taxauth_id	:= COALESCE(NEW.quhead_taxauth_id,_p.shipto_taxauth_id,_p.cust_taxauth_id);
          NEW.quhead_freight		:= COALESCE(NEW.quhead_freight,0);
          NEW.quhead_custponumber	:= COALESCE(NEW.quhead_custponumber,&#39;&#39;);
          NEW.quhead_ordercomments	:= COALESCE(NEW.quhead_ordercomments,&#39;&#39;);
          NEW.quhead_shipcomments	:= COALESCE(NEW.quhead_shipcomments,&#39;&#39;);
          NEW.quhead_shiptophone	:= COALESCE(NEW.quhead_shiptophone,&#39;&#39;);
          NEW.quhead_misc		:= COALESCE(NEW.quhead_misc,0);
          NEW.quhead_misc_descrip	:= COALESCE(NEW.quhead_misc_descrip,&#39;&#39;);

          IF ((NEW.quhead_warehous_id IS NULL) OR (NEW.quhead_fob IS NULL)) THEN
            IF (NEW.quhead_warehous_id IS NULL) THEN
              SELECT warehous_id,warehous_fob INTO _w
              FROM usrpref, whsinfo
              WHERE ((warehous_id=CAST(usrpref_value AS INTEGER))
                AND (warehous_shipping)
                AND (warehous_active)
                AND (usrpref_username=current_user)
                AND (usrpref_name=&#39;PreferredWarehouse&#39;));
            ELSE
              SELECT warehous_id,warehous_fob INTO _w
              FROM whsinfo
              WHERE (warehous_id=NEW.quhead_warehous_id);
            END IF;
            
            IF (FOUND) THEN
              NEW.quhead_warehous_id 	:= COALESCE(NEW.quhead_warehous_id,_w.warehous_id);
              NEW.quhead_fob		:= COALESCE(NEW.quhead_fob,_w.warehous_fob);
            END IF;
          END IF;
      END IF;
      
      --Auto create project if applicable
      IF ((TG_OP = &#39;INSERT&#39;) AND (NEW.quhead_prj_id=-1)) THEN
        SELECT fetchMetricBool(&#39;AutoCreateProjectsForOrders&#39;) INTO _check;
        IF (_check) THEN
          SELECT NEXTVAL(&#39;prj_prj_id_seq&#39;) INTO _prjId;
          NEW.quhead_prj_id := _prjId;
          INSERT INTO prj (prj_id, prj_number, prj_name, prj_descrip, prj_so, prj_wo, prj_po)
               VALUES(_prjId, NEW.quhead_number, NEW.quhead_number, &#39;Auto Generated Project from Quote.&#39;, TRUE, TRUE, TRUE);
        END IF;
      END IF;

      -- Deal with Billing Address
      IF (TG_OP = &#39;INSERT&#39;) THEN
        IF (_p.cust_ffbillto) THEN
          -- If they didn&#39;t supply data, we&#39;ll put in the bill to address
          NEW.quhead_billtoname=COALESCE(NEW.quhead_billtoname,_p.cust_name,&#39;&#39;);
          NEW.quhead_billtoaddress1=COALESCE(NEW.quhead_billtoaddress1,_p.addr_line1,&#39;&#39;);
          NEW.quhead_billtoaddress2=COALESCE(NEW.quhead_billtoaddress2,_p.addr_line2,&#39;&#39;);
          NEW.quhead_billtoaddress3=COALESCE(NEW.quhead_billtoaddress3,_p.addr_line3,&#39;&#39;);    
          NEW.quhead_billtocity=COALESCE(NEW.quhead_billtocity,_p.addr_city,&#39;&#39;); 
          NEW.quhead_billtostate=COALESCE(NEW.quhead_billtostate,_p.addr_state,&#39;&#39;);
          NEW.quhead_billtozip=COALESCE(NEW.quhead_billtozip,_p.addr_postalcode,&#39;&#39;);
          NEW.quhead_billtocountry=COALESCE(NEW.quhead_billtocountry,_p.addr_country,&#39;&#39;);   
        ELSE
          -- Free form not allowed, we&#39;re going to put in the address regardless
          NEW.quhead_billtoname=COALESCE(_p.cust_name,&#39;&#39;);
          NEW.quhead_billtoaddress1=COALESCE(_p.addr_line1,&#39;&#39;);
          NEW.quhead_billtoaddress2=COALESCE(_p.addr_line2,&#39;&#39;);
          NEW.quhead_billtoaddress3=COALESCE(_p.addr_line3,&#39;&#39;);    
          NEW.quhead_billtocity=COALESCE(_p.addr_city,&#39;&#39;); 
          NEW.quhead_billtostate=COALESCE(_p.addr_state,&#39;&#39;);
          NEW.quhead_billtozip=COALESCE(_p.addr_postalcode,&#39;&#39;);
          NEW.quhead_billtocountry=COALESCE(_p.addr_country,&#39;&#39;);
        END IF;
      END IF;

      -- Now let&#39;s look at Shipto Address
      -- If there&#39;s nothing in the address fields and there is a shipto id 
      -- or there is a default address available, let&#39;s put in some shipto address data
      IF ((TG_OP = &#39;INSERT&#39;) 
       AND NOT ((NEW.quhead_shipto_id IS NULL) AND NOT _p.cust_ffshipto)
       AND (NEW.quhead_shiptoname IS NULL)
       AND (NEW.quhead_shiptoaddress1 IS NULL)
       AND (NEW.quhead_shiptoaddress2 IS NULL)
       AND (NEW.quhead_shiptoaddress3 IS NULL)
       AND (NEW.quhead_shiptocity IS NULL)
       AND (NEW.quhead_shiptostate IS NULL)
       AND (NEW.quhead_shiptocountry IS NULL)) THEN
        IF ((NEW.quhead_shipto_id IS NULL) AND (_p.shipto_id IS NOT NULL)) THEN
          _shiptoId := _p.shipto_addr_id;
        ELSE
          _shiptoId := NEW.quhead_shipto_id;
        END IF;

        SELECT * INTO _a 
        FROM shiptoinfo, addr 
        WHERE ((shipto_id=_shiptoId)
        AND (addr_id=shipto_addr_id));

        NEW.quhead_shiptoname := COALESCE(_p.shipto_name,&#39;&#39;);
        NEW.quhead_shiptoaddress1 := COALESCE(_a.addr_line1,&#39;&#39;);
        NEW.quhead_shiptoaddress2 := COALESCE(_a.addr_line2,&#39;&#39;);
        NEW.quhead_shiptoaddress3 := COALESCE(_a.addr_line3,&#39;&#39;);    
        NEW.quhead_shiptocity := COALESCE(_a.addr_city,&#39;&#39;); 
        NEW.quhead_shiptostate := COALESCE(_a.addr_state,&#39;&#39;);
        NEW.quhead_shiptozipcode := COALESCE(_a.addr_postalcode,&#39;&#39;);
        NEW.quhead_shiptocountry := COALESCE(_a.addr_country,&#39;&#39;);
      ELSE
        IF (_p.cust_ffshipto) THEN
          -- Use Address Save function to see if the new address entered matches
          -- data for the shipto number.  If not that will insert new address for CRM
          SELECT SaveAddr(
            NULL,
            NULL,
            NEW.quhead_shiptoaddress1,
            NEW.quhead_shiptoaddress2,
            NEW.quhead_shiptoaddress3,
            NEW.quhead_shiptocity,
            NEW.quhead_shiptostate,
            NEW.quhead_shiptozipcode,
            NEW.quhead_shiptocountry,
            &#39;CHANGEONE&#39;) INTO _addrId;
          SELECT shipto_addr_id INTO _shiptoid FROM shiptoinfo WHERE (shipto_id=NEW.quhead_shipto_id);
           -- If the address passed doesn&#39;t match shipto address, then it&#39;s something else
           IF (_shiptoid &lt;&gt; _addrId) THEN
             NEW.quhead_shipto_id := NULL;
           END IF;
        ELSE
          SELECT quhead_shipto_id INTO _shiptoid FROM quhead WHERE (quhead_id=NEW.quhead_id);
          -- Get the shipto address
            IF (COALESCE(NEW.quhead_shipto_id,-1) &lt;&gt; COALESCE(_shiptoid,-1)) THEN
            SELECT * INTO _a 
            FROM shiptoinfo
            LEFT OUTER JOIN cntct ON (shipto_cntct_id=cntct_id)
            LEFT OUTER JOIN addr ON (shipto_addr_id=addr_id)
            WHERE (shipto_id=NEW.quhead_shipto_id);
            IF (FOUND) THEN
              -- Free form not allowed so we&#39;re going to make sure address matches Shipto data
              NEW.quhead_shiptoname := COALESCE(_a.shipto_name,&#39;&#39;);
              NEW.quhead_shiptophone := COALESCE(_a.cntct_phone,&#39;&#39;);
              NEW.quhead_shiptoaddress1 := COALESCE(_a.addr_line1,&#39;&#39;);
              NEW.quhead_shiptoaddress2 := COALESCE(_a.addr_line2,&#39;&#39;);
              NEW.quhead_shiptoaddress3 := COALESCE(_a.addr_line3,&#39;&#39;);    
              NEW.quhead_shiptocity := COALESCE(_a.addr_city,&#39;&#39;); 
              NEW.quhead_shiptostate := COALESCE(_a.addr_state,&#39;&#39;);
              NEW.quhead_shiptozipcode := COALESCE(_a.addr_postalcode,&#39;&#39;);
              NEW.quhead_shiptocountry := COALESCE(_a.addr_country,&#39;&#39;); 
            ELSE
              -- If no shipto data and free form not allowed, this won&#39;t work
              RAISE EXCEPTION &#39;Free form Shipto is not allowed on this Customer. You must supply a valid Shipto ID.&#39;;
            END IF;
          END IF;
        END IF;
      END IF;
    END IF;
  END IF;

  IF ( SELECT (metric_value=&#39;t&#39;)
       FROM metric
       WHERE (metric_name=&#39;SalesOrderChangeLog&#39;) ) THEN

--  Cache the cmnttype_id for ChangeLog
    SELECT cmnttype_id INTO _cmnttypeid
    FROM cmnttype
    WHERE (cmnttype_name=&#39;ChangeLog&#39;);
    IF (FOUND) THEN
      IF (TG_OP = &#39;INSERT&#39;) THEN
        PERFORM postComment(_cmnttypeid, &#39;Q&#39;, NEW.quhead_id, &#39;Created&#39;);

      ELSIF (TG_OP = &#39;UPDATE&#39;) THEN

        IF (OLD.quhead_terms_id &lt;&gt; NEW.quhead_terms_id) THEN
          PERFORM postComment( _cmnttypeid, &#39;Q&#39;, NEW.quhead_id,
                               (&#39;Terms Changed from &quot;&#39; || oldterms.terms_code || &#39;&quot; to &quot;&#39; || newterms.terms_code || &#39;&quot;&#39;) )
          FROM terms AS oldterms, terms AS newterms
          WHERE ( (oldterms.terms_id=OLD.quhead_terms_id)
           AND (newterms.terms_id=NEW.quhead_terms_id) );
        END IF;

      ELSIF (TG_OP = &#39;DELETE&#39;) THEN
        DELETE FROM comment
        WHERE ( (comment_source=&#39;Q&#39;)
         AND (comment_source_id=OLD.quhead_id) );
      END IF;
    END IF;
  END IF;

  IF (TG_OP = &#39;DELETE&#39;) THEN
    RETURN OLD;
  ELSE
    RETURN NEW;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-quitemaftertrigger">_quitemaftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _check NUMERIC;
BEGIN

  --If auto calculate freight, recalculate quhead_freight
  IF (SELECT quhead_calcfreight FROM quhead WHERE (quhead_id=NEW.quitem_quhead_id)) THEN
    UPDATE quhead SET quhead_freight =
      (SELECT SUM(freightdata_total) FROM freightDetail(&#39;QU&#39;,
                                                        quhead_id,
                                                        quhead_cust_id,
                                                        quhead_shipto_id,
                                                        quhead_quotedate,
                                                        quhead_shipvia,
                                                        quhead_curr_id))
    WHERE quhead_id=NEW.quitem_quhead_id;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-quitembeforetrigger">_quitembeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _check NUMERIC;
  _itemNumber TEXT;
BEGIN
  -- Check
  IF (NEW.quitem_scheddate IS NULL) THEN
  	RAISE EXCEPTION &#39;A schedule date is required.&#39;;
  END IF;

  -- If this is imported, go ahead and insert default characteristics
   IF ((TG_OP = &#39;INSERT&#39;) AND NEW.quitem_imported) THEN
     PERFORM updateCharAssignment(&#39;SI&#39;, NEW.quitem_id, char_id, charass_value) 
     FROM (
       SELECT DISTINCT char_id, char_name, charass_value
       FROM charass, char, itemsite, item
       WHERE ((itemsite_id=NEW.quitem_itemsite_id)
       AND (itemsite_item_id=item_id)
       AND (charass_target_type=&#39;I&#39;) 
       AND (charass_target_id=item_id)
       AND (charass_default)
       AND (char_id=charass_char_id))
       ORDER BY char_name) AS data;
   END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-quitemtrigger">_quitemtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _cmnttypeid INTEGER;
  _check BOOLEAN;

BEGIN
  --  Checks
  SELECT checkPrivilege(&#39;MaintainQuotes&#39;) INTO _check;
  IF NOT (_check) THEN
    RAISE EXCEPTION &#39;You do not have privileges to maintain Quotes.&#39;;
  END IF;

  IF ( SELECT (metric_value=&#39;t&#39;)
       FROM metric
       WHERE (metric_name=&#39;SalesOrderChangeLog&#39;) ) THEN
--  Cache the cmnttype_id for ChangeLog
    SELECT cmnttype_id INTO _cmnttypeid
    FROM cmnttype
    WHERE (cmnttype_name=&#39;ChangeLog&#39;);
  ELSE
    _cmnttypeid := -1;
  END IF;

  IF (TG_OP = &#39;INSERT&#39;) THEN
    IF (_cmnttypeid &lt;&gt; -1) THEN
      PERFORM postComment(_cmnttypeid, &#39;QI&#39;, NEW.quitem_id, &#39;Created&#39;);
    END IF;

    RETURN NEW;

  ELSE
    IF (TG_OP = &#39;DELETE&#39;) THEN
      DELETE FROM comment
      WHERE ( (comment_source=&#39;QI&#39;)
       AND (comment_source_id=OLD.quitem_id) );

      DELETE FROM charass
       WHERE ((charass_target_type=&#39;QI&#39;)
         AND  (charass_target_id=OLD.quitem_id));
 
      RETURN OLD;

    ELSE
      IF (TG_OP = &#39;UPDATE&#39;) THEN

        IF (NEW.quitem_qtyord &lt;&gt; OLD.quitem_qtyord) THEN
          IF (_cmnttypeid &lt;&gt; -1) THEN
            PERFORM postComment( _cmnttypeid, &#39;QI&#39;, NEW.quitem_id,
                                 ( &#39;Changed Qty. Ordered from &#39; || formatQty(OLD.quitem_qtyord) ||
                                   &#39; to &#39; || formatQty(NEW.quitem_qtyord) ) );
          END IF;

        END IF;

        IF (NEW.quitem_scheddate &lt;&gt; OLD.quitem_scheddate) THEN
          IF (_cmnttypeid &lt;&gt; -1) THEN
            PERFORM postComment( _cmnttypeid, &#39;QI&#39;, NEW.quitem_id,
                                 ( &#39;Changed Sched. Date from &#39; || formatDate(OLD.quitem_scheddate) ||
                                   &#39; to &#39; || formatDate(NEW.quitem_scheddate)) );
          END IF;

        END IF;

      END IF; 
    END IF;
  END IF;

--  NEW.quitem_lastupdated = CURRENT_TIMESTAMP;

  RETURN NEW;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-reporttrigger">_reporttrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

  NEW.report_loaddate = CURRENT_TIMESTAMP;
  RETURN NEW;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-salesrepbeforetrigger">_salesrepbeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _code         TEXT;
  _empcode      TEXT;
  _empid        INTEGER;
  _empusrid     INTEGER;
BEGIN
  IF (TG_OP = &#39;INSERT&#39;) THEN
    SELECT salesrep_number INTO _code
    FROM salesrep
    WHERE ( (UPPER(salesrep_number)=UPPER(NEW.salesrep_number))
      AND (salesrep_id&lt;&gt;NEW.salesrep_id) );
    IF (FOUND) THEN
      RAISE EXCEPTION &#39;The Salesrep Number entered cannot be used as it is in use.&#39;;
    END IF;
  END IF;

  SELECT emp_id INTO _empid
  FROM emp
  WHERE (emp_code=NEW.salesrep_number);

  IF (TG_OP = &#39;INSERT&#39;) THEN
    -- check old.salesrep_emp_id=_empid so we can detach the sales rep before deleting the emp
    IF (FOUND AND NEW.salesrep_emp_id IS NULL) THEN
      NEW.salesrep_emp_id=_empid;
    ELSIF (FOUND AND _empid != NEW.salesrep_emp_id) THEN
      RAISE EXCEPTION &#39;Sales Rep Number % is already in use by an Employee.&#39;,
        NEW.salesrep_number;
    ELSIF (NOT FOUND) THEN
      SELECT emp_code, emp_id INTO _empcode, _empid
      FROM emp WHERE emp_id=NEW.salesrep_emp_id;
      IF (FOUND) THEN
        UPDATE emp SET emp_code=NEW.salesrep_number WHERE (emp_id=_empid);
      END IF;
    END IF;

  ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
    -- check old.salesrep_emp_id=_empid so we can detach the sales rep before deleting the emp
    IF (FOUND AND NEW.salesrep_emp_id IS NULL AND OLD.salesrep_emp_id != _empid) THEN
      NEW.salesrep_emp_id=_empid;
    ELSIF (FOUND AND _empid != NEW.salesrep_emp_id) THEN
      RAISE EXCEPTION &#39;Sales Rep Number % is already in use by an Employee.&#39;,
        NEW.salesrep_number;
    ELSIF (NOT FOUND) THEN
      SELECT emp_code, emp_id INTO _empcode, _empid
      FROM emp WHERE emp_id=NEW.salesrep_emp_id;
      IF (FOUND) THEN
        UPDATE emp SET emp_code=NEW.salesrep_number WHERE (emp_id=_empid);
      END IF;
    END IF;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-shipdatasumtrigger">_shipdatasumtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

  IF (LENGTH(TRIM(NEW.shipdatasum_shiphead_number)) = 0) THEN
    NEW.shipdatasum_shiphead_number = NULL;
  END IF;

  RETURN NEW;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-shipdatatrigger">_shipdatatrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _newShipdata_cohead_number 	INTEGER;
  _shipdatasum_shipper 		TEXT;
  _rows				INTEGER;
  _cohead_id 			INTEGER;
  _shiphead_number 		TEXT;
  _headcount			INTEGER;

BEGIN
  --  This is where the shipper is identified and may need to be changed
  NEW.shipdata_cohead_number := TRIM(NEW.shipdata_cohead_number);

  IF (substring(NEW.shipdata_cosmisc_tracknum from 1 for 2) = &#39;1Z&#39;) THEN
    _shipdatasum_shipper := &#39;UPS&#39;;
  ELSE
    _shipdatasum_shipper := &#39;UNKNOWN&#39;;
  END IF;

  IF (LENGTH(TRIM(NEW.shipdata_shiphead_number)) = 0) THEN
    NEW.shipdata_shiphead_number := NULL;
  END IF;

  IF (NEW.shipdata_cosmisc_tracknum = NEW.shipdata_cosmisc_packnum_tracknum) THEN
    IF (NEW.shipdata_void_ind = &#39;Y&#39;) THEN
      --  Delete the current shipdatasum
      DELETE FROM shipdatasum
      WHERE ((shipdatasum_cohead_number = NEW.shipdata_cohead_number)
	AND  (shipdatasum_cosmisc_tracknum = NEW.shipdata_cosmisc_tracknum));

    ELSIF (TG_OP = &#39;INSERT&#39;) THEN

--      RAISE NOTICE &#39;Getting cohead_id (%)&#39;, NEW.shipdata_cohead_number;
      IF (NEW.shipdata_shiphead_number IS NULL) THEN
        SELECT cohead_id INTO _cohead_id FROM cohead WHERE cohead_number = NEW.shipdata_cohead_number;

        IF (FOUND) THEN

--          RAISE NOTICE &#39;Getting shiphead number (%)&#39;, _cohead_id;
          SELECT count(shiphead_order_id), MAX(shiphead_number) INTO _headcount, _shiphead_number 
          FROM shiphead 
          WHERE ((shiphead_tracknum IS NULL OR shiphead_tracknum = &#39;&#39;) 
          AND ( shiphead_order_type = &#39;SO&#39; and shiphead_order_id = _cohead_id) );
          
          IF (_headcount = 1) THEN
--            RAISE NOTICE &#39;Updating Shiphead Number (%)&#39;, _shiphead_number;
            NEW.shipdata_shiphead_number = _shiphead_number;
            
          ELSIF (_headcount &gt; 1) THEN
            -- Trap for potential workflow problem.  Can only infer shiphead from sales order number 
            -- if shipping one at a time
            RAISE EXCEPTION &#39;Multiple shipments exist for this order.  Please provide a specific a shipment number.&#39;;
          END IF;
        END IF;
      END IF;

      INSERT INTO shipdatasum
	      (shipdatasum_cohead_number, shipdatasum_cosmisc_tracknum,
	       shipdatasum_cosmisc_packnum_tracknum, shipdatasum_weight,
	       shipdatasum_base_freight, shipdatasum_total_freight,
	       shipdatasum_base_freight_curr_id, shipdatasum_total_freight_curr_id,
	       shipdatasum_shipper, shipdatasum_billing_option,
	       shipdatasum_package_type, shipdatasum_shiphead_number)
       VALUES (NEW.shipdata_cohead_number, NEW.shipdata_cosmisc_tracknum,
	       NEW.shipdata_cosmisc_packnum_tracknum, NEW.shipdata_weight,
	       NEW.shipdata_base_freight, NEW.shipdata_total_freight,
	       NEW.shipdata_base_freight_curr_id, NEW.shipdata_total_freight_curr_id,
	       _shipdatasum_shipper, NEW.shipdata_billing_option,
	       NEW.shipdata_package_type, NEW.shipdata_shiphead_number);

    ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
       UPDATE shipdatasum SET
	      shipdatasum_cohead_number=NEW.shipdata_cohead_number,
	      shipdatasum_cosmisc_tracknum=NEW.shipdata_cosmisc_tracknum,
	      shipdatasum_cosmisc_packnum_tracknum=NEW.shipdata_cosmisc_packnum_tracknum,
	      shipdatasum_weight=NEW.shipdata_weight,
	      shipdatasum_base_freight=NEW.shipdata_base_freight,
	      shipdatasum_total_freight=NEW.shipdata_total_freight,
	      shipdatasum_base_freight_curr_id=NEW.shipdata_base_freight_curr_id,
	      shipdatasum_total_freight_curr_id=NEW.shipdata_total_freight_curr_id,
	      shipdatasum_shipper=_shipdatasum_shipper,
	      shipdatasum_billing_option=NEW.shipdata_billing_option,
	      shipdatasum_package_type=NEW.shipdata_package_type,
	      shipdatasum_shiphead_number=NEW.shipdata_shiphead_number
       WHERE ((TRIM(shipdatasum_cohead_number)=TRIM(OLD.shipdata_cohead_number))
	  AND (TRIM(shipdatasum_cosmisc_tracknum)=TRIM(OLD.shipdata_cosmisc_tracknum))
	  AND (TRIM(shipdatasum_cosmisc_packnum_tracknum)=TRIM(OLD.shipdata_cosmisc_packnum_tracknum)));

       GET DIAGNOSTICS _rows = ROW_COUNT;
       IF (_rows &lt;= 0) THEN
	 INSERT INTO shipdatasum
		(shipdatasum_cohead_number, shipdatasum_cosmisc_tracknum,
		 shipdatasum_cosmisc_packnum_tracknum, shipdatasum_weight,
		 shipdatasum_base_freight, shipdatasum_total_freight,
		 shipdatasum_base_freight_curr_id, shipdatasum_total_freight_curr_id,
		 shipdatasum_shipper, shipdatasum_billing_option,
		 shipdatasum_package_type, shipdatasum_shiphead_number)
	 VALUES (NEW.shipdata_cohead_number, NEW.shipdata_cosmisc_tracknum,
		 NEW.shipdata_cosmisc_packnum_tracknum, NEW.shipdata_weight,
		 NEW.shipdata_base_freight, NEW.shipdata_total_freight,
		 NEW.shipdata_base_freight_curr_id, NEW.shipdata_total_freight_curr_id,
		 _shipdatasum_shipper, NEW.shipdata_billing_option,
		 NEW.shipdata_package_type, NEW.shipdata_shiphead_number);
       END IF;
    END IF;
  END IF;

  RETURN NEW;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-shipheadbeforetrigger">_shipheadbeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF ((TG_OP = &#39;INSERT&#39;) OR (TG_OP = &#39;UPDATE&#39;)) THEN

    IF (NEW.shiphead_order_type = &#39;SO&#39;
	AND NEW.shiphead_order_id   IN (SELECT cohead_id FROM cohead)) THEN
      RETURN NEW;

    ELSEIF (NEW.shiphead_order_type = &#39;TO&#39;
	AND NEW.shiphead_order_id   IN (SELECT tohead_id FROM tohead)) THEN
      RETURN NEW;

    END IF;

    RAISE EXCEPTION &#39;% with id % does not exist&#39;,
		    NEW.shiphead_order_type, NEW.shiphead_order_id;
    RETURN OLD;

  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-shiptoinfoaftertrigger">_shiptoinfoaftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  IF (NEW.shipto_default) THEN
    UPDATE shiptoinfo
    SET shipto_default = false
    WHERE ((shipto_cust_id=NEW.shipto_cust_id)
    AND (shipto_id &lt;&gt; NEW.shipto_id));
  END IF;
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-soheadtrigger">_soheadtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _cmnttypeid INTEGER;
  _oldHoldType TEXT;
  _newHoldType TEXT;
  _p RECORD;
  _a RECORD;
  _w RECORD;
  _shiptoId INTEGER;
  _addrId INTEGER;
  _prjId INTEGER;
  _check BOOLEAN;
  _numGen CHAR(1);

BEGIN
  -- Checks
  -- Start with privileges
  IF (TG_OP = &#39;INSERT&#39;) THEN
    SELECT checkPrivilege(&#39;MaintainSalesOrders&#39;) INTO _check;
    IF NOT (_check) THEN
      RAISE EXCEPTION &#39;You do not have privileges to create a Sales Order.&#39;;
    END IF;
  ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
    IF ( (NOT checkPrivilege(&#39;MaintainSalesOrders&#39;)) AND
         (NEW.cohead_holdtype = OLD.cohead_holdtype) ) THEN
      RAISE EXCEPTION &#39;You do not have privileges to alter a Sales Order.&#39;;
    END IF;
  ELSE
    SELECT checkPrivilege(&#39;MaintainSalesOrders&#39;) INTO _check;
    IF NOT (_check) THEN
      RAISE EXCEPTION &#39;You do not have privileges to alter a Sales Order.&#39;;
    END IF;
  END IF;

  -- If this is imported, check the order number
  IF (TG_OP = &#39;INSERT&#39;) THEN
    IF (NEW.cohead_imported) THEN
      SELECT fetchMetricText(&#39;CONumberGeneration&#39;) INTO _numGen;
      IF ((NEW.cohead_number IS NULL) AND (_numGen=&#39;M&#39;)) THEN
        RAISE EXCEPTION &#39;You must supply an Order Number.&#39;;
      ELSE
        IF ((NEW.cohead_number IS NOT NULL) AND (_numGen=&#39;A&#39;)) THEN
          RAISE EXCEPTION &#39;You may not supply a new Order Number;
                          Order number is set for automatic generation.&#39;;
        ELSE
          IF (NEW.cohead_number IS NULL) THEN
            SELECT fetchsonumber() INTO NEW.cohead_number;
          END IF;
        END IF;
      END IF;
    END IF;
  ELSE
    IF (TG_OP = &#39;UPDATE&#39;) THEN
      IF (NEW.cohead_number &lt;&gt; OLD.cohead_number) THEN
        RAISE EXCEPTION &#39;The order number may not be changed.&#39;;
      END IF;
    END IF;
  END IF;

  IF (TG_OP IN (&#39;INSERT&#39;,&#39;UPDATE&#39;)) THEN

    -- Get Customer data
    IF (NEW.cohead_shipto_id IS NULL) THEN
      SELECT cust_creditstatus,cust_number,cust_usespos,cust_blanketpos,cust_ffbillto,
	     cust_ffshipto,cust_name,cust_salesrep_id,cust_terms_id,cust_shipvia,
	     cust_shipchrg_id,cust_shipform_id,cust_commprcnt,cust_curr_id,cust_taxauth_id,
  	     addr_line1,addr_line2,addr_line3,addr_city,addr_state,addr_postalcode,addr_country,
	     shipto_id,shipto_addr_id,shipto_name,shipto_salesrep_id,shipto_shipvia,
	     shipto_shipchrg_id,shipto_shipform_id,shipto_commission,shipto_taxauth_id INTO _p
      FROM custinfo
        LEFT OUTER JOIN cntct ON (cust_cntct_id=cntct_id)
        LEFT OUTER JOIN addr ON (cntct_addr_id=addr_id)
        LEFT OUTER JOIN shiptoinfo ON ((cust_id=shipto_cust_id) AND shipto_default)
      WHERE (cust_id=NEW.cohead_cust_id);
    ELSE
      SELECT cust_creditstatus,cust_number,cust_usespos,cust_blanketpos,cust_ffbillto,
	     cust_ffshipto,cust_name,cust_salesrep_id,cust_terms_id,cust_shipvia,
	     cust_shipchrg_id,cust_shipform_id,cust_commprcnt,cust_curr_id,cust_taxauth_id,
  	     addr_line1,addr_line2,addr_line3,addr_city,addr_state,addr_postalcode,addr_country,
	     shipto_id,shipto_addr_id,shipto_name,shipto_salesrep_id,shipto_shipvia,
	     shipto_shipchrg_id,shipto_shipform_id,shipto_commission,shipto_taxauth_id INTO _p
      FROM shiptoinfo,custinfo
        LEFT OUTER JOIN cntct ON (cust_cntct_id=cntct_id)
        LEFT OUTER JOIN addr ON (cntct_addr_id=addr_id)
      WHERE ((cust_id=NEW.cohead_cust_id)
      AND (shipto_id=shipto_id));
    END IF;

    -- If there is customer data, then we can get to work
    IF (FOUND) THEN

      -- Check Credit
      IF (TG_OP = &#39;INSERT&#39;) THEN
          IF (_p.cust_creditstatus = &#39;H&#39;) THEN
            SELECT checkPrivilege(&#39;CreateSOForHoldCustomer&#39;) INTO _check;
            IF NOT (_check) THEN
              RAISE EXCEPTION &#39;Customer % has been placed 
                               on a Credit Hold and you do not have 
                               privilege to create Sales Orders for 
                               Customers on Credit Hold.  The selected 
                               Customer must be taken off of Credit Hold 
                               before you may create a new Sales Order 
                               for the Customer.&#39;,_p.cust_number;
            ELSE
              NEW.cohead_holdtype=&#39;C&#39;;
            END IF;
          END IF;
          IF (_p.cust_creditstatus = &#39;W&#39;) THEN
            SELECT checkPrivilege(&#39;CreateSOForWarnCustomer&#39;) INTO _check;
            IF NOT (_check) THEN
              RAISE EXCEPTION &#39;Customer % has been placed on 
                              a Credit Warning and you do not have 
                              privilege to create Sales Orders for 
                              Customers on Credit Warning.  The 
                              selected Customer must be taken off of 
                              Credit Warning before you may create a 
                              new Sales Order for the Customer.&#39;,_p.cust_number;
            ELSE
              NEW.cohead_holdtype=&#39;C&#39;;
            END IF;
          END IF;

          -- Set to defaults if values not provided
          NEW.cohead_shipto_id 	:= COALESCE(NEW.cohead_shipto_id,_p.shipto_id);
	  NEW.cohead_salesrep_id 	:= COALESCE(NEW.cohead_salesrep_id,_p.shipto_salesrep_id,_p.cust_salesrep_id);
          NEW.cohead_terms_id		:= COALESCE(NEW.cohead_terms_id,_p.cust_terms_id);
          NEW.cohead_shipvia		:= COALESCE(NEW.cohead_shipvia,_p.shipto_shipvia,_p.cust_shipvia);
          NEW.cohead_shipchrg_id	:= COALESCE(NEW.cohead_shipchrg_id,_p.shipto_shipchrg_id,_p.cust_shipchrg_id);
          NEW.cohead_shipform_id	:= COALESCE(NEW.cohead_shipform_id,_p.shipto_shipform_id,_p.cust_shipform_id);
          NEW.cohead_commission	:= COALESCE(NEW.cohead_commission,_p.shipto_commission,_p.cust_commprcnt);
          NEW.cohead_orderdate		:= COALESCE(NEW.cohead_orderdate,current_date);
          NEW.cohead_packdate		:= COALESCE(NEW.cohead_packdate,NEW.cohead_orderdate);
          NEW.cohead_curr_id		:= COALESCE(NEW.cohead_curr_id,_p.cust_curr_id,basecurrid());
          NEW.cohead_taxauth_id	:= COALESCE(NEW.cohead_taxauth_id,_p.shipto_taxauth_id,_p.cust_taxauth_id);
          NEW.cohead_freight		:= COALESCE(NEW.cohead_freight,0);
          NEW.cohead_custponumber	:= COALESCE(NEW.cohead_custponumber,&#39;&#39;);
          NEW.cohead_ordercomments	:= COALESCE(NEW.cohead_ordercomments,&#39;&#39;);
          NEW.cohead_shipcomments	:= COALESCE(NEW.cohead_shipcomments,&#39;&#39;);
          NEW.cohead_shiptophone	:= COALESCE(NEW.cohead_shiptophone,&#39;&#39;);
          NEW.cohead_misc		:= COALESCE(NEW.cohead_misc,0);
          NEW.cohead_misc_descrip	:= COALESCE(NEW.cohead_misc_descrip,&#39;&#39;);
          NEW.cohead_shipcomplete	:= COALESCE(NEW.cohead_shipcomplete,false);

          IF ((NEW.cohead_warehous_id IS NULL) OR (NEW.cohead_fob IS NULL)) THEN
            IF (NEW.cohead_warehous_id IS NULL) THEN
              SELECT warehous_id,warehous_fob INTO _w
              FROM usrpref, whsinfo
              WHERE ((warehous_id=CAST(usrpref_value AS INTEGER))
                AND (warehous_shipping)
                AND (warehous_active)
                AND (usrpref_username=current_user)
                AND (usrpref_name=&#39;PreferredWarehouse&#39;));
            ELSE
              SELECT warehous_id,warehous_fob INTO _w
              FROM whsinfo
              WHERE (warehous_id=NEW.cohead_warehous_id);
            END IF;
            
            IF (FOUND) THEN
              NEW.cohead_warehous_id 	:= COALESCE(NEW.cohead_warehous_id,_w.warehous_id);
              NEW.cohead_fob		:= COALESCE(NEW.cohead_fob,_w.warehous_fob);
            END IF;
          END IF;
          
      END IF;

      -- Only Check P/O logic for imports, because UI checks when entire order is saved
      IF (NEW.cohead_imported) THEN

        -- Check for required Purchase Order
        IF (_p.cust_usespos AND ((NEW.cohead_custponumber IS NULL) OR (TRIM(BOTH FROM NEW.cohead_custponumber)=&#39;&#39;))) THEN
            RAISE EXCEPTION &#39;You must enter a Customer P/O for this Sales Order.&#39;;
        END IF;
 
        -- Check for duplicate Purchase Orders if not allowed
        IF (_p.cust_usespos AND NOT (_p.cust_blanketpos)) THEN
          SELECT cohead_id INTO _a
          FROM cohead
          WHERE ((cohead_cust_id=NEW.cohead_cust_id)
          AND  (cohead_id&lt;&gt;NEW.cohead_id)
          AND  (UPPER(cohead_custponumber) = UPPER(NEW.cohead_custponumber)) )
          UNION
          SELECT quhead_id
          FROM quhead
          WHERE ((quhead_cust_id=NEW.cohead_cust_id)
          AND  (quhead_id&lt;&gt;NEW.cohead_id)
          AND  (UPPER(quhead_custponumber) = UPPER(NEW.cohead_custponumber)) );
          IF (FOUND) THEN
	    RAISE EXCEPTION &#39;This Customer does not use Blanket P/O
                            Numbers and the P/O Number you entered has 
                            already been used for another Sales Order.
                            Please verify the P/O Number and either
                            enter a new P/O Number or add to the
                            existing Sales Order.&#39;;
         END IF;
        END IF;
      END IF;

      --Auto create project if applicable
      IF ((TG_OP = &#39;INSERT&#39;) AND (NEW.cohead_prj_id IS NULL)) THEN
        SELECT fetchMetricBool(&#39;AutoCreateProjectsForOrders&#39;) INTO _check;
        IF (_check) THEN
          SELECT NEXTVAL(&#39;prj_prj_id_seq&#39;) INTO _prjId;
          NEW.cohead_prj_id := _prjId;
          INSERT INTO prj (prj_id, prj_number, prj_name, prj_descrip, prj_so, prj_wo, prj_po)
               VALUES(_prjId, NEW.cohead_number, NEW.cohead_number, &#39;Auto Generated Project from Sales Order.&#39;, TRUE, TRUE, TRUE);
        END IF;
      END IF;

      IF (TG_OP = &#39;UPDATE&#39;) THEN
        SELECT true INTO _check
        FROM coitem
        WHERE ( (coitem_status=&#39;C&#39;)
        AND (coitem_cohead_id=NEW.cohead_id) ) 
        LIMIT 1;

        IF (NOT FOUND) THEN

        --Update project references on supply
        UPDATE pr SET pr_prj_id=NEW.cohead_prj_id
                   FROM coitem
                   WHERE ((coitem_cohead_id=NEW.cohead_id) 
                   AND  (coitem_order_type=&#39;R&#39;) 
                   AND  (coitem_order_id=pr_id));

        PERFORM changeWoProject(coitem_order_id, NEW.cohead_prj_id, TRUE)
                    FROM coitem
                    WHERE ((coitem_cohead_id=NEW.cohead_id)
                    AND  (coitem_order_type=&#39;W&#39;));
        ELSE
          IF NEW.cohead_prj_id &lt;&gt; COALESCE(OLD.cohead_prj_id,-1) THEN
            RAISE EXCEPTION &#39;You can not change the project ID on orders with closed lines.&#39;;
          END IF;
        END IF;
      END IF;

      -- Deal with Billing Address
      IF (TG_OP = &#39;INSERT&#39;) THEN
        IF (_p.cust_ffbillto) THEN
          -- If they didn&#39;t supply data, we&#39;ll put in the bill to address
          NEW.cohead_billtoname=COALESCE(NEW.cohead_billtoname,_p.cust_name,&#39;&#39;);
          NEW.cohead_billtoaddress1=COALESCE(NEW.cohead_billtoaddress1,_p.addr_line1,&#39;&#39;);
          NEW.cohead_billtoaddress2=COALESCE(NEW.cohead_billtoaddress2,_p.addr_line2,&#39;&#39;);
          NEW.cohead_billtoaddress3=COALESCE(NEW.cohead_billtoaddress3,_p.addr_line3,&#39;&#39;);    
          NEW.cohead_billtocity=COALESCE(NEW.cohead_billtocity,_p.addr_city,&#39;&#39;); 
          NEW.cohead_billtostate=COALESCE(NEW.cohead_billtostate,_p.addr_state,&#39;&#39;);
          NEW.cohead_billtozipcode=COALESCE(NEW.cohead_billtozipcode,_p.addr_postalcode,&#39;&#39;);
          NEW.cohead_billtocountry=COALESCE(NEW.cohead_billtocountry,_p.addr_country,&#39;&#39;);   
        ELSE
          -- Free form not allowed, we&#39;re going to put in the address regardless
          NEW.cohead_billtoname=COALESCE(_p.cust_name,&#39;&#39;);
          NEW.cohead_billtoaddress1=COALESCE(_p.addr_line1,&#39;&#39;);
          NEW.cohead_billtoaddress2=COALESCE(_p.addr_line2,&#39;&#39;);
          NEW.cohead_billtoaddress3=COALESCE(_p.addr_line3,&#39;&#39;);    
          NEW.cohead_billtocity=COALESCE(_p.addr_city,&#39;&#39;); 
          NEW.cohead_billtostate=COALESCE(_p.addr_state,&#39;&#39;);
          NEW.cohead_billtozipcode=COALESCE(_p.addr_postalcode,&#39;&#39;);
          NEW.cohead_billtocountry=COALESCE(_p.addr_country,&#39;&#39;);
        END IF;
      END IF;

      -- Now let&#39;s look at Shipto Address
      -- If there&#39;s nothing in the address fields and there is a shipto id 
      -- or there is a default address available, let&#39;s put in some shipto address data
      IF ((TG_OP = &#39;INSERT&#39;) 
        AND NOT ((NEW.cohead_shipto_id IS NULL) AND NOT _p.cust_ffshipto)
        AND (NEW.cohead_shiptoname IS NULL)
        AND (NEW.cohead_shiptoaddress1 IS NULL)
        AND (NEW.cohead_shiptoaddress2 IS NULL)
        AND (NEW.cohead_shiptoaddress3 IS NULL)
        AND (NEW.cohead_shiptocity IS NULL)
        AND (NEW.cohead_shiptostate IS NULL)
        AND (NEW.cohead_shiptocountry IS NULL)) THEN
        IF ((NEW.cohead_shipto_id IS NULL) AND (_p.shipto_id IS NOT NULL)) THEN
          _shiptoId := _p.shipto_addr_id;
        ELSE
          _shiptoId := NEW.cohead_shipto_id;
        END IF;

        SELECT * INTO _a 
        FROM shiptoinfo, addr 
        WHERE ((shipto_id=_shiptoId)
        AND (addr_id=shipto_addr_id));

        NEW.cohead_shiptoname := COALESCE(_p.shipto_name,&#39;&#39;);
        NEW.cohead_shiptoaddress1 := COALESCE(_a.addr_line1,&#39;&#39;);
        NEW.cohead_shiptoaddress2 := COALESCE(_a.addr_line2,&#39;&#39;);
        NEW.cohead_shiptoaddress3 := COALESCE(_a.addr_line3,&#39;&#39;);    
        NEW.cohead_shiptocity := COALESCE(_a.addr_city,&#39;&#39;); 
        NEW.cohead_shiptostate := COALESCE(_a.addr_state,&#39;&#39;);
        NEW.cohead_shiptozipcode := COALESCE(_a.addr_postalcode,&#39;&#39;);
        NEW.cohead_shiptocountry := COALESCE(_a.addr_country,&#39;&#39;);
      ELSE
        IF (_p.cust_ffshipto) THEN
          -- Use Address Save function to see if the new address entered matches
          -- data for the shipto number.  If not that will insert new address for CRM
          SELECT SaveAddr(
            NULL,
            NULL,
            NEW.cohead_shiptoaddress1,
            NEW.cohead_shiptoaddress2,
            NEW.cohead_shiptoaddress3,
            NEW.cohead_shiptocity,
            NEW.cohead_shiptostate,
            NEW.cohead_shiptozipcode,
            NEW.cohead_shiptocountry,
            &#39;CHANGEONE&#39;) INTO _addrId;
          SELECT shipto_addr_id INTO _shiptoid FROM shiptoinfo WHERE (shipto_id=NEW.cohead_shipto_id);
          -- If the address passed doesn&#39;t match shipto address, then it&#39;s something else
          IF (_shiptoid &lt;&gt; _addrId) THEN
            NEW.cohead_shipto_id := NULL;
          END IF;
        ELSE
          SELECT cohead_shipto_id INTO _shiptoid FROM cohead WHERE (cohead_id=NEW.cohead_id);
          -- Get the shipto address
          IF (COALESCE(NEW.cohead_shipto_id,-1) &lt;&gt; COALESCE(_shiptoid,-1)) THEN
            SELECT * INTO _a 
            FROM shiptoinfo
              LEFT OUTER JOIN cntct ON (shipto_cntct_id=cntct_id)
              LEFT OUTER JOIN addr ON (shipto_addr_id=addr_id)
            WHERE (shipto_id=NEW.cohead_shipto_id);
            IF (FOUND) THEN
              -- Free form not allowed so we&#39;re going to make sure address matches Shipto data
              NEW.cohead_shiptoname := COALESCE(_a.shipto_name,&#39;&#39;);
              NEW.cohead_shiptophone := COALESCE(_a.cntct_phone,&#39;&#39;);
              NEW.cohead_shiptoaddress1 := COALESCE(_a.addr_line1,&#39;&#39;);
              NEW.cohead_shiptoaddress2 := COALESCE(_a.addr_line2,&#39;&#39;);
              NEW.cohead_shiptoaddress3 := COALESCE(_a.addr_line3,&#39;&#39;);    
              NEW.cohead_shiptocity := COALESCE(_a.addr_city,&#39;&#39;); 
              NEW.cohead_shiptostate := COALESCE(_a.addr_state,&#39;&#39;);
              NEW.cohead_shiptozipcode := COALESCE(_a.addr_postalcode,&#39;&#39;);
              NEW.cohead_shiptocountry := COALESCE(_a.addr_country,&#39;&#39;); 
            ELSE
              -- If no shipto data and free form not allowed, this won&#39;t work
              RAISE EXCEPTION &#39;Free form Shipto is not allowed on this Customer. You must supply a valid Shipto ID.&#39;;
            END IF;
          END IF;
        END IF;
      END IF;
    END IF;
  END IF;

  IF ( SELECT (metric_value=&#39;t&#39;)
       FROM metric
       WHERE (metric_name=&#39;SalesOrderChangeLog&#39;) ) THEN

--  Cache the cmnttype_id for ChangeLog
    SELECT cmnttype_id INTO _cmnttypeid
    FROM cmnttype
    WHERE (cmnttype_name=&#39;ChangeLog&#39;);
    IF (FOUND) THEN
      IF (TG_OP = &#39;INSERT&#39;) THEN
        PERFORM postComment(_cmnttypeid, &#39;S&#39;, NEW.cohead_id, &#39;Created&#39;);

      ELSIF (TG_OP = &#39;UPDATE&#39;) THEN

        IF (OLD.cohead_terms_id &lt;&gt; NEW.cohead_terms_id) THEN
          PERFORM postComment( _cmnttypeid, &#39;S&#39;, NEW.cohead_id,
                               (&#39;Terms Changed from &quot;&#39; || oldterms.terms_code || &#39;&quot; to &quot;&#39; || newterms.terms_code || &#39;&quot;&#39;) )
          FROM terms AS oldterms, terms AS newterms
          WHERE ( (oldterms.terms_id=OLD.cohead_terms_id)
           AND (newterms.terms_id=NEW.cohead_terms_id) );
        END IF;

	IF (OLD.cohead_shipvia &lt;&gt; NEW.cohead_shipvia) THEN
           PERFORM postComment (_cmnttypeid, &#39;S&#39;, New.cohead_id, (&#39;Shipvia Changed from &quot;&#39; || OLD.cohead_shipvia || &#39;&quot; to &quot;&#39; || NEW.cohead_shipvia || &#39;&quot;&#39;));
        END IF;

        IF (OLD.cohead_holdtype &lt;&gt; NEW.cohead_holdtype) THEN

          IF (OLD.cohead_holdtype = &#39;N&#39;) THEN
            _oldHoldType := &#39;No Hold&#39;;
          ELSIF (OLD.cohead_holdtype = &#39;C&#39;) THEN
            _oldHoldType := &#39;Credit Hold&#39;;
          ELSIF (OLD.cohead_holdtype = &#39;P&#39;) THEN
            _oldHoldType := &#39;Packing Hold&#39;;
          ELSIF (OLD.cohead_holdtype = &#39;S&#39;) THEN
            _oldHoldType := &#39;Shipping Hold&#39;;
          ELSE
            _oldHoldType := &#39;Unknown/Error&#39;;
          END IF;

          IF (NEW.cohead_holdtype = &#39;N&#39;) THEN
            _newHoldType := &#39;No Hold&#39;;
          ELSIF (NEW.cohead_holdtype = &#39;C&#39;) THEN
            _newHoldType := &#39;Credit Hold&#39;;
          ELSIF (NEW.cohead_holdtype = &#39;P&#39;) THEN
            _newHoldType := &#39;Packing Hold&#39;;
          ELSIF (NEW.cohead_holdtype = &#39;S&#39;) THEN
            _newHoldType := &#39;Shipping Hold&#39;;
          ELSE
            _newHoldType := &#39;Unknown/Error&#39;;
          END IF;

          PERFORM postComment( _cmnttypeid, &#39;S&#39;, NEW.cohead_id,
                               (&#39;Hold Type Changed from &quot;&#39; || _oldHoldType || &#39;&quot; to &quot;&#39; || _newHoldType || &#39;&quot;&#39;) );
        END IF;

      ELSIF (TG_OP = &#39;DELETE&#39;) THEN
        DELETE FROM comment
        WHERE ( (comment_source=&#39;S&#39;)
         AND (comment_source_id=OLD.cohead_id) );
      END IF;
    END IF;
  END IF;

  IF (TG_OP = &#39;UPDATE&#39;) THEN
    IF ( (NOT (OLD.cohead_holdtype = &#39;N&#39;)) AND
         (NEW.cohead_holdtype=&#39;N&#39;) ) THEN
      INSERT INTO evntlog ( evntlog_evnttime, evntlog_username, evntlog_evnttype_id,
                            evntlog_ordtype, evntlog_ord_id, evntlog_warehous_id, evntlog_number )
      SELECT CURRENT_TIMESTAMP, evntnot_username, evnttype_id,
             &#39;S&#39;, NEW.cohead_id, NEW.cohead_warehous_id, NEW.cohead_number::TEXT
      FROM evntnot, evnttype
      WHERE ( (evntnot_evnttype_id=evnttype_id)
       AND (evntnot_warehous_id=NEW.cohead_warehous_id)
       AND (evnttype_name=&#39;SoReleased&#39;) );
    END IF;

    IF (OLD.cohead_ordercomments &lt;&gt; NEW.cohead_ordercomments) THEN
      INSERT INTO evntlog ( evntlog_evnttime, evntlog_username, evntlog_evnttype_id,
                            evntlog_ordtype, evntlog_ord_id, evntlog_warehous_id, evntlog_number )
      SELECT CURRENT_TIMESTAMP, evntnot_username, evnttype_id,
             &#39;S&#39;, NEW.cohead_id, NEW.cohead_warehous_id, NEW.cohead_number::TEXT
      FROM evntnot, evnttype
      WHERE ( (evntnot_evnttype_id=evnttype_id)
       AND (evntnot_warehous_id=NEW.cohead_warehous_id)
       AND (evnttype_name=&#39;SoNotesChanged&#39;) );
    END IF;

    IF ((OLD.cohead_shipchrg_id != NEW.cohead_shipchrg_id)
        OR (OLD.cohead_freight != NEW.cohead_freight)) THEN
      UPDATE shiphead SET 
        shiphead_shipchrg_id=NEW.cohead_shipchrg_id,
        shiphead_freight=NEW.cohead_freight
      WHERE ((shiphead_order_type=&#39;SO&#39;)
      AND  (shiphead_order_id=NEW.cohead_id)
      AND  (NOT shiphead_shipped));
    END IF;
  END IF;


  IF (TG_OP = &#39;DELETE&#39;) THEN
    RETURN OLD;
  ELSE
    NEW.cohead_lastupdated = CURRENT_TIMESTAMP;

    RETURN NEW;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-soitemaftertrigger">_soitemaftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _check NUMERIC;
  _kit BOOLEAN;
  _rec RECORD;
  _kstat TEXT;
  _pstat TEXT;
BEGIN

  IF(TG_OP = &#39;DELETE&#39;) THEN
    _rec := OLD;
  ELSE
    _rec := NEW;
  END IF;

  SELECT COALESCE(item_type,&#39;&#39;)=&#39;K&#39;
    INTO _kit
    FROM itemsite, item
   WHERE((itemsite_item_id=item_id)
     AND (itemsite_id=_rec.coitem_itemsite_id));
  _kit := COALESCE(_kit, false);

  IF (_rec.coitem_subnumber &gt; 0) THEN
    SELECT coitem_status
      INTO _kstat
      FROM coitem
     WHERE((coitem_cohead_id=_rec.coitem_cohead_id)
       AND (coitem_linenumber=_rec.coitem_linenumber)
       AND (coitem_subnumber = 0));
    IF ((SELECT count(*)
           FROM coitem
          WHERE((coitem_cohead_id=_rec.coitem_cohead_id)
            AND (coitem_linenumber=_rec.coitem_linenumber)
            AND (coitem_subnumber &lt;&gt; _rec.coitem_subnumber)
            AND (coitem_subnumber &gt; 0)
            AND (coitem_status = &#39;O&#39;))) &gt; 0) THEN
      _pstat := &#39;O&#39;;
    ELSE
      _pstat := &#39;C&#39;;
    END IF;
  END IF;

  IF(TG_OP = &#39;INSERT&#39;) THEN
    IF (_rec.coitem_subnumber &gt; 0 AND _rec.coitem_status = &#39;O&#39;) THEN
      _pstat := &#39;O&#39;;
    END IF;
  ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
    IF (_rec.coitem_subnumber &gt; 0 AND _rec.coitem_status = &#39;O&#39;) THEN
      _pstat := &#39;O&#39;;
    END IF;

    IF ((NEW.coitem_status = &#39;C&#39;) AND (OLD.coitem_status &lt;&gt; &#39;C&#39;)) THEN
      IF(_kit) THEN
        UPDATE coitem
           SET coitem_status=&#39;C&#39;
         WHERE((coitem_cohead_id=OLD.coitem_cohead_id)
           AND (coitem_linenumber=OLD.coitem_linenumber)
           AND (coitem_status=&#39;O&#39;)
           AND (coitem_subnumber &gt; 0));
      END IF;
    END IF;

    IF ((NEW.coitem_status = &#39;X&#39;) AND (OLD.coitem_status &lt;&gt; &#39;X&#39;)) THEN
      IF(_kit) THEN
        UPDATE coitem
           SET coitem_status=&#39;X&#39;
         WHERE((coitem_cohead_id=OLD.coitem_cohead_id)
           AND (coitem_linenumber=OLD.coitem_linenumber)
           AND (coitem_status=&#39;O&#39;)
           AND (coitem_subnumber &gt; 0));
      END IF;
    END IF;

    IF(NEW.coitem_status = &#39;O&#39; AND OLD.coitem_status &lt;&gt; &#39;O&#39;) THEN
      IF(_kit) THEN
        UPDATE coitem
           SET coitem_status=&#39;O&#39;
         WHERE((coitem_cohead_id=OLD.coitem_cohead_id)
           AND (coitem_linenumber=OLD.coitem_linenumber)
           AND ((coitem_qtyord - coitem_qtyshipped + coitem_qtyreturned) &gt; 0)
           AND (coitem_subnumber &gt; 0));
      END IF;
    END IF;

  END IF;

  IF ((_kstat IS NOT NULL) AND (_pstat IS NOT NULL) AND (_rec.coitem_subnumber &gt; 0) AND (_kstat &lt;&gt; _pstat)) THEN
    UPDATE coitem
       SET coitem_status = _pstat
     WHERE((coitem_cohead_id=_rec.coitem_cohead_id)
       AND (coitem_subnumber = 0));
  END IF;

  IF(TG_OP = &#39;DELETE&#39;) THEN
    RETURN OLD;
  END IF;

  --If auto calculate freight, recalculate cohead_freight
  IF (SELECT cohead_calcfreight FROM cohead WHERE (cohead_id=NEW.coitem_cohead_id)) THEN
    UPDATE cohead SET cohead_freight = COALESCE(
      (SELECT SUM(freightdata_total) FROM freightDetail(&#39;SO&#39;,
                                                        cohead_id,
                                                        cohead_cust_id,
                                                        cohead_shipto_id,
                                                        cohead_orderdate,
                                                        cohead_shipvia,
                                                        cohead_curr_id)), 0)
    WHERE cohead_id=NEW.coitem_cohead_id;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-soitembeforetrigger">_soitembeforetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _check NUMERIC;
  _itemNumber TEXT;
  _r RECORD;
  _kit BOOLEAN;
BEGIN

  --Determine if this is a kit for later processing
  SELECT COALESCE(item_type,&#39;&#39;)=&#39;K&#39;
  INTO _kit
  FROM itemsite, item
  WHERE((itemsite_item_id=item_id)
  AND (itemsite_id=NEW.coitem_itemsite_id));
  _kit := COALESCE(_kit, false);
  
  IF (TG_OP = &#39;INSERT&#39;) THEN

    IF(_kit) THEN
      PERFORM explodeKit(NEW.coitem_cohead_id, NEW.coitem_linenumber, 0, NEW.coitem_itemsite_id, NEW.coitem_qtyord);
      UPDATE coitem
      SET coitem_scheddate = NEW.coitem_scheddate,
          coitem_promdate = NEW.coitem_promdate
      WHERE((coitem_cohead_id=NEW.coitem_cohead_id)
        AND (coitem_linenumber = NEW.coitem_linenumber)
        AND (coitem_subnumber &gt; 0));
    END IF;

    -- If this is imported, go ahead and insert default characteristics
    IF (NEW.coitem_imported) THEN
      INSERT INTO charass (charass_target_type, charass_target_id, charass_char_id, charass_value, charass_price)
      SELECT &#39;SI&#39;, NEW.coitem_id, char_id, charass_value,
             itemcharprice(item_id,char_id,charass_value,cohead_cust_id,cohead_shipto_id,NEW.coitem_qtyord,cohead_curr_id,cohead_orderdate) 
        FROM (
           SELECT DISTINCT char_id, char_name, charass_value, item_id, cohead_cust_id, cohead_shipto_id, cohead_curr_id, cohead_orderdate
             FROM cohead, charass, char, itemsite, item
            WHERE((itemsite_id=NEW.coitem_itemsite_id)
              AND (itemsite_item_id=item_id)
              AND (charass_target_type=&#39;I&#39;) 
              AND (charass_target_id=item_id)
              AND (charass_default)
              AND (char_id=charass_char_id)
              AND (cohead_id=NEW.coitem_cohead_id))
           ORDER BY char_name) AS data;
    END IF;
  END IF;

  -- Create work order and process if flagged to do so
  IF ((NEW.coitem_order_type=&#39;W&#39;) AND (NEW.coitem_order_id=-1)) THEN
    SELECT createwo(CAST(cohead_number AS INTEGER),     NEW.coitem_itemsite_id, 1,
		    NEW.coitem_qtyord, itemsite_leadtime,  NEW.coitem_scheddate,
		    NEW.coitem_memo,   &#39;S&#39;,              NEW.coitem_id,
		    cohead_prj_id) INTO NEW.coitem_order_id
    FROM cohead, itemsite 
    WHERE ((cohead_id=NEW.coitem_cohead_id)
    AND (itemsite_id=NEW.coitem_itemsite_id));

    INSERT INTO charass
      (charass_target_type, charass_target_id,
       charass_char_id, charass_value) 
       SELECT &#39;W&#39;, NEW.coitem_order_id, charass_char_id, charass_value
       FROM charass
       WHERE ((charass_target_type=&#39;SI&#39;)
       AND  (charass_target_id=NEW.coitem_id));
  END IF;
   
  -- Create Purchase Request if flagged to do so
  IF ((NEW.coitem_order_type=&#39;R&#39;) AND (NEW.coitem_order_id=-1)) THEN
    SELECT createpr(CAST(cohead_number AS INTEGER), &#39;S&#39;, NEW.coitem_id) INTO NEW.coitem_order_id
    FROM cohead
    WHERE (cohead_id=NEW.coitem_cohead_id);
  END IF;

  IF (TG_OP = &#39;UPDATE&#39;) THEN
--  Update kit line item dates
    IF (_kit
	AND (NEW.coitem_scheddate &lt;&gt; OLD.coitem_scheddate
	OR  NEW.coitem_promdate &lt;&gt; OLD.coitem_promdate)) THEN
      UPDATE coitem
      SET coitem_scheddate = NEW.coitem_scheddate,
          coitem_promdate = NEW.coitem_promdate
      WHERE((coitem_cohead_id=NEW.coitem_cohead_id)
        AND (coitem_linenumber = NEW.coitem_linenumber)
        AND (coitem_subnumber &gt; 0));
    END IF;
           
--  If closing or cancelling and there is a job item work order, then close job and distribute remaining costs
    IF ((NEW.coitem_status = &#39;C&#39; AND OLD.coitem_status &lt;&gt; &#39;C&#39;)
     OR (NEW.coitem_status = &#39;X&#39; AND OLD.coitem_status &lt;&gt; &#39;X&#39;))
     AND (OLD.coitem_order_id &gt; -1) THEN

      SELECT wo_id, wo_wipvalue INTO _r
       FROM wo,itemsite,item
      WHERE ((wo_ordtype=&#39;S&#39;)
      AND (wo_ordid=OLD.coitem_id)
      AND (itemsite_id=wo_itemsite_id)
      AND (item_id=itemsite_item_id)
      AND (item_type = &#39;J&#39;));

      IF (FOUND) THEN
        IF (_r.wo_wipvalue &gt; 0) THEN
        --  Distribute to G/L, debit Cost of Sales, credit WIP
          PERFORM MIN(insertGLTransaction( &#39;W/O&#39;, &#39;WO&#39;, formatWoNumber(NEW.coitem_order_id), &#39;Job Closed Incomplete&#39;,
                                       costcat_wip_accnt_id,
				        CASE WHEN(COALESCE(NEW.coitem_cos_accnt_id, -1) != -1) THEN NEW.coitem_cos_accnt_id
                                          WHEN(NEW.coitem_warranty=TRUE) THEN resolveCOWAccount(itemsite_id, cohead_cust_id)
                                          ELSE resolveCOSAccount(itemsite_id, cohead_cust_id)
                                       END,
                                       -1,  _r.wo_wipvalue, current_date ))
          FROM itemsite, costcat, cohead
          WHERE ((itemsite_id=NEW.coitem_itemsite_id)
           AND (itemsite_costcat_id=costcat_id)
           AND (cohead_id=NEW.coitem_cohead_id));
        END IF;

        UPDATE wo SET
          wo_status = &#39;C&#39;,
          wo_wipvalue = 0
        WHERE (wo_id = _r.wo_id);

      END IF;
    END IF;

--  Likewise, reopen the job if line reopened
    IF ((NEW.coitem_status != &#39;C&#39; AND OLD.coitem_status = &#39;C&#39;)
     OR (NEW.coitem_status != &#39;X&#39; AND OLD.coitem_status = &#39;X&#39;))
     AND (OLD.coitem_order_id &gt; -1) THEN
        UPDATE wo SET
          wo_status = &#39;I&#39;
        FROM itemsite, item
        WHERE ((wo_ordtype = &#39;S&#39;)
         AND (wo_ordid=NEW.coitem_id)
         AND (wo_itemsite_id=itemsite_id)
         AND (itemsite_item_id=item_id)
         AND (item_type=&#39;J&#39;));
    END IF;

--  Handle links to Return Authorization
    IF (fetchMetricBool(&#39;EnableReturnAuth&#39;)) THEN 
      SELECT * INTO _r 
      FROM raitem,rahead 
      WHERE ((raitem_new_coitem_id=NEW.coitem_id)
      AND (rahead_id=raitem_rahead_id));
      IF (FOUND) THEN
        IF ((_r.raitem_qtyauthorized &lt;&gt; NEW.coitem_qtyord OR
            _r.raitem_qty_uom_id &lt;&gt; NEW.coitem_qty_uom_id OR
            _r.raitem_qty_invuomratio &lt;&gt; NEW.coitem_qty_invuomratio OR
            _r.raitem_price_uom_id &lt;&gt; NEW.coitem_price_uom_id OR
            _r.raitem_price_invuomratio &lt;&gt; NEW.coitem_price_invuomratio)
            AND NOT (NEW.coitem_status = &#39;X&#39; AND _r.raitem_qtyauthorized = 0)) THEN
          RAISE EXCEPTION &#39;Quantities for line item % may only be changed on the Return Authorization that created it.&#39;,NEW.coitem_linenumber;
        END IF;
        IF (OLD.coitem_warranty &lt;&gt; NEW.coitem_warranty) THEN
          UPDATE raitem SET raitem_warranty = NEW.coitem_warranty
           WHERE((raitem_new_coitem_id=NEW.coitem_id)
             AND (raitem_warranty != NEW.coitem_warranty));
        END IF;
        IF (OLD.coitem_cos_accnt_id &lt;&gt; NEW.coitem_cos_accnt_id) THEN
          UPDATE raitem SET raitem_cos_accnt_id = NEW.coitem_cos_accnt_id
           WHERE((raitem_new_coitem_id=NEW.coitem_id)
             AND (COALESCE(raitem_cos_accnt_id,-1) != COALESCE(NEW.coitem_cos_accnt_id,-1)));
        END IF;
        IF (OLD.coitem_tax_id &lt;&gt; NEW.coitem_tax_id) THEN
          UPDATE raitem SET raitem_tax_id = NEW.coitem_tax_id
           WHERE((raitem_new_coitem_id=NEW.coitem_id)
             AND (COALESCE(raitem_tax_id,-1) != COALESCE(NEW.coitem_tax_id,-1)));
        END IF;
        IF (OLD.coitem_scheddate &lt;&gt; NEW.coitem_scheddate) THEN
          UPDATE raitem SET raitem_scheddate = NEW.coitem_scheddate
           WHERE((raitem_new_coitem_id=NEW.coitem_id)
             AND (raitem_scheddate != NEW.coitem_scheddate));
        END IF;
        IF (OLD.coitem_memo &lt;&gt; NEW.coitem_memo) THEN
          UPDATE raitem SET raitem_notes = NEW.coitem_memo
           WHERE((raitem_new_coitem_id=NEW.coitem_id)
             AND (raitem_notes != NEW.coitem_memo));
        END IF;
        IF ((OLD.coitem_qtyshipped &lt;&gt; NEW.coitem_qtyshipped) AND 
           (NEW.coitem_qtyshipped &gt;= _r.raitem_qtyauthorized) AND
           ((_r.raitem_disposition = &#39;S&#39;) OR
           (_r.raitem_status = &#39;O&#39;) AND
           (_r.raitem_disposition IN (&#39;P&#39;,&#39;V&#39;)) AND
           (_r.raitem_qtyreceived &gt;= _r.raitem_qtyauthorized))) THEN
          UPDATE raitem SET raitem_status = &#39;C&#39; 
          WHERE (raitem_new_coitem_id=NEW.coitem_id);
        END IF;
      END IF;
    END IF; 
  END IF; 

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-soitemtrigger">_soitemtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _cmnttypeid INTEGER;
  _check BOOLEAN;
  _kit BOOLEAN;
  _shipped BOOLEAN;
  _atShipping NUMERIC;
  _tmp INTEGER;
  _rec RECORD;
BEGIN
  -- Check
  SELECT checkPrivilege(&#39;MaintainSalesOrders&#39;) OR checkPrivilege(&#39;ShipOrders&#39;) OR checkPrivilege(&#39;IssueStockToShipping&#39;) INTO _check;
  IF NOT (_check) THEN
    RAISE EXCEPTION &#39;You do not have privileges to alter a Sales Order.&#39;;
  END IF;

  IF (TG_OP IN (&#39;INSERT&#39;,&#39;UPDATE&#39;)) THEN
    IF (NEW.coitem_scheddate IS NULL) THEN
      IF (fetchmetricbool(&#39;AllowASAPShipSchedules&#39;)) THEN
        NEW.coitem_scheddate := current_date;
      ELSE
        RAISE EXCEPTION &#39;A schedule date is required.&#39;;
      END IF;
    END IF;
  END IF;

  IF(TG_OP = &#39;DELETE&#39;) THEN
    _rec := OLD;
  ELSE
    _rec := NEW;
  END IF;
  SELECT COALESCE(item_type,&#39;&#39;)=&#39;K&#39;
    INTO _kit
    FROM itemsite, item
   WHERE((itemsite_item_id=item_id)
     AND (itemsite_id=_rec.coitem_itemsite_id));
  _kit := COALESCE(_kit, false);
  _shipped := false;
  IF(_kit) THEN
    SELECT coitem_id
      INTO _tmp
      FROM coitem LEFT OUTER JOIN coship ON (coship_coitem_id=coitem_id)
     WHERE((coitem_cohead_id=_rec.coitem_cohead_id)
       AND (coitem_linenumber=_rec.coitem_linenumber)
       AND (coitem_subnumber &gt; 0))
     GROUP BY coitem_id
    HAVING (SUM(coship_qty) &gt; 0)
     LIMIT 1;
    IF (FOUND) THEN
      _shipped := true;
    END IF;
  END IF;
  
  IF (TG_OP =&#39;UPDATE&#39;) THEN
    IF ((OLD.coitem_status &lt;&gt; &#39;C&#39;) AND (NEW.coitem_status = &#39;C&#39;)) THEN
      SELECT (COALESCE(SUM(coship_qty), 0) - coitem_qtyshipped) INTO _atShipping
      FROM coitem LEFT OUTER JOIN coship ON (coship_coitem_id=coitem_id)
      WHERE (coitem_id=NEW.coitem_id)
      GROUP BY coitem_qtyshipped;
      IF (_atShipping &gt; 0) THEN
        RAISE EXCEPTION &#39;Line % cannot be Closed at this time as there is inventory at shipping.&#39;,NEW.coitem_linenumber;
      END IF;
    END IF;
  END IF;

  IF ( SELECT (metric_value=&#39;t&#39;)
       FROM metric
       WHERE (metric_name=&#39;SalesOrderChangeLog&#39;) ) THEN
--  Cache the cmnttype_id for ChangeLog
    SELECT cmnttype_id INTO _cmnttypeid
    FROM cmnttype
    WHERE (cmnttype_name=&#39;ChangeLog&#39;);
  ELSE
    _cmnttypeid := -1;
  END IF;

  IF (TG_OP = &#39;INSERT&#39;) THEN
    INSERT INTO evntlog ( evntlog_evnttime, evntlog_username, evntlog_evnttype_id,
                          evntlog_ordtype, evntlog_ord_id, evntlog_warehous_id, evntlog_number )
    SELECT CURRENT_TIMESTAMP, evntnot_username, evnttype_id,
           &#39;S&#39;, NEW.coitem_id, itemsite_warehous_id, (cohead_number || &#39;-&#39; || NEW.coitem_linenumber)
    FROM evntnot, evnttype, itemsite, item, cohead
    WHERE ( (evntnot_evnttype_id=evnttype_id)
     AND (evntnot_warehous_id=itemsite_warehous_id)
     AND (itemsite_id=NEW.coitem_itemsite_id)
     AND (itemsite_item_id=item_id)
     AND (NEW.coitem_cohead_id=cohead_id)
     AND (NEW.coitem_scheddate &lt;= (CURRENT_DATE + itemsite_eventfence))
     AND (evnttype_name=&#39;SoitemCreated&#39;) );

    IF (_cmnttypeid &lt;&gt; -1) THEN
      PERFORM postComment(_cmnttypeid, &#39;SI&#39;, NEW.coitem_id, &#39;Created&#39;);
    END IF;

    --Set defaults if no values passed
    NEW.coitem_linenumber	:= COALESCE(NEW.coitem_linenumber,
                                          (SELECT (COALESCE(MAX(coitem_linenumber), 0) + 1)
                                           FROM coitem
                                           WHERE (coitem_cohead_id=NEW.coitem_cohead_id)));
    NEW.coitem_status		:= COALESCE(NEW.coitem_status,&#39;O&#39;);
    NEW.coitem_scheddate	:= COALESCE(NEW.coitem_scheddate,
					   (SELECT MIN(coitem_scheddate)
					    FROM coitem
					    WHERE (coitem_cohead_id=NEW.coitem_cohead_id)));
    NEW.coitem_memo		:= COALESCE(NEW.coitem_memo,&#39;&#39;);
    NEW.coitem_prcost		:= COALESCE(NEW.coitem_prcost,0);
    NEW.coitem_warranty	:= COALESCE(NEW.coitem_warranty,false);
    RETURN NEW;

  ELSIF (TG_OP = &#39;DELETE&#39;) THEN

      IF(_kit) THEN
        IF(_shipped) THEN
          RAISE EXCEPTION &#39;You can not delete this Sales Order Line as it has several sub components that have already been shipped.&#39;;
        END IF;
        DELETE FROM coitem
         WHERE((coitem_cohead_id=OLD.coitem_cohead_id)
           AND (coitem_linenumber=OLD.coitem_linenumber)
           AND (coitem_subnumber &gt; 0));
      END IF;

      DELETE FROM comment
      WHERE ( (comment_source=&#39;SI&#39;)
       AND (comment_source_id=OLD.coitem_id) );

      DELETE FROM charass
       WHERE ((charass_target_type=&#39;SI&#39;)
         AND  (charass_target_id=OLD.coitem_id));
 
      IF ((OLD.coitem_order_type = &#39;W&#39;) AND
	  (SELECT wo_status IN (&#39;O&#39;, &#39;E&#39;)
	    FROM wo
	    WHERE (wo_id=OLD.coitem_order_id))) THEN
        PERFORM deleteWo(OLD.coitem_order_id, TRUE);

      ELSIF (OLD.coitem_order_type = &#39;R&#39;) THEN 
        PERFORM deletePr(OLD.coitem_order_id);
      END IF;

    INSERT INTO evntlog ( evntlog_evnttime, evntlog_username,
			  evntlog_evnttype_id, evntlog_ordtype,
			  evntlog_ord_id, evntlog_warehous_id, evntlog_number )
    SELECT CURRENT_TIMESTAMP, evntnot_username,
	   evnttype_id, &#39;S&#39;,
	   OLD.coitem_id, itemsite_warehous_id,
	   (cohead_number || &#39;-&#39; || OLD.coitem_linenumber)
    FROM evntnot, evnttype, itemsite, item, cohead
    WHERE ( (evntnot_evnttype_id=evnttype_id)
     AND (evntnot_warehous_id=itemsite_warehous_id)
     AND (itemsite_id=OLD.coitem_itemsite_id)
     AND (itemsite_item_id=item_id)
     AND (OLD.coitem_cohead_id=cohead_id)
     AND (OLD.coitem_scheddate &lt;= (CURRENT_DATE + itemsite_eventfence))
     AND (evnttype_name=&#39;SoitemCancelled&#39;) );

  ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
    IF (NEW.coitem_qtyord &lt;&gt; OLD.coitem_qtyord) THEN
      IF(_kit) THEN
        IF(_shipped) THEN
          RAISE EXCEPTION &#39;You can not change the qty ordered for a Kit item when one or more of its components have shipped inventory.&#39;;
        END IF;
        DELETE FROM coitem
         WHERE((coitem_cohead_id=OLD.coitem_cohead_id)
           AND (coitem_linenumber=OLD.coitem_linenumber)
           AND (coitem_subnumber &gt; 0));
        PERFORM explodeKit(OLD.coitem_cohead_id, OLD.coitem_linenumber, 0, NEW.coitem_itemsite_id, NEW.coitem_qtyord);
        UPDATE coitem
           SET coitem_scheddate = NEW.coitem_scheddate,
               coitem_promdate = NEW.coitem_promdate
         WHERE((coitem_linenumber = OLD.coitem_linenumber)
           AND (coitem_subnumber &gt; 0));
      END IF;
      INSERT INTO evntlog ( evntlog_evnttime, evntlog_username, evntlog_evnttype_id,
			    evntlog_ordtype, evntlog_ord_id, evntlog_warehous_id, evntlog_number,
			    evntlog_oldvalue, evntlog_newvalue )
      SELECT CURRENT_TIMESTAMP, evntnot_username, evnttype_id,
	     &#39;S&#39;, NEW.coitem_id, itemsite_warehous_id, (cohead_number || &#39;-&#39; || NEW.coitem_linenumber),
	     OLD.coitem_qtyord, NEW.coitem_qtyord
      FROM evntnot, evnttype, itemsite, item, cohead
      WHERE ( (evntnot_evnttype_id=evnttype_id)
       AND (evntnot_warehous_id=itemsite_warehous_id)
       AND (itemsite_id=NEW.coitem_itemsite_id)
       AND (itemsite_item_id=item_id)
       AND (NEW.coitem_cohead_id=cohead_id)
       AND ( (NEW.coitem_scheddate &lt;= (CURRENT_DATE + itemsite_eventfence))
	OR   (OLD.coitem_scheddate &lt;= (CURRENT_DATE + itemsite_eventfence)) )
       AND (evnttype_name=&#39;SoitemQtyChanged&#39;) );

      IF (_cmnttypeid &lt;&gt; -1) THEN
	PERFORM postComment( _cmnttypeid, &#39;SI&#39;, NEW.coitem_id,
			     ( &#39;Changed Qty. Ordered from &#39; || formatQty(OLD.coitem_qtyord) ||
			       &#39; to &#39; || formatQty(NEW.coitem_qtyord) ) );
      END IF;

    END IF;

    IF (NEW.coitem_scheddate &lt;&gt; OLD.coitem_scheddate) THEN
      INSERT INTO evntlog ( evntlog_evnttime, evntlog_username, evntlog_evnttype_id,
			    evntlog_ordtype, evntlog_ord_id, evntlog_warehous_id, evntlog_number,
			    evntlog_olddate, evntlog_newdate )
      SELECT CURRENT_TIMESTAMP, evntnot_username, evnttype_id,
	     &#39;S&#39;, NEW.coitem_id, itemsite_warehous_id, (cohead_number || &#39;-&#39; || NEW.coitem_linenumber),
	     OLD.coitem_scheddate, NEW.coitem_scheddate
      FROM evntnot, evnttype, itemsite, item, cohead
      WHERE ( (evntnot_evnttype_id=evnttype_id)
       AND (evntnot_warehous_id=itemsite_warehous_id)
       AND (itemsite_id=NEW.coitem_itemsite_id)
       AND (itemsite_item_id=item_id)
       AND (NEW.coitem_cohead_id=cohead_id)
       AND ( (NEW.coitem_scheddate &lt;= (CURRENT_DATE + itemsite_eventfence))
	OR   (OLD.coitem_scheddate &lt;= (CURRENT_DATE + itemsite_eventfence)) )
       AND (evnttype_name=&#39;SoitemSchedDateChanged&#39;) );

      IF (_cmnttypeid &lt;&gt; -1) THEN
	PERFORM postComment( _cmnttypeid, &#39;SI&#39;, NEW.coitem_id,
			     ( &#39;Changed Sched. Date from &#39; || formatDate(OLD.coitem_scheddate) ||
			       &#39; to &#39; || formatDate(NEW.coitem_scheddate)) );
      END IF;

    END IF;

    IF ((NEW.coitem_status = &#39;C&#39;) AND (OLD.coitem_status &lt;&gt; &#39;C&#39;)) THEN
      NEW.coitem_closedate = CURRENT_TIMESTAMP;
      NEW.coitem_close_username = CURRENT_USER;
      NEW.coitem_qtyreserved := 0;

      IF (_cmnttypeid &lt;&gt; -1) THEN
	PERFORM postComment(_cmnttypeid, &#39;SI&#39;, NEW.coitem_id, &#39;Closed&#39;);
      END IF;
    END IF;

    IF ((NEW.coitem_status = &#39;X&#39;) AND (OLD.coitem_status &lt;&gt; &#39;X&#39;)) THEN
      NEW.coitem_qtyreserved := 0;

      IF (_cmnttypeid &lt;&gt; -1) THEN
	PERFORM postComment(_cmnttypeid, &#39;SI&#39;, NEW.coitem_id, &#39;Canceled&#39;);
	PERFORM postComment(_cmnttypeid, &#39;S&#39;, NEW.coitem_cohead_id, &#39;Line # &#39;|| NEW.coitem_linenumber ||&#39; Canceled&#39;);
      END IF;

      INSERT INTO evntlog ( evntlog_evnttime, evntlog_username,
			    evntlog_evnttype_id, evntlog_ordtype,
			    evntlog_ord_id, evntlog_warehous_id, evntlog_number )
      SELECT CURRENT_TIMESTAMP, evntnot_username,
	     evnttype_id, &#39;S&#39;,
	     OLD.coitem_id, itemsite_warehous_id,
	     (cohead_number || &#39;-&#39; || OLD.coitem_linenumber)
      FROM evntnot, evnttype, itemsite, item, cohead
      WHERE ( (evntnot_evnttype_id=evnttype_id)
       AND (evntnot_warehous_id=itemsite_warehous_id)
       AND (itemsite_id=OLD.coitem_itemsite_id)
       AND (itemsite_item_id=item_id)
       AND (OLD.coitem_cohead_id=cohead_id)
       AND (OLD.coitem_scheddate &lt;= (CURRENT_DATE + itemsite_eventfence))
       AND (evnttype_name=&#39;SoitemCancelled&#39;) );

    END IF;

    IF ((NEW.coitem_qtyreserved &lt;&gt; OLD.coitem_qtyreserved) AND (_cmnttypeid &lt;&gt; -1)) THEN
      PERFORM postComment(_cmnttypeid, &#39;SI&#39;, NEW.coitem_id, &#39;Changed Qty Reserved to &#39;|| NEW.coitem_qtyreserved);
    END IF;

  END IF;

  IF (TG_OP = &#39;DELETE&#39;) THEN
    RETURN OLD;
  END IF;

  NEW.coitem_lastupdated = CURRENT_TIMESTAMP;

  RETURN NEW;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-taxauthaftertrigger">_taxauthaftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _crmacctid	INTEGER;
BEGIN
  SELECT crmacct_id INTO _crmacctid
  FROM crmacct
  WHERE crmacct_taxauth_id = NEW.taxauth_id;

  IF (crmAcctNumberUsed(NEW.taxauth_code, _crmacctid)) THEN
    RAISE EXCEPTION &#39;Tax Authority % is already in use by another CRM entity&#39;,
      NEW.taxauth_code;
  END IF;

  IF (TG_OP = &#39;INSERT&#39; OR TG_OP = &#39;UPDATE&#39;) THEN
    UPDATE crmacct SET crmacct_number = NEW.taxauth_code
    WHERE ((crmacct_taxauth_id=NEW.taxauth_id)
      AND  (crmacct_number!=NEW.taxauth_code));
    UPDATE crmacct SET crmacct_name = NEW.taxauth_name
    WHERE ((crmacct_taxauth_id=NEW.taxauth_id)
      AND  (crmacct_name!=NEW.taxauth_name));
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-uomconvupdate">_uomconvupdate(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
 
  UPDATE itemuomconv
  SET itemuomconv_to_value = NEW.uomconv_to_value,
  itemuomconv_from_value = NEW.uomconv_from_value,
  itemuomconv_fractional = NEW.uomconv_fractional
  WHERE((itemuomconv_from_uom_id = NEW.uomconv_from_uom_id)
  AND (itemuomconv_to_uom_id = NEW.uomconv_to_uom_id));

RETURN NEW;

END; 
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-usraftertrigger">_usraftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _empcode      TEXT;
  _empid        INTEGER;
  _empusrid     INTEGER;
BEGIN
  IF (TG_OP = &#39;UPDATE&#39;) THEN
    IF (NEW.usr_username != OLD.usr_username) THEN
      RAISE EXCEPTION &#39;You cannot change the User Name.&#39;;
    END IF;
  END IF;

  IF (TG_OP = &#39;INSERT&#39; OR TG_OP = &#39;UPDATE&#39;) THEN
    SELECT emp_id, emp_usr_id INTO _empid, _empusrid
    FROM emp
    WHERE (emp_code=NEW.usr_username);

    IF (FOUND AND _empusrid IS NULL) THEN
      UPDATE emp SET emp_usr_id=NEW.usr_id WHERE (emp_id=_empid);
    ELSIF (FOUND AND _empusrid != NEW.usr_id) THEN
      RAISE EXCEPTION &#39;User Name % is already in use by an Employee.&#39;,
        NEW.usr_username;
    ELSIF (NOT FOUND) THEN
      SELECT emp_code, emp_id INTO _empcode, _empid
      FROM emp WHERE emp_usr_id=NEW.usr_id;
      IF (FOUND) THEN
        UPDATE emp SET emp_code=NEW.usr_username WHERE (emp_id=_empid);
      END IF;
    END IF;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-usrprivtrigger">_usrprivtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _check BOOLEAN;
  _returnVal INTEGER;
BEGIN
  -- This looks like a candidate for a foreign key but isn&#39;t.
  -- fkeys don&#39;t work if the foreign key value resides in a child of the 
  -- table and not the table itself.
  IF ((TG_OP = &#39;UPDATE&#39; OR TG_OP = &#39;INSERT&#39;) AND
      (NOT EXISTS(SELECT priv_id
                  FROM priv
                  WHERE (priv_id=NEW.usrpriv_priv_id)))) THEN
    RAISE EXCEPTION &#39;Privilege id % does not exist or is part of a disabled package.&#39;,
                NEW.usrpriv_priv_id;
    RETURN OLD;

  ELSIF (TG_OP = &#39;DELETE&#39;) THEN
    RETURN OLD;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-vendaddrtrigger">_vendaddrtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _check      BOOLEAN;
  _vendname   TEXT;

BEGIN

--  Checks
  SELECT checkPrivilege(&#39;MaintainVendors&#39;) INTO _check;
  IF NOT (_check) THEN
    RAISE EXCEPTION &#39;You do not have privileges to maintain Vendors.&#39;;
  END IF;

  IF (TG_OP IN (&#39;INSERT&#39;,&#39;UPDATE&#39;)) THEN

    IF (LENGTH(COALESCE(NEW.vendaddr_code, &#39;&#39;))=0) THEN
      RAISE EXCEPTION &#39;You must supply a valid Vendor Address Number.&#39;;
    END IF;

    IF (LENGTH(COALESCE(NEW.vendaddr_name, &#39;&#39;))=0) THEN
      RAISE EXCEPTION &#39;You must supply a valid Vendor Address Name.&#39;;
    END IF;

    IF (NEW.vendaddr_vend_id IS NULL) THEN
      RAISE EXCEPTION &#39;You must supply a valid Vendor ID.&#39;;
    END IF;

    SELECT vendaddr_code INTO _vendname
    FROM vendaddrinfo
    WHERE ( (vendaddr_vend_id=NEW.vendaddr_vend_id)
      AND (UPPER(vendaddr_code)=UPPER(NEW.vendaddr_code))
      AND (vendaddr_id&lt;&gt;NEW.vendaddr_id) );
    IF (FOUND) THEN
      RAISE EXCEPTION &#39;The Vendor Address Number entered cannot be used as it is in use.&#39;;
    END IF;

  END IF;
  
  IF (TG_OP = &#39;DELETE&#39;) THEN
    RETURN OLD;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-vendaftertrigger">_vendaftertrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _crmacctid	INTEGER;
  _cmnttypeid   INTEGER;

BEGIN

  IF (TG_OP = &#39;INSERT&#39;) THEN
    SELECT crmacct_id INTO _crmacctid
    FROM crmacct
    WHERE crmacct_number=NEW.vend_number;
    IF (FOUND) THEN
      UPDATE crmacct 
      SET crmacct_vend_id=NEW.vend_id,crmacct_name=NEW.vend_name,crmacct_prospect_id=NULL
      WHERE crmacct_id=_crmacctid;
    ELSE
      PERFORM createCrmAcct(NEW.vend_number, NEW.vend_name, NEW.vend_active, &#39;O&#39;, NULL,
                            NULL, NULL, NULL, NEW.vend_id, NULL, NEW.vend_cntct1_id, NEW.vend_cntct2_id); 
    END IF;
  END IF;

  IF (TG_OP = &#39;UPDATE&#39;) THEN
    UPDATE crmacct SET crmacct_number = NEW.vend_number
    WHERE ( (crmacct_vend_id=NEW.vend_id)
      AND   (crmacct_number!=NEW.vend_number) );
    UPDATE crmacct SET crmacct_name = NEW.vend_name
    WHERE ( (crmacct_vend_id=NEW.vend_id)
      AND  (crmacct_name!=NEW.vend_name) );
  END IF;

  IF (fetchMetricBool(&#39;VendorChangeLog&#39;)) THEN

--  Cache the cmnttype_id for ChangeLog
    SELECT cmnttype_id INTO _cmnttypeid
    FROM cmnttype
    WHERE (cmnttype_name=&#39;ChangeLog&#39;);
    IF (FOUND) THEN
      IF (TG_OP = &#39;INSERT&#39;) THEN
        PERFORM postComment(_cmnttypeid, &#39;V&#39;, NEW.vend_id, &#39;Created&#39;);

      ELSIF (TG_OP = &#39;DELETE&#39;) THEN
	PERFORM postComment(_cmnttypeid, &#39;V&#39;, OLD.vend_id,
			    (&#39;Deleted &quot;&#39; || OLD.vend_number || &#39;&quot;&#39;));

      ELSIF (TG_OP = &#39;UPDATE&#39;) THEN

--  Handle vend_number
        IF (OLD.vend_number &lt;&gt; NEW.vend_number) THEN
          PERFORM postComment( _cmnttypeid, &#39;V&#39;, NEW.vend_id,
                               (&#39;Number Changed from &quot;&#39; || OLD.vend_number || &#39;&quot; to &quot;&#39; || NEW.vend_number || &#39;&quot;&#39;) );
        END IF;

        IF (OLD.vend_name &lt;&gt; NEW.vend_name) THEN
          PERFORM postComment( _cmnttypeid, &#39;V&#39;, NEW.vend_id,
                               (&#39;Name Changed from &quot;&#39; || OLD.vend_name || &#39;&quot; to &quot;&#39; || NEW.vend_name || &#39;&quot;&#39;) );
        END IF;

--  Handle vend_active
        IF (OLD.vend_active &lt;&gt; NEW.vend_active) THEN
          IF (NEW.vend_active) THEN
            PERFORM postComment(_cmnttypeid, &#39;V&#39;, NEW.vend_id, &#39;Activated&#39;);
          ELSE
            PERFORM postComment(_cmnttypeid, &#39;V&#39;, NEW.vend_id, &#39;Deactivated&#39;);
          END IF;
        END IF;
      END IF;
    END IF;
  END IF;

  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-vendtrigger">_vendtrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _check      BOOLEAN;
  _vendname   TEXT;
  _crmacctid  INTEGER;

BEGIN

--  Checks
  SELECT checkPrivilege(&#39;MaintainVendors&#39;) INTO _check;
  IF NOT (_check) THEN
    RAISE EXCEPTION &#39;You do not have privileges to maintain Vendors.&#39;;
  END IF;

  IF (TG_OP IN (&#39;INSERT&#39;,&#39;UPDATE&#39;)) THEN

    IF (LENGTH(COALESCE(NEW.vend_number, &#39;&#39;))=0) THEN
      RAISE EXCEPTION &#39;You must supply a valid Vendor Number.&#39;;
    END IF;

    IF (LENGTH(COALESCE(NEW.vend_name, &#39;&#39;))=0) THEN
      RAISE EXCEPTION &#39;You must supply a valid Vendor Name.&#39;;
    END IF;

    IF (NEW.vend_vendtype_id IS NULL) THEN
      RAISE EXCEPTION &#39;You must supply a valid Vendor Type ID.&#39;;
    END IF;

    IF (NEW.vend_terms_id IS NULL) THEN
      RAISE EXCEPTION &#39;You must supply a valid Terms Code ID.&#39;;
    END IF;

    SELECT vend_name INTO _vendname
    FROM vendinfo
    WHERE ( (UPPER(vend_number)=UPPER(NEW.vend_number))
      AND   (vend_id&lt;&gt;NEW.vend_id) );
    IF (FOUND) THEN
      RAISE EXCEPTION &#39;The Vendor Number entered cannot be used as it is in use by Vendor %.&#39;, _vendname;
    END IF;

    SELECT crmacct_id INTO _crmacctid
    FROM crmacct
    WHERE crmacct_vend_id = NEW.vend_id;

    IF (crmAcctNumberUsed(NEW.vend_number, _crmacctid)) THEN
      RAISE EXCEPTION &#39;Vendor Number % is already in use by another CRM entity&#39;, NEW.vend_number;
    END IF;

  END IF;

  IF (TG_OP = &#39;DELETE&#39;) THEN
    UPDATE crmacct SET crmacct_vend_id = NULL WHERE crmacct_vend_id = OLD.vend_id;
    RETURN OLD;
  END IF;
  
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-warehoustrigger">_warehoustrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _cmnttypeid INTEGER;
  _check      BOOLEAN;
  _checkId    INTEGER;

BEGIN

  -- Checks
  -- Start with privileges
  IF (TG_OP = &#39;INSERT&#39;) THEN
    SELECT checkPrivilege(&#39;MaintainWarehouses&#39;) INTO _check;
    IF NOT (_check) THEN
      RAISE EXCEPTION &#39;You do not have privileges to add new Sites.&#39;;
    END IF;
  ELSE
    SELECT checkPrivilege(&#39;MaintainWarehouses&#39;) OR checkPrivilege(&#39;IssueCountTags&#39;) INTO _check;
    IF NOT (_check) THEN
      RAISE EXCEPTION &#39;You do not have privileges to alter a Site.&#39;;
    END IF;
  END IF;

  -- Code is required
  IF (LENGTH(COALESCE(NEW.warehous_code,&#39;&#39;))=0) THEN
    RAISE EXCEPTION &#39;You must supply a valid Site Code.&#39;;
  END IF;
  
  -- Sitetype is required
  IF (NEW.warehous_sitetype_id IS NULL) THEN
    RAISE EXCEPTION &#39;You must supply a valid Site Type.&#39;;
  END IF;

  -- GL Account is required
  IF (NEW.warehous_default_accnt_id IS NULL) THEN
    RAISE EXCEPTION &#39;You must supply a valid Default GL Account.&#39;;
  END IF;

  -- Cost Category is required for Transit types
  IF ((NEW.warehous_transit) AND (NEW.warehous_costcat_id IS NULL)) THEN
    RAISE EXCEPTION &#39;You must supply a valid Cost Category for Transit Sites.&#39;;
  END IF;

  -- Code must be unique
  SELECT warehous_id INTO _checkId
  FROM whsinfo
  WHERE ( (UPPER(warehous_code)=UPPER(NEW.warehous_code))
    AND   (warehous_id&lt;&gt;NEW.warehous_id) );
  IF (FOUND) THEN
    RAISE EXCEPTION &#39;You must supply a unique Site Code.&#39;;
  END IF;
  
  -- Count Tag Prefix must be unique
  IF (TG_OP = &#39;INSERT&#39;) THEN
    SELECT warehous_id INTO _checkId
    FROM whsinfo
    WHERE (warehous_counttag_prefix=NEW.warehous_counttag_prefix);
  ELSE
    SELECT warehous_id INTO _checkId
    FROM whsinfo
    WHERE ( (warehous_counttag_prefix=NEW.warehous_counttag_prefix)
      AND   (warehous_id&lt;&gt;NEW.warehous_id) );
  END IF;
  IF (FOUND) THEN
    RAISE EXCEPTION &#39;You must supply a unique Count Tag Prefix.&#39;;
  END IF;
  
  -- Check Complete
  -- Change Log
  IF ( SELECT (metric_value=&#39;t&#39;)
       FROM metric
       WHERE (metric_name=&#39;WarehouseChangeLog&#39;) ) THEN

--  Cache the cmnttype_id for ChangeLog
    SELECT cmnttype_id INTO _cmnttypeid
    FROM cmnttype
    WHERE (cmnttype_name=&#39;ChangeLog&#39;);
    IF (FOUND) THEN
      IF (TG_OP = &#39;INSERT&#39;) THEN
        PERFORM postComment(_cmnttypeid, &#39;WH&#39;, NEW.warehous_id, &#39;Created&#39;);

      ELSIF (TG_OP = &#39;UPDATE&#39;) THEN
        IF (OLD.warehous_code &lt;&gt; NEW.warehous_code) THEN
          PERFORM postComment( _cmnttypeid, &#39;WH&#39;, NEW.warehous_id,
                               (&#39;Code Changed from &quot;&#39; || OLD.warehous_code || &#39;&quot; to &quot;&#39; || NEW.warehous_code || &#39;&quot;&#39;) );
        END IF;

        IF (OLD.warehous_descrip &lt;&gt; NEW.warehous_descrip) THEN
          PERFORM postComment( _cmnttypeid, &#39;WH&#39;, NEW.warehous_id,
                               ( &#39;Description Changed from &quot;&#39; || OLD.warehous_descrip ||
                                 &#39;&quot; to &quot;&#39; || NEW.warehous_descrip || &#39;&quot;&#39; ) );
        END IF;

        IF (OLD.warehous_active &lt;&gt; NEW.warehous_active) THEN
          IF (NEW.warehous_active) THEN
            PERFORM postComment(_cmnttypeid, &#39;WH&#39;, NEW.warehous_id, &#39;Activated&#39;);
          ELSE
            PERFORM postComment(_cmnttypeid, &#39;WH&#39;, NEW.warehous_id, &#39;Deactivated&#39;);
          END IF;
        END IF;

      END IF;
    END IF;
  END IF;
  
  RETURN NEW;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-whsezonetrigger">_whsezonetrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _check      BOOLEAN;
  _checkId    INTEGER;

BEGIN

  -- Checks
  -- Start with privileges
  IF (TG_OP = &#39;INSERT&#39;) THEN
    SELECT checkPrivilege(&#39;MaintainWarehouses&#39;) INTO _check;
    IF NOT (_check) THEN
      RAISE EXCEPTION &#39;You do not have privileges to add new Site Zones.&#39;;
    END IF;
  ELSE
    SELECT checkPrivilege(&#39;MaintainWarehouses&#39;) INTO _check;
    IF NOT (_check) THEN
      RAISE EXCEPTION &#39;You do not have privileges to alter a Site Zone.&#39;;
    END IF;
  END IF;

  -- Name is required
  IF (LENGTH(COALESCE(NEW.whsezone_name,&#39;&#39;))=0) THEN
    RAISE EXCEPTION &#39;You must supply a valid Site Zone Name.&#39;;
  END IF;
  
  -- Site is required
  IF (NEW.whsezone_warehous_id IS NULL) THEN
    RAISE EXCEPTION &#39;You must supply a valid Site.&#39;;
  END IF;

  RETURN NEW;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.-wotrigger">_wotrigger(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _cmnttypeid INTEGER;

BEGIN

  IF ( SELECT (metric_value=&#39;t&#39;)
       FROM metric
       WHERE (metric_name=&#39;WorkOrderChangeLog&#39;) ) THEN
--  Cache the cmnttype_id for ChangeLog
    SELECT cmnttype_id INTO _cmnttypeid
    FROM cmnttype
    WHERE (cmnttype_name=&#39;ChangeLog&#39;);
  ELSE
    _cmnttypeid := -1;
  END IF;

  IF (TG_OP = &#39;INSERT&#39;) THEN
    INSERT INTO evntlog ( evntlog_evnttime, evntlog_username, evntlog_evnttype_id,
                         evntlog_ordtype, evntlog_ord_id, evntlog_warehous_id, evntlog_number )
    SELECT CURRENT_TIMESTAMP, evntnot_username, evnttype_id,
           &#39;W&#39;, NEW.wo_id, itemsite_warehous_id, (NEW.wo_number || &#39;-&#39; || NEW.wo_subnumber) 
    FROM evntnot, evnttype, itemsite, item
    WHERE ( (evntnot_evnttype_id=evnttype_id)
     AND (evntnot_warehous_id=itemsite_warehous_id)
     AND (itemsite_id=NEW.wo_itemsite_id)
     AND (itemsite_item_id=item_id)
     AND (NEW.wo_duedate &lt;= (CURRENT_DATE + itemsite_eventfence))
     AND (evnttype_name=&#39;WoCreated&#39;) );

     IF (_cmnttypeid &lt;&gt; -1) THEN
       PERFORM postComment(_cmnttypeid, &#39;W&#39;, NEW.wo_id, &#39;Created&#39;);
     END IF;

     RETURN NEW;

  ELSE
    IF (TG_OP = &#39;DELETE&#39;) THEN
      INSERT INTO evntlog ( evntlog_evnttime, evntlog_username, evntlog_evnttype_id,
                            evntlog_ordtype, evntlog_ord_id, evntlog_warehous_id, evntlog_number )
      SELECT CURRENT_TIMESTAMP, evntnot_username, evnttype_id,
             &#39;W&#39;, OLD.wo_id, itemsite_warehous_id, (OLD.wo_number || &#39;-&#39; || OLD.wo_subnumber) 
      FROM evntnot, evnttype, itemsite, item
      WHERE ( (evntnot_evnttype_id=evnttype_id)
       AND (evntnot_warehous_id=itemsite_warehous_id)
       AND (itemsite_id=OLD.wo_itemsite_id)
       AND (itemsite_item_id=item_id)
       AND (OLD.wo_duedate &lt;= (CURRENT_DATE + itemsite_eventfence))
       AND (evnttype_name=&#39;WoCancelled&#39;) );

      DELETE FROM comment
      WHERE ( (comment_source=&#39;W&#39;)
       AND (comment_source_id=OLD.wo_id) );

      DELETE FROM charass
       WHERE ((charass_target_type=&#39;W&#39;)
         AND  (charass_target_id=OLD.wo_id));

       RETURN OLD;

    ELSE
      IF (TG_OP = &#39;UPDATE&#39;) THEN

        IF (NEW.wo_qtyord &lt;&gt; OLD.wo_qtyord) THEN
          INSERT INTO evntlog ( evntlog_evnttime, evntlog_username, evntlog_evnttype_id,
                                evntlog_ordtype, evntlog_ord_id, evntlog_warehous_id, evntlog_number,
                                evntlog_oldvalue, evntlog_newvalue )
          SELECT CURRENT_TIMESTAMP, evntnot_username, evnttype_id,
                 &#39;W&#39;, NEW.wo_id, itemsite_warehous_id, (NEW.wo_number || &#39;-&#39; || NEW.wo_subnumber),
                 OLD.wo_qtyord, NEW.wo_qtyord
          FROM evntnot, evnttype, itemsite, item
          WHERE ( (evntnot_evnttype_id=evnttype_id)
           AND (evntnot_warehous_id=itemsite_warehous_id)
           AND (itemsite_id=NEW.wo_itemsite_id)
           AND (itemsite_item_id=item_id)
           AND ( (NEW.wo_duedate &lt;= (CURRENT_DATE + itemsite_eventfence))
            OR   (OLD.wo_duedate &lt;= (CURRENT_DATE + itemsite_eventfence)) )
           AND (evnttype_name=&#39;WoQtyChanged&#39;) );

          IF (_cmnttypeid &lt;&gt; -1) THEN
            PERFORM postComment( _cmnttypeid, &#39;W&#39;, NEW.wo_id,
                                 ( &#39;Qty. Ordered Changed from &#39; || formatQty(OLD.wo_qtyord) ||
                                   &#39; to &#39; || formatQty(NEW.wo_qtyord ) ) );
          END IF;
        END IF;

        IF (NEW.wo_duedate &lt;&gt; OLD.wo_duedate) THEN
          INSERT INTO evntlog ( evntlog_evnttime, evntlog_username, evntlog_evnttype_id,
                                evntlog_ordtype, evntlog_ord_id, evntlog_warehous_id, evntlog_number,
                                evntlog_olddate, evntlog_newdate )
          SELECT CURRENT_TIMESTAMP, evntnot_username, evnttype_id,
                 &#39;W&#39;, NEW.wo_id, itemsite_warehous_id, (NEW.wo_number || &#39;-&#39; || NEW.wo_subnumber),
                 OLD.wo_duedate, NEW.wo_duedate
          FROM evntnot, evnttype, itemsite, item
          WHERE ( (evntnot_evnttype_id=evnttype_id)
           AND (evntnot_warehous_id=itemsite_warehous_id)
           AND (itemsite_id=NEW.wo_itemsite_id)
           AND (itemsite_item_id=item_id)
           AND ( (NEW.wo_duedate &lt;= (CURRENT_DATE + itemsite_eventfence))
            OR   (OLD.wo_duedate &lt;= (CURRENT_DATE + itemsite_eventfence)) )
           AND (evnttype_name=&#39;WoDueDateChanged&#39;) );

          IF (_cmnttypeid &lt;&gt; -1) THEN
            PERFORM postComment( _cmnttypeid, &#39;W&#39;, NEW.wo_id,
                                 ( &#39;Due Date Changed from &#39; || formatDate(OLD.wo_duedate) ||
                                   &#39; to &#39; || formatDate(NEW.wo_duedate ) ) );
          END IF;
        END IF;

        IF (NEW.wo_status &lt;&gt; OLD.wo_status) THEN
          IF (_cmnttypeid &lt;&gt; -1) THEN
            PERFORM postComment( _cmnttypeid, &#39;W&#39;, NEW.wo_id,
                                 (&#39;Status Changed from &#39; || OLD.wo_status || &#39; to &#39; || NEW.wo_status) );
          END IF;
        END IF;

      END IF; 
    END IF;
  END IF;

  RETURN NEW;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.acknowledgemessage-integer">acknowledgemessage( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pMsgid ALIAS FOR $1;

BEGIN

  UPDATE msguser
  SET msguser_viewed=CURRENT_TIMESTAMP
  WHERE ( (msguser_msg_id=pMsgid)
   AND (msguser_username=CURRENT_USER) );

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.actcost-integer">actcost( integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  _cost NUMERIC;

BEGIN
  RETURN actCost(pItemid, baseCurrId());
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.actcost-integer-integer">actcost( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pCurrid ALIAS FOR $2;
  _cost NUMERIC;

BEGIN

  -- Return actual cost in the given currency at the current conversion rate
  SELECT SUM(currToCurr(itemcost_curr_id, pCurrid, itemcost_actcost, CURRENT_DATE)) INTO _cost
  FROM itemcost
  WHERE (itemcost_item_id=pItemid);

  IF (_cost IS NULL) THEN
    RETURN 0;
  ELSE
    RETURN _cost;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.addtaxtoglseries-integer-integer-text-text-text-date-date-integer-numeric-numeric-numeric-text">addtaxtoglseries( integer, integer, text, text, text, date, date, integer, numeric, numeric, numeric, text )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    pSequence	ALIAS FOR $1;
    pTaxCurrId	ALIAS FOR $2;
    pSource	ALIAS FOR $3;
    pDocType	ALIAS FOR $4;
    pDocNumber	ALIAS FOR $5;
    pGLDate	ALIAS FOR $6;
    pExchDate	ALIAS FOR $7;
    pTaxId	ALIAS FOR $8;
    pAvalue	ALIAS FOR $9;
    pBvalue	ALIAS FOR $10;
    pCvalue	ALIAS FOR $11;
    pNotes	ALIAS FOR $12;

    _count	INTEGER;
    _returnVal	NUMERIC;
    _t		RECORD;
    _test	INTEGER;
  BEGIN
    _count := 0;
    _returnVal := 0;

    -- if there&#39;s no tax then there&#39;s nothing to add
    IF (COALESCE(pAvalue,0) = 0
        AND COALESCE(pBvalue,0) = 0
        AND COALESCE(pCvalue,0) = 0) THEN
      RETURN 0;
    -- if there IS tax but no tax_id to use for account lookup then fail
    ELSIF (pTaxId IS NULL) THEN
      RETURN NULL;
    END IF;

    FOR _t in SELECT tax_sales_accnt_id AS tax_accnt_id,
		     currToBase(pTaxCurrId, pAvalue, pExchDate) AS tax_baseval
	      FROM tax
	      WHERE tax_id=pTaxId
	        AND pAvalue &lt;&gt; 0
	      UNION
	      SELECT tax_salesb_accnt_id AS tax_accnt_id,
		     currToBase(pTaxCurrId, pBvalue, pExchDate) AS tax_baseval
	      FROM tax
	      WHERE tax_id=pTaxId
	        AND pBvalue &lt;&gt; 0
	      UNION
	      SELECT tax_salesc_accnt_id AS tax_accnt_id,
		     currToBase(pTaxCurrId, pCvalue, pExchDate) AS tax_baseval
	      FROM tax
	      WHERE tax_id=pTaxId
	        AND pCvalue &lt;&gt; 0 LOOP
      _count := _count + 1;
      IF (_t.tax_accnt_id IS NOT NULL AND _t.tax_accnt_id &gt; 0) THEN
	_t.tax_baseval := ROUND(_t.tax_baseval, 2);
	SELECT insertIntoGLSeries( pSequence, pSource, pDocType, pDocNumber,
				   _t.tax_accnt_id, _t.tax_baseval,
				   pGLDate, pNotes ) INTO _test;
	IF (_test &lt; 0) THEN
	  RETURN NULL;	-- error: insertIntoGLSeries failed
	END IF;
	_returnVal := _returnVal + _t.tax_baseval;
      END IF;
    END LOOP;

    IF (_count = 0 AND (pAvalue + pBvalue + pCvalue) &lt;&gt; 0) THEN
      RETURN NULL; -- error: if there is a tax value then we must find the accounts
    END IF;

    RETURN _returnVal;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.addtopackinglistbatch-integer">addtopackinglistbatch( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSoheadid	ALIAS FOR $1;
  returnVal	INTEGER;
BEGIN

  -- MIN because error codes are negative
  SELECT MIN(addToPackingListBatch(&#39;SO&#39;, pSoheadid, shiphead_id)) INTO returnVal
  FROM shiphead
  WHERE ((shiphead_order_id=pSoheadid)
    AND  (NOT shiphead_shipped)
    AND  (shiphead_order_type=&#39;SO&#39;));
  IF (NOT FOUND OR returnVal IS NULL) THEN
    returnVal := addToPackingListBatch(&#39;SO&#39;, pSoheadid, NULL);
  END IF;

  RETURN returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.addtopackinglistbatch-integer-integer">addtopackinglistbatch( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN addToPackingListBatch(&#39;SO&#39;, $1, $2);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.addtopackinglistbatch-text-integer">addtopackinglistbatch( text, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pheadtype	ALIAS FOR $1;
  pheadid	ALIAS FOR $2;
  returnVal	INTEGER;
BEGIN
  -- MIN because error codes are negative
  SELECT MIN(addToPackingListBatch(pheadtype, pheadid, shiphead_id)) INTO returnVal
  FROM shiphead
  WHERE ((shiphead_order_id=pheadid)
    AND  (NOT shiphead_shipped)
    AND  (shiphead_order_type=pheadtype));

  IF (NOT FOUND OR returnVal IS NULL) THEN
    returnVal := addToPackingListBatch(pheadtype, pheadid, NULL);
  END IF;

  RETURN returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.addtopackinglistbatch-text-integer-integer">addtopackinglistbatch( text, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pheadtype	ALIAS FOR $1;
  pheadid	ALIAS FOR $2;
  pshipheadid	ALIAS FOR $3;
  _check INTEGER;

BEGIN
  SELECT pack_id INTO _check
  FROM pack
  WHERE ((pack_head_id=pheadid)
    AND  ((pack_shiphead_id=pshipheadid) OR 
	  (pshipheadid IS NULL AND pack_shiphead_id IS NULL))
    AND  (pack_head_type=pheadtype)
	);

  IF (NOT FOUND) THEN
    INSERT INTO pack
    ( pack_head_type, pack_head_id, pack_shiphead_id, pack_printed )
    VALUES
    ( pheadtype, pheadid, pshipheadid, FALSE );
    -- Auto Firm Sales Orders conditionally based on metric
    IF ( (pheadtype = &#39;SO&#39;) AND (fetchMetricBool(&#39;FirmSalesOrderPackingList&#39;)) ) THEN
      UPDATE coitem SET coitem_firm=TRUE
      WHERE (coitem_cohead_id=pheadid);
    END IF; 
  END IF;

  RETURN pheadid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.adjustments-text">adjustments( text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTransType ALIAS FOR $1;

BEGIN
  IF (pTransType IN (&#39;CC&#39;, &#39;AD&#39;)) THEN
    RETURN TRUE;
  ELSE
    RETURN FALSE;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.allocatedforso-integer-date">allocatedforso( integer, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pDate ALIAS FOR $2;

BEGIN

  RETURN allocatedForSo(pItemsiteid, startOfTime(), pDate);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.allocatedforso-integer-date-date">allocatedforso( integer, date, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pStartDate ALIAS FOR $2;
  pEndDate ALIAS FOR $3;
  _qty NUMERIC;

BEGIN

  SELECT COALESCE(SUM(noNeg(itemuomtouom(itemsite_item_id, coitem_qty_uom_id, NULL, coitem_qtyord - (coitem_qtyshipped + qtyAtShipping(coitem_id)) + coitem_qtyreturned))), 0.0) INTO _qty
  FROM coitem, itemsite, item
  WHERE ( (coitem_itemsite_id=itemsite_id)
    AND (itemsite_item_id=item_id)
    AND (coitem_status=&#39;O&#39;)
    AND (coitem_itemsite_id=pItemsiteid)
    AND (coitem_scheddate BETWEEN pStartDate AND pEndDate) );

  RETURN _qty;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.allocatedforso-integer-integer">allocatedforso( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pDate ALIAS FOR $2;

BEGIN

  RETURN allocatedForSo(pItemsiteid, startOfTime(), (CURRENT_DATE + pDate));

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.allocatedforwo-integer-date">allocatedforwo( integer, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pDate ALIAS FOR $2;

BEGIN

  RETURN allocatedForWo(pItemsiteid, startOfTime(), pDate);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.allocatedforwo-integer-date-date">allocatedforwo( integer, date, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pStartDate ALIAS FOR $2;
  pEndDate ALIAS FOR $3;
  _qty NUMERIC;

BEGIN

  SELECT COALESCE(SUM(noNeg(itemuomtouom(itemsite_item_id, womatl_uom_id, NULL, womatl_qtyreq - womatl_qtyiss))), 0.0) INTO _qty
  FROM wo, womatl, itemsite
  WHERE ( (womatl_itemsite_id=pItemsiteid)
   AND (womatl_itemsite_id=itemsite_id)
   AND (womatl_duedate BETWEEN pStartDate AND pEndDate) 
   AND (wo_id=womatl_wo_id)
   AND (wo_status IN (&#39;E&#39;,&#39;I&#39;,&#39;R&#39;)) );

  RETURN _qty;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.allocatedforwo-integer-integer">allocatedforwo( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pLookAheadDays ALIAS FOR $2;

BEGIN

  RETURN allocatedForWo(pItemsiteid, startOfTime(), (CURRENT_DATE + pLookaheadDays));

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.alterencrypt-text-text">alterencrypt( text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pOldKey ALIAS FOR $1;
  pNewKey ALIAS FOR $2;
  _cc RECORD;
  _ccaud RECORD;
  _metricenc RECORD;
  num_updated INTEGER;

BEGIN

  num_updated := 0;

-- Update ccard

  FOR _cc IN SELECT ccard_id, 
             decrypt(setbytea(ccard_name), setbytea(pOldKey), &#39;bf&#39;) AS ccard_name,
             decrypt(setbytea(ccard_address1), setbytea(pOldKey), &#39;bf&#39;) AS ccard_address1,
             decrypt(setbytea(ccard_address2), setbytea(pOldKey), &#39;bf&#39;) AS ccard_address2,
             decrypt(setbytea(ccard_city), setbytea(pOldKey), &#39;bf&#39;) AS ccard_city,
             decrypt(setbytea(ccard_state), setbytea(pOldKey), &#39;bf&#39;) AS ccard_state,
             decrypt(setbytea(ccard_zip), setbytea(pOldKey), &#39;bf&#39;) AS ccard_zip,
             decrypt(setbytea(ccard_country), setbytea(pOldKey), &#39;bf&#39;) AS ccard_country,
             decrypt(setbytea(ccard_number), setbytea(pOldKey), &#39;bf&#39;) AS ccard_number,
             decrypt(setbytea(ccard_month_expired), setbytea(pOldKey), &#39;bf&#39;) AS ccard_month_expired,
             decrypt(setbytea(ccard_year_expired), setbytea(pOldKey), &#39;bf&#39;) AS ccard_year_expired
      FROM ccard LOOP

      UPDATE ccard
             set ccard_name = encrypt(setbytea(_cc.ccard_name), setbytea(pNewKey), &#39;bf&#39;),
                 ccard_address1 = encrypt(setbytea(_cc.ccard_address1), setbytea(pNewKey), &#39;bf&#39;),
                 ccard_address2 = encrypt(setbytea(_cc.ccard_address2), setbytea(pNewKey), &#39;bf&#39;),
                 ccard_city = encrypt(setbytea(_cc.ccard_city), setbytea(pNewKey), &#39;bf&#39;),
                 ccard_state = encrypt(setbytea(_cc.ccard_state), setbytea(pNewKey), &#39;bf&#39;),
                 ccard_zip = encrypt(setbytea(_cc.ccard_zip), setbytea(pNewKey), &#39;bf&#39;),
                 ccard_country = encrypt(setbytea(_cc.ccard_country), setbytea(pNewKey), &#39;bf&#39;),
                 ccard_number = encrypt(setbytea(_cc.ccard_number), setbytea(pNewKey), &#39;bf&#39;),
                 ccard_month_expired = encrypt(setbytea(_cc.ccard_month_expired), setbytea(pNewKey), &#39;bf&#39;),
                 ccard_year_expired = encrypt(setbytea(_cc.ccard_year_expired), setbytea(pNewKey), &#39;bf&#39;)
      WHERE ccard_id = _cc.ccard_id;

      num_updated := num_updated + 1;

  END LOOP;

-- Update ccardaud

  FOR _ccaud IN SELECT ccardaud_id, 
             decrypt(setbytea(ccardaud_ccard_name_old), setbytea(pOldKey), &#39;bf&#39;) AS ccardaud_ccard_name_old,
             decrypt(setbytea(ccardaud_ccard_name_new), setbytea(pOldKey), &#39;bf&#39;) AS ccardaud_ccard_name_new,
             decrypt(setbytea(ccardaud_ccard_address1_old), setbytea(pOldKey), &#39;bf&#39;) AS ccardaud_ccard_address1_old,
             decrypt(setbytea(ccardaud_ccard_address1_new), setbytea(pOldKey), &#39;bf&#39;) AS ccardaud_ccard_address1_new,
             decrypt(setbytea(ccardaud_ccard_address2_old), setbytea(pOldKey), &#39;bf&#39;) AS ccardaud_ccard_address2_old,
             decrypt(setbytea(ccardaud_ccard_address2_new), setbytea(pOldKey), &#39;bf&#39;) AS ccardaud_ccard_address2_new,
             decrypt(setbytea(ccardaud_ccard_city_old), setbytea(pOldKey), &#39;bf&#39;) AS ccardaud_ccard_city_old,
             decrypt(setbytea(ccardaud_ccard_city_new), setbytea(pOldKey), &#39;bf&#39;) AS ccardaud_ccard_city_new,
             decrypt(setbytea(ccardaud_ccard_state_old), setbytea(pOldKey), &#39;bf&#39;) AS ccardaud_ccard_state_old,
             decrypt(setbytea(ccardaud_ccard_state_new), setbytea(pOldKey), &#39;bf&#39;) AS ccardaud_ccard_state_new,
             decrypt(setbytea(ccardaud_ccard_zip_old), setbytea(pOldKey), &#39;bf&#39;) AS ccardaud_ccard_zip_old,
             decrypt(setbytea(ccardaud_ccard_zip_new), setbytea(pOldKey), &#39;bf&#39;) AS ccardaud_ccard_zip_new,
             decrypt(setbytea(ccardaud_ccard_country_old), setbytea(pOldKey), &#39;bf&#39;) AS ccardaud_ccard_country_old,
             decrypt(setbytea(ccardaud_ccard_country_new), setbytea(pOldKey), &#39;bf&#39;) AS ccardaud_ccard_country_new,
             decrypt(setbytea(ccardaud_ccard_number_old), setbytea(pOldKey), &#39;bf&#39;) AS ccardaud_ccard_number_old,
             decrypt(setbytea(ccardaud_ccard_number_new), setbytea(pOldKey), &#39;bf&#39;) AS ccardaud_ccard_number_new,
             decrypt(setbytea(ccardaud_ccard_month_expired_old), setbytea(pOldKey), &#39;bf&#39;) AS ccardaud_ccard_month_expired_old,
             decrypt(setbytea(ccardaud_ccard_month_expired_new), setbytea(pOldKey), &#39;bf&#39;) AS ccardaud_ccard_month_expired_new,
             decrypt(setbytea(ccardaud_ccard_year_expired_old), setbytea(pOldKey), &#39;bf&#39;) AS ccardaud_ccard_year_expired_old,
             decrypt(setbytea(ccardaud_ccard_year_expired_new), setbytea(pOldKey), &#39;bf&#39;) AS ccardaud_ccard_year_expired_new
      FROM ccardaud LOOP

      UPDATE ccardaud
             set ccardaud_ccard_name_old = encrypt(setbytea(_ccaud.ccardaud_ccard_name_old), setbytea(pNewKey), &#39;bf&#39;),
                 ccardaud_ccard_name_new = encrypt(setbytea(_ccaud.ccardaud_ccard_name_new), setbytea(pNewKey), &#39;bf&#39;),
                 ccardaud_ccard_address1_old = encrypt(setbytea(_ccaud.ccardaud_ccard_address1_old), setbytea(pNewKey), &#39;bf&#39;),
                 ccardaud_ccard_address1_new = encrypt(setbytea(_ccaud.ccardaud_ccard_address1_new), setbytea(pNewKey), &#39;bf&#39;),
                 ccardaud_ccard_address2_old = encrypt(setbytea(_ccaud.ccardaud_ccard_address2_old), setbytea(pNewKey), &#39;bf&#39;),
                 ccardaud_ccard_address2_new = encrypt(setbytea(_ccaud.ccardaud_ccard_address2_new), setbytea(pNewKey), &#39;bf&#39;),
                 ccardaud_ccard_city_old = encrypt(setbytea(_ccaud.ccardaud_ccard_city_old), setbytea(pNewKey), &#39;bf&#39;),
                 ccardaud_ccard_city_new = encrypt(setbytea(_ccaud.ccardaud_ccard_city_new), setbytea(pNewKey), &#39;bf&#39;),
                 ccardaud_ccard_state_old = encrypt(setbytea(_ccaud.ccardaud_ccard_state_old), setbytea(pNewKey), &#39;bf&#39;),
                 ccardaud_ccard_state_new = encrypt(setbytea(_ccaud.ccardaud_ccard_state_new), setbytea(pNewKey), &#39;bf&#39;),
                 ccardaud_ccard_zip_old = encrypt(setbytea(_ccaud.ccardaud_ccard_zip_old), setbytea(pNewKey), &#39;bf&#39;),
                 ccardaud_ccard_zip_new = encrypt(setbytea(_ccaud.ccardaud_ccard_zip_new), setbytea(pNewKey), &#39;bf&#39;),
                 ccardaud_ccard_country_old = encrypt(setbytea(_ccaud.ccardaud_ccard_country_old), setbytea(pNewKey), &#39;bf&#39;),
                 ccardaud_ccard_country_new = encrypt(setbytea(_ccaud.ccardaud_ccard_country_new), setbytea(pNewKey), &#39;bf&#39;),
                 ccardaud_ccard_number_old = encrypt(setbytea(_ccaud.ccardaud_ccard_number_old), setbytea(pNewKey), &#39;bf&#39;),
                 ccardaud_ccard_number_new = encrypt(setbytea(_ccaud.ccardaud_ccard_number_new), setbytea(pNewKey), &#39;bf&#39;),
                 ccardaud_ccard_month_expired_old = encrypt(setbytea(_ccaud.ccardaud_ccard_month_expired_old), setbytea(pNewKey), &#39;bf&#39;),
                 ccardaud_ccard_month_expired_new = encrypt(setbytea(_ccaud.ccardaud_ccard_month_expired_new), setbytea(pNewKey), &#39;bf&#39;),
                 ccardaud_ccard_year_expired_old = encrypt(setbytea(_ccaud.ccardaud_ccard_year_expired_old), setbytea(pNewKey), &#39;bf&#39;),
                 ccardaud_ccard_year_expired_new = encrypt(setbytea(_ccaud.ccardaud_ccard_year_expired_new), setbytea(pNewKey), &#39;bf&#39;)
      WHERE ccardaud_id = _ccaud.ccardaud_id;

      num_updated := num_updated + 1;

  END LOOP;

-- Update metricenc

  FOR _metricenc IN SELECT metricenc_id, 
             decrypt(setbytea(metricenc_value), setbytea(pOldKey), &#39;bf&#39;) AS metricenc_value
      FROM metricenc LOOP

      UPDATE metricenc
             set metricenc_value = encrypt(setbytea(_metricenc.metricenc_value), setbytea(pNewKey), &#39;bf&#39;)
      WHERE metricenc_id = _metricenc.metricenc_id;

      num_updated := num_updated + 1;

  END LOOP;


  RETURN num_updated;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.apaging-date-boolean">apaging( date, boolean )</a>
		</h2>
<h3>Returns: SET OF apaging</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pAsOfDate ALIAS FOR $1;
  pUseDocDate ALIAS FOR $2;
  _row apaging%ROWTYPE;
  _x RECORD;
  _returnVal INTEGER;
  _asOfDate DATE;
BEGIN

  _asOfDate := COALESCE(pAsOfDate,current_date);

  FOR _x IN
        SELECT
        --report uses currency rate snapshot to convert all amounts to base based on apopen_docdate to ensure the same exchange rate

        --today and greater base:
        CASE WHEN((apopen_duedate &gt;= DATE(_asOfDate)))
        THEN (((apopen_amount-apopen_paid+COALESCE(SUM(apapply_target_paid),0)))/round(apopen_curr_rate,5) *
        CASE WHEN (apopen_doctype IN (&#39;D&#39;, &#39;V&#39;)) THEN 1 ELSE -1 END) ELSE 0 END AS cur_val,

        --0 to 30 base
        CASE WHEN((apopen_duedate &gt;= DATE(_asOfDate)-30) AND (apopen_duedate &lt; DATE(_asOfDate)))
        THEN (((apopen_amount-apopen_paid+COALESCE(SUM(apapply_target_paid),0)))/round(apopen_curr_rate,5) *
        CASE WHEN (apopen_doctype IN (&#39;D&#39;, &#39;V&#39;)) THEN 1 ELSE -1 END) ELSE 0 END AS thirty_val,

        --30-60 base
        CASE WHEN((apopen_duedate &gt;= DATE(_asOfDate)-60) AND (apopen_duedate &lt; DATE(_asOfDate) - 30 ))
        THEN (((apopen_amount-apopen_paid+COALESCE(SUM(apapply_target_paid),0)))/round(apopen_curr_rate,5) *
        CASE WHEN (apopen_doctype IN (&#39;D&#39;, &#39;V&#39;)) THEN 1 ELSE -1 END) ELSE 0 END AS sixty_val,

        --60-90 base
        CASE WHEN((apopen_duedate &gt;= DATE(_asOfDate)-90) AND (apopen_duedate &lt; DATE(_asOfDate) - 60))
        THEN (((apopen_amount-apopen_paid+COALESCE(SUM(apapply_target_paid),0)))/round(apopen_curr_rate,5) *
        CASE WHEN (apopen_doctype IN (&#39;D&#39;, &#39;V&#39;)) THEN 1 ELSE -1 END) ELSE 0 END AS ninety_val,

        --greater than 90 base:
        CASE WHEN((apopen_duedate &gt; DATE(_asOfDate)-10000) AND (apopen_duedate &lt; DATE(_asOfDate) - 90))
        THEN (((apopen_amount-apopen_paid + COALESCE(SUM(apapply_target_paid),0)))/round(apopen_curr_rate,5) *
        CASE WHEN (apopen_doctype IN (&#39;D&#39;, &#39;V&#39;)) THEN 1 ELSE -1 END) ELSE 0 END AS plus_val,

        --total amount base:
        CASE WHEN((apopen_duedate &gt; DATE(_asOfDate)-10000))
        THEN (((apopen_amount-apopen_paid+COALESCE(SUM(apapply_target_paid),0)))/round(apopen_curr_rate,5) *
        CASE WHEN (apopen_doctype IN (&#39;D&#39;, &#39;V&#39;)) THEN 1 ELSE -1 END) ELSE 0 END AS total_val,

        --AR Open Amount base
        CASE WHEN apopen_doctype IN (&#39;C&#39;, &#39;R&#39;) 
        THEN (apopen_amount * -1) / round(apopen_curr_rate,5)
        ELSE apopen_amount / round(apopen_curr_rate,5) END AS apopen_amount,

        apopen_docdate,
        apopen_duedate,
        apopen_ponumber,
        apopen_docnumber,
        apopen_doctype,
        vend_id,
        vend_name,
        vend_number,
        vend_vendtype_id,
        vendtype_code,
        terms_descrip

        FROM vendinfo, vendtype, apopen
          LEFT OUTER JOIN terms ON (apopen_terms_id=terms_id)
          LEFT OUTER JOIN apapply ON (((apopen_id=apapply_target_apopen_id)
                                    OR (apopen_id=apapply_source_apopen_id))
                                   AND (apapply_postdate &gt;_asOfDate))
        WHERE ( (apopen_vend_id = vend_id)
        AND (vend_vendtype_id=vendtype_id)
        AND (CASE WHEN (pUseDocDate) THEN apopen_docdate ELSE apopen_distdate END &lt;= _asOfDate)
        AND (COALESCE(apopen_closedate,_asOfDate+1)&gt;_asOfDate) )
        GROUP BY apopen_id,apopen_docdate,apopen_duedate,apopen_ponumber,apopen_docnumber,apopen_doctype,apopen_paid,
                 apopen_curr_id,apopen_amount,vend_id,vend_name,vend_number,vend_vendtype_id,vendtype_code,terms_descrip,
                 apopen_curr_rate
        ORDER BY vend_number, apopen_duedate
  LOOP
        _row.apaging_docdate := _x.apopen_docdate;
        _row.apaging_duedate := _x.apopen_duedate;
        _row.apaging_ponumber := _x.apopen_ponumber;
        _row.apaging_docnumber := _x.apopen_docnumber;
        _row.apaging_doctype := _x.apopen_doctype;
        _row.apaging_vend_id := _x.vend_id;
        _row.apaging_vend_number := _x.vend_number;
        _row.apaging_vend_name := _x.vend_name;
        _row.apaging_vend_vendtype_id := _x.vend_vendtype_id;
        _row.apaging_vendtype_code := _x.vendtype_code;
        _row.apaging_terms_descrip := _x.terms_descrip;
        _row.apaging_apopen_amount := _x.apopen_amount;
        _row.apaging_cur_val := _x.cur_val;
        _row.apaging_thirty_val := _x.thirty_val;
        _row.apaging_sixty_val := _x.sixty_val;
        _row.apaging_ninety_val := _x.ninety_val;
        _row.apaging_plus_val := _x.plus_val;
        _row.apaging_total_val := _x.total_val;
        RETURN NEXT _row;
  END LOOP;
  RETURN;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.apapplied-integer-date">apapplied( integer, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pApopenid ALIAS FOR $1;
  pDate ALIAS FOR $2;
  _amount NUMERIC;

BEGIN

  -- Return amount applied to an apopen in base currency as of apapply_postdate
  SELECT SUM(currtobase(apapply_curr_id,apapply_amount,apapply_postdate)) INTO _amount
  FROM apapply
  WHERE (((apapply_target_apopen_id = pApopenid) OR (apapply_source_apopen_id = pApopenid))
  AND (((apapply_journalnumber=0) AND (apapply_postdate &lt;= pDate))
  OR EXISTS(SELECT * 
             FROM gltrans 
             WHERE ((gltrans_journalnumber=apapply_journalnumber)
             AND (gltrans_date &lt;= pDate)))));

  IF (_amount IS NULL) THEN
    RETURN 0;
  ELSE
    RETURN _amount;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.apcurrgain-integer-integer-numeric-date">apcurrgain( integer, integer, numeric, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
    DECLARE
	pApopenId ALIAS FOR $1;
        pCurrId ALIAS FOR $2;
	pValue ALIAS FOR $3;
	pDate ALIAS FOR $4;
        _start DATE;
	_end DATE;
	_gain NUMERIC;
        _r RECORD;

    BEGIN
	IF (pApopenId IS NULL OR pValue = 0) THEN
	    RETURN 0;
	END IF;

        SELECT apopen_docdate, apopen_curr_rate
          INTO _r
        FROM apopen
        WHERE (apopen_id=pApopenId);

	IF (_r.apopen_docdate &gt; pDate) THEN
	  _gain := currToBase(pCurrId, pValue, pDate) - pValue / round(_r.apopen_curr_rate,5) * -1;
	ELSE
          _gain := pValue / round(_r.apopen_curr_rate,5) - currToBase(pCurrId, pValue, pDate);
	END IF;
        
    	IF (_gain IS NULL) THEN
	    RAISE EXCEPTION &#39;Error processing currency gain/loss.&#39;;
	END IF;

	RETURN _gain;
    END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.applyapcreditmemotobalance-integer">applyapcreditmemotobalance( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pApopenid ALIAS FOR $1;
  _amount NUMERIC;
  _curr_id INTEGER;
  _curr_rate NUMERIC;
  _docdate DATE;
  _applyAmount NUMERIC;
  _r RECORD;
  _p RECORD;

BEGIN

--  Find the balance to apply
  SELECT (apopen_amount - apopen_paid - COALESCE(prepared,0.0) - COALESCE(selected,0.0) - COALESCE(SUM(currToCurr(apcreditapply_curr_id,
                                                  apopen_curr_id,
                                                  apcreditapply_amount,
                                                  apopen_docdate)), 0)),
          apopen_curr_id, round(apopen_curr_rate,5), apopen_docdate INTO _amount, _curr_id, _curr_rate, _docdate
  FROM apopen 
    LEFT OUTER JOIN apcreditapply ON (apcreditapply_source_apopen_id=apopen_id)
    LEFT OUTER JOIN (SELECT apopen_id AS selected_apopen_id,
                       SUM(currToCurr(apselect_curr_id, apopen_curr_id, apselect_amount + apselect_discount, apselect_date)) AS selected
                     FROM apselect JOIN apopen ON (apselect_apopen_id=apopen_id)
                     GROUP BY apopen_id) AS sub1 ON (apopen_id=selected_apopen_id)
    LEFT OUTER JOIN (SELECT apopen_id AS prepared_apopen_id,
                       SUM(checkitem_amount + checkitem_discount) AS prepared
                     FROM checkhead 
                       JOIN checkitem ON (checkitem_checkhead_id=checkhead_id)
                       JOIN apopen ON (checkitem_apopen_id=apopen_id)
                     WHERE ((NOT checkhead_posted)
                       AND  (NOT checkhead_void))
                     GROUP BY apopen_id) AS sub2 ON (prepared_apopen_id=apopen_id)
  WHERE (apopen_id=pApopenid)
  GROUP BY apopen_amount, apopen_paid, apopen_curr_id, apopen_curr_rate, apopen_docdate, prepared, selected;

  IF (_amount &lt; 0) THEN
    RETURN -1;
  END IF;

--  Loop through the apopen items in order of due date
  FOR _r IN SELECT target.apopen_id AS apopenid,
                   currToCurr(target.apopen_curr_id,source.apopen_curr_id, 
                     target.apopen_amount - target.apopen_paid - COALESCE(prepared,0.0) - COALESCE(selected,0.0),
                     current_date) AS balance
           FROM apopen AS source, apopen AS target
             LEFT OUTER JOIN (SELECT apopen_id AS selected_apopen_id,
                                SUM(currToCurr(apselect_curr_id, apopen_curr_id, apselect_amount + apselect_discount, apselect_date)) AS selected
                                    FROM apselect JOIN apopen ON (apselect_apopen_id=apopen_id)
                                GROUP BY apopen_id) AS sub1
                                ON (target.apopen_id=selected_apopen_id)
             LEFT OUTER JOIN (SELECT apopen_id AS prepared_apopen_id,
                                SUM(checkitem_amount + checkitem_discount) AS prepared
                              FROM checkhead 
                                JOIN checkitem ON (checkitem_checkhead_id=checkhead_id)
                                JOIN apopen ON (checkitem_apopen_id=apopen_id)
                              WHERE ((NOT checkhead_posted)
                               AND  (NOT checkhead_void))
                              GROUP BY apopen_id) AS sub2 ON (prepared_apopen_id=target.apopen_id)
            WHERE ( (source.apopen_vend_id=target.apopen_vend_id)
             AND (target.apopen_doctype IN (&#39;V&#39;, &#39;D&#39;))
             AND (target.apopen_open)
             AND (source.apopen_id=pApopenid) )
            ORDER BY target.apopen_duedate, (target.apopen_amount - target.apopen_paid) LOOP

--  Determine the amount to apply
    IF (_r.balance &gt; _amount) THEN
      _applyAmount := _amount;
    ELSE
      _applyAmount := _r.balance;
    END IF;

--  Does an apcreditapply record already exist?
    SELECT apcreditapply_id, 
              apcreditapply_amount * _curr_rate / 
                 round(currRate(apcreditapply_curr_id,_docdate),5) AS apcreditapply_amount
      INTO _p
    FROM apcreditapply
    WHERE ( (apcreditapply_target_apopen_id=_r.apopenid)
     AND (apcreditapply_source_apopen_id=pApopenid) );

    IF (FOUND) THEN
--  Offset the amount to apply by the amount already applied
      _applyAmount := (_applyAmount - _p.apcreditapply_amount);
      IF (_applyAmount &lt; 0) THEN
        _applyAmount := 0;
      END IF;

--  Update the apcreditapply with the new amount to apply
      UPDATE apcreditapply
      SET apcreditapply_amount = (apcreditapply_amount + 
          _applyAmount *  round(currRate(apcreditapply_curr_id,5)) / _curr_rate)
      WHERE (apcreditapply_id=_p.apcreditapply_id);

    ELSE
--  Create a new apcreditapply record
      INSERT INTO apcreditapply
      ( apcreditapply_source_apopen_id, apcreditapply_target_apopen_id,
        apcreditapply_amount, apcreditapply_curr_id )
      VALUES
      ( pApopenid, _r.apopenid, _applyAmount, _curr_id );
    END IF;

    _amount := (_amount - _applyAmount);
    IF (_amount = 0) THEN
      EXIT;
    END IF;

  END LOOP;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.applyarcreditmemotobalance-integer">applyarcreditmemotobalance( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pAropenid ALIAS FOR $1;
  _amount NUMERIC;
  _amountcurrid INTEGER;
  _applyAmount NUMERIC;
  _applycurrid  INTEGER;
  _r RECORD;
  _p RECORD;

BEGIN

--  Find the balance to apply
  SELECT (aropen_amount - COALESCE(SUM(currToCurr(arcreditapply_curr_id,
                                                  aropen_curr_id,
                                                  arcreditapply_amount,
                                                  aropen_docdate)), 0) - aropen_paid - COALESCE(prepared,0.0)),
         aropen_curr_id INTO _amount, _amountcurrid
  FROM aropen LEFT OUTER JOIN arcreditapply ON (arcreditapply_source_aropen_id=aropen_id)
	      LEFT OUTER JOIN (SELECT aropen_id AS prepared_aropen_id,
                                      SUM(currToCurr(checkitem_curr_id, aropen_curr_id, checkitem_amount + checkitem_discount, checkitem_docdate)) AS prepared
                               FROM checkhead JOIN checkitem ON (checkitem_checkhead_id=checkhead_id)
                                              JOIN aropen ON (checkitem_aropen_id=aropen_id)
                               WHERE ((NOT checkhead_posted)
                                AND  (NOT checkhead_void))
                               GROUP BY aropen_id) AS sub1
                      ON (prepared_aropen_id=aropen_id)
  WHERE (aropen_id=pAropenid)
  GROUP BY aropen_amount, aropen_paid, aropen_curr_id, prepared;

  IF (_amount &lt; 0) THEN
    RETURN -1;
  END IF;

--  Loop through the aropen items in order of due date
  FOR _r IN SELECT target.aropen_id AS aropenid,
                   (target.aropen_amount - target.aropen_paid) AS balance,
                   target.aropen_curr_id AS curr_id,
                   target.aropen_docdate AS docdate
            FROM aropen AS target, aropen AS source
            WHERE ( (source.aropen_cust_id=target.aropen_cust_id)
             AND (target.aropen_doctype IN (&#39;D&#39;, &#39;I&#39;))
             AND (target.aropen_open)
             AND (source.aropen_id=pAropenid) )
            ORDER BY target.aropen_duedate, target.aropen_docnumber LOOP

--  Determine the amount to apply
    IF (_r.balance &gt; _amount) THEN
      _applyAmount := _amount;
      _applycurrid := _amountcurrid;
    ELSE
      _applyAmount := _r.balance;
      _applycurrid := _r.curr_id;
    END IF;

--  Does an arcreditapply record already exist?
    SELECT arcreditapply_id,
           arcreditapply_amount,
           currToCurr(arcreditapply_curr_id, _applycurrid,
                      arcreditapply_amount, _r.docdate) AS
                      arcreditapply_amount_applycurr INTO _p
    FROM arcreditapply
    WHERE ( (arcreditapply_target_aropen_id=_r.aropenid)
     AND (arcreditapply_source_aropen_id=pAropenid) );

    IF (FOUND) THEN
--  Offset the amount to apply by the amount already applied
      _applyAmount := (_applyAmount - _p.arcreditapply_amount_applycurr);
      IF (_applyAmount &lt; 0) THEN
        _applyAmount := 0;
      END IF;

--  Update the arcreditapply with the new amount to apply
      UPDATE arcreditapply
      SET arcreditapply_amount = round(arcreditapply_amount +
                                       currToCurr(_applycurrid,
                                                  arcreditapply_curr_id,
                                                  _applyAmount, _r.docdate), 2)
      WHERE (arcreditapply_id=_p.arcreditapply_id);

    ELSE
--  Create a new arcreditapply record
      INSERT INTO arcreditapply
      ( arcreditapply_source_aropen_id, arcreditapply_target_aropen_id,
        arcreditapply_amount, arcreditapply_curr_id )
      VALUES
      ( pAropenid, _r.aropenid, _applyAmount, _applycurrid );
    END IF;

    _amount := _amount - currToCurr(_applycurrid, _amountcurrid, _applyAmount, _r.docdate);
    IF (_amount = 0) THEN
      EXIT;
    END IF;

  END LOOP;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.applyarmemotobalance-integer">applyarmemotobalance( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pArmemoid ALIAS FOR $1;
  _amount NUMERIC;
  _applyAmount NUMERIC;
  _armemoitemid INTEGER;
  _r RECORD;
  _p RECORD;

BEGIN

--  Find the balance to apply
  SELECT (armemo_amount - COALESCE(SUM(armemoitem_amount), 0)) INTO _amount
  FROM armemo LEFT OUTER JOIN armemoitem ON (armemoitem_armemo_id=armemo_id)
  WHERE (armemo_id=pArmemoid)
  GROUP BY armemo_amount;

--  Loop through the aropen item in order of due date
  FOR _r IN SELECT aropen_id,
	       currToCurr(aropen_curr_id, armemo_curr_id,
			  aropen_amount - aropen_paid, aropen_docdate) AS balance,
	       armemo_curr_id
            FROM aropen, armemo
            WHERE ( (aropen_cust_id=armemo_cust_id)
             AND (aropen_doctype=&#39;I&#39;)
             AND (aropen_open)
             AND (armemo_id=pArmemoid) )
            ORDER BY aropen_duedate, (aropen_amount - aropen_paid) LOOP

--  Determine the amount to apply
    IF (_r.balance &gt; _amount) THEN
      _applyAmount := _amount;
    ELSE
      _applyAmount := _r.balance;
    END IF;

--  Does an armemoitem already exist?
--  ToDo - this does not look right: the join is not restricted!
    SELECT armemoitem_id, armemoitem_amount INTO _p
    FROM armemoitem, armemo
    WHERE ( (armemoitem_aropen_id=_r.aropen_id)
     AND (armemoitem_armemo_id=pArmemoid) );

    IF (FOUND) THEN
--  Offset the amount to apply by the amount already applied
      _applyAmount := (_applyAmount - _p.armemoitem_amount);
      IF (_applyAmount &lt; 0) THEN
        _applyAmount := 0;
      END IF;

--  Update the armemoitem with the new amount to apply
      UPDATE armemoitem
      SET armemoitem_amount = round(armemoitem_amount + _applyAmount, 2)
      WHERE (armemoitem_id=_p.armemoitem_id);

    ELSE
--  Create a new armemoitem
      SELECT NEXTVAL(&#39;armemoitem_armemoitem_id_seq&#39;) INTO _armemoitemid;
      INSERT INTO armemoitem
      ( armemoitem_id, armemoitem_aropen_id, armemoitem_armemo_id,
        armemoitem_amount, armemo_curr_id )
      VALUES
      ( _armemoitemid, _r.aropen_id, pArmemoid,
        round(_applyAmount, 2), _r.armemo_curr_id );
    END IF;

    _amount := (_amount - _applyAmount);
    IF round(_amount, 2) = 0 THEN
      EXIT;
    END IF;

  END LOOP;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.applycashreceiptlinebalance-integer-integer-numeric-integer">applycashreceiptlinebalance( integer, integer, numeric, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCashrcptId ALIAS FOR $1;
  pAropenid ALIAS FOR $2;
  pAmount ALIAS FOR $3;
  pCurrId ALIAS FOR $4;
  _balance NUMERIC;
  _amount NUMERIC;
  _applyAmount NUMERIC;
  _r RECORD;

BEGIN

--  Clear previously applied
  DELETE FROM cashrcptitem WHERE ((cashrcptitem_cashrcpt_id=pCashrcptId) AND (cashrcptitem_aropen_id=pAropenId));

--  Find the balance to apply
  SELECT (currToCurr(pCurrId, cashrcpt_curr_id, pAmount, cashrcpt_distdate) -
              COALESCE(SUM(cashrcptitem_amount), 0)) INTO _amount
  FROM cashrcpt LEFT OUTER JOIN cashrcptitem ON (cashrcptitem_cashrcpt_id = cashrcpt_id)
  WHERE (cashrcpt_id=pCashrcptid)
  GROUP BY cashrcpt_curr_id, cashrcpt_distdate;

  SELECT (_amount - COALESCE(SUM(cashrcptmisc_amount), 0)) INTO _amount
  FROM cashrcptmisc
  WHERE (cashrcptmisc_cashrcpt_id=pCashrcptid);

RAISE NOTICE &#39;Amount (%)&#39;, _amount;

  IF (_amount = 0) THEN
    RETURN 0;
  END IF;

--  Determine Line balance
        SELECT   currToCurr(aropen_curr_id, pCurrId,
                 aropen_amount - aropen_paid, aropen_docdate) -
                 COALESCE((SELECT SUM(cashrcptitem_amount) FROM cashrcptitem WHERE cashrcptitem_aropen_id=pAropenId), 0) INTO _balance
            FROM aropen
            WHERE (aropen_id=pAropenId);

RAISE NOTICE &#39;Line Bal (%)&#39;, _balance;

--  Determine the amount to apply
    IF (_balance &gt; _amount) THEN
      _applyAmount := _amount;
    ELSE
      _applyAmount := _balance;
    END IF;

    IF (_applyAmount &gt; 0) THEN
--  Create a new cashrcptitem
        INSERT INTO cashrcptitem
        ( cashrcptitem_aropen_id, cashrcptitem_cashrcpt_id,
          cashrcptitem_amount )
        VALUES
        ( pAropenid, pCashrcptid, round(_applyAmount, 2) );
    END IF;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.applycashreceipttobalance-integer-numeric">applycashreceipttobalance( integer, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCashrcptid ALIAS FOR $1;
  pAmount ALIAS FOR $2;

BEGIN
  RETURN applyCashReceiptToBalance(pCashrcptid, pAmount, baseCurrId() );
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.applycashreceipttobalance-integer-numeric-integer">applycashreceipttobalance( integer, numeric, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCashrcptid ALIAS FOR $1;
  pAmount ALIAS FOR $2;
  pCurrId ALIAS FOR $3;
  _amount NUMERIC;
  _applyAmount NUMERIC;
  _r RECORD;

BEGIN

--  Find the balance to apply
  SELECT (currToCurr(pCurrId, cashrcpt_curr_id, pAmount, cashrcpt_distdate) -
              COALESCE(SUM(cashrcptitem_amount), 0)) INTO _amount
  FROM cashrcpt LEFT OUTER JOIN cashrcptitem ON (cashrcptitem_cashrcpt_id = cashrcpt_id)
  WHERE (cashrcpt_id=pCashrcptid)
  GROUP BY cashrcpt_curr_id, cashrcpt_distdate;

  SELECT (_amount - COALESCE(SUM(cashrcptmisc_amount), 0)) INTO _amount
  FROM cashrcptmisc
  WHERE (cashrcptmisc_cashrcpt_id=pCashrcptid);

  IF (_amount = 0) THEN
    RETURN 1;
  END IF;

--  Loop through the aropen item in order of due date, searching only for
--  aropen items that are open, for the current customer and have an outstanding balance
  FOR _r IN SELECT aropen_id,
                   currToCurr(aropen_curr_id, cashrcpt_curr_id,
                              aropen_amount - aropen_paid, aropen_docdate) -
                   (SELECT COALESCE(SUM(p.cashrcptitem_amount), 0) FROM cashrcptitem p
                   WHERE p.cashrcptitem_aropen_id=aropen_id) AS balance,
                   s.cashrcptitem_id AS cashrcptitem_id
            FROM cashrcpt, aropen LEFT OUTER JOIN
                 cashrcptitem s ON (s.cashrcptitem_aropen_id=aropen_id AND s.cashrcptitem_cashrcpt_id=pCashrcptId)
            WHERE ( (aropen_cust_id=cashrcpt_cust_id)
             AND (aropen_doctype IN (&#39;I&#39;, &#39;D&#39;))
             AND (aropen_open)
             AND (cashrcpt_id=pCashrcptid) )
            ORDER BY aropen_duedate, aropen_amount, balance LOOP

--  Determine the amount to apply
    IF (_r.balance &gt; _amount) THEN
      _applyAmount := _amount;
    ELSE
      _applyAmount := _r.balance;
    END IF;

    IF (_applyAmount &gt; 0) THEN
--  Does an cashrcptitem already exist?
      IF (_r.cashrcptitem_id IS NOT NULL) THEN
--  Update the cashrcptitem with the new amount to apply
        UPDATE cashrcptitem
        SET cashrcptitem_amount = round(cashrcptitem_amount + _applyAmount, 2)
        WHERE (cashrcptitem_id=_r.cashrcptitem_id);
      ELSE
--  Create a new cashrcptitem
        INSERT INTO cashrcptitem
        ( cashrcptitem_aropen_id, cashrcptitem_cashrcpt_id,
          cashrcptitem_amount )
        VALUES
        ( _r.aropen_id, pCashrcptid, round(_applyAmount, 2) );
      END IF;

      _amount := (_amount - _applyAmount);
      IF (round(_amount, 2) = 0) THEN
        EXIT;
      END IF;

    END IF;
  END LOOP;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.araging-date-boolean">araging( date, boolean )</a>
		</h2>
<h3>Returns: SET OF araging</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pAsOfDate ALIAS FOR $1;
  pUseDocDate ALIAS FOR $2;
  _row araging%ROWTYPE;
  _x RECORD;
  _returnVal INTEGER;
  _asOfDate DATE;
BEGIN

  _asOfDate := COALESCE(pAsOfDate,current_date);

  FOR _x IN
        SELECT
        --report uses currtobase to convert all amounts to base based on aropen_docdate to ensure the same exchange rate

        --today and greater base:
        CASE WHEN((aropen_duedate &gt;= DATE(_asOfDate))) THEN ((currtobase(aropen_curr_id,aropen_amount,aropen_docdate)-
        currtobase(aropen_curr_id,aropen_paid,aropen_docdate)+SUM(currtobase(arapply_curr_id,arapply_applied,aropen_docdate))) *
        CASE WHEN (aropen_doctype IN (&#39;C&#39;, &#39;R&#39;)) THEN -1 ELSE 1 END) ELSE 0 END AS cur_val,

        --0 to 30 base
        CASE WHEN((aropen_duedate &gt;= DATE(_asOfDate)-30) AND (aropen_duedate &lt; DATE(_asOfDate)))
        THEN ((currtobase(aropen_curr_id,aropen_amount,aropen_docdate)-
        currtobase(aropen_curr_id,aropen_paid,aropen_docdate)+SUM(currtobase(arapply_curr_id,arapply_applied,aropen_docdate))) *
        CASE WHEN (aropen_doctype IN (&#39;C&#39;, &#39;R&#39;)) THEN -1 ELSE 1 END) ELSE 0 END AS thirty_val,

        --30-60 base
        CASE WHEN((aropen_duedate &gt;= DATE(_asOfDate)-60) AND (aropen_duedate &lt; DATE(_asOfDate) - 30 ))
        THEN ((currtobase(aropen_curr_id,aropen_amount,aropen_docdate)-
        currtobase(aropen_curr_id,aropen_paid,aropen_docdate)+SUM(currtobase(arapply_curr_id,arapply_applied,aropen_docdate))) *
        CASE WHEN (aropen_doctype IN (&#39;C&#39;, &#39;R&#39;)) THEN -1 ELSE 1 END) ELSE 0 END AS sixty_val,

        --60-90 base
        CASE WHEN((aropen_duedate &gt;= DATE(_asOfDate)-90) AND (aropen_duedate &lt; DATE(_asOfDate) - 60))
        THEN ((currtobase(aropen_curr_id,aropen_amount,aropen_docdate)-
        currtobase(aropen_curr_id,aropen_paid,aropen_docdate)+SUM(currtobase(arapply_curr_id,arapply_applied,aropen_docdate))) *
        CASE WHEN (aropen_doctype IN (&#39;C&#39;, &#39;R&#39;)) THEN -1 ELSE 1 END) ELSE 0 END AS ninety_val,

        --greater than 90 base:
        CASE WHEN((aropen_duedate &gt; DATE(_asOfDate)-10000) AND (aropen_duedate &lt; DATE(_asOfDate) - 90))
        THEN ((currtobase(aropen_curr_id,aropen_amount,aropen_docdate)-
        currtobase(aropen_curr_id,aropen_paid,aropen_docdate)+SUM(currtobase(arapply_curr_id,arapply_applied,aropen_docdate))) *
        CASE WHEN (aropen_doctype IN (&#39;C&#39;, &#39;R&#39;)) THEN -1 ELSE 1 END) ELSE 0 END AS plus_val,

        --total amount base:
        CASE WHEN((aropen_duedate &gt; DATE(_asOfDate)-10000)) THEN ((currtobase(aropen_curr_id,aropen_amount,aropen_docdate)-
        currtobase(aropen_curr_id,aropen_paid,aropen_docdate)+SUM(currtobase(arapply_curr_id,arapply_applied,aropen_docdate))) *
        CASE WHEN (aropen_doctype IN (&#39;C&#39;, &#39;R&#39;)) THEN -1 ELSE 1 END) ELSE 0 END AS total_val,

        --AR Open Amount base
        CASE WHEN aropen_doctype IN (&#39;C&#39;, &#39;R&#39;) THEN currtobase(aropen_curr_id,(aropen_amount * -1),aropen_docdate) ELSE currtobase(aropen_curr_id,(aropen_amount),aropen_docdate) END AS aropen_amount,

        aropen_docdate,
        aropen_duedate,
        aropen_ponumber,
        aropen_docnumber,
        aropen_doctype,
        cust_id,
        cust_name,
        cust_number,
        cust_custtype_id,
        custtype_code,
        terms_descrip

        FROM custinfo, custtype, aropen
          LEFT OUTER JOIN terms ON (aropen_terms_id=terms_id)
          LEFT OUTER JOIN arapply ON (((aropen_id=arapply_target_aropen_id)
                                    OR (aropen_id=arapply_source_aropen_id))
                                   AND (arapply_distdate&gt;_asOfDate))
        WHERE ( (aropen_cust_id = cust_id)
        AND (cust_custtype_id=custtype_id)
        AND (CASE WHEN (pUseDocDate) THEN aropen_docdate ELSE aropen_distdate END &lt;= _asOfDate)
        AND (COALESCE(aropen_closedate,_asOfDate+1)&gt;_asOfDate) )
        GROUP BY aropen_id,aropen_docdate,aropen_duedate,aropen_ponumber,aropen_docnumber,aropen_doctype,aropen_paid,
                 aropen_curr_id,aropen_amount,cust_id,cust_name,cust_number,cust_custtype_id,custtype_code,terms_descrip
        ORDER BY cust_number, aropen_duedate
  LOOP
        _row.araging_docdate := _x.aropen_docdate;
        _row.araging_duedate := _x.aropen_duedate;
        _row.araging_ponumber := _x.aropen_ponumber;
        _row.araging_docnumber := _x.aropen_docnumber;
        _row.araging_doctype := _x.aropen_doctype;
        _row.araging_cust_id := _x.cust_id;
        _row.araging_cust_number := _x.cust_number;
        _row.araging_cust_name := _x.cust_name;
        _row.araging_cust_custtype_id := _x.cust_custtype_id;
        _row.araging_custtype_code := _x.custtype_code;
        _row.araging_terms_descrip := _x.terms_descrip;
        _row.araging_aropen_amount := _x.aropen_amount;
        _row.araging_cur_val := _x.cur_val;
        _row.araging_thirty_val := _x.thirty_val;
        _row.araging_sixty_val := _x.sixty_val;
        _row.araging_ninety_val := _x.ninety_val;
        _row.araging_plus_val := _x.plus_val;
        _row.araging_total_val := _x.total_val;
        RETURN NEXT _row;
  END LOOP;
  RETURN;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.arapplied-integer-date">arapplied( integer, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pAropenid ALIAS FOR $1;
  pDate ALIAS FOR $2;
  _amount NUMERIC;

BEGIN

  -- Return amount applied to an aropen in base currency item as of the parameter date
  SELECT SUM(currtobase(arapply_curr_id,arapply_applied,pDate)) INTO _amount
  FROM arapply
  WHERE (((arapply_target_aropen_id = pAropenid) OR (arapply_source_aropen_id = pAropenid))
  AND (((arapply_journalnumber=0) AND (arapply_postdate &lt;= pDate))
  OR EXISTS(SELECT * 
             FROM gltrans 
             WHERE ((gltrans_journalnumber=arapply_journalnumber)
             AND (gltrans_date &lt;= pDate)))));

  IF (_amount IS NULL) THEN
    RETURN 0;
  ELSE
    RETURN _amount;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.archivesaleshistory-integer">archivesaleshistory( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSohistid ALIAS FOR $1;

BEGIN

  INSERT INTO asohist ( asohist_id, asohist_cust_id, asohist_itemsite_id,
                        asohist_shipdate, asohist_invcdate, asohist_duedate, asohist_promisedate,
                        asohist_ordernumber, asohist_invcnumber,
                        asohist_qtyshipped, asohist_unitprice, asohist_unitcost,
                        asohist_billtoname, asohist_billtoaddress1, asohist_billtoaddress2,
                        asohist_billtoaddress3, asohist_billtocity, asohist_billtostate, asohist_billtozip,
                        asohist_shiptoname, asohist_shiptoaddress1, asohist_shiptoaddress2,
                        asohist_shiptoaddress3, asohist_shiptocity, asohist_shiptostate, asohist_shiptozip,
                        asohist_shipto_id, asohist_shipvia, asohist_salesrep_id, asohist_tax_id,
                        asohist_misc_type, asohist_misc_descrip, asohist_misc_id,
                        asohist_commission, asohist_commissionpaid,
                        asohist_doctype, asohist_orderdate, asohist_imported,
			asohist_ponumber, asohist_curr_id )
  SELECT cohist_id, cohist_cust_id, cohist_itemsite_id,
         cohist_shipdate, cohist_invcdate, cohist_duedate, cohist_promisedate,
         cohist_ordernumber, cohist_invcnumber,
         cohist_qtyshipped, cohist_unitprice, cohist_unitcost,
         cohist_billtoname, cohist_billtoaddress1, cohist_billtoaddress2,
         cohist_billtoaddress3, cohist_billtocity, cohist_billtostate, cohist_billtozip,
         cohist_shiptoname, cohist_shiptoaddress1, cohist_shiptoaddress2,
         cohist_shiptoaddress3, cohist_shiptocity, cohist_shiptostate, cohist_shiptozip,
         cohist_shipto_id, cohist_shipvia, cohist_salesrep_id, cohist_tax_id,
         cohist_misc_type, cohist_misc_descrip, cohist_misc_id,
         cohist_commission, cohist_commissionpaid,
         cohist_doctype, cohist_orderdate, cohist_imported, cohist_ponumber,
	 cohist_curr_id
  FROM cohist
  WHERE (cohist_id=pSohistid);

  DELETE FROM cohist
  WHERE (cohist_id=pSohistid);

  RETURN pSohistid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.armor-bytea">armor( bytea )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: C</h3>
        
        <pre>pg_armor</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.attachcontact-integer-integer">attachcontact( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    pcntctId    ALIAS FOR $1;
    pcrmacctId  ALIAS FOR $2;
  BEGIN
    UPDATE cntct SET cntct_crmacct_id = pcrmacctId
    WHERE cntct_id = pcntctId;

    RETURN 0;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.averagesalesprice-integer-date-date">averagesalesprice( integer, date, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pStartDate ALIAS FOR $2;
  pEndDate ALIAS FOR $3;
  _p RECORD;

BEGIN
-- Returns value in base currency
-- ToDo: is cohist_shipdate the right DATE to use?
  SELECT SUM(cohist_qtyshipped * currToBase(cohist_curr_id, cohist_unitprice,
                                            cohist_shipdate)) AS totalsales,
         SUM(cohist_qtyshipped) AS totalship INTO _p
  FROM cohist
  WHERE ( (cohist_itemsite_id=pItemsiteid)
   AND (cohist_invcdate BETWEEN pStartDate AND pEndDate) );

  IF ( (_p.totalship IS NULL) OR
       (_p.totalship = 0) ) THEN
    RETURN 0;
  ELSE
    RETURN (_p.totalsales / _p.totalship);
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.avgcost-integer">avgcost( integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  _value NUMERIC;
  _qoh NUMERIC;
BEGIN
  SELECT itemsite_value, itemsite_qtyonhand
    INTO _value, _qoh
    FROM itemsite
   WHERE(itemsite_id=pItemsiteid);
  IF (_qoh = 0) THEN
    RETURN 0;
  END IF;
  RETURN _value / _qoh;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.balanceitemsite-integer">balanceitemsite( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  _itemlocseries INTEGER;
  _balanced NUMERIC;
  _qoh NUMERIC;
  _nnQoh NUMERIC;

BEGIN

--  Make sure that that passed Itemsite is MLC or Lot/Serial controlled
  IF ( ( SELECT (NOT ( (itemsite_loccntrl) OR (itemsite_controlmethod IN (&#39;L&#39;, &#39;S&#39;)) ))
         FROM itemsite
         WHERE (itemsite_id=pItemsiteid) ) ) THEN
    RETURN 0;
  END IF;

  IF ( ( SELECT itemsite_freeze
           FROM itemsite
          WHERE(itemsite_id=pItemsiteid) ) ) THEN
    RETURN -1;
  END IF;

--  Calculate the Netable portion
  SELECT COALESCE(SUM(itemloc_qty), 0) INTO _balanced
  FROM itemloc LEFT OUTER JOIN location ON (itemloc_location_id=location_id)
  WHERE ( ( (location_id IS NULL) OR (location_netable) )
   AND (itemloc_itemsite_id=pItemsiteid) );

--  Post an AD Transaction for the Netable portion
  SELECT invAdjustment( itemsite_id, (_balanced - itemsite_qtyonhand),
                        &#39;Balance&#39;, &#39;Inventory Balance&#39; ) INTO _itemlocseries
  FROM itemsite
  WHERE (itemsite_id=pItemsiteid);

--  Post the invtrans records associated with the itemlocdist records
  PERFORM postInvhist(itemlocdist_invhist_id)
     FROM itemlocdist
    WHERE(itemlocdist_series=_itemlocseries);

--  Kill the resultant distribution records
  DELETE FROM itemlocdist
  WHERE (itemlocdist_series=_itemlocseries);

--  Calculate and write the Non-Netable portion directly
  SELECT COALESCE(SUM(itemloc_qty), 0) INTO _nnQoh
  FROM itemloc, location
  WHERE ( (itemloc_location_id=location_id)
   AND (NOT location_netable)
   AND (itemloc_itemsite_id=pItemsiteid) );

  UPDATE itemsite
  SET itemsite_nnqoh = _nnQoh
  WHERE (itemsite_id=pItemsiteid);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.basecurrid">basecurrid(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
    DECLARE
	returnVal INTEGER;
    BEGIN
	SELECT curr_id INTO returnVal
	    FROM curr_symbol
	    WHERE curr_base = TRUE;
    	IF NOT FOUND THEN
	    RAISE EXCEPTION &#39;No base currency found&#39;;
	END IF;
	RETURN returnVal;
    END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.bomcontains-integer-integer">bomcontains( integer, integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pparentitemid	ALIAS FOR $1;
  pchilditemid	ALIAS FOR $2;
  _bomworksetid	INTEGER;
  _result	BOOLEAN;

BEGIN
  _bomworksetid := indentedWhereUsed(pchilditemid);
  _result := EXISTS(SELECT bomwork_id
		    FROM bomwork
		    WHERE ((bomwork_set_id=_bomworksetid)
		      AND  (bomwork_item_id=pparentitemid) ));

  PERFORM deleteBOMWorkset(_bomworksetid);

  RETURN _result;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.bomhistsequence-integer">bomhistsequence( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pHistid ALIAS FOR $1;
  _wid INTEGER;
  _seqnum TEXT;
  _bomhist RECORD;

BEGIN
  _wid := pHistid;

  SELECT bomhist_parent_id AS parent,
         to_char(bomhist_seqnumber, &#39;00009&#39;) AS seq INTO _bomhist
    FROM bomhist
   WHERE bomhist_seq_id=_wid;

  IF (FOUND) THEN
    _seqnum := _bomhist.seq;
    _wid := _bomhist.parent;

    WHILE (_wid != -1) LOOP
      SELECT bomhist_parent_id AS parent,
             to_char(bomhist_seqnumber, &#39;00009&#39;) AS seq INTO _bomhist
      FROM bomhist
      WHERE bomhist_seq_id=_wid;

      IF (FOUND) THEN
        _seqnum := _bomhist.seq || &#39;-&#39; || _seqnum;
        _wid    := _bomhist.parent;
      ELSE
        _wid := -1;
      END IF;
    END LOOP;
  ELSE
    _seqnum := &#39;&#39;::TEXT;
  END IF;

  RETURN _seqnum;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.bomitem-integer">bomitem( integer )</a>
		</h2>
<h3>Returns: SET OF bomitem</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  _row bomitem%ROWTYPE;
  _revid INTEGER;

BEGIN

  SELECT getActiveRevId(&#39;BOM&#39;,pItemid) INTO _revid;
  
  FOR _row IN SELECT *
            FROM bomitem(pItemid,_revid)
  LOOP
    RETURN NEXT _row;
  END LOOP;

  RETURN;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.bomitem-integer-integer">bomitem( integer, integer )</a>
		</h2>
<h3>Returns: SET OF bomitem</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pRevid ALIAS FOR $2;
  _row bomitem%ROWTYPE;

BEGIN
  FOR _row IN SELECT *
            FROM bomitem
            WHERE ((bomitem_parent_item_id=pItemid)
            AND (bomitem_rev_id=pRevid))
  LOOP
    RETURN NEXT _row;
  END LOOP;

  RETURN;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.bomlevelbyitem-integer">bomlevelbyitem( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  _bomRevid INTEGER;

BEGIN

  SELECT getActiveRevid(&#39;BOM&#39;,pItemid) INTO _bomrevid;

  RETURN bomLevelByItem(pItemid,_bomRevid);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.bomlevelbyitem-integer-integer">bomlevelbyitem( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pBomrevid ALIAS FOR $2;
  _cnt INTEGER;
  _result INTEGER;
  _bomitem RECORD;

BEGIN
  _cnt := 0;

  FOR _bomitem IN SELECT bomitem_parent_item_id
                    FROM bomitem(pItemid,pBomrevid)
                   WHERE (bomitem_item_id=pItemid) LOOP
    SELECT bomLevelByItem(_bomitem.bomitem_parent_item_id) + 1 INTO _result;
    IF (_result &gt; _cnt) THEN
      _cnt := _result;
    END IF;
  END LOOP;

  return _cnt;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.bomworkeffective-integer-date">bomworkeffective( integer, date )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
    workid ALIAS FOR $1;
    effdate ALIAS FOR $2;
    _wid INTEGER;
    _bomwork RECORD;
BEGIN
    _wid := workid;
    WHILE (_wid != -1) LOOP
        SELECT bomwork_parent_id AS parent,
               bomwork_effective AS effective
          INTO _bomwork
          FROM bomwork
         WHERE bomwork_id=_wid;

         IF (FOUND) THEN
             _wid := _bomwork.parent;
             IF (_bomwork.effective &gt; effdate) THEN
                 RETURN FALSE;
             END IF;
         ELSE
             _wid := -1;
         END IF;
    END LOOP;
    RETURN TRUE;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.bomworkexpired-integer-date">bomworkexpired( integer, date )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
    workid ALIAS FOR $1;
    expdate ALIAS FOR $2;
    _wid INTEGER;
    _bomwork RECORD;
BEGIN
    _wid := workid;
    WHILE (_wid != -1) LOOP
        SELECT bomwork_parent_id AS parent,
               bomwork_expires AS expires
          INTO _bomwork
          FROM bomwork
         WHERE bomwork_id=_wid;

         IF (FOUND) THEN
             _wid := _bomwork.parent;
             IF (_bomwork.expires &lt;= expdate) THEN
                 RETURN TRUE;
             END IF;
         ELSE
             _wid := -1;
         END IF;
    END LOOP;
    RETURN FALSE;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.bomworkitemsequence-integer">bomworkitemsequence( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWorkid ALIAS FOR $1;
  _wid INTEGER;
  _seqnum TEXT;
  _bomwork RECORD;

BEGIN
  _wid := pWorkid;

  SELECT bomwork_parent_id AS parent,
         item_number AS seq INTO _bomwork
    FROM bomwork, item
   WHERE ((bomwork_id=_wid)
   AND (bomwork_item_id=item_id));

  IF (FOUND) THEN
    _seqnum := _bomwork.seq;
    _wid := _bomwork.parent;

    WHILE (_wid != -1) LOOP
      SELECT bomwork_parent_id AS parent,
             item_number AS seq INTO _bomwork
      FROM bomwork, item
      WHERE ((bomwork_id=_wid)
      AND (bomwork_item_id=item_id));

      IF (FOUND) THEN
        _seqnum := _bomwork.seq || &#39;-&#39; || _seqnum;
        _wid    := _bomwork.parent;
      ELSE
        _wid := -1;
      END IF;
    END LOOP;
  ELSE
    _seqnum := &#39;&#39;::TEXT;
  END IF;

  RETURN _seqnum;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.bomworksequence-integer">bomworksequence( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWorkid ALIAS FOR $1;
  _wid INTEGER;
  _seqnum TEXT;
  _bomwork RECORD;

BEGIN
  _wid := pWorkid;

  SELECT bomwork_parent_id AS parent,
         to_char(bomwork_seqnumber, &#39;00009&#39;) AS seq INTO _bomwork
    FROM bomwork
   WHERE bomwork_id=_wid;

  IF (FOUND) THEN
    _seqnum := _bomwork.seq;
    _wid := _bomwork.parent;

    WHILE (_wid != -1) LOOP
      SELECT bomwork_parent_id AS parent,
             to_char(bomwork_seqnumber, &#39;00009&#39;) AS seq INTO _bomwork
      FROM bomwork
      WHERE bomwork_id=_wid;

      IF (FOUND) THEN
        _seqnum := _bomwork.seq || &#39;-&#39; || _seqnum;
        _wid    := _bomwork.parent;
      ELSE
        _wid := -1;
      END IF;
    END LOOP;
  ELSE
    _seqnum := &#39;&#39;::TEXT;
  END IF;

  RETURN _seqnum;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.bookingsbycustomervalue-integer-integer">bookingsbycustomervalue( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pPeriodid ALIAS FOR $2;
  _value NUMERIC;
  _startDate DATE;
  _endDate DATE;

BEGIN

  _startDate := findPeriodStart(pPeriodid);
  _endDate := findPeriodEnd(pPeriodid);

  SELECT SUM(round((coitem_qtyord * coitem_qty_invuomratio) *
                   (currtobase(cohead_curr_id, coitem_price, cohead_orderdate) / coitem_price_invuomratio), 2)) INTO _value
  FROM coitem, cohead, itemsite, item
  WHERE ( (cohead_cust_id=pCustid)
   AND (coitem_cohead_id=cohead_id)
   AND (coitem_status &lt;&gt; &#39;X&#39;)
   AND (coitem_itemsite_id=itemsite_id)
   AND (itemsite_item_id=item_id)
   AND ( cohead_orderdate BETWEEN _startDate AND _endDate ) );

  IF (_value IS NULL) THEN
    _value := 0;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.bookingsbyitemqty-integer-integer">bookingsbyitemqty( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pPeriodid ALIAS FOR $2;
  _value NUMERIC;
  _startDate DATE;
  _endDate DATE;

BEGIN

  _startDate := findPeriodStart(pPeriodid);
  _endDate := findPeriodEnd(pPeriodid);

  SELECT SUM(coitem_qtyord) INTO _value
  FROM coitem, cohead
  WHERE ( (coitem_cohead_id=cohead_id)
   AND (coitem_status &lt;&gt; &#39;X&#39;)
   AND (coitem_itemsite_id=pItemsiteid)
   AND ( cohead_orderdate BETWEEN _startDate AND _endDate ) );

  IF (_value IS NULL) THEN
    _value := 0;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.bookingsbyitemvalue-integer-integer">bookingsbyitemvalue( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pPeriodid ALIAS FOR $2;
  _value NUMERIC;
  _startDate DATE;
  _endDate DATE;

BEGIN

  _startDate := findPeriodStart(pPeriodid);
  _endDate := findPeriodEnd(pPeriodid);

  SELECT SUM(round((coitem_qtyord * coitem_qty_invuomratio) *
                   (currtobase(cohead_curr_id, coitem_price, cohead_orderdate) / coitem_price_invuomratio), 2)) INTO _value
  FROM coitem, cohead, itemsite, item
  WHERE ( (coitem_cohead_id=cohead_id)
   AND (coitem_status &lt;&gt; &#39;X&#39;)
   AND (coitem_itemsite_id=itemsite_id)
   AND (itemsite_item_id=item_id)
   AND (itemsite_id=pItemsiteid)
   AND (cohead_orderdate BETWEEN _startDate AND _endDate) );

  IF (_value IS NULL) THEN
    _value := 0;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.calccashbudget-integer-integer-bpchar">calccashbudget( integer, integer, bpchar )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pAccntId ALIAS FOR $1;
  pPeriodId ALIAS FOR $2;
  pInterval ALIAS FOR $3;
  _accntType CHAR;
  _currentBudget NUMERIC;
  _priorBudget NUMERIC;
  _result NUMERIC;
BEGIN

        SELECT accnt_type INTO _accntType
        FROM accnt
        WHERE (accnt_id=pAccntId);

        SELECT COALESCE(SUM(budget_amount),0) INTO _currentBudget
        FROM budget
        WHERE ((budget_accnt_id=pAccntId)
        AND (budget_period_id=pPeriodId));

        IF (pInterval=&#39;M&#39;) THEN
        SELECT (COALESCE(SUM(budget_amount),0)) INTO _priorBudget
                FROM budget,
                (SELECT COALESCE(pp.period_id,-1) AS prior_period_id
                        FROM period cp, period pp
                        WHERE ((cp.period_id=pPeriodId)
                        AND (cp.period_start &gt; pp.period_start))
                        ORDER BY pp.period_start DESC LIMIT 1) AS data
                WHERE ((budget_accnt_id=pAccntId)
                AND (budget_period_id=prior_period_id));

                ELSE IF (pInterval=&#39;Q&#39;) THEN
                        SELECT (COALESCE(SUM(budget_amount),0)) INTO _priorBudget
                        FROM budget,
                                (SELECT COALESCE(pp.period_id,-1) AS prior_period_id
                                FROM period cp, period pp
                                WHERE ((cp.period_id=pPeriodId)
                                AND (cp.period_start &gt; pp.period_start)
                                AND (pp.period_quarter=
                                CASE WHEN cp.period_quarter &gt; 1 THEN
                                        cp.period_quarter - 1
                                ELSE 4 END)
                                AND (pp.period_start &gt;= cp.period_start - interval &#39;1 year&#39;))
                                ORDER BY pp.period_start DESC LIMIT 1) AS data
                        WHERE ((budget_accnt_id=pAccntId)
                        AND (budget_period_id=prior_period_id));


                ELSE
                        SELECT (COALESCE(SUM(budget_amount),0)) INTO _priorBudget
                        FROM budget,
                                (SELECT pp.period_id AS prior_period_id
                        FROM period cp, period pp, yearperiod cy, yearperiod py
                        WHERE ((cp.period_id=pPeriodId)
                        AND (cp.period_yearperiod_id=cy.yearperiod_id)
                        AND (pp.period_yearperiod_id=py.yearperiod_id)
                        AND (cy.yearperiod_start &gt; py.yearperiod_start))
                        ORDER BY pp.period_start DESC LIMIT 1) AS data
                        WHERE ((budget_accnt_id=pAccntId)
                        AND (budget_period_id=prior_period_id));

                END IF;
        END IF;

        IF _accntType=&#39;A&#39; THEN
                _result := ((_priorBudget-_currentBudget) * -1);

        ELSE IF (_accntType IN (&#39;L&#39;,&#39;Q&#39;)) THEN
                _result := (_priorBudget-_currentBudget);

        ELSE RETURN -1;
        END IF;
  END IF;


  RETURN _result;


END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.calcpendingarapplications-integer">calcpendingarapplications( integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  paropenid     ALIAS FOR $1;
  _arcreditsum  NUMERIC;
  _aropencurrid INTEGER;
  _cashrcptsum  NUMERIC;

BEGIN
  SELECT aropen_curr_id INTO _aropencurrid
  FROM aropen
  WHERE (aropen_id=paropenid);

  SELECT SUM(currToCurr(cashrcpt_curr_id, _aropencurrid,
                        cashrcptitem_amount, CURRENT_DATE)) INTO _cashrcptsum
  FROM cashrcptitem, cashrcpt
  WHERE ((cashrcptitem_cashrcpt_id=cashrcpt_id)
    AND  (cashrcptitem_aropen_id=paropenid)
    );

  SELECT SUM(currToCurr(arcreditapply_curr_id, _aropencurrid,
                        arcreditapply_amount, CURRENT_DATE)) INTO _arcreditsum
  FROM arcreditapply
  WHERE ((arcreditapply_target_aropen_id=paropenid)
    );

  RETURN COALESCE(_cashrcptsum, 0) + COALESCE(_arcreditsum, 0);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.calculatetax-integer-numeric-numeric">calculatetax( integer, numeric, numeric )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTaxid ALIAS FOR $1;
  pSubtotal ALIAS FOR $2;
  pFreight ALIAS FOR $3;
BEGIN
  RETURN calculateTax(pTaxid, pSubtotal, pFreight, &#39;T&#39;);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.calculatetax-integer-numeric-numeric-bpchar">calculatetax( integer, numeric, numeric, bpchar )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTaxid ALIAS FOR $1;
  pSubtotal ALIAS FOR $2;
  pFreight ALIAS FOR $3;
  pRate ALIAS FOR $4;
  _params RECORD;
  _value NUMERIC;
  _tax NUMERIC;
  _taxA NUMERIC;
  _taxB NUMERIC;
  _taxC NUMERIC;
BEGIN

  SELECT tax_ratea, tax_rateb, tax_ratec,
         tax_freight, tax_cumulative INTO _params
  FROM tax
  WHERE (tax_id=pTaxid);

  IF (FOUND) THEN
    _value := pSubtotal;

--    IF (_params.tax_freight) THEN
--      _value := _value + pFreight;
--    END IF;

    _taxA := COALESCE(_params.tax_ratea,0.0) * _value;

    IF (_params.tax_cumulative) THEN
      _value := _value + _taxA;
    END IF;

    _taxB := COALESCE(_params.tax_rateb,0.0) * _value;

    IF (_params.tax_cumulative) THEN
      _value := _value + _taxB;
    END IF;

    _taxC := COALESCE(_params.tax_ratec,0.0) * _value;

  ELSE
    _taxA := 0;
    _taxB := 0;
    _taxC := 0;
  END IF;

  _tax := _taxA + _taxB + _taxC;

  IF (UPPER(pRate) = &#39;A&#39;) THEN
    RETURN _taxA;
  END IF;

  IF (UPPER(pRate) = &#39;B&#39;) THEN
    RETURN _taxB;
  END IF;

  IF (UPPER(pRate) = &#39;C&#39;) THEN
    RETURN _taxC;
  END IF;

  RETURN _tax;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.calcwooperstart-integer-integer">calcwooperstart( integer, integer )</a>
		</h2>
<h3>Returns: date</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoId ALIAS FOR $1;
  pBooitemSeqId ALIAS FOR $2;
  _result DATE;
BEGIN
  SELECT (wo_startdate + booitem_execday - 1) INTO _result
  FROM wo,booitem 
  WHERE ((wo_id=pWoId)
  AND (wo_boo_rev_id=booitem_rev_id)
  AND (booitem_seq_id=pBooitemSeqId));
 
  RETURN _result;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.cancelbatchitem-integer">cancelbatchitem( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBatchid ALIAS FOR $1;

BEGIN

  DELETE FROM batch
  WHERE (batch_id=pBatchid);

  DELETE FROM batchparam
  WHERE (batchparam_batch_id=pBatchid);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.cancelbillingselection-integer">cancelbillingselection( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCobmiscid ALIAS FOR $1;

BEGIN

  IF ( ( SELECT cobmisc_posted
         FROM cobmisc
         WHERE (cobmisc_id=pCobmiscid) ) ) THEN
    RETURN -1;
  END IF;

  DELETE FROM cobill
  WHERE (cobill_cobmisc_id=pCobmiscid); 

  DELETE FROM cobmisc
  WHERE (cobmisc_id=pCobmiscid);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.changeaccountingperioddates-integer-date-date">changeaccountingperioddates( integer, date, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPeriodid ALIAS FOR $1;
  pStartDate ALIAS FOR $2;
  pEndDate ALIAS FOR $3;
  _check INTEGER;
  _r RECORD;

BEGIN

--  Check to make sure that the passed period is not closed
  IF ( ( SELECT period_closed
         FROM period
         WHERE (period_id=pPeriodid) ) ) THEN
    RETURN -1;
  END IF;

--  Check to make sure that the passed start date does not fall
--  into another period
  SELECT period_id INTO _check
  FROM period
  WHERE ( (pStartDate BETWEEN period_start AND period_end)
    AND (period_id &lt;&gt; pPeriodid) )
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -2;
  END IF;
 
--  Check to make sure that the passed end date does not fall
--  into another period
  SELECT period_id INTO _check
  FROM period
  WHERE ( (pEndDate BETWEEN period_start AND period_end)
    AND (period_id &lt;&gt; pPeriodid) )
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -3;
  END IF;

--  Check to make sure that the new passed start and end dates do not
--  orphan a posted G/L Transaction
  SELECT gltrans_id INTO _check
  FROM gltrans, period
  WHERE ( (gltrans_date BETWEEN period_start AND period_end)
   AND (gltrans_posted)
   AND (NOT (gltrans_date BETWEEN pStartDate AND pEndDate))
   AND (period_id=pPeriodid) )
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -4;
  END IF;

--  Alter the start and end dates of the pass period
  UPDATE period
  SET period_start=pStartDate, period_end=pEndDate
  WHERE (period_id=pPeriodid);

--  Post any unposted G/L Transactions into the period
  FOR _r IN SELECT DISTINCT gltrans_sequence
            FROM gltrans
            WHERE ( (NOT gltrans_posted)
             AND (gltrans_date BETWEEN pStartDate AND pEndDate) ) LOOP
    PERFORM postIntoTrialBalance(_r.gltrans_sequence);
  END LOOP;

--  All done
  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.changeaccountingyearperioddates-integer-date-date">changeaccountingyearperioddates( integer, date, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPeriodid ALIAS FOR $1;
  pStartDate ALIAS FOR $2;
  pEndDate ALIAS FOR $3;
  _check INTEGER;
  _checkBool BOOLEAN;
  _r RECORD;

BEGIN

--  Check to make sure that the passed yearperiod is not closed
  IF ( ( SELECT yearperiod_closed
         FROM yearperiod
         WHERE (yearperiod_id=pPeriodid) ) ) THEN
    RETURN -1;
  END IF;

--  Check to make sure that the passed start date does not fall
--  into another yearperiod
  SELECT yearperiod_id INTO _check
  FROM yearperiod
  WHERE ( (pStartDate BETWEEN yearperiod_start AND yearperiod_end)
    AND (yearperiod_id &lt;&gt; pPeriodid) )
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -2;
  END IF;

--  Check to make sure that the passed end date does not fall
--  into another yearperiod
  SELECT yearperiod_id INTO _check
  FROM yearperiod
  WHERE ( (pEndDate BETWEEN yearperiod_start AND yearperiod_end)
    AND (yearperiod_id &lt;&gt; pPeriodid) )
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -3;
  END IF;

--  Make sure that the passed start is prior to the end date
  SELECT (pStartDate &gt; pEndDate) INTO _checkBool;
  IF (_checkBool) THEN
    RETURN -5;
  END IF;

--  Alter the start and end dates of the pass period
  UPDATE yearperiod
  SET yearperiod_start=pStartDate, yearperiod_end=pEndDate
  WHERE (yearperiod_id=pPeriodid);

--  All done
  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.changecmheadtaxauth-integer-integer">changecmheadtaxauth( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    pcmheadId		ALIAS FOR $1;
    pTaxauthId		ALIAS FOR $2;
    _cmcurr		INTEGER;
    _cmdate		DATE;
    _freighttaxtype	INTEGER;
    _oldtaxcurr		INTEGER;
    _taxauthid		INTEGER;
    _taxcurr		INTEGER;

  BEGIN
    SELECT cmhead_taxauth_id, cmhead_curr_id, cmhead_docdate,
	   COALESCE(cmhead_tax_curr_id, cmhead_curr_id)
	     INTO _taxauthid, _cmcurr, _cmdate, _oldtaxcurr
    FROM cmhead
    WHERE (cmhead_id=pcmheadId);

    IF (NOT FOUND) THEN
      RETURN -1;
    ELSIF (_taxauthid = pTaxauthId) THEN
      RETURN pcmheadId;
    END IF;

    IF (pTaxauthId &lt; 0) THEN
      _taxauthid = NULL;
    ELSE
      _taxauthid = pTaxauthId;
    END IF;

    IF (_taxauthid IS NULL) THEN
      UPDATE cmhead SET cmhead_taxauth_id=NULL,
			cmhead_tax_curr_id=cmhead_curr_id,
			cmhead_adjtax_ratea=NULL,
			cmhead_adjtax_rateb=NULL,
			cmhead_adjtax_ratec=NULL,
			cmhead_freighttax_id=NULL,
			cmhead_freighttaxtype_id=NULL
      WHERE cmhead_id=pcmheadId;

      UPDATE cmitem SET
	cmitem_tax_id=NULL,
	cmitem_taxtype_id=NULL,
	cmitem_tax_pcta=NULL, cmitem_tax_pctb=NULL, cmitem_tax_pctc=NULL,
	cmitem_tax_ratea=NULL, cmitem_tax_rateb=NULL, cmitem_tax_ratec=NULL
      WHERE (cmitem_cmhead_id=pcmheadId);

    ELSE -- there is a tax authority with jurisdiction
      SELECT COALESCE(taxauth_curr_id, _cmcurr), getFreightTaxTypeId()
	    INTO _taxcurr, _freighttaxtype
      FROM taxauth
      WHERE (taxauth_id=_taxauthid);

      IF (NOT FOUND) THEN
	RETURN -2;
      END IF;

      UPDATE cmhead SET cmhead_taxauth_id=_taxauthid,
			cmhead_tax_curr_id=_taxcurr,
			cmhead_adjtax_ratea=currToCurr(_oldtaxcurr, _taxcurr,
					    cmhead_adjtax_ratea, _cmdate),
			cmhead_adjtax_rateb=currToCurr(_oldtaxcurr, _taxcurr,
					    cmhead_adjtax_rateb, _cmdate),
			cmhead_adjtax_ratec=currToCurr(_oldtaxcurr, _taxcurr,
					    cmhead_adjtax_ratec, _cmdate),
			cmhead_freighttax_id=getTaxSelection(_taxauthid,
							    _freighttaxtype),
			cmhead_freighttaxtype_id=_freighttaxtype
      WHERE cmhead_id=pcmheadId;

      -- first do the normal case
      UPDATE cmitem SET
	cmitem_taxtype_id=getItemTaxType(item_id, _taxauthid),
	cmitem_tax_id=tax_id,
	cmitem_tax_pcta=tax_ratea,
	cmitem_tax_pctb=tax_rateb,
	cmitem_tax_pctc=tax_ratec,
	cmitem_tax_ratea=currToCurr(_cmcurr, _taxcurr,
				      calculateTax(tax_id,
					  (cmitem_qtycredit * cmitem_qty_invuomratio) * (cmitem_unitprice /
					  COALESCE(cmitem_price_invuomratio, 1)),
					  0, &#39;A&#39;),
				      _cmdate),
	cmitem_tax_rateb=currToCurr(_cmcurr, _taxcurr,
				      calculateTax(tax_id,
					  (cmitem_qtycredit * cmitem_qty_invuomratio) * (cmitem_unitprice /
					  COALESCE(cmitem_price_invuomratio, 1)),
					  0, &#39;B&#39;),
				      _cmdate),
	cmitem_tax_ratec=currToCurr(_cmcurr, _taxcurr,
				      calculateTax(tax_id,
					  (cmitem_qtycredit * cmitem_qty_invuomratio) * (cmitem_unitprice /
					  COALESCE(cmitem_price_invuomratio, 1)),
					  0, &#39;C&#39;),
				      _cmdate)
      FROM itemsite, item, tax
      WHERE ((itemsite_id=cmitem_itemsite_id)
	AND  (itemsite_item_id=item_id)
	AND  (tax_id=getTaxSelection(_taxauthid,
				getItemTaxType(itemsite_item_id, _taxauthid)))
	AND  (cmitem_cmhead_id=pcmheadId));

      -- then catch lines that have a null taxselection
      UPDATE cmitem SET
	cmitem_taxtype_id=getItemTaxType(itemsite_item_id, _taxauthid),
	cmitem_tax_id=NULL,
	cmitem_tax_pcta=NULL, cmitem_tax_pctb=NULL, cmitem_tax_pctc=NULL,
	cmitem_tax_ratea=NULL, cmitem_tax_rateb=NULL, cmitem_tax_ratec=NULL
      FROM itemsite, tax
      WHERE ((itemsite_id=cmitem_itemsite_id)
	AND  (getTaxSelection(_taxauthid,
			  getItemTaxType(itemsite_item_id, _taxauthid)) IS NULL)
	AND  (cmitem_cmhead_id=pcmheadId));

    END IF;

    RETURN pcmheadId;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.changecobtaxauth-integer-integer">changecobtaxauth( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    pcobmiscId		ALIAS FOR $1;
    pTaxauthId		ALIAS FOR $2;
    _freighttaxtype	INTEGER;
    _cobcurr		INTEGER;
    _invcdate		DATE;
    _oldtaxcurr		INTEGER;
    _taxauthid		INTEGER;

  BEGIN

    SELECT COALESCE(cobmisc_taxauth_id,-1), cobmisc_curr_id,
	   COALESCE(cobmisc_invcdate, CURRENT_DATE),
	   COALESCE(cobmisc_tax_curr_id, cobmisc_curr_id)
	     INTO _taxauthid, _cobcurr, _invcdate, _oldtaxcurr
    FROM cobmisc WHERE (cobmisc_id=pcobmiscId);

    IF (NOT FOUND) THEN
      RETURN -1;
    ELSIF (_taxauthid = pTaxauthId) THEN
      RETURN pcobmiscId;
    END IF;

    IF (pTaxauthId &lt; 0) THEN
      _taxauthid = NULL;
    ELSE
      _taxauthid = pTaxauthId;
    END IF;

    IF (_taxauthid IS NULL) THEN
      UPDATE cobmisc SET cobmisc_taxauth_id=NULL,
			  cobmisc_tax_curr_id=cobmisc_curr_id,
			  cobmisc_adjtax_ratea=NULL,
			  cobmisc_adjtax_rateb=NULL,
			  cobmisc_adjtax_ratec=NULL,
			  cobmisc_freighttax_id=NULL,
			  cobmisc_freighttaxtype_id=NULL
      WHERE cobmisc_id=pcobmiscId;

      UPDATE cobill SET
	cobill_tax_id=NULL,
	cobill_taxtype_id=NULL,
	cobill_tax_pcta=NULL, cobill_tax_pctb=NULL, cobill_tax_pctc=NULL,
	cobill_tax_ratea=NULL, cobill_tax_rateb=NULL, cobill_tax_ratec=NULL
      WHERE (cobill_cobmisc_id=pcobmiscId);

    ELSE -- there is a tax authority with jurisdiction
      SELECT getFreightTaxTypeId()
	    INTO _freighttaxtype;

      IF (NOT FOUND) THEN
	RETURN -2;
      END IF;

      UPDATE cobmisc SET cobmisc_taxauth_id=_taxauthid,
			  cobmisc_tax_curr_id=_cobcurr,
			  cobmisc_adjtax_ratea=currToCurr(_oldtaxcurr, _cobcurr,
					      cobmisc_adjtax_ratea, _invcdate),
			  cobmisc_adjtax_rateb=currToCurr(_oldtaxcurr, _cobcurr,
					      cobmisc_adjtax_rateb, _invcdate),
			  cobmisc_adjtax_ratec=currToCurr(_oldtaxcurr, _cobcurr,
					      cobmisc_adjtax_ratec, _invcdate),
			  cobmisc_freighttax_id=getTaxSelection(_taxauthid,
							      _freighttaxtype),
			  cobmisc_freighttaxtype_id=_freighttaxtype
      WHERE cobmisc_id=pcobmiscId;

      -- first do the normal case - cobill has an item record
      UPDATE cobill SET
	cobill_tax_id=tax_id,
	cobill_taxtype_id=getItemTaxType(item_id, _taxauthid),
	cobill_tax_pcta=tax_ratea,
	cobill_tax_pctb=tax_rateb,
	cobill_tax_pctc=tax_ratec,
	cobill_tax_ratea=calculateTax(tax_id,
            (cobill_qty * coitem_qty_invuomratio) * (coitem_price / COALESCE(coitem_price_invuomratio, 1)), 0, &#39;A&#39;),
	cobill_tax_rateb=calculateTax(tax_id,
            (cobill_qty * coitem_qty_invuomratio) * (coitem_price / COALESCE(coitem_price_invuomratio, 1)), 0, &#39;B&#39;),
	cobill_tax_ratec=calculateTax(tax_id,
            (cobill_qty * coitem_qty_invuomratio) * (coitem_price / COALESCE(coitem_price_invuomratio, 1)), 0, &#39;C&#39;)
      FROM coitem, itemsite, item, tax
      WHERE ((cobill_coitem_id=coitem_id)
        AND  (coitem_itemsite_id=itemsite_id)
	AND  (itemsite_item_id=item_id)
	AND  (tax_id=getTaxSelection(_taxauthid, getItemTaxType(item_id, _taxauthid)))
	AND  (cobill_cobmisc_id=pcobmiscId));

      -- finally catch those items that have no taxselection
      UPDATE cobill SET
	cobill_tax_id=NULL,
	cobill_tax_pcta=NULL, cobill_tax_pctb=NULL, cobill_tax_pctc=NULL,
	cobill_tax_ratea=NULL, cobill_tax_rateb=NULL, cobill_tax_ratec=NULL
      WHERE ((getTaxSelection(_taxauthid, cobill_taxtype_id) IS NULL)
	AND  (cobill_cobmisc_id=pcobmiscId));
    END IF;

    RETURN pcobmiscId;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.changeinvoicetaxauth-integer-integer">changeinvoicetaxauth( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    pInvcheadId		ALIAS FOR $1;
    pTaxauthId		ALIAS FOR $2;
    _freighttaxtype	INTEGER;
    _invccurr		INTEGER;
    _invcdate		DATE;
    _oldtaxcurr		INTEGER;
    _taxauthid		INTEGER;
    _taxcurr		INTEGER;

  BEGIN

    SELECT invchead_taxauth_id, invchead_curr_id, invchead_invcdate,
	   COALESCE(invchead_tax_curr_id, invchead_curr_id)
	     INTO _taxauthid, _invccurr, _invcdate, _oldtaxcurr
    FROM invchead WHERE (invchead_id=pInvcheadId);

    IF (NOT FOUND) THEN
      RETURN -1;
    ELSIF (_taxauthid = pTaxauthId) THEN
      RETURN pInvcheadId;
    END IF;

    IF (pTaxauthId &lt; 0) THEN
      _taxauthid = NULL;
    ELSE
      _taxauthid = pTaxauthId;
    END IF;

    IF (_taxauthid IS NULL) THEN
      UPDATE invchead SET invchead_taxauth_id=NULL,
			  invchead_tax_curr_id=invchead_curr_id,
			  invchead_adjtax_ratea=NULL,
			  invchead_adjtax_rateb=NULL,
			  invchead_adjtax_ratec=NULL,
			  invchead_freighttax_id=NULL,
			  invchead_freighttaxtype_id=NULL
      WHERE invchead_id=pInvcheadId;

      UPDATE invcitem SET
	invcitem_tax_id=NULL,
	invcitem_tax_pcta=NULL, invcitem_tax_pctb=NULL, invcitem_tax_pctc=NULL,
	invcitem_tax_ratea=NULL, invcitem_tax_rateb=NULL, invcitem_tax_ratec=NULL
      WHERE (invcitem_invchead_id=pInvcheadId);

    ELSE -- there is a tax authority with jurisdiction
      SELECT COALESCE(taxauth_curr_id, _invccurr), getFreightTaxTypeId()
	    INTO _taxcurr, _freighttaxtype
      FROM taxauth
      WHERE (taxauth_id=_taxauthid);

      IF (NOT FOUND) THEN
	RETURN -2;
      END IF;

      UPDATE invchead SET invchead_taxauth_id=_taxauthid,
			  invchead_tax_curr_id=_taxcurr,
			  invchead_adjtax_ratea=currToCurr(_oldtaxcurr, _taxcurr,
					      invchead_adjtax_ratea, _invcdate),
			  invchead_adjtax_rateb=currToCurr(_oldtaxcurr, _taxcurr,
					      invchead_adjtax_rateb, _invcdate),
			  invchead_adjtax_ratec=currToCurr(_oldtaxcurr, _taxcurr,
					      invchead_adjtax_ratec, _invcdate),
			  invchead_freighttax_id=getTaxSelection(_taxauthid,
							      _freighttaxtype),
			  invchead_freighttaxtype_id=_freighttaxtype
      WHERE invchead_id=pInvcheadId;

      -- first do the normal case - invcitem has an item record
      UPDATE invcitem SET
	invcitem_tax_id=tax_id,
	invcitem_taxtype_id=getItemTaxType(item_id, _taxauthid),
	invcitem_tax_pcta=tax_ratea,
	invcitem_tax_pctb=tax_rateb,
	invcitem_tax_pctc=tax_ratec,
	invcitem_tax_ratea=currToCurr(_invccurr, _taxcurr,
				      calculateTax(tax_id,
					  (invcitem_billed * invcitem_qty_invuomratio) * (invcitem_price /
					  COALESCE(invcitem_price_invuomratio, 1)),
					  0, &#39;A&#39;),
				      _invcdate),
	invcitem_tax_rateb=currToCurr(_invccurr, _taxcurr,
				      calculateTax(tax_id,
					  (invcitem_billed * invcitem_qty_invuomratio) * (invcitem_price /
					  COALESCE(invcitem_price_invuomratio, 1)),
					  0, &#39;B&#39;),
				      _invcdate),
	invcitem_tax_ratec=currToCurr(_invccurr, _taxcurr,
				      calculateTax(tax_id,
					  (invcitem_billed * invcitem_qty_invuomratio) * (invcitem_price /
					  COALESCE(invcitem_price_invuomratio, 1)),
					  0, &#39;C&#39;),
				      _invcdate)
      FROM item, tax
      WHERE ((item_id=invcitem_item_id)
	AND  (tax_id=getTaxSelection(_taxauthid, getItemTaxType(item_id, _taxauthid)))
	AND  (invcitem_invchead_id=pInvcheadId));

      -- now catch misc items, those without an item record
      UPDATE invcitem SET
	invcitem_tax_id=tax_id,
	invcitem_tax_pcta=tax_ratea,
	invcitem_tax_pctb=tax_rateb,
	invcitem_tax_pctc=tax_ratec,
	invcitem_tax_ratea=currToCurr(_invccurr, _taxcurr,
				      calculateTax(tax_id,
					  invcitem_billed * invcitem_price,
					  0, &#39;A&#39;),
				      _invcdate),
	invcitem_tax_rateb=currToCurr(_invccurr, _taxcurr,
				      calculateTax(tax_id,
					  invcitem_billed * invcitem_price,
					  0, &#39;B&#39;),
				      _invcdate),
	invcitem_tax_ratec=currToCurr(_invccurr, _taxcurr,
				      calculateTax(tax_id,
					  invcitem_billed * invcitem_price,
					  0, &#39;C&#39;),
				      _invcdate)
      FROM tax
      WHERE ((invcitem_item_id NOT IN (SELECT item_id FROM item))
	AND  (tax_id=getTaxSelection(_taxauthid, invcitem_taxtype_id))
	AND  (invcitem_invchead_id=pInvcheadId));

      -- finally catch those items that have no taxselection
      UPDATE invcitem SET
	invcitem_tax_id=NULL,
	invcitem_tax_pcta=NULL, invcitem_tax_pctb=NULL, invcitem_tax_pctc=NULL,
	invcitem_tax_ratea=NULL, invcitem_tax_rateb=NULL, invcitem_tax_ratec=NULL 
      WHERE ((getTaxSelection(_taxauthid, invcitem_taxtype_id) IS NULL)
	AND  (invcitem_invchead_id=pInvcheadId));
    END IF;

    RETURN pInvcheadId;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.changepoitemduedate-integer-date">changepoitemduedate( integer, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPoitemid ALIAS FOR $1;
  pDate ALIAS FOR $2;

BEGIN

  IF ( ( SELECT (poitem_status IN (&#39;C&#39;))
         FROM poitem
         WHERE (poitem_id=pPoitemid) ) ) THEN
    RETURN -1;
  END IF;

  UPDATE poitem
  SET poitem_duedate=pDate
  WHERE (poitem_id=pPoitemid);

  RETURN pPoitemid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.changepoitemqty-integer-numeric">changepoitemqty( integer, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPoitemid ALIAS FOR $1;
  pQty ALIAS FOR $2;

BEGIN

  IF ( ( SELECT (poitem_status IN (&#39;C&#39;))
         FROM poitem
         WHERE (poitem_id=pPoitemid) ) ) THEN
    RETURN -1;
  END IF;

  UPDATE poitem
  SET poitem_qty_ordered=pQty
  WHERE (poitem_id=pPoitemid);

  RETURN pPoitemid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.changeprqty-integer-numeric">changeprqty( integer, numeric )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPrid ALIAS FOR $1;
  pQty ALIAS FOR $2;

BEGIN

  UPDATE pr
  SET pr_qtyreq=pQty
  WHERE (pr_id=pPrid);

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.changequotetaxauth-integer-integer">changequotetaxauth( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    pquheadId		ALIAS FOR $1;
    pTaxauthId		ALIAS FOR $2;
    _qucurr		INTEGER;
    _oldtaxcurr		INTEGER;
    _taxauthid		INTEGER;
    _taxcurr		INTEGER;

  BEGIN
    SELECT quhead_taxauth_id, quhead_curr_id,
	   COALESCE(taxauth_curr_id, quhead_curr_id)
	     INTO _taxauthid, _qucurr, _oldtaxcurr
    FROM quhead LEFT OUTER JOIN taxauth ON (quhead_taxauth_id=taxauth_id)
    WHERE (quhead_id=pquheadId);

    IF (NOT FOUND) THEN
      RETURN -1;
    ELSIF (_taxauthid = pTaxauthId) THEN
      RETURN pquheadId;
    END IF;

    IF (pTaxauthId &lt; 0) THEN
      _taxauthid = NULL;
    ELSE
      _taxauthid = pTaxauthId;
    END IF;

    IF (_taxauthid IS NULL) THEN
      UPDATE quhead SET quhead_taxauth_id=NULL
      WHERE quhead_id=pquheadId;

      UPDATE quitem SET
	quitem_tax_id=NULL
      WHERE (quitem_quhead_id=pquheadId);

    ELSE -- there is a tax authority with jurisdiction
      SELECT COALESCE(taxauth_curr_id, _qucurr) INTO _taxcurr
      FROM taxauth
      WHERE (taxauth_id=_taxauthid);

      IF (NOT FOUND) THEN
	RETURN -2;
      END IF;

      UPDATE quhead SET quhead_taxauth_id=_taxauthid
      WHERE quhead_id=pquheadId;

      -- normal case
      UPDATE quitem SET quitem_tax_id=tax_id
      FROM itemsite, tax
      WHERE ((itemsite_id=quitem_itemsite_id)
	AND  (tax_id=getTaxSelection(_taxauthid,
				getItemTaxType(itemsite_item_id, _taxauthid)))
	AND  (quitem_quhead_id=pquheadId));

      -- case where taxselection is null
      UPDATE quitem SET quitem_tax_id=NULL
      FROM itemsite, tax
      WHERE ((itemsite_id=quitem_itemsite_id)
        AND  (getTaxSelection(_taxauthid, getItemTaxType(itemsite_item_id,
							 _taxauthid)) IS NULL)
	AND  (quitem_quhead_id=pquheadId));
    END IF;

    RETURN pquheadId;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.changesotaxauth-integer-integer">changesotaxauth( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    pcoheadId		ALIAS FOR $1;
    pTaxauthId		ALIAS FOR $2;
    _socurr		INTEGER;
    _oldtaxcurr		INTEGER;
    _taxauthid		INTEGER;
    _taxcurr		INTEGER;

  BEGIN
    SELECT cohead_taxauth_id, cohead_curr_id,
	   COALESCE(taxauth_curr_id, cohead_curr_id)
	     INTO _taxauthid, _socurr, _oldtaxcurr
    FROM cohead LEFT OUTER JOIN taxauth ON (cohead_taxauth_id=taxauth_id)
    WHERE (cohead_id=pcoheadId);

    IF (NOT FOUND) THEN
      RETURN -1;
    ELSIF (_taxauthid = pTaxauthId) THEN
      RETURN pcoheadId;
    END IF;

    IF (pTaxauthId &lt; 0) THEN
      _taxauthid = NULL;
    ELSE
      _taxauthid = pTaxauthId;
    END IF;

    IF (_taxauthid IS NULL) THEN
      UPDATE cohead SET cohead_taxauth_id=NULL
      WHERE cohead_id=pcoheadId;

      UPDATE coitem SET
	coitem_tax_id=NULL
      WHERE (coitem_cohead_id=pcoheadId);

    ELSE -- there is a tax authority with jurisdiction
      SELECT COALESCE(taxauth_curr_id, _socurr) INTO _taxcurr
      FROM taxauth
      WHERE (taxauth_id=_taxauthid);

      IF (NOT FOUND) THEN
	RETURN -2;
      END IF;

      UPDATE cohead SET cohead_taxauth_id=_taxauthid
      WHERE cohead_id=pcoheadId;

      -- normal case
      UPDATE coitem SET coitem_tax_id=tax_id
      FROM itemsite, tax
      WHERE ((itemsite_id=coitem_itemsite_id)
	AND  (tax_id=getTaxSelection(_taxauthid,
				getItemTaxType(itemsite_item_id, _taxauthid)))
	AND  (coitem_cohead_id=pcoheadId));

      -- case where taxselection is null
      UPDATE coitem SET coitem_tax_id=NULL
      FROM itemsite, tax
      WHERE ((itemsite_id=coitem_itemsite_id)
        AND  (getTaxSelection(_taxauthid, getItemTaxType(itemsite_item_id,
							 _taxauthid)) IS NULL)
	AND  (coitem_cohead_id=pcoheadId));
    END IF;

    RETURN pcoheadId;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.changetotaxauth-integer-integer">changetotaxauth( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    ptoheadid		ALIAS FOR $1;
    ptaxauthId		ALIAS FOR $2;
    _oldtaxcurr		INTEGER;
    _taxauthid		INTEGER;
    _taxcurr		INTEGER;
    _tocurr		INTEGER;

  BEGIN
    SELECT tohead_taxauth_id, tohead_freight_curr_id,
	   COALESCE(taxauth_curr_id, tohead_freight_curr_id)
	     INTO _taxauthid, _tocurr, _oldtaxcurr
    FROM tohead LEFT OUTER JOIN taxauth ON (tohead_taxauth_id=taxauth_id)
    WHERE (tohead_id=ptoheadid);

    IF (NOT FOUND) THEN
      RETURN -1;
    ELSIF (_taxauthid = ptaxauthid OR
	   (_taxauthid IS NULL AND ptaxauthid IS NULL)) THEN
      RETURN ptoheadid;
    END IF;

    IF (ptaxauthid &lt; 0) THEN
      _taxauthid = NULL;
    ELSE
      _taxauthid = ptaxauthId;
    END IF;

    IF (_taxauthid IS NULL) THEN
      UPDATE tohead SET tohead_taxauth_id=NULL
      WHERE tohead_id=ptoheadid;

      UPDATE toitem SET
	toitem_freighttax_id=NULL
      WHERE (toitem_tohead_id=ptoheadid);

    ELSE -- there is a tax authority with jurisdiction
      SELECT COALESCE(taxauth_curr_id, _tocurr) INTO _taxcurr
      FROM taxauth
      WHERE (taxauth_id=_taxauthid);

      IF (NOT FOUND) THEN
	RETURN -2;
      END IF;

      UPDATE tohead SET tohead_taxauth_id=_taxauthid
      WHERE tohead_id=ptoheadid;

      -- normal case
      UPDATE toitem SET toitem_freighttax_id=tax_id
      FROM tax
      WHERE ((tax_id=getTaxSelection(_taxauthid,
			      getItemTaxType(toitem_item_id, _taxauthid)))
	AND  (toitem_tohead_id=ptoheadid));

      -- case where taxselection is null
      UPDATE toitem SET toitem_freighttax_id=NULL
      FROM tax
      WHERE ((getTaxSelection(_taxauthid,
		      getItemTaxType(toitem_item_id, _taxauthid)) IS NULL)
	AND  (toitem_tohead_id=ptoheadid));
    END IF;

    RETURN ptoheadid;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.changewodates-integer-date-date-boolean">changewodates( integer, date, date, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE 
  pWoid ALIAS FOR $1;
  pStartDate ALIAS FOR $2;
  pDueDate ALIAS FOR $3;
  changeChildren ALIAS FOR $4;
  _p RECORD;
  returnCode INTEGER;

BEGIN

  SELECT wo_status, wo_startdate INTO _p
  FROM wo
  WHERE (wo_id=pWoid);

  IF (_p.wo_status = &#39;C&#39;) THEN 
    returnCode := 0;

  ELSIF (_p.wo_status IN (&#39;R&#39;,&#39;I&#39;)) THEN
    INSERT INTO evntlog (evntlog_evnttime, evntlog_username, evntlog_evnttype_id,
                         evntlog_ordtype, evntlog_ord_id, evntlog_warehous_id, evntlog_number,
                         evntlog_olddate, evntlog_newdate)
    SELECT CURRENT_TIMESTAMP, evntnot_username, evnttype_id,
           &#39;W&#39;, wo_id, itemsite_warehous_id, formatWoNumber(wo_id),
           wo_duedate, pDueDate
    FROM evntnot, evnttype, itemsite, item, wo
    WHERE ( (evntnot_evnttype_id=evnttype_id)
     AND (evntnot_warehous_id=itemsite_warehous_id)
     AND (wo_itemsite_id=itemsite_id)
     AND (itemsite_item_id=item_id)
     AND (evnttype_name=&#39;RWoDueDateRequestChange&#39;)
     AND (wo_id=pWoid) );

     returnCode := 0;

  END IF;
  
--  Reschedule operations if routings enabled
  IF ( ( SELECT (metric_value=&#39;t&#39;)
         FROM metric
         WHERE (metric_name=&#39;Routings&#39;) ) ) THEN

--    Reschedule wooper
    UPDATE wooper
    SET wooper_scheduled = (wooper_scheduled::DATE + (pStartDate - wo_startdate))
    FROM wo
    WHERE ( (wooper_wo_id=wo_id)
     AND (wo_id=pWoid) );

--    Reschedule any womatl that is linked to wooper items
--    and is set to be scheduled with the wooper in question
    UPDATE womatl
    SET womatl_duedate=wooper_scheduled
    FROM wooper
    WHERE ( (womatl_schedatwooper)
     AND (womatl_wooper_id=wooper_id)
     AND (womatl_wo_id=pWoid) );
  END IF;

-- Reschedule any womatl that is not linked to wooper items
  UPDATE womatl
  SET womatl_duedate=pStartDate
  WHERE ( (NOT womatl_schedatwooper)
   AND (womatl_wo_id=pWoid) );

--  Reschedule the W/O
  UPDATE wo
  SET wo_startdate=pStartDate,
      wo_duedate=pDueDate
  WHERE (wo_id=pWoid);

--  Do the same for the children
  IF (changeChildren) THEN
    SELECT MAX(changeWoDates(wo_id, (pStartDate - itemsite_leadtime), pStartDate, TRUE)) INTO returnCode
    FROM wo, itemsite
    WHERE ( (wo_itemsite_id=itemsite_id)
     AND (wo_ordtype=&#39;W&#39;)
     AND (wo_ordid=pWoid) );
  END IF;

  IF (returnCode IS NULL) THEN
    returnCode := 0;
  END IF;

  RETURN returnCode;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.changewoproject-integer-integer-boolean">changewoproject( integer, integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid ALIAS FOR $1;
  pPrjid ALIAS FOR $2;
  changeChildren ALIAS FOR $3;
  woStatus CHAR(1);
  _result INTEGER;

BEGIN

  SELECT wo_status INTO woStatus
  FROM wo
  WHERE (wo_id=pWoid);

  UPDATE wo
  SET wo_prj_id=pPrjid
  WHERE (wo_id=pWoid);

  IF (woStatus = &#39;E&#39; AND changeChildren) THEN
    _result := ( SELECT MIN(changeWoProject(wo_id, pPrjid, TRUE))
                   FROM womatl, wo
                  WHERE ((womatl_itemsite_id=wo_itemsite_id)
                    AND (wo_ordtype=&#39;W&#39;)
                    AND (womatl_wo_id=pWoid)
                    AND (wo_ordid=pWoid)) );

    UPDATE pr SET pr_prj_id=pPrjid
      FROM womatl
     WHERE ((womatl_wo_id=pWoid)
       AND  (pr_order_type=&#39;W&#39;)
       AND  (pr_order_id=womatl_id));
  ELSE
    _result = 1;
  END IF;

  RETURN _result;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.changewoqty-integer-numeric-boolean">changewoqty( integer, numeric, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid ALIAS FOR $1;
  pQty ALIAS FOR $2;
  changeChildren ALIAS FOR $3;
  woStatus CHAR(1);
  _result INTEGER;

BEGIN

  SELECT wo_status INTO woStatus
  FROM wo
  WHERE (wo_id=pWoid);

  IF (woStatus IN (&#39;R&#39;,&#39;I&#39;)) THEN
    INSERT INTO evntlog (evntlog_evnttime, evntlog_username, evntlog_evnttype_id,
                         evntlog_ordtype, evntlog_ord_id, evntlog_warehous_id, evntlog_number,
                         evntlog_oldvalue, evntlog_newvalue)
    SELECT CURRENT_TIMESTAMP, evntnot_username, evnttype_id,
           &#39;W&#39;, wo_id, itemsite_warehous_id, formatWoNumber(wo_id),
           wo_qtyord, pQty
    FROM evntnot, evnttype, itemsite, item, wo
    WHERE ( (evntnot_evnttype_id=evnttype_id)
     AND (evntnot_warehous_id=itemsite_warehous_id)
     AND (wo_itemsite_id=itemsite_id)
     AND (itemsite_item_id=item_id)
     AND (evnttype_name=&#39;RWoQtyRequestChange&#39;)
     AND (wo_id=pWoid) );

     _result = 0;
  END IF;

  UPDATE wo
  SET wo_qtyord=pQty
  WHERE (wo_id=pWoid);

  IF (woStatus IN (&#39;E&#39;,&#39;R&#39;,&#39;I&#39;)) THEN
    UPDATE womatl
    SET womatl_qtyreq=(wo_qtyord * (womatl_qtyper * (1 + womatl_scrap)))
    FROM wo
    WHERE ((womatl_wo_id=wo_id)
     AND (wo_id=pWoid));

    IF ( ( SELECT (metric_value=&#39;t&#39;)
           FROM metric
           WHERE (metric_name=&#39;Routings&#39;) ) ) THEN

        UPDATE wooper
           SET wooper_rntime = CASE WHEN ((booitem_rnqtyper = 0) OR (booitem_invproduomratio = 0)) THEN 0
                                    WHEN (NOT booitem_rnrpt) THEN 0
                                    ELSE ( ( booitem_rntime /
                                             booitem_rnqtyper /
                                             booitem_invproduomratio ) * wo_qtyord )
                               END
          FROM booitem, wo
         WHERE ((wooper_wo_id=wo_id)
           AND  (wooper_booitem_id=booitem_id)
           AND  (wo_id=pWoid));
    END IF;

    IF (changeChildren) THEN
      _result := ( SELECT MIN(changeWoQty(wo_id, womatl_qtyreq, TRUE))
                   FROM womatl, wo
                   WHERE ((womatl_itemsite_id=wo_itemsite_id)
                    AND (wo_ordtype=&#39;W&#39;)
                    AND (womatl_wo_id=pWoid)
                    AND (wo_ordid=pWoid)) );
    ELSE
      _result = 1;
    END IF;
  ELSE
    _result = 1;
  END IF;

  RETURN _result;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.characteristicstostring-text-integer-text-text">characteristicstostring( text, integer, text, text )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTargetType ALIAS FOR $1;
  pTargetId ALIAS FOR $2;
  pValKeySep ALIAS FOR $3;
  pPairSep ALIAS FOR $4;
  _string TEXT := &#39;&#39;;
  _extra BOOLEAN := false;
  _r RECORD;
BEGIN
  FOR _r IN SELECT char_name, charass_value
              FROM charass, char
             WHERE ((charass_char_id=char_id)
               AND  (charass_target_type=pTargetType)
               AND  (charass_target_id=pTargetId)) LOOP
    IF(_extra) THEN
      _string := _string || pPairSep;
    END IF;
    _extra := true;

    _string := _string || _r.char_name || pValKeySep || _r.charass_value;
  END LOOP;

  RETURN _string;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.checkboositeprivs-integer">checkboositeprivs( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBooheadid ALIAS FOR $1;
  _check    BOOLEAN;
  _result   INTEGER;

BEGIN

  IF (NOT fetchMetricBool(&#39;MultiWhs&#39;)) THEN
    RETURN true;
  END IF;

  IF (NOT fetchUsrPrefBool(&#39;selectedSites&#39;)) THEN
    RETURN true;
  END IF;

  SELECT COALESCE(COUNT(*), 0) INTO _result
    FROM ( SELECT booitem_id
             FROM boohead, booitem, wrkcnt
            WHERE ( (boohead_id=pBooheadid)
              AND   (booitem_item_id=boohead_item_id)
              AND   (booitem_rev_id=boohead_rev_id)
              AND   (booitem_wrkcnt_id=wrkcnt_id)
              AND   (wrkcnt_warehous_id NOT IN (SELECT usrsite_warehous_id
                                                    FROM usrsite
                                                   WHERE (usrsite_username=current_user))) )
         ) AS data;
  IF (_result &gt; 0) THEN
    RETURN false;
  END IF;

  RETURN true;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.checkcreditmemositeprivs-integer">checkcreditmemositeprivs( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCmheadid ALIAS FOR $1;
  _check    BOOLEAN;
  _result   INTEGER;

BEGIN

  IF (NOT fetchMetricBool(&#39;MultiWhs&#39;)) THEN
    RETURN true;
  END IF;

  IF (NOT fetchUsrPrefBool(&#39;selectedSites&#39;)) THEN
    RETURN true;
  END IF;

  SELECT COALESCE(COUNT(*), 0) INTO _result
    FROM ( SELECT cmitem_id
             FROM cmitem JOIN itemsite ON (itemsite_id=cmitem_itemsite_id)
            WHERE ( (cmitem_cmhead_id=pCmheadid)
              AND   (itemsite_warehous_id NOT IN (SELECT usrsite_warehous_id
                                                    FROM usrsite
                                                   WHERE (usrsite_username=current_user))) )
         ) AS data;
  IF (_result &gt; 0) THEN
    RETURN false;
  END IF;

  RETURN true;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.checkdetailformatted-integer-integer">checkdetailformatted( integer, integer )</a>
		</h2>
<h3>Returns: SET OF checkdata</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCheckheadid ALIAS FOR $1;
  pMaxLines ALIAS FOR $2;
  _row checkdata%ROWTYPE;
  _checkhead RECORD;
  _checkdetail RECORD;
  _rowcount INTEGER := 0;
  _page INTEGER := 1;
  _docnumber TEXT := &#39;&#39;;
  _docreference TEXT := &#39;&#39;;
  _docdate TEXT := &#39;&#39;;
  _docamount TEXT := &#39;&#39;;
  _docdiscount TEXT := &#39;&#39;;
  _docnetamount TEXT := &#39;&#39;;
BEGIN

-- Check header information
  SELECT checkhead_number AS checknumber,
         INITCAP(spellAmount(checkhead_amount, curr_id)) AS checkwords,
         formatDate(checkhead_checkdate) AS checkdate,
         formatMoney(checkhead_amount) AS checkamount,
         curr_symbol AS checkcurrsymbol,
         curr_abbr AS checkcurrabbr,
         curr_name AS checkcurrname,
         CASE WHEN checkhead_recip_type = &#39;C&#39; THEN (SELECT cust_name
                                                      FROM custinfo
                                                     WHERE cust_id=checkhead_recip_id)
              WHEN checkhead_recip_type = &#39;T&#39; THEN (SELECT taxauth_name
                                                      FROM taxauth
                                                     WHERE taxauth_id=checkhead_recip_id)
              WHEN checkhead_recip_type = &#39;V&#39; THEN
                                  COALESCE((SELECT vendaddr_name
                                              FROM vendaddr
                                             WHERE((UPPER(vendaddr_code)=&#39;REMIT&#39;)
                                               AND (vendaddr_vend_id=checkhead_recip_id))),
                                           (SELECT vend_name
                                              FROM vendinfo
                                             WHERE(vend_id=checkhead_recip_id)))
         END AS checkpayto,
         formatAddr(CASE WHEN checkhead_recip_type = &#39;C&#39; THEN
                                                  (SELECT cntct_addr_id
                                                   FROM cntct, custinfo
                                                    WHERE((cust_cntct_id=cntct_id)
                                                      AND (cust_id=checkhead_recip_id)))
                         WHEN checkhead_recip_type = &#39;T&#39; THEN 
                                                  (SELECT taxauth_addr_id
                                                     FROM taxauth
                                                    WHERE(taxauth_id=checkhead_recip_id))
                         WHEN checkhead_recip_type = &#39;V&#39; THEN
                                 COALESCE((SELECT vendaddr_addr_id
                                             FROM vendaddrinfo
                                            WHERE((UPPER(vendaddr_code)=&#39;REMIT&#39;)
                                              AND (vendaddr_vend_id=checkhead_recip_id))),
                                          (SELECT vend_addr_id
                                             FROM vendinfo
                                            WHERE(vend_id=checkhead_recip_id)))
                    END) AS checkaddress,
         checkhead_for AS checkmemo
    INTO _checkhead
    FROM checkhead, curr_symbol
   WHERE((checkhead_curr_id = curr_id)
     AND (checkhead_id=pCheckheadid) );
  IF (NOT FOUND) THEN
    RETURN;
  END IF;

  _row.checkdata_page := _page;
  _row.checkdata_checknumber := _checkhead.checknumber;
  _row.checkdata_checkwords := _checkhead.checkwords;
  _row.checkdata_checkdate := _checkhead.checkdate;
  _row.checkdata_checkamount := _checkhead.checkamount;
  _row.checkdata_checkcurrsymbol := _checkhead.checkcurrsymbol;
  _row.checkdata_checkcurrabbr := _checkhead.checkcurrabbr;
  _row.checkdata_checkcurrname := _checkhead.checkcurrname;
  _row.checkdata_checkpayto := _checkhead.checkpayto;
  _row.checkdata_checkaddress := _checkhead.checkaddress;
  _row.checkdata_checkmemo := _checkhead.checkmemo;

-- Check item details
  FOR _checkdetail IN 
  SELECT  --VOUCHER-------------
    1 AS ord,
    1 AS sequence_value,
    checkitem_invcnumber,
    checkitem_ponumber,
    formatMoney(checkitem_amount) AS docnetamount,
    &#39;Invoice#: &#39; || vohead_invcnumber AS docnumber,
    formatDate(vohead_docdate) AS docdate,
    vohead_reference AS docreference,
    &#39;Voucher: &#39; || checkitem_vouchernumber AS vouchernumber,
    formatMoney(apopen_amount) AS docamount,
    formatMoney(checkitem_discount) AS docdiscount
  FROM checkitem, vohead, apopen
  WHERE ((checkitem_checkhead_id=pCheckheadid)
    AND  (checkitem_vouchernumber = vohead_number)
    AND  (apopen_docnumber = checkitem_vouchernumber)
    AND  (apopen_doctype = &#39;V&#39;))
  
  UNION
  
  SELECT --DEBIT MEMO -------------------------
    2 AS ord,
    1 AS sequence_value,
    checkitem_invcnumber,
    checkitem_ponumber,
    formatMoney(checkitem_amount) AS f_amount,
    &#39;Debit Memo PO#: &#39; || checkitem_ponumber AS doc_number,
    &#39;&#39;  AS f_docdate,
    &#39;Debit Memo: &#39; || checkitem_vouchernumber AS doc_reference,
    checkitem_vouchernumber AS vouchernumber,
    formatMoney(apopen_amount) AS amount,
    formatMoney(checkitem_discount) AS disc_cred
  FROM checkitem, apopen
  WHERE ((checkitem_checkhead_id=pCheckheadid)
    AND  (checkitem_vouchernumber = apopen_docnumber)
    AND  (apopen_doctype = &#39;D&#39;))
  
  UNION
  
  SELECT --CREDITs--------------------------
    3 AS ord,
    1 AS sequence_value,
    checkitem_invcnumber,
    checkitem_ponumber,
    formatMoney(checkitem_amount) AS f_amount,
    &#39;Invoice#: &#39; || vohead_invcnumber AS doc_number,
    formatDate(vohead_docdate) AS f_docdate,
    &#39;Credit Applied: &#39; || apapply_source_doctype || &#39; &#39; ||
                          apapply_source_docnumber AS doc_reference,
    &#39;Voucher &#39; || checkitem_vouchernumber AS vouchernumber,
    &#39;&#39; AS amount,
    formatMoney((apapply_amount)) AS disc_cred
  FROM checkitem, vohead, apapply
  WHERE ((checkitem_checkhead_id=pCheckheadid)
    AND  (checkitem_vouchernumber = vohead_number)
    AND  (apapply_target_docnumber = checkitem_vouchernumber ))
  
  UNION 
  
  SELECT --NON-VENDOR-----------------------
    4 AS ord,
    1 AS sequence_value,
    checkitem_invcnumber,
    checkitem_ponumber,
    formatMoney(checkitem_amount) AS f_amount,
    checkitem_invcnumber AS doc_number,
    formatDate(checkitem_docdate) AS f_docdate,
    &#39;&#39; AS doc_reference,
    &#39;&#39; AS vouchernumber,
    &#39;&#39; AS amount,
    &#39;&#39; AS disc_cred
  FROM checkhead LEFT OUTER JOIN
       checkitem ON (checkitem_checkhead_id=checkhead_id)
  WHERE ((checkhead_id=pCheckheadid) 
    AND  (checkhead_recip_type != &#39;V&#39;)) LOOP
    IF (_rowcount = pMaxLines) THEN
      _row.checkdata_docnumber := _docnumber;
      _row.checkdata_docreference := _docreference;
      _row.checkdata_docdate := _docdate;
      _row.checkdata_docamount := _docamount;
      _row.checkdata_docdiscount := _docdiscount;
      _row.checkdata_docnetamount := _docnetamount;
      RETURN NEXT _row;

-- update/reset some variables
      _rowcount = 0;
      _page := _page + 1;
      _docnumber := &#39;&#39;;
      _docreference := &#39;&#39;;
      _docdate := &#39;&#39;;
      _docamount := &#39;&#39;;
      _docdiscount := &#39;&#39;;
      _docnetamount := &#39;&#39;;

      _row.checkdata_page := _page;
      _row.checkdata_checknumber := _checkhead.checknumber;
      _row.checkdata_checkwords := &#39;VOID VOID PAGE &#39;||_page||&#39; OF CHECK #&#39;||_checkhead.checknumber||&#39; VOID VOID&#39;;
      _row.checkdata_checkdate := &#39;VOID VOID VOID&#39;;
      _row.checkdata_checkamount := &#39;VOID VOID VOID&#39;;
      --_row.checkdata_checkcurrsymbol := _checkhead.checkcurrsymbol;
      --_row.checkdata_checkcurrabbr := _checkhead.checkcurrabbr;
      --_row.checkdata_checkcurrname := _checkhead.checkcurrname;
      _row.checkdata_checkpayto := &#39;VOID VOID VOID&#39;;
      --_row.checkdata_checkaddress := _checkhead.checkaddress;
      _row.checkdata_checkmemo := &#39;VOID VOID PAGE &#39;||_page||&#39; OF CHECK #&#39;||_checkhead.checknumber||&#39; VOID VOID&#39;;
    END IF;

    _rowcount := _rowcount + 1;
    _docnumber := _docnumber || _checkdetail.docnumber || &#39;\n&#39;;
    _docreference := _docreference || _checkdetail.docreference || &#39;\n&#39;;
    _docdate := _docdate || _checkdetail.docdate || &#39;\n&#39;;
    _docamount := _docamount || _checkdetail.docamount || &#39;\n&#39;;
    _docdiscount := _docdiscount || _checkdetail.docdiscount || &#39;\n&#39;;
    _docnetamount := _docnetamount || _checkdetail.docnetamount || &#39;\n&#39;;
  END LOOP;

  _row.checkdata_docnumber := _docnumber;
  _row.checkdata_docreference := _docreference;
  _row.checkdata_docdate := _docdate;
  _row.checkdata_docamount := _docamount;
  _row.checkdata_docdiscount := _docdiscount;
  _row.checkdata_docnetamount := _docnetamount;

  RETURN NEXT _row;
  RETURN;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.checkinvoicesiteprivs-integer">checkinvoicesiteprivs( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pInvcheadid ALIAS FOR $1;
  _check    BOOLEAN;
  _result   INTEGER;

BEGIN

  IF (NOT fetchMetricBool(&#39;MultiWhs&#39;)) THEN
    RETURN true;
  END IF;

  IF (NOT fetchUsrPrefBool(&#39;selectedSites&#39;)) THEN
    RETURN true;
  END IF;

  SELECT COALESCE(COUNT(*), 0) INTO _result
    FROM ( SELECT invcitem_id
             FROM invcitem
            WHERE ( (invcitem_invchead_id=pInvcheadid)
              AND   (invcitem_warehous_id &lt;&gt; -1)
              AND   (invcitem_warehous_id NOT IN (SELECT usrsite_warehous_id
                                                    FROM usrsite
                                                   WHERE (usrsite_username=current_user))) )
         ) AS data;
  IF (_result &gt; 0) THEN
    RETURN false;
  END IF;

  RETURN true;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.checkpositeprivs-integer">checkpositeprivs( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPoheadid ALIAS FOR $1;
  _check    BOOLEAN;
  _result   INTEGER;

BEGIN

  IF (NOT fetchMetricBool(&#39;MultiWhs&#39;)) THEN
    RETURN true;
  END IF;

  IF (NOT fetchUsrPrefBool(&#39;selectedSites&#39;)) THEN
    RETURN true;
  END IF;

  SELECT COALESCE(COUNT(*), 0) INTO _result
    FROM ( SELECT poitem_id
             FROM poitem, itemsite
            WHERE ( (poitem_pohead_id=pPoheadid)
              AND   (poitem_itemsite_id=itemsite_id)
              AND   (itemsite_warehous_id NOT IN (SELECT usrsite_warehous_id
                                                    FROM usrsite
                                                   WHERE (usrsite_username=current_user))) )
           UNION
           SELECT pohead_warehous_id
             FROM pohead
            WHERE ( (pohead_id=pPoheadid)
              AND   (pohead_warehous_id NOT IN (SELECT usrsite_warehous_id
                                                  FROM usrsite
                                                 WHERE (usrsite_username=current_user))) )
         ) AS data;
  IF (_result &gt; 0) THEN
    RETURN false;
  END IF;

  RETURN true;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.checkprivilege-text">checkprivilege( text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPrivilege ALIAS FOR $1;
  _result TEXT;
BEGIN
  SELECT priv_id INTO _result
    FROM priv, grppriv, usrgrp
   WHERE((usrgrp_grp_id=grppriv_grp_id)
     AND (grppriv_priv_id=priv_id)
     AND (priv_name=pPrivilege)
     AND (usrgrp_username=CURRENT_USER));
  IF (FOUND) THEN
    RETURN true;
  END IF;

  SELECT priv_id INTO _result
  FROM priv, usrpriv
  WHERE ((priv_id=usrpriv_priv_id)
  AND (priv_name=pPrivilege)
  AND (usrpriv_username=CURRENT_USER));
  
  IF (FOUND) THEN
    RETURN true;
  ELSE
    RETURN false;
  END IF;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.checkquotesiteprivs-integer">checkquotesiteprivs( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pQuheadid ALIAS FOR $1;
  _check    BOOLEAN;
  _result   INTEGER;

BEGIN

  IF (NOT fetchMetricBool(&#39;MultiWhs&#39;)) THEN
    RETURN true;
  END IF;

  IF (NOT fetchUsrPrefBool(&#39;selectedSites&#39;)) THEN
    RETURN true;
  END IF;

  SELECT COALESCE(COUNT(*), 0) INTO _result
    FROM ( SELECT quitem_id
             FROM quitem, itemsite
            WHERE ( (quitem_quhead_id=pQuheadid)
              AND   (quitem_itemsite_id=itemsite_id)
              AND   (itemsite_warehous_id NOT IN (SELECT usrsite_warehous_id
                                                    FROM usrsite
                                                   WHERE (usrsite_username=current_user))) )
           UNION
           SELECT quhead_warehous_id
             FROM quhead
            WHERE ( (quhead_id=pQuheadid)
              AND   (quhead_warehous_id NOT IN (SELECT usrsite_warehous_id
                                                  FROM usrsite
                                                 WHERE (usrsite_username=current_user))) )
         ) AS data;
  IF (_result &gt; 0) THEN
    RETURN false;
  END IF;

  RETURN true;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.checkrasiteprivs-integer">checkrasiteprivs( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pRaheadid ALIAS FOR $1;
  _check    BOOLEAN;
  _result   INTEGER;

BEGIN

  IF (NOT fetchMetricBool(&#39;MultiWhs&#39;)) THEN
    RETURN true;
  END IF;

  IF (NOT fetchUsrPrefBool(&#39;selectedSites&#39;)) THEN
    RETURN true;
  END IF;

  SELECT COALESCE(COUNT(*), 0) INTO _result
    FROM ( SELECT raitem_id
             FROM raitem, itemsite
            WHERE ( (raitem_rahead_id=pRaheadid)
              AND   (raitem_itemsite_id=itemsite_id)
              AND   (itemsite_warehous_id NOT IN (SELECT usrsite_warehous_id
                                                    FROM usrsite
                                                   WHERE (usrsite_username=current_user))) )
           UNION
           SELECT raitem_id
             FROM raitem, itemsite
            WHERE ( (raitem_rahead_id=pRaheadid)
              AND   (raitem_coitem_itemsite_id=itemsite_id)
              AND   (itemsite_warehous_id NOT IN (SELECT usrsite_warehous_id
                                                  FROM usrsite
                                                 WHERE (usrsite_username=current_user))) )
         ) AS data;
  IF (_result &gt; 0) THEN
    RETURN false;
  END IF;

  RETURN true;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.checkshipmentsiteprivs-integer">checkshipmentsiteprivs( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pShipheadid ALIAS FOR $1;
  _check    BOOLEAN;
  _result   INTEGER;

BEGIN

  IF (NOT fetchMetricBool(&#39;MultiWhs&#39;)) THEN
    RETURN true;
  END IF;

  IF (NOT fetchUsrPrefBool(&#39;selectedSites&#39;)) THEN
    RETURN true;
  END IF;

  SELECT COALESCE(COUNT(*), 0) INTO _result
    FROM ( SELECT coitem_id
             FROM shipitem, coitem, itemsite
            WHERE ( (shipitem_shiphead_id=pShipheadid)
              AND   (coitem_id=shipitem_orderitem_id)
              AND   (coitem_itemsite_id=itemsite_id)
              AND   (itemsite_warehous_id NOT IN (SELECT usrsite_warehous_id
                                                    FROM usrsite
                                                   WHERE (usrsite_username=current_user))) )
           UNION
           SELECT cohead_warehous_id
             FROM shipitem, coitem, cohead
            WHERE ( (shipitem_shiphead_id=pShipheadid)
              AND   (coitem_id=shipitem_orderitem_id)
              AND   (cohead_id=coitem_cohead_id)
              AND   (cohead_warehous_id NOT IN (SELECT usrsite_warehous_id
                                                  FROM usrsite
                                                 WHERE (usrsite_username=current_user))) )
         ) AS data;
  IF (_result &gt; 0) THEN
    RETURN false;
  END IF;

  RETURN true;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.checksositeprivs-integer">checksositeprivs( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSoheadid ALIAS FOR $1;
  _check    BOOLEAN;
  _result   INTEGER;

BEGIN

  IF (NOT fetchMetricBool(&#39;MultiWhs&#39;)) THEN
    RETURN true;
  END IF;

  IF (NOT fetchUsrPrefBool(&#39;selectedSites&#39;)) THEN
    RETURN true;
  END IF;

  SELECT COALESCE(COUNT(*), 0) INTO _result
    FROM ( SELECT coitem_id
             FROM coitem, itemsite
            WHERE ( (coitem_cohead_id=pSoheadid)
              AND   (coitem_itemsite_id=itemsite_id)
              AND   (itemsite_warehous_id NOT IN (SELECT usrsite_warehous_id
                                                    FROM usrsite
                                                   WHERE (usrsite_username=current_user))) )
           UNION
           SELECT cohead_warehous_id
             FROM cohead
            WHERE ( (cohead_id=pSoheadid)
              AND   (cohead_warehous_id NOT IN (SELECT usrsite_warehous_id
                                                  FROM usrsite
                                                 WHERE (usrsite_username=current_user))) )
         ) AS data;
  IF (_result &gt; 0) THEN
    RETURN false;
  END IF;

  RETURN true;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.checkvouchersiteprivs-integer">checkvouchersiteprivs( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVoheadid ALIAS FOR $1;
  _check    BOOLEAN;
  _result   INTEGER;

BEGIN

  IF (NOT fetchMetricBool(&#39;MultiWhs&#39;)) THEN
    RETURN true;
  END IF;

  IF (NOT fetchUsrPrefBool(&#39;selectedSites&#39;)) THEN
    RETURN true;
  END IF;

  SELECT COALESCE(COUNT(*), 0) INTO _result
    FROM ( SELECT voitem_id
             FROM voitem, poitem, itemsite
            WHERE ( (voitem_vohead_id=pVoheadid)
              AND   (poitem_id=voitem_poitem_id)
              AND   (poitem_itemsite_id=itemsite_id)
              AND   (itemsite_warehous_id NOT IN (SELECT usrsite_warehous_id
                                                    FROM usrsite
                                                   WHERE (usrsite_username=current_user))) )
           UNION
           SELECT pohead_warehous_id
             FROM vohead, pohead
            WHERE ( (vohead_id=pVoheadid)
              AND   (pohead_id=vohead_pohead_id)
              AND   (pohead_warehous_id NOT IN (SELECT usrsite_warehous_id
                                                  FROM usrsite
                                                 WHERE (usrsite_username=current_user))) )
         ) AS data;
  IF (_result &gt; 0) THEN
    RETURN false;
  END IF;

  RETURN true;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.clearpayment-integer">clearpayment( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pApselectid ALIAS FOR $1;

BEGIN

  DELETE FROM apselect
  WHERE (apselect_id=pApselectid);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.closeaccountingperiod-integer">closeaccountingperiod( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPeriodid ALIAS FOR $1;
  _r RECORD;
  _nextPeriodid INTEGER;
  _trialbalid INTEGER;
  _ending NUMERIC;
  _currYear INTEGER;
  _nextYear INTEGER;
BEGIN

--  Bypass error checking is this the the initial period
  IF ( NOT ( SELECT period_initial
             FROM period
             WHERE (period_id=pPeriodid) ) ) THEN

--  Check to make use that the period is not already closed
    IF ( ( SELECT period_closed
           FROM period
           WHERE (period_id=pPeriodid) ) ) THEN
      RETURN -1;
    END IF;

--  Make sure that the day before this period belongs to another period
    SELECT prev.period_id AS periodid, prev.period_closed AS closed INTO _r
    FROM period AS prev, period AS curr
    WHERE ( (prev.period_end = (curr.period_start - 1))
     AND (curr.period_id=pPeriodid) );
    IF (NOT FOUND) THEN
      RETURN -2;
    END IF;

--  Make sure that the previous period is closed
    IF (NOT _r.closed) THEN
      RETURN -3;
    END IF;

  END IF;

--  Make sure that there the next period is defined
  SELECT next.period_id INTO _nextPeriodid
  FROM period AS next, period AS curr
  WHERE ( (next.period_start = (curr.period_end + 1))
   AND (curr.period_id=pPeriodid) );
  IF (NOT FOUND) THEN
    RETURN -4;
  END IF;

--  Make sure that the user is not trying to prematurely close the Period
  IF ( ( SELECT (period_end &gt;= CURRENT_DATE)
         FROM period
         WHERE (period_id=pPeriodid) ) ) THEN
    RETURN -5;
  END IF;

  SELECT yearperiod_id INTO _currYear
    FROM yearperiod, period
   WHERE ((period_end BETWEEN yearperiod_start and yearperiod_end)
     AND  (period_id=pPeriodid));
  IF (NOT FOUND) THEN
    _currYear := -1;
  END IF;

  SELECT yearperiod_id INTO _nextYear
    FROM yearperiod, period
   WHERE ((period_end BETWEEN yearperiod_start and yearperiod_end)
     AND  (period_id=_nextPeriodid));
  IF (NOT FOUND) THEN
    RETURN -6;
  END IF;

--  Walk through the entire COA, calculating the ending balance and pushing
--  it to the beginning balance for the next period
  FOR _r IN SELECT accnt_id, accnt_type IN (&#39;E&#39;, &#39;R&#39;) AS revexp,
                   trialbal_id, trialbal_beginning,
                   trialbal_credits, trialbal_debits
            FROM accnt LEFT OUTER JOIN trialbal ON ( (trialbal_accnt_id=accnt_id) AND (trialbal_period_id=pPeriodid) )
            ORDER BY accnt_id LOOP
    IF (_r.trialbal_id IS NULL) THEN
      _ending = 0;

      INSERT INTO trialbal
      ( trialbal_period_id, trialbal_accnt_id,
        trialbal_beginning, trialbal_ending, trialbal_dirty,
        trialbal_credits, trialbal_debits )
      VALUES
      ( pPeriodid, _r.accnt_id,
        0, 0, FALSE,
        0, 0 );
    ELSE
      _ending = (_r.trialbal_beginning - _r.trialbal_debits + _r.trialbal_credits);

      UPDATE trialbal
      SET trialbal_ending=_ending,
          trialbal_dirty = FALSE
      WHERE (trialbal_id=_r.trialbal_id);

      PERFORM forwardUpdateTrialBalance(_r.trialbal_id);
    END IF;

    IF (_r.revexp AND _currYear != _nextYear) THEN
      _ending := 0;
    END IF;

--  Find the trialbal record for the next period
    SELECT trialbal_id INTO _trialbalid
    FROM trialbal
    WHERE ( (trialbal_period_id=_nextPeriodid)
     AND (trialbal_accnt_id=_r.accnt_id) );
    IF (FOUND) THEN
      UPDATE trialbal
      SET trialbal_beginning = (_ending + trialbal_yearend),
          trialbal_ending = (_ending + trialbal_yearend - trialbal_debits + trialbal_credits)
      WHERE (trialbal_id=_trialbalid);
    ELSE
      INSERT INTO trialbal
      ( trialbal_period_id, trialbal_accnt_id,
        trialbal_beginning, trialbal_ending, trialbal_dirty,
        trialbal_credits, trialbal_debits )
      VALUES(_nextPeriodid, _r.accnt_id,
             _ending, _ending, TRUE,
             0, 0 );
    END IF;

  END LOOP;

--  Set the period_closed flag
  UPDATE period
  SET period_closed=TRUE
  WHERE (period_id=pPeriodid);

  RETURN pPeriodid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.closeaccountingyearperiod-integer">closeaccountingyearperiod( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pYearPeriodid ALIAS FOR $1;
  _r RECORD;
  _n RECORD;
  _beginningPeriodid INTEGER;
  _trialbalid INTEGER;
  _accntid INTEGER;
  _totalProfitLoss      NUMERIC;
  _periodid INTEGER;
  _forwardupdate INTEGER;

BEGIN

--  Check to make sure that the yearperiod is not already closed
  IF ( ( SELECT yearperiod_closed
           FROM yearperiod
          WHERE (yearperiod_id=pYearPeriodid) ) ) THEN
    RETURN -1;
  END IF;

--  Should we check for a previous yearperiod existing already ?
--  If so then we should return -2 if one does not.

--  If we did the previous yearperiod we should check to make sure that
--  it is also closed. Returning -3 if it is not.

--  First thing we need to do is to get the yearperiod

  SELECT * INTO _r FROM yearperiod where yearperiod_id = pYearPeriodid;

  IF (NOT FOUND) THEN
    RETURN -6;
  END IF;

--  Now we need to find the next yearperiod

  SELECT * INTO _n FROM yearperiod WHERE yearperiod_start = _r.yearperiod_end + interval &#39;1 day&#39;;

  IF (NOT FOUND) THEN
    RETURN -4;
  END IF;

--  Make sure that the user is not trying to prematurely close the YearPeriod
  IF ( ( SELECT (yearperiod_end &gt;= CURRENT_DATE)
           FROM yearperiod
          WHERE (yearperiod_id=pYearPeriodid) ) ) THEN
    RETURN -5;
  END IF;

--  Now we need to get the default account number for year end closing

  SELECT CAST ( metric_value AS integer ) INTO _accntid FROM metric WHERE metric_name = &#39;YearEndEquityAccount&#39;;

  IF (NOT FOUND) THEN
    RETURN -7;
  END IF;

--  So far so good.  Now we need to calculate the profit-loss for the year that we are closing

  SELECT SUM(gltrans_amount) INTO _totalProfitLoss
   FROM gltrans, accnt
   WHERE ( (gltrans_accnt_id = accnt_id)
     AND   (accnt_type IN ( &#39;R&#39;, &#39;E&#39; ) )
     AND   (gltrans_date between _r.yearperiod_start and _r.yearperiod_end ) );
  IF(_totalProfitLoss IS NULL) THEN
    _totalProfitLoss := 0;
  END IF;

--  Now we have to find where to stick the end of year data

  SELECT period_id INTO _periodid FROM period WHERE period_start = _n.yearperiod_start;

  IF (NOT FOUND) THEN
    RETURN -8;
  END IF;

-- Get the trailbal_id

  SELECT trialbal_id INTO _trialbalid
    FROM trialbal
   WHERE ( (trialbal_period_id = _periodid )
     AND   (trialbal_accnt_id = _accntid) );

  IF (NOT FOUND) THEN
    RETURN -9;
  END IF;

-- Lets do the update for the trialbal

  UPDATE trialbal
     SET trialbal_beginning = trialbal_beginning - trialbal_yearend + _totalProfitLoss,
         trialbal_yearend = _totalProfitLoss
   WHERE trialbal_id = _trialbalid;

-- Now the forward update

  SELECT forwardupdatetrialbalance(_trialbalid) INTO _forwardupdate;

  UPDATE yearperiod
     SET yearperiod_closed = TRUE
   WHERE yearperiod_id = pYearPeriodid;

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.closepo-integer">closepo( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPoheadid ALIAS FOR $1;

BEGIN

  UPDATE poitem
  SET poitem_status=&#39;C&#39;
  WHERE (poitem_pohead_id=pPoheadid);

  UPDATE pohead
  SET pohead_status=&#39;C&#39;
  WHERE (pohead_id=pPoheadid);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.closewo-integer-boolean-boolean">closewo( integer, boolean, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid ALIAS FOR $1;
  pPostMaterialVariances ALIAS FOR $2;
  pPostLaborVariances ALIAS FOR $3;
  _woNumber TEXT;
  _check CHAR;

BEGIN

  --If this is item type Job then we cannot close here
  SELECT item_type INTO _check
  FROM wo,itemsite,item
  WHERE ((wo_id=pWoid)
  AND (wo_itemsite_id=itemsite_id)
  AND (itemsite_item_id=item_id)
  AND (item_type = &#39;J&#39;));
  IF (FOUND) THEN
    RAISE EXCEPTION &#39;Work orders for Job items are closed when all quantities are shipped&#39;;
  END IF;

  SELECT formatWoNumber(pWoid) INTO _woNumber;

--  Distribute any remaining wo_wipvalue to G/L - debit Inventory Cost, credit WIP
  PERFORM insertGLTransaction( &#39;W/O&#39;, &#39;WO&#39;, _woNumber, (&#39;Manufacturing Inventory Cost Variance for &#39; || item_number),
                               costcat_wip_accnt_id, costcat_invcost_accnt_id, -1,
                               wo_wipvalue, CURRENT_DATE )
  FROM wo, itemsite, item, costcat
  WHERE ( (wo_itemsite_id=itemsite_id)
   AND (itemsite_item_id=item_id)
   AND (itemsite_costcat_id=costcat_id)
   AND (wo_id=pWoid) );

--  Distribute any remaining wo_brdvalue to G/L - debit Inventory Cost, credit WIP
  PERFORM insertGLTransaction( &#39;W/O&#39;, &#39;WO&#39;, _woNumber, (&#39;Breeder Inventory Cost Variance for &#39; || item_number),
                               costcat_wip_accnt_id,
                               CASE WHEN(itemsite_costmethod=&#39;A&#39;) THEN costcat_asset_accnt_id
                                    ELSE costcat_invcost_accnt_id
                               END,
                               -1,
                               wo_brdvalue, CURRENT_DATE )
  FROM wo, itemsite, item, costcat
  WHERE ( (wo_itemsite_id=itemsite_id)
   AND (itemsite_item_id=item_id)
   AND (itemsite_costcat_id=costcat_id)
   AND (wo_id=pWoid) );

--  Don&#39;t bother with posting variances if the qtyrcv is 0 as
--  they are meaningless.
  IF ( ( SELECT wo_qtyrcv
         FROM wo
         WHERE (wo_id=pWoid) ) &gt; 0 ) THEN

    IF (pPostMaterialVariances) THEN
--  Post womatl variances
    INSERT INTO womatlvar ( womatlvar_number, womatlvar_subnumber, womatlvar_posted,
        womatlvar_parent_itemsite_id, womatlvar_component_itemsite_id,
        womatlvar_qtyord, womatlvar_qtyrcv,
        womatlvar_qtyiss, womatlvar_qtyper,
        womatlvar_scrap, womatlvar_wipscrap, womatlvar_bomitem_id,
        womatlvar_notes, womatlvar_ref )
      SELECT wo_number, wo_subnumber, CURRENT_DATE,
             wo_itemsite_id, womatl_itemsite_id,
             wo_qtyord, wo_qtyrcv,
             itemuomtouom(itemsite_item_id, womatl_uom_id, NULL, womatl_qtyiss),
             itemuomtouom(itemsite_item_id, womatl_uom_id, NULL, womatl_qtyper),
             womatl_scrap,
             itemuomtouom(itemsite_item_id, womatl_uom_id, NULL, womatl_qtywipscrap),
             womatl_bomitem_id,
             womatl_notes, womatl_ref             
      FROM wo, womatl, itemsite
      WHERE ((womatl_wo_id=wo_id)
       AND (womatl_itemsite_id=itemsite_id)      
       AND (wo_id=pWoid));
    END IF;

    IF (pPostLaborVariances) THEN
--  Post wooper variances
      INSERT INTO woopervar
      ( woopervar_number, woopervar_subnumber, woopervar_seqnumber, woopervar_posted,
        woopervar_parent_itemsite_id, woopervar_booitem_id, woopervar_wrkcnt_id,
        woopervar_qtyord, woopervar_qtyrcv,
        woopervar_stdsutime, woopervar_sutime,
        woopervar_stdrntime, woopervar_rntime )
      SELECT wo_number, wo_subnumber, wooper_seqnumber, CURRENT_DATE,
             wo_itemsite_id, wooper_booitem_id, wooper_wrkcnt_id,
             wo_qtyord, wo_qtyrcv,
             wooper_sutime, wooper_suconsumed,
             wooper_rntime, wooper_rnconsumed
      FROM wo, wooper
      WHERE ((wooper_wo_id=wo_id)
       AND (wo_id=pWoid));
    END IF;

  END IF;

--  Post Breeder distribution variances for Breeder parent item if we received on the WO
  IF ( ( SELECT (item_type=&#39;B&#39;)
         FROM wo, itemsite, item
         WHERE ( (wo_itemsite_id=itemsite_id)
          AND (itemsite_item_id=item_id)
	  AND (wo_qtyrcv &gt; 0)
          AND (wo_id=pWoid) ) ) ) THEN
    INSERT INTO brdvar
    ( brdvar_postdate, brdvar_wonumber, brdvar_parent_itemsite_id, brdvar_itemsite_id,
      brdvar_wo_qty, brdvar_stdqtyper, brdvar_actqtyper )
    SELECT CURRENT_DATE, _woNumber, wo_itemsite_id, brddist_itemsite_id,
           SUM(brddist_wo_qty), brddist_stdqtyper,
	   CASE WHEN (SUM(brddist_wo_qty)=0) THEN &#39;NaN&#39; -- any qty is unexpected
	        ELSE (SUM(brddist_qty) / SUM(brddist_wo_qty))
	   END
    FROM brddist, wo
    WHERE ( (brddist_wo_id=wo_id)
     AND (brddist_wo_id=pWoid) )
    GROUP BY wo_itemsite_id, brddist_itemsite_id, brddist_stdqtyper;

    DELETE FROM brddist
    WHERE (brddist_wo_id=pWoid);
  END IF;

--  Delete any P/R&#39;s created for this W/O
  PERFORM deletePr(&#39;W&#39;, womatl_id)
  FROM womatl
  WHERE (womatl_wo_id=pWoid);

-- The following lines commented out for version 2.1 
-- and moved to purgeClosedWorkOrders.cpp where
-- wo rows are removed

--  DELETE FROM womatl
--  WHERE (womatl_wo_id=pWoid);

--  DELETE FROM wooper
--  WHERE (wooper_wo_id=pWoid);

  UPDATE wo
  SET wo_wipvalue = 0, wo_brdvalue=0,
      wo_status=&#39;C&#39;
  WHERE (wo_id=pWoid);

  RETURN 1;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.completebatchitem-integer">completebatchitem( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBatchid ALIAS FOR $1;

BEGIN

  UPDATE batch
  SET batch_completed=CURRENT_TIMESTAMP
  WHERE (batch_id=pBatchid);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.completebatchitem-integer-text">completebatchitem( integer, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBatchid ALIAS FOR $1;
  pExitStatus ALIAS FOR $2;
  _r RECORD;
  _reschedule TIMESTAMP;

BEGIN

  SELECT batch_reschedinterval, batch_scheduled INTO _r
  FROM batch
  WHERE (batch_id=pBatchid);
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  _reschedule := _r.batch_scheduled;

  IF (_r.batch_reschedinterval IN (&#39;D&#39;, &#39;W&#39;, &#39;M&#39;)) THEN
    LOOP
      IF (_r.batch_reschedinterval = &#39;D&#39;) THEN
        _reschedule := (_reschedule + INTERVAL &#39;1 day&#39;);
      ELSIF (_r.batch_reschedinterval = &#39;W&#39;) THEN
        _reschedule := (_reschedule + INTERVAL &#39;1 week&#39;);
      ELSIF (_r.batch_reschedinterval = &#39;M&#39;) THEN
        _reschedule := (_reschedule + INTERVAL &#39;1 month&#39;);
      END IF;

      EXIT WHEN (_reschedule &gt; CURRENT_TIMESTAMP);
    END LOOP;

    PERFORM copyBatchItem(pBatchid, _reschedule);
  END IF;

  UPDATE batch
  SET batch_completed=CURRENT_TIMESTAMP,
      batch_exitstatus=pExitStatus
  WHERE (batch_id=pBatchid);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.consolidateitemloc">consolidateitemloc(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _r RECORD;

BEGIN

  UPDATE itemloc
  SET itemloc_consolflag = TRUE;

  FOR _r IN SELECT itemloc_itemsite_id, itemloc_location_id,
                   SUM(itemloc_qty) AS itemloc_qty, itemloc_expiration,
                   itemloc_ls_id, itemloc_warrpurc
            FROM itemloc
            WHERE itemloc_consolflag
            GROUP BY itemloc_itemsite_id, itemloc_location_id,
                     itemloc_expiration, itemloc_ls_id, itemloc_warrpurc
            LOOP
    INSERT INTO itemloc (
      itemloc_itemsite_id, itemloc_location_id, itemloc_qty,
      itemloc_lotserial,
      itemloc_expiration, itemloc_consolflag, itemloc_ls_id, itemloc_warrpurc
    ) VALUES (
      _r.itemloc_itemsite_id, _r.itemloc_location_id, _r.itemloc_qty,
      NULL,
      _r.itemloc_expiration, FALSE, _r.itemloc_ls_id, _r.itemloc_warrpurc);
  END LOOP;

  DELETE FROM itemloc
  WHERE (itemloc_consolflag);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.consolidatelocations-integer">consolidatelocations( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  _r RECORD;

BEGIN

  UPDATE itemloc
  SET itemloc_consolflag = TRUE
  WHERE (itemloc_itemsite_id=pItemsiteid);

  FOR _r IN SELECT itemloc_location_id, SUM(itemloc_qty) AS qty
            FROM itemloc
            WHERE (itemloc_itemsite_id=pItemsiteid)
            GROUP BY itemloc_location_id LOOP
    INSERT INTO itemloc
    ( itemloc_itemsite_id, itemloc_location_id,
      itemloc_expiration, itemloc_qty, itemloc_consolflag )
    VALUES
    ( pItemsiteid, _r.itemloc_location_id,
      endOfTime(), _r.qty, FALSE );
  END LOOP;

  DELETE FROM itemloc
  WHERE ( (itemloc_itemsite_id=pItemsiteid)
   AND (itemloc_consolflag) );

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.convertcustomertoprospect-integer">convertcustomertoprospect( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    pCustId     ALIAS FOR $1;
    _returnVal  INTEGER := 0;
    _c          RECORD;
    _crmacctId  INTEGER := 0;
  BEGIN
    IF (EXISTS(SELECT prospect_id FROM prospect WHERE (prospect_id=pCustId))) THEN
      RETURN -10;
    END IF;

    SELECT * INTO _c
    FROM custinfo
    WHERE (cust_id=pCustId);

    SELECT crmacct_id INTO _crmacctId
    FROM crmacct
    WHERE (crmacct_cust_id=pCustId);

    _returnVal := deleteCustomer(pCustId);
    IF (_returnVal &lt; 0) THEN
      RETURN _returnVal;
    END IF;

    INSERT INTO prospect (
          prospect_id, prospect_active, prospect_number,
          prospect_name, prospect_cntct_id, prospect_taxauth_id,
          prospect_salesrep_id, prospect_warehous_id, prospect_comments
    ) VALUES (
         _c.cust_id, _c.cust_active, _c.cust_number,
         _c.cust_name, _c.cust_cntct_id, _c.cust_taxauth_id,
         CASE WHEN(_c.cust_salesrep_id &gt; 0) THEN _c.cust_salesrep_id
              ELSE NULL
         END,
         CASE WHEN(_c.cust_preferred_warehous_id &gt; 0) THEN _c.cust_preferred_warehous_id
              ELSE NULL
         END,
         _c.cust_comments);

    UPDATE crmacct SET crmacct_prospect_id=pCustId,
                       crmacct_cust_id=NULL
    WHERE (crmacct_id=_crmacctId);

    RETURN pCustId;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.convertprospecttocustomer-integer">convertprospecttocustomer( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    pProspectId ALIAS FOR $1;
    _returnVal  INTEGER := 0;
    _p          RECORD;
    _crmacctId  INTEGER := 0;
  BEGIN
    IF (EXISTS(SELECT cust_id FROM custinfo WHERE cust_id=pProspectId)) THEN
      RETURN -10;
    END IF;

    SELECT * INTO _p
    FROM prospect
    WHERE (prospect_id=pProspectId);

    SELECT crmacct_id INTO _crmacctId
    FROM crmacct
    WHERE (crmacct_prospect_id=pProspectId);

    _returnVal := deleteProspect(pProspectId);
    IF (_returnVal = -1) THEN   -- prospect has quotes
      UPDATE crmacct SET crmacct_prospect_id=NULL
      WHERE crmacct_prospect_id=pprospectId;

      DELETE FROM prospect WHERE (prospect_id=pprospectId);

    ELSEIF (_returnVal &lt; 0) THEN
      RETURN _returnVal;
    END IF;

    INSERT INTO custinfo (
          cust_id, cust_active, cust_number,
          cust_name, cust_cntct_id, cust_taxauth_id,
          cust_comments, cust_creditstatus,
          cust_salesrep_id, cust_preferred_warehous_id,
          cust_terms_id,
          cust_custtype_id, cust_shipform_id,
          cust_shipvia, cust_balmethod,
          cust_ffshipto, cust_backorder,
          cust_partialship, cust_creditlmt,
          cust_creditrating, cust_commprcnt,
          cust_discntprcnt, cust_blanketpos,
          cust_shipchrg_id, cust_ffbillto,
          cust_usespos, cust_emaildelivery,
          cust_autoupdatestatus,cust_autoholdorders,
          cust_soemaildelivery) 
    SELECT
        _p.prospect_id, _p.prospect_active, _p.prospect_number,
        _p.prospect_name, _p.prospect_cntct_id, _p.prospect_taxauth_id,
        _p.prospect_comments, &#39;G&#39;,
        COALESCE(_p.prospect_salesrep_id, salesrep_id),
        COALESCE(_p.prospect_warehous_id, -1),
        FetchMetricValue(&#39;DefaultTerms&#39;),
        FetchMetricValue(&#39;DefaultCustType&#39;),
        FetchMetricValue(&#39;DefaultShipFormId&#39;),
        COALESCE(FetchMetricValue(&#39;DefaultShipViaId&#39;),-1),
        FetchMetricText(&#39;DefaultBalanceMethod&#39;),
        FetchMetricBool(&#39;DefaultFreeFormShiptos&#39;),
        FetchMetricBool(&#39;DefaultBackOrders&#39;),
        FetchMetricBool(&#39;DefaultPartialShipments&#39;),
        FetchMetricValue(&#39;SOCreditLimit&#39;),
        FetchMetricText(&#39;SOCreditRate&#39;),
        salesrep_commission,
        0, false, -1,false,false,false,false,
        false, false
    FROM salesrep WHERE (salesrep_id=FetchMetricValue(&#39;DefaultSalesRep&#39;));

    UPDATE crmacct SET crmacct_cust_id=pProspectId,
                       crmacct_prospect_id=NULL
    WHERE (crmacct_id=_crmacctId);

    RETURN pProspectId;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.convertquote-integer">convertquote( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pQuheadid ALIAS FOR $1;
  _soheadid INTEGER;
  _soitemid INTEGER;
  _orderid INTEGER;
  _ordertype CHARACTER(1);
  _creditstatus	TEXT;
  _prospectid	INTEGER;
  _r RECORD;
  _soNum INTEGER;

BEGIN

-- Check to make sure the quote has not expired
  IF (SELECT COALESCE(quhead_expire, endOfTime()) &lt; CURRENT_DATE
        FROM quhead
       WHERE(quhead_id=pQuheadid)) THEN
    RETURN -6;
  END IF;

--  Check to make sure that all of the quote items have a valid itemsite
  SELECT quitem_id INTO _r
    FROM quitem LEFT OUTER JOIN itemsite ON (quitem_itemsite_id=itemsite_id)
   WHERE ((itemsite_id IS NULL)
     AND  (quitem_quhead_id=pQuheadid));
  IF (FOUND) THEN
    INSERT INTO evntlog (evntlog_evnttime, evntlog_username, evntlog_evnttype_id,
                         evntlog_ordtype, evntlog_ord_id, evntlog_warehous_id, evntlog_number)
    SELECT CURRENT_TIMESTAMP, evntnot_username, evnttype_id,
           &#39;Q&#39;, quhead_id, quhead_warehous_id, quhead_number
    FROM evntnot, evnttype, quhead
    WHERE ( (evntnot_evnttype_id=evnttype_id)
     AND (evntnot_warehous_id=quhead_warehous_id)
     AND (evnttype_name=&#39;CannotConvertQuote&#39;)
     AND (quhead_id=pQuheadid) );

    RETURN -1;
  END IF;

  SELECT cust_creditstatus INTO _creditstatus
  FROM quhead, custinfo
  WHERE ((quhead_cust_id=cust_id)
    AND  (quhead_id=pQuheadid));

  IF (NOT FOUND) THEN
    SELECT prospect_id INTO _prospectid
    FROM quhead, prospect
    WHERE ((quhead_cust_id=prospect_id)
      AND  (quhead_id=pQuheadid));
    IF (NOT FOUND) THEN
      RETURN -2;
    ELSE
      RETURN -3;
    END IF;
  ELSIF (_creditstatus = &#39;H&#39; AND NOT hasPriv(&#39;CreateSOForHoldCustomer&#39;)) THEN
    RETURN -4;
  ELSIF (_creditstatus = &#39;W&#39; AND NOT hasPriv(&#39;CreateSOForWarnCustomer&#39;)) THEN
    RETURN -5;
  END IF;

  PERFORM quhead_number, cohead_id 
  FROM quhead, cohead 
  WHERE quhead_id = pQuheadid
  AND cohead_number = CAST(quhead_number AS text);

  IF (FOUND) THEN
    SELECT fetchSoNumber() INTO _soNum;
  ELSE
    SELECT quhead_number INTO _soNum
    FROM quhead
    WHERE quhead_id = pQuheadid;
  END IF;

  SELECT NEXTVAL(&#39;cohead_cohead_id_seq&#39;) INTO _soheadid;
  INSERT INTO cohead
  ( cohead_id, cohead_number, cohead_cust_id,
    cohead_orderdate, cohead_packdate,
    cohead_custponumber, cohead_warehous_id,
    cohead_billtoname, cohead_billtoaddress1,
    cohead_billtoaddress2, cohead_billtoaddress3,
    cohead_billtocity, cohead_billtostate, cohead_billtozipcode,
    cohead_billtocountry,
    cohead_shipto_id, cohead_shiptoname, cohead_shiptoaddress1,
    cohead_shiptoaddress2, cohead_shiptoaddress3,
    cohead_shiptocity, cohead_shiptostate, cohead_shiptozipcode,
    cohead_shiptocountry,
    cohead_salesrep_id, cohead_commission,
    cohead_terms_id, cohead_shipchrg_id, cohead_shipform_id,
    cohead_fob, cohead_shipvia,
    cohead_ordercomments, cohead_shipcomments,
    cohead_freight, cohead_misc, cohead_misc_accnt_id, cohead_misc_descrip,
    cohead_holdtype, cohead_wasquote, cohead_quote_number, cohead_prj_id,
    cohead_curr_id, cohead_taxauth_id,
    cohead_shipto_cntct_id, cohead_shipto_cntct_honorific, cohead_shipto_cntct_first_name,
    cohead_shipto_cntct_middle, cohead_shipto_cntct_last_name, cohead_shipto_cntct_suffix,
    cohead_shipto_cntct_phone, cohead_shipto_cntct_title, cohead_shipto_cntct_fax, 
    cohead_shipto_cntct_email,
    cohead_billto_cntct_id, cohead_billto_cntct_honorific,
    cohead_billto_cntct_first_name, cohead_billto_cntct_middle, cohead_billto_cntct_last_name, 
    cohead_billto_cntct_suffix, cohead_billto_cntct_phone, cohead_billto_cntct_title, 
    cohead_billto_cntct_fax, cohead_billto_cntct_email )
  SELECT _soheadid, _soNum, quhead_cust_id,
         CURRENT_DATE, quhead_packdate,
         quhead_custponumber, quhead_warehous_id,
         quhead_billtoname, quhead_billtoaddress1,
         quhead_billtoaddress2, quhead_billtoaddress3,
         quhead_billtocity, quhead_billtostate, quhead_billtozip,
         quhead_billtocountry,
         quhead_shipto_id, quhead_shiptoname, quhead_shiptoaddress1,
         quhead_shiptoaddress2, quhead_shiptoaddress3,
         quhead_shiptocity, quhead_shiptostate, quhead_shiptozipcode,
         quhead_shiptocountry,
         quhead_salesrep_id, quhead_commission,
         quhead_terms_id, cust_shipchrg_id, cust_shipform_id,
         quhead_fob, quhead_shipvia,
         quhead_ordercomments, quhead_shipcomments,
         quhead_freight, quhead_misc, quhead_misc_accnt_id, quhead_misc_descrip,
         &#39;N&#39;, TRUE, quhead_number, quhead_prj_id,
	 quhead_curr_id, quhead_taxauth_id,
	 quhead_shipto_cntct_id, quhead_shipto_cntct_honorific,
	 quhead_shipto_cntct_first_name, quhead_shipto_cntct_middle, quhead_shipto_cntct_last_name,
	 quhead_shipto_cntct_suffix, quhead_shipto_cntct_phone, quhead_shipto_cntct_title,
	 quhead_shipto_cntct_fax, quhead_shipto_cntct_email, quhead_billto_cntct_id,
	 quhead_billto_cntct_honorific, quhead_billto_cntct_first_name, quhead_billto_cntct_middle,
	 quhead_billto_cntct_last_name, quhead_billto_cntct_suffix, quhead_billto_cntct_phone,
	 quhead_billto_cntct_title, quhead_billto_cntct_fax, quhead_billto_cntct_email
  FROM quhead, cust
  WHERE ( (quhead_cust_id=cust_id)
  AND (quhead_id=pQuheadid) );

  FOR _r IN SELECT quitem.*,
                   quhead_number, quhead_prj_id,
                   itemsite_item_id, itemsite_leadtime, item_type
            FROM quhead, quitem, itemsite, item
            WHERE ( (quitem_quhead_id=quhead_id)
             AND (quitem_itemsite_id=itemsite_id)
             AND (itemsite_item_id=item_id)
             AND (quitem_quhead_id=pQuheadid) ) LOOP

    SELECT NEXTVAL(&#39;coitem_coitem_id_seq&#39;) INTO _soitemid;

    INSERT INTO coitem
    ( coitem_id, coitem_cohead_id, coitem_linenumber, coitem_itemsite_id,
      coitem_status, coitem_scheddate, coitem_promdate,
      coitem_price, coitem_custprice, 
      coitem_qtyord, coitem_qtyshipped, coitem_qtyreturned,
      coitem_qty_uom_id, coitem_qty_invuomratio,
      coitem_price_uom_id, coitem_price_invuomratio,
      coitem_unitcost,
      coitem_custpn, coitem_memo, coitem_prcost, coitem_tax_id )
    VALUES
    ( _soitemid, _soheadid, _r.quitem_linenumber, _r.quitem_itemsite_id,
      &#39;O&#39;, _r.quitem_scheddate, _r.quitem_promdate,
      _r.quitem_price, _r.quitem_custprice,
      _r.quitem_qtyord, 0, 0,
      _r.quitem_qty_uom_id, _r.quitem_qty_invuomratio,
      _r.quitem_price_uom_id, _r.quitem_price_invuomratio,
      stdcost(_r.itemsite_item_id),
      _r.quitem_custpn, _r.quitem_memo, _r.quitem_prcost, _r.quitem_tax_id );

    INSERT INTO charass
          (charass_target_type, charass_target_id, charass_char_id, charass_value, charass_default, charass_price)
    SELECT &#39;SI&#39;, _soitemid, charass_char_id, charass_value, charass_default, charass_price
      FROM charass
     WHERE ((charass_target_type=&#39;QI&#39;)
       AND  (charass_target_id=_r.quitem_id));

    _orderid := -1;
    _ordertype := &#39;&#39;;
    IF (_r.quitem_createorder) THEN

      IF (_r.item_type IN (&#39;M&#39;,&#39;J&#39;)) THEN
        SELECT createWo( _r.quhead_number, supply.itemsite_id, 1, (_r.quitem_qtyord * _r.quitem_qty_invuomratio),
                         _r.itemsite_leadtime, _r.quitem_scheddate, _r.quitem_memo, &#39;S&#39;, _soitemid, _r.quhead_prj_id ) INTO _orderId
        FROM itemsite sold, itemsite supply
        WHERE ((sold.itemsite_item_id=supply.itemsite_item_id)
         AND (supply.itemsite_warehous_id=_r.quitem_order_warehous_id)
         AND (sold.itemsite_id=_r.quitem_itemsite_id) );
        _orderType := &#39;W&#39;;

        INSERT INTO charass
              (charass_target_type, charass_target_id, charass_char_id, charass_value)
        SELECT &#39;W&#39;, _orderId, charass_char_id, charass_value
          FROM charass
         WHERE ((charass_target_type=&#39;QI&#39;)
           AND  (charass_target_id=_r.quitem_id));

      ELSIF (_r.item_type IN (&#39;P&#39;, &#39;O&#39;)) THEN
        SELECT createPr( _r.quhead_number, _r.quitem_itemsite_id, (_r.quitem_qtyord * _r.quitem_qty_invuomratio),
                         _r.quitem_scheddate, &#39;&#39;, &#39;S&#39;, _soitemid ) INTO _orderId;
        _orderType := &#39;R&#39;;
        UPDATE pr SET pr_prj_id=_r.quhead_prj_id WHERE pr_id=_orderId;
      END IF;

      UPDATE coitem SET coitem_order_type=_ordertype, coitem_order_id=_orderid
      WHERE (coitem_id=_soitemid);

    END IF;

  END LOOP;

  PERFORM deleteQuote(pQuheadid);

  RETURN _soheadid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.copyassortment-integer-integer">copyassortment( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSourceid ALIAS FOR $1;
  pTargetid ALIAS FOR $2;

BEGIN

--  Check to see if the Target Assortment has a current definition
  IF ( ( SELECT COUNT(*)
         FROM assitem
         WHERE ( (assitem_expires &gt; CURRENT_DATE)
          AND (assitem_parent_item_id=pTargetid) ) ) &gt; 0 ) THEN
    RETURN -1;
  END IF;

--  Make sure that the Source Assortment has a current definition
  IF ( ( SELECT COUNT(*)
         FROM assitem
         WHERE ( (assitem_expires &gt; CURRENT_DATE)
          AND (assitem_parent_item_id=pSourceid) ) ) = 0 ) THEN
    RETURN -2;
  END IF;

--  Copy the definition
  INSERT INTO assitem
  ( assitem_parent_item_id, assitem_item_id, assitem_seqnumber,
    assitem_qtyper, assitem_effective, assitem_expires )
  SELECT pTargetid, assitem_item_id, assitem_seqnumber,
         assitem_qtyper, CURRENT_DATE, assitem_expires
  FROM assitem
  WHERE ( (assitem_expires &gt; CURRENT_DATE)
   AND (assitem_parent_item_id=pSourceid) );

  RETURN pTargetid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.copybom-integer-integer">copybom( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSItemid ALIAS FOR $1;
  pTItemid ALIAS FOR $2;
  _result INTEGER;

BEGIN

  SELECT copyBOM (pSItemid, PTItemid, FALSE) into _result;

  RETURN _result;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.copybom-integer-integer-boolean">copybom( integer, integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSItemid ALIAS FOR $1;
  pTItemid ALIAS FOR $2;
  pCopyUsedAt ALIAS FOR $3;
  _r RECORD;
  _bomitemid INTEGER;
  _bomworksetid INTEGER;
  _temp INTEGER;
  _schedatwooper BOOLEAN;
  _booitemseqid INTEGER;

BEGIN

--  Make sure that the parent is not used in the component at some level
  IF ( SELECT (item_type IN (&#39;M&#39;, &#39;F&#39;))
       FROM item
       WHERE (item_id=pSItemid) ) THEN
    SELECT indentedWhereUsed(pTItemid) INTO _bomworksetid;
    SELECT bomwork_id INTO _temp
    FROM bomwork
    WHERE ( (bomwork_set_id=_bomworksetid)
     AND (bomwork_item_id=pSItemid) )
    LIMIT 1;
    IF (FOUND) THEN
      PERFORM deleteBOMWorkset(_bomworksetid);
      RETURN -1;
    END IF;
    PERFORM deleteBOMWorkset(_bomworksetid);
  END IF;

  FOR _r IN SELECT bomitem.*
            FROM bomitem(pSItemid) 
            WHERE (bomitem_expires&gt;CURRENT_DATE) LOOP

    SELECT NEXTVAL(&#39;bomitem_bomitem_id_seq&#39;) INTO _bomitemid;

    IF (pCopyUsedAt) THEN
      _schedatwooper := _r.bomitem_schedatwooper;
      _booitemseqid := _r.bomitem_booitem_seq_id;
    ELSE
      _schedatwooper := FALSE;
      _booitemseqid := -1;
    END IF;

    INSERT INTO bomitem
    ( bomitem_id, bomitem_parent_item_id, bomitem_seqnumber, bomitem_item_id,
      bomitem_uom_id, bomitem_qtyper, bomitem_scrap, bomitem_schedatwooper,
      bomitem_booitem_seq_id,
      bomitem_effective, bomitem_expires, bomitem_ecn,
      bomitem_createwo, bomitem_issuemethod, bomitem_moddate, bomitem_subtype,
      bomitem_notes, bomitem_ref )
    VALUES
    ( _bomitemid, pTItemid, _r.bomitem_seqnumber, _r.bomitem_item_id,
      _r.bomitem_uom_id, _r.bomitem_qtyper, _r.bomitem_scrap, _schedatwooper,
      _booitemseqid,
      CURRENT_DATE, _r.bomitem_expires, _r.bomitem_ecn,
      _r.bomitem_createwo, _r.bomitem_issuemethod, CURRENT_DATE, _r.bomitem_subtype,
      _r.bomitem_notes, _r.bomitem_ref );

    INSERT INTO bomitemsub
    ( bomitemsub_bomitem_id, bomitemsub_item_id,
      bomitemsub_uomratio, bomitemsub_rank )
    SELECT _bomitemid, bomitemsub_item_id,
           bomitemsub_uomratio, bomitemsub_rank
    FROM bomitemsub
    WHERE (bomitemsub_bomitem_id=_r.bomitem_id);

  END LOOP;

  RETURN pTItemid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.copybudget-integer-text-text-integer">copybudget( integer, text, text, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBudgheadid ALIAS FOR $1;
  pName ALIAS FOR $2;
  pDescrip ALIAS FOR $3;
  pInterval ALIAS FOR $4;
  _budgheadid INTEGER;
  _periodid INTEGER;
  _result INTEGER;

BEGIN
  SELECT 1 INTO _result
    FROM budgitem
   WHERE ((budgitem_budghead_id=pBudgheadid)
     AND  (nextPeriodByInterval(budgitem_period_id, pInterval)=-1))
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -1;
  END IF;

  SELECT nextval(&#39;budghead_budghead_id_seq&#39;) INTO _budgheadid;
  INSERT INTO budghead
        (budghead_id, budghead_name, budghead_descrip)
  VALUES(_budgheadid, pName, pDescrip);

  INSERT INTO budgitem (budgitem_budghead_id, budgitem_period_id,
                        budgitem_accnt_id, budgitem_amount)
  SELECT _budgheadid, nextPeriodByInterval(budgitem_period_id, pInterval),
         budgitem_accnt_id, budgitem_amount
    FROM budgitem
   WHERE (budgitem_budghead_id=pBudgheadid);

  RETURN _budgheadid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.copycmd-integer-text-text">copycmd( integer, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCmdId	ALIAS FOR $1;
  pModule	ALIAS FOR $2;
  pTitle	ALIAS FOR $3;
  _cmdId	INTEGER;
BEGIN
    SELECT nextval(&#39;cmd_cmd_id_seq&#39;) INTO _cmdId;

    INSERT INTO cmd 
      SELECT _cmdId, pModule, pTitle, cmd_descrip, cmd_privname, cmd_executable
      FROM cmd
      WHERE (cmd_id=pCmdId);

    INSERT INTO cmdarg (cmdarg_cmd_id, cmdarg_order, cmdarg_arg)
      SELECT _cmdId, cmdarg_order, cmdarg_arg
      FROM cmdarg
      WHERE (cmdarg_cmd_id=pCmdId);

    RETURN 1;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.copyfinancialgroup-integer-integer-integer">copyfinancialgroup( integer, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSourceGroup ALIAS FOR $1;
  pFlheadid ALIAS FOR $2;
  pParentFlgrpid ALIAS FOR $3;

  _flgrpid INTEGER;

BEGIN

  SELECT nextval(&#39;flgrp_flgrp_id_seq&#39;) INTO _flgrpid;

-- Copy the group item
  INSERT INTO flgrp
         (flgrp_id, flgrp_flhead_id, flgrp_flgrp_id,
          flgrp_order, flgrp_name, flgrp_descrip,
          flgrp_subtotal, flgrp_summarize, flgrp_subtract,
          flgrp_showstart, flgrp_showend,
          flgrp_showdelta, flgrp_showbudget, flgrp_showdiff, flgrp_showcustom,
          flgrp_showstartprcnt, flgrp_showendprcnt,
          flgrp_showdeltaprcnt, flgrp_showbudgetprcnt, flgrp_showdiffprcnt, flgrp_showcustomprcnt,
          flgrp_usealtsubtotal, flgrp_altsubtotal,flgrp_prcnt_flgrp_id)
  SELECT _flgrpid, pFlheadid, pParentFlgrpid,
         flgrp_order, flgrp_name, flgrp_descrip,
         flgrp_subtotal, flgrp_summarize, flgrp_subtract,
         flgrp_showstart, flgrp_showend,
         flgrp_showdelta, flgrp_showbudget, flgrp_showdiff, flgrp_showcustom,
         flgrp_showstartprcnt, flgrp_showendprcnt,
         flgrp_showdeltaprcnt, flgrp_showbudgetprcnt, flgrp_showdiffprcnt, flgrp_showcustomprcnt,
         flgrp_usealtsubtotal, flgrp_altsubtotal,flgrp_prcnt_flgrp_id
    FROM flgrp
   WHERE (flgrp_id=pSourceGroup);

-- Store temporary cross ref info
   
   EXECUTE &#39; INSERT INTO tmp_flgrpxref&#39; || current_user || &#39; (flgrpxref_oldid,flgrpxref_newid) VALUES (&#39; || pSourceGroup || &#39;,&#39; || _flgrpid || &#39;);&#39;;

-- Copy any children flitems
  INSERT INTO flitem
         (flitem_flhead_id, flitem_flgrp_id,
          flitem_order, flitem_accnt_id, flitem_showstart,
          flitem_showend, flitem_showdelta, flitem_showbudget, flitem_showdiff, flitem_showcustom,
          flitem_subtract, flitem_showstartprcnt,
          flitem_showendprcnt, flitem_showdeltaprcnt,
          flitem_showbudgetprcnt, flitem_showdiffprcnt, flitem_showcustomprcnt,
          flitem_custom_source, flitem_company, flitem_profit, flitem_number,
          flitem_sub, flitem_type, flitem_subaccnttype_code, flitem_prcnt_flgrp_id)
  SELECT pFlheadid, _flgrpid,
         flitem_order, flitem_accnt_id, flitem_showstart,
         flitem_showend, flitem_showdelta, flitem_showbudget, flitem_showdiff, flitem_showcustom,
         flitem_subtract, flitem_showstartprcnt,
         flitem_showendprcnt, flitem_showdeltaprcnt,
         flitem_showbudgetprcnt, flitem_showdiffprcnt, flitem_showcustomprcnt,
         flitem_custom_source, flitem_company, flitem_profit, flitem_number,
          flitem_sub, flitem_type, flitem_subaccnttype_code, flitem_prcnt_flgrp_id
    FROM flitem
   WHERE (flitem_flgrp_id=pSourceGroup);

-- Copy any children flspecs
  INSERT INTO flspec
         (flspec_flhead_id, flspec_flgrp_id,
          flspec_order, flspec_name, flspec_type, flspec_showstart,
          flspec_showend, flspec_showdelta, flspec_showbudget, flspec_showdiff, flspec_showcustom,
          flspec_subtract, flspec_showstartprcnt,
          flspec_showendprcnt, flspec_showdeltaprcnt,
          flspec_showbudgetprcnt, flspec_showdiffprcnt, flspec_showcustomprcnt,
          flspec_custom_source, flspec_prcnt_flgrp_id)
  SELECT pFlheadid, _flgrpid,
         flspec_order, flspec_name, flspec_type, flspec_showstart,
         flspec_showend, flspec_showdelta, flspec_showbudget, flspec_showdiff, flspec_showcustom,
         flspec_subtract, flspec_showstartprcnt,
         flspec_showendprcnt, flspec_showdeltaprcnt,
         flspec_showbudgetprcnt, flspec_showdiffprcnt, flspec_showcustomprcnt,
         flspec_custom_source, flspec_prcnt_flgrp_id
    FROM flspec
   WHERE (flspec_flgrp_id=pSourceGroup);

-- Copy the groups
  PERFORM copyFinancialGroup(flgrp_id, pFlheadid, _flgrpid)
     FROM flgrp
    WHERE (flgrp_flgrp_id=pSourceGroup);

  RETURN _flgrpid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.copyfinanciallayout-integer-text">copyfinanciallayout( integer, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSourceFlheadid ALIAS FOR $1;
  pDestName ALIAS FOR $2;

  _flheadid INTEGER;
  _tblName TEXT;

BEGIN

-- Check for the flhead to be copy that it exists
  PERFORM flhead_id
     FROM flhead
    WHERE (flhead_id=pSourceFlheadid);
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

-- Check that the name is valid
  IF (pDestName IS NULL OR pDestName = &#39;&#39;) THEN
    RETURN -2;
  END IF;

-- Check for the name to copy to does not exist
  PERFORM flhead_id
     FROM flhead
    WHERE (flhead_name=pDestName);
  IF (FOUND) THEN
    RETURN -3;
  END IF;

-- Copy the flhead record
  SELECT nextval(&#39;flhead_flhead_id_seq&#39;) INTO _flheadid;
  INSERT INTO flhead
         (flhead_id, flhead_name, flhead_descrip,
          flhead_showtotal, flhead_showstart,
          flhead_showend, flhead_showdelta, flhead_showbudget,
          flhead_showdiff, flhead_showcustom,
          flhead_custom_label,
          flhead_usealttotal, flhead_alttotal,
          flhead_usealtbegin, flhead_altbegin,
          flhead_usealtend, flhead_altend,
          flhead_usealtdebits, flhead_altdebits,
          flhead_usealtcredits, flhead_altcredits,
          flhead_usealtbudget, flhead_altbudget,
          flhead_usealtdiff, flhead_altdiff,
          flhead_type, flhead_active, flhead_sys
)
  SELECT _flheadid, pDestName, flhead_descrip,
         flhead_showtotal, flhead_showstart,
         flhead_showend, flhead_showdelta, flhead_showbudget,
         flhead_showdiff, flhead_showcustom,
         flhead_custom_label,
         flhead_usealttotal, flhead_alttotal,
         flhead_usealtbegin, flhead_altbegin,
         flhead_usealtend, flhead_altend,
         flhead_usealtdebits, flhead_altdebits,
         flhead_usealtcredits, flhead_altcredits,
         flhead_usealtbudget, flhead_altbudget,
         flhead_usealtdiff, flhead_altdiff,
         flhead_type, flhead_active, false
    FROM flhead
   WHERE (flhead_id=pSourceFlheadid);

-- Create temporary table so old and new group ids can be stored
 SELECT relname FROM pg_class INTO _tblName
 WHERE relname = &#39;tmp_flgrpxref&#39;;
 IF (_tblName IS NULL) THEN
  EXECUTE &#39;CREATE TEMPORARY TABLE tmp_flgrpxref&#39; || current_user || &#39; 
  (
	flgrpxref_oldid int4,
	flgrpxref_newid int4
  ) ON COMMIT DROP;&#39;;
  END IF;

-- Copy the top level groups
  PERFORM copyFinancialGroup(flgrp_id, _flheadid, -1)
     FROM flgrp
    WHERE ((flgrp_flhead_id=pSourceFlheadid)
      AND  (flgrp_flgrp_id=-1));

-- Update Group Percent settings
  EXECUTE &#39;UPDATE flgrp
  SET flgrp_prcnt_flgrp_id=flgrpxref_newid
  FROM tmp_flgrpxref&#39; || current_user || &#39; 
  WHERE ((flgrp_flhead_id=&#39; || _flheadid || &#39;)
  AND (flgrp_prcnt_flgrp_id=flgrpxref_oldid));&#39;;

  EXECUTE &#39;UPDATE flitem
  SET flitem_prcnt_flgrp_id=flgrpxref_newid
  FROM tmp_flgrpxref&#39; || current_user || &#39; 
  WHERE ((flitem_flhead_id=&#39; || _flheadid || &#39;)
  AND (flitem_prcnt_flgrp_id=flgrpxref_oldid));&#39;;

  EXECUTE &#39;UPDATE flspec
  SET flspec_prcnt_flgrp_id=flgrpxref_newid
  FROM tmp_flgrpxref&#39; || current_user || &#39; 
  WHERE ((flspec_flhead_id=&#39; || _flheadid || &#39;)
  AND (flspec_prcnt_flgrp_id=flgrpxref_oldid));&#39;;

-- Copy Column Layounts
  INSERT INTO flcol
        (flcol_flhead_id,
        flcol_name,
        flcol_descrip,
        flcol_report_id,
        flcol_month,
        flcol_quarter,
        flcol_year,
        flcol_showdb,
        flcol_prcnt,
        flcol_priortype,
        flcol_priormonth,
        flcol_priorquarter,
        flcol_prioryear,
        flcol_priorprcnt,
        flcol_priordiff,
        flcol_priordiffprcnt,
        flcol_budget,
        flcol_budgetprcnt,
        flcol_budgetdiff,
        flcol_budgetdiffprcnt
)
SELECT
        _flheadid,flcol_name,flcol_descrip,
        flcol_report_id,flcol_month,flcol_quarter,
        flcol_year,flcol_showdb,flcol_prcnt,
        flcol_priortype,flcol_priormonth,flcol_priorquarter,
        flcol_prioryear,flcol_priorprcnt,flcol_priordiff,
        flcol_priordiffprcnt,flcol_budget,flcol_budgetprcnt,
        flcol_budgetdiff,flcol_budgetdiffprcnt
FROM flcol
WHERE (flcol_flhead_id=pSourceFlheadid);

  RETURN _flheadid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.copyinvoice-integer-date">copyinvoice( integer, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pInvcheadid ALIAS FOR $1;
  _invcheadid INTEGER;
  _invcnumber TEXT;
  _invcdate DATE := COALESCE($2, CURRENT_DATE);
  _i RECORD;
BEGIN
  SELECT *
    INTO _i
    FROM invchead
   WHERE(invchead_id=pInvcheadid);
  IF(NOT FOUND) THEN
    RETURN -1;
  END IF;

  _invcnumber := fetchInvcNumber();
  _invcheadid := nextval(&#39;invchead_invchead_id_seq&#39;);

  INSERT INTO invchead
        (invchead_id,
         invchead_cust_id, invchead_shipto_id,
         invchead_ordernumber, invchead_orderdate,
         invchead_posted, invchead_printed,
         invchead_invcnumber, invchead_invcdate, invchead_shipdate,
         invchead_ponumber, invchead_shipvia,
         invchead_fob, invchead_billto_name,
         invchead_billto_address1, invchead_billto_address2,
         invchead_billto_address3, invchead_billto_city,
         invchead_billto_state, invchead_billto_zipcode,
         invchead_billto_phone, invchead_shipto_name,
         invchead_shipto_address1, invchead_shipto_address2,
         invchead_shipto_address3, invchead_shipto_city,
         invchead_shipto_state, invchead_shipto_zipcode,
         invchead_shipto_phone, invchead_salesrep_id,
         invchead_commission,
         invchead_terms_id, invchead_freight,
         invchead_tax, invchead_misc_amount,
         invchead_misc_descrip, invchead_misc_accnt_id,
         invchead_payment, invchead_paymentref,
         invchead_notes, invchead_tax_ratea,
         invchead_tax_rateb, invchead_tax_ratec,
         invchead_billto_country, invchead_shipto_country,
         invchead_prj_id, invchead_curr_id,
         invchead_taxauth_id, invchead_tax_curr_id,
         invchead_adjtax_id, invchead_adjtaxtype_id,
         invchead_adjtax_pcta, invchead_adjtax_pctb,
         invchead_adjtax_pctc, invchead_adjtax_ratea,
         invchead_adjtax_rateb, invchead_adjtax_ratec,
         invchead_freighttax_id, invchead_freighttaxtype_id,
         invchead_freighttax_pcta, invchead_freighttax_pctb,
         invchead_freighttax_pctc, invchead_freighttax_ratea,
         invchead_freighttax_rateb, invchead_freighttax_ratec )
  VALUES(_invcheadid,
         _i.invchead_cust_id, _i.invchead_shipto_id,
         _i.invchead_ordernumber, _i.invchead_orderdate,
         false, false,
         _invcnumber, _invcdate, _i.invchead_shipdate,
         _i.invchead_ponumber, _i.invchead_shipvia,
         _i.invchead_fob, _i.invchead_billto_name,
         _i.invchead_billto_address1, _i.invchead_billto_address2,
         _i.invchead_billto_address3, _i.invchead_billto_city,
         _i.invchead_billto_state, _i.invchead_billto_zipcode,
         _i.invchead_billto_phone, _i.invchead_shipto_name,
         _i.invchead_shipto_address1, _i.invchead_shipto_address2,
         _i.invchead_shipto_address3, _i.invchead_shipto_city,
         _i.invchead_shipto_state, _i.invchead_shipto_zipcode,
         _i.invchead_shipto_phone, _i.invchead_salesrep_id,
         _i.invchead_commission,
         _i.invchead_terms_id, _i.invchead_freight,
         _i.invchead_tax, _i.invchead_misc_amount,
         _i.invchead_misc_descrip, _i.invchead_misc_accnt_id,
         _i.invchead_payment, _i.invchead_paymentref,
         _i.invchead_notes, _i.invchead_tax_ratea,
         _i.invchead_tax_rateb, _i.invchead_tax_ratec,
         _i.invchead_billto_country, _i.invchead_shipto_country,
         _i.invchead_prj_id, _i.invchead_curr_id,
         _i.invchead_taxauth_id, _i.invchead_tax_curr_id,
         _i.invchead_adjtax_id, _i.invchead_adjtaxtype_id,
         _i.invchead_adjtax_pcta, _i.invchead_adjtax_pctb,
         _i.invchead_adjtax_pctc, _i.invchead_adjtax_ratea,
         _i.invchead_adjtax_rateb, _i.invchead_adjtax_ratec,
         _i.invchead_freighttax_id, _i.invchead_freighttaxtype_id,
         _i.invchead_freighttax_pcta, _i.invchead_freighttax_pctb,
         _i.invchead_freighttax_pctc, _i.invchead_freighttax_ratea,
         _i.invchead_freighttax_rateb, _i.invchead_freighttax_ratec );

  INSERT INTO invcitem
        (invcitem_invchead_id,
         invcitem_linenumber, invcitem_item_id,
         invcitem_warehous_id, invcitem_custpn,
         invcitem_number, invcitem_descrip,
         invcitem_ordered, invcitem_billed,
         invcitem_custprice, invcitem_price,
         invcitem_notes, invcitem_salescat_id,
         invcitem_tax_id, invcitem_taxtype_id,
         invcitem_tax_pcta, invcitem_tax_pctb,
         invcitem_tax_pctc, invcitem_tax_ratea,
         invcitem_tax_rateb, invcitem_tax_ratec,
         invcitem_qty_uom_id, invcitem_qty_invuomratio,
         invcitem_price_uom_id, invcitem_price_invuomratio,
         invcitem_coitem_id)
  SELECT _invcheadid,
         invcitem_linenumber, invcitem_item_id,
         invcitem_warehous_id, invcitem_custpn,
         invcitem_number, invcitem_descrip,
         invcitem_ordered, invcitem_billed,
         invcitem_custprice, invcitem_price,
         invcitem_notes, invcitem_salescat_id,
         invcitem_tax_id, invcitem_taxtype_id,
         invcitem_tax_pcta, invcitem_tax_pctb,
         invcitem_tax_pctc, invcitem_tax_ratea,
         invcitem_tax_rateb, invcitem_tax_ratec,
         invcitem_qty_uom_id, invcitem_qty_invuomratio,
         invcitem_price_uom_id, invcitem_price_invuomratio,
         invcitem_coitem_id
    FROM invcitem
   WHERE(invcitem_invchead_id=pInvcheadid);

  PERFORM changeInvoiceTaxAuth(_invcheadid, _i.invchead_taxauth_id);

  RETURN _invcheadid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.copyitem-integer-text">copyitem( integer, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSItemid ALIAS FOR $1;
  pTItemNumber ALIAS FOR $2;
  _itemid INTEGER;
  _r RECORD;
  _id INTEGER;

BEGIN

  SELECT NEXTVAL(&#39;item_item_id_seq&#39;) INTO _itemid;
  INSERT INTO item
  ( item_id, item_number, item_descrip1, item_descrip2,
    item_classcode_id, item_type,
    item_active, item_picklist, item_sold, item_fractional,
    item_maxcost, item_prodweight, item_packweight,
    item_prodcat_id,item_exclusive, item_listprice,
    item_config, item_comments, item_extdescrip,
    item_upccode, item_planning_type,
    item_inv_uom_id, item_price_uom_id )
  SELECT _itemid, pTItemNumber, item_descrip1, item_descrip2,
         item_classcode_id, item_type,
         item_active, item_picklist, item_sold, item_fractional,
         item_maxcost, item_prodweight, item_packweight,
         item_prodcat_id, item_exclusive, item_listprice,
         item_config, item_comments, item_extdescrip,
         item_upccode, item_planning_type,
         item_inv_uom_id, item_price_uom_id
  FROM item
  WHERE (item_id=pSItemid);

  INSERT INTO imageass
  (imageass_source_id, imageass_source, imageass_image_id, imageass_purpose)
  SELECT _itemid, &#39;I&#39;, imageass_image_id, imageass_purpose
  FROM imageass
  WHERE ((imageass_source_id=pSItemid)
  AND (imageass_source=&#39;I&#39;));
  
  INSERT INTO url
  (url_source_id, url_source, url_title, url_url)
  SELECT _itemid, &#39;I&#39;, url_title, url_url
  FROM url
  WHERE ((url_source_id=pSItemid)
  AND (url_source=&#39;I&#39;));

  INSERT INTO itemtax
        (itemtax_item_id, itemtax_taxauth_id, itemtax_taxtype_id)
  SELECT _itemid, itemtax_taxauth_id, itemtax_taxtype_id
    FROM itemtax
   WHERE(itemtax_item_id=pSItemid);

  INSERT INTO charass
  ( charass_target_type, charass_target_id,
    charass_char_id, charass_value )
  SELECT &#39;I&#39;, _itemid, charass_char_id, charass_value
  FROM charass
  WHERE ( (charass_target_type=&#39;I&#39;)
   AND (charass_target_id=pSItemid) );

  FOR _r IN SELECT itemuomconv_id,
                   itemuomconv_from_uom_id,
                   itemuomconv_from_value,
                   itemuomconv_to_uom_id,
                   itemuomconv_to_value,
                   itemuomconv_fractional
              FROM itemuomconv
             WHERE(itemuomconv_item_id=pSItemid) LOOP
    SELECT nextval(&#39;itemuomconv_itemuomconv_id_seq&#39;) INTO _id;
    INSERT INTO itemuomconv
          (itemuomconv_id, itemuomconv_item_id,
           itemuomconv_from_uom_id, itemuomconv_from_value,
           itemuomconv_to_uom_id, itemuomconv_to_value,
           itemuomconv_fractional)
    VALUES(_id, _itemid,
           _r.itemuomconv_from_uom_id, _r.itemuomconv_from_value,
           _r.itemuomconv_to_uom_id, _r.itemuomconv_to_value,
           _r.itemuomconv_fractional);

    INSERT INTO itemuom
          (itemuom_itemuomconv_id, itemuom_uomtype_id)
    SELECT _id, itemuom_uomtype_id
      FROM itemuom
     WHERE(itemuom_itemuomconv_id=_r.itemuomconv_id);
  END LOOP;

  RETURN _itemid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.copyitem-integer-text-boolean-boolean-boolean">copyitem( integer, text, boolean, boolean, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSItemid ALIAS FOR $1;
  pTItemNumber ALIAS FOR $2;
  pCopyBOM ALIAS FOR $3;
  pCopyBOO ALIAS FOR $4;
  pCopyCosts ALIAS FOR $5;
BEGIN
  RETURN copyItem(pSItemid, pTItemNumber, pCopyBOM, pCopyBOO, pCopyCosts, FALSE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.copyitem-integer-text-boolean-boolean-boolean-boolean">copyitem( integer, text, boolean, boolean, boolean, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSItemid ALIAS FOR $1;
  pTItemNumber ALIAS FOR $2;
  pCopyBOM ALIAS FOR $3;
  pCopyBOO ALIAS FOR $4;
  pCopyCosts ALIAS FOR $5;
  pCopyUsedAt ALIAS FOR $6;
  _itemid INTEGER;

BEGIN

  SELECT copyItem(pSItemid, pTItemNumber) INTO _itemid;

  IF (pCopyBOM) THEN
    PERFORM copyBOM(pSItemid, _itemid, (pCopyBOO AND pCopyUsedAt));
  END IF;

  IF (pCopyBOO) THEN
    PERFORM copyBOO(pSItemid, _itemid);
  END IF;

  IF (pCopyCosts) THEN
    INSERT INTO itemcost
    ( itemcost_item_id, itemcost_costelem_id, itemcost_lowlevel,
      itemcost_stdcost, itemcost_posted,
      itemcost_actcost, itemcost_curr_id, itemcost_updated )
    SELECT _itemid, itemcost_costelem_id, itemcost_lowlevel,
      itemcost_stdcost, CURRENT_DATE,
      itemcost_actcost, itemcost_curr_id, CURRENT_DATE
    FROM itemcost
    WHERE (itemcost_item_id=pSItemid);
  END IF;

  RETURN _itemid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.copyitemsite-integer-integer">copyitemsite( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pitemsiteid	ALIAS FOR $1;
  pdestwhsid	ALIAS FOR $2;
  _destwhs	whsinfo%ROWTYPE;
  _new		itemsite%ROWTYPE;

BEGIN
  -- make a copy of the old itemsite
  SELECT * INTO _new
  FROM itemsite
  WHERE (itemsite_id=pitemsiteid);
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  -- if there is no dest warehouse then perhaps the user is manually copying it
  IF (pdestwhsid IS NOT NULL) THEN
    SELECT * INTO _destwhs
    FROM whsinfo
    WHERE (warehous_id=pdestwhsid);
    IF (NOT FOUND) THEN
      RETURN -2;
    END IF;
  END IF;

  IF (NOT hasPriv(&#39;MaintainItemSites&#39;)) THEN
    RETURN -3;
  END IF;

  SELECT itemsite_id INTO _new.itemsite_id
  FROM itemsite
  WHERE ((itemsite_item_id=_new.itemsite_item_id)
    AND  (itemsite_warehous_id=pdestwhsid OR
	  (itemsite_warehous_id IS NULL AND pdestwhsid IS NULL)));
  IF (FOUND) THEN
    RETURN _new.itemsite_id;
  END IF;

  -- now override the things we know have to change
  _new.itemsite_id		:= NEXTVAL(&#39;itemsite_itemsite_id_seq&#39;);
  _new.itemsite_warehous_id	:= pdestwhsid;
  _new.itemsite_qtyonhand	:= 0;
  _new.itemsite_value           := 0;
  _new.itemsite_datelastcount	:= NULL;
  _new.itemsite_datelastused	:= NULL;
  _new.itemsite_nnqoh		:= 0;
  _new.itemsite_location_id    := -1;

  IF (_destwhs.warehous_transit) THEN
    _new.itemsite_reorderlevel	:= 0;
    _new.itemsite_ordertoqty	:= 0;
    _new.itemsite_soldranking	:= NULL;
    _new.itemsite_supply	:= FALSE;
    _new.itemsite_loccntrl	:= FALSE;
    _new.itemsite_safetystock	:= 0;
    _new.itemsite_minordqty	:= 0;
    _new.itemsite_multordqty	:= 0;
    _new.itemsite_leadtime	:= 0;
    _new.itemsite_controlmethod	:= &#39;R&#39;;
    IF(_new.itemsite_costmethod=&#39;N&#39;) THEN
      _new.itemsite_costmethod := &#39;S&#39;;
    END IF;
    _new.itemsite_active	:= TRUE;
    -- ? _new.itemsite_plancode_id	:= -1;
    -- ? _new.itemsite_costcat_id	:= -1;
    _new.itemsite_eventfence	:= 1;
    _new.itemsite_sold		:= FALSE;
    _new.itemsite_stocked	:= FALSE;
    _new.itemsite_location_id	:= -1;
    _new.itemsite_useparams	:= FALSE;
    _new.itemsite_useparamsmanual := FALSE;
    _new.itemsite_createpr	:= FALSE;
    _new.itemsite_location	:= NULL;
    _new.itemsite_location_comments := NULL;
    _new.itemsite_notes		:= &#39;Transit Warehouse&#39;;
    _new.itemsite_nnqoh		:= 0;
    _new.itemsite_createwo	:= FALSE;
    _new.itemsite_costcat_id	:= _destwhs.warehous_costcat_id;
  END IF;

  INSERT INTO itemsite (
    itemsite_id,			itemsite_item_id,
    itemsite_warehous_id,		itemsite_qtyonhand,
    itemsite_costmethod,                itemsite_value,
    itemsite_reorderlevel,		itemsite_ordertoqty,
    itemsite_cyclecountfreq,		itemsite_datelastcount,
    itemsite_datelastused,
    itemsite_supply,			itemsite_loccntrl,
    itemsite_safetystock,		itemsite_minordqty,
    itemsite_multordqty,		itemsite_leadtime,
    itemsite_abcclass,			itemsite_issuemethod,
    itemsite_controlmethod,		itemsite_active,
    itemsite_plancode_id,		itemsite_costcat_id,
    itemsite_eventfence,		itemsite_sold,
    itemsite_stocked,			itemsite_freeze,
    itemsite_location_id,
    itemsite_useparams,			itemsite_useparamsmanual,
    itemsite_soldranking,		itemsite_createpr,
    itemsite_location,			itemsite_location_comments,
    itemsite_notes,			itemsite_perishable,
    itemsite_nnqoh,			itemsite_autoabcclass,
    itemsite_ordergroup,		itemsite_disallowblankwip,
    itemsite_maxordqty,			itemsite_mps_timefence,
    itemsite_createwo,			itemsite_warrpurc,
    itemsite_autoreg
  ) VALUES (
    _new.itemsite_id,			_new.itemsite_item_id,
    _new.itemsite_warehous_id,		_new.itemsite_qtyonhand,
    _new.itemsite_costmethod,           _new.itemsite_value,
    _new.itemsite_reorderlevel,	_new.itemsite_ordertoqty,
    _new.itemsite_cyclecountfreq,	_new.itemsite_datelastcount,
    _new.itemsite_datelastused,
    _new.itemsite_supply,		_new.itemsite_loccntrl,
    _new.itemsite_safetystock,		_new.itemsite_minordqty,
    _new.itemsite_multordqty,		_new.itemsite_leadtime,
    _new.itemsite_abcclass,		_new.itemsite_issuemethod,
    _new.itemsite_controlmethod,	_new.itemsite_active,
    _new.itemsite_plancode_id,		_new.itemsite_costcat_id,
    _new.itemsite_eventfence,		_new.itemsite_sold,
    _new.itemsite_stocked,		_new.itemsite_freeze,
    _new.itemsite_location_id,
    _new.itemsite_useparams,		_new.itemsite_useparamsmanual,
    _new.itemsite_soldranking,		_new.itemsite_createpr,
    _new.itemsite_location,		_new.itemsite_location_comments,
    _new.itemsite_notes,		_new.itemsite_perishable,
    _new.itemsite_nnqoh,		_new.itemsite_autoabcclass,
    _new.itemsite_ordergroup,		_new.itemsite_disallowblankwip,
    _new.itemsite_maxordqty,		_new.itemsite_mps_timefence,
    _new.itemsite_createwo,   	        _new.itemsite_warrpurc,
    _new.itemsite_autoreg
    );

  RETURN _new.itemsite_id;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.copylocale-integer">copylocale( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pLocaleid ALIAS FOR $1;
  _localeid INTEGER;

BEGIN

  SELECT NEXTVAL(&#39;locale_locale_id_seq&#39;) INTO _localeid;

  INSERT INTO locale
        (locale_id, locale_code, locale_descrip,
         locale_lang_file,
         locale_dateformat,
         locale_currformat,
         locale_qtyformat,
         locale_comments,
         locale_qtyperformat,
         locale_salespriceformat,
         locale_extpriceformat,
         locale_timeformat,
         locale_timestampformat,
         local_costformat,
         locale_costformat,
         locale_purchpriceformat,
         locale_uomratioformat,
         locale_intervalformat,
         locale_lang_id,
         locale_country_id,
         locale_error_color,
         locale_warning_color,
         locale_emphasis_color,
         locale_altemphasis_color,
         locale_expired_color,
         locale_future_color,
         locale_curr_scale,
         locale_salesprice_scale,
         locale_purchprice_scale,
         locale_extprice_scale,
         locale_cost_scale,
         locale_qty_scale,
         locale_qtyper_scale,
         locale_uomratio_scale)
  SELECT _localeid, &#39;&#39;, &#39;&#39;,
         locale_lang_file,
         locale_dateformat,
         locale_currformat,
         locale_qtyformat,
         locale_comments,
         locale_qtyperformat,
         locale_salespriceformat,
         locale_extpriceformat,
         locale_timeformat,
         locale_timestampformat,
         local_costformat,
         locale_costformat,
         locale_purchpriceformat,
         locale_uomratioformat,
         locale_intervalformat,
         locale_lang_id,
         locale_country_id,
         locale_error_color,
         locale_warning_color,
         locale_emphasis_color,
         locale_altemphasis_color,
         locale_expired_color,
         locale_future_color,
         locale_curr_scale,
         locale_salesprice_scale,
         locale_purchprice_scale,
         locale_extprice_scale,
         locale_cost_scale,
         locale_qty_scale,
         locale_qtyper_scale,
         locale_uomratio_scale
    FROM locale
   WHERE(locale_id=pLocaleid);

  RETURN _localeid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.copypo-integer-integer-date-boolean">copypo( integer, integer, date, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSrcid		ALIAS FOR $1;
  pVendid		ALIAS FOR $2;
  pOrderdate		ALIAS FOR $3;
  pRecheckVendinfo	ALIAS FOR $4;

  _tgtid		INTEGER;
  _orderdate		DATE;
  _head			RECORD;
  _itemsrc		RECORD;
  _lineitem		RECORD;
  _qty			NUMERIC;
  _unitprice		NUMERIC;
  _uomratio		NUMERIC;
  _vend_restrictpurch	BOOLEAN;

BEGIN
  SELECT * INTO _head FROM pohead WHERE pohead_id = pSrcid;
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;
  IF (_head.pohead_vend_id != pVendid) THEN
    RETURN -2;		-- not supported now but should be in the future
  END IF;		-- when enabled, set pRecheckVendinfo if vendors don&#39;t match

  IF (pOrderdate IS NULL) THEN
    _orderdate := CURRENT_DATE;
  ELSE
    _orderdate := pOrderdate;
  END IF;

  INSERT INTO pohead (pohead_status, pohead_number,
		      pohead_orderdate,
		      pohead_fob, pohead_shipvia,
		      pohead_freight, pohead_printed, pohead_tax,
		      pohead_terms_id, pohead_warehous_id,
		      pohead_vendaddr_id, pohead_agent_username,
		      pohead_curr_id, pohead_saved, pohead_vend_id
	      ) VALUES (
		      &#39;U&#39;, fetchPoNumber(),
		      _orderdate,
		      _head.pohead_fob, _head.pohead_shipvia,
		      _head.pohead_freight, false, _head.pohead_tax,
		      _head.pohead_terms_id, _head.pohead_warehous_id,
		      _head.pohead_vendaddr_id, _head.pohead_agent_username,
		      _head.pohead_curr_id, true, _head.pohead_vend_id);	-- should pohead_saved be false?

  _tgtid := CURRVAL(&#39;pohead_pohead_id_seq&#39;);

  IF (pRecheckVendinfo) THEN
    SELECT vend_restrictpurch INTO _vend_restrictpurch
    FROM vend WHERE (vend_id = pVendid);

    FOR _lineitem IN SELECT *
		  FROM poitem 
		  WHERE (poitem_pohead_id = pSrcid) LOOP

      SELECT * INTO _itemsrc
      FROM itemsrc, itemsite
      WHERE (itemsrc_active
        AND  (itemsrc_id = _lineitem.poitem_itemsrc_id)
	AND  (itemsite_id = _lineitem.poitem_itemsite_id));
      IF (NOT FOUND AND _vend_restrictpurch) THEN
	RETURN -3;
      END IF;

      -- handle changes to the uom ratio and consequent qty changes
      _uomratio := COALESCE(_itemsrc.itemsrc_invvendoruomratio, _lineitem.poitem_invvenduomratio);
      IF (_itemsrc.itemsrc_invvendoruomratio IS NULL
	  OR _itemsrc.itemsrc_invvendoruomratio != _lineitem.poitem_invvenduomratio) THEN
	_qty := _lineitem.poitem_qty_ordered;

      ELSE
	_qty := _lineitem.poitem_qty_ordered * _lineitem.poitem_invvenduomratio /
					       _itemsrc.itemsrc_invvendoruomratio;
	IF (_itemsrc.itemsrc_minordqty IS NOT NULL) THEN
	  IF (_qty &lt; _itemsrc.itemsrc_minordqty) THEN
	    _qty := _itemsrc.itemsrc_minordqty;
	  ELSIF (_itemsrc.itemsrc_multordqty &gt; 0
		   AND _qty % _itemsrc.itemsrc_multordqty &gt; 0) THEN
	    _qty = _qty % _itemsrc.itemsrc_multordqty + _itemsrc.itemsrc_multordqty;
	  END IF;
	END IF;
      END IF;

      IF (_itemsrc.itemsrc_id IS NULL) THEN
	_unitprice = _lineitem.poitem_unitprice;
      ELSE
	SELECT currToCurr(itemsrcp_curr_id, _head.pohead_curr_id,
			  itemsrcp_price, _orderdate) INTO _unitprice
	FROM itemsrcp
	WHERE ((itemsrcp_itemsrc_id = _itemsrc.itemsrc_id)
	  AND  (itemsrcp_qtybreak &lt;= _lineitem.poitem_qty_ordered))
	ORDER BY itemsrcp_qtybreak DESC
	LIMIT 1;
	IF (_unitprice IS NULL) THEN
	  RETURN -4;
	END IF;
      END IF;

      INSERT INTO poitem (poitem_status, poitem_pohead_id, poitem_linenumber,
			  poitem_duedate,
			  poitem_itemsite_id,
			  poitem_vend_item_descrip,
			  poitem_vend_uom,
			  poitem_invvenduomratio,
			  poitem_qty_ordered, poitem_unitprice,
			  poitem_vend_item_number,
			  poitem_comments, poitem_expcat_id,
			  poitem_itemsrc_id,
			  poitem_freight,
			  poitem_stdcost,
			  poitem_manuf_name,
			  poitem_manuf_item_number,
			  poitem_manuf_item_descrip
		    ) VALUES (
			  &#39;U&#39;, _tgtid, _lineitem.poitem_linenumber,
			  _orderdate + COALESCE(_itemsrc.itemsrc_leadtime, 0),
			  _lineitem.poitem_itemsite_id,
			  COALESCE(_itemsrc.itemsrc_vend_item_descrip,
				   _lineitem.poitem_vend_item_descrip),
			  COALESCE(_itemsrc.itemsrc_vend_uom, _lineitem.poitem_vend_uom),
			  COALESCE(_itemsrc.itemsrc_invvendoruomratio,
				   _lineitem.poitem_invvenduomratio),
			  _qty, _unitprice,
			  COALESCE(_itemsrc.itemsrc_vend_item_number,
				   _lineitem.poitem_vend_item_number),
			  _lineitem.poitem_comments, _lineitem.poitem_expcat_id,
			  COALESCE(_itemsrc.itemsrc_id, -1),
			  _lineitem.poitem_freight,
			  stdcost(_itemsrc.itemsite_item_id),
			  COALESCE(_itemsrc.itemsrc_manuf_name,
				   _lineitem.poitem_manuf_name),
		          COALESCE(_itemsrc.itemsrc_manuf_item_number,
				   _lineitem.poitem_manuf_item_number),
			  COALESCE(_itemsrc.itemsrc_manuf_item_descrip,
				   _lineitem.poitem_manuf_item_descrip));

    END LOOP;
  ELSE
    INSERT INTO poitem (poitem_status, poitem_pohead_id, poitem_linenumber,
			poitem_duedate, poitem_itemsite_id,
			poitem_vend_item_descrip, poitem_vend_uom,
			poitem_invvenduomratio, poitem_qty_ordered,
			poitem_unitprice,
			poitem_vend_item_number, poitem_comments,
			poitem_expcat_id, poitem_itemsrc_id, poitem_freight,
			poitem_stdcost, poitem_manuf_name, 
			poitem_manuf_item_number, poitem_manuf_item_descrip
		) SELECT &#39;U&#39;, _tgtid, poitem_linenumber,
			_orderdate + COALESCE(itemsrc_leadtime, 0), poitem_itemsite_id,
			poitem_vend_item_descrip, poitem_vend_uom,
			poitem_invvenduomratio, poitem_qty_ordered,
			poitem_unitprice,
			poitem_vend_item_number, poitem_comments,
			poitem_expcat_id, poitem_itemsrc_id, poitem_freight,
			stdcost(itemsite_item_id), poitem_manuf_name,
			poitem_manuf_item_number, poitem_manuf_item_descrip
		  FROM poitem
		    LEFT OUTER JOIN itemsrc ON (itemsrc_id=poitem_itemsrc_id)
		    LEFT OUTER JOIN itemsite ON (itemsite_id=poitem_itemsite_id)
		  WHERE (poitem_pohead_id = pSrcid);
  END IF;

  -- Todo: recalculate tax?

  RETURN _tgtid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.copypricingschedule-integer">copypricingschedule( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pIpsheadId ALIAS FOR $1;
  _ipsheadid INTEGER;
  _ipsitemid INTEGER;
  _x RECORD;

BEGIN

  _ipsheadid := nextval(&#39;ipshead_ipshead_id_seq&#39;);
  INSERT INTO ipshead 
  ( ipshead_id, ipshead_name, ipshead_descrip,
    ipshead_effective, ipshead_expires, 
    ipshead_curr_id, ipshead_updated ) 
  SELECT _ipsheadid, orig.ipshead_name || (SELECT CAST((COUNT(cnt.ipshead_id)+1) AS text)
				            FROM ipshead cnt
				            WHERE (SUBSTRING(cnt.ipshead_name FROM 0 FOR char_length(orig.ipshead_name)+1) = orig.ipshead_name)),
	 orig.ipshead_descrip, orig.ipshead_effective, orig.ipshead_expires, 
	 orig.ipshead_curr_id, CURRENT_DATE
  FROM ipshead orig
  WHERE (orig.ipshead_id=pIpsheadId);

  FOR _x IN
    SELECT ipsitem_id FROM ipsitem WHERE (ipsitem_ipshead_id=pIpsheadid)
  LOOP 
      _ipsitemid := nextval(&#39;ipsitem_ipsitem_id_seq&#39;);
      INSERT INTO ipsitem 
          (ipsitem_id, ipsitem_ipshead_id, ipsitem_item_id, 
           ipsitem_qtybreak, ipsitem_price,
           ipsitem_qty_uom_id, ipsitem_price_uom_id) 
      SELECT _ipsitemid, _ipsheadid, ipsitem_item_id, 
           ipsitem_qtybreak, ipsitem_price,
           ipsitem_qty_uom_id, ipsitem_price_uom_id 
      FROM ipsitem 
      WHERE (ipsitem_id=_x.ipsitem_id); 

      INSERT INTO ipsitemchar
        ( ipsitemchar_ipsitem_id, ipsitemchar_char_id,
          ipsitemchar_value, ipsitemchar_price)
      SELECT  _ipsitemid, ipsitemchar_char_id,
          ipsitemchar_value, ipsitemchar_price
      FROM ipsitemchar
      WHERE (ipsitemchar_ipsitem_id=_x.ipsitem_id);
  END LOOP;

  INSERT INTO ipsprodcat 
        (ipsprodcat_ipshead_id, ipsprodcat_prodcat_id, 
         ipsprodcat_qtybreak, ipsprodcat_discntprcnt) 
  SELECT _ipsheadid, ipsprodcat_prodcat_id, 
         ipsprodcat_qtybreak, ipsprodcat_discntprcnt 
  FROM ipsprodcat 
  WHERE (ipsprodcat_ipshead_id=pIpsheadId);

  RETURN _ipsheadid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.copyso-integer-date">copyso( integer, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSoheadid ALIAS FOR $1;
  pSchedDate ALIAS FOR $2;
  _soheadid INTEGER;

BEGIN

  SELECT NEXTVAL(&#39;cohead_cohead_id_seq&#39;) INTO _soheadid;

  INSERT INTO cohead
  ( cohead_id, cohead_number, cohead_cust_id, cohead_prj_id,
    cohead_orderdate, cohead_packdate, cohead_origin, cohead_fob,
    cohead_warehous_id, cohead_terms_id, cohead_salesrep_id,
    cohead_custponumber, cohead_shipvia, cohead_shipchrg_id, cohead_shipform_id, cohead_holdtype,
    cohead_shipto_id, cohead_shiptoname, cohead_shiptoaddress1, cohead_shiptoaddress2, cohead_shiptoaddress3,
    cohead_shiptocity, cohead_shiptostate, cohead_shiptozipcode, cohead_shiptophone,
    cohead_billtoname, cohead_billtoaddress1, cohead_billtoaddress2, cohead_billtoaddress3,
    cohead_billtocity, cohead_billtostate, cohead_billtozipcode,
    cohead_misc_accnt_id, cohead_misc_descrip, cohead_misc, cohead_freight, cohead_commission,
    cohead_ordercomments, cohead_shipcomments,
    cohead_imported, cohead_curr_id, cohead_taxauth_id )
  SELECT _soheadid, fetchSoNumber(), cohead_cust_id, cohead_prj_id,
         CURRENT_DATE, cohead_packdate, cohead_origin, cohead_fob,
         cohead_warehous_id, cohead_terms_id, cohead_salesrep_id,
         cohead_custponumber, cohead_shipvia, cohead_shipchrg_id, cohead_shipform_id, cohead_holdtype,
         cohead_shipto_id, cohead_shiptoname, cohead_shiptoaddress1, cohead_shiptoaddress2, cohead_shiptoaddress3,
         cohead_shiptocity, cohead_shiptostate, cohead_shiptozipcode, cohead_shiptophone,
         cohead_billtoname, cohead_billtoaddress1, cohead_billtoaddress2, cohead_billtoaddress3,
         cohead_billtocity, cohead_billtostate, cohead_billtozipcode,
         cohead_misc_accnt_id, cohead_misc_descrip, cohead_misc, cohead_freight, cohead_commission,
         cohead_ordercomments, cohead_shipcomments,
         FALSE, cohead_curr_id, cohead_taxauth_id
  FROM cohead
  WHERE (cohead_id=pSoheadid);

  INSERT INTO coitem
  ( coitem_cohead_id, coitem_linenumber, coitem_subnumber, coitem_itemsite_id, coitem_status,
    coitem_scheddate,
    coitem_promdate,
    coitem_qtyord, coitem_qtyshipped, coitem_qtyreturned,
    coitem_price, coitem_custprice, coitem_unitcost,
    coitem_qty_uom_id, coitem_price_uom_id,
    coitem_qty_invuomratio, coitem_price_invuomratio,
    coitem_order_type, coitem_order_id,
    coitem_memo, coitem_custpn,
    coitem_imported, coitem_tax_id )
  SELECT _soheadid, coitem_linenumber, coitem_subnumber, coitem_itemsite_id, &#39;O&#39;,
         COALESCE(pSchedDate, coitem_scheddate),
         coitem_promdate,
         coitem_qtyord, 0, 0,
         coitem_price, coitem_custprice, stdCost(itemsite_item_id),
         coitem_qty_uom_id, coitem_price_uom_id,
         coitem_qty_invuomratio, coitem_price_invuomratio,
         coitem_order_type, -1,
         coitem_memo, coitem_custpn,
         FALSE, coitem_tax_id
  FROM coitem, itemsite
  WHERE ( (coitem_itemsite_id=itemsite_id)
   AND (coitem_status &lt;&gt; &#39;X&#39;)
   AND (coitem_cohead_id=pSoheadid)
   AND (coitem_subnumber = 0) );

  INSERT INTO charass
        (charass_target_type, charass_target_id,
         charass_char_id, charass_value)
  SELECT charass_target_type, b.coitem_id,
         charass_char_id, charass_value
    FROM coitem a, charass, coitem b
   WHERE ((charass_target_type=&#39;SI&#39;)
     AND  (charass_target_id=a.coitem_id)
     AND  (a.coitem_cohead_id=pSoheadid)
     AND  (b.coitem_cohead_id=_soheadid)
     AND  (a.coitem_linenumber=b.coitem_linenumber)
     AND  (a.coitem_subnumber=b.coitem_subnumber));

  RETURN _soheadid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.copytransferorder-integer-date">copytransferorder( integer, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSrcid		ALIAS FOR $1;
  pSchedDate		DATE := $2;
  _head			RECORD;
  _toheadid		INTEGER;

BEGIN
  SELECT * INTO _head FROM tohead WHERE tohead_id = pSrcid;
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  IF (pSchedDate IS NULL) THEN
    pSchedDate := CURRENT_DATE;
  END IF;

  INSERT INTO tohead (tohead_number,		tohead_status,
		      tohead_orderdate,
		      tohead_src_warehous_id,	tohead_srcname,
		      tohead_srcaddress1,	tohead_srcaddress2,
		      tohead_srcaddress3,	tohead_srccity,
		      tohead_srcstate,		tohead_srcpostalcode,
		      tohead_srccountry,	tohead_srccntct_id,
		      tohead_srccntct_name,	tohead_srcphone,
		      tohead_trns_warehous_id,	tohead_trnsname,
		      tohead_dest_warehous_id,	tohead_destname,
		      tohead_destaddress1,	tohead_destaddress2,
		      tohead_destaddress3,	tohead_destcity,
		      tohead_deststate,		tohead_destpostalcode,
		      tohead_destcountry,	tohead_destcntct_id,
		      tohead_destcntct_name,	tohead_destphone,
		      tohead_agent_username,	tohead_shipvia,
		      tohead_shipform_id,	tohead_shipchrg_id,
		      tohead_taxauth_id,
		      tohead_freight,		tohead_freight_curr_id,
		      tohead_freighttax_id,
                      tohead_freighttax_pcta,   tohead_freighttax_pctb,
                      tohead_freighttax_pctc,   tohead_freighttax_ratea,
                      tohead_freighttax_rateb,  tohead_freighttax_ratec,
		      tohead_shipcomplete,	tohead_ordercomments,
		      tohead_shipcomments
	      ) VALUES (
		      fetchNextNumber(&#39;ToNumber&#39;),	&#39;O&#39;,
		      CURRENT_DATE,
		      _head.tohead_src_warehous_id, _head.tohead_srcname,
		      _head.tohead_srcaddress1,	    _head.tohead_srcaddress2,
		      _head.tohead_srcaddress3,	    _head.tohead_srccity,
		      _head.tohead_srcstate,	    _head.tohead_srcpostalcode,
		      _head.tohead_srccountry,	    _head.tohead_srccntct_id,
		      _head.tohead_srccntct_name,   _head.tohead_srcphone,
		      _head.tohead_trns_warehous_id,_head.tohead_trnsname,
		      _head.tohead_dest_warehous_id,_head.tohead_destname,
		      _head.tohead_destaddress1,    _head.tohead_destaddress2,
		      _head.tohead_destaddress3,    _head.tohead_destcity,
		      _head.tohead_deststate,	    _head.tohead_destpostalcode,
		      _head.tohead_destcountry,	    _head.tohead_destcntct_id,
		      _head.tohead_destcntct_name,  _head.tohead_destphone,
		      _head.tohead_agent_username,  _head.tohead_shipvia,
		      _head.tohead_shipform_id,	    _head.tohead_shipchrg_id,
		      _head.tohead_taxauth_id,
		      _head.tohead_freight,	    _head.tohead_freight_curr_id,
		      _head.tohead_freighttax_id,
                      _head.tohead_freighttax_pcta, _head.tohead_freighttax_pctb,
                      _head.tohead_freighttax_pctc, _head.tohead_freighttax_ratea,
                      _head.tohead_freighttax_rateb,_head.tohead_freighttax_ratec,
		      _head.tohead_shipcomplete,    _head.tohead_ordercomments,
		      _head.tohead_shipcomments);

  _toheadid := CURRVAL(&#39;tohead_tohead_id_seq&#39;);

  INSERT INTO toitem (toitem_tohead_id,	toitem_linenumber,	toitem_item_id,
		      toitem_status,
		      toitem_duedate,
		      toitem_schedshipdate,
		      toitem_qty_ordered,	toitem_uom,	toitem_stdcost,	
		      toitem_freight,	toitem_freight_curr_id, toitem_freighttax_id,
                      toitem_freighttax_pcta, toitem_freighttax_pctb, toitem_freighttax_pctc,
                      toitem_freighttax_ratea, toitem_freighttax_rateb, toitem_freighttax_ratec,
                      toitem_notes
	      ) SELECT _toheadid,	toitem_linenumber,	toitem_item_id,
		      &#39;O&#39;,
		      pSchedDate + COALESCE(d.itemsite_leadtime, 0) + COALESCE(t.itemsite_leadtime, 0),
		      pSchedDate + COALESCE(t.itemsite_leadtime, 0),
		      toitem_qty_ordered,	toitem_uom,	stdcost(toitem_item_id),
		      toitem_freight,	toitem_freight_curr_id, toitem_freighttax_id,
                      toitem_freighttax_pcta, toitem_freighttax_pctb, toitem_freighttax_pctc,
                      toitem_freighttax_ratea, toitem_freighttax_rateb, toitem_freighttax_ratec,
                      toitem_notes
		FROM toitem
		     LEFT OUTER JOIN itemsite d ON (
			    (toitem_item_id=d.itemsite_item_id)
			    AND  (d.itemsite_warehous_id=_head.tohead_dest_warehous_id))
		     LEFT OUTER JOIN itemsite t ON (
			    (toitem_item_id=t.itemsite_item_id)
			    AND  (t.itemsite_warehous_id=_head.tohead_trns_warehous_id))
		WHERE (toitem_tohead_id=pSrcid);

  PERFORM changeToTaxAuth(_toheadid, _head.tohead_taxauth_id);

  RETURN _toheadid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.correctporeceipt-integer-numeric-numeric-integer">correctporeceipt( integer, numeric, numeric, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPorecvid ALIAS FOR $1;
  pQty ALIAS FOR $2;
  pFreight ALIAS FOR $3;
  pItemlocSeries ALIAS FOR $4;

BEGIN
  RETURN correctReceipt(&#39;PO&#39;, $1, $2, $3, $4, NULL, NULL);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.correctporeceipt-integer-numeric-numeric-integer-integer-date">correctporeceipt( integer, numeric, numeric, integer, integer, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN correctReceipt(&#39;PO&#39;, $1, $2, $3, $4, $5, $6);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.correctproduction-integer-numeric-boolean-boolean">correctproduction( integer, numeric, boolean, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid ALIAS FOR $1;
  pQty ALIAS FOR $2;
  pBackflush ALIAS FOR $3;
  pBackflushOperations ALIAS FOR $4;

BEGIN

  RETURN  correctProduction(pWoid, pQty, pBackflush, pBackflushOperations, 0);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.correctproduction-integer-numeric-boolean-boolean-integer">correctproduction( integer, numeric, boolean, boolean, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid ALIAS FOR $1;
  pQty ALIAS FOR $2;
  pBackflush ALIAS FOR $3;
  pBackflushOperations ALIAS FOR $4;
  pItemlocSeries ALIAS FOR $5;
  _invhistid INTEGER;
  _itemlocSeries INTEGER;
  _r RECORD;
  _wooperitem RECORD;
  _parentWIPAccntid INTEGER;
  _parentQty NUMERIC;
  _qty NUMERIC;
  _invqty NUMERIC;
  _rntime NUMERIC;
  _sense TEXT;

BEGIN

  IF (pQty = 0) THEN
    RETURN pItemlocseries;
  ELSIF (pQty &gt; 0) THEN
    _sense := &#39;from&#39;;
  ELSE
    _sense := &#39;to&#39;;
  END IF;
  
  IF ( ( SELECT (NOT (wo_status=&#39;I&#39;))
         FROM wo
         WHERE (wo_id=pWoid) ) ) THEN
    RETURN -1;
  END IF;

  IF ( ( SELECT (item_type IN (&#39;B&#39;,&#39;J&#39;))
         FROM wo, itemsite, item
         WHERE ( (wo_itemsite_id=itemsite_id)
          AND (itemsite_item_id=item_id)
          AND (wo_id=pWoid) ) ) ) THEN
    RETURN -2;
  END IF;

  SELECT roundQty(item_fractional, pQty) INTO _parentQty
  FROM wo, itemsite, item
  WHERE ( (wo_itemsite_id=itemsite_id)
   AND (itemsite_item_id=item_id)
   AND (wo_id=pWoid) );

  IF (pItemlocSeries = 0) THEN
    SELECT NEXTVAL(&#39;itemloc_series_seq&#39;) INTO _itemlocSeries;
  ELSE
    _itemlocSeries := pItemlocSeries;
  END IF;

--  Cache the parent WIP account (No SELECT ... INTO x, ... INTO x;!)
  SELECT costcat_wip_accnt_id INTO _parentWIPAccntid
  FROM wo, itemsite, costcat
  WHERE ( (wo_itemsite_id=itemsite_id)
   AND (itemsite_costcat_id=costcat_id)
   AND (wo_id=pWoid) );
 
  IF (pBackflush) THEN
    FOR _r IN SELECT item_id, item_fractional,
                      itemsite_id, itemsite_warehous_id,
                      itemsite_controlmethod, itemsite_loccntrl,
                      womatl_id, womatl_qtyper, womatl_scrap,
                      womatl_issuemethod, womatl_uom_id
               FROM womatl, wo, itemsite, item
               WHERE ( (womatl_wo_id=wo_id)
                AND (womatl_itemsite_id=itemsite_id)
                AND (itemsite_item_id=item_id)
                AND (womatl_issuemethod = &#39;L&#39;)
                AND (wo_id=pWoid) ) FOR UPDATE LOOP

--  Cache the qty to be issued
      _qty = roundQty(_r.item_fractional, (_parentQty * _r.womatl_qtyper * (1 + _r.womatl_scrap)));
      _invqty = itemuomtouom(_r.item_id, _r.womatl_uom_id, NULL, (_parentQty * _r.womatl_qtyper * (1 + _r.womatl_scrap)));

      IF (_itemlocSeries = 0) THEN
        SELECT NEXTVAL(&#39;itemloc_series_seq&#39;) INTO _itemlocSeries;
      END IF;

      SELECT postInvTrans( itemsite_id, &#39;IM&#39;, (_invqty * -1),
                           &#39;W/O&#39;, &#39;WO&#39;, formatwonumber(pWoid), &#39;&#39;,
                           (&#39;Correct Receive Inventory &#39; || item_number || &#39; &#39; || _sense || &#39; Manufacturing&#39;),
                           _parentWIPAccntid, costcat_asset_accnt_id, _itemlocSeries ) INTO _invhistid
      FROM itemsite, item, costcat
      WHERE ( (itemsite_item_id=item_id)
       AND (itemsite_costcat_id=costcat_id)
       AND (itemsite_id=_r.itemsite_id) );

--  Decrease the parent W/O&#39;s WIP value by the value of the returned components
      UPDATE wo
      SET wo_wipvalue = (wo_wipvalue - ((stdcost(_r.item_id) * _invqty))),
          wo_postedvalue = (wo_postedvalue - ((stdcost(_r.item_id) * _invqty)))
      WHERE (wo_id=pWoid);

      UPDATE womatl
      SET womatl_qtyiss = (womatl_qtyiss - _qty),
          womatl_lastreturn = CURRENT_DATE
      WHERE (womatl_id=_r.womatl_id);

    END LOOP;

  END IF;

--  If request, backflush the wooper load
  IF (pBackflushOperations) THEN

    FOR _wooperitem IN SELECT wooper_id, wooper_qtyrcv, wooper_sutime,
                              wooper_suconsumed, wooper_sucomplete,
                              wooper_rncomplete, wooper_rnqtyper,
                              wooper_invproduomratio
                       FROM wooper
                       WHERE (wooper_wo_id=pWoid)
                       ORDER BY wooper_seqnumber LOOP

--  If this is a complete return reverse backflush Setup Time for the reported Qty.

        IF (COALESCE(_wooperitem.wooper_qtyrcv,0) = _parentQty) THEN
          PERFORM postSutime(_wooperitem.wooper_id, _wooperitem.wooper_sutime * -1, TRUE) AS result;
        END IF;

--  Reverse backflush Run Time for the reported Qty.

        _rnTime := (_wooperitem.wooper_rnqtyper / _wooperitem.wooper_invproduomratio * _parentQty * -1);
        PERFORM postRntime(wooper_id, _rnTime, TRUE, _wooperitem.wooper_invproduomratio * _parentQty * -1 )
        FROM wooper
        WHERE (wooper_id=_wooperitem.wooper_id);

        UPDATE wooper
        SET wooper_qtyrcv = (COALESCE(wooper_qtyrcv,0) - _parentQty)
        WHERE (wooper_id=_wooperitem.wooper_id);

    END LOOP;

  END IF;

--  Post the inventory transaction
  SELECT postInvTrans( itemsite_id, &#39;RM&#39;, (_parentQty * -1),
                       &#39;W/O&#39;, &#39;WO&#39;, formatwonumber(pWoid), &#39;&#39;,
                       (&#39;Correct Receive Inventory &#39; || item_number || &#39; &#39; || _sense || &#39; Manufacturing&#39;),
                       costcat_asset_accnt_id, costcat_wip_accnt_id, _itemlocSeries, CURRENT_DATE,
                       CASE WHEN (wo_qtyrcv &gt; 0) THEN
                       ((wo_postedvalue - wo_wipvalue) / wo_qtyrcv) * _parentQty -- only used when cost is average
                            ELSE 0 END
                       ) INTO _invhistid
  FROM wo, itemsite, item, costcat
  WHERE ( (wo_itemsite_id=itemsite_id)
   AND (itemsite_item_id=item_id)
   AND (itemsite_costcat_id=costcat_id)
   AND (wo_id=pWoid) );

--  Decrease this W/O&#39;s qty. received and increase its WIP value
  UPDATE wo
  SET wo_qtyrcv = (wo_qtyrcv - _parentQty),
      wo_wipvalue = (wo_wipvalue + (CASE WHEN(itemsite_costmethod=&#39;A&#39;) THEN ((wo_postedvalue - wo_wipvalue) / wo_qtyrcv) ELSE stdcost(itemsite_item_id) END * _parentQty)),
      wo_postedvalue = (wo_postedvalue + (CASE WHEN(itemsite_costmethod=&#39;A&#39;) THEN ((wo_postedvalue - wo_wipvalue) / wo_qtyrcv) ELSE stdcost(itemsite_item_id) END * _parentQty))
  FROM itemsite, item
  WHERE ( (wo_itemsite_id=itemsite_id)
   AND (itemsite_item_id=item_id)
   AND (wo_id=pWoid) );

  RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.correctreceipt-integer-numeric-numeric-integer-integer-date">correctreceipt( integer, numeric, numeric, integer, integer, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  precvid		ALIAS FOR $1;
  pQty			ALIAS FOR $2;
  pFreight		ALIAS FOR $3;
  _itemlocSeries	INTEGER := $4;
  _currid		INTEGER := $5;
  pEffective		ALIAS FOR $6;
  _freight		NUMERIC;
  _qty			NUMERIC;
  _invhistid		INTEGER;
  _o			RECORD;
  _r			RECORD;

BEGIN
  SELECT recv_qty, recv_date::DATE AS recv_date, recv_freight_curr_id,
	 recv_orderitem_id,
	 round(currToCurr(recv_freight_curr_id,
			  COALESCE(_currid, recv_freight_curr_id),
         recv_freight, recv_date::DATE),2) AS recv_freight,
         recv_posted, recv_order_type,
         COALESCE(itemsite_id, -1) AS itemsiteid,
	 itemsite_item_id, itemsite_costmethod,
	 (recv_splitfrom_id IS NOT NULL
	 OR (SELECT (count(*) &gt; 0) 
	     FROM recv
	     WHERE (recv_splitfrom_id=recv_id))) AS split INTO _r
  FROM recv LEFT OUTER JOIN itemsite ON (recv_itemsite_id=itemsite_id)
  WHERE (recv_id=precvid);

  IF (NOT FOUND) THEN
    RETURN _itemlocSeries;
  END IF;

  IF (NOT _r.recv_order_type IN (&#39;PO&#39;, &#39;RA&#39;, &#39;TO&#39;)) THEN
    RETURN -11;
  END IF;

  IF (_r.split) THEN
    RETURN -12;
  END IF;

  SELECT currToBase(orderitem_unitcost_curr_id, orderitem_unitcost,
		    _r.recv_date::DATE) AS unitprice_base,
	 orderhead_number,
	 orderhead_curr_id AS freight_curr_id,
	 orderitem_orderhead_type,
	 orderitem_qty_invuomratio INTO _o
  FROM orderhead, orderitem
  WHERE ((orderhead_id=orderitem_orderhead_id)
    AND  (orderhead_type=orderitem_orderhead_type)
    AND  (orderitem_id=_r.recv_orderitem_id)
    AND  (orderitem_orderhead_type=_r.recv_order_type));

  IF (NOT FOUND) THEN
    RETURN _itemlocSeries;
  END IF;

  IF (_r.recv_posted) THEN
    _qty := (pQty - _r.recv_qty);
    IF (_qty &lt;&gt; 0) THEN
      IF (_r.itemsiteid = -1) THEN
	PERFORM insertGLTransaction( &#39;S/R&#39;, _r.recv_order_type,
				      _o.orderhead_number,
				      &#39;Receive Non-Inventory from &#39; ||
							    _r.recv_order_type,
				      expcat_liability_accnt_id,
				      expcat_exp_accnt_id, -1,
				      ROUND(_o.unitprice_base * _qty, 2),
				      pEffective )
	FROM poitem, expcat
	WHERE ((poitem_expcat_id=expcat_id)
	  AND  (poitem_id=_r.recv_orderitem_id)
	  AND  (_o.orderitem_orderhead_type=&#39;PO&#39;));

	UPDATE recv
	SET recv_qty=pQty,
	    recv_value=(recv_value + ROUND(_o.unitprice_base * _qty, 2))
	WHERE (recv_id=precvid);

      ELSE
	IF (_itemlocSeries = 0 OR _itemlocSeries IS NULL) THEN
	  _itemlocSeries := NEXTVAL(&#39;itemloc_series_seq&#39;);
	END IF;

	SELECT postInvTrans( itemsite_id, &#39;RP&#39;,
			     (_qty * _o.orderitem_qty_invuomratio),
			     &#39;S/R&#39;, _r.recv_order_type,
			     _o.orderhead_number, &#39;&#39;,
			     &#39;Receive Inventory from &#39; || _r.recv_order_type,
			     costcat_asset_accnt_id,
			     costcat_liability_accnt_id,
			     _itemlocSeries, pEffective,
                             ROUND(_o.unitprice_base * _qty, 2) -- alway passing since it is ignored if not average costed item
                           ) INTO _invhistid
	FROM itemsite, costcat
	WHERE ((itemsite_costcat_id=costcat_id)
	  AND  (itemsite_id=_r.itemsiteid) );

        IF(_r.itemsite_costmethod=&#39;A&#39;) THEN
	  UPDATE recv
	     SET recv_qty=pQty,
	         recv_value=(recv_value + _o.unitprice_base * _qty * _o.orderitem_qty_invuomratio)
	   WHERE(recv_id=precvid);
        ELSE
	  UPDATE recv
	     SET recv_qty=pQty,
	         recv_value=(recv_value + stdcost(_r.itemsite_item_id) * _qty * _o.orderitem_qty_invuomratio)
	   WHERE(recv_id=precvid);
        END IF;

      END IF;

      IF (_r.recv_order_type = &#39;PO&#39;) THEN
	UPDATE poitem
	SET poitem_qty_received=(poitem_qty_received + _qty)
	WHERE (poitem_id=_r.recv_orderitem_id);
      ELSIF (_r.recv_order_type = &#39;RA&#39; AND fetchMetricBool(&#39;EnableReturnAuth&#39;)) THEN
	UPDATE raitem
	SET raitem_qtyreceived=(raitem_qtyreceived + _qty)
	WHERE (raitem_id=_r.recv_orderitem_id);
      ELSIF (_r.recv_order_type = &#39;TO&#39; AND fetchMetricBool(&#39;MultiWhs&#39;)) THEN
	UPDATE toitem
	SET toitem_qty_received=(toitem_qty_received + _qty)
	WHERE (toitem_id=_r.recv_orderitem_id);
      END IF;

    END IF;

    _freight := (pFreight - _r.recv_freight);
    IF (_freight &lt;&gt; 0) THEN

      IF (_r.itemsiteid = -1) THEN
	PERFORM insertGLTransaction( &#39;S/R&#39;, _r.recv_order_type,
				     _o.orderhead_number,
				    &#39;Receive Non-Inventory Freight from &#39; || _r.recv_order_type,
				     expcat_liability_accnt_id, expcat_freight_accnt_id, -1,
				      ROUND(currToBase(_currid, _freight,
						    pEffective), 2),
				     pEffective )
	FROM poitem, expcat
	WHERE ((poitem_expcat_id=expcat_id)
	  AND  (poitem_id=_r.recv_orderitem_id)
	  AND  (_r.recv_order_type=&#39;PO&#39;));
      ELSE
	PERFORM insertGLTransaction(&#39;S/R&#39;, _r.recv_order_type,
				    _o.orderhead_number, 
				    &#39;Receive Non-Inventory Freight from &#39; ||
							    _r.recv_order_type,
				   costcat_liability_accnt_id,
				   costcat_freight_accnt_id, -1,
				   round(currToBase(_currid, _freight,
						    pEffective), 2),
				   pEffective )
	FROM itemsite, costcat
	WHERE ( (itemsite_costcat_id=costcat_id)
	  AND   (itemsite_id=_r.itemsiteid) );
      END IF;

      IF (_r.recv_order_type = &#39;PO&#39;) THEN
	UPDATE poitem
	SET poitem_freight_received=(poitem_freight_received +
				   currToCurr(_currid, _o.freight_curr_id,
					      _freight, pEffective))
	WHERE (poitem_id=_r.recv_orderitem_id);

      -- raitem does not track freight

      ELSEIF (_r.recv_order_type = &#39;TO&#39; AND fetchMetricBool(&#39;MultiWhs&#39;)) THEN
	UPDATE toitem
	SET toitem_freight_received=(toitem_freight_received +
				   currToCurr(_currid, _o.freight_curr_id,
					      _freight, pEffective))
	WHERE (toitem_id=_r.recv_orderitem_id);
      END IF;

      UPDATE recv
      SET recv_freight=currToCurr(_currid, recv_freight_curr_id, pFreight,
				  pEffective),
	  recv_date = pEffective
      WHERE (recv_id=precvid);
    END IF;

  ELSE

-- Receipt not posted yet
    UPDATE recv SET recv_qty=pQty, recv_freight=pFreight WHERE recv_id=precvid;
  END IF;

RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.cosbycustomervalue-integer-integer">cosbycustomervalue( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pPeriodid ALIAS FOR $2;
  _value NUMERIC;
  _startDate DATE;
  _endDate DATE;

BEGIN

  _startDate := findPeriodStart(pPeriodid);
  _endDate := findPeriodEnd(pPeriodid);

-- Returns value in base currency
-- ToDo: is cohist_shipdate the right DATE to use?
  SELECT SUM(cohist_qtyshipped * currToBase(cohist_curr_id, cohist_unitcost, cohist_shipdate)) INTO _value
  FROM cohist
  WHERE ( (cohist_cust_id=pCustid)
   AND (cohist_invcdate BETWEEN _startDate AND _endDate) );

  IF (_value IS NULL) THEN
    _value := 0;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.costsbycustomerbyitemsite-integer-integer-integer">costsbycustomerbyitemsite( integer, integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pItemsiteid ALIAS FOR $2;
  pPeriodid ALIAS FOR $3;
  _value NUMERIC;
  _startDate DATE;
  _endDate DATE;

BEGIN

  _startDate := findPeriodStart(pPeriodid);
  _endDate := findPeriodEnd(pPeriodid);

-- Returns value in base currency
-- ToDo: is cohist_shipdate the right DATE to use?
  SELECT SUM(cohist_qtyshipped * currToBase(cohist_curr_id, cohist_unitcost, cohist_shipdate)) INTO _value
  FROM cohist
  WHERE ( (cohist_itemsite_id&lt;&gt;pItemsiteid)
   AND (cohist_cust_id=pCustid)
   AND (cohist_invcdate BETWEEN _startDate AND _endDate) );

  IF (_value IS NULL) THEN
    _value := 0;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.costsbycustomervalue-integer-integer">costsbycustomervalue( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pPeriodid ALIAS FOR $2;
  _value NUMERIC;
  _startDate DATE;
  _endDate DATE;

BEGIN

  _startDate := findPeriodStart(pPeriodid);
  _endDate := findPeriodEnd(pPeriodid);

-- Returns value in base currency
-- ToDo: is cohist_shipdate the right DATE to use?
  SELECT SUM(cohist_qtyshipped * currToBase(cohist_curr_id, cohist_unitcost, cohist_shipdate)) INTO _value
  FROM cohist
  WHERE ( (cohist_itemsite_id&lt;&gt;-1)
   AND (cohist_cust_id=pCustid)
   AND (cohist_invcdate BETWEEN _startDate AND _endDate) );

  IF (_value IS NULL) THEN
    _value := 0;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.costsbycustomervalue-integer-integer-integer">costsbycustomervalue( integer, integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pPeriodid ALIAS FOR $2;
  pProdcatid ALIAS FOR $3;
  _value NUMERIC;
  _startDate DATE;
  _endDate DATE;

BEGIN

  _startDate := findPeriodStart(pPeriodid);
  _endDate := findPeriodEnd(pPeriodid);

-- Returns value in base currency
-- ToDo: is cohist_shipdate the right DATE to use?
  SELECT SUM(cohist_qtyshipped * currToBase(cohist_curr_id, cohist_unitcost, cohist_shipdate)) INTO _value
  FROM cohist, itemsite, item
  WHERE ( (cohist_cust_id=pCustid)
   AND (cohist_itemsite_id=itemsite_id)
   AND (itemsite_item_id=item_id)
   AND (item_prodcat_id=pProdcatid)
   AND (cohist_invcdate BETWEEN _startDate AND _endDate) );

  IF (_value IS NULL) THEN
    _value := 0;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.costsbycustomervalue-integer-integer-text">costsbycustomervalue( integer, integer, text )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pPeriodid ALIAS FOR $2;
  pProdcat ALIAS FOR $3;
  _value NUMERIC;
  _startDate DATE;
  _endDate DATE;

BEGIN

  _startDate := findPeriodStart(pPeriodid);
  _endDate := findPeriodEnd(pPeriodid);

-- Returns value in base currency
-- ToDo: is cohist_shipdate the right date to use?
  SELECT SUM(cohist_qtyshipped * currToBase(cohist_curr_id, cohist_unitcost, cohist_shipdate)) INTO _value
  FROM cohist, itemsite, item, prodcat
  WHERE ( (cohist_cust_id=pCustid)
   AND (cohist_itemsite_id=itemsite_id)
   AND (itemsite_item_id=item_id)
   AND (item_prodcat_id=prodcat_id)
   AND (prodcat_code ~ pProdcat)
   AND (cohist_invcdate BETWEEN _startDate AND _endDate) );

  IF (_value IS NULL) THEN
    _value := 0;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createaccountingperiod-date-date">createaccountingperiod( date, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pStartDate ALIAS FOR $1;
  pEndDate ALIAS FOR $2;

BEGIN

  RETURN createAccountingPeriod(pStartDate, pEndDate, NULL, NULL);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createaccountingperiod-date-date-integer-integer">createaccountingperiod( date, date, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pStartDate ALIAS FOR $1;
  pEndDate ALIAS FOR $2;
  pYearPeriodId ALIAS FOR $3;
  pQuarter ALIAS FOR $4;
  _periodid INTEGER;
  _check INTEGER;
  _r RECORD;
  _initial BOOLEAN;

BEGIN

--  Make that the passed start date doesn&#39;t fall into any existing period
  SELECT period_id INTO _check
  FROM period
  WHERE (pStartDate BETWEEN period_start AND period_end);
  IF (FOUND) THEN
    RETURN -1;
  END IF;

--  Make that the passed end date doesn&#39;t fall into any existing period
  SELECT period_id INTO _check
  FROM period
  WHERE (pEndDate BETWEEN period_start AND period_end);
  IF (FOUND) THEN
    RETURN -2;
  END IF;

--  Make that the passed start and end dates don&#39;t enclose an existing period
  SELECT period_id INTO _check
  FROM period
  WHERE ( (period_start &gt;= pStartDate)
   AND (period_end &lt;= pEndDate) );
  IF (FOUND) THEN
    RETURN -3;
  END IF;

-- Make sure period is inside fiscal year
  SELECT yearperiod_id INTO _check
  FROM yearperiod
  WHERE ((yearperiod_id=pYearPeriodId)
  AND (pStartDate&gt;=yearperiod_start)
  AND (pEndDate&lt;=yearperiod_end));
  IF NOT (FOUND) THEN
    RETURN -4;
  END IF;

--  Determine if this is the initial accounting period
  SELECT CASE WHEN(count(*) &gt; 0) THEN FALSE
              ELSE TRUE
         END INTO _initial
  FROM period;

--  Create the new accounting period
  SELECT NEXTVAL(&#39;period_period_id_seq&#39;) INTO _periodid;
  INSERT INTO period
  ( period_id, period_start, period_end, period_closed, period_freeze, period_initial, period_yearperiod_id, period_quarter )
  VALUES
  ( _periodid, pStartDate, pEndDate, FALSE, FALSE, _initial, pYearPeriodId, pQuarter );

--  Post any unposted G/L Transactions into the new period
  FOR _r IN SELECT DISTINCT gltrans_sequence
            FROM gltrans
            WHERE ( (NOT gltrans_posted)
             AND (gltrans_date BETWEEN pStartDate AND pEndDate) ) LOOP
    PERFORM postIntoTrialBalance(_r.gltrans_sequence);
  END LOOP;

  RETURN _periodid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createaccountingyearperiod-date-date">createaccountingyearperiod( date, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pStartDate ALIAS FOR $1;
  pEndDate ALIAS FOR $2;
  _yearperiodid INTEGER;
  _check INTEGER;
  _checkBool BOOLEAN;
  _r RECORD;
  _initial BOOLEAN;

BEGIN

--  Make that the passed start date doesn&#39;t fall into any existing yearperiod
  SELECT yearperiod_id INTO _check
  FROM yearperiod
  WHERE (pStartDate BETWEEN yearperiod_start AND yearperiod_end);
  IF (FOUND) THEN
    RETURN -1;
  END IF;

--  Make that the passed end date doesn&#39;t fall into any existing yearperiod
  SELECT yearperiod_id INTO _check
  FROM yearperiod
  WHERE (pEndDate BETWEEN yearperiod_start AND yearperiod_end);
  IF (FOUND) THEN
    RETURN -2;
  END IF;

--  Make that the passed start and end dates don&#39;t enclose an existing yearperiod
  SELECT yearperiod_id INTO _check
  FROM yearperiod
  WHERE ( (yearperiod_start &gt;= pStartDate)
   AND (yearperiod_end &lt;= pEndDate) );
  IF (FOUND) THEN
    RETURN -3;
  END IF;

--  Make sure that the passed start is prior to the end date
  SELECT (pStartDate &gt; pEndDate) INTO _checkBool;
  IF (_checkBool) THEN
    RETURN -5;
  END IF;

--  Determine if this is the initial accounting yearperiod
  SELECT CASE WHEN(count(*) &gt; 0) THEN FALSE
              ELSE TRUE
         END INTO _initial
  FROM yearperiod;

--  Create the new accounting yearperiod
  SELECT NEXTVAL(&#39;yearperiod_yearperiod_id_seq&#39;) INTO _yearperiodid;
  INSERT INTO yearperiod
  ( yearperiod_id, yearperiod_start, yearperiod_end, yearperiod_closed )
  VALUES
  ( _yearperiodid, pStartDate, pEndDate, FALSE );

  RETURN _yearperiodid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createapchecks-integer-date">createapchecks( integer, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RAISE NOTICE &#39;createAPChecks() is deprecated - use createChecks() instead&#39;;
  RETURN createChecks($1, $2);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createapcreditmemo-integer-integer-text-text-date-numeric-text">createapcreditmemo( integer, integer, text, text, date, numeric, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendid ALIAS FOR $1;
  pJournalNumber ALIAS FOR $2;
  pDocNumber ALIAS FOR $3;
  pPoNumber ALIAS FOR $4;
  pDocDate ALIAS FOR $5;
  pAmount ALIAS FOR $6;
  pNotes ALIAS FOR $7;

BEGIN
  RETURN createAPCreditMemo(pVendid, pJournalNumber, pDocNumber, pPoNumber, pDocDate, pAmount, pNotes, -1, pDocDate, -1, baseCurrId() );
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createapcreditmemo-integer-integer-text-text-date-numeric-text-integer">createapcreditmemo( integer, integer, text, text, date, numeric, text, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendid ALIAS FOR $1;
  pJournalNumber ALIAS FOR $2;
  pDocNumber ALIAS FOR $3;
  pPoNumber ALIAS FOR $4;
  pDocDate ALIAS FOR $5;
  pAmount ALIAS FOR $6;
  pNotes ALIAS FOR $7;
  pAccntid ALIAS FOR $8;
BEGIN
  RETURN createAPCreditMemo( pVendid, pJournalNumber,
                             pDocNumber, pPoNumber, pDocDate, pAmount, pNotes, pAccntid, pDocDate, -1, baseCurrId() );
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createapcreditmemo-integer-integer-text-text-date-numeric-text-integer-date-integer">createapcreditmemo( integer, integer, text, text, date, numeric, text, integer, date, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendid ALIAS FOR $1;
  pJournalNumber ALIAS FOR $2;
  pDocNumber ALIAS FOR $3;
  pPoNumber ALIAS FOR $4;
  pDocDate ALIAS FOR $5;
  pAmount ALIAS FOR $6;
  pNotes ALIAS FOR $7;
  pAccntid ALIAS FOR $8;
  pDueDate ALIAS FOR $9;
  pTermsid ALIAS FOR $10;
BEGIN
  RETURN createAPCreditMemo( pVendid, pJournalNumber, pDocNumber, pPoNumber, pDocDate, pAmount, pNotes, pAccntid, pDueDate, pTermsid, baseCurrId() );
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createapcreditmemo-integer-integer-text-text-date-numeric-text-integer-date-integer-integer">createapcreditmemo( integer, integer, text, text, date, numeric, text, integer, date, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendid ALIAS FOR $1;
  pJournalNumber ALIAS FOR $2;
  pDocNumber ALIAS FOR $3;
  pPoNumber ALIAS FOR $4;
  pDocDate ALIAS FOR $5;
  pAmount ALIAS FOR $6;
  pNotes ALIAS FOR $7;
  pAccntid ALIAS FOR $8;
  pDueDate ALIAS FOR $9;
  pTermsid ALIAS FOR $10;
  pCurrId ALIAS FOR $11;
  _prepaidAccntid INTEGER;
  _accntid INTEGER;
  _glSequence INTEGER;
  _apopenid INTEGER;

BEGIN

  SELECT findAPPrepaidAccount(pVendid) INTO _prepaidAccntid;

  _accntid := pAccntid;

  PERFORM accnt_id
     FROM accnt
    WHERE (accnt_id=_accntid);
  IF (FOUND) THEN
    _prepaidAccntid := _accntid;
  ELSE
    _accntid := -1;
  END IF;

  SELECT NEXTVAL(&#39;apopen_apopen_id_seq&#39;) INTO _apopenid;

  SELECT insertGLTransaction( pJournalNumber, &#39;A/P&#39;, &#39;CM&#39;,
                              pDocNumber, pNotes, cr.accnt_id, db.accnt_id,
                              _apopenid, currToBase(pCurrId, pAmount, pDocDate), pDocDate) INTO _glSequence
  FROM accnt AS db, accnt AS cr
  WHERE ( (cr.accnt_id = _prepaidAccntid)
   AND (db.accnt_id = findAPAccount(pVendid)) );
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  INSERT INTO apopen
  ( apopen_id, apopen_username, apopen_journalnumber,
    apopen_vend_id, apopen_docnumber, apopen_doctype, apopen_ponumber,
    apopen_docdate, apopen_duedate, apopen_distdate, apopen_terms_id,
    apopen_amount, apopen_paid, apopen_open, apopen_notes, apopen_accnt_id, apopen_curr_id,
    apopen_closedate )
  VALUES
  ( _apopenid, CURRENT_USER, pJournalNumber,
    pVendid, pDocNumber, &#39;C&#39;, pPoNumber,
    pDocDate, pDueDate, pDocDate, pTermsid,
    pAmount, 0, (pAmount &lt;&gt; 0), pNotes, _accntid, pCurrId,
    CASE WHEN (pAmount = 0) THEN pDocDate END );

  RETURN pJournalNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createapcreditmemo-integer-text-text-date-numeric-text">createapcreditmemo( integer, text, text, date, numeric, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendid ALIAS FOR $1;
  pDocNumber ALIAS FOR $2;
  pPoNumber ALIAS FOR $3;
  pDocDate ALIAS FOR $4;
  pAmount ALIAS FOR $5;
  pNotes ALIAS FOR $6;
  _result INTEGER;

BEGIN

  SELECT createAPCreditMemo( pVendid, fetchJournalNumber(&#39;AP-MISC&#39;),
                             pDocNumber, pPoNumber, pDocDate, pAmount, pNotes, -1, pDocDate, -1, baseCurrId() ) INTO _result;

  RETURN _result;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createapcreditmemo-integer-text-text-date-numeric-text-integer">createapcreditmemo( integer, text, text, date, numeric, text, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendid ALIAS FOR $1;
  pDocNumber ALIAS FOR $2;
  pPoNumber ALIAS FOR $3;
  pDocDate ALIAS FOR $4;
  pAmount ALIAS FOR $5;
  pNotes ALIAS FOR $6;
  pAccntid ALIAS FOR $7;
  _result INTEGER;

BEGIN

  SELECT createAPCreditMemo( pVendid, fetchJournalNumber(&#39;AP-MISC&#39;),
                             pDocNumber, pPoNumber, pDocDate, pAmount, pNotes, pAccntid, pDocDate, -1, baseCurrId() ) INTO _result;

  RETURN _result;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createapcreditmemo-integer-text-text-date-numeric-text-integer-date-integer">createapcreditmemo( integer, text, text, date, numeric, text, integer, date, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendid ALIAS FOR $1;
  pDocNumber ALIAS FOR $2;
  pPoNumber ALIAS FOR $3;
  pDocDate ALIAS FOR $4;
  pAmount ALIAS FOR $5;
  pNotes ALIAS FOR $6;
  pAccntid ALIAS FOR $7;
  pDueDate ALIAS FOR $8;
  pTermsid ALIAS FOR $9;
  _result INTEGER;

BEGIN

  SELECT createAPCreditMemo( pVendid, fetchJournalNumber(&#39;AP-MISC&#39;),
                             pDocNumber, pPoNumber, pDocDate, pAmount, pNotes, pAccntid, pDueDate, pTermsid, baseCurrId() ) INTO _result;

  RETURN _result;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createapcreditmemoapplication-integer-integer-numeric-integer">createapcreditmemoapplication( integer, integer, numeric, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSourceApopenId	ALIAS FOR $1;
  pTargetApopenId	ALIAS FOR $2;
  pAmount		ALIAS FOR $3;
  pCurrId		ALIAS FOR $4;
  _apCreditApplyId	INTEGER;

BEGIN
  IF (pAmount &gt; (SELECT ROUND(apopen_amount - apopen_paid, 2)
		  FROM apopen
		 WHERE (apopen_id=pTargetApopenId))) THEN
    RETURN -1;
  END IF;

  IF (pAmount &gt; (SELECT ROUND((apopen_amount - apopen_paid) - 
		       COALESCE(SUM(currToCurr(apcreditapply_curr_id,
						apopen_curr_id, 
						apcreditapply_amount, 
						apopen_docdate)), 0), 2)
             FROM apopen LEFT OUTER JOIN apcreditapply 
               ON ((apcreditapply_source_apopen_id=apopen_id) 
              AND (apcreditapply_target_apopen_id&lt;&gt;pTargetApopenId)) 
             WHERE (apopen_id=pSourceApopenId) 
             GROUP BY apopen_amount, apopen_paid)) THEN
      RETURN -2;
    END IF;

  SELECT apcreditapply_id INTO _apCreditApplyId
    FROM apcreditapply
   WHERE ((apcreditapply_source_apopen_id=pSourceApopenId)
     AND  (apcreditapply_target_apopen_id=pTargetApopenId));

  IF (FOUND) THEN
    UPDATE apcreditapply SET apcreditapply_amount=pAmount,
			     apcreditapply_curr_id=pCurrId
    WHERE (apcreditapply_id=_apCreditApplyId);
  ELSE
    _apCreditApplyId := NEXTVAL(&#39;apcreditapply_apcreditapply_id_seq&#39;);
    INSERT INTO apcreditapply (
      apcreditapply_id, apcreditapply_source_apopen_id,
      apcreditapply_target_apopen_id,
      apcreditapply_amount, apcreditapply_curr_id
    ) VALUES (
      _apCreditApplyId, pSourceApopenId,
      pTargetApopenId,
      pAmount, pCurrId);
  END IF;

  RETURN _apCreditApplyId;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createapdebitmemo-integer-integer-text-text-date-numeric-text">createapdebitmemo( integer, integer, text, text, date, numeric, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendid ALIAS FOR $1;
  pJournalNumber ALIAS FOR $2;
  pDocNumber ALIAS FOR $3;
  pPoNumber ALIAS FOR $4;
  pDocDate ALIAS FOR $5;
  pAmount ALIAS FOR $6;
  pNotes ALIAS FOR $7;

BEGIN

  RETURN createAPDebitMemo(pVendid, pJournalNumber, pDocNumber, pPoNumber, pDocDate, pAmount, pNotes, -1, pDocDate, -1, baseCurrId() );

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createapdebitmemo-integer-integer-text-text-date-numeric-text-integer">createapdebitmemo( integer, integer, text, text, date, numeric, text, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendid ALIAS FOR $1;
  pJournalNumber ALIAS FOR $2;
  pDocNumber ALIAS FOR $3;
  pPoNumber ALIAS FOR $4;
  pDocDate ALIAS FOR $5;
  pAmount ALIAS FOR $6;
  pNotes ALIAS FOR $7;
  pAccntid ALIAS FOR $8;
BEGIN
  RETURN createAPDebitMemo( pVendid, pJournalNumber,
                            pDocNumber, pPoNumber, pDocDate, pAmount, pNotes, pAccntid, pDocDate, -1, baseCurrId() );
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createapdebitmemo-integer-integer-text-text-date-numeric-text-integer-date-integer">createapdebitmemo( integer, integer, text, text, date, numeric, text, integer, date, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendid ALIAS FOR $1;
  pJournalNumber ALIAS FOR $2;
  pDocNumber ALIAS FOR $3;
  pPoNumber ALIAS FOR $4;
  pDocDate ALIAS FOR $5;
  pAmount ALIAS FOR $6;
  pNotes ALIAS FOR $7;
  pAccntid ALIAS FOR $8;
  pDueDate ALIAS FOR $9;
  pTermsid ALIAS FOR $10;

BEGIN
  RETURN createAPDebitMemo(pVendid, pJournalNumber, pDocNumber, pPoNumber, pDocDate, pAmount, pNotes, pAccntid, pDueDate, pTermsid, baseCurrId() );
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createapdebitmemo-integer-integer-text-text-date-numeric-text-integer-date-integer-integer">createapdebitmemo( integer, integer, text, text, date, numeric, text, integer, date, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendid ALIAS FOR $1;
  pJournalNumber ALIAS FOR $2;
  pDocNumber ALIAS FOR $3;
  pPoNumber ALIAS FOR $4;
  pDocDate ALIAS FOR $5;
  pAmount ALIAS FOR $6;
  pNotes ALIAS FOR $7;
  pAccntid ALIAS FOR $8;
  pDueDate ALIAS FOR $9;
  pTermsid ALIAS FOR $10;
  pCurrId ALIAS FOR $11;
  _prepaidAccntid INTEGER;
  _accntid INTEGER;
  _glSequence INTEGER;
  _apopenid INTEGER;

BEGIN

  SELECT findAPPrepaidAccount(pVendid) INTO _prepaidAccntid;

  _accntid := pAccntid;

  PERFORM accnt_id
     FROM accnt
    WHERE (accnt_id=_accntid);
  IF (FOUND) THEN
    _prepaidAccntid := _accntid;
  ELSE
    _accntid := -1;
  END IF;

  SELECT NEXTVAL(&#39;apopen_apopen_id_seq&#39;) INTO _apopenid;

  SELECT insertGLTransaction( pJournalNumber, &#39;A/P&#39;, &#39;DM&#39;,
                              pDocNumber, pNotes, cr.accnt_id, db.accnt_id,
                              _apopenid, currToBase(pCurrId, pAmount, pDocDate), pDocDate) INTO _glSequence
  FROM accnt AS db, accnt AS cr
  WHERE ( (db.accnt_id = _prepaidAccntid)
   AND (cr.accnt_id = findAPAccount(pVendid)) );
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  INSERT INTO apopen
  ( apopen_id, apopen_username, apopen_journalnumber,
    apopen_vend_id, apopen_docnumber, apopen_doctype, apopen_ponumber,
    apopen_docdate, apopen_duedate, apopen_distdate, apopen_terms_id,
    apopen_amount, apopen_paid, apopen_open, apopen_notes, apopen_accnt_id, apopen_curr_id,
    apopen_closedate )
  VALUES
  ( _apopenid, CURRENT_USER, pJournalNumber,
    pVendid, pDocNumber, &#39;D&#39;, pPoNumber,
    pDocDate, pDueDate, pDocDate, pTermsid,
    pAmount, 0, (pAmount &lt;&gt; 0), pNotes, _accntid, pCurrId,
    CASE WHEN (pAmount = 0) THEN pDocDate END );

  RETURN _apopenid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createapdebitmemo-integer-text-text-date-numeric-text">createapdebitmemo( integer, text, text, date, numeric, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendid ALIAS FOR $1;
  pDocNumber ALIAS FOR $2;
  pPoNumber ALIAS FOR $3;
  pDocDate ALIAS FOR $4;
  pAmount ALIAS FOR $5;
  pNotes ALIAS FOR $6;
  _result INTEGER;

BEGIN

  SELECT createAPDebitMemo( pVendid, fetchJournalNumber(&#39;AP-MISC&#39;),
                            pDocNumber, pPoNumber, pDocDate, pAmount, pNotes, -1, pDocDate, -1, baseCurrId() ) INTO _result;

  RETURN _result;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createapdebitmemo-integer-text-text-date-numeric-text-integer">createapdebitmemo( integer, text, text, date, numeric, text, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendid ALIAS FOR $1;
  pDocNumber ALIAS FOR $2;
  pPoNumber ALIAS FOR $3;
  pDocDate ALIAS FOR $4;
  pAmount ALIAS FOR $5;
  pNotes ALIAS FOR $6;
  pAccntid ALIAS FOR $7;
  _result INTEGER;

BEGIN

  SELECT createAPDebitMemo( pVendid, fetchJournalNumber(&#39;AP-MISC&#39;),
                            pDocNumber, pPoNumber, pDocDate, pAmount, pNotes, pAccntid, pDocDate, -1, baseCurrId() ) INTO _result;

  RETURN _result;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createapdebitmemo-integer-text-text-date-numeric-text-integer-date-integer">createapdebitmemo( integer, text, text, date, numeric, text, integer, date, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendid ALIAS FOR $1;
  pDocNumber ALIAS FOR $2;
  pPoNumber ALIAS FOR $3;
  pDocDate ALIAS FOR $4;
  pAmount ALIAS FOR $5;
  pNotes ALIAS FOR $6;
  pAccntid ALIAS FOR $7;
  pDueDate ALIAS FOR $8;
  pTermsid ALIAS FOR $9;
  _result INTEGER;

BEGIN

  SELECT createAPDebitMemo( pVendid, fetchJournalNumber(&#39;AP-MISC&#39;),
                            pDocNumber, pPoNumber, pDocDate, pAmount, pNotes, pAccntid, pDueDate, pTermsid, baseCurrId() ) INTO _result;

  RETURN _result;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createapdiscount-integer-integer-numeric">createapdiscount( integer, integer, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pApopenid ALIAS FOR $1;
  pJournalNumber ALIAS FOR $2;
  pAmount ALIAS FOR $3;
  _ap RECORD;
  _sequence INTEGER;
  _apopenid INTEGER;
  _apcreditapplyid INTEGER;
  _result INTEGER;
  _crAccnt INTEGER;
  _dbAccnt INTEGER;
  _reference    TEXT;
  _discountDateAmt NUMERIC;

BEGIN

  SELECT NEXTVAL(&#39;apopen_apopen_id_seq&#39;) INTO _apopenid;

  SELECT * INTO _ap
  FROM apopen
  WHERE (apopen_id = pApopenid);
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  _crAccnt := findAPDiscountAccount(_ap.apopen_vend_id);
  _dbAccnt := findAPAccount(_ap.apopen_vend_id);
  _reference := (&#39;Discount for &#39; || _ap.apopen_doctype || &#39; &#39; || _ap.apopen_docnumber);

  SELECT fetchGLSequence() INTO _sequence;

  _discountDateAmt = round(pAmount / round(_ap.apopen_curr_rate,5), 2);
  PERFORM insertIntoGLSeries( _sequence, &#39;A/P&#39;, &#39;DS&#39;, _ap.apopen_docnumber,
                              _dbAccnt,
                              _discountDateAmt * -1,
                              CURRENT_DATE,
                              _reference);
  PERFORM insertIntoGLSeries( _sequence, &#39;A/P&#39;, &#39;DS&#39;, _ap.apopen_docnumber,
                              _crAccnt,
                              _discountDateAmt,
                              CURRENT_DATE,
                              _reference);

  PERFORM postGLSeries(_sequence, pJournalNumber);

  INSERT INTO apopen
  ( apopen_id, apopen_username, apopen_journalnumber,
    apopen_vend_id, apopen_docnumber, apopen_doctype, apopen_ponumber,
    apopen_docdate, apopen_duedate, apopen_distdate, apopen_terms_id, apopen_curr_id,
    apopen_amount, apopen_paid, apopen_open, apopen_notes, apopen_discount, apopen_curr_rate )
  SELECT _apopenid, CURRENT_USER, pJournalNumber,
         apopen_vend_id, apopen_docnumber, &#39;C&#39;, apopen_ponumber,
         CURRENT_DATE, CURRENT_DATE, CURRENT_DATE, -1, apopen_curr_id,
         pAmount, 0, TRUE, _reference, TRUE, apopen_curr_rate
    FROM apopen
   WHERE (apopen_id=pApopenid);

  SELECT apcreditapply_id INTO _apcreditapplyid
    FROM apcreditapply
   WHERE ( (apcreditapply_source_apopen_id=_apopenid)
     AND   (apcreditapply_target_apopen_id=pApopenid) );
  IF (FOUND) THEN
    UPDATE apcreditapply
       SET apcreditapply_amount=pAmount
     WHERE (apcreditapply_id=_apcreditapplyid);
  ELSE
    SELECT nextval(&#39;apcreditapply_apcreditapply_id_seq&#39;) INTO _apcreditapplyid;
    INSERT INTO apcreditapply
           ( apcreditapply_id, apcreditapply_source_apopen_id,
             apcreditapply_target_apopen_id, apcreditapply_amount,
             apcreditapply_curr_id )
    VALUES ( _apcreditapplyid, _apopenid, pApopenid, pAmount, _ap.apopen_curr_id );
  END IF;

  SELECT postAPCreditMemoApplication(_apopenid) INTO _result;

  IF (_result &lt; 0) THEN
    RETURN _result;
  END IF;

  RETURN pJournalNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createapdiscount-integer-numeric">createapdiscount( integer, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pApopenid ALIAS FOR $1;
  pAmount ALIAS FOR $2;
  _result INTEGER;
  
BEGIN

  SELECT createAPDiscount(pApopenid, fetchJournalNumber(&#39;AP-MISC&#39;), pAmount) INTO _result;

  RETURN _result;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createarcashdeposit-integer-text-text-date-numeric-text-integer-integer">createarcashdeposit( integer, text, text, date, numeric, text, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pDocNumber ALIAS FOR $2;
  pOrderNumber ALIAS FOR $3;
  pDocDate ALIAS FOR $4;
  pAmount ALIAS FOR $5;
  pNotes ALIAS FOR $6;
  pJournalNumber ALIAS FOR $7;
  pCurrId ALIAS FOR $8;
  _glSequence INTEGER;
  _aropenid INTEGER;

BEGIN

  IF (pAmount &lt;= 0) THEN
    RETURN 0;
  END IF;

  SELECT NEXTVAL(&#39;aropen_aropen_id_seq&#39;) INTO _aropenid;

  SELECT insertGLTransaction( pJournalNumber, &#39;A/R&#39;, &#39;CD&#39;,
                              pDocNumber, pNotes, cr.accnt_id, db.accnt_id,
                              _aropenid,
                              round(currToBase(pCurrId, pAmount, pDocDate), 2),
                              pDocDate) INTO _glSequence
  FROM accnt AS db, accnt AS cr
  WHERE ( (db.accnt_id = findPrepaidAccount(pCustid))
   AND (cr.accnt_id = findDeferredAccount(pCustid)) );
  IF (NOT FOUND) THEN
    RAISE EXCEPTION &#39;There was an error creating the Customer Deposit GL Transactions. No Deferred Revenue Account is assigned.&#39;;
  END IF;

  INSERT INTO aropen
  ( aropen_id, aropen_username, aropen_journalnumber,
    aropen_cust_id, aropen_docnumber, aropen_doctype, aropen_ordernumber,
    aropen_docdate, aropen_duedate, aropen_distdate, aropen_terms_id, aropen_salesrep_id,
    aropen_amount, aropen_paid, aropen_commission_due, aropen_commission_paid,
    aropen_applyto, aropen_ponumber, aropen_cobmisc_id,
    aropen_open, aropen_notes, aropen_rsncode_id,
    aropen_salescat_id, aropen_accnt_id, aropen_curr_id )
  VALUES
  ( _aropenid, CURRENT_USER, pJournalNumber,
    pCustid, pDocNumber, &#39;R&#39;, pOrderNumber,
    pDocDate, pDocDate, pDocDate, -1, -1,
    round(pAmount, 2), 0, 0.0, FALSE,
    &#39;&#39;, &#39;&#39;, -1,
    TRUE, pNotes, -1,
    -1, -1, pCurrId );

  RETURN _aropenid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createarcreditmemo-integer-text-text-date-numeric-text">createarcreditmemo( integer, text, text, date, numeric, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pDocNumber ALIAS FOR $2;
  pOrderNumber ALIAS FOR $3;
  pDocDate ALIAS FOR $4;
  pAmount ALIAS FOR $5;
  pNotes ALIAS FOR $6;
BEGIN
  RETURN createARCreditMemo(pCustid, pDocNumber, pOrderNumber, pDocDate, pAmount, pNotes, -1, -1, -1, pDocDate, -1, -1, 0, NULL, baseCurrId() );
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createarcreditmemo-integer-text-text-date-numeric-text-integer">createarcreditmemo( integer, text, text, date, numeric, text, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pDocNumber ALIAS FOR $2;
  pOrderNumber ALIAS FOR $3;
  pDocDate ALIAS FOR $4;
  pAmount ALIAS FOR $5;
  pNotes ALIAS FOR $6;
  pCurrId ALIAS FOR $7;
BEGIN
  RETURN createARCreditMemo(pCustid, pDocNumber, pOrderNumber, pDocDate, pAmount, pNotes, -1, -1, -1, pDocDate, -1, -1, 0, NULL, pCurrId);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createarcreditmemo-integer-text-text-date-numeric-text-integer-integer-integer">createarcreditmemo( integer, text, text, date, numeric, text, integer, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pDocNumber ALIAS FOR $2;
  pOrderNumber ALIAS FOR $3;
  pDocDate ALIAS FOR $4;
  pAmount ALIAS FOR $5;
  pNotes ALIAS FOR $6;
  pRsncodeid ALIAS FOR $7;
  pSalescatid ALIAS FOR $8;
  pAccntid ALIAS FOR $9;
BEGIN
  RETURN createARCreditMemo(pCustid, pDocNumber, pOrderNumber, pDocDate, pAmount, pNotes, pRsncodeid, pSalescatid, pAccntid, pDocDate, -1, -1, 0, NULL, baseCurrId() );
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createarcreditmemo-integer-text-text-date-numeric-text-integer-integer-integer-date-integer-integer-numeric">createarcreditmemo( integer, text, text, date, numeric, text, integer, integer, integer, date, integer, integer, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pDocNumber ALIAS FOR $2;
  pOrderNumber ALIAS FOR $3;
  pDocDate ALIAS FOR $4;
  pAmount ALIAS FOR $5;
  pNotes ALIAS FOR $6;
  pRsncodeid ALIAS FOR $7;
  pSalescatid ALIAS FOR $8;
  pAccntid ALIAS FOR $9;
  pDueDate ALIAS FOR $10;
  pTermsid ALIAS FOR $11;
  pSalesrepid ALIAS FOR $12;
  pCommissiondue ALIAS FOR $13;

BEGIN
  RETURN createARCreditMemo(pCustid, pDocNumber, pOrderNumber, pDocDate, pAmount, pNotes, pRsncodeid, pSalescatid, pAccntid, pDueDate, pTermsid, pSalesrepid, pCommissiondue, NULL, baseCurrId() );
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createarcreditmemo-integer-text-text-date-numeric-text-integer-integer-integer-date-integer-integer-numeric-integer">createarcreditmemo( integer, text, text, date, numeric, text, integer, integer, integer, date, integer, integer, numeric, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pDocNumber ALIAS FOR $2;
  pOrderNumber ALIAS FOR $3;
  pDocDate ALIAS FOR $4;
  pAmount ALIAS FOR $5;
  pNotes ALIAS FOR $6;
  pRsncodeid ALIAS FOR $7;
  pSalescatid ALIAS FOR $8;
  pAccntid ALIAS FOR $9;
  pDueDate ALIAS FOR $10;
  pTermsid ALIAS FOR $11;
  pSalesrepid ALIAS FOR $12;
  pCommissiondue ALIAS FOR $13;
  pCurrId ALIAS FOR $14;

BEGIN
  RETURN createARCreditMemo(pCustid, pDocNumber, pOrderNumber, pDocDate, pAmount, pNotes, pRsncodeid, pSalescatid, pAccntid, pDueDate, pTermsid, pSalesrepid, pCommissiondue, NULL, pCurrId );
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createarcreditmemo-integer-text-text-date-numeric-text-integer-integer-integer-date-integer-integer-numeric-integer-integer">createarcreditmemo( integer, text, text, date, numeric, text, integer, integer, integer, date, integer, integer, numeric, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pDocNumber ALIAS FOR $2;
  pOrderNumber ALIAS FOR $3;
  pDocDate ALIAS FOR $4;
  pAmount ALIAS FOR $5;
  pNotes ALIAS FOR $6;
  pRsncodeid ALIAS FOR $7;
  pSalescatid ALIAS FOR $8;
  pAccntid ALIAS FOR $9;
  pDueDate ALIAS FOR $10;
  pTermsid ALIAS FOR $11;
  pSalesrepid ALIAS FOR $12;
  pCommissiondue ALIAS FOR $13;
  pJournalNumber ALIAS FOR $14;
  pCurrId ALIAS FOR $15;
  _custName TEXT;
  _prepaidAccntid INTEGER;
  _salescatid INTEGER;
  _accntid INTEGER;
  _glSequence INTEGER;
  _journalNumber INTEGER;
  _aropenid INTEGER;
  _tmp INTEGER;

BEGIN

  IF (pAmount &lt;= 0) THEN
    RETURN 0;
  END IF;

  SELECT findPrepaidAccount(pCustid) INTO _prepaidAccntid;

  _accntid := pAccntid;
  _salescatid := pSalescatid;

  SELECT cust_name INTO _custName
  FROM custinfo
  WHERE (cust_id=pCustid);
  
  PERFORM accnt_id
     FROM accnt
    WHERE (accnt_id=_accntid);
  IF (FOUND) THEN
    _prepaidAccntid := _accntid;
  ELSE
    _accntid := -1;
  END IF;

  SELECT accnt_id INTO _tmp
    FROM salescat, accnt
   WHERE ((salescat_prepaid_accnt_id=accnt_id)
     AND  (salescat_id=_salescatid));
  IF (FOUND) THEN
    _accntid := -1;
    _prepaidAccntid := _tmp;
  ELSE
    _salescatid = -1;
  END IF;

  IF(pJournalNumber IS NOT NULL) THEN
    _journalNumber := pJournalNumber;
  ELSE
    SELECT fetchJournalNumber(&#39;AR-MISC&#39;) INTO _journalNumber;
  END IF;
  SELECT NEXTVAL(&#39;aropen_aropen_id_seq&#39;) INTO _aropenid;

  SELECT insertGLTransaction( _journalNumber, &#39;A/R&#39;, &#39;CM&#39;,
                              pDocNumber, (_custName || &#39; &#39; || pNotes), cr.accnt_id, db.accnt_id,
                              _aropenid,
                              round(currToBase(pCurrId, pAmount, pDocDate), 2),
                              pDocDate) INTO _glSequence
  FROM accnt AS db, accnt AS cr
  WHERE ( (db.accnt_id = _prepaidAccntid)
   AND (cr.accnt_id = findARAccount(pCustid)) );
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  INSERT INTO aropen
  ( aropen_id, aropen_username, aropen_journalnumber,
    aropen_cust_id, aropen_docnumber, aropen_doctype, aropen_ordernumber,
    aropen_docdate, aropen_duedate, aropen_distdate, aropen_terms_id, aropen_salesrep_id,
    aropen_amount, aropen_paid, aropen_commission_due, aropen_commission_paid,
    aropen_applyto, aropen_ponumber, aropen_cobmisc_id,
    aropen_open, aropen_notes, aropen_rsncode_id,
    aropen_salescat_id, aropen_accnt_id, aropen_curr_id )
  VALUES
  ( _aropenid, CURRENT_USER, _journalNumber,
    pCustid, pDocNumber, &#39;C&#39;, pOrderNumber,
    pDocDate, pDueDate, pDocDate, pTermsid, pSalesrepid,
    round(pAmount, 2), 0, pCommissiondue, FALSE,
    &#39;&#39;, &#39;&#39;, -1,
    TRUE, pNotes, pRsncodeid,
    _salescatid, _accntid, pCurrId );

  RETURN _aropenid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createardebitmemo-integer-integer-text-text-date-numeric-text-integer-integer-integer-date-integer-integer-numeric-integer">createardebitmemo( integer, integer, text, text, date, numeric, text, integer, integer, integer, date, integer, integer, numeric, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid		ALIAS FOR $1;
  pJournalNumber	ALIAS FOR $2;
  pDocNumber		ALIAS FOR $3;
  pOrderNumber		ALIAS FOR $4;
  pDocDate		ALIAS FOR $5;
  pAmount		ALIAS FOR $6;
  pNotes		ALIAS FOR $7;
  pRsncodeid		ALIAS FOR $8;
  pSalescatid		ALIAS FOR $9;
  pAccntid		ALIAS FOR $10;
  pDueDate		ALIAS FOR $11;
  pTermsid		ALIAS FOR $12;
  pSalesrepid		ALIAS FOR $13;
  pCommissiondue	ALIAS FOR $14;
  pCurrId		ALIAS FOR $15;
  _custName TEXT;
  _journalNumber INTEGER;
  _prepaidAccntid INTEGER;
  _salescatid INTEGER;
  _accntid INTEGER;
  _glSequence INTEGER;
  _aropenid INTEGER;
  _tmp INTEGER;

BEGIN

  IF (pAmount &lt;= 0) THEN
    RETURN 0;
  END IF;

  SELECT findPrepaidAccount(pCustid) INTO _prepaidAccntid;

  _accntid := pAccntid;
  _salescatid := pSalescatid;

  SELECT cust_name INTO _custName
  FROM custinfo
  WHERE (cust_id=pCustid);
  
  PERFORM accnt_id
     FROM accnt
    WHERE (accnt_id=_accntid);
  IF (FOUND) THEN
    _prepaidAccntid := _accntid;
  ELSE
    _accntid := -1;
  END IF;

  SELECT accnt_id INTO _tmp
    FROM salescat, accnt
   WHERE ((salescat_prepaid_accnt_id=accnt_id)
     AND  (salescat_id=_salescatid));
  IF (FOUND) THEN
    _accntid := -1;
    _prepaidAccntid := _tmp;
  ELSE
    _salescatid = -1;
  END IF;

  IF (pJournalNumber IS NULL) THEN
    _journalNumber := fetchJournalNumber(&#39;AR-MISC&#39;);
  ELSE
    _journalNumber := pJournalNumber;
  END IF;

  SELECT NEXTVAL(&#39;aropen_aropen_id_seq&#39;) INTO _aropenid;

  SELECT insertGLTransaction( _journalNumber, &#39;A/R&#39;, &#39;DM&#39;,
                              pDocNumber, (_custName || &#39; &#39; || pNotes), cr.accnt_id, db.accnt_id,
                              _aropenid,
                              round(currToBase(pCurrId, pAmount, pDocDate), 2),
                              pDocDate) INTO _glSequence
  FROM accnt AS db, accnt AS cr
  WHERE ( (db.accnt_id = findARAccount(pCustid))
   AND (cr.accnt_id = _prepaidAccntid) );
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  INSERT INTO aropen
  ( aropen_id, aropen_username, aropen_journalnumber,
    aropen_cust_id, aropen_docnumber, aropen_doctype, aropen_ordernumber,
    aropen_docdate, aropen_duedate, aropen_distdate, aropen_terms_id, aropen_salesrep_id,
    aropen_amount, aropen_paid, aropen_commission_due, aropen_commission_paid,
    aropen_applyto, aropen_ponumber, aropen_cobmisc_id,
    aropen_open, aropen_notes, aropen_rsncode_id,
    aropen_salescat_id, aropen_accnt_id, aropen_curr_id )
  VALUES
  ( _aropenid, CURRENT_USER, _journalNumber,
    pCustid, pDocNumber, &#39;D&#39;, pOrderNumber,
    pDocDate, pDueDate, pDocDate, pTermsid, pSalesrepid,
    round(pAmount, 2), 0, pCommissiondue, FALSE,
    &#39;&#39;, &#39;&#39;, -1,
    TRUE, pNotes, pRsncodeid,
    _salescatid, _accntid, pCurrId );

  RETURN _aropenid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createardebitmemo-integer-text-text-date-numeric-text">createardebitmemo( integer, text, text, date, numeric, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pDocNumber ALIAS FOR $2;
  pOrderNumber ALIAS FOR $3;
  pDocDate ALIAS FOR $4;
  pAmount ALIAS FOR $5;
  pNotes ALIAS FOR $6;

BEGIN
  RETURN createARDebitMemo(pCustid, pDocNumber, pOrderNumber, pDocDate, pAmount, pNotes, -1, -1, -1, pDocDate, -1, -1, 0, baseCurrId() );
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createardebitmemo-integer-text-text-date-numeric-text-integer">createardebitmemo( integer, text, text, date, numeric, text, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pDocNumber ALIAS FOR $2;
  pOrderNumber ALIAS FOR $3;
  pDocDate ALIAS FOR $4;
  pAmount ALIAS FOR $5;
  pNotes ALIAS FOR $6;
  pCurrId ALIAS FOR $7;

BEGIN
  RETURN createARDebitMemo(pCustid, pDocNumber, pOrderNumber, pDocDate, pAmount, pNotes, -1, -1, -1, pDocDate, -1, -1, 0, pCurrId);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createardebitmemo-integer-text-text-date-numeric-text-integer-integer-integer">createardebitmemo( integer, text, text, date, numeric, text, integer, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pDocNumber ALIAS FOR $2;
  pOrderNumber ALIAS FOR $3;
  pDocDate ALIAS FOR $4;
  pAmount ALIAS FOR $5;
  pNotes ALIAS FOR $6;
  pRsncodeid ALIAS FOR $7;
  pSalescatid ALIAS FOR $8;
  pAccntid ALIAS FOR $9;
BEGIN
  RETURN createARDebitMemo(pCustid, pDocNumber, pOrderNumber, pDocDate, pAmount, pNotes, pRsncodeid, pSalescatid, pAccntid, pDocDate, -1, -1, 0, baseCurrId() );
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createardebitmemo-integer-text-text-date-numeric-text-integer-integer-integer-date-integer-integer-numeric">createardebitmemo( integer, text, text, date, numeric, text, integer, integer, integer, date, integer, integer, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pDocNumber ALIAS FOR $2;
  pOrderNumber ALIAS FOR $3;
  pDocDate ALIAS FOR $4;
  pAmount ALIAS FOR $5;
  pNotes ALIAS FOR $6;
  pRsncodeid ALIAS FOR $7;
  pSalescatid ALIAS FOR $8;
  pAccntid ALIAS FOR $9;
  pDueDate ALIAS FOR $10;
  pTermsid ALIAS FOR $11;
  pSalesrepid ALIAS FOR $12;
  pCommissiondue ALIAS FOR $13;

BEGIN
  RETURN createARDebitMemo(pCustid, pDocNumber, pOrderNumber, pDocDate, pAmount, pNotes, pRsncodeid, pSalescatid, pAccntid, pDueDate, pTermsid, pSalesrepid, pCommissiondue, baseCurrId() );
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createardebitmemo-integer-text-text-date-numeric-text-integer-integer-integer-date-integer-integer-numeric-integer">createardebitmemo( integer, text, text, date, numeric, text, integer, integer, integer, date, integer, integer, numeric, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pDocNumber ALIAS FOR $2;
  pOrderNumber ALIAS FOR $3;
  pDocDate ALIAS FOR $4;
  pAmount ALIAS FOR $5;
  pNotes ALIAS FOR $6;
  pRsncodeid ALIAS FOR $7;
  pSalescatid ALIAS FOR $8;
  pAccntid ALIAS FOR $9;
  pDueDate ALIAS FOR $10;
  pTermsid ALIAS FOR $11;
  pSalesrepid ALIAS FOR $12;
  pCommissiondue ALIAS FOR $13;
  pCurrId ALIAS FOR $14;
BEGIN
  RETURN createARDebitMemo(pCustid, fetchJournalNumber(&#39;AR-MISC&#39;), pDocNumber, pOrderNumber, pDocDate, pAmount, pNotes, pRsncodeid, pSalescatid, pAccntid, pDueDate, pTermsid, pSalesrepid, pCommissiondue, pCurrId );
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createardebitmemo-integer-text-text-text-date-numeric-text-integer-integer-integer-date-integer-integer-numeric-integer">createardebitmemo( integer, text, text, text, date, numeric, text, integer, integer, integer, date, integer, integer, numeric, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid		ALIAS FOR $1;
  pJournalNumber	ALIAS FOR $2;
  pDocNumber		ALIAS FOR $3;
  pOrderNumber		ALIAS FOR $4;
  pDocDate		ALIAS FOR $5;
  pAmount		ALIAS FOR $6;
  pNotes		ALIAS FOR $7;
  pRsncodeid		ALIAS FOR $8;
  pSalescatid		ALIAS FOR $9;
  pAccntid		ALIAS FOR $10;
  pDueDate		ALIAS FOR $11;
  pTermsid		ALIAS FOR $12;
  pSalesrepid		ALIAS FOR $13;
  pCommissiondue	ALIAS FOR $14;
  pCurrId		ALIAS FOR $15;
  _journalNumber INTEGER;
  _prepaidAccntid INTEGER;
  _salescatid INTEGER;
  _accntid INTEGER;
  _glSequence INTEGER;
  _aropenid INTEGER;
  _tmp INTEGER;

BEGIN

  IF (pAmount &lt;= 0) THEN
    RETURN 0;
  END IF;

  SELECT findPrepaidAccount(pCustid) INTO _prepaidAccntid;

  _accntid := pAccntid;
  _salescatid := pSalescatid;

  PERFORM accnt_id
     FROM accnt
    WHERE (accnt_id=_accntid);
  IF (FOUND) THEN
    _prepaidAccntid := _accntid;
  ELSE
    _accntid := -1;
  END IF;

  SELECT accnt_id INTO _tmp
    FROM salescat, accnt
   WHERE ((salescat_prepaid_accnt_id=accnt_id)
     AND  (salescat_id=_salescatid));
  IF (FOUND) THEN
    _accntid := -1;
    _prepaidAccntid := _tmp;
  ELSE
    _salescatid = -1;
  END IF;

  IF (pJournalNumber IS NULL) THEN
    _journalNumber := fetchJournalNumber(&#39;AR-MISC&#39;);
  ELSE
    _journalNumber := pJournalNumber;
  END IF;

  SELECT NEXTVAL(&#39;aropen_aropen_id_seq&#39;) INTO _aropenid;

  SELECT insertGLTransaction( _journalNumber, &#39;A/R&#39;, &#39;DM&#39;,
                              pDocNumber, pNotes, cr.accnt_id, db.accnt_id,
                              _aropenid,
                              round(currToBase(pCurrId, pAmount, pDocDate), 2),
                              pDocDate) INTO _glSequence
  FROM accnt AS db, accnt AS cr
  WHERE ( (db.accnt_id = findARAccount(pCustid))
   AND (cr.accnt_id = _prepaidAccntid) );
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  INSERT INTO aropen
  ( aropen_id, aropen_username, aropen_journalnumber,
    aropen_cust_id, aropen_docnumber, aropen_doctype, aropen_ordernumber,
    aropen_docdate, aropen_duedate, aropen_terms_id, aropen_salesrep_id,
    aropen_amount, aropen_paid, aropen_commission_due, aropen_commission_paid,
    aropen_applyto, aropen_ponumber, aropen_cobmisc_id,
    aropen_open, aropen_notes, aropen_rsncode_id,
    aropen_salescat_id, aropen_accnt_id, aropen_curr_id )
  VALUES
  ( _aropenid, CURRENT_USER, _journalNumber,
    pCustid, pDocNumber, &#39;D&#39;, pOrderNumber,
    pDocDate, pDueDate, pTermsid, pSalesrepid,
    round(pAmount, 2), 0, pCommissiondue, FALSE,
    &#39;&#39;, &#39;&#39;, -1,
    TRUE, pNotes, pRsncodeid,
    _salescatid, _accntid, pCurrId );

  RETURN _aropenid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createaropenitem-integer-text-bpchar-text-date-date-numeric-text">createaropenitem( integer, text, bpchar, text, date, date, numeric, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pDocNumber ALIAS FOR $2;
  pDocType ALIAS FOR $3;
  pOrderNumber ALIAS FOR $4;
  pDocDate ALIAS FOR $5;
  pDueDate ALIAS FOR $6;
  pAmount ALIAS FOR $7;
  pNotes ALIAS FOR $8;
  _glSequence INTEGER;
  _aropenid INTEGER;

BEGIN

  SELECT NEXTVAL(&#39;aropen_aropen_id_seq&#39;) INTO _aropenid;

  SELECT insertGLTransaction( &#39;A/R&#39;,
                              CASE WHEN (pDocType = &#39;C&#39;) THEN &#39;CM&#39;
                                   WHEN (pDocType = &#39;D&#39;) THEN &#39;DM&#39;
                                   ELSE &#39;Error&#39;
                              END,
                              pDocNumber, pNotes, cr.accnt_id, db.accnt_id,
                              _aropenid,
                              CASE WHEN (pDocType = &#39;C&#39;) THEN (pAmount * -1)
                                   WHEN (pDocType = &#39;D&#39;) THEN pAmount
                                   ELSE pAmount
                              END,
                              pDocDate ) INTO _glSequence
  FROM accnt AS db, accnt AS cr
  WHERE ( (db.accnt_id = findARAccount(pCustid))
   AND (cr.accnt_id = findPrepaidAccount(pCustid)) );
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  INSERT INTO aropen
  ( aropen_id, aropen_cust_id, aropen_docnumber, aropen_doctype, aropen_ordernumber,
    aropen_docdate, aropen_duedate, aropen_distdate, aropen_terms_id, aropen_salesrep_id,
    aropen_amount, aropen_paid, aropen_commission_due, aropen_commission_paid,
    aropen_applyto, aropen_ponumber, aropen_cobmisc_id, aropen_journalnumber,
    aropen_open, aropen_notes )
  VALUES
  ( _aropenid, pCustid, pDocNumber, pDocType, pOrderNumber,
    pDocDate, pDueDate, pDocDate, -1, -1,
    pAmount, 0, 0, FALSE,
    &#39;&#39;, &#39;&#39;, -1, 0,
    TRUE, pNotes );

  RETURN _aropenid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createbillingheader-integer">createbillingheader( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSoheadid		ALIAS FOR $1;
  _cobmiscid		INTEGER;
  _cohead		cohead%ROWTYPE;
  _freight		NUMERIC;
  _invcDate		DATE;
  _schedDate		DATE;
  _shipDate		DATE;
  _shipVia		TEXT;
  _tax			RECORD;

BEGIN

  --  Check for an existing cobmisc
  SELECT cobmisc_id INTO _cobmiscid
  FROM cobmisc
  WHERE ( (NOT cobmisc_posted)
   AND (cobmisc_cohead_id=pSoheadid) );

  IF (FOUND) THEN
    RETURN _cobmiscid;
  END IF;

  SELECT * INTO _cohead
  FROM cohead
  WHERE (cohead_id=pSoheadid);

  SELECT NEXTVAL(&#39;cobmisc_cobmisc_id_seq&#39;) INTO _cobmiscid;

  --  Check for a valid shipdate
  SELECT MIN(shiphead_shipdate) INTO _shipDate
  FROM shiphead, shipitem
  WHERE ( (shipitem_shiphead_id=shiphead_id)
   AND (NOT shipitem_invoiced)
   AND (shiphead_shipped)
   AND (shiphead_order_type=&#39;SO&#39;)
   AND (shiphead_order_id=pSoheadid) );

  --  Schema shouldn&#39;t allow, but we&#39;ll try for now
  IF (_shipDate IS NULL) THEN
    SELECT MAX(shipitem_shipdate) INTO _shipDate
    FROM shipitem, shiphead
    WHERE ( (shipitem_shiphead_id=shiphead_id)
     AND (shiphead_order_type=&#39;SO&#39;)
     AND (shiphead_order_id=pSoheadid) );

    --  How about a transaction date
    IF (_shipDate IS NULL) THEN
      SELECT COALESCE(MAX(shipitem_transdate), CURRENT_DATE) INTO _shipDate
      FROM shipitem, shiphead
      WHERE ((shipitem_shiphead_id=shiphead_id)
        AND  (shiphead_order_type=&#39;SO&#39;)
        AND  (shiphead_order_id=pSoheadid) );
    END IF;
  END IF;

  --  Get the earliest schedule date for this order.
  SELECT MIN(coitem_scheddate) INTO _schedDate
    FROM coitem
   WHERE ((coitem_status &lt;&gt; &#39;X&#39;) AND (coitem_cohead_id=pSoheadid));

  IF (_schedDate IS NULL) THEN
    _schedDate := _shipDate;
  END IF;

  --  Find a Shipping-Entered freight charge
  SELECT MAX(currToCurr(shiphead_freight_curr_id, _cohead.cohead_curr_id,
			shiphead_freight, CURRENT_DATE)),
	 shiphead_shipvia INTO _freight, _shipVia
  FROM shiphead, shipitem
  WHERE ((shipitem_shiphead_id=shiphead_id)
    AND  (NOT shipitem_invoiced)
    AND  (shiphead_order_type=&#39;SO&#39;)
    AND  (shiphead_order_id=pSoheadid) )
  GROUP BY shiphead_shipvia;

  --  Nope, use the cohead freight charge
  IF (_freight IS NULL) THEN
    _freight	   := _cohead.cohead_freight;
  END IF;

  --  Finally, look for a Shipping-Entered Ship Via
  SELECT shiphead_shipvia INTO _shipVia
  FROM shiphead, shipitem
  WHERE ( (shipitem_shiphead_id=shiphead_id)
   AND (NOT shipitem_invoiced)
   AND (shiphead_order_type=&#39;SO&#39;)
   AND (shiphead_order_id=pSoheadid) )
  LIMIT 1;
  IF (NOT FOUND) THEN
    _shipVia := _cohead.cohead_shipvia;
  END IF;

  --  Determine any tax
  SELECT freight_taxtype_id,
	 freight_tax_id,
	 COALESCE(tax_ratea, 0.0) AS freight_pcnta,
	 COALESCE(tax_rateb, 0.0) AS freight_pcntb,
	 COALESCE(tax_ratec, 0.0) AS freight_pcntc,
	 calculateTax(tax_id, _freight, 0.0, &#39;A&#39;) AS freight_ratea,
	 calculateTax(tax_id, _freight, 0.0, &#39;B&#39;) AS freight_rateb,
	 calculateTax(tax_id, _freight, 0.0, &#39;C&#39;) AS freight_ratec
    INTO _tax
    FROM (SELECT getFreightTaxTypeId() AS freight_taxtype_id,
		 getFreightTaxSelection(_cohead.cohead_taxauth_id) AS freight_tax_id
	 ) AS data
	 LEFT OUTER JOIN tax ON (tax_id=freight_tax_id);

  --  Determine if we are using the _shipDate or _schedDate or current_date for the _invcDate
  IF( fetchMetricText(&#39;InvoiceDateSource&#39;)=&#39;scheddate&#39;) THEN
    _invcDate := _schedDate;
  ELSIF( fetchMetricText(&#39;InvoiceDateSource&#39;)=&#39;shipdate&#39;) THEN
    _invcDate := _shipDate;
  ELSE
    _invcDate := current_date;
  END IF;

  INSERT INTO cobmisc
  ( cobmisc_id, cobmisc_cohead_id,
    cobmisc_shipdate, cobmisc_invcdate,
    cobmisc_misc, cobmisc_misc_accnt_id, cobmisc_misc_descrip,
    cobmisc_freight, cobmisc_tax,
    cobmisc_tax_ratea, cobmisc_tax_rateb, cobmisc_tax_ratec,
    cobmisc_payment, cobmisc_shipvia, cobmisc_posted, cobmisc_closeorder,
    cobmisc_curr_id,
    cobmisc_taxauth_id, cobmisc_tax_curr_id,
    cobmisc_adjtax_id, cobmisc_adjtaxtype_id,
    cobmisc_adjtax_pcta, cobmisc_adjtax_pctb, cobmisc_adjtax_pctc,
    cobmisc_adjtax_ratea, cobmisc_adjtax_rateb, cobmisc_adjtax_ratec,
    cobmisc_freighttax_id, cobmisc_freighttaxtype_id,
    cobmisc_freighttax_pcta, cobmisc_freighttax_pctb, cobmisc_freighttax_pctc,
    cobmisc_freighttax_ratea, cobmisc_freighttax_rateb, cobmisc_freighttax_ratec,
    cobmisc_notes )
  SELECT _cobmiscid, _cohead.cohead_id,
         _shipDate, _invcDate,
         _cohead.cohead_misc, _cohead.cohead_misc_accnt_id, _cohead.cohead_misc_descrip,
         _freight, _tax.freight_ratea + _tax.freight_rateb + _tax.freight_ratec,
         _tax.freight_ratea, _tax.freight_rateb, _tax.freight_ratec,
         0, _shipVia, FALSE, NOT(cust_backorder),
	 _cohead.cohead_curr_id,
         _cohead.cohead_taxauth_id, _cohead.cohead_curr_id,
         NULL, NULL, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
         _tax.freight_tax_id, _tax.freight_taxtype_id,
         _tax.freight_pcnta, _tax.freight_pcntb, _tax.freight_pcntc,
         _tax.freight_ratea, _tax.freight_rateb, _tax.freight_ratec,
         _cohead.cohead_ordercomments
  FROM custinfo
  WHERE (cust_id=_cohead.cohead_cust_id);

  RETURN _cobmiscid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createbomitem-integer-integer-integer-bpchar-integer-numeric-numeric-date-date-boolean-integer-boolean-text-bpchar-integer-integer-text-text-text">createbomitem( integer, integer, integer, bpchar, integer, numeric, numeric, date, date, boolean, integer, boolean, text, bpchar, integer, integer, text, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBomitemid ALIAS FOR $1;
  pParentItemid ALIAS FOR $2;
  pComponentItemid ALIAS FOR $3;
  pIssueMethod ALIAS FOR $4;
  pUomId ALIAS FOR $5;
  pQtyPer ALIAS FOR $6;
  pScrap ALIAS FOR $7;
  pEffective ALIAS FOR $8;
  pExpires ALIAS FOR $9;
  pCreateWo ALIAS FOR $10;
  pBOOItemseqid ALIAS FOR $11;
  pSchedAtWooper ALIAS FOR $12;
  pECN ALIAS FOR $13;
  pSubType ALIAS FOR $14;
  pRevisionid ALIAS FOR $15;
  pCharId ALIAS FOR $16;
  pCharVal ALIAS FOR $17;
  pNotes ALIAS FOR $18;
  pRef ALIAS FOR $19;
  _seqNumber INTEGER;
  _bomitemid INTEGER;

BEGIN

--  Grab the next Sequence Number, if any
  SELECT MAX(bomitem_seqnumber) INTO _seqNumber
  FROM bomitem(pParentItemid,pRevisionid);

  IF (_seqNumber IS NOT NULL) THEN
   _seqNumber := (_seqNumber + 10);
  ELSE
   _seqNumber := 10;
  END IF;

  SELECT createBOMItem( pBomitemid, pParentItemid, pComponentItemid,
                        _seqNumber, pIssueMethod,
                        pUomId, pQtyPer, pScrap,
                        pEffective, pExpires,
                        pCreateWo, pBOOItemseqid, pSchedAtWooper, pECN, pSubType, pRevisionid, pCharId, pCharVal, pNotes, pRef ) INTO _bomitemid;

  RETURN _bomitemid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createbomitem-integer-integer-integer-integer-bpchar-integer-numeric-numeric-date-date-boolean-integer-boolean-text-bpchar-integer-integer-text">createbomitem( integer, integer, integer, integer, bpchar, integer, numeric, numeric, date, date, boolean, integer, boolean, text, bpchar, integer, integer, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBomitemid ALIAS FOR $1;
  pParentItemid ALIAS FOR $2;
  pComponentItemid ALIAS FOR $3;
  pSeqNumber ALIAS FOR $4;
  pIssueMethod ALIAS FOR $5;
  pUomId ALIAS FOR $6;
  pQtyPer ALIAS FOR $7;
  pScrap ALIAS FOR $8;
  pEffective ALIAS FOR $9;
  pExpires ALIAS FOR $10;
  pCreateWo ALIAS FOR $11;
  pBOOItemseqid ALIAS FOR $12;
  pSchedAtWooper ALIAS FOR $13;
  pECN ALIAS FOR $14;
  pSubType ALIAS FOR $15;
  pRevisionid ALIAS FOR $16;
  pCharId ALIAS FOR $17;
  pCharVal ALIAS FOR $18;
  _bomworksetid INTEGER;
  _temp INTEGER;
  _bomitemid INTEGER;

BEGIN

  SELECT createBOMItem( pBomitemid, pParentItemid, pComponentItemid,
                        pSeqNumber, pIssueMethod,
                        pUomId, pQtyPer, pScrap,
                        pEffective, pExpires,
                        pCreateWo, pBOOItemseqid, pSchedAtWooper, pECN, pSubType, pRevisionid, pCharId, pCharVal, NULL, NULL ) INTO _bomitemid;

  RETURN _bomitemid;
  
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createbomitem-integer-integer-integer-integer-bpchar-integer-numeric-numeric-date-date-boolean-integer-boolean-text-bpchar-integer-integer-text-text-text">createbomitem( integer, integer, integer, integer, bpchar, integer, numeric, numeric, date, date, boolean, integer, boolean, text, bpchar, integer, integer, text, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBomitemid ALIAS FOR $1;
  pParentItemid ALIAS FOR $2;
  pComponentItemid ALIAS FOR $3;
  pSeqNumber ALIAS FOR $4;
  pIssueMethod ALIAS FOR $5;
  pUomId ALIAS FOR $6;
  pQtyPer ALIAS FOR $7;
  pScrap ALIAS FOR $8;
  pEffective ALIAS FOR $9;
  pExpires ALIAS FOR $10;
  pCreateWo ALIAS FOR $11;
  pBOOItemseqid ALIAS FOR $12;
  pSchedAtWooper ALIAS FOR $13;
  pECN ALIAS FOR $14;
  pSubType ALIAS FOR $15;
  pRevisionid ALIAS FOR $16;
  pCharId ALIAS FOR $17;
  pCharVal ALIAS FOR $18;
  pNotes ALIAS FOR $19;
  pRef ALIAS FOR $20;
  _bomworksetid INTEGER;
  _temp INTEGER;

BEGIN

--  Make sure that the parent and component are not the same
  IF (pParentItemid = pComponentItemid) THEN
    RETURN -1;
  END IF;

--  Make sure that the parent is not used in the component at some level
  IF ( SELECT (item_type IN (&#39;M&#39;, &#39;F&#39;))
       FROM item
       WHERE (item_id=pComponentItemid) ) THEN
    SELECT indentedWhereUsed(pParentItemid) INTO _bomworksetid;
    SELECT bomwork_id INTO _temp
    FROM bomwork
    WHERE ( (bomwork_set_id=_bomworksetid)
     AND (bomwork_item_id=pComponentItemid) )
    LIMIT 1;
    IF (FOUND) THEN
      PERFORM deleteBOMWorkset(_bomworksetid);
      RETURN -2;
    END IF;
  END IF;

  PERFORM deleteBOMWorkset(_bomworksetid);

--  Create the BOM Item
  INSERT INTO bomitem
  ( bomitem_id, bomitem_parent_item_id, bomitem_item_id,
    bomitem_seqnumber, bomitem_issuemethod,
    bomitem_uom_id, bomitem_qtyper, bomitem_scrap,
    bomitem_effective, bomitem_expires,
    bomitem_createwo,
    bomitem_booitem_seq_id, bomitem_schedatwooper,
    bomitem_ecn, bomitem_subtype, bomitem_moddate, bomitem_rev_id,
    bomitem_char_id, bomitem_value, bomitem_notes, bomitem_ref )
  VALUES
  ( pBomitemid, pParentItemid, pComponentItemid,
    pSeqNumber, pIssueMethod,
    pUomId, pQtyPer, pScrap,
    pEffective, pExpires,
    pCreateWo,
    pBOOItemseqid, pSchedAtWooper,
    pECN, pSubType, CURRENT_DATE, pRevisionid,
    pCharId,pCharVal,pNotes, pRef );

  RETURN pBomitemid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createcheck-integer-text-integer-date-numeric-integer-integer-integer-text-text-boolean">createcheck( integer, text, integer, date, numeric, integer, integer, integer, text, text, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBankaccntid		ALIAS FOR  $1;
  pRecipType		ALIAS FOR  $2;
  pRecipId		ALIAS FOR  $3;
  pCheckDate		ALIAS FOR  $4;
  pAmount		ALIAS FOR  $5;
  pCurrid		ALIAS FOR  $6;
  pExpcatid		ALIAS FOR  $7;
  _journalNumber	INTEGER := $8;
  pFor			ALIAS FOR  $9;
  pNotes		ALIAS FOR $10;
  pMisc			ALIAS FOR $11;
  _checkid INTEGER;
BEGIN

  SELECT createCheck(pBankaccntid,pRecipType,pRecipId,pCheckDate,pAmount,pCurrid,pExpcatid,_journalNumber,pFor,pNotes,pMisc,NULL) INTO _checkid;
  RETURN _checkid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createcheck-integer-text-integer-date-numeric-integer-integer-integer-text-text-boolean-integer">createcheck( integer, text, integer, date, numeric, integer, integer, integer, text, text, boolean, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBankaccntid		ALIAS FOR  $1;
  pRecipType		ALIAS FOR  $2;
  pRecipId		ALIAS FOR  $3;
  pCheckDate		ALIAS FOR  $4;
  pAmount		ALIAS FOR  $5;
  pCurrid		ALIAS FOR  $6;
  pExpcatid		ALIAS FOR  $7;
  _journalNumber	INTEGER := $8;
  pFor			ALIAS FOR  $9;
  pNotes		ALIAS FOR $10;
  pMisc			ALIAS FOR $11;
  pAropenid             ALIAS FOR $12;
  _checkid		INTEGER;
  _bankaccnt_currid	INTEGER;

BEGIN
  SELECT bankaccnt_curr_id INTO _bankaccnt_currid
  FROM bankaccnt
  WHERE bankaccnt_id = pBankaccntid;
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  IF (pRecipType NOT IN (&#39;C&#39;, &#39;T&#39;, &#39;V&#39;)) THEN
    RETURN -2;
  END IF;

  IF (pCheckDate IS NULL) THEN
    RETURN -3;
  END IF;

  IF (pAmount &lt;= 0) THEN
    RETURN -4;
  END IF;

  IF (pCurrid IS NULL
      OR NOT EXISTS(SELECT * FROM curr_symbol WHERE (curr_id=pCurrid))) THEN
    RETURN -5;
  END IF;

  IF (pExpcatid IS NOT NULL
      AND NOT EXISTS(SELECT * FROM expcat WHERE (expcat_id=pExpcatid))) THEN
    RETURN -6;
  END IF;

  if (_journalNumber IS NULL) THEN
    _journalNumber := fetchJournalNumber(&#39;AP-CK&#39;);
  END IF;

  _checkid := NEXTVAL(&#39;checkhead_checkhead_id_seq&#39;);

  INSERT INTO checkhead
  ( checkhead_id,		checkhead_recip_type,	checkhead_recip_id,
    checkhead_bankaccnt_id,	checkhead_number,
    checkhead_amount,
    checkhead_checkdate,	checkhead_misc,		checkhead_expcat_id,
    checkhead_journalnumber,	checkhead_for,		checkhead_notes,
    checkhead_curr_id )
  VALUES
  ( _checkid,			pRecipType,		pRecipId,
    pBankaccntid,		-1, --fetchNextCheckNumber(pBankaccntid),
    currToCurr(pCurrid, _bankaccnt_currid, pAmount, pCheckDate),
    pCheckDate,			COALESCE(pMisc, FALSE),	pExpcatid,
    _journalNumber,		pFor,			pNotes,
    _bankaccnt_currid );

  IF (pAropenid IS NOT NULL AND fetchmetricbool(&#39;EnableReturnAuth&#39;)) THEN
    INSERT INTO checkitem (checkitem_checkhead_id,checkitem_amount,checkitem_discount,checkitem_ponumber,
                           checkitem_aropen_id,checkitem_docdate,checkitem_curr_id,checkitem_cmnumber,
                           checkitem_ranumber)
    SELECT _checkid,pAmount,0,cmhead_custponumber,pAropenid,aropen_docdate,pCurrid,cmhead_number,rahead_number
    FROM aropen
      LEFT OUTER JOIN cmhead ON (aropen_docnumber=cmhead_number)
      LEFT OUTER JOIN rahead ON (cmhead_rahead_id=rahead_id)
    WHERE (aropen_id=pAropenid);
  ELSIF (pAropenid IS NOT NULL) THEN
    INSERT INTO checkitem (checkitem_checkhead_id,checkitem_amount,checkitem_discount,checkitem_ponumber,
                           checkitem_aropen_id,checkitem_docdate,checkitem_curr_id,checkitem_cmnumber,
                           checkitem_ranumber)
    SELECT _checkid,pAmount,0,cmhead_custponumber,pAropenid,aropen_docdate,pCurrid,cmhead_number,NULL
    FROM aropen
      LEFT OUTER JOIN cmhead ON (aropen_docnumber=cmhead_number)
    WHERE (aropen_id=pAropenid);
  END IF;
  

  RETURN _checkid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createchecks-integer-date">createchecks( integer, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBankaccntid ALIAS FOR $1;
  pCheckDate ALIAS FOR $2;
  _v RECORD;
  _r RECORD;
  _c RECORD;
  _checkid		INTEGER;
  _counter		INTEGER := 0;
  _check_curr_id	INTEGER;
  _check_curr_rate      NUMERIC;

BEGIN

  SELECT bankaccnt_curr_id, currRate(bankaccnt_curr_id, pCheckDate) 
    INTO _check_curr_id, _check_curr_rate
    FROM bankaccnt
    WHERE ( bankaccnt_id = pBankaccntid );
  FOR _v IN SELECT DISTINCT vend_id, vend_number, vend_name,
                            vend_address1, vend_address2, vend_address3,
                            vend_city, vend_state, vend_zip
            FROM apselect, apopen, vend
            WHERE ( (apselect_apopen_id=apopen_id)
             AND (apopen_vend_id=vend_id)
             AND (apselect_bankaccnt_id=pBankaccntid) ) LOOP

    -- if we owe this vendor anything (we might not) then create a check
    IF ((SELECT 
                SUM(apselect_amount * round(_check_curr_rate,5) / round(apopen_curr_rate,5))          
	 FROM apselect, apopen
	 WHERE ((apselect_apopen_id=apopen_id)
	   AND  (apopen_vend_id=_v.vend_id)
	   AND  (apselect_bankaccnt_id=pBankaccntid)) ) &gt; 0) THEN
      -- 0.01 is a temporary amount; we&#39;&#39;ll update the check amount later
      _checkid := createCheck(pBankaccntid,	&#39;V&#39;,	_v.vend_id,
			      pCheckDate,		0.01,	_check_curr_id,
			      NULL,		NULL, &#39;&#39;,	&#39;&#39;,	FALSE);

      FOR _r IN SELECT apopen_id, apselect_id,
		       apopen_docnumber, apopen_invcnumber, apopen_ponumber,
		       apopen_docdate, apselect_curr_id,
		       apselect_amount, apselect_discount
		FROM apselect, apopen
		WHERE ( (apselect_apopen_id=apopen_id)
		 AND (apopen_vend_id=_v.vend_id)
		 AND (apselect_bankaccnt_id=pBankaccntid) ) LOOP
	INSERT INTO checkitem
	( checkitem_checkhead_id, checkitem_apopen_id,
	  checkitem_vouchernumber, checkitem_invcnumber, checkitem_ponumber,
	  checkitem_amount, checkitem_discount, checkitem_docdate,
          checkitem_curr_id, checkitem_curr_rate )
	VALUES
	( _checkid, _r.apopen_id,
	  _r.apopen_docnumber, _r.apopen_invcnumber, _r.apopen_ponumber,
	  _r.apselect_amount, _r.apselect_discount, _r.apopen_docdate,
	  _r.apselect_curr_id, 
          1 / (round(_check_curr_rate,5) / round(currRate(_r.apselect_curr_id, pCheckdate),5))  );

	DELETE FROM apselect
	WHERE (apselect_id=_r.apselect_id);

      END LOOP;

      -- one check can pay for purchases on multiple dates in multiple currencies
      UPDATE checkhead
      SET checkhead_amount = (SELECT SUM(checkitem_amount / round(checkitem_curr_rate,5))
			      FROM checkitem
			      WHERE (checkitem_checkhead_id=checkhead_id))
      WHERE (checkhead_id=_checkid);

      _counter := (_counter + 1);
    END IF;

  END LOOP;

  RETURN _counter;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createcounttag-integer-text-boolean-boolean">createcounttag( integer, text, boolean, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pComments ALIAS FOR $2;
  pPriority ALIAS FOR $3;
  pFreeze ALIAS FOR $4;
BEGIN
  RETURN createCountTag(pItemsiteid, pComments, pPriority, pFreeze, NULL);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createcounttag-integer-text-boolean-boolean-integer">createcounttag( integer, text, boolean, boolean, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>

DECLARE
  pItemsiteid ALIAS FOR $1;
  pComments ALIAS FOR $2;
  pPriority ALIAS FOR $3;
  pFreeze ALIAS FOR $4;
  pLocationid ALIAS FOR $5;
  _invcntid INTEGER;
  _whs		RECORD;
  _type CHARACTER;

BEGIN

  SELECT item_type INTO _type
    FROM itemsite, item
   WHERE ((itemsite_item_id=item_id)
     AND  (itemsite_id=pItemsiteid));
  IF(NOT FOUND OR _type IN (&#39;F&#39;, &#39;R&#39;, &#39;L&#39;,&#39;J&#39;)) THEN
    RETURN 0; -- We simply do not do these item types.
  END IF;

  -- Test for existing tags
   IF (pLocationid IS NULL) THEN
       SELECT invcnt_id INTO _invcntid
       FROM invcnt
       WHERE ((NOT invcnt_posted)
       AND (invcnt_location_id IS NULL)
       AND (invcnt_itemsite_id=pItemsiteid));
  
  ELSE

    SELECT invcnt_id INTO _invcntid
     FROM invcnt
     WHERE ((NOT invcnt_posted)
     AND (invcnt_itemsite_id=pItemsiteid)
     AND (invcnt_location_id=pLocationid));
  END IF;

  IF (NOT FOUND) THEN
    SELECT NEXTVAL(&#39;invcnt_invcnt_id_seq&#39;) INTO _invcntid;

    SELECT whsinfo.* INTO _whs
      FROM whsinfo, itemsite
     WHERE ((warehous_id=itemsite_warehous_id)
       AND  (itemsite_id=pItemsiteid));

    INSERT INTO invcnt (
      invcnt_id, invcnt_itemsite_id, invcnt_tagdate,
      invcnt_tagnumber,
      invcnt_tag_usr_id, invcnt_posted,
      invcnt_priority, invcnt_comments, invcnt_location_id
    ) VALUES (
      _invcntid, pItemsiteid, CURRENT_TIMESTAMP,
      (_whs.warehous_counttag_prefix || _whs.warehous_counttag_number::TEXT),
      currentUserId(), FALSE,
      pPriority, pComments, pLocationid
    );

    UPDATE whsinfo
    SET warehous_counttag_number=(warehous_counttag_number + 1)
    WHERE (warehous_id=_whs.warehous_id);

    IF (pFreeze) THEN
      UPDATE itemsite
      SET itemsite_freeze=TRUE
      WHERE (itemsite_id=pItemsiteid);
    END IF;

  END IF;

  RETURN _invcntid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createcrmacct-text-text-boolean-text-integer-integer-integer-integer-integer-integer-integer">createcrmacct( text, text, boolean, text, integer, integer, integer, integer, integer, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  return createCrmAcct($1, $2, $3, $4, $5, $6, $7, $8, $9, NULL, $10, $11);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createcrmacct-text-text-boolean-text-integer-integer-integer-integer-integer-integer-integer-integer">createcrmacct( text, text, boolean, text, integer, integer, integer, integer, integer, integer, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    pnumber     ALIAS FOR  $1;
    pname       ALIAS FOR  $2;
    pactive     ALIAS FOR  $3;
    ptype       ALIAS FOR  $4;
    pcustid     ALIAS FOR  $5;
    pcompetitorid       ALIAS FOR $6;
    ppartnerid  ALIAS FOR  $7;
    pprospectid ALIAS FOR  $8;
    pvendid     ALIAS FOR  $9;
    ptaxauthid  ALIAS FOR $10;
    pcntct1     ALIAS FOR $11;
    pcntct2     ALIAS FOR $12;
    _custid     INTEGER := pcustid;
    _competitorid INTEGER:=pcompetitorid;
    _prospectid INTEGER := pprospectid;
    _partnerid  INTEGER := ppartnerid;
    _vendid     INTEGER := pvendid;
    _cntct1     INTEGER := pcntct1;
    _cntct2     INTEGER := pcntct2;
    _taxauthid  INTEGER := ptaxauthid;
    _crmacctid INTEGER := NEXTVAL(&#39;crmacct_crmacct_id_seq&#39;);
  BEGIN
    IF (_custid &lt; 0)       THEN _custid := NULL;        END IF;
    IF (_competitorid &lt; 0) THEN _competitorid := NULL;  END IF;
    IF (_partnerid &lt; 0)    THEN _partnerid := NULL;     END IF;
    IF (_prospectid &lt; 0)   THEN _prospectid := NULL;    END IF;
    IF (_vendid &lt; 0)       THEN _vendid := NULL;        END IF;
    IF (_cntct1 &lt; 0)       THEN _cntct1 := NULL;        END IF;
    IF (_cntct2 &lt; 0)       THEN _cntct2 := NULL;        END IF;
    IF (_taxauthid &lt; 0)    THEN _taxauthid := NULL;     END IF;

    IF (EXISTS(SELECT crmacct_id
               FROM crmacct
               WHERE (crmacct_number=pnumber))) THEN
      RETURN -1;
    END IF;

    IF (_custid IS NOT NULL AND
        EXISTS(SELECT cust_id
               FROM custinfo
               WHERE ((cust_number=pnumber)
                 AND  (cust_id!=_custid)))) THEN
      RETURN -2;
    END IF;

    -- -3 for competitor when there is a distinct table
    -- -4 for partner when there is a distinct table

    IF (_prospectid IS NOT NULL AND
        EXISTS(SELECT prospect_id
               FROM prospect
               WHERE ((prospect_number=pnumber)
                 AND  (prospect_id!=_prospectid)))) THEN
      RETURN -5;
    END IF;

    IF (_vendid IS NOT NULL AND
        EXISTS(SELECT vend_id
               FROM vendinfo
               WHERE ((vend_number=pnumber)
                 AND  (vend_id!=_vendid)))) THEN
      RETURN -6;
    END IF;

    IF (_taxauthid IS NOT NULL AND
        EXISTS(SELECT taxauth_id
               FROM taxauth
               WHERE ((taxauth_code=pnumber)
                 AND  (taxauth_id!=_taxauthid)))) THEN
      RETURN -7;
    END IF;

    INSERT INTO crmacct (crmacct_id,crmacct_number, crmacct_name, crmacct_active,
                         crmacct_type, crmacct_cust_id, crmacct_competitor_id,
                         crmacct_partner_id, crmacct_prospect_id,
                         crmacct_vend_id, crmacct_taxauth_id,
                         crmacct_cntct_id_1, crmacct_cntct_id_2
                ) VALUES (_crmacctid,pnumber, pname, pactive,
                         ptype, _custid, _competitorid,
                         _partnerid, _prospectid,
                         _vendid, _taxauthid,
                         _cntct1, _cntct2);
    UPDATE cntct SET cntct_crmacct_id=_crmacctid WHERE cntct_id IN (_cntct1,_cntct2);
    RETURN _crmacctid;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createcustomer-integer">createcustomer( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    pcrmacctId  ALIAS FOR $1;
    _custId     INTEGER := 0;
  BEGIN
    IF (pcrmacctId &lt; 0 OR pcrmacctId IS NULL) THEN
      RETURN -1;
    END IF;

    SELECT crmacct_cust_id INTO _custId
    FROM crmacct WHERE crmacct_id = pcrmacctId;

    IF (_custId IS NOT NULL AND _custId &lt;= 0) THEN
      RETURN -2;
    END IF;

    INSERT INTO _customer (active, customer_number, customer_name)
      SELECT crmacct_active, crmacct_number, crmacct_name
      FROM crmacct
      WHERE crmacct_id = pcrmacctId;
    _custId := CURRVAL(&#39;cust_cust_id_seq&#39;);

    UPDATE crmacct SET crmacct_prospect_id = NULL, crmacct_cust_id = _custId
    WHERE crmacct_id = pcrmacctId;

    RETURN _custId;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createcyclecountsbywarehouse-integer-integer-integer-text-boolean-boolean">createcyclecountsbywarehouse( integer, integer, integer, text, boolean, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWarehousid ALIAS FOR $1;
  pClasscodeid ALIAS FOR $2;
  pMaxNumber ALIAS FOR $3;
  pComments ALIAS FOR $4;
  pPriority ALIAS FOR $5;
  pFreeze ALIAS FOR $6;
BEGIN
  RETURN createCycleCountsByWarehouseByClassCode(pWarehousid, pClasscodeid, pMaxNumber, pComments, pPriority, pFreeze, NULL, FALSE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createcyclecountsbywarehouse-integer-integer-text-boolean-boolean">createcyclecountsbywarehouse( integer, integer, text, boolean, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWarehousid ALIAS FOR $1;
  pMaxNumber ALIAS FOR $2;
  pComments ALIAS FOR $3;
  pPriority ALIAS FOR $4;
  pFreeze ALIAS FOR $5;

BEGIN
  RETURN createCycleCountsByWarehouse(pWarehousid, pMaxNumber, pComments, pPriority, pFreeze, NULL, FALSE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createcyclecountsbywarehouse-integer-integer-text-boolean-boolean-integer-boolean">createcyclecountsbywarehouse( integer, integer, text, boolean, boolean, integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWarehousid ALIAS FOR $1;
  pMaxNumber ALIAS FOR $2;
  pComments ALIAS FOR $3;
  pPriority ALIAS FOR $4;
  pFreeze ALIAS FOR $5;
  pLocationid ALIAS FOR $6;
  pIgnoreZeroBalance ALIAS FOR $7;
  _itemsites RECORD;
  _returnVal	INTEGER;
  
BEGIN

IF (pLocationid IS NULL) THEN
  FOR _itemsites IN SELECT itemsite_id, itemsite_warehous_id, itemsite_qtyonhand
                    FROM itemsite, item
                    WHERE ( (itemsite_active)
                     AND (itemsite_item_id=item_id)
                     AND (itemsite_cyclecountfreq &gt; 0)
                     AND ((COALESCE(itemsite_datelastcount, startOfTime()) + itemsite_cyclecountfreq) &lt; CURRENT_DATE)
                     AND (itemsite_id NOT IN ( SELECT invcnt_itemsite_id
                                               FROM invcnt, itemsite
                                               WHERE ( (invcnt_itemsite_id=itemsite_id)
                                                AND (itemsite_warehous_id=pWarehousid)
						AND (invcnt_location_id IS NULL)
                                                AND (NOT invcnt_posted) ) ) )
                     AND ((NOT pIgnoreZeroBalance) OR (itemsite_qtyonhand &lt;&gt; 0))
                     AND ((pLocationid IS NULL) OR (validLocation(pLocationid, itemsite_id)))
                     AND (itemsite_warehous_id=pWarehousid) )
                    ORDER BY (COALESCE(itemsite_datelastcount, startOfTime()) + itemsite_cyclecountfreq), itemsite_abcclass, item_number

LIMIT pMaxNumber LOOP
    _returnVal := createCountTag(_itemsites.itemsite_id, pComments,
				    pPriority, pFreeze, pLocationid);
    IF (_returnVal &lt; 0) THEN
      RETURN _returnVal;
    END IF;
  END LOOP;            

ELSE
  FOR _itemsites IN SELECT itemsite_id, itemsite_warehous_id, SUM(itemloc_qty)
                    FROM itemsite, itemloc
                    WHERE ( (itemsite_active)
                     AND (itemsite_cyclecountfreq &gt; 0)
                     AND ((COALESCE(itemsite_datelastcount, startOfTime()) + itemsite_cyclecountfreq) &lt; CURRENT_DATE)
                     AND ((NOT pIgnoreZeroBalance) OR (itemsite_qtyonhand &lt;&gt; 0))
                     AND (pLocationid = itemloc_location_id)
                     AND (itemloc_itemsite_id = itemsite_id)
                     AND (itemsite_warehous_id=pWarehousid) )
		    GROUP BY itemsite_id, itemsite_warehous_id,
			     itemsite_datelastcount, itemsite_cyclecountfreq,
			     itemsite_abcclass
                    ORDER BY (COALESCE(itemsite_datelastcount, startOfTime()) + itemsite_cyclecountfreq), itemsite_abcclass

LIMIT pMaxNumber LOOP
    _returnVal := createCountTag(_itemsites.itemsite_id, pComments,
				    pPriority, pFreeze, pLocationid);
    IF (_returnVal &lt; 0) THEN
      RETURN _returnVal;
    END IF;
  END LOOP;  
                   
END IF;

  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createcyclecountsbywarehouse-integer-text-integer-text-boolean-boolean">createcyclecountsbywarehouse( integer, text, integer, text, boolean, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWarehousid ALIAS FOR $1;
  pClasscodePattern ALIAS FOR $2;
  pMaxNumber ALIAS FOR $3;
  pComments ALIAS FOR $4;
  pPriority ALIAS FOR $5;
  pFreeze ALIAS FOR $6;
BEGIN
  RETURN createCycleCountsByWarehouseByClassCode(pWarehousid, pClasscodePattern, pMaxNumber, pComments, pPriority, pFreeze, NULL, FALSE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createcyclecountsbywarehousebyclasscode-integer-integer-integer-text-boolean-boolean-integer-boolean">createcyclecountsbywarehousebyclasscode( integer, integer, integer, text, boolean, boolean, integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWarehousid ALIAS FOR $1;
  pClasscodeid ALIAS FOR $2;
  pMaxNumber ALIAS FOR $3;
  pComments ALIAS FOR $4;
  pPriority ALIAS FOR $5;
  pFreeze ALIAS FOR $6;
  pLocationid ALIAS FOR $7;
  pIgnoreZeroBalance ALIAS FOR $8;
  _itemsites RECORD;
  _returnVal	INTEGER;
  
BEGIN

IF (pLocationid IS NULL) THEN
  FOR _itemsites IN SELECT itemsite_id, itemsite_warehous_id, itemsite_qtyonhand
                    FROM itemsite, item
                    WHERE ( (itemsite_active)
                     AND (itemsite_item_id=item_id)
                     AND (itemsite_cyclecountfreq &gt; 0)
                     AND ((COALESCE(itemsite_datelastcount, startOfTime()) + itemsite_cyclecountfreq) &lt; CURRENT_DATE)
                     AND (itemsite_id NOT IN ( SELECT invcnt_itemsite_id
                                               FROM invcnt, itemsite
                                               WHERE ( (invcnt_itemsite_id=itemsite_id)
                                                AND (itemsite_warehous_id=pWarehousid)
						AND (invcnt_location_id IS NULL)
                                                AND (NOT invcnt_posted) ) ) )
                     AND ((NOT pIgnoreZeroBalance) OR (itemsite_qtyonhand &lt;&gt; 0))
                     AND ((pLocationid IS NULL) OR (validLocation(pLocationid, itemsite_id)))
                     AND (itemsite_warehous_id=pWarehousid)
                     AND (item_classcode_id=pClasscodeid) )
                    ORDER BY (COALESCE(itemsite_datelastcount, startOfTime()) + itemsite_cyclecountfreq), itemsite_abcclass, item_number
                    LIMIT pMaxNumber LOOP
    _returnVal := createCountTag(_itemsites.itemsite_id, pComments,
				    pPriority, pFreeze, pLocationid);
    IF (_returnVal &lt; 0) THEN
      RETURN _returnVal;
    END IF;
  END LOOP;

ELSE
  FOR _itemsites IN SELECT itemsite_id, itemsite_warehous_id, SUM(itemloc_qty)
                    FROM itemsite, item, itemloc
                    WHERE ( (itemsite_active)
                     AND (itemsite_item_id=item_id)
                     AND (itemsite_cyclecountfreq &gt; 0)
                     AND ((COALESCE(itemsite_datelastcount, startOfTime()) + itemsite_cyclecountfreq) &lt; CURRENT_DATE)
                     AND ((NOT pIgnoreZeroBalance) OR (itemsite_qtyonhand &lt;&gt; 0))
                     AND (pLocationid = itemloc_location_id)
                     AND (itemloc_itemsite_id = itemsite_id)
                     AND (itemsite_warehous_id=pWarehousid) 
                     AND (item_classcode_id=pClasscodeid) )
		    GROUP BY itemsite_id, itemsite_warehous_id,
			     itemsite_datelastcount, itemsite_cyclecountfreq,
			     itemsite_abcclass
                    ORDER BY (COALESCE(itemsite_datelastcount, startOfTime()) + itemsite_cyclecountfreq), itemsite_abcclass
                    LIMIT pMaxNumber LOOP
    _returnVal := createCountTag(_itemsites.itemsite_id, pComments,
				    pPriority, pFreeze, pLocationid);
    IF (_returnVal &lt; 0) THEN
      RETURN _returnVal;
    END IF;
  END LOOP;

END IF;

  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createcyclecountsbywarehousebyclasscode-integer-text-integer-text-boolean-boolean-integer-boolean">createcyclecountsbywarehousebyclasscode( integer, text, integer, text, boolean, boolean, integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWarehousid ALIAS FOR $1;
  pClasscodePattern ALIAS FOR $2;
  pMaxNumber ALIAS FOR $3;
  pComments ALIAS FOR $4;
  pPriority ALIAS FOR $5;
  pFreeze ALIAS FOR $6;
  pLocationid ALIAS FOR $7;
  pIgnoreZeroBalance ALIAS FOR $8;
  _itemsites RECORD;
  _returnVal	INTEGER;
  
BEGIN

IF (pLocationid IS NULL) THEN
  FOR _itemsites IN SELECT itemsite_id, itemsite_warehous_id, itemsite_qtyonhand
                    FROM itemsite, item, classcode
                    WHERE ( (itemsite_active)
                     AND (itemsite_item_id=item_id)
                     AND (item_classcode_id=classcode_id)
                     AND (itemsite_cyclecountfreq &gt; 0)
                     AND ((COALESCE(itemsite_datelastcount, startOfTime()) + itemsite_cyclecountfreq) &lt; CURRENT_DATE)
                     AND (itemsite_id NOT IN ( SELECT invcnt_itemsite_id
                                               FROM invcnt, itemsite
                                               WHERE ( (invcnt_itemsite_id=itemsite_id)
                                                AND (itemsite_warehous_id=pWarehousid)
						AND (invcnt_location_id IS NULL)
                                                AND (NOT invcnt_posted) ) ) )
                     AND ((NOT pIgnoreZeroBalance) OR (itemsite_qtyonhand &lt;&gt; 0))
                     AND ((pLocationid IS NULL) OR (validLocation(pLocationid, itemsite_id)))
                     AND (itemsite_warehous_id=pWarehousid)
                     AND (classcode_code ~ pClasscodePattern) )
                    ORDER BY (COALESCE(itemsite_datelastcount, startOfTime()) + itemsite_cyclecountfreq), itemsite_abcclass, item_number
                    LIMIT pMaxNumber LOOP
    _returnVal := createCountTag(_itemsites.itemsite_id, pComments,
				    pPriority, pFreeze, pLocationid);
    IF (_returnVal &lt; 0) THEN
      RETURN _returnVal;
    END IF;
  END LOOP;

ELSE
  FOR _itemsites IN SELECT itemsite_id, itemsite_warehous_id, SUM(itemloc_qty)
                    FROM itemsite, item, classcode, itemloc
                    WHERE ( (itemsite_active)
                     AND (itemsite_item_id=item_id)
                     AND (item_classcode_id=classcode_id)
                     AND (itemsite_cyclecountfreq &gt; 0)
                     AND ((COALESCE(itemsite_datelastcount, startOfTime()) + itemsite_cyclecountfreq) &lt; CURRENT_DATE)
                     AND ((NOT pIgnoreZeroBalance) OR (itemsite_qtyonhand &lt;&gt; 0))
                     AND (pLocationid = itemloc_location_id)
                     AND (itemloc_itemsite_id = itemsite_id)
                     AND (itemsite_warehous_id=pWarehousid)
                     AND (classcode_code ~ pClasscodePattern) )
		    GROUP BY itemsite_id, itemsite_warehous_id,
			     itemsite_datelastcount, itemsite_cyclecountfreq,
			     itemsite_abcclass
                    ORDER BY (COALESCE(itemsite_datelastcount, startOfTime()) + itemsite_cyclecountfreq), itemsite_abcclass
                    LIMIT pMaxNumber LOOP
    _returnVal := createCountTag(_itemsites.itemsite_id, pComments,
				    pPriority, pFreeze, pLocationid);
    IF (_returnVal &lt; 0) THEN
      RETURN _returnVal;
    END IF;
  END LOOP;

END IF;

  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createcyclecountsbywarehousebyplannercode-integer-integer-integer-text-boolean-boolean-integer-boolean">createcyclecountsbywarehousebyplannercode( integer, integer, integer, text, boolean, boolean, integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWarehousid ALIAS FOR $1;
  pPlancodeid ALIAS FOR $2;
  pMaxNumber ALIAS FOR $3;
  pComments ALIAS FOR $4;
  pPriority ALIAS FOR $5;
  pFreeze ALIAS FOR $6;
  pLocationid ALIAS FOR $7;
  pIgnoreZeroBalance ALIAS FOR $8;
  _itemsites RECORD;
  _returnVal	INTEGER;
  
BEGIN

IF (pLocationid IS NULL) THEN
  FOR _itemsites IN SELECT itemsite_id, itemsite_warehous_id, itemsite_qtyonhand
                    FROM itemsite, item
                    WHERE ( (itemsite_active)
                     AND (itemsite_item_id=item_id)
                     AND (itemsite_cyclecountfreq &gt; 0)
                     AND ((COALESCE(itemsite_datelastcount, startOfTime()) + itemsite_cyclecountfreq) &lt; CURRENT_DATE)
                     AND (itemsite_id NOT IN ( SELECT invcnt_itemsite_id
                                               FROM invcnt, itemsite
                                               WHERE ( (invcnt_itemsite_id=itemsite_id)
                                                AND (itemsite_warehous_id=pWarehousid)
						AND (invcnt_location_id IS NULL)
                                                AND (NOT invcnt_posted) ) ) )
                     AND ((NOT pIgnoreZeroBalance) OR (itemsite_qtyonhand &lt;&gt; 0))
                     AND ((pLocationid IS NULL) OR (validLocation(pLocationid, itemsite_id)))
                     AND (itemsite_warehous_id=pWarehousid)
                     AND (itemsite_plancode_id=pPlancodeid) )
                    ORDER BY (COALESCE(itemsite_datelastcount, startOfTime()) + itemsite_cyclecountfreq), itemsite_abcclass, item_number
                    LIMIT pMaxNumber LOOP
    _returnVal := createCountTag(_itemsites.itemsite_id, pComments,
				    pPriority, pFreeze, pLocationid);
    IF (_returnVal &lt; 0) THEN
      RETURN _returnVal;
    END IF;
  END LOOP;

ELSE
  FOR _itemsites IN SELECT itemsite_id, itemsite_warehous_id, SUM(itemloc_qty)
                    FROM itemsite, itemloc
                    WHERE ( (itemsite_active)
                     AND (itemsite_cyclecountfreq &gt; 0)
                     AND ((COALESCE(itemsite_datelastcount, startOfTime()) + itemsite_cyclecountfreq) &lt; CURRENT_DATE)
                     AND ((NOT pIgnoreZeroBalance) OR (itemsite_qtyonhand &lt;&gt; 0))
                     AND (itemloc_itemsite_id = itemsite_id)
                     AND (itemsite_warehous_id=pWarehousid)
                     AND (pLocationid = itemloc_location_id)
                     AND (itemsite_plancode_id=pPlancodeid) )
		    GROUP BY itemsite_id, itemsite_warehous_id,
			     itemsite_datelastcount, itemsite_cyclecountfreq,
			     itemsite_abcclass
                    ORDER BY (COALESCE(itemsite_datelastcount, startOfTime()) + itemsite_cyclecountfreq), itemsite_abcclass
                    LIMIT pMaxNumber LOOP
    _returnVal := createCountTag(_itemsites.itemsite_id, pComments,
				    pPriority, pFreeze, pLocationid);
    IF (_returnVal &lt; 0) THEN
      RETURN _returnVal;
    END IF;
  END LOOP;

END IF;

  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createcyclecountsbywarehousebyplannercode-integer-text-integer-text-boolean-boolean-integer-boolean">createcyclecountsbywarehousebyplannercode( integer, text, integer, text, boolean, boolean, integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWarehousid ALIAS FOR $1;
  pPlancodePattern ALIAS FOR $2;
  pMaxNumber ALIAS FOR $3;
  pComments ALIAS FOR $4;
  pPriority ALIAS FOR $5;
  pFreeze ALIAS FOR $6;
  pLocationid ALIAS FOR $7;
  pIgnoreZeroBalance ALIAS FOR $8;
  _itemsites RECORD;
  _returnVal	INTEGER;
  
BEGIN

IF (pLocationid IS NULL) THEN
  FOR _itemsites IN SELECT itemsite_id, itemsite_warehous_id, itemsite_qtyonhand
                    FROM itemsite, item, plancode
                    WHERE ( (itemsite_active)
                     AND (itemsite_item_id=item_id)
                     AND (itemsite_plancode_id=plancode_id)
                     AND (itemsite_cyclecountfreq &gt; 0)
                     AND ((COALESCE(itemsite_datelastcount, startOfTime()) + itemsite_cyclecountfreq) &lt; CURRENT_DATE)
                     AND (itemsite_id NOT IN ( SELECT invcnt_itemsite_id
                                               FROM invcnt, itemsite
                                               WHERE ( (invcnt_itemsite_id=itemsite_id)
                                                AND (itemsite_warehous_id=pWarehousid)
						AND (invcnt_location_id IS NULL)
                                                AND (NOT invcnt_posted) ) ) )
                     AND ((NOT pIgnoreZeroBalance) OR (itemsite_qtyonhand &lt;&gt; 0))
                     AND ((pLocationid IS NULL) OR (validLocation(pLocationid, itemsite_id)))
                     AND (itemsite_warehous_id=pWarehousid)
                     AND (plancode_code ~ pPlancodePattern) )
                    ORDER BY (COALESCE(itemsite_datelastcount, startOfTime()) + itemsite_cyclecountfreq), itemsite_abcclass, item_number
                    LIMIT pMaxNumber LOOP
    _returnVal := createCountTag(_itemsites.itemsite_id, pComments,
				    pPriority, pFreeze, pLocationid);
    IF (_returnVal &lt; 0) THEN
      RETURN _returnVal;
    END IF;
  END LOOP;

ELSE
  FOR _itemsites IN SELECT itemsite_id, itemsite_warehous_id, SUM(itemloc_qty)
                    FROM itemsite, plancode, itemloc
                    WHERE ( (itemsite_active)
                     AND (itemsite_plancode_id=plancode_id)
                     AND (itemsite_cyclecountfreq &gt; 0)
                     AND ((COALESCE(itemsite_datelastcount, startOfTime()) + itemsite_cyclecountfreq) &lt; CURRENT_DATE)
                     AND ((NOT pIgnoreZeroBalance) OR (itemsite_qtyonhand &lt;&gt; 0))
                     AND (pLocationid = itemloc_location_id)
                     AND (itemloc_itemsite_id = itemsite_id)
                     AND (itemsite_warehous_id=pWarehousid)
                     AND (plancode_code ~ pPlancodePattern) )
		    GROUP BY itemsite_id, itemsite_warehous_id,
			     itemsite_datelastcount, itemsite_cyclecountfreq,
			     itemsite_abcclass
                    ORDER BY (COALESCE(itemsite_datelastcount, startOfTime()) + itemsite_cyclecountfreq), itemsite_abcclass
                    LIMIT pMaxNumber LOOP
    _returnVal := createCountTag(_itemsites.itemsite_id, pComments,
				    pPriority, pFreeze, pLocationid);
    IF (_returnVal &lt; 0) THEN
      RETURN _returnVal;
    END IF;
  END LOOP;

END IF;

  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createglreport-integer">createglreport( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPeriodId ALIAS FOR $1;
  _p RECORD;
  _rPeriod RECORD;
  _rPriorPeriod RECORD;
  _rAccount RECORD;
  _rworkGLhead RECORD;
  _workglhead_id INTEGER;
  _currYear INTEGER;
  _currMonth INTEGER;
  _currDay INTEGER;
  _priorYear INTEGER;
  _workglhead_cy_startdate DATE;
  _workglhead_pyp_startdate DATE;
  _workglhead_pyp_enddate DATE;
  _workglhead_py_startdate DATE;
  _workglitem_cyp_balance numeric;
  _workglitem_cy_balance numeric;
  _workglitem_pyp_balance numeric;
  _workglitem_py_balance numeric;
  _workglitem_cp_ending_trialbal numeric;
  _workglitem_pp_ending_trialbal numeric;
  _workgltotal_cp_ending_total numeric;
  _workgltotal_pp_ending_total numeric;
  _workgltotal_cp_pl_ending_total numeric;
  _workgltotal_pp_pl_ending_total numeric;
  _workgltotaleq_cp_ending_total_work numeric;
  _workgltotaleq_pp_ending_total_work numeric;
  _workgltotaleq_cp_ending_total numeric;
  _workgltotaleq_pp_ending_total numeric;
  bFoundPriorPeriod BOOLEAN;
  _current_full_year DATE;

BEGIN

--  First thing we need to do is get the period
    SELECT * INTO _rPeriod FROM period where period_id = pPeriodId;
--  Error out if we do not find it
    IF (NOT FOUND) THEN
      RETURN -1;
    END IF;

--  Get the current information
    SELECT EXTRACT(YEAR FROM _rPeriod.period_start) INTO _currYear;
    SELECT EXTRACT(MONTH FROM _rPeriod.period_start) INTO _currMonth;
    SELECT EXTRACT(DAY FROM _rPeriod.period_start) INTO _currDay;
--  Build the prior year
    _priorYear  := _currYear - 1;

--  We need to get the beginning of the current year from the year table
    SELECT yearperiod_start INTO _current_full_year
      FROM yearperiod
     WHERE yearperiod_start &gt;= _rPeriod.period_start
       AND yearperiod_start &lt;= _rPeriod.period_end;

    IF (FOUND) THEN
      _workglhead_cy_startdate := _current_full_year;
    ELSE
--  Build the beginning of the year
      _workglhead_cy_startdate := &#39;1/1/&#39; || _currYear::TEXT;
    END IF;

--  We need to get the beginning of the year from the year table

--  Build the prior period starting date
    _workglhead_pyp_startdate = _currMonth::TEXT || &#39;/&#39; || _currDay::TEXT || &#39;/&#39; || _priorYear::TEXT;
--  Find the Prior Period
    bFoundPriorPeriod := TRUE;
    SELECT * INTO _rPriorPeriod FROM period where period_start = _workglhead_pyp_startdate;
    IF (NOT FOUND) THEN
      bFoundPriorPeriod := FALSE;
      _rPriorPeriod.period_id = -1;
--  Build the prior year start date
      _workglhead_py_startdate = &#39;1/1/&#39; || _priorYear::TEXT;
    ELSE
--  We need to get the beginning of the prior year from the year table
      SELECT yearperiod_start INTO _current_full_year
        FROM yearperiod
       WHERE yearperiod_start &gt;= _rPriorPeriod.period_start
         AND yearperiod_start &lt;= _rPriorPeriod.period_end;

      IF (FOUND) THEN
        _workglhead_py_startdate := _current_full_year;
      ELSE
--  Build the prior year start date
        _workglhead_py_startdate = &#39;1/1/&#39; || _priorYear::TEXT;
      END IF;
    END IF;

-- Get the user info
    SELECT usr_id, usr_active INTO _p
    FROM usr
    WHERE (usr_username=CURRENT_USER);
    IF (NOT FOUND) THEN
      RETURN -2;
    END IF;

-- See if there is a mess to clean up

    SELECT * INTO _rworkGLhead FROM workglhead WHERE workglhead_usr_id = _p.usr_id;
    IF (FOUND) THEN
      DELETE FROM workglitem WHERE workglitem_workglhead_id IN (SELECT workglhead_id FROM workglhead WHERE workglhead_usr_id=_p.usr_id);
      DELETE FROM workglhead WHERE workglhead_id IN (SELECT workglhead_id FROM workglhead WHERE workglhead_usr_id=_p.usr_id);
      DELETE FROM workgltotal WHERE workgltotal_workglhead_id IN (SELECT workglhead_id FROM workglhead WHERE workglhead_usr_id=_p.usr_id);
      DELETE FROM workgltotaleq WHERE workgltotaleq_workglhead_id IN (SELECT workglhead_id FROM workglhead WHERE workglhead_usr_id=_p.usr_id);
    END IF;

-- Insert the header

    SELECT NEXTVAL(&#39;workglhead_workglhead_id_seq&#39;) INTO _workglhead_id;

    IF (bFoundPriorPeriod) THEN
      INSERT INTO workglhead VALUES (_workglhead_id, _p.usr_id, _rPeriod.period_start, _rPeriod.period_end, _workglhead_cy_startdate, _rPriorPeriod.period_start, _rPriorPeriod.period_end, _workglhead_py_startdate);
    ELSE
      INSERT INTO workglhead VALUES (_workglhead_id, _p.usr_id, _rPeriod.period_start, _rPeriod.period_end, _workglhead_cy_startdate, NULL, NULL, NULL);
    END IF;

-- Now we need to process the accounts
    FOR _rAccount IN SELECT *
            FROM accnt LOOP

-- Get the current year period balance
      select sum(gltrans_amount) into _workglitem_cyp_balance from gltrans where gltrans_accnt_id =  _rAccount.accnt_id AND gltrans_date between _rPeriod.period_start AND _rPeriod.period_end;
      IF (_workglitem_cyp_balance IS NULL) THEN
        _workglitem_cyp_balance = 0;
      END IF;

-- Get the current year to date balance
      select sum(gltrans_amount) into _workglitem_cy_balance from gltrans where gltrans_accnt_id =  _rAccount.accnt_id AND gltrans_date between _workglhead_cy_startdate AND _rPeriod.period_end;
      IF (_workglitem_cy_balance IS NULL) THEN
        _workglitem_cy_balance = 0;
      END IF;

-- Get the current year trialbal ending balance
      select trialbal_ending into _workglitem_cp_ending_trialbal from trialbal where trialbal_accnt_id =  _rAccount.accnt_id AND trialbal_period_id = pPeriodId;
      IF (_workglitem_cp_ending_trialbal IS NULL) THEN
        _workglitem_cp_ending_trialbal = 0;
      END IF;

      IF (NOT bFoundPriorPeriod) THEN
        _workglitem_pyp_balance = 0;
        _workglitem_py_balance = 0;
        _workglitem_pp_ending_trialbal = 0;
      ELSE
-- Get the prior year period balance
        select sum(gltrans_amount) into _workglitem_pyp_balance from gltrans where gltrans_accnt_id =  _rAccount.accnt_id AND gltrans_date between _rPriorPeriod.period_start AND _rPriorPeriod.period_end;
-- Get the prior year to date balance
        select sum(gltrans_amount) into _workglitem_py_balance from gltrans where gltrans_accnt_id =  _rAccount.accnt_id AND gltrans_date between _workglhead_py_startdate AND _rPriorPeriod.period_end;
      END IF;

-- Get the prior year trialbal ending balance
      select trialbal_ending into _workglitem_pp_ending_trialbal from trialbal where trialbal_accnt_id =  _rAccount.accnt_id AND trialbal_period_id = _rPriorPeriod.period_id;
      IF (_workglitem_pp_ending_trialbal IS NULL) THEN
        _workglitem_pp_ending_trialbal = 0;
      END IF;

    INSERT INTO workglitem VALUES (NEXTVAL(&#39;workglitem_workglitem_id_seq&#39;), _workglhead_id, formatglaccount(_rAccount.accnt_id), _rAccount.accnt_descrip, _rAccount.accnt_type, _workglitem_cyp_balance, _workglitem_cy_balance, _workglitem_pyp_balance, _workglitem_py_balance, _workglitem_cp_ending_trialbal, _workglitem_pp_ending_trialbal, _rAccount.accnt_subaccnttype_code);

    END LOOP;


-- New Code for equity totals

    _workgltotaleq_cp_ending_total_work = 0.00;
    _workgltotaleq_pp_ending_total_work = 0.00;
    _workgltotaleq_cp_ending_total = 0.00;
    _workgltotaleq_pp_ending_total = 0.00;
    select sum(workglitem_cp_ending_trialbal) into _workgltotaleq_cp_ending_total_work from workglitem, workglhead where workglitem_workglhead_id = _workglhead_id and workglitem_accnt_type = &#39;Q&#39;;

    select sum(workglitem_pp_ending_trialbal) into _workgltotaleq_pp_ending_total_work from workglitem, workglhead where workglitem_workglhead_id = _workglhead_id and workglitem_accnt_type = &#39;Q&#39;;

    select sum(workglitem_cy_balance) into _workgltotaleq_cp_ending_total from workglitem, workglhead where  workglitem_workglhead_id = _workglhead_id and workglitem_accnt_type in (&#39;R&#39;, &#39;E&#39;);

    select sum(workglitem_py_balance) into _workgltotaleq_pp_ending_total from workglitem, workglhead where workglitem_workglhead_id = _workglhead_id and workglitem_accnt_type in (&#39;R&#39;, &#39;E&#39;);

    INSERT INTO workgltotaleq VALUES (NEXTVAL(&#39;workgltotaleq_workgltotaleq_id_seq&#39;), _workglhead_id, _workgltotaleq_cp_ending_total + _workgltotaleq_cp_ending_total_work, _workgltotaleq_pp_ending_total + _workgltotaleq_pp_ending_total_work);

-- New Code for liabilty and equity totals

    select sum(workglitem_cp_ending_trialbal) into _workgltotal_cp_ending_total from workglitem where workglitem_workglhead_id = _workglhead_id AND workglitem_accnt_type = &#39;L&#39;;

    select sum(workglitem_pp_ending_trialbal) into _workgltotal_pp_ending_total from workglitem where workglitem_workglhead_id = _workglhead_id AND workglitem_accnt_type = &#39;L&#39;;

-- Add in the P/L

    INSERT INTO workgltotal VALUES (NEXTVAL(&#39;workgltotal_workgltotal_id_seq&#39;), _workglhead_id, _workgltotal_cp_ending_total + _workgltotaleq_cp_ending_total_work + _workgltotaleq_cp_ending_total, _workgltotal_pp_ending_total + _workgltotaleq_pp_ending_total_work + _workgltotaleq_pp_ending_total);

    RETURN _workglhead_id;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createmiscapcheck-integer-integer-date-numeric-integer-integer-text-text">createmiscapcheck( integer, integer, date, numeric, integer, integer, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RAISE NOTICE &#39;createMiscAPCheck() is deprecated - use createCheck() instead&#39;;
  RETURN createCheck($1, &#39;V&#39;, $2, $3, pAmount, $5, $6, NULL, $7, $8, FALSE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createmiscapcheck-integer-integer-date-numeric-integer-text-text">createmiscapcheck( integer, integer, date, numeric, integer, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RAISE NOTICE &#39;createMiscAPCheck() is deprecated - use createCheck() instead&#39;;
  RETURN createCheck($1, &#39;V&#39;, $2, $3, $4, baseCurrId(), $5, NULL, $6, $7, FALSE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createpkgschema-text-text">createpkgschema( text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pname         ALIAS FOR $1;
  pcomment      ALIAS FOR $2;
  _namespaceoid INTEGER := -1;
  _tabs         TEXT[] := ARRAY[&#39;cmd&#39;,  &#39;cmdarg&#39;, &#39;image&#39;,  &#39;metasql&#39;,
                                &#39;priv&#39;, &#39;report&#39;, &#39;script&#39;, &#39;uiform&#39;] ;
  _pkgtab       TEXT;

BEGIN
  IF (LENGTH(COALESCE(pname, &#39;&#39;)) &lt;= 0) THEN
    RAISE EXCEPTION &#39;Cannot create a schema for this package without a name.&#39;;
  END IF;

  SELECT oid INTO _namespaceoid
  FROM pg_namespace
  WHERE (LOWER(nspname)=LOWER(pname));
  IF (NOT FOUND) THEN
    EXECUTE &#39;CREATE SCHEMA &#39; || LOWER(pname);
    EXECUTE &#39;GRANT ALL ON SCHEMA &#39; || LOWER(pname) || &#39; TO GROUP openmfg;&#39;;

    SELECT oid INTO _namespaceoid
    FROM pg_namespace
    WHERE (LOWER(nspname)=LOWER(pname));
  END IF;

  FOR i IN ARRAY_LOWER(_tabs,1)..ARRAY_UPPER(_tabs,1) LOOP
    _pkgtab := pname || &#39;.pkg&#39; || _tabs[i];

    IF NOT EXISTS(SELECT oid
                  FROM pg_class
                  WHERE ((relname=_pkgtab)
                     AND (relnamespace=_namespaceoid))) THEN
      EXECUTE &#39;CREATE TABLE &#39; || _pkgtab || &#39; () INHERITS (&#39; || _tabs[i] || &#39;);&#39;;

      EXECUTE &#39;ALTER TABLE &#39; || _pkgtab ||
              &#39; ALTER &#39; || _tabs[i] || &#39;_id SET NOT NULL,&#39; ||
              &#39; ADD PRIMARY KEY (&#39; || _tabs[i] || &#39;_id),&#39; ||
              &#39; ALTER &#39; || _tabs[i] || &#39;_id SET DEFAULT NEXTVAL(&#39;&#39;&#39; ||
              _tabs[i] || &#39;_&#39; || _tabs[i] || &#39;_id_seq&#39;&#39;);&#39;;

      EXECUTE &#39;REVOKE ALL ON &#39; || _pkgtab || &#39; FROM PUBLIC;&#39;;
      EXECUTE &#39;GRANT  ALL ON &#39; || _pkgtab || &#39; TO GROUP openmfg;&#39;;

      IF (_tabs[i] = &#39;cmdarg&#39;) THEN
        EXECUTE &#39;ALTER TABLE &#39; || _pkgtab ||
                &#39; ADD FOREIGN KEY (cmdarg_cmd_id) REFERENCES &#39; ||
                pname || &#39;.pkgcmd(cmd_id);&#39;;
      END IF;

      EXECUTE &#39;SELECT dropIfExists(&#39;&#39;TRIGGER&#39;&#39;, &#39;&#39;pkg&#39; ||
                                   _tabs[i] || &#39;beforetrigger&#39;&#39;, &#39;&#39;&#39; ||
                                   pname || &#39;&#39;&#39;);&#39; ;
      EXECUTE &#39;CREATE TRIGGER pkg&#39; || _tabs[i] || &#39;beforetrigger &#39; ||
              &#39;BEFORE INSERT OR UPDATE OR DELETE ON &#39; || _pkgtab ||
              &#39; FOR EACH ROW EXECUTE PROCEDURE _pkg&#39; || _tabs[i] || &#39;beforetrigger();&#39;;

      EXECUTE &#39;SELECT dropIfExists(&#39;&#39;TRIGGER&#39;&#39;, &#39;&#39;pkg&#39; ||
                                   _tabs[i] || &#39;altertrigger&#39;&#39;, &#39;&#39;&#39; ||
                                   pname || &#39;&#39;&#39;);&#39; ;
      EXECUTE &#39;CREATE TRIGGER pkg&#39; || _tabs[i] || &#39;altertrigger &#39; ||
              &#39;BEFORE INSERT OR UPDATE OR DELETE ON &#39; || _pkgtab ||
              &#39; FOR EACH ROW EXECUTE PROCEDURE _pkg&#39; || _tabs[i] || &#39;altertrigger();&#39;;

      EXECUTE &#39;SELECT dropIfExists(&#39;&#39;TRIGGER&#39;&#39;, &#39;&#39;pkg&#39; ||
                                   _tabs[i] || &#39;aftertrigger&#39;&#39;, &#39;&#39;&#39; ||
                                   pname || &#39;&#39;&#39;);&#39; ;
      EXECUTE &#39;CREATE TRIGGER pkg&#39; || _tabs[i] || &#39;aftertrigger &#39; ||
              &#39;AFTER INSERT OR UPDATE OR DELETE ON &#39; || _pkgtab ||
              &#39; FOR EACH ROW EXECUTE PROCEDURE _pkg&#39; || _tabs[i] || &#39;aftertrigger();&#39;;

    END IF;
  END LOOP;

  UPDATE pkgitem SET pkgitem_descrip=pcomment
  FROM pkghead
  WHERE ((pkgitem_name=pname)
    AND  (pkgitem_item_id=_namespaceoid));
  IF NOT FOUND THEN
    INSERT INTO pkgitem (pkgitem_pkghead_id, pkgitem_type,
                         pkgitem_item_id, pkgitem_name, pkgitem_descrip
                ) SELECT pkghead_id, &#39;S&#39;,
                         _namespaceoid, pname, pcomment
                  FROM pkghead
                  WHERE (pkghead_name=pname);
  END IF;

  RETURN _namespaceoid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createpr-bpchar-integer">createpr( bpchar, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pParentType ALIAS FOR $1;
  pParentId ALIAS FOR $2;
  _orderNumber INTEGER;
  _prid INTEGER;

BEGIN

  IF (pParentType = &#39;W&#39;) THEN
    SELECT wo_number INTO _orderNumber
    FROM wo, womatl
    WHERE ((womatl_wo_id=wo_id)
     AND (womatl_id=pParentId));

  ELSIF (pParentType = &#39;S&#39;) THEN
    SELECT CAST(cohead_number AS INTEGER) INTO _orderNumber
    FROM cohead, coitem
    WHERE ((coitem_cohead_id=cohead_id)
     AND (coitem_id=pParentId));

  ELSIF (pParentType = &#39;F&#39;) THEN
    SELECT fetchPrNumber() INTO _orderNumber;

  ELSE
    RETURN -2;
  END IF;

  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  SELECT createPr(_orderNumber, pParentType, pParentId) INTO _prid;

  RETURN _prid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createpr-integer-bpchar-integer">createpr( integer, bpchar, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pOrderNumber ALIAS FOR $1;
  pParentType ALIAS FOR $2;
  pParentId ALIAS FOR $3;
  _parent RECORD;
  _prid INTEGER;
  _orderNumber INTEGER;

BEGIN

  IF (pOrderNumber = -1) THEN
    SELECT fetchPrNumber() INTO _orderNumber;
  ELSE
    _orderNumber := pOrderNumber;
  END IF;

  IF (pParentType = &#39;W&#39;) THEN
    SELECT womatl_itemsite_id AS itemsiteid,
           itemuomtouom(itemsite_item_id, womatl_uom_id, NULL, womatl_qtyreq) AS qty, womatl_duedate AS duedate INTO _parent
    FROM wo, womatl, itemsite
    WHERE ((womatl_wo_id=wo_id)
     AND (womatl_itemsite_id=itemsite_id)
     AND (womatl_id=pParentId));

  ELSIF (pParentType = &#39;S&#39;) THEN
    SELECT coitem_itemsite_id AS itemsiteid,
           (coitem_qtyord - coitem_qtyshipped + coitem_qtyreturned) AS qty,
           coitem_scheddate AS duedate INTO _parent
    FROM coitem
    WHERE ((coitem_id=pParentId));

  ELSIF (pParentType = &#39;F&#39;) THEN
    SELECT planord_itemsite_id AS itemsiteid,
           planord_qty AS qty,
           planord_duedate AS duedate INTO _parent
    FROM planord
    WHERE (planord_id=pParentId);

  ELSE
    RETURN -2;
  END IF;

  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  SELECT NEXTVAL(&#39;pr_pr_id_seq&#39;) INTO _prid;
  INSERT INTO pr
  ( pr_id, pr_number, pr_subnumber, pr_status,
    pr_order_type, pr_order_id,
    pr_itemsite_id, pr_qtyreq, pr_duedate )
  VALUES
  ( _prid, _orderNumber, nextPrSubnumber(_orderNumber), &#39;O&#39;,
    pParentType, pParentId,
    _parent.itemsiteid, _parent.qty, _parent.duedate );

  RETURN _prid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createpr-integer-integer-numeric-date-text">createpr( integer, integer, numeric, date, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pOrderNumber ALIAS FOR $1;
  pItemsiteid ALIAS FOR $2;
  pQty ALIAS FOR $3;
  pDueDate ALIAS FOR $4;
  pNotes ALIAS FOR $5;
  _prid INTEGER;

BEGIN

  SELECT NEXTVAL(&#39;pr_pr_id_seq&#39;) INTO _prid;
  INSERT INTO pr
  ( pr_id, pr_number, pr_subnumber, pr_status,
    pr_order_type, pr_order_id,
    pr_itemsite_id, pr_qtyreq, pr_duedate )
  VALUES
  ( _prid, pOrderNumber, nextPrSubnumber(pOrderNumber), &#39;O&#39;,
    &#39;M&#39;, -1,
    pItemsiteid, pQty, pDuedate );

  RETURN _prid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createpr-integer-integer-numeric-date-text-bpchar-integer">createpr( integer, integer, numeric, date, text, bpchar, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pOrderNumber ALIAS FOR $1;
  pItemsiteid ALIAS FOR $2;
  pQty ALIAS FOR $3;
  pDueDate ALIAS FOR $4;
  pNotes ALIAS FOR $5;
  pOrderType ALIAS FOR $6;
  pOrderId ALIAS FOR $7;
  _prid INTEGER;

BEGIN

  SELECT NEXTVAL(&#39;pr_pr_id_seq&#39;) INTO _prid;
  INSERT INTO pr
  ( pr_id, pr_number, pr_subnumber, pr_status,
    pr_order_type, pr_order_id,
    pr_itemsite_id, pr_qtyreq, pr_duedate )
  VALUES
  ( _prid, pOrderNumber, nextPrSubnumber(pOrderNumber), &#39;O&#39;,
    pOrderType, pOrderId,
    pItemsiteid, pQty, pDuedate );

  RETURN _prid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createpriv-text-text-text">createpriv( text, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pModule ALIAS FOR $1;
  pName   ALIAS FOR $2;
  pDesc   ALIAS FOR $3;
  _id     INTEGER;
BEGIN

  SELECT priv_id
    INTO _id
    FROM priv
   WHERE(priv_name=pName);

  IF (FOUND) THEN
    UPDATE priv
       SET priv_module=pModule,
           priv_descrip=pDesc
     WHERE(priv_id=_id);
  ELSE
    SELECT nextval(&#39;priv_priv_id_seq&#39;) INTO _id;
    INSERT INTO priv
          (priv_id, priv_module, priv_name, priv_descrip)
    VALUES(_id, pModule, pName, pDesc);
  END IF;

  RETURN _id;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createprospect-integer">createprospect( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    pcrmacctId  ALIAS FOR $1;
    _custId     INTEGER := 0;
    _prospectId INTEGER := 0;
  BEGIN
    IF (pcrmacctId &lt; 0 OR pcrmacctId IS NULL) THEN
      RETURN -1;
    END IF;

    SELECT crmacct_cust_id, crmacct_prospect_id INTO _custId, _prospectId
    FROM crmacct WHERE crmacct_id = pcrmacctId;

    IF (_custId IS NOT NULL AND _custId &gt; 0) THEN
      RETURN -2;
    END IF;

    IF (_prospectId IS NOT NULL AND _prospectId &gt; 0) THEN
      RETURN -3;
    END IF;

    INSERT INTO prospect (prospect_number, prospect_name, prospect_cntct_id)
               SELECT  crmacct_number, crmacct_name, crmacct_cntct_id_1
                 FROM  crmacct
                 WHERE (crmacct_id=pcrmacctId);
    _prospectId := CURRVAL(&#39;cust_cust_id_seq&#39;);

    UPDATE crmacct SET crmacct_prospect_id = _prospectId
    WHERE crmacct_id = pcrmacctId;

    RETURN _prospectId;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createprospectsfromcrmaccts">createprospectsfromcrmaccts(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  counter	INTEGER	:= 0;
  r		RECORD;
BEGIN
  FOR r IN SELECT *
	   FROM crmacct
	   WHERE ((crmacct_prospect_id IS NOT NULL)
	     AND  (crmacct_prospect_id NOT IN (SELECT prospect_id
					       FROM prospect))) LOOP
    INSERT INTO prospect (prospect_active, prospect_number, prospect_name,
			  prospect_cntct_id, prospect_created)
    VALUES (r.crmacct_active, r.crmacct_number, r.crmacct_name,
            r.crmacct_cntct_id_1, &#39;today&#39;);

    UPDATE crmacct
    SET crmacct_prospect_id = CURRVAL(&#39;cust_cust_id_seq&#39;)
    WHERE (crmacct_id=r.crmacct_id);

    counter := counter + 1;
  END LOOP;

  RETURN counter;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createrecurringinvoices">createrecurringinvoices(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _count INTEGER := 0;
  _iteration INTEGER;
  _interval TEXT;
  _cutoffDate DATE;
  _lastDate DATE;
  _nextDate DATE;
  _i RECORD;
  _id INTEGER;
BEGIN
  SELECT CURRENT_DATE + CAST(metric_value AS INTEGER)
    INTO _cutoffDate
    FROM metric
   WHERE(metric_name=&#39;RecurringInvoiceBuffer&#39;);
  IF(_cutoffDate IS NULL) THEN
    _cutoffDate := CURRENT_DATE;
  END IF;

  FOR _i IN SELECT *
              FROM invchead
             WHERE((invchead_recurring)
               AND (COALESCE(invchead_recurring_until, endOfTime())&gt;=CURRENT_DATE)) LOOP
    _iteration := 0;

    IF(upper(_i.invchead_recurring_type)=&#39;Y&#39;) THEN
      _interval := &#39; year&#39;;
    ELSIF(upper(_i.invchead_recurring_type)=&#39;M&#39;) THEN
      _interval := &#39; month&#39;;
    ELSIF(upper(_i.invchead_recurring_type)=&#39;W&#39;) THEN
      _interval := &#39; week&#39;;
    ELSIF(upper(_i.invchead_recurring_type)=&#39;D&#39;) THEN
      _interval := &#39; days&#39;;
    ELSE
      RAISE EXCEPTION &#39;Invalid interval type on invoice %&#39;, _i.invchead_invcnumber;
    END IF;

    IF(COALESCE(_i.invchead_recurring_interval, 0) &lt;= 0) THEN
      RAISE EXCEPTION &#39;Invalid interval value on invoice %&#39;, _i.invchead_invcnumber;
    END IF;

-- Get the last date a recurring invocie was generated
    SELECT invchead_invcdate
      INTO _lastDate
      FROM invchead
     WHERE(invchead_recurring_invchead_id=_i.invchead_id)
     ORDER BY invchead_invcdate DESC
     LIMIT 1;
    IF(_lastDate IS NULL) THEN
      _lastDate := _i.invchead_invcdate;
    END IF;

    LOOP
      _iteration := _iteration + 1;
      SELECT _i.invchead_invcdate + CAST((_i.invchead_recurring_interval * _iteration) || _interval AS INTERVAL)
        INTO _nextDate;

      EXIT WHEN (_nextDate &gt; _cutoffDate) OR (_nextDate &gt; COALESCE(_i.invchead_recurring_until, endOfTime()));

      IF(_nextDate &gt; _lastDate) THEN
        _id := copyInvoice(_i.invchead_id, _nextDate);
        IF(_id &gt; 0) THEN
          UPDATE invchead
             SET invchead_recurring_invchead_id=_i.invchead_id
           WHERE(invchead_id=_id);
          _count := _count + 1;
        END IF;
      END IF;
    END LOOP;
  END LOOP;

  RETURN _count;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createtodoitem-integer-integer-text-text-integer-integer-integer-date-date-bpchar-date-date-integer-text-text">createtodoitem( integer, integer, text, text, integer, integer, integer, date, date, bpchar, date, date, integer, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    ptodoid     ALIAS FOR  $1;
    pusrid      ALIAS FOR  $2;
    pname       ALIAS FOR  $3;
    pdesc       ALIAS FOR  $4;
    pincdtid    ALIAS FOR  $5;
    pcrmacctid  ALIAS FOR  $6;
    pOpheadid   ALIAS FOR  $7;
    pstarted    ALIAS FOR  $8;
    pdue        ALIAS FOR  $9;
    pstatus     ALIAS FOR $10;
    passigned   ALIAS FOR $11;
    pcompleted  ALIAS FOR $12;
    ppriority   ALIAS FOR $13;
    pnotes      ALIAS FOR $14;
    powner      ALIAS FOR $15;

    _todoid     INTEGER;
    _priority   INTEGER         := ppriority;
    _status     CHARACTER(1)    := pstatus;
    _incdtid    INTEGER         := pincdtid;
    _crmacctid  INTEGER         := pcrmacctid;
    _opheadid   INTEGER         := pOpheadid;
    _assigned   DATE            := passigned;
    _result     INTEGER;

  BEGIN
    IF (pusrid IS NULL OR pusrid &lt;= 0) THEN
      RETURN -1;
    END IF;

    IF (pname IS NULL OR pname = &#39;&#39;) THEN
      RETURN -2;
    END IF;

    IF (pdue IS NULL) THEN
      RETURN -3;
    END IF;

    IF (pcompleted IS NOT NULL) THEN
      _status := &#39;C&#39;;
    ELSIF (pstatus IS NULL AND pstarted IS NOT NULL) THEN
      _status := &#39;I&#39;;
    ELSIF (pstatus IS NULL) THEN
      _status := &#39;N&#39;;
    END IF;

    IF (_incdtid &lt;= 0) THEN
      _incdtid := NULL;
    END IF;

    IF (_crmacctid &lt;= 0) THEN
      _crmacctid := NULL;
    END IF;

    IF (_opheadid &lt;= 0) THEN
      _opheadid := NULL;
    END IF;

    IF (_priority &lt;= 0) THEN
      _priority := NULL;
    END IF;

    IF (_assigned IS NULL) THEN
      _assigned := CURRENT_DATE;
    END IF;

    IF (ptodoid IS NULL) THEN
      SELECT NEXTVAL(&#39;todoitem_todoitem_id_seq&#39;) INTO _todoid;
    ELSE
      _todoid := ptodoid;
    END IF;

    INSERT INTO todoitem ( todoitem_id, todoitem_usr_id, todoitem_name,
                           todoitem_description, todoitem_incdt_id,
                           todoitem_creator_username, todoitem_status,
                           todoitem_active, todoitem_start_date,
                           todoitem_due_date, todoitem_assigned_date,
                           todoitem_completed_date, todoitem_priority_id,
                           todoitem_notes, todoitem_crmacct_id,
                           todoitem_ophead_id, todoitem_owner_username 
                ) VALUES ( _todoid, pusrid, pname,
                           pdesc, _incdtid,
                           CURRENT_USER, _status,
                           TRUE, pstarted,
                           pdue, _assigned,
                           pcompleted, _priority, pnotes, _crmacctid, _opheadid, powner );

    RETURN _todoid;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createuser-text-boolean">createuser( text, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUsername ALIAS FOR $1;
  pCreateUsers ALIAS FOR $2;
  _sql TEXT;

BEGIN

  _sql := &#39;CREATE USER &#39; || pUsername;

  IF (pCreateUsers) THEN
    _sql := _sql || &#39; CREATEUSER &#39;;
  ELSE
    _sql := _sql || &#39; NOCREATEUSER &#39;;
  END IF;

  _sql := _sql || &#39;IN GROUP openmfg;&#39;;

  EXECUTE _sql;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createwo-integer-integer-integer-numeric-date-date-text-bpchar-integer-integer">createwo( integer, integer, integer, numeric, date, date, text, bpchar, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoNumber ALIAS FOR $1;
  pItemsiteid ALIAS FOR $2;
  pPriority ALIAS FOR $3;
  pQtyOrdered ALIAS FOR $4;
  pStartDate ALIAS FOR $5;
  pDueDate ALIAS FOR $6;
  pProductionNotes ALIAS FOR $7;
  pParentType ALIAS FOR $8;
  pParentId ALIAS FOR $9;
  pProjectId ALIAS FOR $10;
  _woid INTEGER;
  _result INTEGER;
  _parentType char(1);
  _bomrevid INTEGER;
  _boorevid INTEGER;

BEGIN

  SELECT getActiveRevId(&#39;BOM&#39;,itemsite_item_id) INTO _bomrevid
  FROM itemsite
  WHERE (itemsite_id=pItemsiteid);

  SELECT getActiveRevId(&#39;BOO&#39;,itemsite_item_id) INTO _boorevid
  FROM itemsite
  WHERE (itemsite_id=pItemsiteid);
  
  RETURN createWo(pWoNumber, pItemsiteid, pPriority, pQtyOrdered,
                  pStartDate, pDueDate, pProductionNotes,
                  pParentType, pParentId, pProjectId, _bomrevid, _boorevid, NULL);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createwo-integer-integer-integer-numeric-date-date-text-bpchar-integer-integer-integer-integer">createwo( integer, integer, integer, numeric, date, date, text, bpchar, integer, integer, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoNumber ALIAS FOR $1;
  pItemsiteid ALIAS FOR $2;
  pPriority ALIAS FOR $3;
  pQtyOrdered ALIAS FOR $4;
  pStartDate ALIAS FOR $5;
  pDueDate ALIAS FOR $6;
  pProductionNotes ALIAS FOR $7;
  pParentType ALIAS FOR $8;
  pParentId ALIAS FOR $9;
  pProjectId ALIAS FOR $10;
  pBomRevId ALIAS FOR $11;
  pBooRevId ALIAS FOR $12;
BEGIN
  RETURN createWo(pWoNumber, pItemsiteid, pPriority, pQtyOrdered,
                  pStartDate, pDueDate, pProductionNotes,
                  pParentType, pParentId, pProjectId, pBomRevId, pBooRevId, NULL);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createwo-integer-integer-integer-numeric-date-date-text-bpchar-integer-integer-integer-integer-text">createwo( integer, integer, integer, numeric, date, date, text, bpchar, integer, integer, integer, integer, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoNumber ALIAS FOR $1;
  pItemsiteid ALIAS FOR $2;
  pPriority ALIAS FOR $3;
  pQtyOrdered ALIAS FOR $4;
  pStartDate ALIAS FOR $5;
  pDueDate ALIAS FOR $6;
  pProductionNotes ALIAS FOR $7;
  pParentType ALIAS FOR $8;
  pParentId ALIAS FOR $9;
  pProjectId ALIAS FOR $10;
  pBomRevId ALIAS FOR $11;
  pBooRevId ALIAS FOR $12;
  pCosMethod ALIAS FOR $13;
  _woid INTEGER;
  _result INTEGER;
  _parentType char(1);
  _cosmethod char(1);

BEGIN

  IF (pParentType IS NULL) THEN
    _parentType := &#39; &#39;;
  ELSE
    _parentType := pParentType;
  END IF;

--  Check to make sure the itemsite specified is a supplied at itemsite
  IF ( SELECT (NOT itemsite_supply)
       FROM itemsite
       WHERE (itemsite_id=pItemsiteid) ) THEN
    RETURN -1;
  END IF;

--  Check to make sure if this is a job item that it is tied to a sales order
--  Or if it is just an avarage costed item
  IF (pCosMethod IN (&#39;D&#39;, &#39;P&#39;)) THEN
    _cosmethod := pCosMethod;
  ELSE
    IF (SELECT (item_type = &#39;J&#39;)
         FROM itemsite, item
         WHERE ((itemsite_id = pItemsiteid)
         AND (itemsite_item_id = item_id))) THEN
      IF (_parentType != &#39;S&#39;) THEN
        RAISE EXCEPTION &#39;Work Orders for item type Job must be created from a sales order&#39;;
      ELSE
        _cosmethod := COALESCE(fetchmetrictext(&#39;JobItemCosDefault&#39;),&#39;D&#39;);
      END IF;
    ELSIF (SELECT (itemsite_costmethod = &#39;A&#39;)
             FROM itemsite
            WHERE (itemsite_id = pItemsiteid)) THEN
      _cosmethod := COALESCE(fetchmetrictext(&#39;JobItemCosDefault&#39;),&#39;D&#39;);
    END IF;
  END IF;

--  Grab the next wo_id
  SELECT NEXTVAL(&#39;wo_wo_id_seq&#39;) INTO _woid;

--  Create the W/O
  INSERT INTO wo
  ( wo_id, wo_number, wo_subnumber, wo_itemsite_id,
    wo_priority, wo_ordtype, wo_ordid,
    wo_status, wo_startdate, wo_duedate,
    wo_qtyord, wo_qtyrcv, wo_prodnotes, wo_prj_id,
    wo_bom_rev_id, wo_boo_rev_id, wo_cosmethod )
  SELECT _woid, pWoNumber, nextWoSubnumber(pWoNumber), itemsite_id,
         pPriority, _parentType, pParentId,
         &#39;O&#39;, pStartDate, pDueDate,
         roundQty(item_fractional, pQtyOrdered), 0, pProductionNotes, pProjectId, 
         pBomRevid, pBooRevid, _cosmethod
  FROM itemsite, item
  WHERE ((itemsite_item_id=item_id)
   AND (itemsite_id=pItemsiteid));

--  Explode the newly created W/O according to metrics
  IF ( ( SELECT (metric_value=&#39;t&#39;)
         FROM metric
         WHERE (metric_name=&#39;AutoExplodeWO&#39;) ) ) THEN
    SELECT explodeWo( _woid, ( SELECT (metric_value = &#39;M&#39;)
                               FROM metric
                               WHERE (metric_name=&#39;WOExplosionLevel&#39;) ) ) INTO _result;
  ELSE
    _result := _woid;
  END IF;

  RETURN _result;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createwo-integer-integer-integer-numeric-integer-date-text-bpchar-integer">createwo( integer, integer, integer, numeric, integer, date, text, bpchar, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoNumber ALIAS FOR $1;
  pItemsiteid ALIAS FOR $2;
  pPriority ALIAS FOR $3;
  pQtyOrdered ALIAS FOR $4;
  pLeadTime ALIAS FOR $5;
  pDueDate ALIAS FOR $6;
  pProductionNotes ALIAS FOR $7;
  pParentType ALIAS FOR $8;
  pParentId ALIAS FOR $9;

BEGIN
  RETURN createWo(pWoNumber, pItemsiteid, pPriority, pQtyOrdered,
                  (pDueDate - pLeadTime), pDueDate, pProductionNotes,
                  pParentType, pParentId, -1);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createwo-integer-integer-integer-numeric-integer-date-text-bpchar-integer-integer">createwo( integer, integer, integer, numeric, integer, date, text, bpchar, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoNumber ALIAS FOR $1;
  pItemsiteid ALIAS FOR $2;
  pPriority ALIAS FOR $3;
  pQtyOrdered ALIAS FOR $4;
  pLeadTime ALIAS FOR $5;
  pDueDate ALIAS FOR $6;
  pProductionNotes ALIAS FOR $7;
  pParentType ALIAS FOR $8;
  pParentId ALIAS FOR $9;
  pProjectId ALIAS FOR $10;

BEGIN
  RETURN createWo(pWoNumber, pItemsiteid, pPriority, pQtyOrdered,
                  (pDueDate - pLeadTime), pDueDate, pProductionNotes,
                  pParentType, pParentId, pProjectId);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createwo-integer-integer-integer-numeric-integer-date-text-bpchar-integer-integer-integer-integer">createwo( integer, integer, integer, numeric, integer, date, text, bpchar, integer, integer, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoNumber ALIAS FOR $1;
  pItemsiteid ALIAS FOR $2;
  pPriority ALIAS FOR $3;
  pQtyOrdered ALIAS FOR $4;
  pLeadTime ALIAS FOR $5;
  pDueDate ALIAS FOR $6;
  pProductionNotes ALIAS FOR $7;
  pParentType ALIAS FOR $8;
  pParentId ALIAS FOR $9;
  pProjectId ALIAS FOR $10;
  pBomRevId ALIAS FOR $11;
  pBooRevId ALIAS FOR $12;

BEGIN
  RETURN createWo(pWoNumber, pItemsiteid, pPriority, pQtyOrdered,
                  (pDueDate - pLeadTime), pDueDate, pProductionNotes,
                  pParentType, pParentId, pProjectId, pBomRevId, pBooRevId, NULL);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createwo-integer-integer-numeric-date-date-text">createwo( integer, integer, numeric, date, date, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoNumber ALIAS FOR $1;
  pItemsiteid ALIAS FOR $2;
  pQtyOrdered ALIAS FOR $3;
  pStartDate ALIAS FOR $4;
  pDueDate ALIAS FOR $5;
  pProductionNotes ALIAS FOR $6;

BEGIN
  RETURN createWo( pWoNumber, pItemsiteid, 1, pQtyOrdered,
                   pStartDate, pDueDate, pProductionNotes, NULL, NULL, -1);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createwo-integer-integer-numeric-integer-date-text">createwo( integer, integer, numeric, integer, date, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoNumber ALIAS FOR $1;
  pItemsiteid ALIAS FOR $2;
  pQtyOrdered ALIAS FOR $3;
  pLeadTime ALIAS FOR $4;
  pDueDate ALIAS FOR $5;
  pProductionNotes ALIAS FOR $6;

BEGIN
  RETURN createWo( pWoNumber, pItemsiteid, 1, pQtyOrdered,
                   (pDueDate - pLeadTime), pDueDate,
                   pProductionNotes, NULL, NULL, -1 ); 
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createwo-integer-integer-numeric-integer-date-text-bpchar-integer">createwo( integer, integer, numeric, integer, date, text, bpchar, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoNumber ALIAS FOR $1;
  pItemsiteid ALIAS FOR $2;
  pQtyOrdered ALIAS FOR $3;
  pLeadTime ALIAS FOR $4;
  pDueDate ALIAS FOR $5;
  pProductionNotes ALIAS FOR $6;
  pParentType ALIAS FOR $7;
  pParentId ALIAS FOR $8;

BEGIN
  RETURN createWo( pWoNumber, pItemsiteid, 1, pQtyOrdered,
                   (pDueDate - pLeadTime), pDueDate,
                   pProductionNotes, pParentType, pParentId, -1 ); 
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createwomaterial-integer-integer-bpchar-integer-numeric-numeric">createwomaterial( integer, integer, bpchar, integer, numeric, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid ALIAS FOR $1;
  pItemsiteid ALIAS FOR $2;
  pIssueMethod ALIAS FOR $3;
  pUomId ALIAS FOR $4;
  pQtyPer ALIAS FOR $5;
  pScrap ALIAS FOR $6;
  _womatlid INTEGER;

BEGIN

  SELECT createWoMaterial(pWoid,pItemsiteid,pIssueMethod,pUomId,pQtyPer,pScrap,-1, NULL, NULL) INTO _womatlid;

  RETURN _womatlid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createwomaterial-integer-integer-bpchar-integer-numeric-numeric-integer">createwomaterial( integer, integer, bpchar, integer, numeric, numeric, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid ALIAS FOR $1;
  pItemsiteid ALIAS FOR $2;
  pIssueMethod ALIAS FOR $3;
  pUomId ALIAS FOR $4;
  pQtyPer ALIAS FOR $5;
  pScrap ALIAS FOR $6;
  pBomitemId ALIAS FOR $7;
  _womatlid INTEGER;

BEGIN

  _womatlid := (SELECT NEXTVAL(&#39;womatl_womatl_id_seq&#39;));

  INSERT INTO womatl
  ( womatl_id, womatl_wo_id, womatl_itemsite_id,
    womatl_issuemethod, womatl_uom_id, womatl_qtyper, womatl_scrap,
    womatl_qtyreq, womatl_qtyiss, womatl_qtywipscrap,
    womatl_wooper_id, womatl_bomitem_id, womatl_duedate )
  SELECT _womatlid, wo_id, pItemsiteid,
         pIssueMethod, pUomId, pQtyPer, pScrap,
         roundQty(item_fractional, (wo_qtyord * (pQtyPer * (1 + pScrap)))), 0, 0,
         -1, pBomitemId, wo_startdate
  FROM wo, itemsite, item
  WHERE ( (itemsite_item_id=item_id)
   AND (wo_id=pWoid)
   AND (itemsite_id=pItemsiteid) );

  UPDATE wo
  SET wo_adhoc=TRUE
  WHERE (wo_id=pWoid);

  UPDATE wo
  SET wo_status=&#39;E&#39;
  WHERE ( (wo_status=&#39;O&#39;)
   AND (wo_id=pWoid) );

  RETURN _womatlid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createwomaterial-integer-integer-bpchar-integer-numeric-numeric-integer-text-text">createwomaterial( integer, integer, bpchar, integer, numeric, numeric, integer, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid ALIAS FOR $1;
  pItemsiteid ALIAS FOR $2;
  pIssueMethod ALIAS FOR $3;
  pUomId ALIAS FOR $4;
  pQtyPer ALIAS FOR $5;
  pScrap ALIAS FOR $6;
  pBomitemId ALIAS FOR $7;
  pNotes ALIAS FOR $8;
  pRef ALIAS FOR $9;
  _womatlid INTEGER;
  _p RECORD;

BEGIN

  _womatlid := (SELECT NEXTVAL(&#39;womatl_womatl_id_seq&#39;));

  INSERT INTO womatl
  ( womatl_id, womatl_wo_id, womatl_itemsite_id,
    womatl_issuemethod, womatl_uom_id, womatl_qtyper, womatl_scrap,
    womatl_qtyreq, womatl_qtyiss, womatl_qtywipscrap,
    womatl_wooper_id, womatl_bomitem_id, womatl_duedate, womatl_notes, womatl_ref )
  SELECT _womatlid, wo_id, pItemsiteid,
         pIssueMethod, pUomId, pQtyPer, pScrap,
         roundQty(item_fractional, (wo_qtyord * (pQtyPer * (1 + pScrap)))), 0, 0,
         -1, pBomitemId, wo_startdate, pNotes, pRef 
  FROM wo, itemsite, item
  WHERE ( (itemsite_item_id=item_id)
   AND (wo_id=pWoid)
   AND (itemsite_id=pItemsiteid) );

-- Handle all of the Phantom material requirements
  WHILE ( ( SELECT COUNT(*)
            FROM womatl, itemsite, item
            WHERE ( (womatl_itemsite_id=itemsite_id)
             AND (itemsite_item_id=item_id)
             AND (womatl_wo_id=pWoid)
             AND (item_type=&#39;F&#39;) ) ) &gt; 0 ) LOOP

    FOR _p IN SELECT wo_qtyord, wo_startdate, womatl_id, womatl_wooper_id
              FROM wo, womatl, itemsite, item
              WHERE ( (womatl_itemsite_id=itemsite_id)
               AND (itemsite_item_id=item_id)
               AND (item_type=&#39;F&#39;)
               AND (womatl_wo_id=wo_id)
               AND (wo_id=pWoid) ) LOOP

      INSERT INTO womatl
      ( womatl_wo_id, womatl_itemsite_id, womatl_wooper_id,
        womatl_schedatwooper, womatl_duedate,
        womatl_uom_id, womatl_qtyper, womatl_scrap,
        womatl_qtyreq,
        womatl_qtyiss, womatl_qtywipscrap,
        womatl_lastissue, womatl_lastreturn,
        womatl_cost, womatl_picklist, womatl_createwo,
        womatl_issuemethod, womatl_notes, womatl_ref )
      SELECT pWoid, cs.itemsite_id, _p.womatl_wooper_id,
             womatl_schedatwooper, womatl_duedate,
             bomitem_uom_id, (bomitem_qtyper * womatl_qtyper), bomitem_scrap,
             roundQty(itemuomfractionalbyuom(bomitem_item_id, bomitem_uom_id), (_p.wo_qtyord * bomitem_qtyper * womatl_qtyper * (1 + bomitem_scrap))),
             0, 0,
             startOfTime(), startOfTime(),
             0, ci.item_picklist, ( (ci.item_type=&#39;M&#39;) AND (bomitem_createwo) ),
             bomitem_issuemethod, bomitem_notes, bomitem_ref 
      FROM wo, womatl, bomitem, 
           itemsite AS cs, itemsite AS ps,
           item AS ci, item AS pi
      WHERE ( (womatl_itemsite_id=ps.itemsite_id)
       AND (womatl_wo_id=wo_id)
       AND (bomitem_parent_item_id=pi.item_id)
       AND (bomitem_item_id=ci.item_id)
       AND (ps.itemsite_warehous_id=cs.itemsite_warehous_id)
       AND (cs.itemsite_item_id=ci.item_id)
       AND (ps.itemsite_item_id=pi.item_id)
       AND (woEffectiveDate(_p.wo_startdate) BETWEEN bomitem_effective AND (bomitem_expires - 1))
       AND (womatl_id=_p.womatl_id));

      DELETE FROM womatl
      WHERE (womatl_id=_p.womatl_id);

    END LOOP;
  END LOOP;

  UPDATE wo
  SET wo_adhoc=TRUE
  WHERE (wo_id=pWoid);

  UPDATE wo
  SET wo_status=&#39;E&#39;
  WHERE ( (wo_status=&#39;O&#39;)
   AND (wo_id=pWoid) );

  RETURN _womatlid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.createwomaterial-integer-integer-bpchar-numeric-numeric">createwomaterial( integer, integer, bpchar, numeric, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid ALIAS FOR $1;
  pItemsiteid ALIAS FOR $2;
  pIssueMethod ALIAS FOR $3;
  pQtyPer ALIAS FOR $4;
  pScrap ALIAS FOR $5;
  _result INTEGER;
BEGIN
  SELECT createWoMaterial(pWoid, pItemsiteid, pIssueMethod, item_inv_uom_id, pQtyPer, pScrap)
    INTO _result
    FROM itemsite JOIN item ON (itemsite_item_id=item_id)
   WHERE(itemsite_id=pItemsiteid);
  RETURN _result;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.crmacctnumberused-text-integer">crmacctnumberused( text, integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pnumber	ALIAS FOR $1;
  pcrmacctid	ALIAS FOR $2;	-- skip data related to this crm acct
  r		RECORD;
BEGIN
  IF (pcrmacctid IS NULL) THEN
    -- presumably we&#39;re doing an insert on a table other than crmacct and
    -- the dup will get caught when we create the crmacct itself
    RETURN FALSE;
  END IF;

  SELECT * INTO r
  FROM crmacct
  WHERE (crmacct_id=pcrmacctid);

  RETURN (EXISTS(SELECT crmacct_id
	     FROM crmacct
	     WHERE ((crmacct_number=pnumber)
	       AND  (crmacct_id!=r.crmacct_id))
	     UNION
	     SELECT cust_id
	     FROM custinfo
	     WHERE ((cust_number=pnumber)
	       AND  (cust_id!=r.crmacct_cust_id))
	     UNION
	     SELECT prospect_id
	     FROM prospect
	     WHERE ((prospect_number=pnumber)
	       AND  (prospect_id!=r.crmacct_prospect_id))
	     UNION
	     SELECT vend_id
	     FROM vendinfo
	     WHERE ((vend_number=pnumber)
	       AND  (vend_id!=r.crmacct_vend_id))
	     UNION
	     SELECT taxauth_id
	     FROM taxauth
	     WHERE ((taxauth_code=pnumber)
	       AND  (taxauth_id!=r.crmacct_taxauth_id))
	     ));
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.crypt-text-text">crypt( text, text )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: C</h3>
        
        <pre>pg_crypt</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.currconcat-character-varying-character-varying">currconcat( character varying, character varying )</a>
		</h2>
<h3>Returns: character varying</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
    DECLARE
	curr_abbr   ALIAS FOR $1;
	curr_symbol ALIAS FOR $2;
	returnVal   VARCHAR(15) := &#39;&#39;;
    BEGIN
	IF length(trim(curr_abbr)) &gt; 0 AND length(trim(curr_symbol)) &gt; 0 THEN
	    returnVal := trim(curr_abbr) || &#39; - &#39; || trim(curr_symbol);

	ELSIF length(trim(curr_abbr)) &gt; 0 THEN
	    returnVal := curr_abbr;

	ELSIF length(trim(curr_symbol)) &gt; 0 THEN
	    returnVal := curr_symbol;
	END IF;

	RETURN returnVal;
    END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.currconcat-integer">currconcat( integer )</a>
		</h2>
<h3>Returns: character varying</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
    DECLARE
	id ALIAS FOR $1;
	returnVal   VARCHAR(15) := &#39;&#39;;
    BEGIN
	SELECT currConcat(curr_abbr, curr_symbol) INTO returnVal
	    FROM curr_symbol WHERE curr_id = id;
	RETURN returnVal;
    END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.currentapmemonumber">currentapmemonumber(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _number INTEGER;

BEGIN

  SELECT orderseq_number INTO _number
  FROM orderseq
  WHERE (orderseq_name=&#39;APMemoNumber&#39;);
  IF (NOT FOUND) THEN
    _number := 0;
  END IF;

  RETURN _number;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.currentarmemonumber">currentarmemonumber(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _number INTEGER;

BEGIN

  SELECT orderseq_number INTO _number
  FROM orderseq
  WHERE (orderseq_name=&#39;ARMemoNumber&#39;);
  IF (NOT FOUND) THEN
    _number := 0;
  END IF;

  RETURN _number;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.currentnumber-text">currentnumber( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pName   ALIAS FOR $1;
  _number INTEGER;

BEGIN
  SELECT orderseq_number INTO _number
  FROM orderseq
  WHERE (orderseq_name=pName);
  IF (NOT FOUND) THEN
    _number := 0;
  END IF;

  RETURN _number;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.currentuserid">currentuserid(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _userId INTEGER;

BEGIN

  SELECT usesysid INTO _userId
  FROM pg_user
  WHERE (usename=CURRENT_USER);

  RETURN _userId;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.currexchangecheckoverlap">currexchangecheckoverlap(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
    numberOfOverlaps INTEGER NOT NULL := 0;
    curr_string VARCHAR(16);
    new_id INTEGER;
BEGIN
  new_id := NEW.curr_id;
  -- ensure that effective date &lt;= expiration date
  IF NEW.curr_effective &gt; NEW.curr_expires THEN
    RAISE EXCEPTION
      &#39;Effective date % must be earlier than expiration date %&#39;,
      NEW.curr_effective, NEW.curr_expires;
  END IF;

  -- ensure new exchange rate does not overlap in time with any others
  SELECT count(*) INTO numberOfOverlaps
    FROM curr_rate
    WHERE curr_id = NEW.curr_id
      AND curr_rate_id != NEW.curr_rate_id
      AND (
          (curr_effective BETWEEN
              NEW.curr_effective AND NEW.curr_expires OR
           curr_expires BETWEEN
              NEW.curr_effective AND NEW.curr_expires)
         OR (curr_effective &lt;= NEW.curr_effective AND
             curr_expires   &gt;= NEW.curr_expires)
      );
  IF numberOfOverlaps &gt; 0 THEN
    SELECT currConcat(curr_symbol, curr_abbr)
      INTO curr_string
      FROM curr_symbol
      WHERE curr_id = new_id;
    RAISE EXCEPTION
      &#39;The date range % to % overlaps with another date range.&#39;,
      NEW.curr_effective, NEW.curr_expires;
  END IF;
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.currgain-integer-numeric-date-date">currgain( integer, numeric, date, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
    DECLARE
	pId ALIAS FOR $1;
	pValue ALIAS FOR $2;
	pStart ALIAS FOR $3;
	pEnd ALIAS FOR $4;
	_start DATE;
	_end DATE;
	_gain NUMERIC;
	_multiplier	INTEGER	:= 1;

    BEGIN
	IF (pEnd = pStart OR pValue = 0) THEN
	    RETURN 0;
	END IF;

	IF (pStart &gt; pEnd) THEN
	    _start := pEnd;
	    _end   := pStart;
	    _multiplier := -1;
	ELSE
	    _start := pStart;
	    _end := pEnd;
	END IF;

	_gain := currToBase(pId, pValue, _start) - currToBase(pId, pValue, _end);
    	IF (_gain IS NULL) THEN
	    RAISE EXCEPTION &#39;Missing exchange rate for curr_id % on % or %&#39;,
							    pId, _start, _end;
	END IF;

	RETURN _gain * _multiplier;
    END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.curronebase">curronebase(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  baseCount INTEGER := 0;
BEGIN
  IF NEW.curr_base = TRUE THEN
    SELECT count(*)
      INTO baseCount
      FROM curr_symbol
      WHERE curr_base = TRUE
        AND curr_id != NEW.curr_id;
    IF baseCount &gt; 0 THEN
      RAISE EXCEPTION
          &#39;Cannot make % - % the base currency because one is already defined.&#39;,
          NEW.curr_symbol, NEW.curr_abbr;
    ELSE
      SELECT count(*)
        INTO baseCount
        FROM curr_rate
        WHERE curr_id = NEW.curr_id;
      IF baseCount = 0 THEN
        -- put a row in the curr_rate table to avoid special-case
        -- code for converting base currency to base currency
        INSERT INTO curr_rate
          (curr_id, curr_rate, curr_effective, curr_expires) VALUES
          (NEW.curr_id, 1, startOfTime(), endOfTime());
      END IF;
    END IF;
  END IF;
  RETURN NEW;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.currrate-integer-date">currrate( integer, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCurrId ALIAS FOR $1;
  pDate   ALIAS FOR $2;
  _returnVal NUMERIC;
BEGIN
  SELECT curr_rate INTO _returnVal
  FROM curr_rate
  WHERE ( (curr_id=pCurrId)
  AND (pDate BETWEEN curr_effective AND curr_expires) );

  IF (FOUND) THEN
    RETURN _returnVal;
  ELSE
    RAISE EXCEPTION &#39;Currency exchange rate not found on %&#39;,formatDate(pDate);
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.currtobase-integer-numeric-date">currtobase( integer, numeric, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
    DECLARE
	pId     ALIAS FOR $1;
	pValue  ALIAS FOR $2;
	_date  DATE;
	_output NUMERIC;
    BEGIN
	_date := $3;
	IF _date IS NULL THEN
	    _date := &#39;now&#39;;
	END IF;

	IF pValue = 0 OR pValue IS NULL THEN
	    _output := 0;
	ELSE
	    SELECT pValue / round(curr_rate, 5)
		INTO  _output
		FROM  curr_rate
		WHERE curr_id = pId
		  AND _date BETWEEN curr_effective AND curr_expires;
	    IF (_output IS NULL OR NOT FOUND) THEN
	      RAISE EXCEPTION &#39;No exchange rate for % on %&#39;, pId, _date;
	    END IF;
	END IF;
	RETURN _output;
    END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.currtocurr-integer-integer-numeric-date">currtocurr( integer, integer, numeric, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
    DECLARE
	pFromCurr ALIAS FOR $1;
	pToCurr ALIAS FOR $2;
	pValue   ALIAS FOR $3;
	pEffective ALIAS FOR $4;
	_convertedValue NUMERIC;
	_fromRate NUMERIC;
	_toRate NUMERIC;
    BEGIN
	IF pFromCurr = pToCurr THEN
	    RETURN pValue;
	END IF;

	IF pValue = 0 OR pValue IS NULL THEN
	    RETURN 0;
	END IF;

	SELECT round(curr_rate, 5) INTO _fromRate
	FROM curr_rate
	WHERE curr_id = pFromCurr
	  AND pEffective BETWEEN curr_effective AND curr_expires;

	IF (NOT FOUND) THEN
	  RAISE EXCEPTION &#39;No exchange rate for % on %&#39;, pFromCurr, pEffective;
	END IF;

	SELECT round(curr_rate, 5) INTO _toRate
	FROM curr_rate
	WHERE curr_id = pToCurr
	  AND pEffective BETWEEN curr_effective AND curr_expires;

	IF (NOT FOUND) THEN
	  RAISE EXCEPTION &#39;No exchange rate for % on %&#39;, pToCurr, pEffective;
	END IF;

	_convertedValue := pValue * _toRate / _fromRate;

	RETURN _convertedValue;
    END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.currtolocal-integer-numeric-date">currtolocal( integer, numeric, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
    DECLARE
	pId     ALIAS FOR $1;
	pValue  ALIAS FOR $2;
	_date   DATE;
	_output NUMERIC;
    BEGIN
	_date := $3;
	IF _date IS NULL THEN
	    _date := &#39;now&#39;;
	END IF;

	IF pValue = 0 OR pValue IS NULL THEN
	    _output := 0;
	ELSE
	    SELECT pValue * round(curr_rate, 5)
		INTO  _output
		FROM  curr_rate
		WHERE curr_id = pId
		  AND _date BETWEEN curr_effective AND curr_expires;
	    IF (_output IS NULL OR NOT FOUND) THEN
	      RAISE EXCEPTION &#39;No exchange rate for % on %&#39;, pId, _date;
	    END IF;
	END IF;
	RETURN _output;
    END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.customercanpurchase-integer-integer">customercanpurchase( integer, integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pitemid ALIAS FOR $1;
  pCustid ALIAS FOR $2;

BEGIN
  RETURN customerCanPurchase(pitemid, pCustid, -1);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.customercanpurchase-integer-integer-integer">customercanpurchase( integer, integer, integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pitemid ALIAS FOR $1;
  pCustid ALIAS FOR $2;
  pShiptoid AlIAS FOR $3;
  _id INTEGER;
  _item RECORD;

BEGIN

  SELECT item_sold, item_exclusive
    INTO _item
    FROM item
   WHERE(item_id=pItemid);

--  Make sure that this is at least a sold Item
  IF (NOT _item.item_sold) THEN
    RETURN FALSE;
  END IF;

--  Everyone can purchase a non-exclusive item
  IF (NOT _item.item_exclusive) THEN
    RETURN TRUE;
  END IF;

  IF(pShiptoid != -1) THEN
--  Check for a shipto Assigned Price
    SELECT ipsprice_id INTO _id
      FROM ipsprice, ipshead, ipsass
     WHERE((ipsprice_ipshead_id=ipshead_id)
       AND (ipsass_ipshead_id=ipshead_id)
       AND (CURRENT_DATE BETWEEN ipshead_effective AND (ipshead_expires - 1))
       AND (ipsprice_item_id=pItemid)
       AND (ipsass_shipto_id != -1)
       AND (ipsass_shipto_id=pShiptoid))
     LIMIT 1;
    IF (FOUND) THEN
      RETURN TRUE;
    END IF;

--  Check for a Shipto Pattern Assigned Price
    SELECT ipsprice_id INTO _id
      FROM ipsprice, ipshead, ipsass, shipto
     WHERE((ipsprice_ipshead_id=ipshead_id)
       AND (ipsass_ipshead_id=ipshead_id)
       AND (CURRENT_DATE BETWEEN ipshead_effective AND (ipshead_expires - 1))
       AND (COALESCE(length(ipsass_shipto_pattern), 0) &gt; 0)
       AND (shipto_num ~ ipsass_shipto_pattern)
       AND (ipsass_cust_id=pCustid)
       AND (ipsprice_item_id=pItemid)
       AND (shipto_id=pShiptoid))
     LIMIT 1;
    IF (FOUND) THEN
      RETURN TRUE;
    END IF;
  END IF;

--  Check for a Customer Assigned Price
  SELECT ipsprice_id INTO _id
    FROM ipsprice, ipshead, ipsass
   WHERE((ipsprice_ipshead_id=ipshead_id)
     AND (ipsass_ipshead_id=ipshead_id)
     AND (CURRENT_DATE BETWEEN ipshead_effective AND (ipshead_expires - 1))
     AND (ipsprice_item_id=pItemid)
     AND (COALESCE(length(ipsass_shipto_pattern), 0) = 0)
     AND (ipsass_cust_id=pCustid))
   LIMIT 1;
  IF (FOUND) THEN
    RETURN TRUE;
  END IF;

--  Check for a Customer Type Assigned Price
  SELECT ipsprice_id INTO _id
    FROM ipsprice, ipshead, ipsass, cust
   WHERE( (ipsprice_ipshead_id=ipshead_id)
     AND  (ipsass_ipshead_id=ipshead_id)
     AND  (ipsass_custtype_id != -1)
     AND  (cust_custtype_id = ipsass_custtype_id)
     AND  (CURRENT_DATE BETWEEN ipshead_effective AND (ipshead_expires - 1))
     AND  (ipsprice_item_id=pItemid)
     AND  (cust_id=pCustid))
    LIMIT 1;
  IF (FOUND) THEN
    RETURN TRUE;
  END IF;

--  Check for a Customer Type Pattern Assigned Price
  SELECT ipsprice_id INTO _id
    FROM ipsprice, ipshead, ipsass, custtype, cust
   WHERE((ipsprice_ipshead_id=ipshead_id)
     AND (ipsass_ipshead_id=ipshead_id)
     AND (coalesce(length(ipsass_custtype_pattern), 0) &gt; 0)
     AND (custtype_code ~ ipsass_custtype_pattern)
     AND (cust_custtype_id=custtype_id)
     AND (CURRENT_DATE BETWEEN ipshead_effective AND (ipshead_expires - 1))
     AND (ipsprice_item_id=pItemid)
     AND (cust_id=pCustid))
   LIMIT 1;
  IF (FOUND) THEN
    RETURN TRUE;
  END IF;

--  That&#39;s it, Sales don&#39;t count - yet
  RETURN FALSE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.dearmor-text">dearmor( text )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: C</h3>
        
        <pre>pg_dearmor</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.decrypt-bytea-bytea-text">decrypt( bytea, bytea, text )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: C</h3>
        
        <pre>pg_decrypt</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.decrypt-iv-bytea-bytea-bytea-text">decrypt_iv( bytea, bytea, bytea, text )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: C</h3>
        
        <pre>pg_decrypt_iv</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.defaultlocationname-integer">defaultlocationname( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  _p RECORD;

BEGIN

  SELECT itemsite_location_id, itemsite_location INTO _p
  FROM itemsite
  WHERE (itemsite_id=pItemsiteid);

  IF (NOT FOUND) THEN
    RETURN &#39;Error&#39;;
  ELSIF (_p.itemsite_location_id = -1) THEN
    RETURN _p.itemsite_location;
  ELSE
    RETURN formatLocationName(_p.itemsite_location_id);
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteaccount-integer">deleteaccount( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pAccntid ALIAS FOR $1;
  _check INTEGER;

BEGIN

--  Check to see if the passed accnt is used in a Cost Category
  SELECT costcat_id INTO _check
  FROM costcat
  WHERE ( (costcat_asset_accnt_id=pAccntid)
     OR   (costcat_liability_accnt_id=pAccntid)
     OR   (costcat_adjustment_accnt_id=pAccntid)
     OR   (costcat_purchprice_accnt_id=pAccntid)
     OR   (costcat_laboroverhead_accnt_id=pAccntid)
     OR   (costcat_scrap_accnt_id=pAccntid)
     OR   (costcat_invcost_accnt_id=pAccntid)
     OR   (costcat_wip_accnt_id=pAccntid)
     OR   (costcat_shipasset_accnt_id=pAccntid)
     OR   (costcat_mfgscrap_accnt_id=pAccntid)
     OR   (costcat_transform_accnt_id=pAccntid)
     OR   (costcat_freight_accnt_id=pAccntid) )
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -1;
  END IF;

--  Check to see if the passed accnt is used in a Sales Account Assignment
  SELECT salesaccnt_id INTO _check
  FROM salesaccnt
  WHERE ( (salesaccnt_sales_accnt_id=pAccntid)
     OR   (salesaccnt_credit_accnt_id=pAccntid)
     OR   (salesaccnt_cos_accnt_id=pAccntid) )
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -2;
  END IF;

--  Check to see if the passed accnt is used in a A/R Account Assignment
  SELECT araccnt_id INTO _check
  FROM araccnt
  WHERE ( (araccnt_freight_accnt_id=pAccntid)
     OR   (araccnt_ar_accnt_id=pAccntid)
     OR   (araccnt_prepaid_accnt_id=pAccntid) )
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -3;
  END IF;

--  Check to see if the passed accnt is used in a Warehouse
  SELECT warehous_id INTO _check
  FROM warehous
  WHERE (warehous_default_accnt_id=pAccntid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -4;
  END IF;

--  Check to see if the passed accnt is used in a Bank Account
  SELECT bankaccnt_id INTO _check
  FROM bankaccnt
  WHERE (bankaccnt_accnt_id=pAccntid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -5;
  END IF;

--  Check to see if the passed accnt is used in an Expense Category
  SELECT expcat_id INTO _check
  FROM expcat
  WHERE ( (expcat_exp_accnt_id=pAccntid)
     OR   (expcat_liability_accnt_id=pAccntid)
     OR   (expcat_purchprice_accnt_id=pAccntid)
     OR   (expcat_freight_accnt_id=pAccntid) )
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -6;
  END IF;

--  Check to see if the passed accnt is used in a Tax Code
  SELECT tax_id INTO _check
  FROM tax
  WHERE ((tax_sales_accnt_id=pAccntid)
     OR  (tax_salesb_accnt_id=pAccntid)
     OR  (tax_salesc_accnt_id=pAccntid))
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -7;
  END IF;

--  Check to see if the passed accnt is used in a Standard Journal Item
  SELECT stdjrnlitem_id INTO _check
  FROM stdjrnlitem
  WHERE (stdjrnlitem_accnt_id=pAccntid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -8;
  END IF;

--  Check to see if the passed accnt is used in a A/P Account Assignment
  SELECT apaccnt_ap_accnt_id INTO _check
  FROM apaccnt
  WHERE ( (apaccnt_ap_accnt_id=pAccntid)
     OR   (apaccnt_prepaid_accnt_id=pAccntid)
     OR   (apaccnt_discount_accnt_id=pAccntid) )
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -9;
  END IF;

--  Check to see if the passed accnt is used in an A/R Open Item record
  SELECT aropen_accnt_id INTO _check
    FROM aropen
   WHERE (aropen_accnt_id=pAccntid)
   LIMIT 1;
  IF (FOUND) THEN
    RETURN -11;
  END IF;

--  Check to see if the passed accnt has been used in the G/L
  SELECT gltrans_accnt_id INTO _check
  FROM gltrans
  WHERE (gltrans_accnt_id=pAccntid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -99;
  END IF;

  SELECT glseries_accnt_id INTO _check
  FROM glseries
  WHERE (glseries_accnt_id=pAccntid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -99;
  END IF;

  SELECT trialbal_accnt_id INTO _check
  FROM trialbal
  WHERE (trialbal_accnt_id=pAccntid)
    AND (trialbal_beginning != 0 OR trialbal_ending != 0)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -99;
  END IF;

  SELECT cashrcptmisc_accnt_id INTO _check
  FROM cashrcptmisc
  WHERE (cashrcptmisc_accnt_id=pAccntid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -99;
  END IF;

  SELECT armemo_accnt_id INTO _check
  FROM armemo
  WHERE (armemo_accnt_id=pAccntid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -99;
  END IF;

--  Delete any non-critical use
  DELETE FROM flitem
  WHERE (flitem_accnt_id=pAccntid);

  -- only possible because of trialbal error-check above
  DELETE FROM trialbal
  WHERE (trialbal_accnt_id=pAccntid)
    AND (trialbal_beginning=0)
    AND (trialbal_ending=0);

--  Delete the Account
  DELETE FROM accnt
  WHERE (accnt_id=pAccntid);

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteaccountingperiod-integer">deleteaccountingperiod( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPeriodid ALIAS FOR $1;
  _check RECORD;

BEGIN

--  Check to make sure that the passed period is not closed
  IF ( ( SELECT period_closed
         FROM period
         WHERE (period_id=pPeriodid) ) ) THEN
    RETURN -1;
  END IF;

--  Check to make sure that there are not any posted G/L Transactions
--  in the period.
  SELECT gltrans_id INTO _check
  FROM gltrans, period
  WHERE ( (gltrans_date BETWEEN period_start AND period_end)
   AND (gltrans_posted)
   AND (period_id=pPeriodid) )
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -4;
  END IF;

--  Delete the period
  DELETE FROM period
  WHERE (period_id=pPeriodid);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteaccountingyearperiod-integer">deleteaccountingyearperiod( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPeriodid ALIAS FOR $1;
  _check RECORD;

BEGIN

--  Check to make sure that the passed yearperiod is not closed
  IF ( ( SELECT yearperiod_closed
         FROM yearperiod
         WHERE (yearperiod_id=pPeriodid) ) ) THEN
    RETURN -1;
  END IF;

  -- this yearperiod is in use by existing periods
  IF (EXISTS(SELECT period_id
	     FROM period
	     WHERE (period_yearperiod_id=pPeriodid))) THEN
    RETURN -2;
  END IF;

--  Delete the yearperiod
  DELETE FROM yearperiod
  WHERE (yearperiod_id=pPeriodid);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteaddress-integer">deleteaddress( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    paddrId     ALIAS FOR $1;
    _count      INTEGER := 0;
  BEGIN
    SELECT count(*) INTO _count
      FROM cntct
      WHERE (cntct_active
        AND  (cntct_addr_id = paddrId));
    IF (_count &gt; 0) THEN
      RETURN -1;
    END IF;

    SELECT count(*) INTO _count
      FROM vendinfo
      WHERE (vend_active
        AND  (vend_addr_id = paddrId));
    IF (_count &gt; 0) THEN
      RETURN -2;
    END IF;

    SELECT count(*) INTO _count
      FROM shiptoinfo
      WHERE (shipto_active
        AND  (shipto_addr_id = paddrId));
    IF (_count &gt; 0) THEN
      RETURN -3;
    END IF;

    SELECT count(*) INTO _count
      FROM vendaddrinfo
      WHERE (vendaddr_addr_id = paddrId);
    IF (_count &gt; 0) THEN
      RETURN -4;
    END IF;

    SELECT count(*) INTO _count
      FROM whsinfo
      WHERE (warehous_active
        AND  (warehous_addr_id = paddrId));
    IF (_count &gt; 0) THEN
      RETURN -5;
    END IF;

    UPDATE cntct SET cntct_addr_id = NULL WHERE (cntct_addr_id = paddrId);
    UPDATE vendinfo SET vend_addr_id = NULL WHERE (vend_addr_id = paddrId);
    UPDATE shiptoinfo SET shipto_addr_id = NULL WHERE (shipto_addr_id =paddrId);
    UPDATE vendaddrinfo SET vendaddr_addr_id = NULL
      WHERE (vendaddr_addr_id = paddrId);
    UPDATE whsinfo SET warehous_addr_id = NULL WHERE (warehous_addr_id=paddrId);

    DELETE FROM addr WHERE addr_id = paddrId;
    RETURN 0;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteapcheck-integer">deleteapcheck( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RAISE NOTICE &#39;deleteAPCheck() is deprecated - use deleteCheck() instead&#39;;
  RETURN deleteCheck($1);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletebankadjustmenttype-integer">deletebankadjustmenttype( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBankadjtypeid ALIAS FOR $1;
  _check INTEGER;

BEGIN

-- Check to see if the the adjustment type is being used in any adjustments
  SELECT bankadj_bankadjtype_id INTO _check
    FROM bankadj
   WHERE (bankadj_bankadjtype_id=pBankadjtypeid)
   LIMIT 1;
  IF (FOUND) THEN
    RETURN -1;
  END IF;

--  Delete the Account
  DELETE FROM bankadjtype 
  WHERE (bankadjtype_id=pbankadjtypeid);

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletebankreconciliation-integer">deletebankreconciliation( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pbankrecid	ALIAS FOR $1;
BEGIN
  DELETE FROM bankrecitem
  WHERE bankrecitem_bankrec_id=pbankrecid;

  DELETE FROM bankrec
  WHERE bankrec_id=pbankrecid;

  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletebom-integer">deletebom( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  _result INTEGER;

BEGIN

  IF (fetchmetricbool(&#39;RevControl&#39;)) THEN
    SELECT rev_id INTO _result
    FROM rev
    WHERE ((rev_target_id=pItemid)
    AND (rev_target_type = &#39;BOM&#39;))
    LIMIT 1;
    IF (FOUND) THEN
      RAISE EXCEPTION &#39;Bill of Materials has revision control records and may not be deleted.&#39;;
    END IF;
  END IF;

  DELETE FROM bomhead
  WHERE (bomhead_item_id=pItemid);
  DELETE FROM bomitem
  WHERE (bomitem_parent_item_id=pItemid);

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletebomworkset-integer">deletebomworkset( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWorksetid ALIAS FOR $1;

BEGIN

--  All done with the bomwork set indicated by pWorksetid, delete all of it
  DELETE FROM bomwork
  WHERE (bomwork_set_id=pWorksetid);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletebudget-integer">deletebudget( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBudgheadid ALIAS FOR $1;

BEGIN
  DELETE FROM budgitem WHERE (budgitem_budghead_id=pBudgheadid);
  DELETE FROM budghead WHERE (budghead_id=pBudgheadid);

  RETURN pBudgheadid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletecashrcpt-integer">deletecashrcpt( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pcashrcptid ALIAS FOR $1;
  _ccreceipt    BOOLEAN;

BEGIN

  IF EXISTS(SELECT cashrcpt_id
            FROM cashrcpt, ccpay
            WHERE ((cashrcpt_fundstype IN (&#39;A&#39;, &#39;D&#39;, &#39;M&#39;, &#39;V&#39;))
               AND ((CASE WHEN(TRIM(both from COALESCE(cashrcpt_docnumber, &#39;&#39;))=&#39;&#39;) THEN text(cashrcpt_id) ELSE cashrcpt_docnumber END)=ccpay_order_number)
               AND (ccpay_status NOT IN (&#39;D&#39;, &#39;X&#39;))
               AND (cashrcpt_id=pcashrcptid))) THEN
    RETURN -1;
  END IF;

  DELETE FROM cashrcptitem
  WHERE (cashrcptitem_cashrcpt_id=pcashrcptid);

  DELETE FROM cashrcptmisc
  WHERE (cashrcptmisc_cashrcpt_id=pcashrcptid);

  DELETE FROM cashrcpt
  WHERE (cashrcpt_id=pcashrcptid);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletecharacteristic-integer">deletecharacteristic( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCharid ALIAS FOR $1;
  _check INTEGER;
  _r RECORD;

BEGIN

--  Cache the specifics of the characteristic
  SELECT * INTO _r
  FROM char
  WHERE (char_id=pCharid);
  IF (NOT(FOUND)) THEN
    RETURN 0;
  END IF;

--  If the passed characteristic is used
  SELECT * INTO _r
  FROM charass
  WHERE (charass_char_id=pCharid)
  LIMIT 1;
  IF (FOUND) THEN
    IF (_r.charass_target_type = &#39;I&#39;) THEN
      RETURN -1;
    ELSIF (_r.charass_target_type = &#39;C&#39;) THEN
      RETURN -2;
    ELSIF (_r.charass_target_type = &#39;ADDR&#39;) THEN
      RETURN -3;
    ELSIF (_r.charass_target_type = &#39;CNTCT&#39;) THEN
      RETURN -4;
    ELSIF (_r.charass_target_type = &#39;CRMACCT&#39;) THEN
      RETURN -5;
    ELSE
      RETURN -99;
    END IF;
  END IF;

--  Delete the passed characterisitic
  DELETE FROM char
  WHERE (char_id=pCharid);

  RETURN pCharid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletecheck-integer">deletecheck( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCheckid ALIAS FOR $1;

BEGIN
  IF (SELECT (NOT checkhead_void) OR checkhead_posted OR checkhead_replaced
              OR checkhead_deleted
              OR (checkhead_ach_batch IS NOT NULL AND checkhead_printed)
      FROM checkhead
      WHERE (checkhead_id=pCheckid) ) THEN
    RETURN -1;
  END IF;

  UPDATE checkhead
  SET checkhead_deleted=TRUE
  WHERE (checkhead_id=pCheckid);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteclasscode-integer">deleteclasscode( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pClasscodeid ALIAS FOR $1;
  _check INTEGER;

BEGIN

--  Check to see if any items are assigned to the passed classcode
  SELECT item_id INTO _check
  FROM item
  WHERE (item_classcode_id=pClasscodeid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -1;
  END IF;

--  Delete the passed classcode
  DELETE FROM classcode
  WHERE (classcode_id=pClasscodeid);

  RETURN pClasscodeid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletecompany-integer">deletecompany( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pcompanyid ALIAS FOR $1;

BEGIN
  IF (EXISTS(SELECT accnt_id
             FROM accnt, company
             WHERE ((accnt_company=company_number)
               AND  (company_id=pcompanyid))
            )) THEN
    RETURN -1;
  END IF;

  DELETE FROM company
  WHERE (company_id=pcompanyid);

  RETURN pcompanyid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletecontact-integer">deletecontact( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    pcntctId    ALIAS FOR $1;
    _count      INTEGER := 0;
  BEGIN
    SELECT count(*) INTO _count
      FROM crmAcct
      WHERE (crmAcct_active
        AND ((crmacct_cntct_id_1 = pcntctId)
         OR  (crmacct_cntct_id_2 = pcntctId)) );
    IF (_count &gt; 0) THEN
      RETURN -1;
    END IF;

    SELECT count(*) INTO _count
      FROM custinfo
      WHERE (cust_active
        AND ((cust_cntct_id = pcntctId)
         OR  (cust_corrcntct_id = pcntctId)) );
    IF (_count &gt; 0) THEN
      RETURN -2;
    END IF;

    SELECT count(*) INTO _count
      FROM vendinfo
      WHERE (vend_active
        AND ((vend_cntct1_id = pcntctId) OR (vend_cntct2_id = pcntctId)));
    IF (_count &gt; 0) THEN
      RETURN -3;
    END IF;

    SELECT count(*) INTO _count
      FROM shiptoinfo
      WHERE (shipto_active
        AND (shipto_cntct_id = pcntctId));
    IF (_count &gt; 0) THEN
      RETURN -4;
    END IF;

    SELECT count(*) INTO _count
      FROM vendaddrinfo
      WHERE (vendaddr_cntct_id = pcntctId);
    IF (_count &gt; 0) THEN
      RETURN -5;
    END IF;

    SELECT count(*) INTO _count
      FROM whsinfo
      WHERE (warehous_active
        AND (warehous_cntct_id = pcntctId));
    IF (_count &gt; 0) THEN
      RETURN -6;
    END IF;


    UPDATE crmAcct SET crmacct_cntct_id_1 = NULL
      WHERE (crmacct_cntct_id_1 = pcntctId);
    UPDATE crmAcct SET crmacct_cntct_id_2 = NULL
      WHERE (crmacct_cntct_id_2 = pcntctId);
    UPDATE custinfo SET cust_cntct_id = NULL
      WHERE (cust_cntct_id = pcntctId);
    UPDATE custinfo SET cust_corrcntct_id = NULL
      WHERE (cust_corrcntct_id = pcntctId);
    UPDATE vendinfo SET vend_cntct1_id = NULL
      WHERE (vend_cntct1_id = pcntctId);
    UPDATE vendinfo SET vend_cntct2_id = NULL
      WHERE (vend_cntct2_id = pcntctId);
    UPDATE shiptoinfo SET shipto_cntct_id = NULL
      WHERE (shipto_cntct_id = pcntctId);
    UPDATE vendaddrinfo SET vendaddr_cntct_id = NULL
      WHERE (vendaddr_cntct_id = pcntctId);
    UPDATE whsinfo SET warehous_cntct_id = NULL
      WHERE (warehous_cntct_id = pcntctId);

    DELETE FROM cntct WHERE cntct_id = pcntctId;
    RETURN 0;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletecreditmemo-integer">deletecreditmemo( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCmheadid ALIAS FOR $1;

BEGIN

  DELETE FROM cmitem
  WHERE (cmitem_cmhead_id=pCmheadid);

  DELETE FROM cmhead
  WHERE (cmhead_id=pCmheadid);

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletecrmaccount-integer">deletecrmaccount( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    pcrmacctId  ALIAS FOR $1;
    _r          RECORD;
    _count      INTEGER := 0;
  BEGIN
    SELECT * FROM crmacct INTO _r WHERE (crmacct_id=pcrmacctId);

    -- allow the delete if this crmacct has one or more relationships
    -- but other crmaccts claim them all

    IF (_r.crmacct_cust_id IS NOT NULL AND NOT EXISTS(
                    SELECT crmacct_id
                    FROM crmacct
                    WHERE ((crmacct_cust_id=_r.crmacct_cust_id)
                      AND  (crmacct_id&lt;&gt;pcrmacctId)))) THEN
      RETURN -1;
    END IF;

    IF (_r.crmacct_vend_id IS NOT NULL AND NOT EXISTS(
                    SELECT crmacct_id
                    FROM crmacct
                    WHERE ((crmacct_vend_id=_r.crmacct_vend_id)
                      AND  (crmacct_id&lt;&gt;pcrmacctId)))) THEN
      RETURN -2;
    END IF;

    IF (_r.crmacct_prospect_id IS NOT NULL AND NOT EXISTS(
                    SELECT crmacct_id
                    FROM crmacct
                    WHERE ((crmacct_prospect_id=_r.crmacct_prospect_id)
                      AND  (crmacct_id&lt;&gt;pcrmacctId)))) THEN
      RETURN -3;
    END IF;

    IF (_r.crmacct_cntct_id_1 IS NOT NULL OR
        _r.crmacct_cntct_id_2 IS NOT NULL OR
        EXISTS(SELECT cntct_id FROM cntct WHERE cntct_crmacct_id = pcrmacctId)
        ) THEN
      RETURN -4;
    END IF;

    IF (_r.crmacct_taxauth_id IS NOT NULL AND NOT EXISTS(
                    SELECT crmacct_id
                    FROM crmacct
                    WHERE ((crmacct_taxauth_id=_r.crmacct_taxauth_id)
                      AND  (crmacct_id&lt;&gt;pcrmacctId)))) THEN
      RETURN -5;
    END IF;

    DELETE FROM crmacct WHERE crmacct_id = pcrmacctId;
    RETURN 0;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletecustomer-integer">deletecustomer( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;

BEGIN

  PERFORM shipto_id
  FROM shipto
  WHERE (shipto_cust_id=pCustid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -1;
  END IF;

  PERFORM cohead_id
  FROM cohead
  WHERE (cohead_cust_id=pCustid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -2;
  END IF;

  PERFORM cmhead_id
  FROM cmhead
  WHERE (cmhead_cust_id=pCustid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -3;
  END IF;

  PERFORM cohist_id
  FROM cohist
  WHERE (cohist_cust_id=pCustid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -4;
  END IF;

  PERFORM aropen_id
  FROM aropen
  WHERE (aropen_cust_id=pCustid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -5;
  END IF;

  PERFORM checkhead_recip_id
    FROM checkhead
   WHERE ((checkhead_recip_id=pCustid)
     AND  (checkhead_recip_type=&#39;C&#39;))
   LIMIT 1;
   IF (FOUND) THEN
     RETURN -6;
   END IF;

  PERFORM invchead_id
     FROM invchead
    WHERE(invchead_cust_id=pCustid)
    LIMIT 1;
  IF (FOUND) THEN
    RETURN -7;
  END IF;

  PERFORM quhead_id
     FROM quhead
    WHERE(quhead_cust_id=pCustid)
    LIMIT 1;
  IF (FOUND) THEN
    RETURN -8;
  END IF;

  DELETE FROM taxreg
   WHERE ((taxreg_rel_type=&#39;C&#39;)
     AND  (taxreg_rel_id=pCustid));

  DELETE FROM ipsass
  WHERE (ipsass_cust_id=pCustid);

  DELETE FROM custinfo
  WHERE (cust_id=pCustid);

  UPDATE crmacct SET crmacct_cust_id = NULL
  WHERE (crmacct_cust_id=pCustid);

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletecustomertype-integer">deletecustomertype( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCusttypeid ALIAS FOR $1;

BEGIN

--  Check to see if any customers are assigned to the passed custype
  PERFORM cust_id
  FROM cust
  WHERE (cust_custtype_id=pCusttypeid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -1;
  END IF;

--  Delete all entries in referring tables
  DELETE FROM ipsass
  WHERE (ipsass_custtype_id=pCusttypeid);

  DELETE FROM salesaccnt
  WHERE (salesaccnt_custtype_id=pCusttypeid);

  DELETE FROM araccnt
  WHERE (araccnt_custtype_id=pCusttypeid);

  DELETE FROM custform
  WHERE (custform_custtype_id=pCusttypeid);

--  Delete the passed custtype
  DELETE FROM custtype
  WHERE (custtype_id=pCusttypeid);

  RETURN pCusttypeid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteemp-integer">deleteemp( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pEmpid ALIAS FOR $1;
  _count        INTEGER;

BEGIN
  UPDATE salesrep  SET salesrep_emp_id = NULL WHERE (salesrep_emp_id=pEmpid);
  DELETE FROM emp WHERE (emp_id=pEmpid);

  RETURN 1;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteempgrp-integer">deleteempgrp( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pempgrpid ALIAS FOR $1;

BEGIN
  DELETE FROM empgrpitem WHERE (empgrpitem_empgrp_id=pempgrpid);
  DELETE FROM empgrp     WHERE (empgrp_id=pempgrpid);

  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteflgrp-integer">deleteflgrp( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pFlgrpid ALIAS FOR $1;
  _r RECORD;

BEGIN

  FOR _r IN SELECT flgrp_id
            FROM flgrp
            WHERE (flgrp_flgrp_id=pFlgrpid) LOOP
    PERFORM deleteFlgrp(_r.flgrp_id);
  END LOOP;

  DELETE FROM flitem
  WHERE (flitem_flgrp_id=pFlgrpid);

  DELETE FROM flspec
  WHERE (flspec_flgrp_id=pFlgrpid);

  DELETE FROM flgrp
  WHERE (flgrp_id=pFlgrpid);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteform-integer">deleteform( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pFormid ALIAS FOR $1;
  _key TEXT;
  _check INTEGER;

BEGIN

--  Cache the key of the passed form
  SELECT form_key INTO _key
  FROM form
  WHERE (form_id=pFormid);
  IF (NOT(FOUND)) THEN
    RETURN 0;
  END IF;

--  Handle checks based on the type of the form
  IF (_key=&#39;Chck&#39;) THEN
    SELECT bankaccnt_id INTO _check
    FROM bankaccnt
    WHERE (bankaccnt_check_form_id=pFormid)
    LIMIT 1;
    IF (FOUND) THEN
      RETURN -1;
    END IF;

  END IF;

--  Delete the form
  DELETE FROM form
  WHERE (form_id=pFormid);

  RETURN pFormid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletefreightclass-integer">deletefreightclass( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pFreightClassid ALIAS FOR $1;
  _check INTEGER;

BEGIN

--  Check to see if any items are assigned to the passed freightclass
  SELECT item_id INTO _check
  FROM item
  WHERE (item_freightclass_id=pFreightClassid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -1;
  END IF;

--  Delete the passed freightclass
  DELETE FROM freightclass
  WHERE (freightclass_id=pFreightClassid);

  RETURN pFreightClassid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteglseries-integer">deleteglseries( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSequence ALIAS FOR $1;

BEGIN

  DELETE FROM glseries
  WHERE (glseries_sequence=pSequence);

  RETURN pSequence;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteincident-integer">deleteincident( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    pincdtid    ALIAS FOR $1;
    _count      INTEGER := 0;
  BEGIN
    SELECT COUNT(*) INTO _count
    FROM todoitem
    WHERE (todoitem_incdt_id=pincdtid);
    IF (_count &gt; 0) THEN
      RETURN -1;
    END IF;

    DELETE FROM comment
     WHERE((comment_source=&#39;INCDT&#39;)
       AND (comment_source_id=pincdtid));

    DELETE FROM incdthist
     WHERE (incdthist_incdt_id=pincdtid);

    DELETE FROM imageass
    WHERE ((imageass_source=&#39;INCDT&#39;)
       AND (imageass_source_id=pincdtid));

    DELETE FROM url
    WHERE ((url_source=&#39;INCDT&#39;)
       AND (url_source_id=pincdtid));

    PERFORM releaseIncidentNumber(incdt_number)
    FROM incdt
    WHERE (incdt_id=pincdtid);
    RAISE NOTICE &#39;called releaseIncidentNumber&#39;;

    DELETE FROM incdt
      WHERE (incdt_id=pincdtid);

    RETURN 0;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteinvoice-integer">deleteinvoice( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pInvcheadid ALIAS FOR $1;

BEGIN
  UPDATE shipitem SET shipitem_invoiced=FALSE, shipitem_invcitem_id=NULL
  FROM invcitem
  WHERE ((shipitem_invoiced)
    AND  (shipitem_invcitem_id=invcitem_id)
    AND  (invcitem_invchead_id=pInvcheadid));

  UPDATE coitem SET coitem_status = &#39;O&#39;
  WHERE ((coitem_status = &#39;C&#39;)
    AND  (coitem_id IN (SELECT cobill_coitem_id
		        FROM cobill, invcitem
			WHERE ((cobill_invcitem_id=invcitem_id)
			  AND  (invcitem_invchead_id=pInvcheadid)))));

  UPDATE cobill SET cobill_invcnum=NULL, cobill_invcitem_id=NULL
  FROM invcitem
  WHERE ((cobill_invcitem_id=invcitem_id)
    AND  (invcitem_invchead_id=pInvcheadid));

  UPDATE cobmisc SET cobmisc_invcnumber=NULL, cobmisc_invchead_id=NULL,
		     cobmisc_posted=FALSE
  WHERE (cobmisc_invchead_id=pInvcheadid);

  DELETE FROM invcitem
  WHERE (invcitem_invchead_id=pInvcheadid);

  DELETE FROM invchead
  WHERE (invchead_id=pInvcheadid);

  RETURN pInvcheadid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteipsitem-integer">deleteipsitem( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pIpsItemId    ALIAS FOR $1;
BEGIN

  DELETE FROM ipsitem WHERE ipsitem_id=pIpsItemId;

  RETURN 1;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteipsprodcat-integer">deleteipsprodcat( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pIpsProdCatId	ALIAS FOR $1;
BEGIN

  DELETE FROM ipsprodcat WHERE ipsprodcat_id=pIpsProdCatId;
  
  RETURN 1;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteitem-integer">deleteitem( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  _result INTEGER;
  _routings BOOLEAN;
  _bbom BOOLEAN;

BEGIN

  SELECT metric_value=&#39;t&#39; INTO _bbom
    FROM metric
   WHERE (metric_name=&#39;BBOM&#39;);

  SELECT metric_value=&#39;t&#39; INTO _routings
    FROM metric
   WHERE (metric_name=&#39;Routings&#39;);

  SELECT bomitem_id INTO _result
  FROM bomitem
  WHERE (bomitem_item_id=pItemid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -1;
  END IF;

  SELECT itemsite_id INTO _result
  FROM itemsite
  WHERE (itemsite_item_id=pItemid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -2;
  END IF;

  SELECT itemsub_id INTO _result
  FROM itemsub
  WHERE (itemsub_sub_item_id=pItemid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -3;
  END IF;

  IF(_bbom) THEN
    SELECT bbomitem_id INTO _result
    FROM bbomitem
    WHERE (bbomitem_item_id=pItemid)
    LIMIT 1;
    IF (FOUND) THEN
      RETURN -4;
    END IF;
  END IF;

  SELECT assitem_id INTO _result
  FROM assitem
  WHERE (assitem_item_id=pItemid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -5;
  END IF;

  IF (fetchmetricbool(&#39;RevControl&#39;)) THEN
    SELECT rev_id INTO _result
    FROM rev
    WHERE ((rev_target_id=pItemid)
    AND (rev_target_type IN (&#39;BOM&#39;,&#39;BOO&#39;)))
    LIMIT 1;
    IF (FOUND) THEN
      RETURN -6;
    END IF;
  END IF;

  DELETE FROM bomhead
  WHERE (bomhead_item_id=pItemid);
  DELETE FROM bomitem
  WHERE (bomitem_item_id=pItemid);

  IF (_routings) THEN
    DELETE FROM boohead
    WHERE (boohead_item_id=pItemid);
  END IF;

  IF (_bbom) THEN
    DELETE FROM bbomitem
    WHERE (bbomitem_parent_item_id=pItemid);
    DELETE FROM bbomitem
    WHERE (bbomitem_item_id=pItemid);
  END IF;

  DELETE FROM asshead
  WHERE (asshead_item_id=pItemid);
  DELETE FROM assitem
  WHERE (assitem_parent_item_id=pItemid);
  DELETE FROM assitem
  WHERE (assitem_item_id=pItemid);

  DELETE FROM itemcost
  WHERE (itemcost_item_id=pItemid);
  DELETE FROM costhist
  WHERE (costhist_item_id=pItemid);

  DELETE FROM itemsub
  WHERE (itemsub_parent_item_id=pItemid);
  DELETE FROM itemsub
  WHERE (itemsub_sub_item_id=pItemid);

  DELETE FROM itemsrcp
  WHERE (itemsrcp_itemsrc_id IN (SELECT itemsrc_id FROM itemsrc WHERE (itemsrc_item_id=pItemid)));
  DELETE FROM itemsrc
  WHERE (itemsrc_item_id=pItemid);

  DELETE FROM itemalias
  WHERE (itemalias_item_id=pItemid);

  DELETE FROM itemgrpitem
  WHERE (itemgrpitem_item_id=pItemid);

  DELETE FROM ipsitem
  WHERE (ipsitem_item_id=pItemid);

  DELETE FROM imageass
  WHERE ( (imageass_source=&#39;I&#39;)
    AND   (imageass_source_id=pItemid) );

  DELETE FROM locitem
  WHERE (locitem_item_id=pItemid);

  DELETE FROM itemtax
   WHERE(itemtax_item_id=pItemid);

  DELETE FROM itemsite
  WHERE (itemsite_item_id=pItemid);

  DELETE FROM itemuom
   WHERE(itemuom_itemuomconv_id IN (SELECT itemuomconv_id
                                      FROM itemuomconv
                                     WHERE(itemuomconv_item_id=pItemid)));

  DELETE FROM itemuomconv
   WHERE(itemuomconv_item_id=pItemid);

  DELETE FROM item
  WHERE (item_id=pItemid);

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteitemcost-integer-integer">deleteitemcost( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemId ALIAS FOR $1;
  pCostElemId ALIAS FOR $2;
  _itemcost_id INTEGER;
  _postcost_return BOOLEAN;
  _std_cost NUMERIC;

BEGIN
  SELECT itemcost_id INTO _itemcost_id
  FROM itemcost
  WHERE ( (itemcost_item_id = pItemId) AND (itemcost_costelem_id = pCostElemId) );

  IF (NOT FOUND) THEN
	RAISE EXCEPTION &#39;itemcost % not found for. &#39;, pItemId || &#39; &amp; &#39; || pCostElemId;
  END IF;

  SELECT itemcost_stdcost INTO _std_cost
  FROM itemcost
  WHERE (itemcost_id = _itemcost_id);

  IF (_std_cost &gt; 0) THEN
--Actual Cost is updated to zero to ensure inventory is valued correctly
    SELECT updateCost(_itemcost_id, 0);
  END IF;

  DELETE FROM itemcost
  WHERE (itemcost_id=_itemcost_id);
 
  RETURN _itemcost_id;	

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteitemsite-integer">deleteitemsite( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  _result INTEGER;
  _lotserial BOOLEAN;
  _bbom BOOLEAN;
  _openmfg BOOLEAN;

BEGIN

  IF ( ( SELECT ( (itemsite_qtyonhand &lt;&gt; 0) OR (itemsite_nnqoh &lt;&gt; 0) )
         FROM itemsite
         WHERE (itemsite_id=pItemsiteid) ) ) THEN
    RETURN -9;
  END IF;

  SELECT metric_value=&#39;t&#39; INTO _bbom
    FROM metric
   WHERE (metric_name=&#39;BBOM&#39;);

  SELECT metric_value=&#39;t&#39; INTO _lotserial
    FROM metric
   WHERE (metric_name=&#39;LotSerialControl&#39;);

  SELECT metric_value=&#39;OpenMFG&#39; INTO _openmfg
    FROM metric
   WHERE (metric_name=&#39;Application&#39;);

  SELECT invhist_id INTO _result
  FROM invhist
  WHERE (invhist_itemsite_id=pItemsiteid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -1;
  END IF;

  IF (_lotserial) THEN
    SELECT lsdetail_id INTO _result
    FROM lsdetail
    WHERE (lsdetail_itemsite_id=pItemsiteid)
    LIMIT 1;
    IF (FOUND) THEN
      RETURN -1;
    END IF;
  END IF;

  SELECT wo_id INTO _result
  FROM wo
  WHERE (wo_itemsite_id=pItemsiteid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -2;
  END IF;

  SELECT womatl_id INTO _result
  FROM womatl
  WHERE (womatl_itemsite_id=pItemsiteid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -2;
  END IF;

  SELECT womatlvar_id INTO _result
  FROM womatlvar
  WHERE ( (womatlvar_parent_itemsite_id=pItemsiteid)
   OR (womatlvar_component_itemsite_id=pItemsiteid) )
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -2;
  END IF;

  SELECT woopervar_id INTO _result
  FROM woopervar
  WHERE (woopervar_parent_itemsite_id=pItemsiteid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -2;
  END IF;

  IF (_bbom) THEN
    SELECT brdvar_id INTO _result
    FROM brdvar
    WHERE ( (brdvar_itemsite_id=pItemsiteid)
     OR (brdvar_parent_itemsite_id=pItemsiteid) )
    LIMIT 1;
    IF (FOUND) THEN
      RETURN -2;
    END IF;
  END IF;

  SELECT coitem_id INTO _result
  FROM coitem
  WHERE (coitem_itemsite_id=pItemsiteid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -3;
  END IF;

  SELECT cohist_id INTO _result
  FROM cohist
  WHERE (cohist_itemsite_id=pItemsiteid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -3;
  END IF;

  SELECT quitem_id INTO _result
  FROM quitem
  WHERE (quitem_itemsite_id=pItemsiteid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -3;
  END IF;

  SELECT cmitem_id INTO _result
  FROM cmitem
  WHERE (cmitem_itemsite_id=pItemsiteid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -3;
  END IF;


  SELECT poitem_id INTO _result
  FROM poitem
  WHERE (poitem_itemsite_id=pItemsiteid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -4;
  END IF;

  SELECT recv_id INTO _result
  FROM recv
  WHERE (recv_itemsite_id=pItemsiteid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -4;
  END IF;

  SELECT poreject_id INTO _result
  FROM poreject
  WHERE (poreject_itemsite_id=pItemsiteid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -4;
  END IF;

  SELECT pr_id INTO _result
  FROM pr
  WHERE (pr_itemsite_id=pItemsiteid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -4;
  END IF;

  IF (_openmfg) THEN
    SELECT planord_id INTO _result
    FROM planord
    WHERE (planord_itemsite_id=pItemsiteid)
    LIMIT 1;
    IF (FOUND) THEN
      RETURN -5;
    END IF;
  END IF;

  IF (_openmfg) THEN
    SELECT pschitem_id INTO _result
    FROM pschitem
    WHERE (pschitem_itemsite_id=pItemsiteid)
    LIMIT 1;
    IF (FOUND) THEN
      RETURN -6;
    END IF;
  END IF;

  DELETE FROM invcnt
  WHERE (invcnt_itemsite_id=pItemsiteid);

  DELETE FROM itemloc
  WHERE (itemloc_itemsite_id=pItemsiteid);
  DELETE FROM itemlocdist
  WHERE (itemlocdist_itemsite_id=pItemsiteid);

  DELETE FROM brddist
  WHERE (brddist_itemsite_id=pItemsiteid);

  DELETE FROM itemsite
  WHERE (itemsite_id=pItemsiteid);

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteitemuom-integer">deleteitemuom( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemuomid ALIAS FOR $1;

BEGIN
  DELETE FROM itemuom WHERE itemuom_id=pItemuomid;

  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteitemuomconv-integer">deleteitemuomconv( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemuomconvid ALIAS FOR $1;
  _fromuomid     INTEGER;
  _invuomid      INTEGER;
  _itemid        INTEGER;
  _touomid       INTEGER;

BEGIN
  SELECT itemuomconv_item_id, item_inv_uom_id,
         itemuomconv_from_uom_id, itemuomconv_to_uom_id
          INTO _itemid, _invuomid, _fromuomid, _touomid
  FROM itemuomconv JOIN item ON (itemuomconv_item_id=item_id)
  WHERE (itemuomconv_id=pItemuomconvid);

  IF EXISTS(SELECT *
            FROM uomusedforitem(_itemid)
            WHERE ((uom_id IN (_fromuomid, _touomid))
               AND (uom_id != _invuomid)) ) THEN
    RETURN -1;
  END IF;

  DELETE FROM itemuom WHERE itemuom_itemuomconv_id=pItemuomconvid;
  DELETE FROM itemuomconv WHERE itemuomconv_id=pItemuomconvid;

  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletelocation-integer">deletelocation( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pLocationid ALIAS FOR $1;
  _check INTEGER;

BEGIN

--  Check to see if any itemsite used the passed location as their default
  SELECT itemsite_id INTO _check
  FROM itemsite
  WHERE (itemsite_location_id=pLocationid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -1;
  END IF;

--  Check to see if any inventory is currently stored at the passed location
  SELECT itemloc_id INTO _check
  FROM itemloc
  WHERE (itemloc_location_id=pLocationid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -2;
  END IF;

--  Check to see if any undistributed inventory transactions are currently posted at the passed location
  SELECT itemlocdist_id INTO _check
  FROM itemlocdist
  WHERE ( (itemlocdist_source_type=&#39;L&#39;)
  AND (itemlocdist_source_id=pLocationid) )
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -3;
  END IF;

--  Check to see if the passed location has any Inventory Detail posted against it
  SELECT invdetail_id INTO _check
  FROM invdetail
  WHERE (invdetail_location_id=pLocationid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -4;
  END IF;

--  Delete any associated locitem records
  DELETE FROM locitem
  WHERE (locitem_location_id=pLocationid);

--  Delete the location record
  DELETE FROM location
  WHERE (location_id=pLocationid);

  RETURN pLocationid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteopportunity-integer">deleteopportunity( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pOpheadid ALIAS FOR $1;
  _test INTEGER;
BEGIN

  SELECT todoitem_id INTO _test
    FROM todoitem
   WHERE(todoitem_ophead_id=pOpheadid)
   LIMIT 1;
  IF(FOUND) THEN
    RETURN -1;
  END IF;

  DELETE
    FROM charass
   WHERE((charass_target_type=&#39;OPP&#39;)
     AND (charass_target_id=pOpheadid));

  DELETE
    FROM comment
   WHERE((comment_source=&#39;OPP&#39;)
     AND (comment_source_id=pOpheadid));

  DELETE
    FROM ophead
   WHERE(ophead_id=pOpheadid);
  
  return 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletepackage-integer">deletepackage( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  ppkgheadid    ALIAS FOR $1;
  _i            INTEGER := 0;
  _pkgname      TEXT;
  _r            RECORD;
  _tabs         TEXT[] := ARRAY[&#39;cmd&#39;,  &#39;cmdarg&#39;, &#39;image&#39;,  &#39;metasql&#39;,
                                &#39;priv&#39;, &#39;report&#39;, &#39;script&#39;, &#39;uiform&#39;];
  _debug        BOOL := false;

BEGIN
  IF (EXISTS(SELECT *
             FROM pkgdep
             WHERE (pkgdep_parent_pkghead_id=ppkgheadid))) THEN
    RETURN -1;
  END IF;

  SELECT pkghead_name INTO _pkgname
  FROM pkghead
  WHERE (pkghead_id=ppkgheadid);
  IF (NOT FOUND) THEN
    RETURN -2;
  END IF;

  IF (LOWER(_pkgname) = &#39;public&#39; OR LOWER(_pkgname) = &#39;api&#39;) THEN
    RETURN -3;
  END IF;

  IF (NOT EXISTS(SELECT *
                 FROM pkgitem
                 WHERE ((pkgitem_pkghead_id=ppkgheadid)
                    AND (pkgitem_type=&#39;S&#39;)
                    AND (pkgitem_name=_pkgname)))) THEN
    RETURN -4;
  END IF;

  FOR _i IN ARRAY_LOWER(_tabs,1)..ARRAY_UPPER(_tabs,1) LOOP
    EXECUTE &#39;ALTER TABLE &#39; || _pkgname || &#39;.pkg&#39; || _tabs[_i] ||
            &#39; DISABLE TRIGGER pkg&#39; || _tabs[_i] || &#39;altertrigger;&#39;;
  END LOOP;

  DELETE FROM pkghead WHERE pkghead_id=ppkgheadid;

  RETURN ppkgheadid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletepo-integer">deletepo( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPoheadid ALIAS FOR $1;

BEGIN

  IF ( ( SELECT pohead_status
         FROM pohead
         WHERE (pohead_id=pPoheadid) ) = &#39;U&#39; ) THEN

    DELETE FROM poitem
    WHERE (poitem_pohead_id=pPoheadid);

    DELETE FROM pohead
    WHERE (pohead_id=pPoheadid);

    RETURN TRUE;

  ELSE
    RETURN FALSE;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletepr-bpchar-integer">deletepr( bpchar, integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pParentType ALIAS FOR $1;
  pParentId ALIAS FOR $2;

BEGIN

  DELETE FROM pr
  WHERE ((pr_status=&#39;O&#39;)
   AND (pr_order_type=pParentType)
   AND (pr_order_id=pParentId));

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletepr-integer">deletepr( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPrid ALIAS FOR $1;

BEGIN

  DELETE FROM pr
  WHERE ( (pr_status=&#39;O&#39;)
   AND (pr_id=pPrid) );

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteproductcategory-integer">deleteproductcategory( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pProdcatid ALIAS FOR $1;
  _check INTEGER;

BEGIN

--  Check to see if any items are assigned to the passed classcode
  SELECT item_id INTO _check
  FROM item
  WHERE (item_prodcat_id=pProdcatid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -1;
  END IF;

--  Delete any assocated records
  DELETE FROM salesaccnt
  WHERE (salesaccnt_prodcat_id=pProdcatid);

--  Delete the passed prodcat
  DELETE FROM prodcat
  WHERE (prodcat_id=pProdcatid);

  RETURN pProdcatid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteprofitcenter-integer">deleteprofitcenter( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pid ALIAS FOR $1;

BEGIN
  IF (EXISTS(SELECT accnt_id
             FROM accnt, prftcntr
             WHERE ((accnt_company=prftcntr_number)
               AND  (prftcntr_id=pid))
            )) THEN
    RETURN -1;
  END IF;

  DELETE FROM prftcntr
  WHERE (prftcntr_id=pid);

  RETURN pid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteproject-integer">deleteproject( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPrjid ALIAS FOR $1;
  _result INTEGER;
BEGIN

  SELECT quhead_id INTO _result
    FROM quhead
   WHERE (quhead_prj_id=pPrjid)
   LIMIT 1;
  IF (FOUND) THEN
    RETURN -1;
  END IF;

  SELECT cohead_id INTO _result
    FROM cohead
   WHERE (cohead_prj_id=pPrjid)
   LIMIT 1;
  IF (FOUND) THEN
    RETURN -2;
  END IF;

  SELECT wo_id INTO _result
    FROM wo
   WHERE (wo_prj_id=pPrjid)
   LIMIT 1;
  IF (FOUND) THEN
    RETURN -3;
  END IF;

  SELECT pr_id INTO _result
    FROM pr
   WHERE (pr_prj_id=pPrjid)
   LIMIT 1;
  IF (FOUND) THEN
    RETURN -4;
  END IF;

  SELECT poitem_id INTO _result
    FROM poitem
   WHERE (poitem_prj_id=pPrjid)
   LIMIT 1;
  IF (FOUND) THEN
    RETURN -5;
  END IF;

  SELECT invchead_id INTO _result
    FROM invchead
   WHERE (invchead_prj_id=pPrjid)
   LIMIT 1;
  IF (FOUND) THEN
    RETURN -6;
  END IF;


  DELETE FROM prjtask
   WHERE (prjtask_prj_id=pPrjid);

  DELETE FROM prj
   WHERE (prj_id=pPrjid);
  RETURN pPrjid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteprospect-integer">deleteprospect( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    pprospectId ALIAS FOR $1;
  BEGIN
    IF (EXISTS(SELECT quhead_id
               FROM quhead
               WHERE quhead_cust_id = pprospectId)) THEN
      RETURN -1;
    END IF;

    UPDATE crmacct SET crmacct_prospect_id=NULL
    WHERE crmacct_prospect_id=pprospectId;

    DELETE FROM prospect WHERE (prospect_id=pprospectId);

    RETURN 0;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletequote-integer">deletequote( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pQuheadid ALIAS FOR $1;
BEGIN
  RETURN deleteQuote(pQuheadid, NULL);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletequote-integer-integer">deletequote( integer, integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pQuheadid	ALIAS FOR $1;
  pQuoteNumber	ALIAS FOR $2;

  _quNumberScheme	TEXT;
  _quoteNumber		INTEGER;
  _returnVal		BOOLEAN	:= FALSE;

BEGIN

  SELECT metric_value INTO _quNumberScheme
  FROM metric WHERE metric_name = &#39;QUNumberGeneration&#39;;

  IF (pQuoteNumber IS NULL) THEN
    SELECT quhead_number INTO _quoteNumber
    FROM quhead
    WHERE (quhead_id=pQuheadid);
  ELSE
    _quoteNumber := pQuoteNumber;
  END IF;

  DELETE FROM quitem
  WHERE (quitem_quhead_id=pQuheadid);

  DELETE FROM quhead
  WHERE (quhead_id=pQuheadid);

  IF (_quoteNumber IS NOT NULL) THEN
    IF (_quNumberScheme = &#39;A&#39; OR _quNumberScheme = &#39;O&#39;) THEN
      -- do not release quote # if quote converted to sales order
      IF (NOT EXISTS (SELECT cohead_id
		      FROM cohead
		      WHERE (cohead_number=CAST(_quoteNumber AS text)))) THEN
	_returnVal = releaseQuNumber(_quoteNumber);
      END IF;
    ELSEIF (_quNumberScheme = &#39;S&#39;) THEN
      _returnVal = releaseSoNumber(_quoteNumber);
    END IF;
  END IF;

  RETURN TRUE;	-- ToDo: use returnVal when releaseQuNumber returns INTEGER

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleterecvfororder-text-integer">deleterecvfororder( text, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pordertype	ALIAS FOR $1;
  porderid	ALIAS FOR $2;

BEGIN
  DELETE FROM recv
  USING orderitem
  WHERE ((recv_orderitem_id=orderitem_id)
    AND  (recv_order_type=orderitem_orderhead_type)
    AND  (NOT recv_posted)
    AND  (orderitem_orderhead_id=porderid)
    AND  (orderitem_orderhead_type=pordertype));

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletesalescategory-integer">deletesalescategory( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSalescatid ALIAS FOR $1;

BEGIN

  PERFORM invcitem_salescat_id
  FROM invchead, invcitem
  WHERE ( (invcitem_invchead_id=invchead_id)
   AND (NOT invchead_posted)
   AND (invcitem_salescat_id=pSalescatid) );
  IF (FOUND) THEN
    RETURN -1;
  END IF;

  PERFORM invcitem_salescat_id
  FROM invchead, invcitem
  WHERE ( (invcitem_invchead_id=invchead_id)
   AND (invchead_posted)
   AND (invcitem_salescat_id=pSalescatid) );
  IF (FOUND) THEN
    RETURN -2;
  END IF;

  PERFORM aropen_salescat_id
     FROM aropen
    WHERE (aropen_salescat_id=pSalescatid);
  IF (FOUND) THEN
    RETURN -3;
  END IF;

  DELETE FROM salescat
  WHERE (salescat_id=pSalescatid);

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletesalesrep-integer">deletesalesrep( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSalesrepid ALIAS FOR $1;

BEGIN

  IF (EXISTS(SELECT cust_id
             FROM custinfo
             WHERE (cust_salesrep_id=pSalesrepid))) THEN
    RETURN -1;
  END IF;

  IF (EXISTS(SELECT shipto_id
             FROM shipto
             WHERE (shipto_salesrep_id=pSalesrepid))) THEN
    RETURN -2;
  END IF;

  IF (EXISTS(SELECT aropen_id 
             FROM aropen 
             WHERE (aropen_salesrep_id=pSalesrepid) 

             UNION SELECT cohead_id 
             FROM cohead 
             WHERE (cohead_salesrep_id=pSalesrepid) 
 
             UNION SELECT cmhead_id 
             FROM cmhead 
             WHERE (cmhead_salesrep_id=pSalesrepid) 

             UNION SELECT cohist_id 
             FROM cohist 
             WHERE (cohist_salesrep_id=pSalesrepid))) THEN
    RETURN -3;
  END IF;

  DELETE FROM salesrep
  WHERE (salesrep_id=pSalesrepid);

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteshippingcharge-integer">deleteshippingcharge( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pShipchrgid ALIAS FOR $1;

BEGIN

--  Check to see if the passed shipchrg is used as a default for any customers
  PERFORM cust_id
  FROM cust
  WHERE (cust_shipchrg_id=pShipchrgid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -1;
  END IF;

--  Delete the passed shipchrg
  DELETE FROM shipchrg
  WHERE (shipchrg_id=pShipchrgid);

  RETURN pShipchrgid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteshippingchargetype-integer">deleteshippingchargetype( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pShipchrgid ALIAS FOR $1;
  _check INTEGER;

BEGIN

--  Check to see if the passed shipchrg is used as a default for any customers
  SELECT cust_id INTO _check
  FROM cust
  WHERE (cust_shipchrg_id=pShipchrgid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -1;
  END IF;

--  Delete the passed shipchrg
  DELETE FROM shipchrg
  WHERE (shipchrg_id=pShipchrgid);

  RETURN pShipchrgid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteshipto-integer">deleteshipto( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pShiptoid ALIAS FOR $1;

BEGIN

  PERFORM asohist_id
  FROM asohist
  WHERE (asohist_shipto_id=pShiptoid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -1;
  END IF;

  PERFORM cohead_id
  FROM cohead
  WHERE (cohead_shipto_id=pShiptoid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -2;
  END IF;

  PERFORM cmhead_id
  FROM cmhead
  WHERE (cmhead_shipto_id=pShiptoid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -3;
  END IF;

  PERFORM cohist_id
  FROM cohist
  WHERE (cohist_shipto_id=pShiptoid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -4;
  END IF;

  PERFORM quhead_id
  FROM quhead
  WHERE (quhead_shipto_id=pShiptoid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -5;
  END IF;

  PERFORM invchead_id
  FROM invchead
  WHERE (invchead_shipto_id=pShiptoid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -6;
  END IF;

  DELETE FROM ipsass
  WHERE (ipsass_shipto_id=pShiptoid);

  DELETE FROM shiptoinfo
  WHERE (shipto_id=pShiptoid);

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteso-integer">deleteso( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSoheadid	ALIAS FOR $1;
BEGIN
  RETURN deleteSo(pSoheadid, NULL);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteso-integer-text">deleteso( integer, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSoheadid	ALIAS FOR $1;
  pSonumber	ALIAS FOR $2;

  _r            RECORD;
  _result       INTEGER;

BEGIN
-- Get cohead
  SELECT * INTO _r FROM cohead WHERE (cohead_id=pSoheadid);

   IF (NOT FOUND) THEN
     RETURN 0;
   END IF;

-- Cannot delete if credit card payments
  IF (EXISTS(SELECT ccpay_id
	     FROM ccpay, payco
	     WHERE ((ccpay_status IN (&#39;C&#39;))
	       AND  (ccpay_id=payco_ccpay_id)
	       AND  (payco_cohead_id=pSoheadid)))) THEN
    RETURN -1;
  END IF;

-- Cannot delete if credit card history
  IF (EXISTS(SELECT ccpay_id
	     FROM ccpay, payco
	     WHERE ((ccpay_status != &#39;C&#39;)
	       AND  (ccpay_id=payco_ccpay_id)
	       AND  (payco_cohead_id=pSoheadid)))) THEN
    RETURN -2;
  END IF;

-- Delete Sales Order Items
  SELECT deleteSoItem(coitem_id) INTO _result
  FROM coitem
  WHERE (coitem_cohead_id=pSoheadid);
  IF (_result &lt; 0) THEN
    RETURN _result;
  END IF;

  DELETE FROM prj
  WHERE ((prj_id=_r.cohead_prj_id)
  AND (prj_status IS NULL));

  DELETE FROM cohead
  WHERE (cohead_id=pSoheadid);

  DELETE FROM aropenco
  WHERE (aropenco_cohead_id=pSoheadid);

  IF (COALESCE(pSonumber,&#39;&#39;) != &#39;&#39;) THEN
    IF (NOT releaseSoNumber(CAST(pSonumber AS INTEGER))) THEN
      RETURN 0; -- change to -3 when releaseSoNumber returns INTEGER
    END IF;

  ELSEIF (_r.cohead_number IS NOT NULL) THEN
    IF (NOT releaseSoNumber(CAST(_r.cohead_number AS INTEGER))) THEN
      RETURN 0; -- change to -3 when releaseSoNumber returns INTEGER
    END IF;
      
  END IF;

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletesoitem-integer">deletesoitem( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSoitemid	ALIAS FOR $1;

  _r            RECORD;
  _result       INTEGER;
  _jobItem      BOOLEAN;

BEGIN
-- Get coitem
   SELECT * INTO _r FROM coitem WHERE (coitem_id=pSoitemid);

   IF (NOT FOUND) THEN
     RETURN -999;
   END IF;

-- Cannot delete if shipped
  IF (_r.coitem_qtyshipped &gt; 0) THEN
    RETURN -101;
  END IF;

-- Cannot delete if issued to shipping
  SELECT coship_id INTO _result
  FROM coship
  WHERE (coship_coitem_id=pSoitemid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -102;
  END IF;

-- Cannot delete if returned
  IF (fetchMetricBool(&#39;MultiWhs&#39;)) THEN
    SELECT raitem_id INTO _result
    FROM raitem
    WHERE ( (raitem_orig_coitem_id=pSoitemid)
       OR   (raitem_new_coitem_id=pSoitemid) )
    LIMIT 1;
    IF (FOUND) THEN
      RETURN -103;
    END IF;
  END IF;

  SELECT (item_type=&#39;J&#39;) INTO _jobItem
  FROM coitem JOIN itemsite ON (itemsite_id=coitem_itemsite_id)
              JOIN item ON (item_id=itemsite_item_id)
  WHERE (coitem_id=pSoitemid);

  IF (_jobItem AND _r.coitem_order_type=&#39;W&#39;) THEN
-- Delete associated Work Order
    SELECT deleteWo(_r.coitem_order_id, TRUE, TRUE) INTO _result;
    IF (_result &lt; 0) THEN
      RETURN -104;
    END IF;
  ELSE
-- Break association
    IF (_r.coitem_order_type=&#39;R&#39;) THEN
      UPDATE pr SET pr_prj_id=-1
      WHERE (pr_id=_r.coitem_order_id);
    ELSE
      IF (_r.coitem_order_type=&#39;W&#39;) THEN
        PERFORM changeWoProject(_r.coitem_order_id, -1, TRUE);
      END IF;
    END IF;
  END IF;

-- Delete the coitem
  DELETE FROM coitem
  WHERE (coitem_id=pSoitemid);

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletestandardjournal-integer">deletestandardjournal( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pStdjrnlid ALIAS FOR $1;

BEGIN

  DELETE FROM stdjrnlitem
  WHERE (stdjrnlitem_stdjrnl_id=pStdjrnlid);

  DELETE FROM stdjrnlgrpitem
  WHERE (stdjrnlgrpitem_stdjrnl_id=pStdjrnlid);

  DELETE FROM stdjrnl
  WHERE (stdjrnl_id=pStdjrnlid);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletestandardjournalgroup-integer">deletestandardjournalgroup( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pStdjrnlgrpid ALIAS FOR $1;

BEGIN

  DELETE FROM stdjrnlgrpitem
  WHERE (stdjrnlgrpitem_stdjrnlgrp_id=pStdjrnlgrpid);

  DELETE FROM stdjrnlgrp
  WHERE (stdjrnlgrp_id=pStdjrnlgrpid);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletesubaccount-integer">deletesubaccount( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pid ALIAS FOR $1;

BEGIN
  IF (EXISTS(SELECT accnt_id
             FROM accnt, subaccnt
             WHERE ((accnt_company=subaccnt_number)
               AND  (subaccnt_id=pid))
            )) THEN
    RETURN -1;
  END IF;

  DELETE FROM subaccnt
  WHERE (subaccnt_id=pid);

  RETURN pid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletesubaccounttype-integer">deletesubaccounttype( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSubAccntTypeid ALIAS FOR $1;
  _check INTEGER;

BEGIN

--  Check to see if the passed subaccnttype is used in any accounts
  SELECT accnt_id INTO _check
  FROM accnt, subaccnttype
  WHERE ( (accnt_subaccnttype_code=subaccnttype_code)
   AND (subaccnttype_id=pSubAccntTypeid) )
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -1;
  END IF;

--  Delete the Sub Account Type
  DELETE FROM subaccnttype
  WHERE (subaccnttype_id=pSubAccntTypeid);

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletetax-integer">deletetax( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  ptaxid	ALIAS FOR $1;
BEGIN
  -- these checks allow nice error reporting instead of throwing an SQL error
  IF EXISTS(SELECT taxsel_id FROM taxsel WHERE (taxsel_tax_id=ptaxid)) THEN
    RETURN -10;

  -- pohead? -11
  -- poitem? -12

  ELSEIF EXISTS(SELECT vohead_id
		FROM vohead
		WHERE ((vohead_adjtax_id=ptaxid)
		   OR (vohead_freighttax_id=ptaxid))) THEN
    RETURN -13;

  ELSEIF EXISTS(SELECT voitem_id FROM voitem WHERE (voitem_tax_id=ptaxid)) THEN
    RETURN -14;

  -- debit memo? -15
  -- debit memo item? -16
  -- quhead? -17

  ELSEIF EXISTS(SELECT quitem_id FROM quitem WHERE (quitem_tax_id=ptaxid)) THEN
    RETURN -18;

  -- cohead? -19
  ELSEIF EXISTS(SELECT coitem_id FROM coitem WHERE (coitem_tax_id=ptaxid)) THEN
    RETURN -20;

  ELSEIF EXISTS(SELECT cobmisc_id
		FROM cobmisc
		WHERE ((cobmisc_adjtax_id=ptaxid)
		   OR (cobmisc_freighttax_id=ptaxid))) THEN
    RETURN -21;

  ELSEIF EXISTS(SELECT cobill_id FROM cobill WHERE (cobill_tax_id=ptaxid)) THEN
    RETURN -22;

  ELSEIF EXISTS(SELECT invchead_id
		FROM invchead
		WHERE ((invchead_adjtax_id=ptaxid)
		   OR (invchead_freighttax_id=ptaxid))) THEN
    RETURN -23;

  ELSEIF EXISTS(SELECT invcitem_id FROM invcitem WHERE (invcitem_tax_id=ptaxid)) THEN
    RETURN -24;

  ELSEIF EXISTS(SELECT cmhead_id
	    FROM cmhead
	    WHERE ((cmhead_adjtax_id=ptaxid)
	       OR (cmhead_freighttax_id=ptaxid))) THEN
    RETURN -25;

  ELSEIF EXISTS(SELECT cmitem_id FROM cmitem WHERE (cmitem_tax_id=ptaxid)) THEN
    RETURN -26;

  END IF;

  DELETE FROM tax WHERE (tax_id=ptaxid);

  RETURN ptaxid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletetaxauthority-integer">deletetaxauthority( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTaxauthid ALIAS FOR $1;
  _result INTEGER;
BEGIN

  SELECT taxsel_id
    INTO _result
    FROM taxsel
   WHERE (taxsel_taxauth_id=pTaxauthid);
  IF (FOUND) THEN
    RETURN -1;
  END IF;

  SELECT checkhead_recip_id INTO _result
    FROM checkhead
   WHERE ((checkhead_recip_id=pTaxauthid)
     AND  (checkhead_recip_type=&#39;T&#39;))
   LIMIT 1;
   IF (FOUND) THEN
     RETURN -7;
   END IF;

  UPDATE crmacct SET crmacct_taxauth_id = NULL
  WHERE (crmacct_taxauth_id=pTaxauthid);

  DELETE
    FROM taxauth
   WHERE (taxauth_id=pTaxauthid);

  RETURN pTaxauthid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletetaxtype-integer">deletetaxtype( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTaxtypeid ALIAS FOR $1;
  _result INTEGER;
BEGIN

  SELECT taxtype_id
    INTO _result
    FROM taxtype
   WHERE ((taxtype_sys)
     AND  (taxtype_id=pTaxtypeid));
  IF (FOUND) THEN
    RETURN -1;
  END IF;

  SELECT taxsel_id
    INTO _result
    FROM taxsel
   WHERE (taxsel_taxtype_id=pTaxtypeid);
  IF (FOUND) THEN
    RETURN -2;
  END IF;

  DELETE
    FROM taxtype
   WHERE (taxtype_id=pTaxtypeid);

  RETURN pTaxtypeid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletetodoitem-integer">deletetodoitem( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    ptodoItemId ALIAS FOR $1;
  BEGIN
    DELETE FROM alarm WHERE ( (alarm_source=&#39;TODO&#39;) AND (alarm_source_id=ptodoItemId) );
    DELETE FROM todoitem WHERE todoitem_id = ptodoItemId;
    RETURN 0;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteunusedclasscodes">deleteunusedclasscodes(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

  DELETE FROM classcode
  WHERE (classcode_id NOT IN (SELECT DISTINCT item_classcode_id FROM item));

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteunusedfreightclasses">deleteunusedfreightclasses(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

  DELETE FROM freightclass
  WHERE (freightclass_id NOT IN (SELECT DISTINCT COALESCE(item_freightclass_id, 0) FROM item));

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteunusedproductcategories">deleteunusedproductcategories(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

--  Delete any associated records
  DELETE FROM salesaccnt
  WHERE ( (salesaccnt_prodcat_id &lt;&gt; -1)
   AND (salesaccnt_prodcat_id NOT IN (SELECT DISTINCT item_prodcat_id FROM item)) );

  DELETE FROM prodcat
  WHERE (prodcat_id NOT IN (SELECT DISTINCT item_prodcat_id FROM item));

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteuom-integer">deleteuom( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUomid ALIAS FOR $1;

BEGIN
  
  DELETE FROM uom WHERE uom_id=pUomid;

  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteuomconv-integer">deleteuomconv( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUomconvid ALIAS FOR $1;

BEGIN
  DELETE FROM uomconv WHERE uomconv_id=pUomconvid;

  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteuserpreference-text">deleteuserpreference( text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPrefname ALIAS FOR $1;
  _return BOOLEAN;

BEGIN

  SELECT deleteUserPreference(CURRENT_USER, pPrefname) INTO _return;

  RETURN _return;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteuserpreference-text-text">deleteuserpreference( text, text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUsername ALIAS FOR $1;
  pPrefname ALIAS FOR $2;

BEGIN

  DELETE FROM usrpref
  WHERE ( (usrpref_username=pUsername)
   AND (usrpref_name=pPrefname) );

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletevendor-integer">deletevendor( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendid ALIAS FOR $1;
  _test INTEGER;

BEGIN

--  Check to see if the passed vendor is used in pohead
  SELECT pohead_id INTO _test
  FROM pohead
  WHERE (pohead_vend_id=pVendid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -1;
  END IF;

--  Check to see if the passed vendor has any receiving history posted against it
  SELECT recv_vend_id INTO _test
  FROM recv
  WHERE (recv_vend_id=pVendid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -2;
  END IF;

--  Check to see if the passed vendor has any return history posted against it
  SELECT poreject_vend_id INTO _test
  FROM poreject
  WHERE (poreject_vend_id=pVendid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -3;
  END IF;

--  Check to see if the passed vendor has any vouchers
  SELECT vohead_vend_id INTO _test
    FROM vohead
   WHERE (vohead_vend_id=pVendid)
   LIMIT 1;
   IF (FOUND) THEN
     RETURN -4;
   END IF;

--  Check to see if the passed vendor has any apopen items
  SELECT apopen_vend_id INTO _test
    FROM apopen
   WHERE (apopen_vend_id=pVendid)
   LIMIT 1;
   IF (FOUND) THEN
     RETURN -5;
   END IF;

--  Check to see if the passed vendor has any apapply items
  SELECT apapply_vend_id INTO _test
    FROM apapply
   WHERE (apapply_vend_id=pVendid)
   LIMIT 1;
   IF (FOUND) THEN
     RETURN -6;
   END IF;

--  Check to see if the passed vendor has any checkhead items
  SELECT checkhead_recip_id INTO _test
    FROM checkhead
   WHERE ((checkhead_recip_id=pVendid)
     AND  (checkhead_recip_type=&#39;V&#39;))
   LIMIT 1;
   IF (FOUND) THEN
     RETURN -7;
   END IF;

--  Delete the passed vendor and any support
  DELETE FROM itemsrcp
  WHERE (itemsrcp_id IN ( SELECT itemsrcp_id
                          FROM itemsrcp, itemsrc
                          WHERE ( (itemsrcp_itemsrc_id=itemsrc_id)
                           AND (itemsrc_vend_id=pVendid) ) ) );

  DELETE FROM taxreg
   WHERE ((taxreg_rel_type=&#39;V&#39;)
     AND  (taxreg_rel_id=pVendid));

  DELETE FROM itemsrc
  WHERE (itemsrc_vend_id=pVendid);

  DELETE FROM vendaddrinfo
  WHERE (vendaddr_vend_id=pVendid);

  UPDATE crmacct SET crmacct_vend_id = NULL
  WHERE (crmacct_vend_id = pVendid);

  DELETE FROM vendinfo
  WHERE (vend_id=pVendid);

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletevendoraddress-integer">deletevendoraddress( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendaddrid ALIAS FOR $1;
  _test INTEGER;

BEGIN

--  Check to see if the passed vendor address is used in pohead
  SELECT pohead_id INTO _test
  FROM pohead
  WHERE (pohead_vendaddr_id=pVendaddrid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -1;
  END IF;

--  Delete the passed vendor address
  DELETE FROM vendaddrinfo
  WHERE (vendaddr_id=pVendaddrid);

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletevendortype-integer">deletevendortype( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendtypeid ALIAS FOR $1;
  _test INTEGER;

BEGIN

--  Check to see if the passed vendor type is used in vendinfo
  SELECT vend_id INTO _test
  FROM vendinfo
  WHERE (vend_vendtype_id=pVendtypeid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -1;
  END IF;

--  Delete the passed vendor type
  DELETE FROM vendtype
  WHERE (vendtype_id=pVendtypeid);

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletevoucher-integer">deletevoucher( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVoheadid ALIAS FOR $1;

BEGIN

  DELETE FROM vodist
  WHERE (vodist_vohead_id=pVoheadid);

  UPDATE recv SET recv_vohead_id=NULL, recv_voitem_id=NULL, recv_invoiced=False
  WHERE (recv_vohead_id=pVoheadid);

  UPDATE poreject SET poreject_vohead_id=NULL, poreject_voitem_id=NULL, poreject_invoiced=False
  WHERE (poreject_vohead_id=pVoheadid);

  DELETE FROM voitem
  WHERE (voitem_vohead_id=pVoheadid);

  DELETE FROM vohead
  WHERE (vohead_id=pVoheadid);

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletewo-integer-boolean">deletewo( integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid ALIAS FOR $1;
  deleteChildren ALIAS FOR $2;

BEGIN
  RETURN deleteWo(pWoid, deleteChildren, FALSE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletewo-integer-boolean-boolean">deletewo( integer, boolean, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid ALIAS FOR $1;
  deleteChildren ALIAS FOR $2;
  deleteForce ALIAS FOR $3;
  woStatus CHAR(1);
  itemType CHAR(1);
  returnCode INTEGER;
  _wotcCnt	INTEGER;
  _routings BOOLEAN;

BEGIN
  SELECT wo_status, item_type INTO woStatus, itemType
  FROM wo JOIN itemsite ON (itemsite_id=wo_itemsite_id)
          JOIN item ON (item_id=itemsite_item_id)
  WHERE (wo_id=pWoid);

  IF (NOT woStatus IN (&#39;O&#39;, &#39;E&#39;)) THEN
    RETURN -1;
  END IF;

  IF (NOT deleteForce) THEN
    IF (itemType = &#39;J&#39;) THEN
      RETURN -2;
    END IF;
  END IF;

  SELECT fetchMetricBool(&#39;Routings&#39;) INTO _routings;

  IF _routings THEN
    SELECT count(*) INTO _wotcCnt
    FROM wotc
    WHERE (wotc_wo_id=pWoid);
    IF (_wotcCnt &gt; 0) THEN
      RETURN -1;
    END IF;
  END IF;

  IF (woStatus = &#39;R&#39;) THEN
    INSERT INTO evntlog (evntlog_evnttime, evntlog_username, evntlog_evnttype_id,
                         evntlog_ordtype, evntlog_ord_id, evntlog_warehous_id, evntlog_number)
    SELECT CURRENT_TIMESTAMP, evntnot_username, evnttype_id,
           &#39;W&#39;, wo_id, itemsite_warehous_id, formatWoNumber(wo_id)
    FROM evntnot, evnttype, itemsite, item, wo
    WHERE ( (evntnot_evnttype_id=evnttype_id)
     AND (evntnot_warehous_id=itemsite_warehous_id)
     AND (wo_itemsite_id=itemsite_id)
     AND (itemsite_item_id=item_id)
     AND (evnttype_name=&#39;RWoRequestCancel&#39;)
     AND (wo_id=pWoid) );

     RETURN 0;
  ELSE
    IF (woStatus = &#39;E&#39;) THEN
      returnCode := (SELECT implodeWo(pWoid, FALSE));
    END IF;
  END IF;

  IF (woStatus IN (&#39;O&#39;, &#39;E&#39;, &#39;C&#39;)) THEN
    DELETE FROM womatl
    WHERE (womatl_wo_id=pWoid);

    IF _routings THEN
      DELETE FROM wooper
      WHERE (wooper_wo_id=pWoid);
    END IF;

    DELETE FROM wo
    WHERE (wo_id=pWoid);
  END IF;

  IF (deleteChildren) THEN
    returnCode := (SELECT MAX(deleteWo(wo_id, TRUE))
                   FROM wo
                   WHERE ((wo_ordtype=&#39;W&#39;)
                    AND (wo_ordid=pWoid)));
  END IF;

  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deletewomaterial-integer">deletewomaterial( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWomatlid ALIAS FOR $1;

BEGIN

  UPDATE wo
  SET wo_adhoc=TRUE
  FROM womatl
  WHERE ((womatl_wo_id=wo_id)
   AND (womatl_id=pWomatlid));

--  Delete any created P/R for this Womatl
  PERFORM deletePr(&#39;W&#39;, pWomatlid);

  DELETE FROM womatl
  WHERE (womatl_id=pWomatlid);

  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.deleteworkcenter-integer">deleteworkcenter( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWrkcntid ALIAS FOR $1;
  _check INTEGER;

BEGIN

  SELECT woopervar_id INTO _check
  FROM woopervar
  WHERE (woopervar_wrkcnt_id=pWrkcntid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -1;
  END IF;
 
  SELECT stdopn_id INTO _check
  FROM stdopn
  WHERE (stdopn_wrkcnt_id=pWrkcntid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -2;
  END IF;

  SELECT booitem_id INTO _check
  FROM booitem
  WHERE (booitem_wrkcnt_id=pWrkcntid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -3;
  END IF;

  SELECT wooper_id INTO _check
  FROM wooper
  WHERE (wooper_wrkcnt_id=pWrkcntid)
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -4;
  END IF;

  DELETE FROM wrkcnt
  WHERE (wrkcnt_id=pWrkcntid);

  RETURN pWrkcntid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.detachccpayfromso-integer-integer-integer">detachccpayfromso( integer, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pcoheadid		ALIAS FOR $1;
  pwarehousid		ALIAS FOR $2;
  pcustid		ALIAS FOR $3;

BEGIN
  RAISE NOTICE &#39;detachCCPayFromSO(INTEGER, INTEGER, INTEGER): deprecated&#39;;
  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.detachcontact-integer-integer">detachcontact( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    pcntctId    ALIAS FOR $1;
    pcrmacctId  ALIAS FOR $2;
  BEGIN
    UPDATE cntct SET cntct_crmacct_id = NULL
    WHERE cntct_id = pcntctId
      AND cntct_crmacct_id = pcrmacctId;

    UPDATE crmacct SET crmacct_cntct_id_1 = NULL
    WHERE crmacct_id = pcrmacctId
      AND crmacct_cntct_id_1 = pcntctId;

    UPDATE crmacct SET crmacct_cntct_id_2 = NULL
    WHERE crmacct_id = pcrmacctId
      AND crmacct_cntct_id_2 = pcntctId;

    RETURN 0;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.detag-text">detag( text )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSource ALIAS FOR $1;
  _result TEXT := &#39;&#39;;
  _cursor INTEGER := 1;
  _state INTEGER := 0;
  _length INTEGER;
  _character TEXT;

BEGIN

  _length := LENGTH(pSource);

  WHILE (_cursor &lt;= _length) LOOP
    _character := substr(pSource, _cursor, 1);

    IF (_state = 0) THEN
      IF (_character = &#39;&lt;&#39;) THEN
        _state := 1;
      ELSE
        _result = (_result || _character);
      END IF;

    ELSIF (_state = 1) THEN
      IF (_character = &#39;&gt;&#39;) THEN
        _state := 0;
      END IF;
    END IF;

    _cursor := (_cursor + 1);

  END LOOP;

  RETURN _result;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.detailednnqoh-integer-boolean">detailednnqoh( integer, boolean )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pABS ALIAS FOR $2;
  _qoh NUMERIC;

BEGIN

  IF (pABS) THEN
    SELECT SUM(noNeg(itemloc_qty)) INTO _qoh
    FROM itemloc, location
    WHERE ( (itemloc_location_id=location_id)
     AND (NOT location_netable)
     AND (itemloc_itemsite_id=pItemsiteid) );
  ELSE
    SELECT SUM(itemloc_qty) INTO _qoh
    FROM itemloc, location
    WHERE ( (itemloc_location_id=location_id)
     AND (NOT location_netable)
     AND (itemloc_itemsite_id=pItemsiteid) );
  END IF;

  IF (_qoh IS NULL) THEN
    _qoh := 0;
  END IF;

  RETURN _qoh;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.detailedqoh-integer-boolean">detailedqoh( integer, boolean )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pABS ALIAS FOR $2;
  _qoh NUMERIC;

BEGIN

  IF (pABS) THEN
    SELECT SUM(noNeg(itemloc_qty)) INTO _qoh
    FROM itemloc LEFT OUTER JOIN location ON (itemloc_location_id=location_id)
    WHERE ( ( (location_id IS NULL) OR (location_netable) )
     AND (itemloc_itemsite_id=pItemsiteid) );
  ELSE
    SELECT SUM(itemloc_qty) INTO _qoh
    FROM itemloc LEFT OUTER JOIN location ON (itemloc_location_id=location_id)
    WHERE ( ( (location_id IS NULL) OR (location_netable) )
     AND (itemloc_itemsite_id=pItemsiteid) );
  END IF;

  IF (_qoh IS NULL) THEN
    _qoh := 0;
  END IF;

  RETURN _qoh;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.determineduedate-integer-date">determineduedate( integer, date )</a>
		</h2>
<h3>Returns: date</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTermsid ALIAS FOR $1;
  pSourceDate ALIAS FOR $2;
  _dueDate DATE;
  _p RECORD;

BEGIN

  SELECT terms_type, terms_duedays, terms_cutoffday INTO _p
  FROM terms
  WHERE (terms_id=pTermsid);
  IF (NOT FOUND) THEN
    _dueDate := pSourceDate;

--  Handle type D terms
  ELSIF (_p.terms_type = &#39;D&#39;) THEN
    _dueDate := (pSourceDate + _p.terms_duedays);

--  Handle type P terms
  ELSIF (_p.terms_type = &#39;P&#39;) THEN
    IF (date_part(&#39;day&#39;, pSourceDate) &lt;= _p.terms_cutoffday) THEN
      _dueDate := (DATE(date_trunc(&#39;month&#39;, pSourceDate)) + (_p.terms_duedays - 1));
    ELSE
      _dueDate := (DATE(date_trunc(&#39;month&#39;, pSourceDate)) + (_p.terms_duedays - 1) + INTERVAL &#39;1 month&#39;);
    END IF;

--  Handle unknown terms
  ELSE
    _dueDate := pSourceDate;
  END IF;

  RETURN _dueDate;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.digest-bytea-text">digest( bytea, text )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: C</h3>
        
        <pre>pg_digest</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.digest-text-text">digest( text, text )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: C</h3>
        
        <pre>pg_digest</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.disablepackage-integer">disablepackage( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  ppkgheadid    ALIAS FOR $1;
  _pkgname      TEXT;

BEGIN
  SELECT pkghead_name INTO _pkgname
  FROM pkghead
  WHERE (pkghead_id=ppkgheadid);
  IF (NOT FOUND) THEN
    RETURN -2;
  END IF;

  RETURN disablePackage(_pkgname);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.disablepackage-text">disablepackage( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  ppkgname ALIAS FOR $1;
  _i       INTEGER := 0;
  _tabs    TEXT[] := ARRAY[&#39;cmd&#39;,  &#39;cmdarg&#39;, &#39;image&#39;,  &#39;metasql&#39;,
                           &#39;priv&#39;, &#39;report&#39;, &#39;script&#39;, &#39;uiform&#39;];

BEGIN
  IF (version() &lt; &#39;PostgreSQL 8.2&#39;) THEN
    RETURN -1;
  END IF;

  FOR _i IN ARRAY_LOWER(_tabs,1)..ARRAY_UPPER(_tabs,1) LOOP
    EXECUTE &#39;ALTER TABLE &#39; || ppkgname || &#39;.pkg&#39; || _tabs[_i] ||
            &#39; NO INHERIT public.&#39; || _tabs[_i] || &#39;;&#39;;
  END LOOP;
  
  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.distributeitemlocseries-integer">distributeitemlocseries( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemlocSeries ALIAS FOR $1;
  _distCounter INTEGER;
  _itemlocdist RECORD;
  _itemlocid INTEGER;
  _invhistid INTEGER;
  _check BOOLEAN;
BEGIN

  _distCounter := 0;

--  March through all of the itemlocdists for pItemlocSeries
  FOR _itemlocdist IN SELECT itemlocdist_id AS itemlocdistid,
                             itemlocdist_source_type AS type,
                             itemlocdist_source_id AS sourceid,
                             itemlocdist_qty AS qty,
                             itemlocdist_itemsite_id AS itemsiteid,
                             itemsite_freeze,
                             itemlocdist_invhist_id AS invhistid,
                             itemlocdist_ls_id AS lotserialid,
                             itemlocdist_expiration AS expiration,
                             itemlocdist_flush,
                             itemlocdist_warranty AS warranty
                      FROM itemlocdist, itemsite
                      WHERE ( (itemlocdist_itemsite_id=itemsite_id)
                       AND (itemlocdist_series=pItemlocSeries) )
                      ORDER BY itemlocdist_flush DESC LOOP

    _distCounter := _distCounter + 1;

--  Commit invhist to itemsite
    IF (NOT _itemlocdist.itemsite_freeze) THEN
	PERFORM postInvHist(_itemlocdist.invhistid);
    END IF;

--  Mark the invhist tuple for the itemlocdist in question as having detail
    UPDATE invhist
    SET invhist_hasdetail=TRUE
    WHERE ( (NOT invhist_hasdetail)
     AND (invhist_id=_itemlocdist.invhistid) );

--  If this itemlocdist is a flush, write a invdetail tuple that records the empty
    IF (_itemlocdist.itemlocdist_flush) THEN
      INSERT INTO invdetail
      ( invdetail_invhist_id, invdetail_location_id, invdetail_ls_id,
        invdetail_qty, invdetail_qty_before, invdetail_qty_after, invdetail_expiration,
        invdetail_warrpurc )
      SELECT _itemlocdist.invhistid, itemloc_location_id, itemloc_ls_id,
             (itemloc_qty * -1), itemloc_qty, 0, itemloc_expiration, 
             _itemlocdist.warranty
      FROM itemloc
      WHERE ( (itemloc_qty &lt;&gt; 0)
       AND (itemloc_id=_itemlocdist.sourceid) );

--  Delete the flushed itemloc if its parent itemsite is not frozen
      IF (NOT _itemlocdist.itemsite_freeze) THEN
        DELETE FROM itemloc
        WHERE (itemloc_id=_itemlocdist.sourceid);
      END IF;

    ELSE
--  If this is a location type distribution, check to see if the target itemloc
--  already exists
      IF (_itemlocdist.type = &#39;L&#39;) THEN
        SELECT itemloc_id INTO _itemlocid
        FROM itemloc
        WHERE ( (itemloc_itemsite_id=_itemlocdist.itemsiteid)
         AND (itemloc_location_id=_itemlocdist.sourceid)
         AND (itemloc_ls_id=_itemlocdist.lotserialid)
         AND (itemloc_expiration=_itemlocdist.expiration)
         AND (COALESCE(itemloc_warrpurc,endoftime())=COALESCE(_itemlocdist.warranty,endoftime())) );

--  Nope, create it
        IF (NOT FOUND) THEN
          SELECT NEXTVAL(&#39;itemloc_itemloc_id_seq&#39;) INTO _itemlocid;

          INSERT INTO itemloc
          ( itemloc_id, itemloc_itemsite_id,
            itemloc_location_id, itemloc_qty,
            itemloc_ls_id, itemloc_expiration,
            itemloc_warrpurc )
          VALUES
          ( _itemlocid, _itemlocdist.itemsiteid,
            _itemlocdist.sourceid, 0,
            _itemlocdist.lotserialid, _itemlocdist.expiration,
            _itemlocdist.warranty );
        END IF;

      ELSE
        _itemlocid = _itemlocdist.sourceid;
      END IF;

--  Record the invdetail
      INSERT INTO invdetail
      (invdetail_invhist_id, invdetail_location_id, invdetail_ls_id,
       invdetail_qty, invdetail_qty_before, invdetail_qty_after, invdetail_expiration,
       invdetail_warrpurc)
      SELECT _itemlocdist.invhistid, itemloc_location_id, _itemlocdist.lotserialid,
             _itemlocdist.qty, itemloc_qty, (itemloc_qty + _itemlocdist.qty),
             itemloc_expiration,_itemlocdist.warranty
      FROM itemloc
      WHERE (itemloc_id=_itemlocid);

--  Update the itemloc_qty if its parent itemsite is not frozen
      IF (NOT _itemlocdist.itemsite_freeze) THEN
        UPDATE itemloc
        SET itemloc_qty = (itemloc_qty + _itemlocdist.qty)
        WHERE (itemloc_id=_itemlocid);
      END IF;

--  Adjust QOH if this itemlocdist is to/from a non-netable location
      IF ( SELECT (NOT location_netable)
           FROM itemloc, location
           WHERE ( (itemloc_location_id=location_id)
            AND (itemloc_id=_itemlocid) ) ) THEN

--  Record the netable-&gt;non-netable (or visaveras) invhist
        SELECT NEXTVAL(&#39;invhist_invhist_id_seq&#39;) INTO _invhistid;
        INSERT INTO invhist
        ( invhist_id, invhist_itemsite_id, 
          invhist_transtype, invhist_invqty,
          invhist_qoh_before, invhist_qoh_after,
          invhist_docnumber, invhist_comments,
          invhist_invuom, invhist_unitcost,
          invhist_costmethod, invhist_value_before, invhist_value_after ) 
        SELECT _invhistid, itemsite_id, 
               &#39;NN&#39;, (_itemlocdist.qty * -1),
               itemsite_qtyonhand, (itemsite_qtyonhand - _itemlocdist.qty),
               invhist_docnumber, invhist_comments,
               uom_name, stdCost(item_id),
               itemsite_costmethod, itemsite_value,
               (itemsite_value + (_itemlocdist.qty * -1 * CASE WHEN(itemsite_costmethod=&#39;A&#39;) THEN avgcost(itemsite_id)
                                                               ELSE stdCost(itemsite_item_id)
                                                          END))
        FROM item, itemsite, invhist, uom
        WHERE ((itemsite_item_id=item_id)
         AND (item_inv_uom_id=uom_id)
         AND (itemsite_controlmethod &lt;&gt; &#39;N&#39;)
         AND (itemsite_id=_itemlocdist.itemsiteid)
         AND (invhist_id=_itemlocdist.invhistid));

--  Adjust the parent itemsite
        UPDATE itemsite
        SET itemsite_qtyonhand = (itemsite_qtyonhand - _itemlocdist.qty),
            itemsite_nnqoh = (itemsite_nnqoh + _itemlocdist.qty)
        FROM itemloc
        WHERE ((itemloc_itemsite_id=itemsite_id)
         AND (itemloc_id=_itemlocid));
      END IF;

    END IF;

--  If, after the distribution, the target itemloc_qty = 0, delete the itemloc
--  if its parent itemsite is not frozen
    IF (NOT _itemlocdist.itemsite_freeze) THEN
      DELETE FROM itemloc
      WHERE ( (itemloc_qty=0)
       AND (itemloc_id=_itemlocid) );
    END IF;

  END LOOP;

  DELETE FROM itemlocdist
  WHERE (itemlocdist_series=pItemlocSeries);

  RETURN _distCounter;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.distributetodefault-integer">distributetodefault( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemlocdistid ALIAS FOR $1;
  _locationid INTEGER;
  _itemlocdistid INTEGER;
  _qty NUMERIC;

BEGIN

--  Make sure that the itemsite in question has a default location
  SELECT itemsite_location_id INTO _locationid
  FROM itemlocdist, itemsite
  WHERE ( (itemlocdist_itemsite_id=itemsite_id)
   AND (itemlocdist_id=pItemlocdistid) );
  IF ( (NOT FOUND) OR (_locationid = -1) ) THEN
    RETURN -1;
  END IF;

--  Determine the remaining qty required to distribute
  SELECT (p.itemlocdist_qty - COALESCE(SUM(c.itemlocdist_qty), 0)) INTO _qty
  FROM itemlocdist AS p LEFT OUTER JOIN itemlocdist AS c ON (c.itemlocdist_itemlocdist_id=p.itemlocdist_id)
  WHERE (p.itemlocdist_id=pItemlocdistid)
  GROUP BY p.itemlocdist_qty;

  IF (_qty = 0) THEN
    RETURN -1;
  END IF;

--  Check to see if an itemlocdist with the correct location/lotserial/expiration already exists
  SELECT target.itemlocdist_id INTO _itemlocdistid
  FROM itemlocdist AS source, itemlocdist AS target, itemloc, itemsite
  WHERE ( (target.itemlocdist_source_type=&#39;L&#39;)
   AND (target.itemlocdist_source_id=_locationid)
   AND (target.itemlocdist_itemsite_id=source.itemlocdist_itemsite_id)
   AND (COALESCE(target.itemlocdist_ls_id)=COALESCE(source.itemlocdist_ls_id))
   AND (target.itemlocdist_expiration=source.itemlocdist_expiration)
   AND (target.itemlocdist_itemlocdist_id=source.itemlocdist_itemlocdist_id)
   AND (target.itemlocdist_itemsite_id=itemsite_id)
   AND (source.itemlocdist_id=pItemlocdistid) );

  IF (FOUND) THEN
    UPDATE itemlocdist
    SET itemlocdist_qty = (itemlocdist_qty + _qty)
    WHERE (itemlocdist_id=_itemlocdistid);

    RETURN _itemlocdistid;
  END IF;

--  Create a new itemlocdist
  SELECT NEXTVAL(&#39;itemlocdist_itemlocdist_id_seq&#39;) INTO _itemlocdistid;

  INSERT INTO itemlocdist
  ( itemlocdist_id, itemlocdist_itemlocdist_id, itemlocdist_source_type,
    itemlocdist_ls_id, itemlocdist_expiration,
    itemlocdist_source_id, itemlocdist_itemsite_id, itemlocdist_qty )
  SELECT _itemlocdistid, pItemlocdistid, &#39;L&#39;,
         itemlocdist_ls_id, itemlocdist_expiration,
         _locationid, itemlocdist_itemsite_id, _qty
  FROM itemlocdist
  WHERE (itemlocdist_id=pItemlocdistid);

  RETURN _itemlocdistid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.distributetodefaultitemloc-integer">distributetodefaultitemloc( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemlocdistid ALIAS FOR $1;
  _itemlocid INTEGER;
  _itemlocdistid INTEGER;
  _qty NUMERIC;

BEGIN

--  Make sure that the itemsite in question has a default location
  SELECT itemloc_id INTO _itemlocid
    FROM itemlocdist, itemsite, itemloc
   WHERE ((itemlocdist_itemsite_id=itemsite_id)
     AND (itemsite_location_id=itemloc_location_id)
     AND (itemloc_itemsite_id=itemsite_id)
     AND (itemlocdist_id=pItemlocdistid));
  IF ( (NOT FOUND) OR (_itemlocid = -1) ) THEN
    RETURN -1;
  END IF;

--  Determine the remaining qty required to distribute
  SELECT (p.itemlocdist_qty - COALESCE(SUM(c.itemlocdist_qty), 0)) INTO _qty
    FROM itemlocdist AS p LEFT OUTER JOIN itemlocdist AS c
      ON (c.itemlocdist_itemlocdist_id=p.itemlocdist_id)
   WHERE (p.itemlocdist_id=pItemlocdistid)
   GROUP BY p.itemlocdist_qty;

  IF (_qty = 0) THEN
    RETURN -1;
  END IF;

--  Check to see if an itemlocdist with the correct location/lotserial/expiration already exists
  SELECT target.itemlocdist_id INTO _itemlocdistid
  FROM itemlocdist AS source, itemlocdist AS target
  WHERE ( (target.itemlocdist_source_type=&#39;I&#39;)
   AND (target.itemlocdist_source_id=_itemlocid)
   AND (COALESCE(target.itemlocdist_ls_id,-1)=COALESCE(source.itemlocdist_ls_id,-1))
   AND (target.itemlocdist_expiration=source.itemlocdist_expiration)
   AND (target.itemlocdist_itemlocdist_id=source.itemlocdist_id)
   AND (source.itemlocdist_id=pItemlocdistid) );

  IF (FOUND) THEN
    UPDATE itemlocdist
    SET itemlocdist_qty = (itemlocdist_qty + _qty)
    WHERE (itemlocdist_id=_itemlocdistid);

    RETURN _itemlocdistid;
  END IF;

--  Create a new itemlocdist
  SELECT NEXTVAL(&#39;itemlocdist_itemlocdist_id_seq&#39;) INTO _itemlocdistid;

  INSERT INTO itemlocdist
  ( itemlocdist_id, itemlocdist_itemlocdist_id,
    itemlocdist_source_type, itemlocdist_source_id,
    itemlocdist_qty, itemlocdist_expiration )
  VALUES
  ( _itemlocdistid, pItemlocdistid,
    &#39;I&#39;, _itemlocid,
    _qty, endOfTime() );

  RETURN _itemlocdistid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.distributetolocations-integer">distributetolocations( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemlocdistid ALIAS FOR $1;
  _distCounter INTEGER;
  _itemlocdist RECORD;
  _itemlocid INTEGER;
  _runningQty NUMERIC;
  _tmp RECORD;

BEGIN

  _distCounter := 0;
  _runningQty  := 0;

-- A scenario can occur where two people try to post distributions
-- to the same itemsite against two or more lot/serial/mlc locations
-- leading to a deadlock. This line tries to prevent that by locking
-- ahead of time all the itemsites that the transaction will need
-- before any of the other tables are locked individually.
  SELECT itemsite_id
    INTO _tmp
    FROM itemsite
   WHERE(itemsite_id in (SELECT DISTINCT itemlocdist_itemsite_id
                           FROM itemlocdist
                          WHERE(itemlocdist_id=pItemlocdistid)))
     FOR UPDATE;

--  March through all of the itemlocdist owned by the passed parent itemlocdist
  FOR _itemlocdist IN SELECT c.itemlocdist_id AS itemlocdistid,
                             c.itemlocdist_source_type AS type,
                             c.itemlocdist_source_id AS sourceid,
                             c.itemlocdist_qty AS qty,
                             p.itemlocdist_itemsite_id AS itemsiteid,
                             itemsite_freeze,
                             p.itemlocdist_invhist_id AS invhistid,
                             p.itemlocdist_ls_id AS lotserialid,
                             p.itemlocdist_expiration AS expiration,
                             p.itemlocdist_warranty AS warranty,
                             p.itemlocdist_order_type AS ordertype,
                             p.itemlocdist_order_id AS orderid
                      FROM itemlocdist AS c, itemlocdist AS p, itemsite
                      WHERE ( (c.itemlocdist_itemlocdist_id=p.itemlocdist_id)
                       AND (p.itemlocdist_source_type=&#39;O&#39;)
                       AND (p.itemlocdist_itemsite_id=itemsite_id)
                       AND (p.itemlocdist_id=pItemlocdistid) ) LOOP

    _distCounter := _distCounter + 1;

--  If the target for this itemlocdist is a location, check to see if the
--  required itemloc already exists
    IF (_itemlocdist.type = &#39;L&#39;) THEN
      SELECT itemloc_id INTO _itemlocid
      FROM itemloc
      WHERE ( (itemloc_itemsite_id=_itemlocdist.itemsiteid)
       AND (itemloc_location_id=_itemlocdist.sourceid)
       AND (COALESCE(itemloc_ls_id, -1)=COALESCE(_itemlocdist.lotserialid, -1))
       AND (itemloc_expiration=_itemlocdist.expiration)
       AND (COALESCE(itemloc_warrpurc,endoftime())=COALESCE(_itemlocdist.warranty,endoftime())) );

--  Nope, make it
      IF (NOT FOUND) THEN
        SELECT NEXTVAL(&#39;itemloc_itemloc_id_seq&#39;) INTO _itemlocid;
        INSERT INTO itemloc
        ( itemloc_id, itemloc_itemsite_id,
          itemloc_location_id, itemloc_qty,
          itemloc_ls_id, itemloc_expiration,
          itemloc_warrpurc )
        VALUES
        ( _itemlocid, _itemlocdist.itemsiteid,
          _itemlocdist.sourceid, 0,
          _itemlocdist.lotserialid, _itemlocdist.expiration,
          _itemlocdist.warranty );
      END IF;

    ELSE
--  Yep, cache it
      _itemlocid = _itemlocdist.sourceid;
    END IF;

--  Record the invdetail for this itemlocdist
    INSERT INTO invdetail
    ( invdetail_invhist_id, invdetail_location_id, invdetail_ls_id,
      invdetail_qty, invdetail_qty_before, invdetail_qty_after, invdetail_expiration, 
      invdetail_warrpurc )
    SELECT _itemlocdist.invhistid, itemloc_location_id, itemloc_ls_id,
           _itemlocdist.qty, itemloc_qty, (itemloc_qty + _itemlocdist.qty),
           itemloc_expiration,_itemlocdist.warranty
    FROM itemloc
    WHERE (itemloc_id=_itemlocid);

--  Update the parent invhist to indicate that it has invdetail records
    UPDATE invhist
    SET invhist_hasdetail=TRUE
    WHERE ((invhist_hasdetail=FALSE)
     AND (invhist_id=_itemlocdist.invhistid));

--  Update the itemloc_qty if its parent itemsite is not frozen
    IF (NOT _itemlocdist.itemsite_freeze) THEN
      UPDATE itemloc
      SET itemloc_qty = (itemloc_qty + _itemlocdist.qty)
      WHERE (itemloc_id=_itemlocid);

      PERFORM postInvHist(_itemlocdist.invhistid);

--  Update the itemloc reservation
      IF ( (SELECT fetchMetricBool(&#39;EnableSOReservationsByLocation&#39;)) AND
           (_itemlocdist.qty &lt; 0) ) THEN
        UPDATE itemlocrsrv
        SET itemlocrsrv_qty = (itemlocrsrv_qty + _itemlocdist.qty)
        WHERE ( (itemlocrsrv_itemloc_id=_itemlocid)
          AND   (itemlocrsrv_source=_itemlocdist.ordertype)
          AND   (itemlocrsrv_source_id=_itemlocdist.orderid) );
--  Delete reservation if fully distributed
        DELETE FROM itemlocrsrv
        WHERE ( (itemlocrsrv_itemloc_id=_itemlocid)
          AND   (itemlocrsrv_source=_itemlocdist.ordertype)
          AND   (itemlocrsrv_source_id=_itemlocdist.orderid)
          AND   (itemlocrsrv_qty=0) );
      END IF;
    END IF;

--  Adjust QOH if this itemlocdist is to/from a non-netable location
    IF ( SELECT (NOT location_netable)
         FROM itemloc, location
         WHERE ((itemloc_location_id=location_id)
          AND (itemloc_id=_itemlocid)) ) THEN

--  Record the invhist record for the netable-&gt;non-netable (or visaversa)
      INSERT INTO invhist
      ( invhist_itemsite_id,
        invhist_transtype, invhist_invqty,
        invhist_qoh_before, invhist_qoh_after,
        invhist_docnumber, invhist_comments,
        invhist_invuom, invhist_unitcost,
        invhist_costmethod, invhist_value_before, invhist_value_after )
      SELECT itemsite_id,
             &#39;NN&#39;, (_itemlocdist.qty * -1),
             itemsite_qtyonhand, (itemsite_qtyonhand - _itemlocdist.qty),
             invhist_docnumber, invhist_comments,
             uom_name, stdCost(item_id),
             itemsite_costmethod, itemsite_value,
             (itemsite_value + (_itemlocdist.qty * -1 * CASE WHEN(itemsite_costmethod=&#39;A&#39;) THEN avgcost(itemsite_id)
                                                             ELSE stdCost(itemsite_item_id)
                                                        END))
      FROM item, itemsite, invhist, uom
      WHERE ( (itemsite_item_id=item_id)
       AND (item_inv_uom_id=uom_id)
       AND (itemsite_controlmethod &lt;&gt; &#39;N&#39;)
       AND (itemsite_id=_itemlocdist.itemsiteid)
       AND (invhist_id=_itemlocdist.invhistid) );

--  Update the itemsite_qoh
      UPDATE itemsite
      SET itemsite_qtyonhand = (itemsite_qtyonhand - _itemlocdist.qty),
          itemsite_nnqoh = (itemsite_nnqoh + _itemlocdist.qty)
      FROM itemloc
      WHERE ((itemloc_itemsite_id=itemsite_id)
       AND (itemloc_id=_itemlocid));
    END IF;

--  Cache the running qty.
    _runningQty := _runningQty + _itemlocdist.qty;

--  Dene with the child itemlocdist, so delete it
    DELETE FROM itemlocdist
    WHERE (itemlocdist_id=_itemlocdist.itemlocdistid);

--  If the target itemloc is now at qty=0, delete it if its parent
--  itemsite is not frozen
    IF (NOT _itemlocdist.itemsite_freeze) THEN
      DELETE FROM itemloc
      WHERE ( (itemloc_qty=0)
       AND (itemloc_id=_itemlocid) );
    END IF;

  END LOOP;

--  If the running qty for the detailed distributions is the same as the
--  total qty to distribute indicated by the parent itemlocdist, then the
--  parent itemlocdist has been fully distributed and should be deleted.
  IF ( ( SELECT itemlocdist_qty
         FROM itemlocdist
         WHERE (itemlocdist_id=pItemlocdistid) ) = _runningQty) THEN
    DELETE FROM itemlocdist
    WHERE (itemlocdist_id=pItemlocdistid);
  ELSE
--  There is still some more qty to distribute in the parent itemlocdist.
--  Update the qty to distribute with the qty that has been distributed.
    UPDATE itemlocdist
    SET itemlocdist_qty = (itemlocdist_qty - _runningQty)
    WHERE (itemlocdist_id=pItemlocdistid);
  END IF;

  RETURN _distCounter;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.distributevoucherline-integer-integer-integer">distributevoucherline( integer, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVoucherId ALIAS FOR $1;
  pPoitemId ALIAS FOR $2;
  pCurrId ALIAS FOR $3;
  _count INTEGER;
  _costelemId INTEGER;
  _close BOOLEAN;
  _r RECORD;
  _qtyOrdered NUMERIC;
  _voitemId INTEGER;

BEGIN

--  Make sure the P/O and Voucher are same currency

  SELECT COALESCE(COUNT(*),0) INTO _count
        FROM pohead, poitem
        WHERE ((pohead_id=poitem_pohead_id)
        AND (pohead_curr_id=pCurrId));
  IF (_count = 0) THEN
        RETURN -3;
  END IF;

--  Validate and get cost element

        SELECT COALESCE(COUNT(*),0) INTO _count
                FROM itemcost, item, itemsite, poitem
                WHERE ((itemcost_item_id=item_id)
                AND (item_id=itemsite_item_id)
                AND (itemsite_id=poitem_itemsite_id)
                AND (poitem_id=pPoitemId));

        IF (_count &gt; 1) THEN
                RETURN -5;
        ELSEIF (_count = 1) THEN
                SELECT itemcost_costelem_id INTO _costelemId
                        FROM itemcost, item, itemsite, poitem
                        WHERE ((itemcost_item_id=item_id)
                        AND (item_id=itemsite_item_id)
                        AND (itemsite_id=poitem_itemsite_id)
                        AND (poitem_id=pPoitemId));
        ELSE
                SELECT costelem_id INTO _costelemId
                        FROM costelem
                        WHERE (costelem_type=&#39;Material&#39;);
        END IF;


--  Clear previous distributions

        UPDATE recv SET recv_vohead_id=NULL, recv_voitem_id=NULL
                WHERE ((recv_vohead_id=pVoucherId)
                AND (recv_orderitem_id=pPoitemId)
		AND (recv_order_type=&#39;PO&#39;));
        UPDATE poreject SET poreject_vohead_id=NULL, poreject_voitem_id=NULL
                WHERE ((poreject_vohead_id=pVoucherId)
                AND (poreject_poitem_id=pPoitemId));
        DELETE FROM vodist
                WHERE ((vodist_poitem_id=pPoitemId)
                AND (vodist_vohead_id=pVoucherId));
        DELETE FROM voitem
                WHERE ((voitem_poitem_id=pPoitemId)
                AND (voitem_vohead_id=pVoucherId));

--  Determine Line balances

        SELECT  COALESCE(SUM(qty_received),0) AS qty_received,
                COALESCE(SUM(qty_rejected),0) AS qty_rejected,
                COALESCE(SUM(qty_vouchered),0) AS qty_vouchered,
                round(COALESCE(SUM(balance),0),2) AS balance,
                round(COALESCE(SUM(freight),0),2) AS freight INTO _r
         FROM   (
                SELECT  recv_qty AS qty_received,
                        0 AS qty_rejected,
                        0 AS qty_vouchered,
                        (recv_qty * poitem_unitprice) AS balance,
                        recv_freight AS freight
                FROM recv, poitem
                WHERE ( (recv_vohead_id IS NULL)
                        AND (poitem_id=recv_orderitem_id)
                        AND (NOT recv_invoiced)
			AND (recv_order_type=&#39;PO&#39;)
                        AND (recv_orderitem_id=pPoitemId) )

                UNION ALL

                SELECT  0 AS qty_received,
                        (poreject_qty) AS qty_rejected,
                        0 AS qty_vouchered,
                        (poreject_qty * -1 * poitem_unitprice) AS balance,
                        0 AS freight
                FROM poreject, poitem
                WHERE ( (poreject_posted)
                        AND (poreject_vohead_id IS NULL)
                        AND (NOT poreject_invoiced)
                        AND (poitem_id=poreject_poitem_id)
                        AND (poreject_poitem_id=pPoitemId) )

                UNION ALL

                SELECT  0 AS qty_received,
                        0 AS qty_rejected,
                        voitem_qty AS qty_vouchered,
                        0 AS balance,
                        0 AS freight
                FROM voitem, poitem
                WHERE ( (voitem_poitem_id=pPoitemId)
                        AND (poitem_id=voitem_poitem_id) )
                ) AS data;

                SELECT poitem_qty_ordered INTO _qtyOrdered
                FROM poitem
                WHERE (poitem_id=pPoitemId);

        IF _r.balance &lt; 0 THEN
                RETURN -4;
        ELSEIF ( ((_r.qty_received &lt;&gt; 0) OR (_r.qty_received &lt;&gt; 0)) AND (_r.qty_received - _r.qty_rejected = 0) ) THEN
                RETURN -2;
        ELSEIF ((_r.qty_received - _r.qty_rejected) = 0) THEN
                RETURN 0;
        END IF;

-- Determine whether to close P/O item

        IF (_r.qty_received -_r.qty_rejected + _r.qty_vouchered) &gt;= _qtyOrdered THEN
                _close:=True;
        ELSE
                _close:=False;
        END IF;


-- Create voucher item
        SELECT NEXTVAL(&#39;voitem_voitem_id_seq&#39;) INTO _voitemId;

        INSERT INTO voitem (voitem_id,voitem_vohead_id,voitem_poitem_id,voitem_close,voitem_qty,voitem_freight)
                VALUES (_voitemId,pVoucherId,pPoitemId,_close,(_r.qty_received -_r.qty_rejected),_r.freight);

-- Create distribution

        INSERT INTO vodist
                (vodist_poitem_id,vodist_vohead_id,vodist_costelem_id,vodist_amount,vodist_qty,vodist_expcat_id)
                VALUES (pPoitemId,pVoucherId,_costelemId,_r.balance,(_r.qty_received -_r.qty_rejected),-1);

-- Tag receipt records

        UPDATE recv
        SET recv_vohead_id=pVoucherId, recv_voitem_id=_voitemId
        WHERE ((recv_orderitem_id=pPoitemId)
	  AND  (recv_order_type=&#39;PO&#39;)
          AND  (recv_vohead_id IS NULL));

        UPDATE poreject
        SET poreject_vohead_id=pVoucherId,poreject_voitem_id=_voitemId
        WHERE ((poreject_poitem_id=pPoitemId)
        AND (poreject_vohead_id IS NULL));


  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.dopostcosts-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean">dopostcosts( boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE

  pMaterial ALIAS FOR $1;
  plowerMaterial ALIAS FOR $2;
  pdirectLabor ALIAS FOR $3;
  plowerDirectLabor ALIAS FOR $4;
  poverhead ALIAS FOR $5;
  plowerOverhead ALIAS FOR $6;
  pmachOverhead ALIAS FOR $7;
  plowerMachOverhead ALIAS FOR $8;
  pUser ALIAS FOR $9;
  plowerUser ALIAS FOR $10;
  prollUp ALIAS FOR $11;
  _item RECORD;
  _result INTEGER := 0;

BEGIN

  PERFORM resetLowLevelCode(-1);

  FOR _item IN SELECT costUpdate_item_id
            FROM costUpdate
            ORDER BY costUpdate_lowlevel_code DESC LOOP
    PERFORM doPostCosts(_item.costUpdate_item_id, FALSE,
		       pMaterial, plowerMaterial, pdirectLabor,
		       plowerDirectLabor, poverhead, plowerOverhead,
		       pmachOverhead, plowerMachOverhead,
		       puser, plowerUser, prollUp);
  END LOOP;

  RETURN _result;

END;
 </pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.dopostcosts-integer-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean">dopostcosts( integer, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE

  pItemId ALIAS FOR $1;
  pResetLowLevel ALIAS FOR $2;
  pMaterial ALIAS FOR $3;
  plowerMaterial ALIAS FOR $4;
  pdirectLabor ALIAS FOR $5;
  plowerDirectLabor ALIAS FOR $6;
  poverhead ALIAS FOR $7;
  plowerOverhead ALIAS FOR $8;
  pmachOverhead ALIAS FOR $9;
  plowerMachOverhead ALIAS FOR $10;
  pUser ALIAS FOR $11;
  plowerUser ALIAS FOR $12;
  prollUp ALIAS FOR $13;
  _itemcost RECORD;
  _result INTEGER;

BEGIN

    IF (pResetLowLevel) THEN
	PERFORM resetLowLevelCode(pItemId);
    END IF;

    FOR _itemcost IN SELECT itemcost_id, costelem_sys, costelem_type,
			    itemcost_lowlevel,
			    costUpdate_lowlevel_code, costUpdate_item_type
            FROM itemcost, costelem, costUpdate
            WHERE itemcost_item_id = pItemId
	      AND costUpdate_item_id = itemcost_item_id
              AND itemcost_costelem_id = costelem_id LOOP
      IF (NOT _itemcost.costelem_sys) THEN
        IF ( (pUser) AND ( NOT _itemcost.itemcost_lowlevel) ) THEN
          PERFORM postCost(_itemcost.itemcost_id);
          _result := _result + 1;
        END IF;
        IF ( (plowerUser) AND ( _itemcost.itemcost_lowlevel) ) THEN
          PERFORM postCost(_itemcost.itemcost_id);
          _result := _result + 1;
        END IF;
      END IF;

      IF (_itemcost.costelem_type = &#39;Material&#39;) THEN
        IF ( (pMaterial) AND ( NOT _itemcost.itemcost_lowlevel) ) THEN
          PERFORM postCost(_itemcost.itemcost_id);
          _result := _result + 1;
        END IF;
        IF ( (plowerMaterial) AND ( _itemcost.itemcost_lowlevel) ) THEN
          PERFORM postCost(_itemcost.itemcost_id);
          _result := _result + 1;
        END IF;
      END IF;

      IF (_itemcost.costelem_type = &#39;Direct Labor&#39;) THEN
        IF ( (pdirectLabor) AND ( NOT _itemcost.itemcost_lowlevel) ) THEN
          PERFORM postCost(_itemcost.itemcost_id);
          _result := _result + 1;
        END IF;
        IF ( (plowerDirectLabor) AND ( _itemcost.itemcost_lowlevel) ) THEN
          PERFORM postCost(_itemcost.itemcost_id);
          _result := _result + 1;
        END IF;
      END IF;

      IF (_itemcost.costelem_type = &#39;Overhead&#39;) THEN
        IF ( (poverhead) AND ( NOT _itemcost.itemcost_lowlevel) ) THEN
          PERFORM postCost(_itemcost.itemcost_id);
          _result := _result + 1;
        END IF;
        IF ( (plowerOverhead) AND ( _itemcost.itemcost_lowlevel) ) THEN
          PERFORM postCost(_itemcost.itemcost_id);
          _result := _result + 1;
        END IF;
      END IF;

      IF (_itemcost.costelem_type = &#39;Machine Overhead&#39;) THEN
        IF ( (pmachOverhead) AND ( NOT _itemcost.itemcost_lowlevel) ) THEN
          PERFORM postCost(_itemcost.itemcost_id);
          _result := _result + 1;
        END IF;
        IF ( (plowerMachOverhead) AND ( _itemcost.itemcost_lowlevel) ) THEN
          PERFORM postCost(_itemcost.itemcost_id);
          _result := _result + 1;
        END IF;
      END IF;

    END LOOP;

    IF (prollUp) THEN    
      PERFORM rollUpStandardCost(pItemId);
      _result := _result + 1;
    END IF;

    RETURN _result;

END;
 </pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.doupdatecosts-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean">doupdatecosts( boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE

  plowerMaterial ALIAS FOR $1;
  pdirectLabor ALIAS FOR $2;
  plowerDirectLabor ALIAS FOR $3;
  poverhead ALIAS FOR $4;
  plowerOverhead ALIAS FOR $5;
  pmachOverhead ALIAS FOR $6;
  plowerMachOverhead ALIAS FOR $7;
  plowerUser ALIAS FOR $8;
  prollUp ALIAS FOR $9;

BEGIN
  RETURN doUpdateCosts(plowerMaterial, pdirectLabor, plowerDirectLabor,
		       poverhead, plowerOverhead, pmachOverhead,
		       plowerMachOverhead, plowerUser, prollUp, TRUE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.doupdatecosts-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean">doupdatecosts( boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE

  plowerMaterial ALIAS FOR $1;
  pdirectLabor ALIAS FOR $2;
  plowerDirectLabor ALIAS FOR $3;
  poverhead ALIAS FOR $4;
  plowerOverhead ALIAS FOR $5;
  pmachOverhead ALIAS FOR $6;
  plowerMachOverhead ALIAS FOR $7;
  plowerUser ALIAS FOR $8;
  prollUp ALIAS FOR $9;
  pActual ALIAS FOR $10;
  _item RECORD;
  _bom RECORD;
  _result INTEGER := 0;

BEGIN

  PERFORM resetLowLevelCode(-1);

  FOR _item IN SELECT costUpdate_item_id
            FROM costUpdate
            ORDER BY costUpdate_lowlevel_code DESC LOOP
    PERFORM doUpdateCosts(_item.costUpdate_item_id, false, plowerMaterial,
		  pdirectLabor, plowerDirectLabor, poverhead, plowerOverhead,
		  pmachOverhead, plowerMachOverhead, plowerUser, prollUp,
		  pActual);
  END LOOP;

  RETURN _result;

END;
 </pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.doupdatecosts-integer-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean">doupdatecosts( integer, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE

  pItemId ALIAS FOR $1;
  pResetLowLevel ALIAS FOR $2;
  plowerMaterial ALIAS FOR $3;
  pdirectLabor ALIAS FOR $4;
  plowerDirectLabor ALIAS FOR $5;
  poverhead ALIAS FOR $6;
  plowerOverhead ALIAS FOR $7;
  pmachOverhead ALIAS FOR $8;
  plowerMachOverhead ALIAS FOR $9;
  plowerUser ALIAS FOR $10;
  prollUp ALIAS FOR $11;

BEGIN
    RETURN doUpdateCosts(pItemId, pResetLowLevel, plowerMaterial, pdirectLabor,
			 plowerDirectLabor, poverhead, plowerOverhead,
			 pmachOverhead, plowerMachOverhead, plowerUser, prollUp,
			 TRUE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.doupdatecosts-integer-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean">doupdatecosts( integer, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE

  pItemId ALIAS FOR $1;
  pResetLowLevel ALIAS FOR $2;
  plowerMaterial ALIAS FOR $3;
  pdirectLabor ALIAS FOR $4;
  plowerDirectLabor ALIAS FOR $5;
  poverhead ALIAS FOR $6;
  plowerOverhead ALIAS FOR $7;
  pmachOverhead ALIAS FOR $8;
  plowerMachOverhead ALIAS FOR $9;
  plowerUser ALIAS FOR $10;
  prollUp ALIAS FOR $11;
  pUpdateActual ALIAS FOR $12;
  _item RECORD;
  _bom RECORD;
  _result INTEGER := 0;
  _resultFromReset INTEGER;
  _counterNum INTEGER;
  _feedBackNum INTEGER;

BEGIN

    IF (pResetLowLevel) THEN
	PERFORM resetLowLevelCode(pItemId);
    END IF;

    SELECT costUpdate_item_id AS item_id, costUpdate_item_type AS item_type
	INTO _item
    FROM costUpdate
    WHERE costUpdate_item_id = pItemId;

    IF ((plowerMaterial) AND ((_item.item_type &lt;&gt; &#39;P&#39;) AND (_item.item_type &lt;&gt; &#39;O&#39;))) THEN    
      PERFORM updateSorACost(_item.item_id, &#39;Material&#39;, TRUE, lowerCost(_item.item_id, &#39;Material&#39;, pUpdateActual), pUpdateActual);
    END IF;

    IF (pdirectLabor) THEN    
      PERFORM updateSorACost(_item.item_id, &#39;Direct Labor&#39;, FALSE, directLaborCost(_item.item_id), pUpdateActual);
    END IF;

    IF (plowerDirectLabor) THEN    
      PERFORM updateSorACost(_item.item_id, &#39;Direct Labor&#39;, TRUE, lowerCost(_item.item_id, &#39;Direct Labor&#39;, pUpdateActual), pUpdateActual);
    END IF;

    IF (poverhead) THEN    
      PERFORM updateSorACost(_item.item_id, &#39;Overhead&#39;, FALSE, overheadCost(_item.item_id), pUpdateActual);
    END IF;

    IF (plowerOverhead) THEN    
      PERFORM updateSorACost(_item.item_id, &#39;Overhead&#39;, TRUE, lowerCost(_item.item_id, &#39;Overhead&#39;, pUpdateActual), pUpdateActual);
    END IF;

    IF (pmachOverhead) THEN    
      PERFORM updateSorACost(_item.item_id, &#39;Machine Overhead&#39;, FALSE, machineOverheadCost(_item.item_id), pUpdateActual);
    END IF;

    IF (plowerMachOverhead) THEN    
      PERFORM updateSorACost(_item.item_id, &#39;Machine Overhead&#39;, TRUE, lowerCost(_item.item_id, &#39;Machine Overhead&#39;, pUpdateActual), pUpdateActual);
    END IF;

    IF (plowerUser) THEN    
      PERFORM updateLowerUserCosts(_item.item_id, pUpdateActual);
    END IF;

    IF (prollUp) THEN    
      PERFORM rollUpSorACost(_item.item_id, pUpdateActual);
    END IF;

    RETURN _result;

END;
 </pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.dropifexists-text-text">dropifexists( text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN dropIfExists($1, $2, &#39;public&#39;);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.dropifexists-text-text-text">dropifexists( text, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN dropIfExists($1, $2, $3, false);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.dropifexists-text-text-text-boolean">dropifexists( text, text, text, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pType         ALIAS FOR $1;
  pObject       ALIAS FOR $2;
  pSchema       ALIAS FOR $3;
  pCascade      ALIAS FOR $4;
  _table	TEXT;
  _query	TEXT;
BEGIN
  IF (UPPER(pType) = &#39;TABLE&#39;) THEN
    _query = &#39;DROP TABLE &#39; || quote_ident(LOWER(pSchema)) || &#39;.&#39; || quote_ident(LOWER(pObject)); 
    
    IF (pCascade) THEN
      _query = _query || &#39; CASCADE&#39;;
    END IF;

    BEGIN
      EXECUTE _query;
    EXCEPTION WHEN undefined_table OR invalid_schema_name THEN
		RETURN 0;
	      WHEN OTHERS THEN RAISE EXCEPTION &#39;% %&#39;, SQLSTATE, SQLERRM;
    END;

  ELSIF (UPPER(pType) = &#39;VIEW&#39;) THEN
    _query = &#39;DROP VIEW &#39; || quote_ident(LOWER(pSchema)) || &#39;.&#39; || quote_ident(LOWER(pObject));

    IF (pCascade) THEN
      _query = _query || &#39; CASCADE&#39;;
    END IF;
    
    BEGIN
      EXECUTE _query;
    EXCEPTION WHEN undefined_table OR invalid_schema_name THEN
		RETURN 0;
	      WHEN OTHERS THEN RAISE EXCEPTION &#39;% %&#39;, SQLSTATE, SQLERRM;
    END;

  ELSIF (UPPER(pType) = &#39;TRIGGER&#39;) THEN
    SELECT relname INTO _table
    FROM pg_trigger, pg_class
    WHERE ((tgrelid=pg_class.oid)
      AND  (UPPER(tgname)=UPPER(pObject)));
    IF (NOT FOUND) THEN
      _table := &#39;[no table]&#39;;
    END IF;

    _query = &#39;DROP TRIGGER &#39; || quote_ident(LOWER(pObject)) ||
	     &#39; ON &#39; || quote_ident(LOWER(pSchema)) || &#39;.&#39; || quote_ident(LOWER(_table));
    BEGIN
      EXECUTE _query;
    EXCEPTION WHEN undefined_object THEN
		RETURN 0;
	      WHEN undefined_table OR invalid_schema_name THEN
		RETURN 0;
	      WHEN OTHERS THEN RAISE EXCEPTION &#39;% %&#39;, SQLSTATE, SQLERRM;
    END;

  ELSIF (UPPER(pType) = &#39;FUNCTION&#39;) THEN
    _query = &#39;DROP FUNCTION &#39; || (LOWER(pSchema)) || &#39;.&#39; ||
                                   (LOWER(pObject));
    BEGIN
      EXECUTE _query;
    EXCEPTION WHEN undefined_function THEN
		RETURN 0;
	      WHEN OTHERS THEN RAISE EXCEPTION &#39;% %&#39;, SQLSTATE, SQLERRM;
    END;

  ELSIF (UPPER(pType) = &#39;CONSTRAINT&#39;) THEN
    IF( (SELECT count(*)
           FROM pg_constraint, pg_class, pg_namespace
          WHERE((conrelid=pg_class.oid)
            AND (connamespace=pg_namespace.oid)
            AND (conname=pObject)
            AND (nspname=pSchema))
         ) &gt; 1 ) THEN
      RAISE EXCEPTION &#39;dropIfExists called on constraint name that matches more than 1 constraint.&#39;;
    END IF;
    SELECT relname INTO _table
    FROM pg_constraint, pg_class, pg_namespace
    WHERE ((conrelid=pg_class.oid)
      AND  (connamespace=pg_namespace.oid)
      AND  (conname=pObject)
      AND  (nspname=pSchema));
    IF (NOT FOUND) THEN
      RETURN 0;
    END IF;
    _query = &#39;ALTER TABLE &#39; || quote_ident(LOWER(pSchema)) || &#39;.&#39; || quote_ident(LOWER(_table))
             || &#39; DROP CONSTRAINT &#39; || quote_ident(LOWER(pObject));
    BEGIN
      EXECUTE _query;
    EXCEPTION WHEN undefined_table OR invalid_schema_name THEN
		RETURN 0;
	      WHEN OTHERS THEN RAISE EXCEPTION &#39;% %&#39;, SQLSTATE, SQLERRM;
    END;

  ELSIF (UPPER(pType) = &#39;SCHEMA&#39;) THEN
    _query = &#39;DROP SCHEMA &#39; || quote_ident(LOWER(pObject));
    BEGIN
      EXECUTE _query;
    EXCEPTION WHEN invalid_schema_name THEN
                RETURN 0;
              WHEN OTHERS THEN RAISE EXCEPTION &#39;% %&#39;, SQLSTATE, SQLERRM;
    END;

  ELSIF (UPPER(pType) = &#39;TYPE&#39;) THEN
    _query = &#39;DROP TYPE &#39; || quote_ident(LOWER(pSchema)) || &#39;.&#39; ||
                               quote_ident(LOWER(pObject));
    BEGIN
      EXECUTE _query;
    EXCEPTION WHEN undefined_object THEN
                RETURN 0;
              WHEN OTHERS THEN RAISE EXCEPTION &#39;% %&#39;, SQLSTATE, SQLERRM;
    END;

  ELSE
    RAISE EXCEPTION &#39;dropIfExists(%, %): unknown pType %&#39;, pType, pObject, pType;
  END IF;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.dropifexists-text-text-text-text">dropifexists( text, text, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pType         ALIAS FOR $1;
  pObject       ALIAS FOR $2;
  pSchema       ALIAS FOR $3;
  pRelation     ALIAS FOR $4;
  _table        TEXT;
  _query	TEXT;
BEGIN
  IF (UPPER(pType) = &#39;CONSTRAINT&#39;) THEN
    SELECT relname INTO _table
    FROM pg_constraint, pg_class, pg_namespace
    WHERE ((conrelid=pg_class.oid)
      AND  (connamespace=pg_namespace.oid)
      AND  (conname=pObject)
      AND  (relname=pRelation)
      AND  (nspname=pSchema));
    IF (NOT FOUND) THEN
      RETURN 0;
    END IF;
    _query = &#39;ALTER TABLE &#39; || quote_ident(LOWER(pSchema)) || &#39;.&#39; || quote_ident(LOWER(pRelation))
             || &#39; DROP CONSTRAINT &#39; || quote_ident(LOWER(pObject));
    BEGIN
      EXECUTE _query;
    EXCEPTION WHEN undefined_table OR invalid_schema_name THEN
		RETURN 0;
	      WHEN OTHERS THEN RAISE EXCEPTION &#39;% %&#39;, SQLSTATE, SQLERRM;
    END;

  ELSE
    RAISE EXCEPTION &#39;dropIfExists(%, %, %, %): pType % is not supported when relation is specified&#39;, pType, pObject, pSchema, pRelation, pType;
  END IF;

  RETURN 1;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.editccnumber-text-text">editccnumber( text, text )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCcardnum ALIAS FOR $1;
  pCcardtype ALIAS FOR $2;
  card_length INTEGER;
  card_valid boolean := false;
  starting_digits TEXT;
  _sum INTEGER := 0;
  _digit INTEGER := 0;
  _timesTwo BOOLEAN := false;
BEGIN

-- Check the card type
  IF (pCcardtype NOT IN (&#39;M&#39;, &#39;V&#39;, &#39;A&#39;, &#39;D&#39;)) THEN
-- Unknown Card Type
   RETURN -1;
  END IF;

  card_length := length(pCcardnum);

-- Process Master Card Checking length
-- Process Master Card Starting digits
  IF (pCcardtype = &#39;M&#39;) THEN
    IF (card_length != 16) THEN
-- Bad Card Length Card Type
      RETURN -2;
    END IF;
    starting_digits := substr(pCcardnum, 1, 2);
    IF (starting_digits &lt; &#39;51&#39; OR starting_digits &gt; &#39;55&#39;) THEN
-- Bad Starting digits
      RETURN -6;
    END IF;
  END IF;

-- Process Visa Card Checking length
-- Process Visa Card Starting digits
  IF (pCcardtype = &#39;V&#39;) THEN
    IF (card_length != 13 AND card_length != 16) THEN
-- Bad Card Length Card Type
      RETURN -3;
    END IF;
    starting_digits := substr(pCcardnum, 1, 1);
    IF (starting_digits != &#39;4&#39;) THEN
-- Bad Starting digits
      RETURN -7;
    END IF;
  END IF;

-- Process American Express Card Checking length
-- Process American Express Card Starting digits
  IF (pCcardtype = &#39;A&#39;) THEN
    IF (card_length != 15) THEN
-- Bad Card Length Card Type
      RETURN -4;
    END IF;
    starting_digits := substr(pCcardnum, 1, 2);
    IF (starting_digits != &#39;34&#39; AND starting_digits != &#39;37&#39;) THEN
-- Bad Starting digits
      RETURN -8;
    END IF;
  END IF;

-- Process Discover Card Checking length
-- Process Discover Card Starting digits
  IF (pCcardtype = &#39;D&#39;) THEN
    IF (card_length != 16) THEN
-- Bad Card Length Card Type
      RETURN -5;
    END IF;
    starting_digits := substr(pCcardnum, 1, 4);
    IF (starting_digits != &#39;6011&#39;) THEN
-- Bad Starting digits
      RETURN -9;
    END IF;
  END IF;

-- Now comes the fun part of doing the &quot;check&quot; for the check sum
-- perform a luhn checksum
  FOR i IN REVERSE card_length .. 1 LOOP
    _digit := int4(substr(pCcardnum, i, 1));
    IF (_timesTwo) THEN
      _digit := _digit * 2;
      IF (_digit &gt; 9) THEN
        _digit := _digit - 9;
      END IF;
    END IF;
    _sum := _sum + _digit;
    _timesTwo := NOT _timesTwo;
  END LOOP;

  IF (mod(_sum, 10) != 0) THEN
    RETURN -10;
  END IF;

  RETURN 0; -- No Error

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.enablepackage-integer">enablepackage( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  ppkgheadid    ALIAS FOR $1;
  _pkgname      TEXT;

BEGIN
  SELECT pkghead_name INTO _pkgname
  FROM pkghead
  WHERE (pkghead_id=ppkgheadid);
  IF (NOT FOUND) THEN
    RETURN -2;
  END IF;

  RETURN enablePackage(_pkgname);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.enablepackage-text">enablepackage( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  ppkgname  ALIAS FOR $1;
  _i        INTEGER := 0;
  _tabs     TEXT[] := ARRAY[&#39;cmd&#39;,  &#39;cmdarg&#39;, &#39;image&#39;,  &#39;metasql&#39;,
                            &#39;priv&#39;, &#39;report&#39;, &#39;script&#39;, &#39;uiform&#39;];

BEGIN
  IF (version() &lt; &#39;PostgreSQL 8.2&#39;) THEN
    RETURN -1;
  END IF;

  FOR _i IN ARRAY_LOWER(_tabs,1)..ARRAY_UPPER(_tabs,1) LOOP
    EXECUTE &#39;ALTER TABLE &#39; || ppkgname || &#39;.pkg&#39; || _tabs[_i] ||
            &#39; INHERIT public.&#39; || _tabs[_i] || &#39;;&#39;;
  END LOOP;

  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.encrypt-bytea-bytea-text">encrypt( bytea, bytea, text )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: C</h3>
        
        <pre>pg_encrypt</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.encrypt-iv-bytea-bytea-bytea-text">encrypt_iv( bytea, bytea, bytea, text )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: C</h3>
        
        <pre>pg_encrypt_iv</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.endoftime">endoftime(  )</a>
		</h2>
<h3>Returns: date</h3>
<h3>Language: SQL</h3>
        
        <pre>
SELECT DATE(&#39;2100-01-01&#39;) as result;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.entercount-integer-numeric-text">entercount( integer, numeric, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pInvcntid ALIAS FOR $1;
  pQty ALIAS FOR $2;
  pComments ALIAS FOR $3;
BEGIN

  UPDATE invcnt
  SET invcnt_qoh_after = pQty,
      invcnt_comments = CASE WHEN ( (LENGTH(invcnt_comments) = 0) AND
                                    (LENGTH(pComments) &gt; 0) ) THEN pComments
                             WHEN (LENGTH(pComments) &gt; 0) THEN (invcnt_comments || &#39;
&#39; || pComments)
                             ELSE invcnt_comments
                        END,
      invcnt_cntdate = CURRENT_TIMESTAMP,
      invcnt_cnt_usr_id = currentUserId()
  WHERE (invcnt_id=pInvcntid);

  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.enterporeceipt-integer-numeric">enterporeceipt( integer, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN enterReceipt(&#39;PO&#39;, $1, $2, 0.0, &#39;&#39;, NULL, NULL);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.enterporeceipt-integer-numeric-numeric-text">enterporeceipt( integer, numeric, numeric, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN enterPoReceipt(&#39;PO&#39;, $1, $2, $3, $4, NULL, NULL);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.enterporeceipt-integer-numeric-numeric-text-integer-date">enterporeceipt( integer, numeric, numeric, text, integer, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN enterReceipt(&#39;PO&#39;, $1, $2, $3, $4, $5, $6);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.enterporeceipt-integer-numeric-text">enterporeceipt( integer, numeric, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN enterPoReceipt(&#39;PO&#39;, $1, $2, 0.0, $3, NULL, NULL);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.enterporeturn-integer-numeric-integer">enterporeturn( integer, numeric, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPoitemid ALIAS FOR $1;
  pQty ALIAS FOR $2;
  pRjctcodeid ALIAS FOR $3;
  _porejectid INTEGER;

BEGIN

  SELECT NEXTVAL(&#39;poreject_poreject_id_seq&#39;) INTO _porejectid;

  INSERT INTO poreject
  ( poreject_id, poreject_date, poreject_ponumber, poreject_poitem_id, poreject_trans_usr_id,
    poreject_agent_username, poreject_itemsite_id,
    poreject_vend_id, poreject_vend_item_number, poreject_vend_item_descrip, poreject_vend_uom,
    poreject_qty, poreject_rjctcode_id, poreject_posted, poreject_invoiced )
  SELECT _porejectid, CURRENT_TIMESTAMP, pohead_number, poitem_id, currentUserId(),
         pohead_agent_username, poitem_itemsite_id,
         pohead_vend_id, poitem_vend_item_number, poitem_vend_item_descrip, poitem_vend_uom,
         pQty, pRjctcodeid, FALSE, FALSE
  FROM pohead, poitem
  WHERE ( (poitem_pohead_id=pohead_id)
   AND (poitem_id=pPoitemid) );

  RETURN _porejectid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.enterreceipt-text-integer-numeric-numeric-text-integer-date">enterreceipt( text, integer, numeric, numeric, text, integer, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pordertype	ALIAS FOR $1;
  porderitemid	ALIAS FOR $2;
  pQty		ALIAS FOR $3;
  pFreight	ALIAS FOR $4;
  pNotes	ALIAS FOR $5;
  pcurrid	ALIAS FOR $6;	-- NULL is handled by SELECT ... INTO _o
  precvdate	ALIAS FOR $7;	-- NULL is handled by INSERT INTO recv
  _timestamp    TIMESTAMP;
  _o		RECORD;
  _recvid	INTEGER;
  _warehouseid 	INTEGER;

BEGIN
  IF(precvdate IS NULL OR precvdate = CURRENT_DATE) THEN
    _timestamp := CURRENT_TIMESTAMP;
  ELSE
    _timestamp := precvdate;
  END IF;
  SELECT NEXTVAL(&#39;recv_recv_id_seq&#39;) INTO _recvid;

  DELETE FROM recv
  WHERE ((NOT recv_posted)
    AND  (recv_order_type=pordertype)
    AND  (recv_orderitem_id=porderitemid) );

  IF (pQty &gt; 0) THEN
    IF (fetchmetricbool(&#39;MultiWhs&#39;)) THEN
      SELECT orderhead_number,
  	   orderitem_id,
	   orderhead_agent_username,
	   CASE WHEN (orderitem_itemsite_id = -1) THEN NULL
		WHEN (pordertype=&#39;TO&#39;) THEN
		     (SELECT itemsite_id
		      FROM itemsite, tohead, toitem
		      WHERE ((itemsite_warehous_id=tohead_dest_warehous_id)
			AND  (tohead_id=toitem_tohead_id)
			AND  (itemsite_item_id=toitem_item_id)
			AND  (toitem_id=orderitem_id)))
		ELSE orderitem_itemsite_id
	   END AS itemsite_id,
	   CASE WHEN (pordertype=&#39;PO&#39;) THEN orderhead_from_id
		ELSE NULL
	   END AS vend_id,
	   COALESCE(poitem_vend_item_number, &#39;&#39;) AS vend_item_number,
	   COALESCE(poitem_vend_item_descrip, &#39;&#39;) AS vend_item_descrip,
	   COALESCE(poitem_vend_uom, &#39;&#39;) AS vend_uom,
	   orderitem_scheddate AS duedate,
	   orderitem_unitcost,
	   orderitem_unitcost_curr_id,
	   orderhead_curr_id AS freight_curr_id INTO _o
        FROM orderhead, orderitemdata(pordertype, NULL, porderitemid) AS orderitem LEFT OUTER JOIN
	   poitem ON (orderitem_orderhead_type=&#39;PO&#39; AND orderitem_id=poitem_id)
        WHERE ((orderhead_id=orderitem_orderhead_id)
          AND  (orderhead_type=orderitem_orderhead_type));

        --Make sure user has site privileges
        IF ((FOUND) AND (_o.itemsite_id IS NOT NULL)) THEN
          SELECT warehous_id INTO _warehouseid
          FROM itemsite,site()
          WHERE ((itemsite_id=_o.itemsite_id)
          AND (warehous_id=itemsite_warehous_id));
          
          IF (NOT FOUND) THEN
            RETURN 0;
          END IF;
        END IF;
    ELSE
     SELECT orderhead_number,
	   orderitem_id,
	   orderhead_agent_username,
	   CASE WHEN (orderitem_itemsite_id = -1) THEN NULL
           ELSE orderitem_itemsite_id
	   END AS itemsite_id,
	   CASE WHEN (pordertype=&#39;PO&#39;) THEN orderhead_from_id
		ELSE NULL
	   END AS vend_id,
	   COALESCE(poitem_vend_item_number, &#39;&#39;) AS vend_item_number,
	   COALESCE(poitem_vend_item_descrip, &#39;&#39;) AS vend_item_descrip,
	   COALESCE(poitem_vend_uom, &#39;&#39;) AS vend_uom,
	   orderitem_scheddate AS duedate,
	   orderitem_unitcost,
	   orderitem_unitcost_curr_id,
	   orderhead_curr_id AS freight_curr_id INTO _o
        FROM orderhead, orderitemdata(pordertype, NULL, porderitemid) AS orderitem LEFT OUTER JOIN
	   poitem ON (orderitem_orderhead_type=&#39;PO&#39; AND orderitem_id=poitem_id)
        WHERE ((orderhead_id=orderitem_orderhead_id)
          AND  (orderhead_type=orderitem_orderhead_type));
    END IF;

      IF (NOT FOUND) THEN
	RETURN -1;
      END IF;

    INSERT INTO recv
    ( recv_id, recv_date,
      recv_order_number, recv_order_type, recv_orderitem_id,
      recv_trans_usr_name, recv_agent_username, recv_itemsite_id,
      recv_vend_id, recv_vend_item_number, recv_vend_item_descrip,
      recv_vend_uom, recv_qty, recv_duedate,
      recv_purchcost, recv_purchcost_curr_id,
      recv_notes, recv_freight, recv_freight_curr_id
    ) VALUES (
      _recvid, _timestamp,
      _o.orderhead_number::INTEGER, pordertype, _o.orderitem_id::INTEGER,
      CURRENT_USER, _o.orderhead_agent_username, _o.itemsite_id::INTEGER,
      _o.vend_id::INTEGER, _o.vend_item_number, _o.vend_item_descrip,
      _o.vend_uom, pQty, _o.duedate,
      _o.orderitem_unitcost, _o.orderitem_unitcost_curr_id::INTEGER,
      pNotes, pFreight, _o.freight_curr_id::INTEGER);
  END IF;

  RETURN _recvid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.expirecreditcard-integer-bytea">expirecreditcard( integer, bytea )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCust ALIAS FOR $1;
  pKey ALIAS FOR $2;
  num_updated INTEGER;
  cc_year INTEGER;
  cc_month INTEGER;
  cc_year_t TEXT;
  cc_month_t TEXT;
  _dr RECORD;
  _cc RECORD;
  bf TEXT;

BEGIN

  num_updated := 0;
  bf := &#39;bf&#39;;

  select cast(date_part(&#39;year&#39;, CURRENT_DATE) AS INTEGER) AS check_year, cast(date_part(&#39;month&#39;, CURRENT_DATE) AS INTEGER) AS check_month INTO _dr;

  FOR _cc IN SELECT ccard_id, 
                    decrypt(setbytea(ccard_month_expired), setbytea(pKey), &#39;bf&#39;) AS ccard_month_expired,
                    decrypt(setbytea(ccard_year_expired), setbytea(pKey), &#39;bf&#39;) AS ccard_year_expired
      FROM ccard
      WHERE ( (ccard_cust_id=pCust)
        AND   (ccard_active) ) LOOP

      SELECT formatbytea(_cc.ccard_month_expired) INTO cc_month_t;
      SELECT formatbytea(_cc.ccard_year_expired) INTO cc_year_t;
      SELECT cast(cc_month_t AS INTEGER) INTO cc_month;
      SELECT cast(cc_year_t AS INTEGER) INTO cc_year;

      IF (cc_year &lt; _dr.check_year) THEN
--  We have an expired card
        UPDATE ccard set ccard_active = FALSE where ccard_id = _cc.ccard_id;
        num_updated := num_updated + 1;
      ELSIF (cc_year = _dr.check_year AND cc_month &lt; _dr.check_month) THEN
--  We have an expired card
        UPDATE ccard set ccard_active = FALSE where ccard_id = _cc.ccard_id;
        num_updated := num_updated + 1;
      END IF;

  END LOOP;

  RETURN num_updated;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.explodebom-integer-integer-integer">explodebom( integer, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pParentid ALIAS FOR $2;
  pLevel ALIAS FOR $3;
  _revid INTEGER;

BEGIN

  SELECT getActiveRevId(&#39;BOM&#39;,pItemid) INTO _revid;

  RETURN explodeBOM(pItemid, _revid, pParentid, pLevel);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.explodebom-integer-integer-integer-integer">explodebom( integer, integer, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pRevisionid ALIAS FOR $2;
  pParentid ALIAS FOR $3;
  pLevel ALIAS FOR $4;
  _bomworkid INTEGER;
  _level INTEGER;
  _p RECORD;
  _r RECORD;
  _temp TEXT;

BEGIN

  _level := (pLevel + 1);

--  Cache some parameters about the parent
  SELECT bomwork_item_id, bomwork_set_id, bomwork_qtyper,
         bomwork_seqnumber, bomwork_effective, bomwork_expires INTO _p
  FROM bomwork
  WHERE (bomwork_id=pParentid);

--  Step through all of the components of the parent component
  FOR _r IN SELECT bomitem.*,
                   item_id,
                   itemuomtouom(bomitem_item_id, bomitem_uom_id, NULL, bomitem_qtyper) AS qtyper,
                   CASE WHEN (_p.bomwork_effective &gt; bomitem_effective) THEN _p.bomwork_effective
                        ELSE bomitem_effective
                   END AS effective,
                   CASE WHEN (_p.bomwork_expires &lt; bomitem_expires) THEN _p.bomwork_expires
                        ELSE bomitem_expires
                   END AS expires,
                   stdcost(item_id) AS standardcost, actcost(item_id) AS actualcost
  FROM bomitem(pItemid, pRevisionid), item
  WHERE ( (bomitem_item_id=item_id)
  AND (bomitem_expires &gt; _p.bomwork_effective) ) LOOP

--  Insert the current component and some bomitem parameters into the bomwork set
    SELECT NEXTVAL(&#39;bomwork_bomwork_id_seq&#39;) INTO _bomworkid;
    INSERT INTO bomwork
    ( bomwork_id, bomwork_set_id, bomwork_parent_id, bomwork_level,
      bomwork_parent_seqnumber, bomwork_seqnumber,
      bomwork_item_id, bomwork_createwo,
      bomwork_qtyper, bomwork_scrap, bomwork_issuemethod,
      bomwork_effective, bomwork_expires,
      bomwork_stdunitcost, bomwork_actunitcost, 
      bomwork_notes, bomwork_ref,
      bomwork_bomitem_id, bomwork_ecn )
    VALUES
    ( _bomworkid, _p.bomwork_set_id, pParentid, _level,
      _p.bomwork_seqnumber, _r.bomitem_seqnumber,
      _r.item_id, _r.bomitem_createwo,
      (_p.bomwork_qtyper * _r.qtyper), _r.bomitem_scrap, _r.bomitem_issuemethod,
      _r.effective, _r.expires,
      _r.standardcost, _r.actualcost,
      _r.bomitem_notes, _r.bomitem_ref,
      _r.bomitem_id, _r.bomitem_ecn );

--  Recursively repeat for this component&#39;s components
    PERFORM explodeBOM(_r.item_id, _bomworkid, _level);
  END LOOP;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.explodekit-integer-integer-integer-integer-numeric">explodekit( integer, integer, integer, integer, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSoheadid ALIAS FOR $1;
  pLinenumber ALIAS FOR $2;
  pSubnumber ALIAS FOR $3;
  pItemsiteid ALIAS FOR $4;
  pQty ALIAS FOR $5;
  _subnumber INTEGER := COALESCE(pSubnumber,0);
  _revid INTEGER;
  _itemid INTEGER;
  _warehousid INTEGER;
  _item RECORD;
BEGIN

  SELECT getActiveRevId(&#39;BOM&#39;,itemsite_item_id), itemsite_warehous_id, itemsite_item_id
    INTO _revid, _warehousid, _itemid
    FROM itemsite
   WHERE(itemsite_id=pItemsiteid);
  IF(NOT FOUND) THEN
    RAISE EXCEPTION &#39;No Item Site for the specified line was found.&#39;;
  END IF;

  FOR _item IN
  SELECT bomitem_id, 
         itemsite_id,
         itemsite_warehous_id,
         COALESCE((itemsite_active AND item_active), false) AS active,
         COALESCE((itemsite_sold AND item_sold), false) AS sold,
         item_id,
         item_type,
         item_price_uom_id,
         bomitem_uom_id,
         itemuomtouomratio(item_id, bomitem_uom_id, item_inv_uom_id) AS invuomratio,
         roundQty(itemuomfractionalbyuom(bomitem_item_id, bomitem_uom_id), (bomitem_qtyper * pQty * (1 + bomitem_scrap))) AS qty
    FROM bomitem, item LEFT OUTER JOIN itemsite ON ((itemsite_item_id=item_id) AND (itemsite_warehous_id=_warehousid))
   WHERE((bomitem_parent_item_id=_itemid)
     AND (bomitem_item_id=item_id)
     AND (bomitem_rev_id=_revid)
     AND (CURRENT_DATE BETWEEN bomitem_effective AND (bomitem_expires - 1))) LOOP
    IF (NOT _item.active) THEN
      RAISE EXCEPTION &#39;One or more of the components for the kit is inactive for the selected item site.&#39;;
    ELSIF (NOT _item.sold) THEN
      RAISE EXCEPTION &#39;One or more of the components for the kit is not sold for the selected item site.&#39;;
    ELSIF (_item.item_type=&#39;F&#39;) THEN
      SELECT explodeKit(pSoheadid, pLinenumber, _subnumber, _item.itemsite_id, _item.qty)
        INTO _subnumber;
    ELSE
      _subnumber := _subnumber + 1;
      INSERT INTO coitem
            (coitem_cohead_id,
             coitem_linenumber, coitem_subnumber,
             coitem_itemsite_id, coitem_status,
             coitem_scheddate, coitem_promdate,
             coitem_qtyord, coitem_qty_uom_id, coitem_qty_invuomratio,
             coitem_qtyshipped, coitem_qtyreturned,
             coitem_unitcost, coitem_custprice,
             coitem_price, coitem_price_uom_id, coitem_price_invuomratio,
             coitem_order_type, coitem_order_id,
             coitem_custpn, coitem_memo,
             coitem_prcost)
      VALUES(pSoheadid,
             pLinenumber, _subnumber,
             _item.itemsite_id, &#39;O&#39;,
             CURRENT_DATE, NULL,
             _item.qty, _item.bomitem_uom_id, _item.invuomratio,
             0, 0,
             stdCost(_item.item_id), 0,
             0, _item.item_price_uom_id, 1,
             &#39;&#39;, -1,
             &#39;&#39;, &#39;&#39;,
             0);
    END IF;
  END LOOP;

  RETURN _subnumber;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.explodephantomorder-integer-integer-numeric">explodephantomorder( integer, integer, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPlanordid ALIAS FOR $1;
  pPhantomid ALIAS FOR $2;
  pQty       ALIAS FOR $3;
  _b RECORD;

BEGIN
  FOR _b IN SELECT planord_number, c.itemsite_id AS componentsiteid,
                   (planord_startdate - c.itemsite_leadtime) AS startdate,
                   planord_startdate AS duedate,
                   bomitem_createwo, item_planning_type,
                   (itemuomtouom(bomitem_item_id, bomitem_uom_id, NULL, bomitem_qtyper * (1 + bomitem_scrap)) * pQty) AS qtyreq,
                   item_type
              FROM bomitem, planord, itemsite AS p, itemsite AS c, item
             WHERE ((bomitem_parent_item_id=p.itemsite_item_id)
               AND (bomitem_rev_id=getActiveRevId(&#39;BOM&#39;,bomitem_parent_item_id))
               AND (bomitem_item_id=c.itemsite_item_id)
               AND (p.itemsite_warehous_id=c.itemsite_warehous_id)
               AND (c.itemsite_item_id=item_id)
               AND (woEffectiveDate(planord_startdate) BETWEEN bomitem_effective AND (bomitem_expires - 1))
               AND (p.itemsite_id=pPhantomid)
               AND (planord_id=pPlanordid)) LOOP

    IF (_b.item_type = &#39;F&#39;) THEN
      PERFORM explodePhantomOrder(pPlanordid, _b.componentsiteid, _b.qtyreq);
    ELSE
--  Create the Planned Requirement
      INSERT INTO planreq
      ( planreq_source, planreq_source_id,
        planreq_itemsite_id, planreq_qty )
      VALUES
      ( &#39;P&#39;, pPlanordid,
        _b.componentsiteid, _b.qtyreq );

      IF (_b.bomitem_createwo AND _b.item_planning_type != &#39;N&#39;) THEN
        PERFORM createPlannedOrder( pPlanordid, _b.planord_number, _b.componentsiteid,
                                    _b.qtyreq, _b.startdate, _b.duedate, FALSE, FALSE, NULL );
      END IF;
    END IF;

  END LOOP;

  RETURN pPlanordid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.explodeplannedorder-integer-boolean">explodeplannedorder( integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPlanordid ALIAS FOR $1;
  pExplodeChildren ALIAS FOR $2;
  _b RECORD;

BEGIN

--  Create Planned Requirements and Orders for manufactured or purchased component items
--  of this Planned Order
  FOR _b IN SELECT planord_number, c.itemsite_id AS componentsiteid,
                   (planord_startdate - c.itemsite_leadtime) AS startdate,
                   planord_startdate AS duedate,
                   bomitem_createwo, item_planning_type,
                   (itemuomtouom(bomitem_item_id, bomitem_uom_id, NULL, bomitem_qtyper * (1 + bomitem_scrap)) * planord_qty) AS qtyreq,
                   item_type
            FROM bomitem, planord, itemsite AS p, itemsite AS c, item
            WHERE ( (planord_itemsite_id=p.itemsite_id)
             AND (bomitem_parent_item_id=p.itemsite_item_id)
             AND (bomitem_rev_id=getActiveRevId(&#39;BOM&#39;,bomitem_parent_item_id))
             AND (bomitem_item_id=c.itemsite_item_id)
             AND (p.itemsite_warehous_id=c.itemsite_warehous_id)
             AND (c.itemsite_item_id=item_id)
             AND (woEffectiveDate(planord_startdate) BETWEEN bomitem_effective AND (bomitem_expires - 1))
             AND (planord_id=pPlanordid) ) LOOP

    IF (_b.item_type = &#39;F&#39;) THEN
      PERFORM explodePhantomOrder(pPlanordid, _b.componentsiteid, _b.qtyreq);
    ELSE
--  Create the Planned Requirement
      INSERT INTO planreq
      ( planreq_source, planreq_source_id,
        planreq_itemsite_id, planreq_qty )
      VALUES
      ( &#39;P&#39;, pPlanordid,
        _b.componentsiteid, _b.qtyreq );

      IF (_b.bomitem_createwo AND _b.item_planning_type != &#39;N&#39;) THEN
        PERFORM createPlannedOrder( pPlanordid, _b.planord_number, _b.componentsiteid,
                                    _b.qtyreq, _b.startdate, _b.duedate, FALSE, FALSE, NULL );
      END IF;
    END IF;

  END LOOP;

--  Insert the W/O Operations
  INSERT INTO planoper
  (planoper_planord_id, planoper_wrkcnt_id, planoper_sutime, planoper_rntime)
  SELECT planord_id, booitem_wrkcnt_id, booitem_sutime,
         CASE WHEN ((booitem_rnqtyper = 0) OR (booitem_invproduomratio = 0)) THEN 0
              ELSE ((booitem_rntime / booitem_rnqtyper / booitem_invproduomratio) * planord_qty)
         END
  FROM booitem, planord, itemsite
  WHERE ( (planord_itemsite_id=itemsite_id)
   AND (itemsite_item_id=booitem_item_id)
   AND (booitem_rev_id=getActiveRevId(&#39;BOO&#39;,booitem_item_id))
   AND (woEffectiveDate(planord_startdate) &gt;= booitem_effective)
   AND (woEffectiveDate(planord_startdate) &lt; booitem_expires)
   AND (planord_id=pPlanordid) );

  IF (pExplodeChildren) THEN
    PERFORM explodePlannedOrder(planord_id, TRUE)
    FROM planord, itemsite, item
    WHERE ( (planord_itemsite_id=itemsite_id)
     AND (itemsite_item_id=item_id)
     AND (item_type = &#39;M&#39;)
     AND (planord_planord_id=pPlanordid) );
  END IF;

  RETURN pPlanordid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.explodesummarizedbom-integer-integer-integer-integer-integer-numeric-date-date">explodesummarizedbom( integer, integer, integer, integer, integer, numeric, date, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pParentid ALIAS FOR $2;
  pLevel ALIAS FOR $3;
  pSetid ALIAS FOR $4;
  pSeqNumber ALIAS FOR $5;
  pQtyPer ALIAS FOR $6;
  pEffective ALIAS FOR $7;
  pExpires ALIAS FOR $8;
  _bomworkid INTEGER;
  _level INTEGER;
  _p RECORD;
  _r RECORD;
  _temp TEXT;

BEGIN

  _level := (pLevel + 1);

--  Step through all of the components of the parent component
  FOR _r IN SELECT bomitem_seqnumber,
                   item_id, item_type, bomitem_createwo,
                   itemuomtouom(bomitem_item_id, bomitem_uom_id, NULL, bomitem_qtyper) AS qtyper, bomitem_scrap, bomitem_issuemethod,
                   CASE WHEN (pEffective &gt; bomitem_effective) THEN pEffective
                        ELSE bomitem_effective
                   END AS effective,
                   CASE WHEN (pExpires &lt; bomitem_expires) THEN pExpires
                        ELSE bomitem_expires
                   END AS expires,
                   stdcost(item_id) AS standardcost, actcost(item_id) AS actualcost
  FROM bomitem(pItemid), item
  WHERE ( (bomitem_item_id=item_id) ) LOOP

    IF (_r.item_type IN (&#39;M&#39;, &#39;F&#39;)) THEN
      PERFORM explodeSummarizedBOM( _r.item_id, pParentid, _level, pSetid, pSeqnumber,
                                    pQtyPer, pEffective, pExpires );
--      RAISE NOTICE &#39;Summarized Explosion at Mfg/Phantom %&#39;, _r.item_id;
    ELSE
--  Insert the current component and some bomitem parameters into the bomwork set
--      RAISE NOTICE &#39;Summarized Explosion at Insert Item %&#39;, _r.item_id;
      SELECT NEXTVAL(&#39;bomwork_bomwork_id_seq&#39;) INTO _bomworkid;
      INSERT INTO bomwork
      ( bomwork_id, bomwork_set_id, bomwork_parent_id, bomwork_level,
        bomwork_parent_seqnumber, bomwork_seqnumber,
        bomwork_item_id, bomwork_createwo,
        bomwork_qtyper, bomwork_scrap, bomwork_issuemethod,
        bomwork_effective, bomwork_expires,
        bomwork_stdunitcost, bomwork_actunitcost )
      VALUES
      ( _bomworkid, pSetid, pParentid, _level,
        pSeqnumber, _r.bomitem_seqnumber,
        _r.item_id, _r.bomitem_createwo,
        (pQtyPer * _r.qtyper), _r.bomitem_scrap, _r.bomitem_issuemethod,
        _r.effective, _r.expires,
        _r.standardcost, _r.actualcost );
    END IF;

  END LOOP;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.explodewo-integer-boolean">explodewo( integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid ALIAS FOR $1;
  pExplodeChildren ALIAS FOR $2;
  resultCode INTEGER;
  newWo RECORD;
  _p RECORD;
  _r RECORD;
  _bbom BOOLEAN;

BEGIN
-- Find out if Breeder BOMs are enabled
  SELECT metric_value=&#39;t&#39; INTO _bbom
         FROM metric
         WHERE (metric_name=&#39;BBOM&#39;);

--  Make sure that this W/O is Open
  SELECT wo_id INTO resultCode
  FROM wo
  WHERE ((wo_status=&#39;O&#39;)
   AND (wo_id=pWoid));
  IF (NOT FOUND) THEN
    RETURN -4;
  END IF;

--  Make sure that component all Component Item Sites exist
  SELECT bomitem_id INTO resultCode
  FROM wo, bomitem, itemsite
  WHERE ( (wo_itemsite_id=itemsite_id)
   AND (itemsite_item_id=bomitem_parent_item_id)
   AND (woEffectiveDate(wo_startdate) BETWEEN bomitem_effective AND (bomitem_expires - 1))
   AND (wo_id=pWoid)
   AND (bomitem_rev_id=wo_bom_rev_id)
   AND (bomitem_item_id NOT IN
        ( SELECT component.itemsite_item_id
          FROM itemsite AS component, itemsite AS parent
          WHERE ( (wo_itemsite_id=parent.itemsite_id)
           AND (parent.itemsite_item_id=bomitem_parent_item_id)
           AND (bomitem_item_id=component.itemsite_item_id)
           AND (woEffectiveDate(wo_startdate) BETWEEN bomitem_effective AND (bomitem_expires - 1))
           AND (component.itemsite_active)
           AND (component.itemsite_warehous_id=parent.itemsite_warehous_id) ) ) ) )
  LIMIT 1;
  IF (FOUND) THEN
    RETURN -2;
  END IF;

--  If the Parent Item is a Breeder, make sure that all the
--  Co-Product/By-Product Item Sites exist
  IF (_bbom) THEN

    IF ( ( SELECT (item_type=&#39;B&#39;)
           FROM wo, itemsite, item
           WHERE ( (wo_itemsite_id=itemsite_id)
            AND (itemsite_item_id=item_id)
            AND (wo_id=pWoid) ) ) ) THEN
      SELECT bbomitem_id INTO resultCode
      FROM wo, bbomitem, itemsite
      WHERE ( (wo_itemsite_id=itemsite_id)
       AND (itemsite_item_id=bbomitem_parent_item_id)
       AND (woEffectiveDate(wo_startdate) BETWEEN bbomitem_effective AND (bbomitem_expires - 1))
       AND (wo_id=pWoid)
       AND (bbomitem_item_id NOT IN
            ( SELECT component.itemsite_item_id
              FROM itemsite AS component, itemsite AS parent
              WHERE ( (wo_itemsite_id=parent.itemsite_id)
               AND (parent.itemsite_item_id=bbomitem_parent_item_id)
               AND (bbomitem_item_id=component.itemsite_item_id)
               AND (woEffectiveDate(wo_startdate) BETWEEN bbomitem_effective AND (bbomitem_expires - 1))
               AND (component.itemsite_active)
               AND (component.itemsite_warehous_id=parent.itemsite_warehous_id) ) ) ) )
      LIMIT 1;
      IF (FOUND) THEN
        RETURN -3;
      END IF;
    END IF;
  END IF;

--  Create the W/O Material Requirements
  INSERT INTO womatl
  ( womatl_wo_id, womatl_bomitem_id, womatl_wooper_id, womatl_schedatwooper,
    womatl_itemsite_id,
    womatl_duedate,
    womatl_uom_id, womatl_qtyper, womatl_scrap,
    womatl_qtyreq,
    womatl_qtyiss, womatl_qtywipscrap,
    womatl_lastissue, womatl_lastreturn, womatl_cost,
    womatl_picklist, womatl_createwo, womatl_issuemethod, womatl_notes, womatl_ref )
  SELECT wo_id, bomitem_id, bomitem_booitem_seq_id, bomitem_schedatwooper,
         cs.itemsite_id,
         CASE WHEN bomitem_schedatwooper THEN COALESCE(calcWooperStart(wo_id,bomitem_booitem_seq_id), wo_startdate)
              ELSE wo_startdate
         END,
         bomitem_uom_id, bomitem_qtyper, bomitem_scrap,
         roundQty(itemuomfractionalbyuom(bomitem_item_id, bomitem_uom_id), (bomitem_qtyper * wo_qtyord * (1 + bomitem_scrap))),
         0, 0,
         startOfTime(), startOfTime(), 0,
         item_picklist, ( (item_type=&#39;M&#39;) AND (bomitem_createwo) ), bomitem_issuemethod, bomitem_notes, bomitem_ref 
  FROM bomitem, wo, itemsite AS ps, itemsite AS cs, item
  WHERE ( (wo_itemsite_id=ps.itemsite_id)
   AND (bomitem_parent_item_id=ps.itemsite_item_id)
   AND (bomitem_item_id=cs.itemsite_item_id)
   AND (bomitem_rev_id=wo_bom_rev_id)
   AND (ps.itemsite_warehous_id=cs.itemsite_warehous_id)
   AND (cs.itemsite_item_id=item_id)
   AND (woEffectiveDate(wo_startdate) BETWEEN bomitem_effective AND (bomitem_expires - 1))
   AND (wo_id=pWoid)
       AND ((bomitem_char_id IS NULL)
       OR  EXISTS (
         SELECT charass_id
         FROM coitem,charass
         WHERE ((charass_target_type=&#39;SI&#39;)
          AND  (charass_target_id=coitem_id)
          AND  (charass_char_id=bomitem_char_id)
          AND  (charass_value=bomitem_value)
          AND  (wo_ordtype=&#39;S&#39;)
          AND  (coitem_id=wo_ordid)))) );

--  Create any required P/R&#39;s
  PERFORM createPr(&#39;W&#39;, womatl_id)
  FROM womatl, itemsite
  WHERE ((womatl_itemsite_id=itemsite_id)
   AND (itemsite_createpr)
   AND (womatl_wo_id=pWoid));

--  Update any created P/R&#39;s the have the project id as the parent WO.
  UPDATE pr SET pr_prj_id=wo_prj_id
    FROM womatl, wo
   WHERE ((wo_id=pWoid)
     AND  (womatl_wo_id=wo_id)
     AND  (pr_order_type=&#39;W&#39;)
     AND  (pr_order_id=womatl_id));

--  If the parent Item is a Breeder, create the brddist
--  records for the Co-Products and By-Products
  IF (_bbom) THEN

    INSERT INTO brddist
    ( brddist_wo_id, brddist_wo_qty, brddist_itemsite_id,
      brddist_stdqtyper, brddist_qty, brddist_posted )
    SELECT wo_id, 0, cs.itemsite_id,
           bbomitem_qtyper, 0, FALSE
    FROM wo, bbomitem,
         itemsite AS ps, itemsite AS cs, item
    WHERE ( (bbomitem_parent_item_id=ps.itemsite_item_id)
     AND (wo_itemsite_id=ps.itemsite_id)
     AND (ps.itemsite_item_id=item_id)
     AND (item_type=&#39;B&#39;)
     AND (bbomitem_item_id=cs.itemsite_item_id)
     AND (cs.itemsite_warehous_id=ps.itemsite_warehous_id)
     AND (wo_id=pWoid) );

  END IF;

--  Insert the W/O Operations if routings enabled
  IF ( ( SELECT (metric_value=&#39;t&#39;)
         FROM metric
         WHERE (metric_name=&#39;Routings&#39;) ) ) THEN

    INSERT INTO wooper
    ( wooper_wo_id, wooper_booitem_id, wooper_seqnumber,
      wooper_wrkcnt_id, wooper_stdopn_id,
      wooper_descrip1, wooper_descrip2, wooper_toolref,
      wooper_sutime, wooper_sucosttype, wooper_surpt,
      wooper_rntime, wooper_rncosttype, wooper_rnrpt,
      wooper_rnqtyper,
      wooper_produom, wooper_invproduomratio,
      wooper_issuecomp, wooper_rcvinv,
      wooper_suconsumed, wooper_sucomplete,
      wooper_rnconsumed, wooper_rncomplete,
      wooper_qtyrcv, wooper_instruc, wooper_scheduled,
      wooper_wip_location_id )
    SELECT wo_id, booitem_id, booitem_seqnumber,
           booitem_wrkcnt_id, booitem_stdopn_id,
           booitem_descrip1, booitem_descrip2, booitem_toolref,
           CASE WHEN (booitem_surpt) THEN booitem_sutime
                ELSE 0
           END, booitem_sucosttype, booitem_surpt,
           CASE WHEN ((booitem_rnqtyper = 0) OR (booitem_invproduomratio = 0)) THEN 0
                WHEN (NOT booitem_rnrpt) THEN 0
                ELSE ( ( booitem_rntime /
                         booitem_rnqtyper /
                         booitem_invproduomratio ) * wo_qtyord )
           END, booitem_rncosttype, booitem_rnrpt,
           CASE WHEN (booitem_rnqtyper = 0) THEN 0
                WHEN (NOT booitem_rnrpt) THEN 0
                ELSE (booitem_rntime / booitem_rnqtyper)
           END,
           booitem_produom, booitem_invproduomratio,
           booitem_issuecomp, booitem_rcvinv,
           0::NUMERIC, FALSE,
           0::NUMERIC, FALSE,
           0::NUMERIC, booitem_instruc,
           (wo_startdate + booitem_execday - 1),
           booitem_wip_location_id
    FROM booitem, wo, itemsite
    WHERE ((wo_itemsite_id=itemsite_id)
     AND (itemsite_item_id=booitem_item_id)
     AND (booitem_rev_id=wo_boo_rev_id)
     AND (woEffectiveDate(wo_startdate) BETWEEN booitem_effective AND (booitem_expires - 1))
     AND (wo_id=pWoid));

--  Update womatls item to link to wooper items when the respective
--  bomitem record indicates a booitem issue link.
    UPDATE womatl
    SET womatl_wooper_id=wooper_id
    FROM wo,wooper,booitem
    WHERE ((womatl_wooper_id=booitem_seq_id)
     AND (wooper_booitem_id=booitem_id)
     AND (womatl_wo_id=wo_id)
     AND (wooper_wo_id=wo_id)
     AND (wo_boo_rev_id=booitem_rev_id)
     AND (wo_id=pWoid));
    END IF;

-- Handle all of the Phantom material requirements
  WHILE ( ( SELECT COUNT(*)
            FROM womatl, itemsite, item
            WHERE ( (womatl_itemsite_id=itemsite_id)
             AND (itemsite_item_id=item_id)
             AND (womatl_wo_id=pWoid)
             AND (item_type=&#39;F&#39;) ) ) &gt; 0 ) LOOP

    FOR _p IN SELECT wo_qtyord, wo_startdate, womatl_id, womatl_wooper_id
              FROM wo, womatl, itemsite, item
              WHERE ( (womatl_itemsite_id=itemsite_id)
               AND (itemsite_item_id=item_id)
               AND (item_type=&#39;F&#39;)
               AND (womatl_wo_id=wo_id)
               AND (wo_id=pWoid) ) LOOP

      INSERT INTO womatl
      ( womatl_wo_id, womatl_itemsite_id, womatl_wooper_id,
        womatl_schedatwooper, womatl_duedate,
        womatl_uom_id, womatl_qtyper, womatl_scrap,
        womatl_qtyreq,
        womatl_qtyiss, womatl_qtywipscrap,
        womatl_lastissue, womatl_lastreturn,
        womatl_cost, womatl_picklist, womatl_createwo,
        womatl_issuemethod, womatl_notes, womatl_ref )
      SELECT pWoid, cs.itemsite_id, _p.womatl_wooper_id,
             womatl_schedatwooper, womatl_duedate,
             bomitem_uom_id, (bomitem_qtyper * womatl_qtyper), bomitem_scrap,
             roundQty(itemuomfractionalbyuom(bomitem_item_id, bomitem_uom_id), (_p.wo_qtyord * bomitem_qtyper * womatl_qtyper * (1 + bomitem_scrap))),
             0, 0,
             startOfTime(), startOfTime(),
             0, ci.item_picklist, ( (ci.item_type=&#39;M&#39;) AND (bomitem_createwo) ),
             bomitem_issuemethod, bomitem_notes, bomitem_ref 
      FROM wo, womatl, bomitem, 
           itemsite AS cs, itemsite AS ps,
           item AS ci, item AS pi
      WHERE ( (womatl_itemsite_id=ps.itemsite_id)
       AND (womatl_wo_id=wo_id)
       AND (bomitem_parent_item_id=pi.item_id)
       AND (bomitem_item_id=ci.item_id)
       AND (ps.itemsite_warehous_id=cs.itemsite_warehous_id)
       AND (cs.itemsite_item_id=ci.item_id)
       AND (ps.itemsite_item_id=pi.item_id)
       AND (woEffectiveDate(_p.wo_startdate) BETWEEN bomitem_effective AND (bomitem_expires - 1))
       AND (womatl_id=_p.womatl_id));

      DELETE FROM womatl
      WHERE (womatl_id=_p.womatl_id);

    END LOOP;
  END LOOP;

--  Create W/Os for manufactured component items
  FOR newWo IN SELECT wo_number, nextWoSubnumber(wo_number) AS nextSubnumber,
                      itemsite_id, itemsite_leadtime, womatl_duedate,
                      womatl_wo_id, womatl_qtyreq, womatl_uom_id, wo_prj_id,
                      item_id, item_inv_uom_id
               FROM womatl, wo, itemsite, item
               WHERE ( (womatl_wo_id=wo_id)
                AND (womatl_itemsite_id=itemsite_id)
                AND (womatl_createwo)
                AND (itemsite_supply)
                AND (itemsite_item_id=item_id)
                AND (wo_id=pWoid) ) LOOP

    PERFORM createWo( newWo.wo_number, newWo.itemsite_id, 1, 
                     itemuomtouom(newWo.item_id,newWo.womatl_uom_id,newWo.item_inv_uom_id,newWo.womatl_qtyreq),
                      newWo.itemsite_leadtime, newWo.womatl_duedate, &#39;&#39;,
                      &#39;W&#39;, newWo.womatl_wo_id, newWo.wo_prj_id );

  END LOOP;

  UPDATE wo
  SET wo_status=&#39;E&#39;, wo_adhoc=FALSE
  WHERE (wo_id=pWoid);

  IF (pExplodeChildren) THEN
    SELECT MAX(explodeWo(wo_id, TRUE)) INTO resultCode
    FROM wo
    WHERE ( (wo_ordtype=&#39;W&#39;)
     AND (wo_ordid=pWoid) );
  END IF;

  RETURN pWoid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.explodewoeffective">explodewoeffective(  )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _value TEXT;

BEGIN

  SELECT metric_value INTO _value
  FROM metric
  WHERE (metric_name=&#39;ExplodeWOEffective&#39;);

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchapmemonumber">fetchapmemonumber(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _number INTEGER;
  _test INTEGER;

BEGIN

  LOOP

    SELECT orderseq_number INTO _number
    FROM orderseq
    WHERE (orderseq_name=&#39;APMemoNumber&#39;);
    IF (NOT FOUND) THEN
      RETURN -1;
    END IF;

    UPDATE orderseq
    SET orderseq_number = (orderseq_number + 1)
    WHERE (orderseq_name=&#39;APMemoNumber&#39;);

    SELECT apopen_id INTO _test
    FROM apopen
    WHERE ( (apopen_doctype IN (&#39;D&#39;, &#39;C&#39;))
     AND (apopen_docnumber=text(_number)) );

    IF (NOT FOUND) THEN
      EXIT;
    END IF;

  END LOOP;

  RETURN _number;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetcharmemonumber">fetcharmemonumber(  )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _number TEXT;
  _test INTEGER;

BEGIN

  LOOP

    SELECT CAST(orderseq_number AS text) INTO _number
    FROM orderseq
    WHERE (orderseq_name=&#39;ARMemoNumber&#39;);
    IF (NOT FOUND) THEN
      RETURN -1;
    END IF;

    UPDATE orderseq
    SET orderseq_number = (orderseq_number + 1)
    WHERE (orderseq_name=&#39;ARMemoNumber&#39;);

    SELECT aropen_id INTO _test
    FROM aropen
    WHERE ( (aropen_doctype IN (&#39;D&#39;, &#39;C&#39;, &#39;R&#39;))
     AND (aropen_docnumber=_number) );

    IF (NOT FOUND) THEN
      EXIT;
    END IF;

  END LOOP;

  RETURN _number;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchbatchitem">fetchbatchitem(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _batchid INTEGER;

BEGIN

  SELECT batch_id INTO _batchid
  FROM batch
  WHERE ( (batch_started IS NULL)
   AND (batch_scheduled &lt;= (CURRENT_TIMESTAMP - &#39;5 seconds&#39;::interval)) )
  ORDER BY batch_scheduled
  LIMIT 1;

  IF (FOUND) THEN
    UPDATE batch
    SET batch_started=CURRENT_TIMESTAMP
    WHERE (batch_id=_batchid);
  ELSE
    _batchid := -1;
  END IF;

  RETURN _batchid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchcmnumber">fetchcmnumber(  )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _cmNumber text;
  _test INTEGER;

BEGIN

  LOOP

    SELECT CAST(orderseq_number AS text) INTO _cmNumber
    FROM orderseq
    WHERE (orderseq_name=&#39;CmNumber&#39;)
    FOR UPDATE;

    UPDATE orderseq
    SET orderseq_number = (orderseq_number + 1)
    WHERE (orderseq_name=&#39;CmNumber&#39;);

    SELECT cmhead_id INTO _test
    FROM cmhead
    WHERE (cmhead_number=_cmNumber);

    IF (NOT FOUND) THEN
      EXIT;
    END IF;

  END LOOP;

  RETURN _cmNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchcrmaccountnumber">fetchcrmaccountnumber(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _accountNumber INTEGER;
  _test INTEGER;

BEGIN

  LOOP

    SELECT COALESCE(orderseq_number,0) INTO _accountNumber
      FROM orderseq
     WHERE (orderseq_name=&#39;CRMAccountNumber&#39;);

    UPDATE orderseq
       SET orderseq_number = (COALESCE(orderseq_number,0) + 1)
     WHERE (orderseq_name=&#39;CRMAccountNumber&#39;);

    SELECT id INTO _test
      FROM ( SELECT crmacct_id AS id
               FROM crmacct
              WHERE(crmacct_number=text(_accountNumber))
              UNION
             SELECT cust_id
               FROM custinfo
              WHERE (cust_number=text(_accountNumber))
              UNION
             SELECT prospect_id
               FROM prospect
              WHERE (prospect_number=text(_accountNumber))
              UNION
             SELECT vend_id
               FROM vendinfo
              WHERE (vend_number=text(_accountNumber))
              UNION
             SELECT taxauth_id
               FROM taxauth
              WHERE (taxauth_code=text(_accountNumber))
           ) AS data;

    IF (NOT FOUND) THEN
      EXIT;
    END IF;

  END LOOP;

  RETURN _accountNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchdefaultfob-integer">fetchdefaultfob( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWarehousId ALIAS FOR $1;
  _returnVal TEXT;
BEGIN
  SELECT warehous_fob INTO _returnVal
  FROM warehous
  WHERE (warehous_id=pWarehousId);
  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchdefaultshipvia">fetchdefaultshipvia(  )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _returnVal TEXT;
BEGIN
  SELECT shipvia_code INTO _returnVal
  FROM shipvia
  WHERE shipvia_id=
	(SELECT CAST(metric_value AS integer)
	FROM metric
	WHERE metric_name = &#39;DefaultShipViaId&#39;);
  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchglsequence">fetchglsequence(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _sequence INTEGER;

BEGIN

    SELECT NEXTVAL(&#39;gltrans_sequence_seq&#39;) INTO _sequence;
    RETURN _sequence;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchincidentnumber">fetchincidentnumber(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _incidentNumber INTEGER;
  _test INTEGER;

BEGIN

  LOOP

    SELECT orderseq_number INTO _incidentNumber
      FROM orderseq
     WHERE (orderseq_name=&#39;IncidentNumber&#39;);

    UPDATE orderseq
       SET orderseq_number = (orderseq_number + 1)
     WHERE (orderseq_name=&#39;IncidentNumber&#39;);

    SELECT incdt_id INTO _test
      FROM incdt
     WHERE (incdt_number=_incidentNumber);

    IF (NOT FOUND) THEN
      EXIT;
    END IF;

  END LOOP;

  RETURN _incidentNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchinvcnumber">fetchinvcnumber(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _invcNumber INTEGER;
  _test INTEGER;

BEGIN

  LOOP

    SELECT orderseq_number INTO _invcNumber
    FROM orderseq
    WHERE (orderseq_name=&#39;InvcNumber&#39;);

    UPDATE orderseq
    SET orderseq_number = (orderseq_number + 1)
    WHERE (orderseq_name=&#39;InvcNumber&#39;);

    SELECT cobmisc_id INTO _test
    FROM cobmisc
    WHERE (cobmisc_invcnumber=_invcNumber);

    IF (NOT FOUND) THEN
      EXIT;
    END IF;

  END LOOP;

  RETURN _invcNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchitemuomconvtypes-integer">fetchitemuomconvtypes( integer )</a>
		</h2>
<h3>Returns: text[]</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemUomConvId ALIAS FOR $1;
  _p RECORD;
  _result text[];
  _cnt INTEGER;

BEGIN

  _cnt := 0;

  FOR _p IN SELECT
    uomtype_name
  FROM itemuomconv, itemuom, uomtype
  WHERE ((itemuomconv_id=pItemUomConvId)
  AND (itemuomconv_id=itemuom_itemuomconv_id)
  AND (itemuom_uomtype_id=uomtype_id))
  LOOP
    _result[_cnt] := _p.uomtype_name; 
    _cnt := _cnt + 1;
  END LOOP;

  RETURN _result;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchjournalnumber-text">fetchjournalnumber( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUse ALIAS FOR $1;
  _number INTEGER;

BEGIN

  SELECT nextval(&#39;journal_number_seq&#39;) INTO _number;

  INSERT INTO jrnluse
  (jrnluse_date, jrnluse_number, jrnluse_use)
  VALUES
  (CURRENT_TIMESTAMP, _number, pUse);

  RETURN _number;
  
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchmetricbool-text">fetchmetricbool( text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _pMetricName ALIAS FOR $1;
  _returnVal BOOLEAN;
BEGIN
  SELECT CASE 
    WHEN MIN(metric_value) = &#39;t&#39; THEN
     true
    ELSE
     false
    END INTO _returnVal
    FROM metric
   WHERE metric_name = _pMetricName;
  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchmetrictext-text">fetchmetrictext( text )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _pMetricName ALIAS FOR $1;
  _returnVal TEXT;
BEGIN
  SELECT metric_value::TEXT INTO _returnVal
    FROM metric
   WHERE metric_name = _pMetricName;
  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchmetricvalue-text">fetchmetricvalue( text )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _pMetricName ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  SELECT metric_value::INTEGER INTO _returnVal
    FROM metric
   WHERE metric_name = _pMetricName;
  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchnextchecknumber-integer">fetchnextchecknumber( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBankaccntid ALIAS FOR $1;
  _nextChkNumber INTEGER;

BEGIN

  SELECT bankaccnt_nextchknum INTO _nextChkNumber
  FROM bankaccnt
  WHERE (bankaccnt_id=pBankaccntid);

  UPDATE bankaccnt
  SET bankaccnt_nextchknum = (bankaccnt_nextchknum + 1)
  WHERE (bankaccnt_id=pBankaccntid);

  RETURN _nextChkNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchnextnumber-text">fetchnextnumber( text )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  psequence	ALIAS FOR $1;
  _number	TEXT;
  _numcol	TEXT;
  _select	TEXT;
  _table	TEXT;
  _test		TEXT;

BEGIN
  LOOP
    SELECT CAST(orderseq_number AS text), orderseq_table, orderseq_numcol
	INTO _number, _table, _numcol
    FROM orderseq
    WHERE (orderseq_name=psequence);
    IF (NOT FOUND) THEN
      RAISE EXCEPTION &#39;Invalid orderseq_name %&#39;, psequence;
    END IF;

    _select := &#39;SELECT &#39; || quote_ident(_numcol) ||
	       &#39; FROM &#39;  || quote_ident(_table) ||
	       &#39; WHERE (&#39; || quote_ident(_numcol) || &#39;=&#39; ||
               quote_literal(_number) || &#39;);&#39;;

    UPDATE orderseq
    SET orderseq_number = (orderseq_number + 1)
    WHERE (orderseq_name=psequence);

    EXECUTE _select INTO _test;

    IF (_test IS NULL OR NOT FOUND) THEN
      EXIT;
    END IF;

  END LOOP;

RETURN _number;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchponumber">fetchponumber(  )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _poNumber TEXT;
  _test INTEGER;

BEGIN

  LOOP

    SELECT CAST(orderseq_number AS text) INTO _poNumber
    FROM orderseq
    WHERE (orderseq_name=&#39;PoNumber&#39;);

    UPDATE orderseq
    SET orderseq_number = (orderseq_number + 1)
    WHERE (orderseq_name=&#39;PoNumber&#39;);

    SELECT pohead_id INTO _test
    FROM pohead
    WHERE (pohead_number=_poNumber);

    IF (NOT FOUND) THEN
      EXIT;
    END IF;

  END LOOP;

  RETURN _poNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchprefwarehousid">fetchprefwarehousid(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _result INTEGER;
BEGIN
    SELECT CAST(usrpref_value AS INTEGER) INTO _result
    FROM usrpref
    WHERE ((usrpref_username=current_user)
    AND (usrpref_name=&#39;PreferredWarehouse&#39;));

    RETURN _result;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchprnumber">fetchprnumber(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _number INTEGER;
  _test INTEGER;

BEGIN

  LOOP
    SELECT orderseq_number INTO _number
    FROM orderseq
    WHERE (orderseq_name=&#39;PrNumber&#39;);

    IF NOT (FOUND) THEN
--  Ack!!  Drop in a bogus PrNumber.
      INSERT INTO orderseq
      ( orderseq_name, orderseq_number )
      VALUES
      ( &#39;PrNumber&#39;, 100000 );
 
      _number := 100000;
    END IF;

    UPDATE orderseq
    SET orderseq_number = (orderseq_number + 1)
    WHERE (orderseq_name=&#39;PrNumber&#39;);

    SELECT pr_id INTO _test
    FROM pr
    WHERE (pr_number=_number);

    IF (NOT FOUND) THEN
      EXIT;
    END IF;
  END LOOP;

  RETURN _number;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchqunumber">fetchqunumber(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _quNumber INTEGER;
  _test INTEGER;

BEGIN

  LOOP

    SELECT orderseq_number INTO _quNumber
    FROM orderseq
    WHERE (orderseq_name=&#39;QuNumber&#39;);

    UPDATE orderseq
    SET orderseq_number = (orderseq_number + 1)
    WHERE (orderseq_name=&#39;QuNumber&#39;);

    SELECT quhead_id INTO _test
    FROM quhead
    WHERE (quhead_number=_quNumber);

    IF (NOT FOUND) THEN
      EXIT;
    END IF;

  END LOOP;

  RETURN _quNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchshipmentnumber">fetchshipmentnumber(  )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _number		TEXT;
  _test			INTEGER;

BEGIN
  LOOP

    SELECT CAST(nextval(&#39;shipment_number_seq&#39;) AS TEXT) INTO _number;
    
    SELECT shiphead_id INTO _test
      FROM shiphead
     WHERE (shiphead_number=_number);
    IF (NOT FOUND) THEN
      EXIT;
    END IF;

  END LOOP;

  RETURN _number;
  
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchsonumber">fetchsonumber(  )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _soNumber TEXT;
  _test INTEGER;

BEGIN

  LOOP

    SELECT CAST(orderseq_number AS text) INTO _soNumber
    FROM orderseq
    WHERE (orderseq_name=&#39;SoNumber&#39;);

    UPDATE orderseq
    SET orderseq_number = (orderseq_number + 1)
    WHERE (orderseq_name=&#39;SoNumber&#39;);

    SELECT cohead_id INTO _test
    FROM cohead
    WHERE (cohead_number=_soNumber);

    IF (NOT FOUND) THEN
      EXIT;
    END IF;

  END LOOP;

  RETURN _soNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchtonumber">fetchtonumber(  )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN fetchNextNumber(&#39;ToNumber&#39;);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchusrprefbool-text">fetchusrprefbool( text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _pPrefName ALIAS FOR $1;
  _returnVal BOOLEAN;
BEGIN
  SELECT CASE 
    WHEN MIN(usrpref_value) = &#39;t&#39; THEN
     true
    ELSE
     false
    END INTO _returnVal
  FROM usrpref
  WHERE ( (usrpref_username=current_user)
    AND   (usrpref_name=_pPrefName) );
  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchvonumber">fetchvonumber(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _voucherNumber INTEGER;
  _test INTEGER;

BEGIN

  LOOP

    SELECT orderseq_number INTO _voucherNumber
    FROM orderseq
    WHERE (orderseq_name=&#39;VcNumber&#39;)
    FOR UPDATE;

    UPDATE orderseq
    SET orderseq_number = (orderseq_number + 1)
    WHERE (orderseq_name=&#39;VcNumber&#39;);

    SELECT vohead_number INTO _test
    FROM vohead
    WHERE (vohead_number=text(_voucherNumber));

    IF (NOT FOUND) THEN
      EXIT;
    END IF;

  END LOOP;

  RETURN _voucherNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fetchwonumber">fetchwonumber(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _woNumber INTEGER;
  _test INTEGER;

BEGIN

  LOOP
    SELECT orderseq_number INTO _woNumber
    FROM orderseq
    WHERE (orderseq_name=&#39;WoNumber&#39;);

    UPDATE orderseq
    SET orderseq_number = (orderseq_number + 1)
    WHERE (orderseq_name=&#39;WoNumber&#39;);

    SELECT wo_id INTO _test
    FROM wo
    WHERE (wo_number=_woNumber);

    IF (NOT FOUND) THEN
      EXIT;
    END IF;
  END LOOP;

  RETURN _woNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.financialreport-integer-integer">financialreport( integer, integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pFlheadid ALIAS FOR $1;
  pPeriodid ALIAS FOR $2;
  _result bool;

BEGIN

  SELECT financialreport(pFlheadid,pPeriodid,&#39;M&#39;) INTO _result;

  RETURN _result;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.financialreport-integer-integer-boolean-boolean">financialreport( integer, integer, boolean, boolean )</a>
		</h2>
<h3>Returns: SET OF flstmtitem</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pFlcolid ALIAS FOR $1;
  pPeriodid ALIAS FOR $2;
  pShowNumbers ALIAS FOR $3;
  pIndentName ALIAS FOR $4;
  _row flstmtitem%ROWTYPE;
  _p RECORD;
  _x RECORD;
  _priorMoPeriodId INTEGER;
  _priorQtPeriodId INTEGER;
  _priorYrPeriodId INTEGER;
  _first BOOLEAN;
  _prevlevel INTEGER;
  _subgrp INTEGER;
  _qtrInterval TEXT;
  _yrInterval TEXT;

BEGIN

  _priorMoPeriodId := -1;
  _priorQtPeriodId := -1;
  _priorYrPeriodId := -1;
  _first := TRUE;
  _prevlevel :=0;
  _subgrp := 0;

--Get Layout Data
  SELECT flhead_id,flhead_type,
        flcol_month,flcol_quarter,flcol_year,flcol_priortype,
        flcol_priormonth,flcol_priorquarter,flcol_prioryear,
        flcol_priordiff,flcol_priordiffprcnt,flcol_priorprcnt,
        flcol_budget,flcol_budgetdiff,flcol_budgetdiffprcnt,
        flcol_budgetprcnt INTO _p
  FROM flhead,flcol
  WHERE ((flcol_id=pFlcolid)
  AND (flhead_id=flcol_flhead_id));

  IF (_p.flhead_type=&#39;B&#39;) THEN
    _qtrInterval := &#39;M&#39;;
    _yrInterval := &#39;M&#39;;
  ELSE
    _qtrInterval := &#39;Q&#39;;
    _yrInterval := &#39;Y&#39;;
  END IF;

--Delete old data from all periods
  DELETE FROM flrpt
  WHERE ((flrpt_username=CURRENT_USER)
  AND (flrpt_flhead_id=_p.flhead_id));

--Populate report data...
--...for Month
        IF (_p.flcol_month) THEN

        PERFORM financialreport(_p.flhead_id,pPeriodid,&#39;M&#39;);

                IF ((_p.flcol_priortype = &#39;P&#39;) AND (_p.flcol_priormonth)) THEN

                        SELECT COALESCE(pp.period_id,-1) INTO _priorMoPeriodId
                        FROM period cp, period pp
                        WHERE ((cp.period_id=pPeriodId)
                        AND (cp.period_start &gt; pp.period_start))
                        ORDER BY pp.period_start DESC LIMIT 1;

                        IF (_priorMoPeriodId IS NOT NULL) THEN
                                PERFORM financialreport(_p.flhead_id,_priorMoPeriodId,&#39;M&#39;);
                        END IF;

                        ELSE IF ((_p.flcol_priortype=&#39;Y&#39;)AND (_p.flcol_priormonth)) THEN

                                SELECT COALESCE(pp.period_id,-1) INTO _priorMoPeriodId
                                FROM period cp, period pp
                                WHERE ((cp.period_id=pPeriodId)
                                AND ((cp.period_start - interval &#39;1 year&#39;) &gt;= pp.period_start))
                                ORDER BY pp.period_start DESC LIMIT 1;

                                IF (_priorMoPeriodId IS NOT NULL) THEN
                                        PERFORM financialreport(_p.flhead_id,_priorMoPeriodId,&#39;M&#39;);
                                END IF;

                        END IF;

                END IF;
        END IF;

--...for Quarter
        IF (_p.flcol_quarter) THEN

        PERFORM financialreport(_p.flhead_id,pPeriodid,&#39;Q&#39;);

        END IF;

        IF ((_p.flcol_priortype=&#39;P&#39;) AND (_p.flcol_priorquarter)) THEN

                SELECT COALESCE(pp.period_id,-1) INTO _priorQtPeriodId
                FROM period cp, period pp
                WHERE ((cp.period_id=pPeriodId)
                AND (cp.period_start &gt; pp.period_start)
                AND (pp.period_quarter=
                        CASE WHEN cp.period_quarter &gt; 1 THEN
                                cp.period_quarter - 1
                        ELSE 4 END)
                AND (pp.period_start &gt;= cp.period_start - interval &#39;1 year&#39;))
                ORDER BY pp.period_start DESC LIMIT 1;

                IF (_priorQtPeriodId IS NOT NULL) THEN
                        PERFORM financialreport(_p.flhead_id,_priorQtPeriodId,&#39;Q&#39;);
                END IF;

                ELSE IF ((_p.flcol_priortype=&#39;Y&#39;)AND (_p.flcol_priorquarter)) THEN

                        SELECT pp.period_id INTO _priorQtPeriodId
                        FROM period cp, period pp, yearperiod cy, yearperiod py
                        WHERE ((cp.period_id=pPeriodId)
                        AND (cp.period_yearperiod_id=cy.yearperiod_id)
                        AND (pp.period_yearperiod_id=py.yearperiod_id)
                        AND (cp.period_quarter=pp.period_quarter)
                        AND (cy.yearperiod_start &gt; py.yearperiod_start))
                        ORDER BY py.yearperiod_start DESC, pp.period_start DESC LIMIT 1;

                        IF (_priorQtPeriodId IS NOT NULL) THEN
                                PERFORM financialreport(_p.flhead_id,_priorQtPeriodId,&#39;Q&#39;);
                        END IF;

                END IF;
        END IF;

--...for Year
        IF (_p.flcol_year) THEN

                PERFORM financialreport(_p.flhead_id,pPeriodid,&#39;Y&#39;);

        END IF;

        IF (_p.flcol_prioryear=&#39;D&#39;) THEN

                SELECT COALESCE(pp.period_id,-1) INTO _priorYrPeriodId
                FROM period cp, period pp
                WHERE ((cp.period_id=pPeriodId)
                AND ((cp.period_start - interval &#39;1 year&#39;) &gt;= pp.period_start))
                ORDER BY pp.period_start DESC LIMIT 1;

                IF (_priorYrPeriodId IS NOT NULL) THEN
                        PERFORM financialreport(_p.flhead_id,_priorYrPeriodId,&#39;Y&#39;);
                END IF;

                ELSE IF (_p.flcol_prioryear=&#39;F&#39;) THEN

                        SELECT pp.period_id INTO _priorYrPeriodId
                        FROM period cp, period pp, yearperiod cy, yearperiod py
                        WHERE ((cp.period_id=pPeriodId)
                        AND (cp.period_yearperiod_id=cy.yearperiod_id)
                        AND (pp.period_yearperiod_id=py.yearperiod_id)
                        AND (cy.yearperiod_start &gt; py.yearperiod_start))
                        ORDER BY pp.period_start DESC LIMIT 1;

                        IF (_priorYrPeriodId IS NOT NULL) THEN
                                PERFORM financialreport(_p.flhead_id,_priorYrPeriodId,&#39;Y&#39;);
                        END IF;

                END IF;
        END IF;

--Return the data
  FOR _x IN
        SELECT
        flrpt.flrpt_flhead_id AS flstmtitem_flhead_id,
        flrpt.flrpt_period_id AS flstmtitem_period_id,
        flrpt.flrpt_username AS flstmtitem_username,
        flrpt.flrpt_order AS flstmtitem_order,
        flrpt.flrpt_level AS flstmtitem_level,
        flrpt.flrpt_type AS flstmtitem_type,
        flrpt.flrpt_type_id AS flstmtitem_type_id,
        flrpt.flrpt_parent_id AS flstmtitem_parent_id,
        NULL AS flstmtitem_accnt_id,
        CASE
                WHEN (pIndentName) THEN
                        formatindent(flgrp.flgrp_name,flrpt.flrpt_level)
                ELSE flgrp.flgrp_name
        END AS flstmtitem_name,
        CASE
                WHEN (flgrp_summarize AND (flhead_type IN (&#39;I&#39;,&#39;C&#39;))) THEN
                        (COALESCE(flrptmo.flrpt_diff,0))
                WHEN (flgrp_summarize AND (flhead_type = &#39;B&#39;)) THEN
                        (COALESCE(flrptmo.flrpt_ending,0))
                ELSE NULL
        END AS flstmtitem_month,
        CASE
                WHEN (flgrp_summarize) THEN
                        (COALESCE(flrptmo.flrpt_debits,0))
                ELSE NULL
        END AS flstmtitem_monthdb,
        CASE
                WHEN (flgrp_summarize) THEN
                        (COALESCE(flrptmo.flrpt_credits,0))
                ELSE NULL
        END AS flstmtitem_monthcr,
        CASE
                WHEN (flgrp_summarize AND flgrp_showdiffprcnt) THEN
                        (COALESCE(flrptmo.flrpt_diffprcnt,0))
                WHEN (flgrp_summarize AND flgrp_showendprcnt) THEN
                        (COALESCE(flrptmo.flrpt_endingprcnt,0))
                ELSE NULL
        END AS flstmtitem_monthprcnt,
        CASE
                WHEN (flgrp_summarize) THEN
                        (flrptmo.flrpt_budget)
                ELSE NULL
        END AS flstmtitem_monthbudget,
        CASE
                WHEN (flgrp_summarize) THEN
                        (flrptmo.flrpt_budgetprcnt)
                ELSE NULL
        END AS flstmtitem_monthbudgetprcnt,
        CASE
                WHEN (flgrp_summarize AND flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE((flrptmo.flrpt_diff-flrptmo.flrpt_budget),0))
                WHEN (flgrp_summarize AND flhead_type = &#39;B&#39;) THEN
                        (COALESCE((flrptmo.flrpt_ending-flrptmo.flrpt_budget),0))
                ELSE NULL
        END AS flstmtitem_monthbudgetdiff,
        CASE
                WHEN (flgrp_summarize AND (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) AND (flrptmo.flrpt_budget &gt; 0)) THEN
                        (COALESCE(((flrptmo.flrpt_diff-flrptmo.flrpt_budget)/flrptmo.flrpt_budget),0))
                WHEN (flgrp_summarize AND (flhead_type=&#39;B&#39;) AND (flrptmo.flrpt_budget &gt; 0)) THEN
                        (COALESCE(((flrptmo.flrpt_ending-flrptmo.flrpt_budget)/flrptmo.flrpt_budget),0))
                WHEN (flgrp_summarize AND (flrptmo.flrpt_budget = 0)) THEN
                        NULL
                ELSE NULL
        END AS flstmtitem_monthbudgetdiffprcnt,
        CASE
                WHEN (flgrp_summarize AND flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptqt.flrpt_diff,0))
                WHEN (flgrp_summarize AND flhead_type = &#39;B&#39;) THEN
                        (COALESCE(flrptqt.flrpt_ending,0))
                ELSE NULL
        END AS flstmtitem_qtr,
        CASE
                WHEN (flgrp_summarize) THEN
                        (COALESCE(flrptqt.flrpt_debits,0))
                ELSE NULL
        END AS flstmtitem_qtrdb,
        CASE
                WHEN (flgrp_summarize) THEN
                        (COALESCE(flrptqt.flrpt_credits,0))
                ELSE NULL
        END AS flstmtitem_qtrcr,
        CASE
                WHEN (flgrp_summarize AND flgrp_showdiffprcnt) THEN
                        (flrptqt.flrpt_diffprcnt)
                WHEN (flgrp_summarize AND flgrp_showendprcnt) THEN
                        (flrptqt.flrpt_endingprcnt)
                ELSE NULL
        END AS flstmtitem_qtrprcnt,
        CASE
                WHEN (flgrp_summarize) THEN
                        (COALESCE(flrptqt.flrpt_budget,0))
                ELSE NULL
        END AS flstmtitem_qtrbudget,
        CASE
                WHEN (flgrp_summarize) THEN
                        (flrptqt.flrpt_budgetprcnt)
                ELSE NULL
        END AS flstmtitem_qtrbudgetprcnt,
        CASE
                WHEN (flgrp_summarize AND flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE((flrptqt.flrpt_diff-flrptqt.flrpt_budget),0))
                WHEN (flgrp_summarize AND flhead_type = &#39;B&#39;) THEN
                        (COALESCE((flrptqt.flrpt_ending-flrptqt.flrpt_budget),0))
                ELSE NULL
        END AS flstmtitem_qtrbudgetdiff,
        CASE
                WHEN (flgrp_summarize AND (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) AND (flrptqt.flrpt_budget &gt; 0)) THEN
                        (COALESCE(((flrptqt.flrpt_diff-flrptqt.flrpt_budget)/flrptqt.flrpt_budget),0))
                WHEN (flgrp_summarize AND (flhead_type=&#39;B&#39;) AND (flrptqt.flrpt_budget &gt; 0)) THEN
                        (COALESCE(((flrptqt.flrpt_ending-flrptqt.flrpt_budget)/flrptqt.flrpt_budget),0))
                ELSE NULL
        END AS flstmtitem_qtrbudgetdiffprcnt,
        CASE
                WHEN (flgrp_summarize AND flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptyr.flrpt_diff,0))
                WHEN (flgrp_summarize AND flhead_type = &#39;B&#39;) THEN
                        (COALESCE(flrptyr.flrpt_ending,0))
                ELSE NULL
        END AS flstmtitem_year,
        CASE
                WHEN (flgrp_summarize) THEN
                        (COALESCE(flrptyr.flrpt_debits,0))
                ELSE NULL
        END AS flstmtitem_yeardb,
        CASE
                WHEN (flgrp_summarize) THEN
                        (COALESCE(flrptyr.flrpt_credits,0))
                ELSE NULL
        END AS flstmtitem_yearcr,
        CASE
                WHEN (flgrp_summarize AND flgrp_showdiffprcnt) THEN
                        (COALESCE(flrptyr.flrpt_diffprcnt,0))
                WHEN (flgrp_summarize AND flgrp_showendprcnt) THEN
                        (COALESCE(flrptyr.flrpt_endingprcnt,0))
                ELSE NULL
        END AS flstmtitem_yearprcnt,
        CASE
                WHEN (flgrp_summarize) THEN
                        (flrptyr.flrpt_budget)
                ELSE NULL
        END AS  flstmtitem_yearbudget,
        CASE
                WHEN (flgrp_summarize) THEN
                        (flrptyr.flrpt_budgetprcnt)
                ELSE NULL
        END AS flstmtitem_yearbudgetprcnt,
        CASE
                WHEN (flgrp_summarize AND flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE((flrptyr.flrpt_diff-flrptyr.flrpt_budget),0))
                WHEN (flgrp_summarize AND flhead_type = &#39;B&#39;) THEN
                        (COALESCE((flrptyr.flrpt_ending-flrptyr.flrpt_budget),0))
                ELSE NULL
        END AS flstmtitem_yearbudgetdiff,
        CASE
                WHEN (flgrp_summarize AND (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) AND (flrptyr.flrpt_budget &gt; 0)) THEN
                        (COALESCE(((flrptyr.flrpt_diff-flrptyr.flrpt_budget)/flrptyr.flrpt_budget),0))
                WHEN (flgrp_summarize AND (flhead_type = &#39;B&#39;) AND (flrptyr.flrpt_budget &gt; 0)) THEN
                        (COALESCE(((flrptyr.flrpt_ending-flrptyr.flrpt_budget)/flrptyr.flrpt_budget),0))
                WHEN (flgrp_summarize AND (flrptyr.flrpt_budget = 0)) THEN
                        NULL
                ELSE NULL
        END AS flstmtitem_yearbudgetdiffprcnt,
        CASE
                WHEN (flgrp_summarize AND flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptprmo.flrpt_diff,0))
                WHEN (flgrp_summarize AND flhead_type = &#39;B&#39;) THEN
                        (COALESCE(flrptprmo.flrpt_ending,0))
                ELSE NULL
        END AS flstmtitem_prmonth,
        CASE
                WHEN (flgrp_summarize AND flgrp_showdiffprcnt) THEN
                        (flrptprmo.flrpt_diffprcnt)
                WHEN (flgrp_summarize AND flgrp_showendprcnt) THEN
                        (flrptprmo.flrpt_endingprcnt)
                ELSE NULL
        END AS flstmtitem_prmonthprcnt,
        CASE
                WHEN (flgrp_summarize AND flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptmo.flrpt_diff-flrptprmo.flrpt_diff,0))
                WHEN (flgrp_summarize AND flhead_type = &#39;B&#39;) THEN
                        (COALESCE(flrptmo.flrpt_ending-flrptprmo.flrpt_ending,0))
                ELSE NULL
        END AS flstmtitem_prmonthdiff,
        CASE
                WHEN (flgrp_summarize AND (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) AND (flrptprmo.flrpt_diff &gt; 0)) THEN
                        (COALESCE((flrptmo.flrpt_diff-flrptprmo.flrpt_diff)/flrptprmo.flrpt_diff,0))
                WHEN (flgrp_summarize AND (flhead_type = &#39;B&#39;) AND (flrptprmo.flrpt_ending &gt; 0)) THEN
                        (COALESCE((flrptmo.flrpt_ending-flrptprmo.flrpt_ending)/flrptprmo.flrpt_ending,0))
                WHEN (flgrp_summarize AND (flrptprmo.flrpt_ending = 0)) THEN
                        NULL
                ELSE NULL
        END AS flstmtitem_prmonthdiffprcnt,
        CASE
                WHEN (flgrp_summarize AND flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptprqt.flrpt_diff,0))
                WHEN (flgrp_summarize AND flhead_type = &#39;B&#39;) THEN
                        (COALESCE(flrptprqt.flrpt_ending,0))
                ELSE NULL
        END AS flstmtitem_prqtr,
        CASE
                WHEN (flgrp_summarize AND flgrp_showdiffprcnt) THEN
                        (flrptprqt.flrpt_diffprcnt)
                WHEN (flgrp_summarize AND flgrp_showendprcnt) THEN
                        (flrptprqt.flrpt_endingprcnt)
                ELSE NULL
        END AS flstmtitem_prqtrprcnt,
        CASE
                WHEN (flgrp_summarize AND flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptqt.flrpt_diff-flrptprqt.flrpt_diff,0))
                WHEN (flgrp_summarize AND flhead_type = &#39;B&#39;) THEN
                        (COALESCE(flrptqt.flrpt_ending-flrptprqt.flrpt_ending,0))
                ELSE NULL
        END AS flstmtitem_prqtrdiff,
        CASE
                WHEN (flgrp_summarize AND (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) AND (flrptprqt.flrpt_diff &gt; 0)) THEN
                        (COALESCE((flrptqt.flrpt_diff-flrptprqt.flrpt_diff)/flrptprqt.flrpt_diff,0))
                WHEN (flgrp_summarize AND (flhead_type = &#39;B&#39;) AND (flrptprqt.flrpt_ending &gt; 0)) THEN
                        (COALESCE((flrptqt.flrpt_ending-flrptprqt.flrpt_ending)/flrptprqt.flrpt_ending,0))
                WHEN (flgrp_summarize AND (flrptprqt.flrpt_ending = 0)) THEN
                        NULL
                ELSE NULL
        END AS flstmtitem_prqtrdiffprcnt,
        CASE
                WHEN (flgrp_summarize AND flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptpryr.flrpt_diff,0))
                WHEN (flgrp_summarize AND flhead_type = &#39;B&#39;) THEN
                        (COALESCE(flrptpryr.flrpt_ending,0))
                ELSE NULL
        END AS flstmtitem_pryear,
        CASE
                WHEN (flgrp_summarize AND flgrp_showdiffprcnt) THEN
                        (flrptpryr.flrpt_diffprcnt)
                WHEN (flgrp_summarize AND flgrp_showendprcnt) THEN
                        (flrptpryr.flrpt_endingprcnt)
                ELSE NULL
        END AS flstmtitem_pryearprcnt,
        CASE
                WHEN (flgrp_summarize AND flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptyr.flrpt_diff-flrptpryr.flrpt_diff,0))
                WHEN (flgrp_summarize AND flhead_type = &#39;B&#39;) THEN
                        (COALESCE(flrptyr.flrpt_ending-flrptpryr.flrpt_ending,0))
                ELSE NULL
        END AS flstmtitem_pryeardiff,
        CASE
                WHEN (flgrp_summarize AND (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) AND (flrptpryr.flrpt_diff &gt; 0)) THEN
                        (COALESCE((flrptyr.flrpt_diff-flrptpryr.flrpt_diff)/flrptpryr.flrpt_diff,0))
                WHEN (flgrp_summarize AND (flhead_type = &#39;B&#39; ) AND (flrptpryr.flrpt_ending &gt; 0)) THEN
                        (COALESCE((flrptyr.flrpt_ending-flrptpryr.flrpt_ending)/flrptpryr.flrpt_ending,0))
                WHEN (flgrp_summarize AND (flrptpryr.flrpt_ending = 0)) THEN
                        NULL
                ELSE NULL
        END AS flstmtitem_pryeardiffprcnt
        FROM flgrp,flhead,
                (SELECT DISTINCT
                        flrpt_flhead_id,
                        flrpt_period_id,
                        flrpt_username,
                        flrpt_order,
                        flrpt_level,
                        flrpt_type,
                        flrpt_type_id,
                        flrpt_parent_id
                FROM flrpt
                WHERE ((flrpt_type=&#39;G&#39;)
                AND (flrpt_flhead_id=_p.flhead_id)
                AND (flrpt_period_id=pPeriodId)
                AND (flrpt_username=CURRENT_USER))) AS flrpt
                        LEFT OUTER JOIN flrpt flrptmo
                                ON ((flrptmo.flrpt_type=flrpt.flrpt_type)
                                AND (flrptmo.flrpt_type_id=flrpt.flrpt_type_id)
                                AND (flrptmo.flrpt_flhead_id=flrpt.flrpt_flhead_id)
                                AND (flrptmo.flrpt_period_id=flrpt.flrpt_period_id)
                                AND (flrptmo.flrpt_interval=&#39;M&#39;)
                                AND (flrptmo.flrpt_username=flrpt.flrpt_username)
                                AND (flrptmo.flrpt_order=flrpt.flrpt_order))
                        LEFT OUTER JOIN flrpt flrptqt
                                ON ((flrptqt.flrpt_type=flrpt.flrpt_type)
                                AND (flrptqt.flrpt_type_id=flrpt.flrpt_type_id)
                                AND (flrptqt.flrpt_flhead_id=flrpt.flrpt_flhead_id)
                                AND (flrptqt.flrpt_period_id=flrpt.flrpt_period_id)
                                AND (flrptqt.flrpt_interval=_qtrInterval)
                                AND (flrptqt.flrpt_username=flrpt.flrpt_username)
                                AND (flrptqt.flrpt_order=flrpt.flrpt_order))
                        LEFT OUTER JOIN flrpt flrptyr
                                ON ((flrptyr.flrpt_type=flrpt.flrpt_type)
                                AND (flrptyr.flrpt_type_id=flrpt.flrpt_type_id)
                                AND (flrptyr.flrpt_flhead_id=flrpt.flrpt_flhead_id)
                                AND (flrptyr.flrpt_period_id=flrpt.flrpt_period_id)
                                AND (flrptyr.flrpt_interval=_yrInterval)
                                AND (flrptyr.flrpt_username=flrpt.flrpt_username)
                                AND (flrptyr.flrpt_order=flrpt.flrpt_order))
                        LEFT OUTER JOIN flrpt flrptprmo
                                ON ((flrptprmo.flrpt_type=flrpt.flrpt_type)
                                AND (flrptprmo.flrpt_type_id=flrpt.flrpt_type_id)
                                AND (flrptprmo.flrpt_flhead_id=flrpt.flrpt_flhead_id)
                                AND (flrptprmo.flrpt_period_id=_priorMoPeriodId)
                                AND (flrptprmo.flrpt_interval=&#39;M&#39;)
                                AND (flrptprmo.flrpt_username=flrpt.flrpt_username)
                                AND (flrptprmo.flrpt_order=flrpt.flrpt_order))
                        LEFT OUTER JOIN flrpt flrptprqt
                                ON ((flrptprqt.flrpt_type=flrpt.flrpt_type)
                                AND (flrptprqt.flrpt_type_id=flrpt.flrpt_type_id)
                                AND (flrptprqt.flrpt_flhead_id=flrpt.flrpt_flhead_id)
                                AND (flrptprqt.flrpt_period_id=_priorQtPeriodId)
                                AND (flrptprqt.flrpt_interval=&#39;Q&#39;)
                                AND (flrptprqt.flrpt_username=flrpt.flrpt_username)
                                AND (flrptprqt.flrpt_order=flrpt.flrpt_order))
                        LEFT OUTER JOIN flrpt flrptpryr
                                ON ((flrptpryr.flrpt_type=flrpt.flrpt_type)
                                AND (flrptpryr.flrpt_type_id=flrpt.flrpt_type_id)
                                AND (flrptpryr.flrpt_flhead_id=flrpt.flrpt_flhead_id)
                                AND (flrptpryr.flrpt_period_id=_priorYrPeriodId)
                                AND (flrptpryr.flrpt_interval=&#39;Y&#39;)
                                AND (flrptpryr.flrpt_username=flrpt.flrpt_username)
                                AND (flrptpryr.flrpt_order=flrpt.flrpt_order))
        WHERE ((flgrp_id = flrpt.flrpt_type_id)
        AND (flhead_id = flgrp_flhead_id))
        UNION
        SELECT
        flrpt.flrpt_flhead_id AS flstmtitem_flhead_id,
        flrpt.flrpt_period_id AS flstmtitem_period_id,
        flrpt.flrpt_username AS flstmtitem_username,
        flrpt.flrpt_order AS flstmtitem_order,
        flrpt.flrpt_level AS flstmtitem_level,
        flrpt.flrpt_type AS flstmtitem_type,
        flrpt.flrpt_type_id AS flstmtitem_type_id,
        flrpt.flrpt_parent_id AS flstmtitem_parent_id,
        flrpt.flrpt_accnt_id AS flstmtitem_accnt_id,
        CASE
                WHEN (pIndentName) THEN
                        formatindent(flrpt.flrpt_name,flrpt.flrpt_level)
                ELSE flrpt.flrpt_name
        END AS flstmtitem_name,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptmo.flrpt_diff,0))
                ELSE (COALESCE(flrptmo.flrpt_ending,0))
        END AS flstmtitem_month,
        (COALESCE(flrptmo.flrpt_debits,0)) AS flstmtitem_monthdb,
        (COALESCE(flrptmo.flrpt_credits,0)) AS flstmtitem_monthcr,
        CASE
                WHEN (flitem_showdiffprcnt) THEN
                        (flrptmo.flrpt_diffprcnt)
                WHEN (flitem_showendprcnt) THEN
                        (flrptmo.flrpt_endingprcnt)
                ELSE NULL
        END AS flstmtitem_monthprcnt,
        (COALESCE(flrptmo.flrpt_budget,0)) AS flstmtitem_monthbudget,
        (flrptmo.flrpt_budgetprcnt) AS flstmtitem_monthbudgetprcnt,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE((flrptmo.flrpt_diff-flrptmo.flrpt_budget),0))
                ELSE (COALESCE((flrptmo.flrpt_ending-flrptmo.flrpt_budget),0))
        END AS flstmtitem_monthbudgetdiff,
        CASE
                WHEN ((flhead_type IN (&#39;I&#39;,&#39;C&#39;)) AND (flrptmo.flrpt_budget &gt; 0)) THEN
                        (COALESCE(((flrptmo.flrpt_diff-flrptmo.flrpt_budget)/flrptmo.flrpt_budget),0))
                WHEN ((flhead_type=&#39;B&#39;) AND (flrptmo.flrpt_budget &gt; 0)) THEN
                        (COALESCE(((flrptmo.flrpt_ending-flrptmo.flrpt_budget)/flrptmo.flrpt_budget),0))
                ELSE NULL
        END AS flstmtitem_monthbudgetdiffprcnt,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptqt.flrpt_diff,0))
                ELSE (COALESCE(flrptqt.flrpt_ending,0))
        END AS flstmtitem_qtr,
        (COALESCE(flrptqt.flrpt_debits,0)) AS flstmtitem_qtrdb,
        (COALESCE(flrptqt.flrpt_credits,0)) AS flstmtitem_qtrcr,
        CASE
                WHEN (flitem_showdiffprcnt) THEN
                        (COALESCE(flrptqt.flrpt_diffprcnt,0))
                WHEN (flitem_showendprcnt) THEN
                        (COALESCE(flrptqt.flrpt_endingprcnt,0))
                ELSE NULL
        END AS flstmtitem_qtrprcnt,
        (COALESCE(flrptqt.flrpt_budget,0)) AS flstmtitem_qtrbudget,
        (flrptqt.flrpt_budgetprcnt) AS flstmtitem_qtrbudgetprcnt,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE((flrptqt.flrpt_diff-flrptqt.flrpt_budget),0))
                ELSE (COALESCE((flrptqt.flrpt_ending-flrptqt.flrpt_budget),0))
        END AS flstmtitem_qtrbudgetdiff,
        CASE
                WHEN ((flhead_type IN (&#39;I&#39;,&#39;C&#39;)) AND (flrptqt.flrpt_budget &gt; 0)) THEN
                        (COALESCE(((flrptqt.flrpt_diff-flrptqt.flrpt_budget)/flrptqt.flrpt_budget),0))
                WHEN ((flhead_type=&#39;B&#39;) AND (flrptqt.flrpt_budget &gt; 0)) THEN
                        (COALESCE(((flrptqt.flrpt_ending-flrptqt.flrpt_budget)/flrptqt.flrpt_budget),0))
                ELSE NULL
        END AS flstmtitem_qtrbudgetdiffprcnt,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptyr.flrpt_diff,0))
                ELSE (COALESCE(flrptyr.flrpt_ending,0))
        END AS flstmtitem_year,
        (COALESCE(flrptyr.flrpt_debits,0)) AS flstmtitem_yeardb,
        (COALESCE(flrptyr.flrpt_credits,0)) AS flstmtitem_yearcr,
        CASE
                WHEN (flitem_showdiffprcnt) THEN
                        (flrptyr.flrpt_diffprcnt)
                WHEN (flitem_showendprcnt) THEN
                        (flrptyr.flrpt_endingprcnt)
                ELSE NULL
        END AS flstmtitem_yearprcnt,
        (COALESCE(flrptyr.flrpt_budget,0)) AS  flstmtitem_yearbudget,
        (flrptyr.flrpt_budgetprcnt) AS flstmtitem_yearbudgetprcnt,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE((flrptyr.flrpt_diff-flrptyr.flrpt_budget),0))
                ELSE (COALESCE((flrptyr.flrpt_ending-flrptyr.flrpt_budget),0))
        END AS flstmtitem_yearbudgetdiff,
        CASE
                WHEN ((flhead_type IN (&#39;I&#39;,&#39;C&#39;)) AND (flrptyr.flrpt_budget &gt; 0)) THEN
                        (COALESCE(((flrptyr.flrpt_diff-flrptyr.flrpt_budget)/flrptyr.flrpt_budget),0))
                WHEN ((flhead_type = &#39;B&#39;) AND (flrptyr.flrpt_budget &gt; 0)) THEN
                        (COALESCE(((flrptyr.flrpt_ending-flrptyr.flrpt_budget)/flrptyr.flrpt_budget),0))
                ELSE NULL
        END AS flstmtitem_yearbudgetdiffprcnt,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptprmo.flrpt_diff,0))
                ELSE (COALESCE(flrptprmo.flrpt_ending,0))
        END AS flstmtitem_prmonth,
        CASE
                WHEN (flitem_showdiffprcnt) THEN
                        (flrptprmo.flrpt_diffprcnt)
                WHEN (flitem_showendprcnt) THEN
                        (flrptprmo.flrpt_endingprcnt)
                ELSE NULL
        END AS flstmtitem_prmonthprcnt,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptmo.flrpt_diff-flrptprmo.flrpt_diff,0))
                ELSE (COALESCE(flrptmo.flrpt_ending-flrptprmo.flrpt_ending,0))
        END AS flstmtitem_prmonthdiff,
        CASE
                WHEN ((flhead_type IN (&#39;I&#39;,&#39;C&#39;)) AND (flrptprmo.flrpt_diff &gt; 0)) THEN
                        (COALESCE((flrptmo.flrpt_diff-flrptprmo.flrpt_diff)/flrptprmo.flrpt_diff,0))
                WHEN ((flhead_type = &#39;B&#39;) AND (flrptprmo.flrpt_ending &gt; 0)) THEN
                        (COALESCE((flrptmo.flrpt_ending-flrptprmo.flrpt_ending)/flrptprmo.flrpt_ending,0))
                ELSE NULL
        END AS flstmtitem_prmonthdiffprcnt,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptprqt.flrpt_diff,0))
                ELSE (COALESCE(flrptprqt.flrpt_ending,0))
        END AS flstmtitem_prqtr,
        CASE
                WHEN (flitem_showdiffprcnt) THEN
                        (flrptprqt.flrpt_diffprcnt)
                WHEN (flitem_showendprcnt) THEN
                        (flrptprqt.flrpt_endingprcnt)
                ELSE NULL
        END AS flstmtitem_prqtrprcnt,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptqt.flrpt_diff-flrptprqt.flrpt_diff,0))
                ELSE (COALESCE(flrptqt.flrpt_ending-flrptprqt.flrpt_ending,0))
        END AS flstmtitem_prqtrdiff,
        CASE
                WHEN ((flhead_type IN (&#39;I&#39;,&#39;C&#39;)) AND (flrptprqt.flrpt_diff &gt; 0)) THEN
                        (COALESCE((flrptqt.flrpt_diff-flrptprqt.flrpt_diff)/flrptprqt.flrpt_diff,0))
                WHEN ((flhead_type = &#39;B&#39;) AND (flrptprqt.flrpt_ending &gt; 0)) THEN
                        (COALESCE((flrptqt.flrpt_ending-flrptprqt.flrpt_ending)/flrptprqt.flrpt_ending,0))
                ELSE NULL
        END AS flstmtitem_prqtrdiffprcnt,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptpryr.flrpt_diff,0))
                ELSE (COALESCE(flrptpryr.flrpt_ending,0))
        END AS flstmtitem_pryear,
        CASE
                WHEN (flitem_showdiffprcnt) THEN
                        (flrptpryr.flrpt_diffprcnt)
                WHEN (flitem_showendprcnt) THEN
                        (flrptpryr.flrpt_endingprcnt)
                ELSE NULL
        END AS flstmtitem_pryearprcnt,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE((flrptyr.flrpt_diff-flrptpryr.flrpt_diff),0))
                ELSE (COALESCE((flrptyr.flrpt_ending-flrptpryr.flrpt_ending),0))
        END AS flstmtitem_pryeardiff,
        CASE
                WHEN ((flhead_type IN (&#39;I&#39;,&#39;C&#39;)) AND (flrptpryr.flrpt_diff &gt; 0)) THEN
                        (COALESCE((flrptyr.flrpt_diff-flrptpryr.flrpt_diff)/flrptpryr.flrpt_diff,0))
                WHEN ((flhead_type = &#39;B&#39; ) AND (flrptpryr.flrpt_ending &gt; 0)) THEN
                        (COALESCE((flrptyr.flrpt_ending-flrptpryr.flrpt_ending)/flrptpryr.flrpt_ending,0))
                ELSE NULL
        END AS flstmtitem_pryeardiffprcnt
        FROM flitem,flhead,
                (SELECT DISTINCT
                        flrpt_flhead_id,
                        flrpt_period_id,
                        flrpt_username,
                        flrpt_order,
                        flrpt_level,
                        flrpt_type,
                        flrpt_type_id,
                        flrpt_parent_id,
                        accnt_id AS flrpt_accnt_id,
                        CASE WHEN (pShowNumbers) THEN
                                (formatGLAccount(accnt_id) || &#39;-&#39; || accnt_descrip)
                        ELSE accnt_descrip END AS flrpt_name
                FROM flrpt,accnt
                WHERE ((flrpt_type=&#39;I&#39;)
                AND (flrpt_flhead_id=_p.flhead_id)
                AND (flrpt_period_id=pPeriodid)
                AND (flrpt_username=CURRENT_USER)
                AND (accnt_id=flrpt_accnt_id))) AS flrpt
                        LEFT OUTER JOIN flrpt flrptmo
                                ON ((flrptmo.flrpt_type=flrpt.flrpt_type)
                                AND (flrptmo.flrpt_type_id=flrpt.flrpt_type_id)
                                AND (flrptmo.flrpt_flhead_id=flrpt.flrpt_flhead_id)
                                AND (flrptmo.flrpt_period_id=flrpt.flrpt_period_id)
                                AND (flrptmo.flrpt_interval=&#39;M&#39;)
                                AND (flrptmo.flrpt_username=flrpt.flrpt_username)
                                AND (flrptmo.flrpt_order=flrpt.flrpt_order))
                        LEFT OUTER JOIN flrpt flrptqt
                                ON ((flrptqt.flrpt_type=flrpt.flrpt_type)
                                AND (flrptqt.flrpt_type_id=flrpt.flrpt_type_id)
                                AND (flrptqt.flrpt_flhead_id=flrpt.flrpt_flhead_id)
                                AND (flrptqt.flrpt_period_id=flrpt.flrpt_period_id)
                                AND (flrptqt.flrpt_interval=_qtrInterval)
                                AND (flrptqt.flrpt_username=flrpt.flrpt_username)
                                AND (flrptqt.flrpt_order=flrpt.flrpt_order))
                        LEFT OUTER JOIN flrpt flrptyr
                                ON ((flrptyr.flrpt_type=flrpt.flrpt_type)
                                AND (flrptyr.flrpt_type_id=flrpt.flrpt_type_id)
                                AND (flrptyr.flrpt_flhead_id=flrpt.flrpt_flhead_id)
                                AND (flrptyr.flrpt_period_id=flrpt.flrpt_period_id)
                                AND (flrptyr.flrpt_interval=_yrInterval)
                                AND (flrptyr.flrpt_username=flrpt.flrpt_username)
                                AND (flrptyr.flrpt_order=flrpt.flrpt_order))
                        LEFT OUTER JOIN flrpt flrptprmo
                                ON ((flrptprmo.flrpt_type=flrpt.flrpt_type)
                                AND (flrptprmo.flrpt_type_id=flrpt.flrpt_type_id)
                                AND (flrptprmo.flrpt_flhead_id=flrpt.flrpt_flhead_id)
                                AND (flrptprmo.flrpt_period_id=_priorMoPeriodId)
                                AND (flrptprmo.flrpt_interval=&#39;M&#39;)
                                AND (flrptprmo.flrpt_username=flrpt.flrpt_username)
                                AND (flrptprmo.flrpt_order=flrpt.flrpt_order))
                        LEFT OUTER JOIN flrpt flrptprqt
                                ON ((flrptprqt.flrpt_type=flrpt.flrpt_type)
                                AND (flrptprqt.flrpt_type_id=flrpt.flrpt_type_id)
                                AND (flrptprqt.flrpt_flhead_id=flrpt.flrpt_flhead_id)
                                AND (flrptprqt.flrpt_period_id=_priorQtPeriodId)
                                AND (flrptprqt.flrpt_interval=&#39;Q&#39;)
                                AND (flrptprqt.flrpt_username=flrpt.flrpt_username)
                                AND (flrptprqt.flrpt_order=flrpt.flrpt_order))
                        LEFT OUTER JOIN flrpt flrptpryr
                                ON ((flrptpryr.flrpt_type=flrpt.flrpt_type)
                                AND (flrptpryr.flrpt_type_id=flrpt.flrpt_type_id)
                                AND (flrptpryr.flrpt_flhead_id=flrpt.flrpt_flhead_id)
                                AND (flrptpryr.flrpt_period_id=_priorYrPeriodId)
                                AND (flrptpryr.flrpt_interval=&#39;Y&#39;)
                                AND (flrptpryr.flrpt_username=flrpt.flrpt_username)
                                AND (flrptpryr.flrpt_order=flrpt.flrpt_order) )
        WHERE ((flitem_id = flrpt.flrpt_type_id)
        AND (flhead_id = flitem_flhead_id))
        UNION
        SELECT
        flrpt.flrpt_flhead_id AS flstmtitem_flhead_id,
        flrpt.flrpt_period_id AS flstmtitem_period_id,
        flrpt.flrpt_username AS flstmtitem_username,
        flrpt.flrpt_order AS flstmtitem_order,
        flrpt.flrpt_level AS flstmtitem_level,
        flrpt.flrpt_type AS flstmtitem_type,
        flrpt.flrpt_type_id AS flstmtitem_type_id,
        flrpt.flrpt_parent_id AS flstmtitem_parent_id,
        NULL AS flstmtitem_accnt_id,
        CASE WHEN(flrpt.flrpt_type=&#39;T&#39; AND flrpt.flrpt_level=0) THEN
                        COALESCE(flrpt.flrpt_altname, &#39;Total&#39;)
                WHEN(flrpt.flrpt_type=&#39;T&#39;) THEN
                        formatindent(COALESCE(flrpt.flrpt_altname, &#39;Subtotal&#39;) ,
                        (CASE WHEN pIndentName THEN flrpt.flrpt_level ELSE 0 END))
                ELSE formatindent((&#39;Type &#39; || flrpt.flrpt_type || &#39; &#39; || text(flrpt.flrpt_type_id)),
                        (CASE WHEN pIndentName THEN flrpt.flrpt_level ELSE 0 END))
                END AS flstmtitem_name,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptmo.flrpt_diff,0))
                ELSE (COALESCE(flrptmo.flrpt_ending,0))
        END AS flstmtitem_month,
        (COALESCE(flrptmo.flrpt_debits,0)) AS flstmtitem_monthdb,
        (COALESCE(flrptmo.flrpt_credits,0)) AS flstmtitem_monthcr,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (flrptmo.flrpt_diffprcnt)
                ELSE (flrptmo.flrpt_endingprcnt)
        END AS flstmtitem_monthprcnt,
        (COALESCE(flrptmo.flrpt_budget,0)) AS flstmtitem_monthbudget,
        (flrptmo.flrpt_budgetprcnt) AS flstmtitem_monthbudgetprcnt,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE((flrptmo.flrpt_diff-flrptmo.flrpt_budget),0))
                ELSE (COALESCE((flrptmo.flrpt_ending-flrptmo.flrpt_budget),0))
        END AS flstmtitem_monthbudgetdiff,
        CASE
                WHEN ((flhead_type IN (&#39;I&#39;,&#39;C&#39;)) AND (flrptmo.flrpt_budget &gt; 0)) THEN
                        (COALESCE(((flrptmo.flrpt_diff-flrptmo.flrpt_budget)/flrptmo.flrpt_budget),0))
                WHEN ((flhead_type=&#39;B&#39;) AND (flrptmo.flrpt_budget &gt; 0)) THEN
                        (COALESCE(((flrptmo.flrpt_ending-flrptmo.flrpt_budget)/flrptmo.flrpt_budget),0))
                ELSE NULL
        END AS flstmtitem_monthbudgetdiffprcnt,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptqt.flrpt_diff,0))
                ELSE (COALESCE(flrptqt.flrpt_ending,0))
        END AS flstmtitem_qtr,
        (COALESCE(flrptqt.flrpt_debits,0)) AS flstmtitem_qtrdb,
        (COALESCE(flrptqt.flrpt_credits,0)) AS flstmtitem_qtrcr,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (flrptqt.flrpt_diffprcnt)
                ELSE (flrptqt.flrpt_endingprcnt)
        END AS flstmtitem_qtrprcnt,
        (COALESCE(flrptqt.flrpt_budget,0)) AS flstmtitem_qtrbudget,
        (flrptqt.flrpt_budgetprcnt) AS flstmtitem_qtrbudgetprcnt,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE((flrptqt.flrpt_diff-flrptqt.flrpt_budget),0))
                ELSE (COALESCE((flrptqt.flrpt_ending-flrptqt.flrpt_budget),0))
        END AS flstmtitem_qtrbudgetdiff,
        CASE
                WHEN ((flhead_type IN (&#39;I&#39;,&#39;C&#39;)) AND (flrptqt.flrpt_budget &gt; 0)) THEN
                        (COALESCE(((flrptqt.flrpt_diff-flrptqt.flrpt_budget)/flrptqt.flrpt_budget),0))
                WHEN ((flhead_type=&#39;B&#39;) AND (flrptqt.flrpt_budget &gt; 0)) THEN
                        (COALESCE(((flrptqt.flrpt_ending-flrptqt.flrpt_budget)/flrptqt.flrpt_budget),0))
                ELSE NULL
        END AS flstmtitem_qtrbudgetdiffprcnt,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptyr.flrpt_diff,0))
                ELSE (COALESCE(flrptyr.flrpt_ending,0))
        END AS flstmtitem_year,
        (COALESCE(flrptyr.flrpt_debits,0)) AS flstmtitem_yeardb,
        (COALESCE(flrptyr.flrpt_credits,0)) AS flstmtitem_yearcr,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (flrptyr.flrpt_diffprcnt)
                ELSE (flrptyr.flrpt_endingprcnt)
        END AS flstmtitem_yearprcnt,
        (COALESCE(flrptyr.flrpt_budget,0)) AS  flstmtitem_yearbudget,
        (flrptyr.flrpt_budgetprcnt) AS flstmtitem_yearbudgetprcnt,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE((flrptyr.flrpt_diff-flrptyr.flrpt_budget),0))
                ELSE (COALESCE((flrptyr.flrpt_ending-flrptyr.flrpt_budget),0))
        END AS flstmtitem_yearbudgetdiff,
        CASE
                WHEN ((flhead_type IN (&#39;I&#39;,&#39;C&#39;)) AND (flrptyr.flrpt_budget &gt; 0)) THEN
                        (COALESCE(((flrptyr.flrpt_diff-flrptyr.flrpt_budget)/flrptyr.flrpt_budget),0))
                WHEN ((flhead_type = &#39;B&#39;) AND (flrptyr.flrpt_budget &gt; 0)) THEN
                        (COALESCE(((flrptyr.flrpt_ending-flrptyr.flrpt_budget)/flrptyr.flrpt_budget),0))
                ELSE NULL
        END AS flstmtitem_yearbudgetdiffprcnt,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptprmo.flrpt_diff,0))
                ELSE (COALESCE(flrptprmo.flrpt_ending,0))
        END AS flstmtitem_prmonth,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (flrptprmo.flrpt_diffprcnt)
                ELSE (flrptprmo.flrpt_endingprcnt)
        END AS flstmtitem_prmonthprcnt,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptmo.flrpt_diff-flrptprmo.flrpt_diff,0))
                ELSE (COALESCE(flrptmo.flrpt_ending-flrptprmo.flrpt_ending,0))
        END AS flstmtitem_prmonthdiff,
        CASE
                WHEN ((flhead_type IN (&#39;I&#39;,&#39;C&#39;)) AND (flrptprmo.flrpt_diff &gt; 0)) THEN
                        (COALESCE((flrptmo.flrpt_diff-flrptprmo.flrpt_diff)/flrptprmo.flrpt_diff,0))
                WHEN ((flhead_type = &#39;B&#39;) AND (flrptprmo.flrpt_ending &gt; 0)) THEN
                        (COALESCE((flrptmo.flrpt_ending-flrptprmo.flrpt_ending)/flrptprmo.flrpt_ending,0))
                ELSE NULL
        END AS flstmtitem_prmonthdiffprcnt,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptprqt.flrpt_diff,0))
                ELSE (COALESCE(flrptprqt.flrpt_ending,0))
        END AS flstmtitem_prqtr,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (flrptprqt.flrpt_diffprcnt)
                ELSE (flrptprqt.flrpt_endingprcnt)
        END AS flstmtitem_prqtrprcnt,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptqt.flrpt_diff-flrptprqt.flrpt_diff,0))
                ELSE (COALESCE(flrptqt.flrpt_ending-flrptprqt.flrpt_ending,0))
        END AS flstmtitem_prqtrdiff,
        CASE
                WHEN ((flhead_type IN (&#39;I&#39;,&#39;C&#39;)) AND (flrptprqt.flrpt_diff &gt; 0)) THEN
                        (COALESCE((flrptqt.flrpt_diff-flrptprqt.flrpt_diff)/flrptprqt.flrpt_diff,0))
                WHEN ((flhead_type = &#39;B&#39;) AND (flrptprqt.flrpt_ending &gt; 0)) THEN
                        (COALESCE((flrptqt.flrpt_ending-flrptprqt.flrpt_ending)/flrptprqt.flrpt_ending,0))
                ELSE NULL
        END AS flstmtitem_prqtrdiffprcnt,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptpryr.flrpt_diff,0))
                ELSE (COALESCE(flrptpryr.flrpt_ending,0))
        END AS flstmtitem_pryear,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (flrptpryr.flrpt_diffprcnt)
                ELSE (flrptpryr.flrpt_endingprcnt)
        END AS flstmtitem_pryearprcnt,
        CASE
                WHEN (flhead_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        (COALESCE(flrptyr.flrpt_diff-flrptpryr.flrpt_diff,0))
                ELSE (COALESCE(flrptyr.flrpt_ending-flrptpryr.flrpt_ending,0))
        END AS flstmtitem_pryeardiff,
        CASE
                WHEN ((flhead_type IN (&#39;I&#39;,&#39;C&#39;)) AND (flrptpryr.flrpt_diff &gt; 0)) THEN
                        (COALESCE((flrptyr.flrpt_diff-flrptpryr.flrpt_diff)/flrptpryr.flrpt_diff,0))
                WHEN ((flhead_type = &#39;B&#39; ) AND (flrptpryr.flrpt_ending &gt; 0)) THEN
                        (COALESCE((flrptyr.flrpt_ending-flrptpryr.flrpt_ending)/flrptpryr.flrpt_ending,0))
                ELSE NULL
        END AS flstmtitem_pryeardiffprcnt
        FROM flhead CROSS JOIN (SELECT DISTINCT
                        flrpt_flhead_id,
                        flrpt_period_id,
                        flrpt_username,
                        flrpt_order,
                        flrpt_level,
                        flrpt_type,
                        flrpt_type_id,
                        flrpt_parent_id,
                        flrpt_altname
                FROM flrpt
                WHERE ((NOT (flrpt_type IN (&#39;G&#39;,&#39;I&#39;,&#39;S&#39;)))
                AND (flrpt_flhead_id=_p.flhead_id)
                AND (flrpt_period_id=pPeriodId)
                AND (flrpt_username=CURRENT_USER))) AS flrpt
                        LEFT OUTER JOIN flrpt flrptmo
                                ON ((flrptmo.flrpt_type=flrpt.flrpt_type)
                                AND (flrptmo.flrpt_order=flrpt.flrpt_order)
                                AND (flrptmo.flrpt_flhead_id=flrpt.flrpt_flhead_id)
                                AND (flrptmo.flrpt_period_id=flrpt.flrpt_period_id)
                                AND (flrptmo.flrpt_interval=&#39;M&#39;)
                                AND (flrptmo.flrpt_username=flrpt.flrpt_username))
                        LEFT OUTER JOIN flrpt flrptqt
                                ON ((flrptqt.flrpt_type=flrpt.flrpt_type)
                                AND (flrptqt.flrpt_order=flrpt.flrpt_order)
                                AND (flrptqt.flrpt_flhead_id=flrpt.flrpt_flhead_id)
                                AND (flrptqt.flrpt_period_id=flrpt.flrpt_period_id)
                                AND (flrptqt.flrpt_interval=_qtrInterval)
                                AND (flrptqt.flrpt_username=flrpt.flrpt_username))
                        LEFT OUTER JOIN flrpt flrptyr
                                ON ((flrptyr.flrpt_type=flrpt.flrpt_type)
                                AND (flrptyr.flrpt_order=flrpt.flrpt_order)
                                AND (flrptyr.flrpt_flhead_id=flrpt.flrpt_flhead_id)
                                AND (flrptyr.flrpt_period_id=flrpt.flrpt_period_id)
                                AND (flrptyr.flrpt_interval=_yrInterval)
                                AND (flrptyr.flrpt_username=flrpt.flrpt_username))
                        LEFT OUTER JOIN flrpt flrptprmo
                                ON ((flrptprmo.flrpt_type=flrpt.flrpt_type)
                                AND (flrptprmo.flrpt_order=flrpt.flrpt_order)
                                AND (flrptprmo.flrpt_flhead_id=flrpt.flrpt_flhead_id)
                                AND (flrptprmo.flrpt_period_id=_priorMoPeriodId)
                                AND (flrptprmo.flrpt_interval=&#39;M&#39;)
                                AND (flrptprmo.flrpt_username=flrpt.flrpt_username))
                        LEFT OUTER JOIN flrpt flrptprqt
                                ON ((flrptprqt.flrpt_type=flrpt.flrpt_type)
                                AND (flrptprqt.flrpt_order=flrpt.flrpt_order)
                                AND (flrptprqt.flrpt_flhead_id=flrpt.flrpt_flhead_id)
                                AND (flrptprqt.flrpt_period_id=_priorQtPeriodId)
                                AND (flrptprqt.flrpt_interval=&#39;Q&#39;)
                                AND (flrptprqt.flrpt_username=flrpt.flrpt_username))
                        LEFT OUTER JOIN flrpt flrptpryr
                                ON ((flrptpryr.flrpt_type=flrpt.flrpt_type)
                                AND (flrptpryr.flrpt_order=flrpt.flrpt_order)
                                AND (flrptpryr.flrpt_flhead_id=flrpt.flrpt_flhead_id)
                                AND (flrptpryr.flrpt_period_id=_priorYrPeriodId)
                                AND (flrptpryr.flrpt_interval=&#39;Y&#39;)
                                AND (flrptpryr.flrpt_username=flrpt.flrpt_username))
        WHERE (flhead_id=flrpt.flrpt_flhead_id)
        ORDER BY flstmtitem_order
        LOOP
                IF _prevlevel &gt; _x.flstmtitem_level THEN
                        _subgrp := _subgrp+1;
                END IF;
                _prevlevel:=_x.flstmtitem_level;
                _row.flstmtitem_subgrp := _subgrp;

                IF NOT _first THEN
                        RETURN NEXT _row;
                END IF;

                _first := FALSE;

                _row.flstmtitem_flhead_id := _x.flstmtitem_flhead_id;
                _row.flstmtitem_period_id := _x.flstmtitem_period_id;
                _row.flstmtitem_username := _x.flstmtitem_username;
                _row.flstmtitem_order := _x.flstmtitem_order;
                _row.flstmtitem_level := _x.flstmtitem_level;
                _row.flstmtitem_type := _x.flstmtitem_type;
                _row.flstmtitem_type_id := _x.flstmtitem_type_id;
                _row.flstmtitem_parent_id := _x.flstmtitem_parent_id;
                _row.flstmtitem_accnt_id := _x.flstmtitem_accnt_id;
                _row.flstmtitem_name := _x.flstmtitem_name;
                _row.flstmtitem_month := _x.flstmtitem_month;
                _row.flstmtitem_monthdb := _x.flstmtitem_monthdb;
                _row.flstmtitem_monthcr := _x.flstmtitem_monthcr;
                _row.flstmtitem_monthprcnt := _x.flstmtitem_monthprcnt;
                _row.flstmtitem_monthbudget := _x.flstmtitem_monthbudget;
                _row.flstmtitem_monthbudgetprcnt := _x.flstmtitem_monthbudgetprcnt;
                _row.flstmtitem_monthbudgetdiff := _x.flstmtitem_monthbudgetdiff;
                _row.flstmtitem_monthbudgetdiffprcnt := _x.flstmtitem_monthbudgetdiffprcnt;
                _row.flstmtitem_qtr := _x.flstmtitem_qtr;
                _row.flstmtitem_qtrdb := _x.flstmtitem_qtrdb;
                _row.flstmtitem_qtrcr := _x.flstmtitem_qtrcr;
                _row.flstmtitem_qtrprcnt := _x.flstmtitem_qtrprcnt;
                _row.flstmtitem_qtrbudget := _x.flstmtitem_qtrbudget;
                _row.flstmtitem_qtrbudgetprcnt := _x.flstmtitem_qtrbudgetprcnt;
                _row.flstmtitem_qtrbudgetdiff := _x.flstmtitem_qtrbudgetdiff;
                _row.flstmtitem_qtrbudgetdiffprcnt := _x.flstmtitem_qtrbudgetdiffprcnt;
                _row.flstmtitem_year := _x.flstmtitem_year;
                _row.flstmtitem_yeardb := _x.flstmtitem_yeardb;
                _row.flstmtitem_yearcr := _x.flstmtitem_yearcr;
                _row.flstmtitem_yearprcnt := _x.flstmtitem_yearprcnt;
                _row.flstmtitem_yearbudget := _x.flstmtitem_yearbudget;
                _row.flstmtitem_yearbudgetprcnt := _x.flstmtitem_yearbudgetprcnt;
                _row.flstmtitem_yearbudgetdiff := _x.flstmtitem_yearbudgetdiff;
                _row.flstmtitem_yearbudgetdiffprcnt := _x.flstmtitem_yearbudgetdiffprcnt;
                _row.flstmtitem_prmonth := _x.flstmtitem_prmonth;
                _row.flstmtitem_prmonthprcnt := _x.flstmtitem_prmonthprcnt;
                _row.flstmtitem_prmonthdiff := _x.flstmtitem_prmonthdiff;
                _row.flstmtitem_prmonthdiffprcnt := _x.flstmtitem_prmonthdiffprcnt;
                _row.flstmtitem_prqtr := _x.flstmtitem_prqtr;
                _row.flstmtitem_prqtrprcnt := _x.flstmtitem_prqtrprcnt;
                _row.flstmtitem_prqtrdiff := _x.flstmtitem_prqtrdiff;
                _row.flstmtitem_prqtrdiffprcnt := _x.flstmtitem_prqtrdiffprcnt;
                _row.flstmtitem_pryear := _x.flstmtitem_pryear;
                _row.flstmtitem_pryearprcnt := _x.flstmtitem_pryearprcnt;
                _row.flstmtitem_pryeardiff := _x.flstmtitem_pryeardiff;
                _row.flstmtitem_pryeardiffprcnt := _x.flstmtitem_pryeardiffprcnt;

        END LOOP;

        _row.flstmtitem_subgrp := _subgrp + 1;
        RETURN NEXT _row;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.financialreport-integer-integer-bpchar">financialreport( integer, integer, bpchar )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pFlheadid ALIAS FOR $1;
  pPeriodid ALIAS FOR $2;
  pInterval ALIAS FOR $3;

  _r RECORD;
  _t RECORD;
  _s RECORD;

BEGIN

-- Validate Interval
   IF pInterval &lt;&gt; &#39;M&#39; AND pInterval &lt;&gt; &#39;Q&#39; AND pInterval &lt;&gt; &#39;Y&#39; THEN
     RAISE EXCEPTION &#39;Invalid Interval --&gt; %&#39;, pInterval;
   END IF;

-- Get rid of any old reporting done by this user for the specified criteria
  DELETE FROM flrpt
   WHERE ((flrpt_flhead_id=pFlheadid)
     AND  (flrpt_period_id=pPeriodId)
     AND  (flrpt_interval=pInterval)
     AND  (flrpt_username=CURRENT_USER));

-- Find out if we need to show a Grand Total and which if any of the values
-- we want to show in that grand total.
  SELECT flhead_showtotal,
         CASE WHEN(flhead_showstart) THEN 0.00
              ELSE NULL
         END AS beginning,
         CASE WHEN(flhead_showend) THEN 0.00
              ELSE NULL
         END AS ending,
         CASE WHEN(flhead_showdelta) THEN 0.00
              ELSE NULL
         END AS debits,
         CASE WHEN(flhead_showdelta) THEN 0.00
              ELSE NULL
         END AS credits,
         CASE WHEN(flhead_showbudget) THEN 0.00
              ELSE NULL
         END AS budget,
         CASE WHEN(flhead_showdiff) THEN 0.00
              ELSE NULL
         END AS diff,
         CASE WHEN(flhead_showcustom) THEN 0.00
              ELSE NULL
         END AS custom,
         CASE WHEN(flhead_usealttotal) THEN flhead_alttotal
              ELSE NULL
         END AS altname INTO _r
    FROM flhead
   WHERE (flhead_id=pFlheadid);
  IF (NOT FOUND) THEN
    return FALSE;
  END IF;

-- If showing a Grand Total then create a record as a Group which acts
-- as a parent to the whole report. This allows the code to update as
-- it would for normal group total values.
  IF (_r.flhead_showtotal) THEN
    INSERT INTO flrpt
           (flrpt_flhead_id, flrpt_period_id, flrpt_username,
            flrpt_order, flrpt_level, flrpt_type, flrpt_type_id,
            flrpt_beginning, flrpt_ending,
            flrpt_debits, flrpt_credits, flrpt_budget, flrpt_diff,
            flrpt_custom, flrpt_altname, flrpt_interval )
    VALUES (pFlheadid, pPeriodid, CURRENT_USER,
            0, -1, &#39;G&#39;, -1,
            _r.beginning, _r.ending,
            _r.debits, _r.credits, _r.budget, _r.diff,
            _r.custom, _r.altname, pInterval );
  END IF;

  PERFORM insertFlGroup(pFlheadid, pPeriodid, -1, 0, FALSE, pInterval);

-- go through the list of records that need percentages calculated and perform
-- those calculations.
  FOR _t IN SELECT flrpt_order, CASE WHEN(flgrp_prcnt_flgrp_id = -1) THEN flgrp_flgrp_id ELSE flgrp_prcnt_flgrp_id END AS flgrp_id
              FROM flrpt, flgrp
             WHERE ((flrpt_flhead_id=pFlheadid)
               AND  (flrpt_period_id=pPeriodid)
               AND  (flrpt_interval=pInterval)
               AND  (flrpt_username=CURRENT_USER)
               AND  (flrpt_type=&#39;G&#39;)
               AND  (flrpt_type_id=flgrp_id))
             UNION
            SELECT flrpt_order, CASE WHEN(flitem_prcnt_flgrp_id = -1) THEN flitem_flgrp_id ELSE flitem_prcnt_flgrp_id END AS flgrp_id
              FROM flrpt, flitem
             WHERE ((flrpt_flhead_id=pFlheadid)
               AND  (flrpt_period_id=pPeriodid)
               AND  (flrpt_interval=pInterval)
               AND  (flrpt_username=CURRENT_USER)
               AND  (flrpt_type=&#39;I&#39;)
               AND  (flrpt_type_id=flitem_id))
             UNION
            SELECT flrpt_order, CASE WHEN(flspec_prcnt_flgrp_id = -1) THEN flspec_flgrp_id ELSE flspec_prcnt_flgrp_id END AS flgrp_id
              FROM flrpt, flspec
             WHERE ((flrpt_flhead_id=pFlheadid)
               AND  (flrpt_period_id=pPeriodid)
               AND  (flrpt_interval=pInterval)
               AND  (flrpt_username=CURRENT_USER)
               AND  (flrpt_type=&#39;S&#39;)
               AND  (flrpt_type_id=flspec_id)) LOOP

    IF( (_t.flgrp_id=-1) OR (NOT (SELECT flgrp_summarize FROM flgrp WHERE flgrp_id=_t.flgrp_id)) ) THEN
      SELECT COALESCE(SUM(flrpt_beginning),0) AS beginningTotal,
             COALESCE(SUM(flrpt_ending),0) AS endingTotal,
             COALESCE(SUM(flrpt_debits),0) AS debitsTotal,
             COALESCE(SUM(flrpt_credits),0) AS creditsTotal,
             COALESCE(SUM(flrpt_budget),0) AS budgetTotal,
             COALESCE(SUM(flrpt_diff), 0) AS diffTotal,
             COALESCE(SUM(flrpt_custom), 0) AS customTotal INTO _s
        FROM flrpt
       WHERE ((flrpt_flhead_id=pFlheadid)
         AND  (flrpt_period_id=pPeriodid)
         AND  (flrpt_interval=pInterval)
         AND  (flrpt_username=CURRENT_USER)
         AND  (flrpt_type != &#39;T&#39;)
         AND  (flrpt_parent_id=_t.flgrp_id));
    ELSE
      SELECT COALESCE(SUM(flrpt_beginning),0) AS beginningTotal,
             COALESCE(SUM(flrpt_ending),0) AS endingTotal,
             COALESCE(SUM(flrpt_debits),0) AS debitsTotal,
             COALESCE(SUM(flrpt_credits),0) AS creditsTotal,
             COALESCE(SUM(flrpt_budget),0) AS budgetTotal,
             COALESCE(SUM(flrpt_diff), 0) AS diffTotal,
             COALESCE(SUM(flrpt_custom), 0) AS customTotal INTO _s
        FROM flrpt
       WHERE ((flrpt_flhead_id=pFlheadid)
         AND  (flrpt_period_id=pPeriodid)
         AND  (flrpt_interval=pInterval)
         AND  (flrpt_username=CURRENT_USER)
         AND  (flrpt_type = &#39;G&#39;)
         AND  (flrpt_type_id=_t.flgrp_id));
    END IF;

    UPDATE flrpt SET flrpt_beginningprcnt = flrpt_beginningprcnt + flrpt_beginning / CASE WHEN (_s.beginningTotal=0) THEN 1 ELSE _s.beginningTotal END,
                     flrpt_endingprcnt = flrpt_endingprcnt + flrpt_ending / CASE WHEN (_s.endingTotal=0) THEN 1 ELSE _s.endingTotal END,
                     flrpt_debitsprcnt = flrpt_debitsprcnt + flrpt_debits / CASE WHEN (_s.debitsTotal=0) THEN 1 ELSE _s.debitsTotal END,
                     flrpt_creditsprcnt = flrpt_creditsprcnt + flrpt_credits / CASE WHEN (_s.creditsTotal=0) THEN 1 ELSE _s.creditsTotal END,
                     flrpt_budgetprcnt = flrpt_budgetprcnt + flrpt_budget / CASE WHEN (_s.budgetTotal=0) THEN 1 ELSE _s.budgetTotal END,
                     flrpt_diffprcnt = flrpt_diffprcnt + flrpt_diff / CASE WHEN (_s.diffTotal=0) THEN 1 ELSE _s.diffTotal END,
                     flrpt_customprcnt = flrpt_customprcnt + flrpt_custom / CASE WHEN (_s.customTotal=0) THEN 1 ELSE _s.customTotal END
     WHERE ((flrpt_flhead_id=pFlheadid)
       AND  (flrpt_period_id=pPeriodid)
       AND  (flrpt_interval=pInterval)
       AND  (flrpt_username=CURRENT_USER)
       AND  (flrpt_order=_t.flrpt_order));
  END LOOP;


-- Update any subtotal records to reflect the percentage values of the parents
-- since those are calculated after the subtotal records were created.
  FOR _t IN SELECT a.flrpt_order AS flrpt_order,
                   b.flrpt_beginningprcnt AS flrpt_beginningprcnt,
                   b.flrpt_endingprcnt AS flrpt_endingprcnt,
                   b.flrpt_debitsprcnt AS flrpt_debitsprcnt,
                   b.flrpt_creditsprcnt AS flrpt_creditsprcnt,
                   b.flrpt_budgetprcnt AS flrpt_budgetprcnt,
                   b.flrpt_diffprcnt AS flrpt_diffprcnt,
                   b.flrpt_customprcnt AS flrpt_customprcnt
              FROM flrpt AS a, flrpt AS b
             WHERE ((a.flrpt_flhead_id=pFlheadid)
               AND  (a.flrpt_period_id=pPeriodid)
               AND  (a.flrpt_interval=pInterval)
               AND  (a.flrpt_username=CURRENT_USER)
               AND  (a.flrpt_type=&#39;T&#39;)
               AND  (b.flrpt_flhead_id=a.flrpt_flhead_id)
               AND  (b.flrpt_period_id=a.flrpt_period_id)
               AND  (b.flrpt_interval=pInterval)
               AND  (b.flrpt_username=a.flrpt_username)
               AND  (b.flrpt_type=&#39;G&#39;)
               AND  (b.flrpt_type_id=a.flrpt_parent_id)) LOOP
    UPDATE flrpt SET flrpt_beginningprcnt=flrpt_beginningprcnt + _t.flrpt_beginningprcnt,
                     flrpt_endingprcnt=flrpt_endingprcnt + _t.flrpt_endingprcnt,
                     flrpt_debitsprcnt=flrpt_debitsprcnt + _t.flrpt_debitsprcnt,
                     flrpt_creditsprcnt=flrpt_creditsprcnt + _t.flrpt_creditsprcnt,
                     flrpt_budgetprcnt=flrpt_budgetprcnt + _t.flrpt_budgetprcnt,
                     flrpt_diffprcnt=flrpt_diffprcnt + _t.flrpt_diffprcnt,
                     flrpt_customprcnt=flrpt_customprcnt + _t.flrpt_customprcnt
               WHERE ((flrpt_flhead_id=pFlheadid)
                 AND  (flrpt_period_id=pPeriodid)
                 AND  (flrpt_interval=pInterval)
                 AND  (flrpt_username=CURRENT_USER)
                 AND  (flrpt_order=_t.flrpt_order));
  END LOOP;

-- If showing a Grand total then move the record we created early to the
-- end of the report and marked as a Total record.
  IF (_r.flhead_showtotal) THEN
    UPDATE flrpt
       SET flrpt_order = COALESCE((SELECT MAX(flrpt_order)
                                     FROM flrpt
                                    WHERE ((flrpt_flhead_id=pFlheadid)
                                      AND  (flrpt_period_id=pPeriodid)
                                      AND  (flrpt_interval=pInterval)
                                      AND  (flrpt_username=CURRENT_USER))
                                  ), 0) + 1,
           flrpt_level = 0,
           flrpt_type = &#39;T&#39;
     WHERE ((flrpt_flhead_id=pFlheadid)
       AND  (flrpt_period_id=pPeriodid)
       AND  (flrpt_interval=pInterval)
       AND  (flrpt_username=CURRENT_USER)
       AND  (flrpt_order=0)
       AND  (flrpt_level = -1)
       AND  (flrpt_type = &#39;G&#39;)
       AND  (flrpt_type_id=-1));
  END IF;

  return TRUE;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.financialreport-integer-integerARRAY-bpchar-boolean">financialreport( integer, integer[], bpchar, boolean )</a>
		</h2>
<h3>Returns: SET OF fltrenditem</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pFlheadId ALIAS FOR $1;
  pPeriodIds ALIAS FOR $2;
  pInterval ALIAS FOR $3;
  pShowNumbers ALIAS FOR $4;
  _row fltrenditem%ROWTYPE;
  _type CHAR;
  _p RECORD;
  _count INTEGER;
  _n NUMERIC;
  _fld NUMERIC[];
  _grndttl NUMERIC;
  _i INTEGER;
  _first BOOLEAN;
  _prevlevel INTEGER;
  _subgrp INTEGER;

BEGIN
        _first := true;
        _subgrp := 0;

        IF ARRAY_UPPER(pPeriodIds,1) &lt;= 12 THEN
                _count := ARRAY_UPPER(pPeriodIds,1);
        ELSE
                _count := 12;
        END IF;

        --Get Type
        SELECT flhead_type FROM flhead INTO _type WHERE flhead_id=pFlheadId;

        --Build Financial Data
        FOR _i IN 1.._count
        LOOP
                PERFORM financialreport(pFlheadId,pPeriodIds[_i],pInterval);
        END LOOP;

        --Get Row Data
        FOR _p IN
        SELECT flrpt_flhead_id,
                flrpt_username,
                flrpt_order,
                flrpt_level,
                flrpt_type,
                flrpt_type_id,
                flrpt_parent_id,
                flrpt_accnt_id,
                formatindent(flgrp.flgrp_name,flrpt.flrpt_level) AS flrpt_name,
                CASE
                        WHEN (flgrp_summarize AND (_type IN (&#39;I&#39;,&#39;C&#39;))) THEN
                                (COALESCE(flrpt_diff,0))
                        WHEN (flgrp_summarize AND (_type = &#39;B&#39;)) THEN
                                (COALESCE(flrpt_ending,0))
                        ELSE NULL
                END AS f_fld1,
                flgrp_summarize AS display
        FROM flrpt,flgrp
        WHERE ((flrpt_flhead_id=pFlheadId)
        AND (flgrp_id=flrpt_type_id)
        AND (flrpt_type=&#39;G&#39;)
        AND (flrpt_period_id=pPeriodIds[1])
        AND (flrpt_interval=pInterval)
        AND (flrpt_username=CURRENT_USER))
        UNION
        SELECT flrpt_flhead_id,
                flrpt_username,
                flrpt_order,
                flrpt_level,
                flrpt_type,
                flrpt_type_id,
                flrpt_parent_id,
                flrpt_accnt_id,
                formatindent(accnt_descrip,flrpt.flrpt_level) AS flrpt_name,
                CASE
                        WHEN (_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                                (COALESCE(flrpt_diff,0))
                        WHEN (_type = &#39;B&#39;) THEN
                                (COALESCE(flrpt_ending,0))
                        ELSE NULL
                END AS f_fld1,
                true AS display
        FROM flrpt,flitem,accnt
        WHERE ((flrpt_flhead_id=pFlheadId)
        AND (flrpt_accnt_id=accnt_id)
        AND (flitem_id=flrpt_type_id)
        AND (flrpt_type=&#39;I&#39;)
        AND (flrpt_period_id=pPeriodIds[1])
        AND (flrpt_interval=pInterval)
        AND (flrpt_username=CURRENT_USER))
        UNION
        SELECT flrpt_flhead_id,
                flrpt_username,
                flrpt_order,
                flrpt_level,
                flrpt_type,
                flrpt_type_id,
                flrpt_parent_id,
                flrpt_accnt_id,
                CASE
                        WHEN (flrpt.flrpt_type=&#39;T&#39; AND flrpt.flrpt_level=0) THEN
                                COALESCE(flrpt.flrpt_altname, &#39;Total&#39;)
                        WHEN (flrpt.flrpt_type=&#39;T&#39;) THEN
                                formatindent(COALESCE(flrpt.flrpt_altname, &#39;Subtotal&#39;) ,flrpt.flrpt_level) 

                        ELSE
                                formatindent((&#39;Type &#39; || flrpt.flrpt_type || &#39; &#39; || text(flrpt.flrpt_type_id)), flrpt.flrpt_level)
                END AS flstmtitem_name,
                CASE
                        WHEN (_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                                (COALESCE(flrpt_diff,0))
                        WHEN (_type = &#39;B&#39;) THEN
                                (COALESCE(flrpt_ending,0))
                        ELSE NULL
                END AS f_fld1,
                true AS display
        FROM flrpt
        WHERE ((flrpt_flhead_id=pFlheadId)
        AND (flrpt_type NOT IN (&#39;I&#39;,&#39;S&#39;,&#39;G&#39;))
        AND (flrpt_period_id=pPeriodIds[1])
        AND (flrpt_interval=pInterval)
        AND (flrpt_username=CURRENT_USER))
        ORDER BY flrpt_order
        LOOP

                IF _type IN (&#39;I&#39;,&#39;C&#39;) THEN
                        _grndttl := _p.f_fld1;
                END IF;

                --Loop through and calculate period column values
                IF (_p.display) THEN
                        FOR _i IN 2.._count
                        LOOP
                                SELECT
                                CASE
                                        WHEN (_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                                                COALESCE(flrpt_diff,0)
                                        WHEN (_type = &#39;B&#39;) THEN
                                                COALESCE(flrpt_ending,0)
                                        ELSE NULL
                                END INTO _n
                                FROM flrpt
                                WHERE ((flrpt_flhead_id=pFlheadId)
                                AND (flrpt_period_id=pPeriodIds[_i])
                                AND (flrpt_interval=pInterval)
                                AND (flrpt_username=CURRENT_USER)
                                AND (flrpt_order=_p.flrpt_order));
                                _fld[_i-1] := _n;
                                IF _type IN (&#39;I&#39;,&#39;C&#39;) THEN
                                        _grndttl := _grndttl+_n;
                                END IF;
                        END LOOP;
                END IF;

                --Send it all back to the caller
                IF _prevlevel &gt; _p.flrpt_level THEN
                        _subgrp := _subgrp+1;
                END IF;
                _prevlevel:=_p.flrpt_level;
                _row.fltrenditem_subgrp := _subgrp;

                IF NOT _first THEN
                        RETURN NEXT _row;
                END IF;

                _first := FALSE;

                _row.fltrenditem_flhead_id := _p.flrpt_flhead_id;
                _row.fltrenditem_username := _p.flrpt_username;
                _row.fltrenditem_order := _p.flrpt_order;
                _row.fltrenditem_level := _p.flrpt_level;
                _row.fltrenditem_type := _p.flrpt_type;
                _row.fltrenditem_type_id := _p.flrpt_type_id;
                _row.fltrenditem_parent_id := _p.flrpt_parent_id;
                _row.fltrenditem_accnt_id := _p.flrpt_accnt_id;
                _row.fltrenditem_name := _p.flrpt_name;
                IF (_p.display) THEN
                        _row.fltrenditem_fld1 := (_p.f_fld1);
                        _row.fltrenditem_fld2 := (_fld[1]);
                        _row.fltrenditem_fld3 := (_fld[2]);
                        _row.fltrenditem_fld4 := (_fld[3]);
                        _row.fltrenditem_fld5 := (_fld[4]);
                        _row.fltrenditem_fld6 := (_fld[5]);
                        _row.fltrenditem_fld7 := (_fld[6]);
                        _row.fltrenditem_fld8 := (_fld[7]);
                        _row.fltrenditem_fld9 := (_fld[8]);
                        _row.fltrenditem_fld10 := (_fld[9]);
                        _row.fltrenditem_fld11 := (_fld[10]);
                        _row.fltrenditem_fld12 := (_fld[11]);
                        _row.fltrenditem_grndttl := (_grndttl);
                ELSE
                        _row.fltrenditem_fld1 := NULL;
                        _row.fltrenditem_fld2 := NULL;
                        _row.fltrenditem_fld3 := NULL;
                        _row.fltrenditem_fld4 := NULL;
                        _row.fltrenditem_fld5 := NULL;
                        _row.fltrenditem_fld6 := NULL;
                        _row.fltrenditem_fld7 := NULL;
                        _row.fltrenditem_fld8 := NULL;
                        _row.fltrenditem_fld9 := NULL;
                        _row.fltrenditem_fld10 := NULL;
                        _row.fltrenditem_fld11 := NULL;
                        _row.fltrenditem_fld12 := NULL;
                        _row.fltrenditem_grndttl := NULL;
                END IF;

        END LOOP;

        _row.fltrenditem_subgrp := _subgrp + 1;
        RETURN NEXT _row;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.findapaccount-integer">findapaccount( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendid ALIAS FOR $1;
  _accntid INTEGER;

BEGIN

--  Check for a Vendor Type specific Account
  SELECT apaccnt_ap_accnt_id INTO _accntid
  FROM apaccnt, vend
  WHERE ( (apaccnt_vendtype_id=vend_vendtype_id)
   AND (vend_id=pVendid) );
  IF (FOUND) THEN
    RETURN _accntid;
  END IF;

--  Check for a Vendor Type pattern
  SELECT apaccnt_ap_accnt_id INTO _accntid
  FROM apaccnt, vend, vendtype
  WHERE ( (vendtype_code ~ apaccnt_vendtype)
   AND (vend_vendtype_id=vendtype_id)
   AND (apaccnt_vendtype_id=-1)
   AND (vend_id=pVendid) );
  IF (FOUND) THEN
    RETURN _accntid;
  END IF;

  RETURN -1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.findapdiscountaccount-integer">findapdiscountaccount( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendid ALIAS FOR $1;
  _accntid INTEGER;

BEGIN

--  Check for a Vendor Type specific Account
  SELECT apaccnt_discount_accnt_id INTO _accntid
  FROM apaccnt, vend
  WHERE ( (apaccnt_vendtype_id=vend_vendtype_id)
   AND (vend_id=pVendid) );
  IF (FOUND) THEN
    RETURN _accntid;
  END IF;

--  Check for a Vendor Type pattern
  SELECT apaccnt_discount_accnt_id INTO _accntid
  FROM apaccnt, vend, vendtype
  WHERE ( (vendtype_code ~ apaccnt_vendtype)
   AND (vend_vendtype_id=vendtype_id)
   AND (apaccnt_vendtype_id=-1)
   AND (vend_id=pVendid) );
  IF (FOUND) THEN
    RETURN _accntid;
  END IF;

  RETURN -1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.findapprepaidaccount-integer">findapprepaidaccount( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendid ALIAS FOR $1;
  _accntid INTEGER;

BEGIN

--  Check for a Vendor Type specific Account
  SELECT apaccnt_prepaid_accnt_id INTO _accntid
  FROM apaccnt, vend
  WHERE ( (apaccnt_vendtype_id=vend_vendtype_id)
   AND (vend_id=pVendid) );
  IF (FOUND) THEN
    RETURN _accntid;
  END IF;

--  Check for a Vendor Type pattern
  SELECT apaccnt_prepaid_accnt_id INTO _accntid
  FROM apaccnt, vend, vendtype
  WHERE ( (vendtype_code ~ apaccnt_vendtype)
   AND (vend_vendtype_id=vendtype_id)
   AND (apaccnt_vendtype_id=-1)
   AND (vend_id=pVendid) );
  IF (FOUND) THEN
    RETURN _accntid;
  END IF;

  RETURN -1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.findaraccount-integer">findaraccount( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  _accntid INTEGER;

BEGIN

--  Check for a Customer Type specific Account
  SELECT araccnt_ar_accnt_id INTO _accntid
  FROM araccnt, cust
  WHERE ( (araccnt_custtype_id=cust_custtype_id)
   AND (cust_id=pCustid) );
  IF (FOUND) THEN
    RETURN _accntid;
  END IF;

--  Check for a Customer Type pattern
  SELECT araccnt_ar_accnt_id INTO _accntid
  FROM araccnt, cust, custtype
  WHERE ( (custtype_code ~ araccnt_custtype)
   AND (araccnt_custtype_id=-1)
   AND (cust_custtype_id=custtype_id)
   AND (cust_id=pCustid) );
  IF (FOUND) THEN
    RETURN _accntid;
  END IF;

  RETURN -1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.findcalendarorigin-integer">findcalendarorigin( integer )</a>
		</h2>
<h3>Returns: date</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCalheadid ALIAS FOR $1;
  _originType CHAR(1);
  _origin DATE;

BEGIN

  SELECT calhead_origin INTO _originType
  FROM calhead
  WHERE (calhead_id=pCalheadid);

  IF (NOT FOUND) THEN
    _origin := NULL;

  ELSIF (_originType = &#39;D&#39;) THEN
    _origin := CURRENT_DATE;

  ELSIF (_originType = &#39;E&#39;) THEN
    _origin := (CURRENT_DATE + 1);

  ELSIF (_originType = &#39;W&#39;) THEN
    _origin := (CURRENT_DATE - EXTRACT(DOW FROM CURRENT_DATE)::INTEGER);

  ELSIF (_originType = &#39;X&#39;) THEN
    _origin := ((CURRENT_DATE - EXTRACT(DOW FROM CURRENT_DATE)::INTEGER) + INTERVAL &#39;1 week&#39;);

  ELSIF (_originType = &#39;M&#39;) THEN
    _origin := date_trunc(&#39;month&#39;, CURRENT_DATE);

  ELSIF (_originType = &#39;N&#39;) THEN
    _origin := (date_trunc(&#39;month&#39;, CURRENT_DATE) + INTERVAL &#39;1 month&#39;);

  ELSIF (_originType = &#39;L&#39;) THEN
    _origin := (date_trunc(&#39;year&#39;, CURRENT_DATE) - INTERVAL &#39;1 year&#39;);

  ELSIF (_originType = &#39;Y&#39;) THEN
    _origin := date_trunc(&#39;year&#39;, CURRENT_DATE);

  ELSIF (_originType = &#39;Z&#39;) THEN
    _origin := (date_trunc(&#39;year&#39;, CURRENT_DATE) + INTERVAL &#39;1 year&#39;);

  ELSE
    _origin := NULL;
  END IF;

  RETURN _origin;

  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.findcustomerform-integer-bpchar">findcustomerform( integer, bpchar )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pFormtype ALIAS FOR $2;
  _f RECORD;
  _found BOOLEAN;

BEGIN

--  Check for a Customer Type specific Form
  SELECT custform.* INTO _f
  FROM custform, cust
  WHERE ( (custform_custtype_id=cust_custtype_id)
   AND (cust_id=pCustid) );

  IF (FOUND) THEN
    _found := TRUE;
  ELSE
--  Check for a Customer Type pattern
    SELECT custform.* INTO _f
    FROM custform, cust, custtype
    WHERE ( (custform_custtype_id=-1)
     AND (custtype_code ~ custform_custtype)
     AND (cust_custtype_id=custtype_id)
     AND (cust_id=pCustid) );

    IF (FOUND) THEN
      _found := TRUE;
    ELSE
      _found := FALSE;
    END IF;
  END IF;

  IF (_found) THEN
    IF ( (pFormType = &#39;I&#39;) AND (_f.custform_invoice_report_id &lt;&gt; -1) ) THEN
      RETURN ( SELECT report_name
               FROM report
               WHERE (report_id=_f.custform_invoice_report_id) );

    ELSIF ( (pFormType = &#39;C&#39;) AND (_f.custform_creditmemo_report_id &lt;&gt; -1) ) THEN
      RETURN ( SELECT report_name
               FROM report
               WHERE (report_id=_f.custform_creditmemo_report_id) );

    ELSIF ( (pFormType = &#39;S&#39;) AND (_f.custform_statement_report_id &lt;&gt; -1) ) THEN
      RETURN ( SELECT report_name
               FROM report
               WHERE (report_id=_f.custform_statement_report_id) );

    ELSIF ( (pFormType = &#39;Q&#39;) AND (_f.custform_quote_report_id &lt;&gt; -1) ) THEN
      RETURN ( SELECT report_name
               FROM report
               WHERE (report_id=_f.custform_quote_report_id) );

    ELSIF ( (pFormType = &#39;P&#39;) AND (_f.custform_packinglist_report_id &lt;&gt; -1) ) THEN
      RETURN ( SELECT report_name
               FROM report
               WHERE (report_id=_f.custform_packinglist_report_id) );

    ELSIF ( (pFormType = &#39;L&#39;) AND (_f.custform_sopicklist_report_id &lt;&gt; -1) ) THEN
      RETURN ( SELECT report_name
               FROM report
               WHERE (report_id=_f.custform_sopicklist_report_id) );
    END IF;


  END IF;

  IF (pFormType = &#39;I&#39;) THEN
    RETURN &#39;Invoice&#39;;
  ELSIF (pFormType = &#39;C&#39;) THEN
    RETURN &#39;CreditMemo&#39;;
  ELSIF (pFormType = &#39;S&#39;) THEN
    RETURN &#39;Statement&#39;;
  ELSIF (pFormType = &#39;Q&#39;) THEN
    RETURN &#39;Quote&#39;;
  ELSIF (pFormType = &#39;P&#39;) THEN
    RETURN &#39;PackingList-Shipment&#39;;
  ELSIF (pFormType = &#39;L&#39;) THEN
    RETURN &#39;PackingList&#39;;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.finddeferredaccount-integer">finddeferredaccount( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  _accntid INTEGER;

BEGIN

--  Check for a Customer Type specific Account
  SELECT araccnt_deferred_accnt_id INTO _accntid
  FROM araccnt, cust
  WHERE ( (araccnt_custtype_id=cust_custtype_id)
   AND (cust_id=pCustid) );
  IF (FOUND) THEN
    RETURN _accntid;
  END IF;

--  Check for a Customer Type pattern
  SELECT araccnt_deferred_accnt_id INTO _accntid
  FROM araccnt, cust, custtype
  WHERE ( (custtype_code ~ araccnt_custtype)
   AND (cust_custtype_id=custtype_id)
   AND (araccnt_custtype_id=-1)
   AND (cust_id=pCustid) );
  IF (FOUND) THEN
    RETURN _accntid;
  END IF;

  RETURN -1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.findfreightaccount-integer">findfreightaccount( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  _accntid INTEGER;

BEGIN

--  Check for a Customer Type specific Account
  SELECT araccnt_freight_accnt_id INTO _accntid
  FROM araccnt, cust
  WHERE ( (araccnt_custtype_id=cust_custtype_id)
   AND (cust_id=pCustid) );
  IF (FOUND) THEN
    RETURN _accntid;
  END IF;

--  Check for a Customer Type pattern
  SELECT araccnt_freight_accnt_id INTO _accntid
  FROM araccnt, cust, custtype
  WHERE ( (custtype_code ~ araccnt_custtype)
   AND (cust_custtype_id=custtype_id)
   AND (araccnt_custtype_id=-1)
   AND (cust_id=pCustid) );
  IF (FOUND) THEN
    RETURN _accntid;
  END IF;

--  Find the default
  SELECT metric_value::INTEGER INTO _accntid
  FROM metric
  WHERE (metric_name=&#39;FreightAccount&#39;);
  IF (FOUND) THEN
    RETURN _accntid;
  END IF;

  RETURN -1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.findperiodend-integer">findperiodend( integer )</a>
		</h2>
<h3>Returns: date</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCalitemid ALIAS FOR $1;
  _calType CHAR(1);
  _calItem RECORD;
  _start DATE;
  _loop INTEGER;

BEGIN

  SELECT calhead_type INTO _calType
  FROM calhead, acalitem
  WHERE ((acalitem_calhead_id=calhead_id)
   AND (acalitem_id=pCalitemid));

  IF (NOT FOUND) THEN
    SELECT calhead_type INTO _calType
    FROM calhead, rcalitem
    WHERE ((rcalitem_calhead_id=calhead_id)
     AND (rcalitem_id=pCalitemid));

    IF (NOT FOUND) THEN
      RETURN NULL;
    END IF;
  END IF;

  IF (_calType = &#39;A&#39;) THEN
    RETURN ( SELECT (findPeriodStart(acalitem_id) + acalitem_periodlength - 1)
             FROM acalitem
             WHERE (acalitem_id=pCalitemid) );

  ELSIF (_calType = &#39;R&#39;) THEN

--  Grab the relative calitem&#39;s particulars
    SELECT rcalitem_periodtype, rcalitem_periodcount INTO _calitem
    FROM rcalitem
    WHERE (rcalitem_id=pCalitemid);

    IF (NOT FOUND) THEN
      RETURN NULL;
    END If;

--  Grab the origin of the calitem
    SELECT findPeriodStart(pCalitemid) INTO _start;

    IF (_start IS NULL) THEN

--  If days...
    ELSIF (_calitem.rcalitem_periodtype = &#39;D&#39;) THEN
      _start := (_start + _calitem.rcalitem_periodcount - 1);

--  If weeks... (gotta be a better way)
    ELSIF (_calitem.rcalitem_periodtype = &#39;W&#39;) THEN
      _loop := _calitem.rcalitem_periodcount;

      WHILE (_loop &gt; 0) LOOP
        _start := (_start + INTERVAL &#39;1 week&#39;);
        _loop := (_loop - 1);
      END LOOP;

      _start := (_start - 1);

--  If months... (gotta be a better way)
    ELSIF (_calitem.rcalitem_periodtype = &#39;M&#39;) THEN
      _loop := _calitem.rcalitem_periodcount;

      WHILE (_loop &gt; 0) LOOP
        _start := (_start + INTERVAL &#39;1 month&#39;);
        _loop := (_loop - 1);
      END LOOP;

      _start := (_start - 1);

--  If years... (gotta be a better way)
    ELSIF (_calitem.rcalitem_periodtype = &#39;Y&#39;) THEN
      _loop := _calitem.rcalitem_periodcount;

      WHILE (_loop &gt; 0) LOOP
        _start := (_start + INTERVAL &#39;1 year&#39;);
        _loop := (_loop - 1);
      END LOOP;

      _start := (_start - 1);

    ELSE
      _start := NULL;
    END IF;

  ELSE
    _start := NULL;
  END IF;

  RETURN _start;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.findperiodstart-integer">findperiodstart( integer )</a>
		</h2>
<h3>Returns: date</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCalitemid ALIAS FOR $1;
  _calType CHAR(1);
  _calItem RECORD;
  _start DATE;
  _loop INTEGER;

BEGIN

  SELECT calhead_type INTO _calType
  FROM calhead, acalitem
  WHERE ((acalitem_calhead_id=calhead_id)
   AND (acalitem_id=pCalitemid));

  IF (NOT FOUND) THEN
    SELECT calhead_type INTO _calType
    FROM calhead, rcalitem
    WHERE ((rcalitem_calhead_id=calhead_id)
     AND (rcalitem_id=pCalitemid));

    IF (NOT FOUND) THEN
      RETURN NULL;
    END IF;
  END IF;

  IF (_calType = &#39;A&#39;) THEN
    RETURN ( SELECT acalitem_periodstart
             FROM acalitem
             WHERE (acalitem_id=pCalitemid) );

  ELSIF (_calType = &#39;R&#39;) THEN

--  Grab the relative calitem&#39;s particulars
    SELECT rcalitem_offsettype, rcalitem_offsetcount INTO _calitem
    FROM rcalitem
    WHERE (rcalitem_id=pCalitemid);

    IF (NOT FOUND) THEN
      RETURN NULL;
    END If;

--  Grab the origin of the calitem&#39;s parend calhead
    SELECT findCalendarOrigin(calhead_id) INTO _start
    FROM calhead, rcalitem
    WHERE ((rcalitem_calhead_id=calhead_id)
     AND (rcalitem_id=pCalitemid));

--  If days...
    IF (_calitem.rcalitem_offsettype = &#39;D&#39;) THEN
      _start := (_start + _calitem.rcalitem_offsetcount);

--  If weeks...
    ELSIF (_calitem.rcalitem_offsettype = &#39;W&#39;) THEN
      _start := (_start + (_calitem.rcalitem_offsetcount * 7));

--  If months... (gotta be a better way)
    ELSIF (_calitem.rcalitem_offsettype = &#39;M&#39;) THEN
      _loop := _calitem.rcalitem_offsetcount;

      IF (_loop &gt; 0) THEN
        WHILE (_loop &gt; 0) LOOP
          _start := (_start + INTERVAL &#39;1 month&#39;);
          _loop := _loop - 1;
        END LOOP;
      ELSE
        WHILE (_loop &lt; 0) LOOP
          _start := (_start - INTERVAL &#39;1 month&#39;);
          _loop := _loop + 1;
        END LOOP;
      END IF;

--  If years... (gotta be a better way)
    ELSIF (_calitem.rcalitem_offsettype = &#39;Y&#39;) THEN
      _loop := _calitem.rcalitem_offsetcount;

      IF (_loop &gt; 0) THEN
        WHILE (_loop &gt; 0) LOOP
          _start := (_start + INTERVAL &#39;1 year&#39;);
          _loop := _loop - 1;
        END LOOP;
      ELSE
        WHILE (_loop &lt; 0) LOOP
          _start := (_start - INTERVAL &#39;1 year&#39;);
          _loop := _loop + 1;
        END LOOP;
      END IF;

    ELSE
      _start := NULL;
    END IF;

  ELSE
    _start := NULL;
  END IF;

  RETURN _start;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.findprepaidaccount-integer">findprepaidaccount( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  _accntid INTEGER;

BEGIN

--  Check for a Customer Type specific Account
  SELECT araccnt_prepaid_accnt_id INTO _accntid
  FROM araccnt, cust
  WHERE ( (araccnt_custtype_id=cust_custtype_id)
   AND (cust_id=pCustid) );
  IF (FOUND) THEN
    RETURN _accntid;
  END IF;

--  Check for a Customer Type pattern
  SELECT araccnt_prepaid_accnt_id INTO _accntid
  FROM araccnt, cust, custtype
  WHERE ( (custtype_code ~ araccnt_custtype)
   AND (cust_custtype_id=custtype_id)
   AND (araccnt_custtype_id=-1)
   AND (cust_id=pCustid) );
  IF (FOUND) THEN
    RETURN _accntid;
  END IF;

  RETURN -1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.findsalesaccnt-integer-integer">findsalesaccnt( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN findSalesAccnt($1, &#39;IS&#39;, $2);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.findsalesaccnt-integer-text-integer">findsalesaccnt( integer, text, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pid		ALIAS FOR $1;
  pidType	ALIAS FOR $2;
  pCustid	ALIAS FOR $3;
  _s RECORD;

BEGIN

  IF (pidType = &#39;I&#39;) THEN
    --  Check for a custtype specific rule
    SELECT salesaccnt_id,
	   CASE WHEN ( (salesaccnt_custtype_id&lt;&gt;-1) AND (salesaccnt_prodcat_id&lt;&gt;-1) ) THEN &#39;A&#39;
		WHEN ( (salesaccnt_custtype_id&lt;&gt;-1) AND (salesaccnt_prodcat_id=-1) ) THEN &#39;B&#39;
		WHEN ( (salesaccnt_custtype_id=-1) AND (salesaccnt_prodcat_id&lt;&gt;-1) ) THEN &#39;C&#39;
		ELSE &#39;D&#39;
	   END AS orderby INTO _s
    FROM salesaccnt, item, prodcat, cust, custtype
    WHERE ( (salesaccnt_warehous_id=-1)
      AND  (item_prodcat_id=prodcat_id)
      AND  (cust_custtype_id=custtype_id)
      AND  ( (salesaccnt_prodcat=&#39;.*&#39;) OR
	    ( (salesaccnt_prodcat_id=-1) AND
	      (salesaccnt_prodcat&lt;&gt;&#39;&#39;) AND
	      (prodcat_code ~ salesaccnt_prodcat) ) OR
	    ( (salesaccnt_prodcat_id=prodcat_id) ) )
      AND  ( (salesaccnt_custtype=&#39;.*&#39;) OR
	    ( (salesaccnt_custtype_id=-1) AND
	      (salesaccnt_custtype&lt;&gt;&#39;&#39;) AND
	      (custtype_code ~ salesaccnt_custtype) ) OR
	    ( (salesaccnt_custtype_id=custtype_id) ) )
      AND (item_id=pid)
      AND (cust_id=pCustid) )
     ORDER BY orderby, salesaccnt_custtype DESC, salesaccnt_prodcat DESC
     LIMIT 1;

  ELSIF (pidType = &#39;IS&#39;) THEN
    --  Check for a custtype specific rule
    SELECT salesaccnt_id,
	   CASE WHEN ( (salesaccnt_custtype_id&lt;&gt;-1) AND (salesaccnt_prodcat_id&lt;&gt;-1) ) THEN &#39;A&#39;
		WHEN ( (salesaccnt_custtype_id&lt;&gt;-1) AND (salesaccnt_prodcat_id=-1) ) THEN &#39;B&#39;
		WHEN ( (salesaccnt_custtype_id=-1) AND (salesaccnt_prodcat_id&lt;&gt;-1) ) THEN &#39;C&#39;
		ELSE &#39;D&#39;
	   END AS orderby INTO _s
    FROM salesaccnt, itemsite, item, prodcat, cust, custtype
    WHERE ( ( (salesaccnt_warehous_id=-1) OR
	      (salesaccnt_warehous_id=itemsite_warehous_id) )
     AND (itemsite_item_id=item_id)
     AND (item_prodcat_id=prodcat_id)
     AND (cust_custtype_id=custtype_id)
     AND ( (salesaccnt_prodcat=&#39;.*&#39;) OR
	   ( (salesaccnt_prodcat_id=-1) AND
	     (salesaccnt_prodcat&lt;&gt;&#39;&#39;) AND
	     (prodcat_code ~ salesaccnt_prodcat) ) OR
	   ( (salesaccnt_prodcat_id=prodcat_id) ) )
     AND ( (salesaccnt_custtype=&#39;.*&#39;) OR
	   ( (salesaccnt_custtype_id=-1) AND
	     (salesaccnt_custtype&lt;&gt;&#39;&#39;) AND
	     (custtype_code ~ salesaccnt_custtype) ) OR
	   ( (salesaccnt_custtype_id=custtype_id) ) )
     AND (itemsite_id=pid)
     AND (cust_id=pCustid) ) 
    ORDER BY orderby, salesaccnt_custtype DESC, salesaccnt_prodcat DESC
    LIMIT 1;

  ELSE
    RETURN -2;	-- invalid pidType
  END IF;

  IF (FOUND) THEN
    RETURN _s.salesaccnt_id;
  END IF;

  RETURN -1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.findspecialfinancial-text-text-integer">findspecialfinancial( text, text, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUnit ALIAS FOR $1;
  pType ALIAS FOR $2;
  pPeriodid ALIAS FOR $3;

  _value NUMERIC;
BEGIN

  _value := 0.00;

  IF (&#39;OpenAR&#39; = pType) THEN
    IF ( pUnit IN (&#39;D&#39;,&#39;E&#39;) ) THEN
      SELECT SUM( CASE WHEN (aropen_doctype IN (&#39;C&#39;, &#39;R&#39;)) THEN ((aropen_amount - aropen_paid) * -1)
                       ELSE (aropen_amount - aropen_paid) END ) INTO _value
        FROM aropen, period
       WHERE ((aropen_open)
         AND  (aropen_duedate BETWEEN period_start AND period_end)
         AND  (period_id=pPeriodid));

      IF (&#39;E&#39; = pUnit) THEN
        _value := 0.00 - _value;
      END IF;
    END IF;
  END IF;

  IF (&#39;OpenAP&#39; = pType) THEN
    IF ( pUnit IN (&#39;C&#39;,&#39;E&#39;) ) THEN
      SELECT SUM( CASE WHEN (apopen_doctype=&#39;C&#39;) THEN ((apopen_amount - apopen_paid) * -1)
                       ELSE (apopen_amount - apopen_paid) END ) INTO _value
        FROM apopen, period
       WHERE ((apopen_open)
         AND  (apopen_duedate BETWEEN period_start AND period_end)
         AND  (period_id=pPeriodid));
    END IF;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.first-anyelement">first( anyelement )</a>
		</h2>
<h3>Returns: anyelement</h3>
<h3>Language: INTERNAL</h3>
        
        <pre>aggregate_dummy</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.first-agg-anyelement-anyelement">first_agg( anyelement, anyelement )</a>
		</h2>
<h3>Returns: anyelement</h3>
<h3>Language: SQL</h3>
        
        <pre>
        SELECT CASE WHEN $1 IS NULL THEN $2 ELSE $1 END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.firstline-text">firstline( text )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSource ALIAS FOR $1;
  _result TEXT := &#39;&#39;;
  _cursor INTEGER := 1;
  _state INTEGER := 0;
  _length INTEGER;
  _character TEXT;

  _position INTEGER;

BEGIN

  _length := LENGTH(pSource);

  WHILE ( (_state &lt;&gt; 2) AND (_cursor &lt;= _length) ) LOOP
    _character := substr(pSource, _cursor, 1);

    IF (_state = 0) THEN
      IF (_character NOT IN  (&#39;
&#39;, &#39; &#39;)) THEN
        _state := 1;
        _result = (_result || _character);
      END IF;

    ELSIF (_state = 1) THEN
      IF (_character = &#39;
&#39;) THEN
        _state := 2;
      ELSE
        _result = (_result || _character);
      END IF;
    END IF;

    _cursor := (_cursor + 1);

  END LOOP;

  RETURN _result;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.fixacl">fixacl(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _r     RECORD;
  _count INTEGER := 0;
BEGIN
  FOR _r IN SELECT relname, nspname
            FROM pg_catalog.pg_class c, pg_namespace n
            WHERE ((n.oid=c.relnamespace)
              AND  (nspname in (&#39;public&#39;, &#39;api&#39;))
              AND  (relkind in (&#39;S&#39;, &#39;r&#39;, &#39;v&#39;))) LOOP

    RAISE NOTICE &#39;%.%&#39;, _r.nspname, _r.relname;
    EXECUTE &#39;REVOKE ALL ON &#39; || _r.nspname || &#39;.&#39; || _r.relname || &#39; FROM PUBLIC;&#39;;
    EXECUTE &#39;GRANT ALL ON &#39;  || _r.nspname || &#39;.&#39; || _r.relname || &#39; TO GROUP openmfg;&#39;;
    _count := _count + 1;

  END LOOP;

  RETURN _count;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatachcompanyid">formatachcompanyid(  )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN CASE WHEN fetchMetricText(&#39;ACHCompanyIdType&#39;) = &#39;D&#39; THEN &#39;3&#39;
              WHEN fetchMetricText(&#39;ACHCompanyIdType&#39;) = &#39;E&#39; THEN &#39;1&#39;
              WHEN fetchMetricText(&#39;ACHCompanyIdType&#39;) = &#39;O&#39; THEN &#39;9&#39;
         END ||
         CASE WHEN fetchMetricText(&#39;ACHCompanyIdType&#39;) = &#39;D&#39; OR
                   fetchMetricText(&#39;ACHCompanyIdType&#39;) = &#39;E&#39; THEN
                 REPLACE(fetchMetricText(&#39;ACHCompanyId&#39;), &#39;-&#39;, &#39;&#39;)
              ELSE fetchMetricText(&#39;ACHCompanyId&#39;)
         END;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formataddr-integer">formataddr( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pAddrId	ALIAS FOR $1;
  _return	TEXT;

BEGIN
  -- US conventions
  SELECT formatAddr(addr_line1, addr_line2, addr_line3,
		    addr_city || &#39;, &#39; || addr_state || &#39; &#39; || addr_postalcode,
		    addr_country) INTO _return
  FROM addr
  WHERE (addr_id=pAddrId);

  RETURN _return;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formataddr-text-text-text-text-integer">formataddr( text, text, text, text, integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  f_addr1 ALIAS FOR $1;
  f_addr2 ALIAS FOR $2;
  f_addr3 ALIAS FOR $3;
  csz     ALIAS FOR $4;
  line    ALIAS FOR $5;

BEGIN
  RETURN formatAddr(f_addr1, f_addr2, f_addr3, csz, &#39;&#39;, line);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formataddr-text-text-text-text-text">formataddr( text, text, text, text, text )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  f_addr1 ALIAS FOR $1;
  f_addr2 ALIAS FOR $2;
  f_addr3 ALIAS FOR $3;
  csz     ALIAS FOR $4;
  country ALIAS FOR $5;
  addr TEXT:=&#39;&#39;;

BEGIN

  IF (LENGTH(TRIM(both from f_addr1)) &gt; 0) THEN
    addr:=f_addr1;
  END IF;

  IF (LENGTH(TRIM(both from f_addr2)) &gt; 0)  THEN
        IF (LENGTH(TRIM(both from addr)) &gt; 0) THEN
                addr:=addr || &#39;
&#39;;
        END IF;
    addr:=addr || f_addr2;
  END IF;

  IF (LENGTH(TRIM(both from f_addr3)) &gt; 0)  THEN
        IF (LENGTH(TRIM(both from addr)) &gt; 0) THEN
                addr:=addr || &#39;
&#39;;
        END IF;
    addr:=addr || f_addr3;
  END IF;

  IF (LENGTH(TRIM(both from csz)) &gt; 0)  THEN
        IF (LENGTH(TRIM(both from addr)) &gt; 0) THEN
                addr:=addr || &#39;
&#39;;
        END IF;
    addr:=addr || csz;
  END IF;

  IF (LENGTH(TRIM(both from country)) &gt; 0)  THEN
        IF (LENGTH(TRIM(both from addr)) &gt; 0) THEN
                addr:=addr || &#39;
&#39;;
        END IF;
    addr:=addr || country;
  END IF;

  RETURN addr;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formataddr-text-text-text-text-text-integer">formataddr( text, text, text, text, text, integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  f_addr1 ALIAS FOR $1;
  f_addr2 ALIAS FOR $2;
  f_addr3 ALIAS FOR $3;
  csz     ALIAS FOR $4;
  country ALIAS FOR $5;
  line    ALIAS FOR $6;

  i int:=0;

BEGIN

  IF (LENGTH(TRIM(both from f_addr1)) &gt; 0) THEN
    i:=i+1;
  END IF;

  IF (i=line) THEN
    RETURN f_addr1;
  END IF;

  IF (LENGTH(TRIM(both from f_addr2)) &gt; 0)  THEN
    i:=i+1;
  END IF;

  IF (i=line) THEN
    RETURN f_addr2;
  END IF;

  IF (LENGTH(TRIM(both from f_addr3)) &gt; 0) THEN
    i:=i+1;
  END IF;

  IF (i=line) THEN
    RETURN f_addr3;
  END IF;

  IF (LENGTH(TRIM(both from csz)) &gt; 0) THEN
    i:=i+1;
  END IF;

  IF (i=line) THEN
    RETURN csz;
  END IF;

  IF (LENGTH(TRIM(both from country)) &gt; 0) THEN
    i:=i+1;
  END IF;

  IF (i=line) THEN
    RETURN country;
  END IF;

  RETURN &#39; &#39;;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatboolyn-boolean">formatboolyn( boolean )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE pBool ALIAS FOR $1;
BEGIN
  IF (pBool) THEN
    RETURN &#39;Yes&#39;;
  ELSE
    RETURN &#39;No&#39;;
  END IF;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatbooseq-integer-integer">formatbooseq( integer, integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pBooitemSeqId ALIAS FOR $2;
  _result TEXT;
  
BEGIN

  IF (fetchMetricBool(&#39;Routings&#39;)) THEN
    SELECT booitem_seqnumber::text INTO _result
    FROM booitem(pItemid)
    WHERE (booitem_seq_id=pBooitemSeqId);

    RETURN _result;
  ELSE
    RETURN NULL;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatbytea-bytea">formatbytea( bytea )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pField ALIAS FOR $1;
  output_field TEXT;

BEGIN

  output_field := pField;

  RETURN output_field;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatccdashes-text-text">formatccdashes( text, text )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCCard ALIAS FOR $1;
  pCCardType ALIAS FOR $2;
  _returnCard text;
  card_length integer;

BEGIN

  IF (pCCardType = &#39;A&#39;)  THEN
    _returnCard := pCCard;
    RETURN _returnCard;
  END IF;

  card_length := length(pCcard);

  if (card_length = 16) THEN
    _returnCard := substr(pCCard, 1, 4) || &#39;-&#39; || substr(pCCard, 5, 4) || &#39;-&#39; || substr(pCCard, 9, 4) || &#39;-&#39; || substr(pCCard, 13, 4);
  ELSE
    _returnCard := substr(pCCard, 1, 4) || &#39;-&#39; || substr(pCCard, 5, 4) || &#39;-&#39; || substr(pCCard, 9, 4) || &#39;-&#39; || substr(pCCard, 13, 1);
  END IF;

  RETURN _returnCard;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatccnumber-bytea">formatccnumber( bytea )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCcardnum ALIAS FOR $1;
  card_length INTEGER;
  output_cardnum TEXT;

BEGIN

  card_length := length(pCcardnum);

  IF (card_length = 13) THEN
    output_cardnum := &#39;*********&#39; || substr(pCcardnum, 10, 4);  
  END IF;

  IF (card_length = 14) THEN
    output_cardnum := &#39;**********&#39; || substr(pCcardnum, 11, 4);  
  END IF;

  IF (card_length = 15) THEN
    output_cardnum := &#39;***********&#39; || substr(pCcardnum, 12, 4);  
  END IF;

  IF (card_length = 16) THEN
    output_cardnum := &#39;************&#39; || substr(pCcardnum, 13, 4);  
  END IF;

  RETURN output_cardnum;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatccnumber-text">formatccnumber( text )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCcardnum ALIAS FOR $1;
  card_length INTEGER;
  output_cardnum TEXT;

BEGIN

  card_length := length(pCcardnum);

  IF (card_length = 13) THEN
    output_cardnum := &#39;*********&#39; || substr(pCcardnum, 10, 4);  
  END IF;

  IF (card_length = 14) THEN
    output_cardnum := &#39;**********&#39; || substr(pCcardnum, 11, 4);  
  END IF;

  IF (card_length = 15) THEN
    output_cardnum := &#39;***********&#39; || substr(pCcardnum, 12, 4);  
  END IF;

  IF (card_length = 16) THEN
    output_cardnum := &#39;************&#39; || substr(pCcardnum, 13, 4);  
  END IF;

  RETURN output_cardnum;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatcost-numeric">formatcost( numeric )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN formatNumeric($1, &#39;cost&#39;);
END;</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatcounttagbarcode-integer">formatcounttagbarcode( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCnttagid ALIAS FOR $1;
  _barcode TEXT;
BEGIN

  SELECT ( &#39;8CTXX&#39; ||
           LTRIM(TO_CHAR(LENGTH(invcnt_tagnumber), &#39;00&#39;)) || invcnt_tagnumber ) INTO _barcode
  FROM invcnt
  WHERE (invcnt_id=pCnttagid);

  RETURN _barcode;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatcreditmemonumber-integer">formatcreditmemonumber( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCmheadid ALIAS FOR $1;

BEGIN
  RETURN ( SELECT COALESCE(cmhead_number::TEXT, &#39;&#39;)
           FROM cmhead
           WHERE (cmhead_id=pCmheadid) );
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatdate-date">formatdate( date )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: SQL</h3>
        
        <pre>
SELECT TO_CHAR($1, COALESCE((SELECT locale_dateformat
                             FROM locale, usr
                             WHERE ((usr_locale_id=locale_id)
                              AND (usr_username=CURRENT_USER)) ),
                            &#39;yyyy-mm-dd&#39;) ) AS result
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatdate-date-text">formatdate( date, text )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pDate ALIAS FOR $1;
  pString ALIAS FOR $2;

BEGIN

  IF ( (pDate = startOfTime()) OR
       (pDate = endOfTime()) OR
       (pDate IS NULL) ) THEN
    RETURN pString;
  ELSE
    RETURN formatDate(pDate);
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatdate-timestamp-with-time-zone">formatdate( timestamp with time zone )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: SQL</h3>
        
        <pre>
SELECT TO_CHAR($1, COALESCE((SELECT locale_dateformat
                             FROM locale, usr
                             WHERE ((usr_locale_id=locale_id)
                              AND (usr_username=CURRENT_USER)) ),
                            &#39;yyyy-mm-dd&#39; )) AS result
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatdatetime-timestamp-with-time-zone">formatdatetime( timestamp with time zone )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: SQL</h3>
        
        <pre>
SELECT TO_CHAR($1, COALESCE((SELECT locale_timestampformat
                             FROM locale, usr
                             WHERE ((usr_locale_id=locale_id)
                              AND (usr_username=CURRENT_USER)) ),
                            &#39;yyyy-mm-dd HH24:MI:SS&#39;)) AS result
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatdatetime-timestamp-without-time-zone">formatdatetime( timestamp without time zone )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: SQL</h3>
        
        <pre>
SELECT TO_CHAR($1, COALESCE((SELECT locale_timestampformat
                             FROM locale, usr
                             WHERE ((usr_locale_id=locale_id)
                              AND (usr_username=CURRENT_USER)) ),
                            &#39;yyyy-mm-dd HH24:MI:SS&#39;)) AS result
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatextprice-numeric">formatextprice( numeric )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN formatNumeric($1, &#39;extprice&#39;);
END;</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatflitemdescrip-integer">formatflitemdescrip( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pFlitemId ALIAS FOR $1;
  _x RECORD;
  _descrip TEXT;

BEGIN
  SELECT flitem_accnt_id, flitem_company, flitem_profit, flitem_number,
        flitem_sub, flitem_type, flitem_subaccnttype_code,
        accnt_id, accnt_descrip INTO _x
  FROM flitem LEFT OUTER JOIN accnt
        ON flitem_accnt_id=accnt_id
  WHERE flitem_id=pFlitemId;

  IF _x.flitem_accnt_id &gt; -1 THEN

    SELECT (formatGLAccount(_x.accnt_id) || &#39;-&#39; || _x.accnt_descrip) INTO _descrip;

  ELSE

    _descrip:=&#39;&#39;;

    IF _x.flitem_type = &#39;A&#39; THEN
      _descrip:=&#39;Type=&#39; || &#39;Asset&#39;;
      ELSE IF _x.flitem_type=&#39;L&#39; THEN
        _descrip:=&#39;Type=&#39; || &#39;Liability&#39;;
        ELSE IF _x.flitem_type=&#39;R&#39; THEN
          _descrip:=&#39;Type=&#39; || &#39;Revenue&#39;;
          ELSE IF _x.flitem_type=&#39;E&#39; THEN
            _descrip:=&#39;Type=&#39; || &#39;Expense&#39;;
            ELSE IF _x.flitem_type=&#39;Q&#39; THEN
              _descrip:=&#39;Type=&#39; || &#39;Equity&#39;;
            END IF;
          END IF;
        END IF;
      END IF;
    END IF;

    IF _x.flitem_subaccnttype_code &lt;&gt; &#39;All&#39; THEN
      IF (LENGTH(TRIM(both from _descrip)) &gt; 0) THEN
        _descrip:=_descrip || &#39;, &#39;;
      END IF;
      _descrip:=_descrip || &#39;Sub Accnt Type=&#39; || _x.flitem_subaccnttype_code;
    END IF;

    IF _x.flitem_company &lt;&gt; &#39;All&#39; THEN
      IF (LENGTH(TRIM(both from _descrip)) &gt; 0) THEN
        _descrip:=_descrip || &#39;, &#39;;
      END IF;
      _descrip:=_descrip || &#39;Company=&#39; || _x.flitem_company;
    END IF;

    IF _x.flitem_profit &lt;&gt; &#39;All&#39; THEN
      IF (LENGTH(TRIM(both from _descrip)) &gt; 0) THEN
        _descrip:=_descrip || &#39;, &#39;;
      END IF;
      _descrip:=_descrip || &#39;Profit=&#39; || _x.flitem_profit;
    END IF;

    IF _x.flitem_number &lt;&gt; &#39;All&#39; THEN
      IF (LENGTH(TRIM(both from _descrip)) &gt; 0) THEN
        _descrip:=_descrip || &#39;, &#39;;
      END IF;
      _descrip:=_descrip || &#39;Number=&#39; || _x.flitem_number;
    END IF;

    IF _x.flitem_sub &lt;&gt; &#39;All&#39; THEN
      IF (LENGTH(TRIM(both from _descrip)) &gt; 0) THEN
        _descrip:=_descrip || &#39;, &#39;;
      END IF;
      _descrip:=_descrip || &#39;Sub Accnt=&#39; || _x.flitem_sub;
    END IF;
  END IF;

  RETURN _descrip;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatglaccount-integer">formatglaccount( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pAccntid ALIAS FOR $1;
  _number TEXT;
  _accnt RECORD;

BEGIN

  _number := &#39;&#39;;

  SELECT COALESCE(accnt_company, &#39;&#39;) AS accnt_company,
         COALESCE(accnt_profit, &#39;&#39;) AS accnt_profit,
         accnt_number,
         COALESCE(accnt_sub, &#39;&#39;) AS accnt_sub INTO _accnt
  FROM accnt
  WHERE (accnt_id=pAccntid);

  IF (NOT FOUND) THEN
    RETURN &#39;Error&#39;;
  END IF;

  IF ( ( SELECT metric_value::INTEGER
         FROM metric
         WHERE (metric_name=&#39;GLCompanySize&#39;) ) &gt; 0 ) THEN
    _number := _accnt.accnt_company || &#39;-&#39;;
  END IF;

  IF ( ( SELECT metric_value::INTEGER
         FROM metric
         WHERE (metric_name=&#39;GLProfitSize&#39;) ) &gt; 0 ) THEN
    _number := _number || _accnt.accnt_profit || &#39;-&#39;;
  END IF;

  _number := _number || _accnt.accnt_number;

  IF ( ( SELECT metric_value::INTEGER
         FROM metric
         WHERE (metric_name=&#39;GLSubaccountSize&#39;) ) &gt; 0 ) THEN
    _number := _number || &#39;-&#39; || _accnt.accnt_sub;
  END IF;

  RETURN _number;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatglaccountlong-integer">formatglaccountlong( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pAccntid ALIAS FOR $1;
  _result TEXT;

BEGIN

  SELECT (formatGLAccount(accnt_id) || &#39;-&#39; || accnt_descrip) INTO _result
  FROM accnt
  WHERE (accnt_id=pAccntid);

  RETURN _result;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatindent-text-integer">formatindent( text, integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pText ALIAS FOR $1;
  pIndent ALIAS FOR $2;
  _i INTEGER;
  _result TEXT;

BEGIN
  _result := &#39;&#39;;
  _i := 0;

  WHILE _i &lt; pIndent LOOP
    _result := _result || &#39;  &#39;;
    _i := _i + 1;
  END LOOP;

  _result := _result || pText;
  RETURN _result;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatinterval-interval">formatinterval( interval )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: SQL</h3>
        
        <pre>
  SELECT TO_CHAR($1, ( SELECT locale_intervalformat
		       FROM locale, usr
		       WHERE ((usr_locale_id=locale_id)
		         AND  (usr_username=CURRENT_USER)) ) ) AS result
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatinterval-numeric">formatinterval( numeric )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: SQL</h3>
        
        <pre>
  SELECT TO_CHAR((&#39;@ &#39; || trunc($1) || &#39; min &#39; ||
			     ($1 - trunc($1)) * 60 || &#39; sec&#39;)::INTERVAL,
		 ( SELECT locale_intervalformat
		       FROM locale, usr
		       WHERE ((usr_locale_id=locale_id)
		         AND  (usr_username=CURRENT_USER)) ) ) AS result
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatinvcnumber-integer">formatinvcnumber( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCobmiscid ALIAS FOR $1;

BEGIN
  RETURN ( SELECT COALESCE(cobmisc_invcnumber::TEXT, &#39;&#39;)
           FROM cobmisc
           WHERE (cobmisc_id=pCobmiscid) );
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatitemsitebarcode-integer">formatitemsitebarcode( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  _barcode TEXT;
BEGIN

  SELECT ( &#39;8ISXX&#39; ||
           LTRIM(TO_CHAR(LENGTH(item_number), &#39;00&#39;)) || LENGTH(warehous_code)::TEXT ||
           item_number || warehous_code ) INTO _barcode
  FROM itemsite, item, warehous
  WHERE ( (itemsite_item_id=item_id)
   AND (itemsite_warehous_id=warehous_id)
   AND (itemsite_id=pItemsiteid) );

  RETURN _barcode;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatlocationbarcode-integer">formatlocationbarcode( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pLocationid ALIAS FOR $1;
  _barcode TEXT;
BEGIN

  SELECT ( &#39;8LOXX&#39; ||
           LENGTH(warehous_code)::TEXT || LTRIM(TO_CHAR(LENGTH(location_name::TEXT), &#39;00&#39;)) ||
           warehous_code || location_name ) INTO _barcode
  FROM location, warehous
  WHERE ( (location_warehous_id=warehous_id)
   AND (location_id=pLocationid) );

  RETURN _barcode;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatlocationcontentsbarcode-integer">formatlocationcontentsbarcode( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pLocationid ALIAS FOR $1;
  _barcode TEXT;
BEGIN

  SELECT ( &#39;8LOCN&#39; ||
           LENGTH(warehous_code)::TEXT || LTRIM(TO_CHAR(LENGTH(location_name), &#39;00&#39;)) ||
           warehous_code || location_name ) INTO _barcode
  FROM location, warehous
  WHERE ( (location_warehous_id=warehous_id)
   AND (location_id=pLocationid) );

  RETURN _barcode;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatlocationissuebarcode-integer">formatlocationissuebarcode( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pLocationid ALIAS FOR $1;
  _barcode TEXT;
BEGIN

  SELECT ( &#39;8LOIS&#39; ||
           LENGTH(warehous_code)::TEXT || LTRIM(TO_CHAR(LENGTH(location_name), &#39;00&#39;)) ||
           warehous_code || location_name ) INTO _barcode
  FROM location, warehous
  WHERE ( (location_warehous_id=warehous_id)
   AND (location_id=pLocationid) );

  RETURN _barcode;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatlocationname-integer">formatlocationname( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pLocationid ALIAS FOR $1;
  _name TEXT;
  _r RECORD;

BEGIN

  SELECT location_aisle, location_rack,
         location_bin, location_name INTO _r
  FROM location
  WHERE (location_id=pLocationid);
  IF (FOUND) THEN
    IF (_r.location_aisle IS NOT NULL) THEN
      _name := _r.location_aisle;
    ELSE
      _name := &#39;&#39;;
    END IF;

    IF (_r.location_rack IS NOT NULL) THEN
      _name := (_name || _r.location_rack);
    END IF;

    IF (_r.location_bin IS NOT NULL) THEN
      _name := (_name || _r.location_bin);
    END IF;

    IF (_r.location_name IS NOT NULL) THEN
      _name := (_name || _r.location_name);
    END IF;

    RETURN _name;
  ELSE
    RETURN &#39;N/A&#39;;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatlotserialnumber-integer">formatlotserialnumber( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pLotSerialId ALIAS FOR $1;
  _lotserial TEXT;

BEGIN
  --See if lot serial control turned on (Postbooks will not ever have this)
  IF (fetchmetricbool(&#39;LotSerialControl&#39;)) THEN
    SELECT ls_number INTO _lotserial
    FROM ls
    WHERE (ls_id=pLotSerialId);
  END IF;

  RETURN COALESCE(_lotserial,&#39;&#39;);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatmoney-numeric">formatmoney( numeric )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN formatNumeric($1, &#39;curr&#39;);
END;</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatnumeric-numeric-text">formatnumeric( numeric, text )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _value        NUMERIC := COALESCE($1, 0);
  _type         TEXT    := LOWER(COALESCE($2, &#39;curr&#39;));
  _abs          NUMERIC := ABS(_value);
  _magnitudecnt NUMERIC(1000) := TRUNC(_abs / 10);
  _whole        NUMERIC(1000) := TRUNC(_abs);
  _wholefmt     TEXT    := &#39;9&#39;;
  _fractional   NUMERIC := _abs - _whole;
  _scale        INTEGER;
  _neg          TEXT;
  _decimal      TEXT;
  _group        TEXT;
  _string       TEXT;
  _debug        BOOL := false;
  _r            RECORD;

BEGIN
  SELECT * INTO _r
  FROM locale, usr
  WHERE ((usr_locale_id=locale_id)
     AND (usr_username=CURRENT_USER));

  _decimal := COALESCE(SUBSTRING(_r.locale_qtyformat FROM 1 FOR 1), &#39;.&#39;);
  _neg     := COALESCE(SUBSTRING(_r.locale_qtyformat FROM 2 FOR 1), &#39;-&#39;);
  _group   := COALESCE(SUBSTRING(_r.locale_qtyformat FROM 3 FOR 1), &#39;,&#39;);

  _scale   := CASE WHEN _type = &#39;cost&#39;       THEN _r.locale_cost_scale
                   WHEN _type = &#39;extprice&#39;   THEN _r.locale_extprice_scale
                   WHEN _type = &#39;percent&#39;    THEN 2
                   WHEN _type = &#39;purchprice&#39; THEN _r.locale_purchprice_scale
                   WHEN _type = &#39;qty&#39;        THEN _r.locale_qty_scale
                   WHEN _type = &#39;qtyper&#39;     THEN _r.locale_qtyper_scale
                   WHEN _type = &#39;salesprice&#39; THEN _r.locale_salesprice_scale
                   WHEN _type = &#39;uomratio&#39;   THEN _r.locale_uomratio_scale
                   WHEN _type = &#39;weight&#39;     THEN 2
                   WHEN SUBSTRING(_type FOR 4) = &#39;curr&#39; THEN _r.locale_curr_scale
                   ELSE 2
              END;

  IF (_debug) THEN
    RAISE NOTICE &#39;_value % _abs % _whole % _fractional % _scale % _neg % _decimal % _group % &#39;,
                 _value, _abs, _whole, _fractional, _scale, _decimal, _group, _scale;
  END IF;

  IF (_value &lt; 0) THEN
    _string := _neg;
  ELSE
    _string := &#39;&#39;;
  END IF;

  WHILE (_magnitudecnt &gt;= 1) LOOP
    _magnitudecnt := TRUNC(_magnitudecnt / 10);
    IF (LENGTH(_wholefmt) % 3 = 0) THEN
      _wholefmt := &#39;&quot;&#39; || _group || &#39;&quot;&#39; || _wholefmt;
    END IF;
    _wholefmt := &#39;9&#39; || _wholefmt;
  END LOOP;

  _string := _string || to_char(_whole, _wholefmt);

  IF (_scale &gt; 0) THEN
    _string := _string || _decimal;
    FOR _scale IN REVERSE _scale..1 LOOP
      _fractional := (_fractional - TRUNC(_fractional, 0)) * 10;
      IF _debug THEN RAISE NOTICE &#39;_fractional is now %&#39;, _fractional; END IF;
      IF (_scale = 1) THEN
        _string := _string || CAST(ROUND(_fractional) AS TEXT);
      ELSE
        _string := _string || CAST(TRUNC(_fractional) AS TEXT);
      END IF;
    END LOOP;
  END IF;

  RETURN _string;
END;</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatperiodname-integer-bpchar">formatperiodname( integer, bpchar )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPeriodId ALIAS FOR $1;
  pInterval ALIAS FOR $2;
  _result TEXT;

BEGIN

--...for Month

   IF (pInterval=&#39;M&#39;) THEN
        SELECT
          (CASE
                      WHEN period_name=&#39;&#39; THEN
                        formatdate(period_start) || &#39;-&#39; || formatdate(period_end)
                      ELSE period_name
          END) INTO _result
        FROM period
        WHERE (period_id=pPeriodId);

        RETURN _result;

--...for Quarter

        ELSE IF (pInterval=&#39;Q&#39;) THEN
                SELECT
                        (&#39;Q&#39; || period_quarter || &#39;-&#39; || EXTRACT(year from yearperiod_end)) INTO _result
                FROM period, yearperiod
                WHERE ((period_id=pPeriodId)
                AND (period_yearperiod_id=yearperiod_id));

                RETURN _result;
--...for Year
        ELSE
                SELECT
                        EXTRACT(year FROM yearperiod_end) INTO _result
                FROM period,yearperiod
                WHERE ((period_id=pPeriodId)
                AND (period_yearperiod_id=yearperiod_id));

                RETURN _result;
        END IF;
   END IF;

   RETURN &#39;Err&#39;;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatplonumber-integer">formatplonumber( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPlanordid ALIAS FOR $1;
  _result TEXT;

BEGIN

  SELECT (TEXT(planord_number) || &#39;-&#39; || TEXT(planord_subnumber)) INTO _result
  FROM planord
  WHERE (planord_id=pPlanordid);

  RETURN _result;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatprcnt-numeric">formatprcnt( numeric )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: SQL</h3>
        
        <pre>
SELECT formatNumeric($1, &#39;percent&#39;)  AS result
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatprice-numeric">formatprice( numeric )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: SQL</h3>
        
        <pre>
  SELECT formatNumeric($1, &#39;salesprice&#39;) AS result;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatpurchprice-numeric">formatpurchprice( numeric )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN formatNumeric($1, &#39;purchprice&#39;);
END;</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatqty-numeric">formatqty( numeric )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN formatNumeric($1, &#39;qty&#39;);
END;</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatqtyper-numeric">formatqtyper( numeric )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN formatNumeric($1, &#39;qtyper&#39;);
END;</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatratio-numeric">formatratio( numeric )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: SQL</h3>
        
        <pre>
  SELECT formatNumeric($1, &#39;uomratio&#39;);
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatrevnumber-text-integer">formatrevnumber( text, integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pRevType 	ALIAS FOR $1;
  pRevId 	ALIAS FOR $2;
  _revision 	TEXT;

BEGIN
  --See if revision control turned on (Postbooks will not ever have this)
  IF (fetchmetricbool(&#39;RevControl&#39;)) THEN
    SELECT rev_number INTO _revision
    FROM rev
    WHERE ((rev_target_type=pRevType)
    AND (rev_id=pRevId));
  END IF;

  RETURN COALESCE(_revision,&#39;&#39;);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatsalesprice-numeric">formatsalesprice( numeric )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN formatNumeric($1, &#39;salesprice&#39;);
END;</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatscrap-numeric">formatscrap( numeric )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: SQL</h3>
        
        <pre>
  SELECT formatNumeric(($1 * 100), &#39;percent&#39;) AS result
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatshipmentnumber-integer">formatshipmentnumber( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pshipheadid    ALIAS FOR $1;
BEGIN
  RETURN ( SELECT COALESCE(shiphead_number::TEXT, &#39;&#39;)
           FROM shiphead
           WHERE (shiphead_id=pshipheadid) );
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatsobarcode-integer">formatsobarcode( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSoheadid ALIAS FOR $1;
  _barcode TEXT;
BEGIN

  SELECT ( &#39;8SOXX&#39; ||
           LENGTH(TEXT(cohead_number)) || TEXT(cohead_number) ) INTO _barcode
  FROM cohead
  WHERE (cohead_id=pSoheadid);

  RETURN _barcode;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatsoitembarcode-integer">formatsoitembarcode( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSoitemid ALIAS FOR $1;
  _barcode TEXT;
BEGIN

  SELECT ( E&#39;\138SOLI&#39; ||
           LENGTH(TEXT(cohead_number)) || LENGTH(formatsolinenumber(coitem_id)) ||
           TEXT(cohead_number) || formatsolinenumber(coitem_id) ) INTO _barcode
  FROM cohead, coitem
  WHERE ( (coitem_cohead_id=cohead_id)
   AND (coitem_id=pSoitemid) );

  RETURN _barcode;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatsoitemnumber-integer">formatsoitemnumber( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  targetSoitemid ALIAS FOR $1;
BEGIN
  RETURN ( SELECT (cohead_number::TEXT || &#39;-&#39; || formatsolinenumber(coitem_id))
           FROM cohead, coitem
           WHERE ((coitem_cohead_id=cohead_id)
            AND (coitem_id=targetSoitemid)) );
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatsolinenumber-integer">formatsolinenumber( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSoitemid ALIAS FOR $1;
  _r RECORD;

BEGIN

  SELECT coitem_linenumber, coitem_subnumber
    INTO _r
    FROM coitem
   WHERE(coitem_id=pSoitemid);

  IF(NOT FOUND) THEN
    RETURN NULL;
  END IF;

  IF(COALESCE(_r.coitem_subnumber, 0) &gt; 0) THEN
    RETURN _r.coitem_linenumber || &#39;.&#39; || _r.coitem_subnumber;
  END IF;

  RETURN _r.coitem_linenumber; 
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatsonumber-integer">formatsonumber( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: SQL</h3>
        
        <pre>
SELECT COALESCE((SELECT (text(cohead_number) || &#39;-&#39; || formatSoLineNumber(coitem_id))
                   FROM coitem JOIN cohead ON (coitem_cohead_id=cohead_id)
                  WHERE (coitem_id=($1))),&#39;DELETED&#39;);
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formattime-numeric">formattime( numeric )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: SQL</h3>
        
        <pre>
  SELECT LTRIM(TO_CHAR(COALESCE($1, 0), &#39;999999990.0&#39;));
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formattime-timestamp-with-time-zone">formattime( timestamp with time zone )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: SQL</h3>
        
        <pre>
  SELECT TO_CHAR($1, ( SELECT locale_timeformat
                       FROM locale, usr
                       WHERE ((usr_locale_id=locale_id)
                        AND (usr_username=CURRENT_USER)) ) ) AS result
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatuomratio-numeric">formatuomratio( numeric )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN formatNumeric($1, &#39;uomratio&#39;);
END;</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatuserbarcode-integer">formatuserbarcode( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUserid ALIAS FOR $1;
  _barcode TEXT;
BEGIN

  SELECT ( &#39;8USER&#39; ||
           LENGTH(usr_username)::TEXT || usr_username ) INTO _barcode
  FROM usr
  WHERE (usr_id=pUserid);

  RETURN _barcode;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatweight-numeric">formatweight( numeric )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: SQL</h3>
        
        <pre>
SELECT formatNumeric($1, &#39;weight&#39;) AS result
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatwobarcode-integer">formatwobarcode( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid ALIAS FOR $1;
  _barcode TEXT;
BEGIN

  SELECT ( &#39;8WOXX&#39; ||
           LENGTH(wo_number::TEXT) || LENGTH(wo_subnumber::TEXT) ||
           wo_number::TEXT || wo_subnumber::TEXT ) INTO _barcode
  FROM wo
  WHERE (wo_id=pWoid);

  RETURN _barcode;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatwonumber-integer">formatwonumber( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid ALIAS FOR $1;

BEGIN

  RETURN ( SELECT (wo_number::TEXT || &#39;-&#39; || wo_subnumber::TEXT)
           FROM wo
           WHERE (wo_id=pWoid) );

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.formatwooperseq-integer">formatwooperseq( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWooperId  ALIAS FOR $1;
  _result TEXT;

BEGIN

  IF pWooperId = -1 THEN
    RETURN &#39;&#39;;
  ELSE
    SELECT wooper_seqnumber INTO _result
    FROM wooper
    WHERE (wooper_id=pWooperId);
  END IF;

  RETURN _result;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.forwardupdateaccount-integer">forwardupdateaccount( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pAccntid ALIAS FOR $1;
  _r RECORD;

BEGIN
  SELECT trialbal_id INTO _r
    FROM trialbal, period
   WHERE ((trialbal_period_id=period_id)
     AND  (trialbal_accnt_id=pAccntid))
   ORDER BY period_start
   LIMIT 1;
  IF (FOUND) THEN
    RETURN forwardUpdateTrialBalance(_r.trialbal_id);
  END IF;

  RETURN -1;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.forwardupdatetrialbalance-integer">forwardupdatetrialbalance( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTrialbalid ALIAS FOR $1;
  _p RECORD;
  _r RECORD;
  _ending NUMERIC;
  _prevYear INTEGER;
  _currYear INTEGER;

BEGIN

  SELECT trialbal_accnt_id, trialbal_ending,
         period_end, accnt_type IN (&#39;E&#39;, &#39;R&#39;) AS revexp INTO _p
  FROM trialbal, period, accnt
  WHERE ( (trialbal_period_id=period_id)
   AND (trialbal_accnt_id=accnt_id)
   AND (trialbal_id=pTrialbalid) );

  _ending = _p.trialbal_ending;

  SELECT yearperiod_id INTO _prevYear
    FROM yearperiod
   WHERE (_p.period_end BETWEEN yearperiod_start AND yearperiod_end);
  IF (NOT FOUND) THEN
    _prevYear := -1;
  END IF;

--  Find all of the subsequent, but not future, periods and their trialbal, if they exist
  FOR _r IN SELECT period_id, period_end,
		   trialbal_id, trialbal_debits, trialbal_credits,
		   trialbal_yearend
            FROM period LEFT OUTER JOIN trialbal
                 ON ( (trialbal_period_id=period_id) AND (trialbal_accnt_id=_p.trialbal_accnt_id) )
            WHERE ( (period_start &gt; _p.period_end)
             AND (period_start &lt;= CURRENT_DATE) )
            ORDER BY period_start LOOP

    SELECT yearperiod_id INTO _currYear
      FROM yearperiod
     WHERE (_r.period_end BETWEEN yearperiod_start AND yearperiod_end);
    IF (NOT FOUND) THEN
      _currYear := -1;
    END IF;

    IF (_p.revexp AND _currYear != _prevYear) THEN
      _ending := 0;
    END IF;

    _prevYear := _currYear;

    IF (_r.trialbal_id IS NULL) THEN
      -- SELECT SUM(gltrans_amount) INTO _glAmount
       -- FROM gltrans
       -- WHERE ( (gltrans_date BETWEEN _r.period_start and _r.period_end )
	 -- AND   (gltrans_accnt_id=_p.trialbal_accnt_id)
	 -- AND   (gltrans_posted) );
	-- and change 2nd and 3rd VALUES line of INSERT to read
	--	_ending, _ending + _glAmount,
        --	noneg(0 - _glAmount), noneg(_glAmount), FALSE );

      INSERT INTO trialbal
      ( trialbal_period_id, trialbal_accnt_id,
        trialbal_beginning, trialbal_ending,
        trialbal_debits, trialbal_credits, trialbal_dirty )
      VALUES
      ( _r.period_id, _p.trialbal_accnt_id,
        _ending, _ending,
        0, 0, FALSE );
    ELSE
      UPDATE trialbal
      SET trialbal_beginning = (_ending + trialbal_yearend),
          trialbal_ending = (_ending + trialbal_yearend - _r.trialbal_debits + _r.trialbal_credits),
          trialbal_dirty = FALSE
      WHERE (trialbal_id=_r.trialbal_id);

      _ending = (_ending + _r.trialbal_yearend - _r.trialbal_debits + _r.trialbal_credits);
    END IF;
  END LOOP;

  UPDATE trialbal
  SET trialbal_dirty = FALSE
  WHERE (trialbal_id=pTrialbalid);

  RETURN pTrialbalid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.freezeaccountingperiod-integer">freezeaccountingperiod( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPeriodid ALIAS FOR $1;

BEGIN

--  Check to make use that the period is closed
  IF ( ( SELECT (NOT period_closed)
         FROM period
         WHERE (period_id=pPeriodid) ) ) THEN
    RETURN -1;
  END IF;

--  Check to make use that the period is not already frozen
  IF ( ( SELECT period_freeze
         FROM period
         WHERE (period_id=pPeriodid) ) ) THEN
    RETURN -2;
  END IF;

--  Set the period_freeze flag
  UPDATE period
  SET period_freeze=TRUE
  WHERE (period_id=pPeriodid);

  RETURN pPeriodid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.freightdetail-text-integer-integer-integer-date-text-integer">freightdetail( text, integer, integer, integer, date, text, integer )</a>
		</h2>
<h3>Returns: SET OF freightdata</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pOrderType ALIAS FOR $1;
  pOrderId ALIAS FOR $2;
  pCustId ALIAS FOR $3;
  pShiptoId ALIAS FOR $4;
  pOrderDate ALIAS FOR $5;
  pShipVia ALIAS FOR $6;
  pCurrId ALIAS FOR $7;
  _row freightData%ROWTYPE;
  _order RECORD;
  _weights RECORD;
  _price RECORD;
  _sales RECORD;
  _freightid INTEGER;
  _totalprice NUMERIC;
  _freight RECORD;
  _debug BOOLEAN := false;
BEGIN
  IF (_debug) THEN
    RAISE NOTICE &#39;pOrderType = %&#39;, pOrderType;
    RAISE NOTICE &#39;pOrderId = %&#39;, pOrderId;
    RAISE NOTICE &#39;pCustId = %&#39;, pCustId;
    RAISE NOTICE &#39;pShiptoId = %&#39;, pShiptoId;
    RAISE NOTICE &#39;pOrderDate = %&#39;, pOrderDate;
    RAISE NOTICE &#39;pShipVia = %&#39;, pShipVia;
    RAISE NOTICE &#39;pCurrId = %&#39;, pCurrId;
  END IF;

  --Get the order header information need to match
  --against price schedules
  IF (pOrderType = &#39;SO&#39;) THEN
    SELECT cust_id AS cust_id,
           custtype_id,
           custtype_code,
           COALESCE(shipto_id, -1) AS shipto_id,
           COALESCE(shipto_num, &#39;&#39;) AS shipto_num,
           COALESCE(pOrderDate, cohead_orderdate) AS orderdate,
           COALESCE(pShipVia, cohead_shipvia) AS shipvia,
           shipto_shipzone_id AS shipzone_id,
           COALESCE(pCurrId, cohead_curr_id) AS curr_id,
           currConcat(COALESCE(pCurrId, cohead_curr_id)) AS currAbbr
    INTO _order
    FROM cohead JOIN cust ON (cust_id=COALESCE(pCustId, cohead_cust_id))
                JOIN custtype ON (custtype_id=cust_custtype_id)
                LEFT OUTER JOIN shipto ON (shipto_id=COALESCE(pShiptoId, cohead_shipto_id))
    WHERE (cohead_id=pOrderId);

    IF (_debug) THEN
      RAISE NOTICE &#39;cust_id = %&#39;, _order.cust_id;
      RAISE NOTICE &#39;custtype_id = %&#39;, _order.custtype_id;
      RAISE NOTICE &#39;shipto_id = %&#39;, _order.shipto_id;
      RAISE NOTICE &#39;shipto_num = %&#39;, _order.shipto_num;
      RAISE NOTICE &#39;orderdate = %&#39;, _order.orderdate;
      RAISE NOTICE &#39;shipvia = %&#39;, _order.shipvia;
      RAISE NOTICE &#39;shipzone_id = %&#39;, _order.shipzone_id;
      RAISE NOTICE &#39;curr_id = %&#39;, _order.curr_id;
      RAISE NOTICE &#39;currAbbr = %&#39;, _order.currAbbr;
    END IF;

  ELSE
    SELECT quhead_cust_id AS cust_id,
           custtype_id,
           custtype_code,
           COALESCE(shipto_id, -1) AS shipto_id,
           COALESCE(shipto_num, &#39;&#39;) AS shipto_num,
           quhead_quotedate AS orderdate,
           quhead_shipvia AS shipvia,
           shipto_shipzone_id AS shipzone_id,
           quhead_curr_id AS curr_id,
           currConcat(quhead_curr_id) AS currAbbr
    INTO _order
    FROM quhead JOIN cust ON (cust_id=quhead_cust_id)
                JOIN custtype ON (custtype_id=cust_custtype_id)
                LEFT OUTER JOIN shipto ON (shipto_id=quhead_shipto_id)
    WHERE (quhead_id=pOrderId);
  END IF;

  --Get a list of aggregated weights from sites and
  --freight classes used on order lines
  FOR _weights IN
    SELECT SUM(orderitem_qty_ordered * (item_prodweight + item_packweight)) AS weight,
           itemsite_warehous_id, item_freightclass_id
    FROM salesquoteitem JOIN itemsite ON (itemsite_id=orderitem_itemsite_id)
                        JOIN item ON (item_id=itemsite_item_id)
    WHERE ( (orderitem_orderhead_type=pOrderType)
      AND   (orderitem_orderhead_id=pOrderId)
      AND   (item_freightclass_id IS NOT NULL) )
    GROUP BY itemsite_warehous_id, item_freightclass_id LOOP

  IF (_debug) THEN
    RAISE NOTICE &#39;_weights.weight - %&#39;, _weights.weight;
    RAISE NOTICE &#39;_weights.itemsite_warehous_id = %&#39;, _weights.itemsite_warehous_id;
    RAISE NOTICE &#39;_weights.item_freightclass_id = %&#39;, _weights.item_freightclass_id;
  END IF;

-- First get a sales price if any so we when we find other prices
-- we can determine if we want that price or this price.
--  Check for a Sale Price
  SELECT ipsfreight_id,
         CASE WHEN (ipsfreight_type=&#39;F&#39;) THEN currToCurr(ipshead_curr_id, _order.curr_id,
                                                         ipsfreight_price, _order.orderdate)
              ELSE currToCurr(ipshead_curr_id, _order.curr_id,
                              (_weights.weight * ipsfreight_price), _order.orderdate)
         END AS price
         INTO _sales
  FROM ipsfreight JOIN ipshead ON (ipshead_id=ipsfreight_ipshead_id)
                  JOIN sale ON (sale_ipshead_id=ipshead_id)
  WHERE ( (ipsfreight_qtybreak &lt;= _weights.weight)
    AND   ((ipsfreight_warehous_id IS NULL) OR (ipsfreight_warehous_id=_weights.itemsite_warehous_id))
    AND   ((ipsfreight_freightclass_id IS NULL) OR (ipsfreight_freightclass_id=_weights.item_freightclass_id))
    AND   ((ipsfreight_shipzone_id IS NULL) OR (ipsfreight_shipzone_id=_order.shipzone_id))
    AND   ((ipsfreight_shipvia IS NULL) OR (ipsfreight_shipvia=_order.shipvia))
    AND   (CURRENT_DATE BETWEEN sale_startdate AND sale_enddate) )
  ORDER BY ipsfreight_qtybreak DESC, price ASC
  LIMIT 1;

  IF (_debug) THEN
    IF (_sales.price IS NOT NULL) THEN
      RAISE NOTICE &#39;Sales Price found, %&#39;, _sales.price;
    END IF;
  END IF;

--  Check for a Customer Shipto Price
  SELECT ipsfreight_id,
         CASE WHEN (ipsfreight_type=&#39;F&#39;) THEN currToCurr(ipshead_curr_id, _order.curr_id,
                                                         ipsfreight_price, _order.orderdate)
              ELSE currToCurr(ipshead_curr_id, _order.curr_id,
                              (_weights.weight * ipsfreight_price), _order.orderdate)
         END AS price
         INTO _price
  FROM ipsfreight JOIN ipshead ON (ipshead_id=ipsfreight_ipshead_id)
                  JOIN ipsass ON (ipsass_ipshead_id=ipshead_id)
  WHERE ( (ipsfreight_qtybreak &lt;= _weights.weight)
    AND   ((ipsfreight_warehous_id IS NULL) OR (ipsfreight_warehous_id=_weights.itemsite_warehous_id))
    AND   ((ipsfreight_freightclass_id IS NULL) OR (ipsfreight_freightclass_id=_weights.item_freightclass_id))
    AND   ((ipsfreight_shipzone_id IS NULL) OR (ipsfreight_shipzone_id=_order.shipzone_id))
    AND   ((ipsfreight_shipvia IS NULL) OR (ipsfreight_shipvia=_order.shipvia))
    AND   (CURRENT_DATE BETWEEN ipshead_effective AND (ipshead_expires - 1))
    AND   (ipsass_cust_id=_order.cust_id)
    AND   (ipsass_shipto_id != -1)
    AND   (ipsass_shipto_id=_order.shipto_id) )
  ORDER BY ipsfreight_qtybreak DESC, price ASC
  LIMIT 1;

  IF (_debug) THEN
    IF (_price.price IS NOT NULL) THEN
      RAISE NOTICE &#39;Customer Shipto Price found, %&#39;, _price.price;
    END IF;
  END IF;

  IF (_price.price IS NULL) THEN
--  Check for a Customer Shipto Pattern Price
  SELECT ipsfreight_id,
         CASE WHEN (ipsfreight_type=&#39;F&#39;) THEN currToCurr(ipshead_curr_id, _order.curr_id,
                                                         ipsfreight_price, _order.orderdate)
              ELSE currToCurr(ipshead_curr_id, _order.curr_id,
                              (_weights.weight * ipsfreight_price), _order.orderdate)
         END AS price
         INTO _price
  FROM ipsfreight JOIN ipshead ON (ipshead_id=ipsfreight_ipshead_id)
                  JOIN ipsass ON (ipsass_ipshead_id=ipshead_id)
  WHERE ( (ipsfreight_qtybreak &lt;= _weights.weight)
    AND   (CURRENT_DATE BETWEEN ipshead_effective AND (ipshead_expires - 1))
    AND   (ipsass_cust_id=_order.cust_id)
    AND   (COALESCE(LENGTH(ipsass_shipto_pattern), 0) &gt; 0)
    AND   (_order.shipto_num ~ ipsass_shipto_pattern)
    AND   ((ipsfreight_warehous_id IS NULL) OR (ipsfreight_warehous_id=_weights.itemsite_warehous_id))
    AND   ((ipsfreight_freightclass_id IS NULL) OR (ipsfreight_freightclass_id=_weights.item_freightclass_id))
    AND   ((ipsfreight_shipzone_id IS NULL) OR (ipsfreight_shipzone_id=_order.shipzone_id))
    AND   ((ipsfreight_shipvia IS NULL) OR (ipsfreight_shipvia=_order.shipvia)) )
  ORDER BY ipsfreight_qtybreak DESC, price ASC
  LIMIT 1;

  IF (_debug) THEN
    IF (_price.price IS NOT NULL) THEN
      RAISE NOTICE &#39;Customer Shipto Pattern Price found, %&#39;, _price.price;
    END IF;
  END IF;

  END IF;

  IF (_price.price IS NULL) THEN
--  Check for a Customer Price
  SELECT ipsfreight_id,
         CASE WHEN (ipsfreight_type=&#39;F&#39;) THEN currToCurr(ipshead_curr_id, _order.curr_id,
                                                         ipsfreight_price, _order.orderdate)
              ELSE currToCurr(ipshead_curr_id, _order.curr_id,
                              (_weights.weight * ipsfreight_price), _order.orderdate)
         END AS price
         INTO _price
  FROM ipsfreight JOIN ipshead ON (ipshead_id=ipsfreight_ipshead_id)
                  JOIN ipsass ON (ipsass_ipshead_id=ipshead_id)
  WHERE ( (ipsfreight_qtybreak &lt;= _weights.weight)
    AND   ((ipsfreight_warehous_id IS NULL) OR (ipsfreight_warehous_id=_weights.itemsite_warehous_id))
    AND   ((ipsfreight_freightclass_id IS NULL) OR (ipsfreight_freightclass_id=_weights.item_freightclass_id))
    AND   ((ipsfreight_shipzone_id IS NULL) OR (ipsfreight_shipzone_id=_order.shipzone_id))
    AND   ((ipsfreight_shipvia IS NULL) OR (ipsfreight_shipvia=_order.shipvia))
    AND   (CURRENT_DATE BETWEEN ipshead_effective AND (ipshead_expires - 1))
    AND   (ipsass_cust_id=_order.cust_id)
    AND   (COALESCE(LENGTH(ipsass_shipto_pattern), 0) = 0) )
  ORDER BY ipsfreight_qtybreak DESC, price ASC
  LIMIT 1;

  IF (_debug) THEN
    IF (_price.price IS NOT NULL) THEN
      RAISE NOTICE &#39;Customer Price found, %&#39;, _price.price;
    END IF;
  END IF;

  END IF;

  IF (_price.price IS NULL) THEN
--  Check for a Customer Type Price
  SELECT ipsfreight_id,
         CASE WHEN (ipsfreight_type=&#39;F&#39;) THEN currToCurr(ipshead_curr_id, _order.curr_id,
                                                         ipsfreight_price, _order.orderdate)
              ELSE currToCurr(ipshead_curr_id, _order.curr_id,
                              (_weights.weight * ipsfreight_price), _order.orderdate)
         END AS price
         INTO _price
  FROM ipsfreight JOIN ipshead ON (ipshead_id=ipsfreight_ipshead_id)
                  JOIN ipsass ON (ipsass_ipshead_id=ipshead_id)
  WHERE ( (ipsfreight_qtybreak &lt;= _weights.weight)
    AND   ((ipsfreight_warehous_id IS NULL) OR (ipsfreight_warehous_id=_weights.itemsite_warehous_id))
    AND   ((ipsfreight_freightclass_id IS NULL) OR (ipsfreight_freightclass_id=_weights.item_freightclass_id))
    AND   ((ipsfreight_shipzone_id IS NULL) OR (ipsfreight_shipzone_id=_order.shipzone_id))
    AND   ((ipsfreight_shipvia IS NULL) OR (ipsfreight_shipvia=_order.shipvia))
    AND   (CURRENT_DATE BETWEEN ipshead_effective AND (ipshead_expires - 1))
    AND   (ipsass_custtype_id=_order.custtype_id) )
  ORDER BY ipsfreight_qtybreak DESC, price ASC
  LIMIT 1;

  IF (_debug) THEN
    IF (_price.price IS NOT NULL) THEN
      RAISE NOTICE &#39;Customer Type Price found, %&#39;, _price.price;
    END IF;
  END IF;

  END IF;

  IF (_price.price IS NULL) THEN
--  Check for a Customer Type Pattern Price
  SELECT ipsfreight_id,
         CASE WHEN (ipsfreight_type=&#39;F&#39;) THEN currToCurr(ipshead_curr_id, _order.curr_id,
                                                         ipsfreight_price, _order.orderdate)
              ELSE currToCurr(ipshead_curr_id, _order.curr_id,
                              (_weights.weight * ipsfreight_price), _order.orderdate)
         END AS price
         INTO _price
  FROM ipsfreight JOIN ipshead ON (ipshead_id=ipsfreight_ipshead_id)
                  JOIN ipsass ON (ipsass_ipshead_id=ipshead_id)
  WHERE ( (ipsfreight_qtybreak &lt;= _weights.weight)
    AND   ((ipsfreight_warehous_id IS NULL) OR (ipsfreight_warehous_id=_weights.itemsite_warehous_id))
    AND   ((ipsfreight_freightclass_id IS NULL) OR (ipsfreight_freightclass_id=_weights.item_freightclass_id))
    AND   ((ipsfreight_shipzone_id IS NULL) OR (ipsfreight_shipzone_id=_order.shipzone_id))
    AND   ((ipsfreight_shipvia IS NULL) OR (ipsfreight_shipvia=_order.shipvia))
    AND   (CURRENT_DATE BETWEEN ipshead_effective AND (ipshead_expires - 1))
    AND   (COALESCE(LENGTH(ipsass_custtype_pattern), 0) &gt; 0)
    AND   (_order.custtype_code ~ ipsass_custtype_pattern) )
  ORDER BY ipsfreight_qtybreak DESC, price ASC
  LIMIT 1;

  IF (_debug) THEN
    IF (_price.price IS NOT NULL) THEN
      RAISE NOTICE &#39;Customer Type Pattern Price found, %&#39;, _price.price;
    END IF;
  END IF;

  END IF;

  -- Select the lowest price  
  IF ( (_price.price IS NOT NULL) AND ((_sales.price IS NULL) OR (_price.price &lt; _sales.price)) ) THEN
    _freightid := _price.ipsfreight_id;
    _totalprice := _price.price;
  ELSE
    IF ( (_sales.price IS NOT NULL) AND ((_price.price IS NULL) OR (_sales.price &lt;= _price.price)) ) THEN
      _freightid := _sales.ipsfreight_id;
      _totalprice := _sales.price;
    END IF;
  END IF;

  -- Get information for the selected ipsfreight
  -- and return
  IF (_freightid IS NULL) THEN
    _row.freightdata_schedule := &#39;N/A&#39;;
    _row.freightdata_from := &#39;&#39;;
    _row.freightdata_to := &#39;&#39;;
    _row.freightdata_shipvia := &#39;&#39;;
    _row.freightdata_freightclass := &#39;&#39;;
    _row.freightdata_weight := 0;
    _row.freightdata_uom := &#39;&#39;;
    _row.freightdata_price := 0;
    _row.freightdata_type := &#39;&#39;;
    _row.freightdata_total := 0;
    _row.freightdata_currency := &#39;&#39;;
    RETURN NEXT _row;
  ELSE
    SELECT ipshead_name,
           COALESCE(warehous_code, &#39;Any&#39;) AS warehouse,
           COALESCE(shipzone_name, &#39;Any&#39;) AS shipzone,
           COALESCE(ipsfreight_shipvia, &#39;Any&#39;) AS shipvia,
           COALESCE(freightclass_code, &#39;Any&#39;) AS freightclass,
           uom_name,
           currToCurr(ipshead_curr_id, _order.curr_id, ipsfreight_price, _order.orderdate) AS price,
           CASE WHEN (ipsfreight_type=&#39;F&#39;) THEN &#39;Flat Rate&#39;
                ELSE &#39;Per UOM&#39;
           END AS type
    INTO _freight
    FROM ipsfreight JOIN ipshead ON (ipshead_id=ipsfreight_ipshead_id)
                    LEFT OUTER JOIN uom ON (uom_item_weight)
                    LEFT OUTER JOIN whsinfo ON (warehous_id=ipsfreight_warehous_id)
                    LEFT OUTER JOIN shipzone ON (shipzone_id=ipsfreight_shipzone_id)
                    LEFT OUTER JOIN freightclass ON (freightclass_id=ipsfreight_freightclass_id)
    WHERE (ipsfreight_id=_freightid);

    _row.freightdata_schedule := _freight.ipshead_name;
    _row.freightdata_from := _freight.warehouse;
    _row.freightdata_to := _freight.shipzone;
    _row.freightdata_shipvia := _freight.shipvia;
    _row.freightdata_freightclass := _freight.freightclass;
    _row.freightdata_weight := _weights.weight;
    _row.freightdata_uom := _freight.uom_name;
    _row.freightdata_price := _freight.price;
    _row.freightdata_type := _freight.type;
    _row.freightdata_total := _totalprice;
    _row.freightdata_currency := _order.currAbbr;
    RETURN NEXT _row;
  END IF;

  END LOOP;
  RETURN;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.freightforrecv-text-integer-boolean">freightforrecv( text, integer, boolean )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pordertype	ALIAS FOR $1;
  porderitemid	ALIAS FOR $2;
  pposted	ALIAS FOR $3;
  _freight	NUMERIC;

BEGIN
  IF (pordertype = &#39;TO&#39; AND NOT fetchMetricBool(&#39;MultiWhs&#39;)) THEN
    RETURN 0;
  ELSIF (pordertype = &#39;RA&#39; AND NOT fetchMetricBool(&#39;EnableReturnAuth&#39;)) THEN
    RETURN 0;
  END IF;

  SELECT SUM(COALESCE(recv_freight, 0)) INTO _freight
  FROM recv
  WHERE ((recv_orderitem_id=porderitemid)
    AND  (recv_posted = pposted)
    AND  (recv_order_type=pordertype));

  RETURN COALESCE(_freight, 0.0);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.gen-salt-text">gen_salt( text )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: C</h3>
        
        <pre>pg_gen_salt</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.gen-salt-text-integer">gen_salt( text, integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: C</h3>
        
        <pre>pg_gen_salt_rounds</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getactiverevid-text-integer">getactiverevid( text, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTargetType ALIAS FOR $1;
  pTargetid ALIAS FOR $2;
  _revid INTEGER;

BEGIN
  --See if revcontrol turned on
  IF (fetchmetricbool(&#39;RevControl&#39;)) THEN

    IF (pTargetType=&#39;BOM&#39;) THEN
      SELECT rev_id INTO _revid
      FROM rev
      WHERE ((rev_target_type=&#39;BOM&#39;)
      AND (rev_target_id=pTargetid)
      AND (rev_status=&#39;A&#39;));
      IF (NOT FOUND) THEN
        _revid:=-1;
      END IF;

      ELSE IF (pTargetType=&#39;BOO&#39;) THEN
      SELECT rev_id INTO _revid
      FROM rev
      WHERE ((rev_target_type=&#39;BOO&#39;)
      AND (rev_target_id=pTargetid)
      AND (rev_status=&#39;A&#39;));
      IF (NOT FOUND) THEN
        _revid:=-1;
      END IF;

      ELSE
        RAISE EXCEPTION &#39;Invalid Revision Type&#39;;
      END IF;
    END IF;

  ELSE
    _revid:=-1;
  END IF;

  RETURN _revid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getaddrid-text">getaddrid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pAddressNumber ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pAddressNumber IS NULL OR pAddressNumber = &#39;&#39;) THEN
    RETURN NULL;
  END IF;

  SELECT addr_id INTO _returnVal
  FROM addr
  WHERE (addr_number=pAddressNumber);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Address Number % not found.&#39;, pAddressNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getaropenid-text-bpchar-text">getaropenid( text, bpchar, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustNumber ALIAS FOR $1;
  pDocType ALIAS FOR $2;
  pDocNumber ALIAS FOR $3;
  _returnVal INTEGER;
BEGIN
  IF ((pCustNumber IS NULL) OR (pDocType IS NULL) OR (pDocNumber IS NULL)) THEN
	RETURN NULL;
  END IF;

  SELECT aropen_id INTO _returnVal
  FROM aropen
  WHERE ((aropen_cust_id=getCustId(pCustNumber,true))
    AND  (UPPER(aropen_doctype)=UPPER(pDocType))
    AND  (UPPER(aropen_docnumber)=UPPER(pDocNumber)));

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;AR Open Item % not found.&#39;, pDocNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getbankaccntid-text">getbankaccntid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBankAccntName ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pBankAccntName IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT bankaccnt_id INTO _returnVal
  FROM bankaccnt
  WHERE (UPPER(bankaccnt_name)=UPPER(pBankAccntName));

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Bank Account % not found.&#39;, pBankAccntName;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getbomitemid-text-text-text">getbomitemid( text, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemNumber ALIAS FOR $1;
  pRevision ALIAS FOR $2;
  pSeqNumber ALIAS FOR $3;
  _returnVal INTEGER;
  
BEGIN
  IF ((pItemNumber IS NULL) OR (pSeqNumber IS NULL) OR (pItemNumber = &#39;&#39;) OR (pSeqNumber = &#39;&#39;) ) THEN
    RETURN NULL;
  END IF;

  SELECT bomitem_id INTO _returnVal
  FROM bomitem(getItemId(pItemNumber),COALESCE(getRevId(&#39;BOM&#39;,pItemNumber,pRevision)))
  WHERE (bomitem_seqnumber=pSeqNumber);
    
  IF (_returnVal IS NULL) THEN
    RAISE EXCEPTION &#39;Sequence % on Bill of Material % Revision % not found.&#39;, pSeqNumber, pItemNumber, pRevision;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getbooitemseqid-text-text">getbooitemseqid( text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemNumber ALIAS FOR $1;
  pSeqNumber ALIAS FOR $2;
  _revid INTEGER;
  _returnVal INTEGER;
  
BEGIN
  IF ((pItemNumber IS NULL) OR (pSeqNumber IS NULL)) THEN
    RETURN NULL;
  END IF;

  IF (NOT fetchMetricBool(&#39;Routings&#39;)) THEN
    RETURN -1;
  ELSE
    SELECT booitem_seq_id INTO _returnVal
    FROM booitem(getItemId(pItemNumber))
    WHERE (booitem_seqnumber=CAST(pSeqNumber AS integer));
  END IF;
    
  IF (_returnVal IS NULL) THEN
    RAISE EXCEPTION &#39;% revision % for % not found.&#39;, pType, pRevision, pItemNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getcashrcptid-text-text-text">getcashrcptid( text, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustNumber ALIAS FOR $1;
  pFundsType ALIAS FOR $2;
  pDocNumber ALIAS FOR $3;
  _returnVal INTEGER;
BEGIN
  IF ((pCustNumber IS NULL) OR (pFundsType IS NULL) OR (pDocNumber IS NULL)) THEN
	RETURN NULL;
  END IF;

  SELECT cashrcpt_id INTO _returnVal
  FROM cashrcpt
  WHERE ((cashrcpt_cust_id=getCustId(pCustNumber,true))
    AND  (UPPER(cashrcpt_fundstype)=UPPER(pFundsType))
    AND  (UPPER(cashrcpt_docnumber)=UPPER(pDocNumber)));

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Cash Receipt % not found.&#39;, pDocNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getcharid-text-text">getcharid( text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pChar ALIAS FOR $1;
  pType ALIAS FOR $2;
  _returnVal INTEGER;
BEGIN
  IF (COALESCE(pChar, &#39;&#39;) = &#39;&#39;) THEN
    RETURN NULL;
  END IF;

  SELECT char_id INTO _returnVal
  FROM char
  WHERE ((char_name=pChar)
  AND ((pType IN (&#39;C&#39;,&#39;CT&#39;) AND char_customers)
    OR (pType IN (&#39;I&#39;,&#39;SI&#39;,&#39;QI&#39;,&#39;W&#39;) AND char_items)
    OR (pType=&#39;CRMACCT&#39; AND char_crmaccounts)
    OR (pType=&#39;ADDR&#39; AND char_addresses)
    OR (pType=&#39;CNTCT&#39; AND char_contacts)
    OR (pType=&#39;LS&#39; AND char_lotserial)
    OR (pType=&#39;EMP&#39; AND char_employees)
    )) LIMIT 1;

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Characteristic % not found.&#39;, pChar;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getclasscodeid-text">getclasscodeid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pClassCode ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pClassCode IS NULL) THEN
    RETURN NULL;
  END IF;

  SELECT classcode_id INTO _returnVal
  FROM classcode
  WHERE (classcode_code=pClassCode);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Class Code % not found.&#39;, pClassCode;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getcmheadid-text">getcmheadid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCreditMemoNumber ALIAS FOR $1;
BEGIN
  RETURN getCmheadId(pCreditMemoNumber, NULL);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getcmheadid-text-boolean">getcmheadid( text, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCreditMemoNumber ALIAS FOR $1;
  pPosted ALIAS FOR $2;
  _returnVal INTEGER;
BEGIN
  IF (pCreditMemoNumber IS NULL) THEN
    RETURN NULL;
  END IF;

  SELECT cmhead_id INTO _returnVal
  FROM cmhead
  WHERE (UPPER(cmhead_number)=UPPER(pCreditMemoNumber))
    AND ((pPosted IS NULL) OR (cmhead_posted=pPosted));

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Credit Memo % not found.&#39;, pCreditMemoNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getcmnttypeid-text">getcmnttypeid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCmntType ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (COALESCE(TRIM(pCmntType), &#39;&#39;) = &#39;&#39;) THEN
    RETURN NULL;
  END IF;

  SELECT cmnttype_id INTO _returnVal
  FROM cmnttype
  WHERE (cmnttype_name=pCmntType) LIMIT 1;

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Comment Type % not found.&#39;, pCmntType;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getcntctid-text">getcntctid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pContactNumber ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (COALESCE(TRIM(pContactNumber), &#39;&#39;) = &#39;&#39;) THEN
    RETURN NULL;
  END IF;

  SELECT cntct_id INTO _returnVal
  FROM cntct
  WHERE (cntct_number=pContactNumber);

  IF (_returnVal IS NULL) THEN
    RAISE EXCEPTION &#39;Contact Number % not found.&#39;, pContactNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getcoheadid-text">getcoheadid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSalesOrderNumber ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pSalesOrderNumber IS NULL) THEN
    RETURN NULL;
  END IF;

  SELECT cohead_id INTO _returnVal
  FROM cohead
  WHERE (cohead_number=pSalesOrderNumber);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Sales Order % not found.&#39;, pSalesOrderNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getcoitemid-text-text">getcoitemid( text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSalesOrderNumber	ALIAS FOR $1;
  pLineNumber 	    	ALIAS FOR $2;
  _linenumber		INTEGER;
  _subnumber		INTEGER;
  _returnVal 		INTEGER;
BEGIN
  IF (pSalesOrderNumber IS NULL OR pLineNumber IS NULL) THEN
    RETURN NULL;
  END IF;

  --Parse Line Number
  IF (position(&#39;.&#39; in pLineNumber) &gt; 0) THEN
    _linenumber	:= CAST(substring(pLineNumber from 1 for position(&#39;.&#39; in pLineNumber)-1) AS INTEGER);
    _subnumber	:= CAST(substring(pLineNumber from position(&#39;.&#39; in pLineNumber)+1 for length(pLineNumber)) AS INTEGER);
  ELSE
    _linenumber	:= CAST(pLineNumber AS INTEGER);
    _subnumber	:= 0;
  END IF;

  SELECT coitem_id INTO _returnVal
  FROM cohead, coitem
  WHERE ((cohead_number=pSalesOrderNumber)
  AND (coitem_cohead_id=cohead_id)
  AND (coitem_linenumber=_linenumber)
  AND (coitem_subnumber=_subnumber));

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Sales Order % not found.&#39;, pSalesOrderNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getcostcatid-text">getcostcatid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCostCat ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pCostCat IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT costcat_id INTO _returnVal
  FROM costcat
  WHERE (costcat_code=pCostCat);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Cost Category Code % not found.&#39;, pCostCat;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getcostelemid-text">getcostelemid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCostElemType ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pCostElemType IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT costelem_id INTO _returnVal
  FROM costelem
  WHERE (costelem_type=pCostElemType);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Cost Element % not found.&#39;, pCostElemType;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getcrmacctid-text">getcrmacctid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pAcctNumber ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  
  IF (pAcctNumber IS NULL) THEN
    RETURN NULL;
  END IF;

  SELECT crmacct_id INTO _returnVal
  FROM crmacct
  WHERE (UPPER(crmacct_number)=UPPER(pAcctNumber));
  
  IF (_returnVal IS NULL) THEN
      RAISE EXCEPTION &#39;CRM Account Number % not found.&#39;, pAcctNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getcurrid-text">getcurrid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCurrName ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pCurrName IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT curr_id INTO _returnVal
  FROM curr_symbol
  WHERE (curr_abbr=pCurrName);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Currency % not found.&#39;, pCurrName;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getcustid-text">getcustid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustNumber ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  
  SELECT getCustId(pCustNumber,false) INTO _returnVal;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getcustid-text-boolean">getcustid( text, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustNumber ALIAS FOR $1;
  pInclProspects ALIAS FOR $2;
  _returnVal INTEGER;
BEGIN
  IF (pCustNumber IS NULL) THEN
    RETURN NULL;
  END IF;

  SELECT cust_id INTO _returnVal
  FROM custinfo
  WHERE (cust_number=UPPER(pCustNumber));
  
  IF (_returnVal IS NULL) THEN
    IF (pInclProspects) THEN
      SELECT prospect_id INTO _returnVal
      FROM prospect
      WHERE (UPPER(prospect_number)=UPPER(pCustNumber));
      IF (_returnVal IS NULL) THEN
        RAISE EXCEPTION &#39;Neither Customer nor Prospect Number % found.&#39;, pCustNumber;
      END IF;
    ELSE
      RAISE EXCEPTION &#39;Customer Number % not found.&#39;, pCustNumber;
    END IF;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getcustnamefrominfo-text-text-text-text-text-boolean">getcustnamefrominfo( text, text, text, text, text, boolean )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _email	TEXT	:= COALESCE(UPPER($1), &#39;&#39;);
  _company	TEXT	:= COALESCE(UPPER($2), &#39;&#39;);
  _first	TEXT	:= COALESCE(UPPER($3), &#39;&#39;);
  _last		TEXT	:= COALESCE(UPPER($4), &#39;&#39;);
  _fullname	TEXT	:= COALESCE(UPPER($5), &#39;&#39;);
  _generate	BOOLEAN	:= COALESCE($6, FALSE);
  _counter	INTEGER;
  _custcount	INTEGER	:= 0;
  _custname	TEXT;
  _candidate	RECORD;
  _r		RECORD;
BEGIN
  IF (_email != &#39;&#39;) THEN
    SELECT count(*), cust_name INTO _custcount, _custname
    FROM custinfo LEFT OUTER JOIN cntct ON (cust_cntct_id=cntct_id)
    WHERE (UPPER(cntct_email)=_email)
    GROUP BY cust_name;
    IF (NOT FOUND) THEN
      _custcount := 0;
    ELSIF(_custcount = 1) THEN
      RETURN _custname;
    END IF;
  END IF;

  IF (_company != &#39;&#39;) THEN
    SELECT count(*), cust_name INTO _custcount, _custname
    FROM custinfo
    WHERE (UPPER(cust_name)=_company)
    GROUP BY cust_name;
    IF (NOT FOUND) THEN
      _custcount := 0;
    ELSIF(_custcount = 1) THEN
      RETURN _custname;
    END IF;
  END IF;

  IF (_fullname = &#39;&#39; AND (_first != &#39;&#39; OR _last != &#39;&#39;)) THEN
    _fullname := TRIM(_first || &#39; &#39; || _last);
  END IF;

  IF (_custcount &lt;= 0 AND _fullname != &#39;&#39;) THEN
    SELECT count(*), cust_name INTO _custcount, _custname
    FROM custinfo
    WHERE (UPPER(cust_name)=_fullname)
    GROUP BY cust_name;
    IF (NOT FOUND) THEN
      _custcount := 0;
    ELSIF(_custcount = 1) THEN
      RETURN _custname;
    END IF;
  END IF;

  IF (_custcount &gt; 1) THEN
    RAISE EXCEPTION &#39;Found % possible Customers for % and % and %&#39;,
		    _custcount, _email, _company, _fullname;
  END IF;

  IF (_custcount &lt;= 0 AND _generate) THEN
    IF (_company != &#39;&#39;) THEN
      RETURN _company;
    ELSIF (_email != &#39;&#39;) THEN
      RETURN _email;
    ELSIF (_fullname != &#39;&#39;) THEN
      RETURN _fullname;
    ELSE
      RAISE EXCEPTION &#39;Could not generate a new Customer Name without an email address or the name of a company or person&#39;;
    END IF;
  END IF;

  IF (_custname IS NULL OR _custname = &#39;&#39;) THEN
    RAISE EXCEPTION &#39;Could not find Customer Name for % and %&#39;,
		    _company, _fullname;
  END IF;

  RETURN _custname;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getcustnumberfrominfo-text-text-text-text-text-boolean">getcustnumberfrominfo( text, text, text, text, text, boolean )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _email	TEXT	:= COALESCE(UPPER($1), &#39;&#39;);
  _company	TEXT	:= COALESCE(UPPER($2), &#39;&#39;);
  _first	TEXT	:= COALESCE(UPPER($3), &#39;&#39;);
  _last		TEXT	:= COALESCE(UPPER($4), &#39;&#39;);
  _fullname	TEXT	:= COALESCE(UPPER($5), TRIM(_first || &#39; &#39; || _last));
  _generate	BOOLEAN	:= COALESCE($6, FALSE);
  _counter	INTEGER;
  _custcount	INTEGER	:= 0;
  _custnumber	TEXT;
  _candidate	TEXT	:= &#39;&#39;;
  _loopmax	INTEGER := 0;
  _minlength	INTEGER := 5;
  _maxlength	INTEGER := 8;
  _numformat	TEXT	:= &#39;&#39;;
  _testme	TEXT;
BEGIN
  IF (_email != &#39;&#39;) THEN
    SELECT count(*), cust_number INTO _custcount, _custnumber
    FROM custinfo LEFT OUTER JOIN cntct ON (cust_cntct_id=cntct_id)
    WHERE (UPPER(cntct_email)=_email)
    GROUP BY cust_number;
    IF (NOT FOUND) THEN
      _custcount := 0;
    ELSIF(_custcount = 1) THEN
      RETURN _custnumber;
    END IF;
  END IF;

  IF (_company != &#39;&#39;) THEN
    SELECT count(*), cust_number INTO _custcount, _custnumber
    FROM custinfo
    WHERE (UPPER(cust_name)=_company)
    GROUP BY cust_number;
    IF (NOT FOUND) THEN
      _custcount := 0;
    ELSIF(_custcount = 1) THEN
      RETURN _custnumber;
    END IF;
  END IF;

  IF (_fullname = &#39;&#39; AND (_first != &#39;&#39; OR _last != &#39;&#39;)) THEN
    _fullname := TRIM(_first || &#39; &#39; || _last);
  END IF;

  IF (_custcount &lt;= 0 AND _fullname != &#39;&#39;) THEN
    SELECT count(*), cust_number INTO _custcount, _custnumber
    FROM custinfo
    WHERE (UPPER(cust_name)=_fullname)
    GROUP BY cust_number;
    IF (NOT FOUND) THEN
      _custcount := 0;
    ELSIF(_custcount = 1) THEN
      RETURN _custnumber;
    END IF;
  END IF;

  IF (_custcount &gt; 1) THEN
    RAISE EXCEPTION &#39;Found % possible Customers for % and % and %&#39;,
		    _custcount, _email, _company, _fullname;
  END IF;

  IF (_custcount &lt;= 0 AND _generate) THEN
    IF (_maxlength &lt; _minlength) THEN
      RAISE EXCEPTION &#39;Fix getCustNumberFromInfo: max length &lt; min length&#39;;
    END IF;

    IF (_company != &#39;&#39;) THEN
      _candidate := _company;
    ELSIF (_email != &#39;&#39;) THEN
      _candidate := SUBSTRING(_email FOR POSITION(&#39;@&#39; IN _email) - 1);
    ELSIF (_last != &#39;&#39;) THEN
      _candidate := _last;
      IF (_first != &#39;&#39;) THEN
	_candidate := _candidate || _first;
      END IF;
    ELSIF (_fullname != &#39;&#39; AND POSITION(&#39; &#39; IN _fullname &gt; 0)) THEN
      _candidate := SUBSTRING(_fullname FROM POSITION(&#39; &#39; IN _candidate) + 1) ||
		    SUBSTRING(_fullname FOR  POSITION(&#39; &#39; IN _candidate) - 1);
    END IF;
    WHILE (POSITION(&#39; &#39; IN _candidate) &gt; 0) LOOP
      _candidate := SUBSTRING(_candidate FOR  POSITION(&#39; &#39; IN _candidate) - 1) ||
		    SUBSTRING(_candidate FROM POSITION(&#39; &#39; IN _candidate) + 1);
    END LOOP;
    FOR _counter IN _minlength.._maxlength LOOP
      _testme := SUBSTRING(_candidate FOR _counter);
      IF (NOT EXISTS(SELECT cust_number
		     FROM custinfo
		     WHERE (cust_number=_testme))) THEN
	_custnumber := _testme;
	EXIT;
      END IF;
    END LOOP;
    IF (_custnumber IS NULL OR _custnumber = &#39;&#39;) THEN
      IF (LENGTH(_candidate) &lt; _minlength) THEN
	_minlength := LENGTH(_candidate);
      END IF;
      FOR _counter IN _minlength.._maxlength LOOP
	_loopmax := _loopmax * 10 + 9;
	_numformat := _numformat || &#39;0&#39;;
      END LOOP;
      FOR _counter IN 1.._loopmax LOOP
	_testme := SUBSTRING(_candidate FOR _minlength) ||
		   TRIM(TO_CHAR(_counter, _numformat));
	IF (NOT EXISTS(SELECT cust_number
		       FROM custinfo
		       WHERE (cust_number=_testme))) THEN
	  _custnumber := _testme;
	  EXIT;
	END IF;
      END LOOP;
    END IF;
    IF (_custnumber IS NULL OR _custnumber = &#39;&#39;) THEN
      RAISE EXCEPTION &#39;Could not generate a new Customer Number&#39;;
    END IF;
  END IF;

  IF (_custnumber IS NULL OR _custnumber = &#39;&#39;) THEN
    RAISE EXCEPTION &#39;Could not find Customer Number for % and % and %&#39;,
		    _email, _company, _fullname;
  END IF;

  RETURN _custnumber;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getcusttypeid-text">getcusttypeid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustTypeCode ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pCustTypeCode IS NULL) THEN
    RETURN NULL;
  END IF;

  SELECT custtype_id INTO _returnVal
  FROM custtype
  WHERE (custtype_code=pCustTypeCode);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Customer Type % not found.&#39;, pCustTypeCode;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getdeptid-text">getdeptid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pDeptNumber ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (COALESCE(TRIM(pDeptNumber), &#39;&#39;) = &#39;&#39;) THEN
    RETURN NULL;
  END IF;

  SELECT dept_id INTO _returnVal
  FROM dept
  WHERE (UPPER(dept_number)=UPPER(pDeptNumber));

  IF (_returnVal IS NULL) THEN
    RAISE EXCEPTION &#39;Department % not found.&#39;, pDeptNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getediprofileid-text">getediprofileid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pEdiProfileName ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pEdiProfileName IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT ediprofile_id INTO _returnVal
  FROM ediprofile
  WHERE (ediprofile_name=pEdiProfileName);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;EDI Profile % not found.&#39;, pEdiProfileName;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getempid-text">getempid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pEmpCode ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (COALESCE(TRIM(pEmpCode), &#39;&#39;) = &#39;&#39;) THEN
    RETURN NULL;
  END IF;

  SELECT emp_id INTO _returnVal
  FROM emp
  WHERE (UPPER(emp_code)=UPPER(pEmpCode));

  IF (_returnVal IS NULL) THEN
    RAISE EXCEPTION &#39;Employee % not found.&#39;, pEmpCode;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getexpcatid-text">getexpcatid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pExpcatCode ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (COALESCE(TRIM(pExpcatCode), &#39;&#39;) = &#39;&#39;) THEN
    RETURN NULL;
  END IF;

  SELECT expcat_id INTO _returnVal
  FROM expcat
  WHERE (expcat_code=UPPER(pExpcatCode));

  IF (_returnVal IS NULL) THEN
    RAISE EXCEPTION &#39;Expense Category % not found.&#39;, pExpcatCode;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getflitemaccntid-integer">getflitemaccntid( integer )</a>
		</h2>
<h3>Returns: SET OF integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pFlitemId ALIAS FOR $1;
  _p RECORD;
  _x RECORD;
BEGIN

  SELECT flitem_accnt_id,
        flitem_type,
        flitem_company,
        flitem_profit,
        flitem_number,
        flitem_sub,
        flitem_subaccnttype_code
  FROM flitem
  WHERE (flitem_id=pFlitemId )
  INTO _p;

  IF _p.flitem_accnt_id &gt; -1 THEN
    RETURN NEXT _p.flitem_accnt_id;
  ELSE
    FOR _x  IN SELECT accnt_id FROM accnt
        WHERE   (
            ((_p.flitem_type=&#39;&#39;) OR (accnt_type=_p.flitem_type))
        AND ((_p.flitem_company=&#39;All&#39;) OR (accnt_company=_p.flitem_company))
        AND ((_p.flitem_profit=&#39;All&#39;) OR (accnt_profit=_p.flitem_profit))
        AND ((_p.flitem_number=&#39;All&#39;) OR (accnt_number=_p.flitem_number))
        AND ((_p.flitem_sub=&#39;All&#39;) OR (accnt_sub=_p.flitem_sub))
        AND ((_p.flitem_subaccnttype_code=&#39;All&#39;) OR (accnt_subaccnttype_code=_p.flitem_subaccnttype_code))
                )
    ORDER BY accnt_company, accnt_profit,accnt_number,accnt_sub
    LOOP
      RETURN NEXT _x.accnt_id;
    END LOOP;
  END IF;
  RETURN;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getflstmthead-integer-integer">getflstmthead( integer, integer )</a>
		</h2>
<h3>Returns: SET OF flstmthead</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pFlcolid ALIAS FOR $1;
  pPeriodid ALIAS FOR $2;
  _row flstmthead%ROWTYPE;
  _p RECORD;
  _month TEXT;
  _qtr TEXT;
  _year TEXT;
  _prmonth TEXT;
  _prqtr TEXT;
  _pryear TEXT;
  _err TEXT;

BEGIN

  SELECT &#39;No Data&#39; INTO _err;

--Get Layout Data
  SELECT flcol_priortype, flcol_prioryear INTO _p
  FROM flcol
  WHERE (flcol_id=pFlcolid);

--get data...
--...for current Month
        SELECT
          (CASE
                      WHEN period_name=&#39;&#39; THEN
                        formatdate(period_start) || &#39;-&#39; || formatdate(period_end)
                      ELSE period_name
          END) INTO _month
        FROM period
        WHERE (period_id=pPeriodId);

        IF _month IS NULL THEN
          _month := _err;
        END IF;

--...for Quarter
        SELECT
          (&#39;Q&#39; || period_quarter || &#39;-&#39; || EXTRACT(year from yearperiod_end)) INTO _qtr
        FROM period, yearperiod
        WHERE ((period_id=pPeriodId)
        AND (period_yearperiod_id=yearperiod_id));

        IF _qtr IS NULL THEN
          _qtr := _err;
        END IF;

--...for Year
        SELECT
          COALESCE((CASE WHEN period_name=&#39;&#39; THEN
                (formatdate(period_start) || &#39;-&#39; || formatdate(period_end) || &#39; YTD&#39;)
          ELSE (period_name || &#39; YTD&#39;)
          END),&#39;No Data&#39;) INTO _year
        FROM period
        WHERE (period_id=pPeriodId);

        IF _year IS NULL THEN
          _year := _err;
        END IF;

--...for prior month

        IF (_p.flcol_priortype = &#39;P&#39;) THEN

          SELECT
            (CASE WHEN pp.period_name=&#39;&#39; THEN
              formatdate(pp.period_start) || &#39;-&#39; || formatdate(pp.period_end)
            ELSE pp.period_name END) INTO _prmonth
          FROM period cp, period pp
          WHERE ((cp.period_id=pPeriodId)
          AND (cp.period_start &gt; pp.period_start))
          ORDER BY pp.period_start DESC LIMIT 1;

        ELSE

          SELECT
            (CASE WHEN pp.period_name=&#39;&#39; THEN
              formatdate(pp.period_start) || &#39;-&#39; || formatdate(pp.period_end)
            ELSE pp.period_name END) INTO _prmonth
          FROM period cp, period pp
          WHERE ((cp.period_id=pPeriodId)
          AND ((cp.period_start - interval &#39;1 year&#39;) &gt;= pp.period_start))
          ORDER BY pp.period_start DESC LIMIT 1;

        END IF;

          IF _prmonth IS NULL THEN
            _prmonth := _err;
          END IF;


--...for prior quarter

        IF (_p.flcol_priortype=&#39;P&#39;) THEN

          SELECT (&#39;Q&#39; || pp.period_quarter || &#39;-&#39; || EXTRACT(year from yearperiod_end)) INTO _prqtr
          FROM period cp, period pp, yearperiod
          WHERE ((cp.period_id=pPeriodId)
          AND (cp.period_start &gt; pp.period_start)
          AND (pp.period_quarter=
            CASE WHEN cp.period_quarter &gt; 1 THEN
              cp.period_quarter - 1
          ELSE 4 END)
          AND (pp.period_start &gt;= cp.period_start - interval &#39;1 year&#39;)
          AND (pp.period_yearperiod_id=yearperiod_id))
          ORDER BY pp.period_start DESC LIMIT 1;

        ELSE

          SELECT
            (&#39;Q&#39; || pp.period_quarter || &#39;-&#39; || EXTRACT(year from pp.period_start)) INTO _prqtr
          FROM period cp, period pp, yearperiod cy, yearperiod py
          WHERE ((cp.period_id=pPeriodId)
          AND (cp.period_yearperiod_id=cy.yearperiod_id)
          AND (pp.period_yearperiod_id=py.yearperiod_id)
          AND (cp.period_quarter=pp.period_quarter)
          AND (cy.yearperiod_start &gt; py.yearperiod_start))
          ORDER BY py.yearperiod_start DESC, pp.period_start DESC LIMIT 1;

        END IF;

        IF _prqtr IS NULL THEN
          _prqtr := _err;
        END IF;

--...for prior year

        IF (_p.flcol_prioryear=&#39;F&#39;) THEN

          SELECT (EXTRACT(year from py.yearperiod_end)||&#39;&#39;) INTO _pryear
          FROM period cp, period pp, yearperiod cy, yearperiod py
          WHERE ((cp.period_id=pPeriodId)
          AND (cp.period_yearperiod_id=cy.yearperiod_id)
          AND (pp.period_yearperiod_id=py.yearperiod_id)
          AND (cy.yearperiod_start &gt; py.yearperiod_start))
          ORDER BY pp.period_start DESC LIMIT 1;

        ELSE

          SELECT
          (CASE
                      WHEN pp.period_name=&#39;&#39; THEN
                        formatdate(pp.period_start) || &#39;-&#39; || formatdate(pp.period_end) || &#39; YTD&#39;
                      ELSE pp.period_name || &#39; YTD&#39;
          END) INTO _pryear
          FROM period cp, period pp
          WHERE ((cp.period_id=pPeriodId)
          AND ((cp.period_start - interval &#39;1 year&#39;) &gt;= pp.period_start))
          ORDER BY pp.period_start DESC LIMIT 1;

        END IF;

        IF _pryear IS NULL THEN
          _pryear := _err;
        END IF;

-- RETURN RESULTS

        SELECT
                flhead_id AS flstmthead_flhead_id,
                flcol_id AS flstmthead_flcol_id,
                pPeriodid AS flstmthead_period,
                CURRENT_USER AS flstmthead_username,
                CASE
                        WHEN flhead_type = &#39;I&#39; THEN &#39;Income Stamement&#39;
                        WHEN flhead_type = &#39;B&#39; THEN &#39;Balance Sheet&#39;
                        WHEN flhead_type = &#39;C&#39; THEN &#39;Cash Flow Statement&#39;
                        ELSE &#39;N/A&#39;
                END AS flstmthead_flhead_typedescrip1,
                CASE
                        WHEN flhead_type = &#39;I&#39; THEN &#39;Income&#39;
                        WHEN flhead_type = &#39;B&#39; THEN &#39;Balance&#39;
                        WHEN flhead_type = &#39;C&#39; THEN &#39;Cash&#39;
                        ELSE &#39;N/A&#39;
                END AS flstmthead_flhead_typedescrip2,
                flhead_name AS flstmthead_flhead_name,
                flcol_name AS flstmthead_flcol_name,
                _month AS flstmthead_month,
                _qtr AS flstmthead_qtr,
                _year AS flstmthead_year,
                _prmonth AS flstmthead_prmonth,
                _prqtr AS flstmthead_prqtr,
                _pryear AS flstmthead_pryear INTO _p
        FROM flhead,flcol
        WHERE ((flcol_id=pFlcolid)
        AND (flhead_id=flcol_flhead_id));

                _row.flstmthead_flhead_id := _p.flstmthead_flhead_id;
                _row.flstmthead_flcol_id := _p.flstmthead_flcol_id;
                _row.flstmthead_period_id := _p.flstmthead_period;
                _row.flstmthead_username := _p.flstmthead_username;
                _row.flstmthead_typedescrip1 := _p.flstmthead_flhead_typedescrip1;
                _row.flstmthead_typedescrip2 := _p.flstmthead_flhead_typedescrip2;
                _row.flstmthead_flhead_name := _p.flstmthead_flhead_name;
                _row.flstmthead_flcol_name := _p.flstmthead_flcol_name;
                _row.flstmthead_month := _p.flstmthead_month;
                _row.flstmthead_qtr := _p.flstmthead_qtr;
                _row.flstmthead_year := _p.flstmthead_year;
                _row.flstmthead_prmonth := _p.flstmthead_prmonth;
                _row.flstmthead_prqtr := _p.flstmthead_prqtr;
                _row.flstmthead_pryear := _p.flstmthead_pryear;

        RETURN NEXT _row;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getfltrendhead-integer-integerARRAY-bpchar">getfltrendhead( integer, integer[], bpchar )</a>
		</h2>
<h3>Returns: SET OF fltrendhead</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pFlheadid ALIAS FOR $1;
  pPeriodids ALIAS FOR $2;
  pInterval ALIAS FOR $3;
  _row fltrendhead%ROWTYPE;
  _p RECORD;
  _count INTEGER;
  _i INTEGER;
  _t TEXT;
  _fld TEXT[];
  _type CHAR;

BEGIN

-- Validate Interval
   IF pInterval &lt;&gt; &#39;M&#39; AND pInterval &lt;&gt; &#39;Q&#39; AND pInterval &lt;&gt; &#39;Y&#39; THEN
     RAISE EXCEPTION &#39;Invalid Interval --&gt; %&#39;, pInterval;
   END IF;

   IF ARRAY_UPPER(pPeriodIds,1) &lt;= 12 THEN
        _count := ARRAY_UPPER(pPeriodIds,1);
   ELSE
        _count := 12;
   END IF;

   SELECT flhead_type INTO _type FROM flhead WHERE flhead_id = pFlheadId;

--get data...
--...for Month
        IF (pInterval = &#39;M&#39;) THEN
                FOR _i IN 1.._count
                LOOP
                        SELECT
                        (CASE
                                WHEN period_name=&#39;&#39; THEN
                                        formatdate(period_start) || &#39;-&#39; || formatdate(period_end)
                                ELSE period_name
                        END) INTO _t
                        FROM period
                        WHERE (period_id=pPeriodIds[_i]);

                        _fld[_i] := _t;

                END LOOP;

--...for Quarter
                ELSE IF (pInterval = &#39;Q&#39;) THEN
                        FOR _i IN 1.._count
                        LOOP
                                SELECT
                                        (&#39;Q&#39; || period_quarter || &#39;-&#39; || EXTRACT(year from yearperiod_end)) INTO _t
                                FROM period, yearperiod
                                WHERE ((period_id=pPeriodIds[_i])
                                AND (period_yearperiod_id=yearperiod_id));

                                        _fld[_i] := _t;

                        END LOOP;
--...for Year
                ELSE
                        FOR _i IN 1.._count
                        LOOP
                                SELECT (EXTRACT(year from yearperiod_end)||&#39;&#39;) INTO _t
                                FROM period, yearperiod
                                WHERE ((period_id=pPeriodIds[_i])
                                AND (period_yearperiod_id=yearperiod_id));

                                _fld[_i] := _t;

                        END LOOP;
                END IF;
        END IF;


-- RETURN RESULTS

        SELECT
                flhead_id AS fltrendhead_flhead_id,
                CURRENT_USER AS fltrendhead_username,
                CASE
                        WHEN flhead_type = &#39;I&#39; THEN &#39;Income Stamement&#39;
                        WHEN flhead_type = &#39;B&#39; THEN &#39;Balance Sheet&#39;
                        WHEN flhead_type = &#39;C&#39; THEN &#39;Cash Flow Statement&#39;
                        ELSE &#39;Ad Hoc&#39;
                END AS fltrendhead_flhead_typedescrip,
                flhead_name AS fltrendhead_flhead_name INTO _p
        FROM flhead
        WHERE (flhead_id=pFlheadId);

                _row.fltrendhead_flhead_id := _p.fltrendhead_flhead_id;
                _row.fltrendhead_username := _p.fltrendhead_username;
               _row.fltrendhead_typedescrip := _p.fltrendhead_flhead_typedescrip;
                _row.fltrendhead_flhead_name := _p.fltrendhead_flhead_name;
                _row.fltrendhead_fld1 := _fld[1];
                _row.fltrendhead_fld2 := _fld[2];
                _row.fltrendhead_fld3 := _fld[3];
                _row.fltrendhead_fld4 := _fld[4];
                _row.fltrendhead_fld5 := _fld[5];
                _row.fltrendhead_fld6 := _fld[6];
                _row.fltrendhead_fld7 := _fld[7];
                _row.fltrendhead_fld8 := _fld[8];
                _row.fltrendhead_fld9 := _fld[9];
                _row.fltrendhead_fld10 := _fld[10];
                _row.fltrendhead_fld11 := _fld[11];
                _row.fltrendhead_fld12 := _fld[12];
                IF (_type IN (&#39;I&#39;,&#39;C&#39;)) THEN
                        _row.fltrendhead_grndttl := &#39;Total&#39;;
                END IF;

        RETURN NEXT _row;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getfreightclassid-text">getfreightclassid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pFreightClassCode ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pFreightClassCode IS NULL) THEN
    RETURN NULL;
  END IF;

  SELECT freightclass_id INTO _returnVal
  FROM freightclass
  WHERE (freightclass_code=pFreightClassCode);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Freight Class % not found.&#39;, pFreightClassCode;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getfreighttaxselection-integer">getfreighttaxselection( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTaxauthid ALIAS FOR $1;
  _taxtypeid INTEGER;
  _taxid INTEGER;

BEGIN
  _taxtypeid := getFreightTaxTypeId();
  SELECT taxsel_tax_id
    INTO _taxid
    FROM taxsel
   WHERE ((taxsel_taxauth_id=pTaxauthid)
     AND  (taxsel_taxtype_id=_taxtypeid));
  IF (NOT FOUND) THEN
    SELECT taxsel_tax_id
      INTO _taxid
      FROM taxsel
     WHERE ((taxsel_taxauth_id IS NULL)
       AND  (taxsel_taxtype_id=_taxtypeid));
    IF (NOT FOUND) THEN
      RETURN NULL;
    END IF;
  END IF;

  RETURN _taxid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getfreighttaxtypeid">getfreighttaxtypeid(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _taxtypeid INTEGER;
BEGIN
  SELECT taxtype_id
    INTO _taxtypeid
    FROM taxtype
   WHERE (taxtype_name=&#39;Freight&#39;);

  RETURN _taxtypeid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getgainlossaccntid">getgainlossaccntid(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _returnVal INTEGER;
BEGIN
  SELECT metric_value::INTEGER INTO _returnVal
    FROM metric
   WHERE metric_name = &#39;CurrencyGainLossAccount&#39;;
  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getglaccntid-text">getglaccntid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pGlAccnt ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pGlAccnt IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT accnt_id INTO _returnVal
  FROM accnt
  WHERE (formatglaccount(accnt_id)=pGlAccnt);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Account Number % not found.&#39;, pGlAccnt;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getimageid-text">getimageid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pImageName ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (COALESCE(TRIM(pImageName), &#39;&#39;) = &#39;&#39;) THEN
    RETURN NULL;
  END IF;

  SELECT image_id INTO _returnVal
  FROM image
  WHERE (image_name=pImageName);

  IF (_returnVal IS NULL) THEN
    RAISE EXCEPTION &#39;Image % not found.&#39;, pImageName;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getincdtcatid-text">getincdtcatid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pIncdtCatName ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pIncdtCatName IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT incdtcat_id INTO _returnVal
  FROM incdtcat
  WHERE (incdtcat_name=pIncdtCatName);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Incident Category Name % not found.&#39;, pIncdtCatName;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getincdtcrmacctid-integer">getincdtcrmacctid( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pIncidentNumber ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pIncidentNumber IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT incdt_crmacct_id INTO _returnVal
  FROM incdt
  WHERE (incdt_number=pIncidentNumber);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Incident Number % not found.&#39;, pIncidentNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getincdtpriorityid-text">getincdtpriorityid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pIncdtPriorityName ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pIncdtPriorityName IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT incdtpriority_id INTO _returnVal
  FROM incdtpriority
  WHERE (incdtpriority_name=pIncdtPriorityName);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Incident Priority Name % not found.&#39;, pIncdtPriorityName;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getincdtresolutionid-text">getincdtresolutionid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pIncdtResolutionName ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pIncdtResolutionName IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT incdtresolution_id INTO _returnVal
  FROM incdtresolution
  WHERE (incdtresolution_name=pIncdtResolutionName);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Incident Resolution Name % not found.&#39;, pIncdtResolutionName;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getincdtseverityid-text">getincdtseverityid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pIncdtSeverityName ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pIncdtSeverityName IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT incdtseverity_id INTO _returnVal
  FROM incdtseverity
  WHERE (incdtseverity_name=pIncdtSeverityName);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Incident Severity Name % not found.&#39;, pIncdtSeverityName;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getincidentid-integer">getincidentid( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pIncidentNumber ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pIncidentNumber IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT incdt_id INTO _returnVal
  FROM incdt
  WHERE (incdt_number=pIncidentNumber);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Incident Number % not found.&#39;, pIncidentNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getinvcheadid-text">getinvcheadid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pInvcNumber ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pInvcNumber IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT invchead_id INTO _returnVal
  FROM invchead
  WHERE (UPPER(invchead_invcnumber)=UPPER(pInvcNumber));

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Invoice % not found.&#39;, pInvcNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getinvcitemlotserial-integer">getinvcitemlotserial( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pInvcitemid ALIAS FOR $1;
  _lotserial text;
  _r RECORD;
  _first BOOLEAN;
  _newMethod BOOLEAN;
BEGIN
 
  --Test to see if Lot/Serial Enabled
  SELECT metric_value INTO _lotserial
  FROM metric
  WHERE ((metric_name=&#39;LotSerialControl&#39;)
  AND (metric_value =&#39;t&#39;));

  IF (FOUND) THEN
    _lotserial := &#39;&#39;;
    _first := true;

--  Two ways of doing this: old method and new method
--  First, find out if new method employed.
--  (new method is more accurate, but unfortunately no
--  way to migrate or correct old data.  Have to keep
--  old method in case someone reprints an old invoice.)

    SELECT (COUNT(*) &gt; 0) INTO _newMethod 
    FROM shipitem 
    WHERE ((shipitem_invcitem_id=pInvcitemid)
    AND (shipitem_invhist_id IS NOT NULL));

    IF (_newMethod) THEN
      FOR _r IN SELECT DISTINCT ls_number
                FROM invdetail, invhist, shipitem, ls
               WHERE ((shipitem_invcitem_id=pInvcitemid)
                 AND  (shipitem_invhist_id=invhist_id)
                 AND  (invhist_id=invdetail_invhist_id)
                 AND  (invdetail_invcitem_id=pInvcitemid)
                 AND  (invdetail_ls_id=ls_id)) LOOP
        IF (_first = false) THEN
          _lotserial := _lotserial || &#39;, &#39;;
        END IF;
        _lotserial := _lotserial || _r.ls_number;
        _first := false;
      END LOOP;

      RETURN _lotserial;
    ELSE
      -- Handle it old way
      FOR _r IN SELECT DISTINCT ls_number
                FROM ls, invdetail JOIN invhist ON (invdetail_invhist_id=invhist_id)
               WHERE ((invhist_transtype=&#39;SH&#39;)
                 AND  (invdetail_invcitem_id=pInvcitemid)
                 AND  (invdetail_ls_id=ls_id)) LOOP
        IF (_first = false) THEN
          _lotserial := _lotserial || &#39;, &#39;;
        END IF;
        _lotserial := _lotserial || _r.ls_number;
        _first := false;
      END LOOP;

      RETURN _lotserial;
    END IF;
  ELSE
    RETURN &#39;&#39;;
  END IF;
  
END
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getipsheadid-text">getipsheadid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pIpsName ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pIpsName IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT ipshead_id INTO _returnVal
  FROM ipshead
  WHERE (ipshead_name=pIpsName);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Pricing Schedule % not found.&#39;, pIpsName;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getipsitemid-text-text-numeric-text-text">getipsitemid( text, text, numeric, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pIpsName 	ALIAS FOR $1;
  pItemNumber 	ALIAS FOR $2;
  pQtyBreak	ALIAS FOR $3;
  pQtyUom	ALIAS FOR $4;
  pPriceUom	ALIAS FOR $5;
  _returnVal INTEGER;
  
BEGIN
  IF (pIpsName IS NULL AND pItemNumber IS NULL AND pQtyBreak IS NULL AND pQtyUom IS NULL AND pPriceUom IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT ipsitem_id INTO _returnVal
  FROM ipsitem
  WHERE ((ipsitem_ipshead_id=getIpsheadId(pIpsName))
  AND (ipsitem_item_id=getItemId(pItemNumber))
  AND (ipsitem_qtybreak=pQtyBreak)
  AND (ipsitem_qty_uom_id=getUomId(pQtyUom))
  AND (ipsitem_price_uom_id=getUomId(pPriceUom)));

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Pricing Schedule Item for Schedule %, Item %,Qt Break %,Qty UOM %, Price UOM % not found.&#39;, 
	pIpsName, pItemNumber, pQtyBreak, pQtyUom, pPriceUom;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getipsprodcatid-text-text-numeric">getipsprodcatid( text, text, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pIpsName 	ALIAS FOR $1;
  pProdCat 	ALIAS FOR $2;
  pQtyBreak	ALIAS FOR $3;
  _returnVal INTEGER;
  
BEGIN
  IF (pIpsName IS NULL AND pProdCat IS NULL AND pQtyBreak IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT ipsprodcat_id INTO _returnVal
  FROM ipsprodcat
  WHERE ((ipsprodcat_ipshead_id=getIpsheadId(pIpsName))
  AND (ipsprodcat_prodcat_id=getProdcatId(pProdCat))
  AND (ipsprodcat_qtybreak=pQtyBreak));

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Pricing Schedule Product Category for Schedule %, Product Category %,Qt Break % not found.&#39;, 
	pIpsName, pProdCat, pQtyBreak;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getitemid-text">getitemid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemNumber ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pItemNumber IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT item_id INTO _returnVal
  FROM item
  WHERE (item_number=UPPER(pItemNumber));

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Item % not found.&#39;, pItemNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getitemsiteid-text-text">getitemsiteid( text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWarehouseCode ALIAS FOR $1;
  pItemNumber ALIAS FOR $2;
  _returnVal INTEGER;
BEGIN
  SELECT getItemsiteId(pWarehouseCode,pItemNumber,&#39;ALL&#39;) INTO _returnVal;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getitemsiteid-text-text-text">getitemsiteid( text, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWarehouseCode ALIAS FOR $1;
  pItemNumber ALIAS FOR $2;
  pType ALIAS FOR $3;
  _type TEXT;
  _p RECORD;
BEGIN
  IF ((pWarehouseCode IS NULL) OR (pItemNumber IS NULL)) THEN
	RETURN NULL;
  END IF;
 
  IF UPPER(pType) NOT IN (&#39;ALL&#39;,&#39;ACTIVE&#39;,&#39;SOLD&#39;) THEN
    RAISE EXCEPTION &#39;Invalid Type %. Valid Itemsite types are ALL and SOLD&#39;, pType;
  END IF;

  SELECT * INTO _p
  FROM itemsite, item
  WHERE ((itemsite_item_id=item_id)
  AND (itemsite_warehous_id=getWarehousId(pWarehouseCode,&#39;ALL&#39;))
  AND (item_number=UPPER(pItemNumber)));

  IF NOT (FOUND) THEN
    RAISE EXCEPTION &#39;Item % not found in Warehouse %&#39;, pItemNumber, pWarehouseCode;
  ELSIF ((UPPER(pType)=&#39;ACTIVE&#39;) OR (UPPER(pType)=&#39;SOLD&#39;)) THEN
    IF NOT (_p.item_active) THEN
      RAISE EXCEPTION &#39;Item % is inactive.&#39;, pItemNumber;
    ELSE
      IF NOT (_p.itemsite_active) THEN
        RAISE EXCEPTION &#39;Item % is inactive in Warehouse %&#39;, pItemNumber, pWarehouseCode;
      ELSE
        IF ((UPPER(pType)=&#39;SOLD&#39;) AND NOT _p.item_sold) THEN
          RAISE EXCEPTION &#39;Item % is not sold&#39;, pItemNumber;
        ELSE
          IF ((UPPER(pType)=&#39;SOLD&#39;) AND NOT _p.itemsite_sold) THEN
            RAISE EXCEPTION &#39;Item % is not sold from Warehouse %&#39;, pItemNumber, pWarehouseCode;
          END IF;
        END IF;
      END IF;
    END IF;
  END IF;

  RETURN _p.itemsite_id;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getitemsrcid-text-text">getitemsrcid( text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemNumber ALIAS FOR $1;
  pVendNumber ALIAS FOR $2;
  _returnVal INTEGER;
BEGIN
  IF ((pItemNumber IS NULL) OR (pVendNumber IS NULL)) THEN
    RETURN NULL;
  END IF;

  SELECT itemsrc_id INTO _returnVal
  FROM itemsrc
  WHERE ((itemsrc_item_id=getItemId(pItemNumber))
  AND (itemsrc_vend_id=getVendId(pVendNumber)));

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Item Source Item % Vendor % not found.&#39;, pItemNumber,pVendNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getitemtaxtype-integer-integer">getitemtaxtype( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pTaxauthid ALIAS FOR $2;
  _taxtypeid INTEGER;
BEGIN
  SELECT itemtax_taxtype_id
    INTO _taxtypeid
    FROM itemtax
   WHERE ((itemtax_item_id=pItemid)
     AND  (itemtax_taxauth_id=pTaxauthid));
  IF (NOT FOUND) THEN
    SELECT itemtax_taxtype_id
      INTO _taxtypeid
      FROM itemtax
     WHERE ((itemtax_item_id=pItemid)
       AND  (itemtax_taxauth_id IS NULL));
    IF (NOT FOUND) THEN
      RETURN NULL;
    END IF;
  END IF;

  RETURN _taxtypeid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getlasttrialbalid-integer-integer">getlasttrialbalid( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pAccntId ALIAS FOR $1;
  pPeriodId ALIAS FOR $2;
  _p RECORD;
  _accntType TEXT;
  _result NUMERIC;

BEGIN

  SELECT period_end,period_yearperiod_id INTO _p
  FROM period
  WHERE period_id=pPeriodId;

  SELECT accnt_type INTO _accntType
  FROM accnt
  WHERE accnt_id=pAccntId;

  IF (_accntType IN (&#39;R&#39;,&#39;E&#39;)) THEN
	SELECT trialbal_id INTO _result
	FROM trialbal
	WHERE ((trialbal_accnt_id=pAccntId)
	AND (trialbal_period_id=pPeriodId));
  ELSE
	SELECT trialbal_id INTO _result
	FROM (SELECT trialbal_id
		FROM trialbal,period
		WHERE ((trialbal_accnt_id=pAccntId)
		AND (trialbal_period_id=period_id)
		AND (period_end &lt;= _p.period_end)
		AND (period_yearperiod_id=_p.period_yearperiod_id))
  		ORDER BY period_end DESC) AS data;
  END IF;

  RETURN _result;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getlocationid-text-text">getlocationid( text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWarehouse ALIAS FOR $1;
  pLocation ALIAS FOR $2;
  _returnVal INTEGER;
BEGIN
  IF (pLocation IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT location_id INTO _returnVal
  FROM location
  WHERE ((location_warehous_id=getWarehousId(pWarehouse,&#39;ACTIVE&#39;))
  AND (formatLocationname(location_id)=pLocation))
  LIMIT 1;

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Location % not found in Warehouse %.&#39;, pLocation, pWarehouse;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getlotserialid-text-text">getlotserialid( text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemNumber ALIAS FOR $1;
  pLotSerialNumber ALIAS FOR $2;
  _returnVal INTEGER;
BEGIN
  IF ((pItemNumber IS NULL) OR (pLotSerialNumber IS NULL) OR (pLotSerialNumber=&#39;&#39;)) THEN
	RETURN NULL;
  END IF;

  SELECT ls_id INTO _returnVal
  FROM ls
  WHERE ((ls_item_id=getItemId(pItemNumber))
  AND (UPPER(ls_number)=UPPER(pLotSerialNumber)));

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;LotSerial % not found.&#39;, pLotSerialNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getopheadid-text">getopheadid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pOpHeadName ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  
  IF (pOpHeadName IS NULL) THEN
    RETURN NULL;
  END IF;

  SELECT ophead_id INTO _returnVal
  FROM ophead
  WHERE (UPPER(ophead_name)=UPPER(pOpHeadName));
  
  IF (_returnVal IS NULL) THEN
      RAISE EXCEPTION &#39;Opportunity % not found.&#39;, pOpHeadName;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getpacklistcharname-integer-integer">getpacklistcharname( integer, integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pShipheadId ALIAS FOR $1;
  pOrderItemId ALIAS FOR $2;
  _charname text;
  _r RECORD;
  _first BOOLEAN;
  
BEGIN

-- If transfer order, get out
  SELECT shiphead_order_type INTO _r
  FROM shiphead
  WHERE ((shiphead_id=pShipheadId)
  AND (shiphead_order_type=&#39;TO&#39;));
  
  IF (FOUND) THEN
    RETURN &#39;&#39;;
  END IF;

  _charname := &#39;&#39;;
  _first := true;

  FOR _r IN SELECT char_name
            FROM char, charass
            WHERE ((char_id=charass_char_id)
            AND (charass_target_type=&#39;SI&#39;)
            AND (charass_target_id=pOrderItemId)) 
  LOOP
        IF (_first = false) THEN
          _charname := _charname || &#39;
&#39;;
        END IF;
        _charname := _charname || _r.char_name;
        _first := false;
  END LOOP;

  RETURN _charname;
  
END
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getpacklistcharvalue-integer-integer">getpacklistcharvalue( integer, integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pShipheadId ALIAS FOR $1;
  pOrderItemId ALIAS FOR $2;
  _charval text;
  _r RECORD;
  _first BOOLEAN;
  
BEGIN

-- If transfer order, get out
  SELECT shiphead_order_type INTO _r
  FROM shiphead
  WHERE ((shiphead_id=pShipheadId)
  AND (shiphead_order_type=&#39;TO&#39;));
  
  IF (FOUND) THEN
    RETURN &#39;&#39;;
  END IF;

  _charval := &#39;&#39;;
  _first := true;

  FOR _r IN SELECT charass_value
            FROM char, charass
            WHERE ((char_id=charass_char_id)
            AND (charass_target_type=&#39;SI&#39;)
            AND (charass_target_id=pOrderItemId)) 
  LOOP
        IF (_first = false) THEN
          _charval := _charval || &#39;
&#39;;
        END IF;
        _charval := _charval || _r.charass_value;
        _first := false;
  END LOOP;

  RETURN _charval;
  
END
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getpacklistitemlotserial-integer-integer">getpacklistitemlotserial( integer, integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pShipheadId ALIAS FOR $1;
  pOrderItemId ALIAS FOR $2;
  _lotserial text;
  _r RECORD;
  _first BOOLEAN;
  
BEGIN
 
  --Test to see if Lot/Serial Enabled
  SELECT metric_value INTO _lotserial
  FROM metric
  WHERE ((metric_name=&#39;LotSerialControl&#39;)
  AND (metric_value =&#39;t&#39;));

  IF (FOUND) THEN
    _lotserial := &#39;&#39;;
    _first := true;

    FOR _r IN SELECT DISTINCT ls_number
              FROM invdetail, invhist, shipitem, ls
             WHERE ((shipitem_shiphead_id=pShipheadId)
               AND  (shipitem_orderitem_id=pOrderItemId)
               AND  (shipitem_invhist_id=invhist_id)
               AND  (invhist_id=invdetail_invhist_id)
               AND  (invdetail_ls_id=ls_id)) LOOP
      IF (_first = false) THEN
        _lotserial := _lotserial || &#39;, &#39;;
      END IF;
      _lotserial := _lotserial || _r.ls_number;
      _first := false;
    END LOOP;

    RETURN _lotserial;
  ELSE
    RETURN &#39;&#39;;
  END IF;
  
END
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getperiodid-integer-bpchar">getperiodid( integer, bpchar )</a>
		</h2>
<h3>Returns: SET OF integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPeriodId ALIAS FOR $1;
  pInterval ALIAS FOR $2;
  _x RECORD;
BEGIN

-- Validate Interval
   IF pInterval &lt;&gt; &#39;M&#39; AND pInterval &lt;&gt; &#39;Q&#39; AND pInterval &lt;&gt; &#39;Y&#39; THEN
     RAISE EXCEPTION &#39;Invalid Interval --&gt; %&#39;, pInterval;
   END IF;

   IF pInterval=&#39;M&#39; THEN
       RETURN NEXT pPeriodId;
     ELSE IF pInterval=&#39;Q&#39; THEN
        FOR _x IN SELECT qp.period_id AS period_id
                FROM period cp, period qp
                WHERE ((cp.period_id=pPeriodId)
                AND (cp.period_yearperiod_id=qp.period_yearperiod_id)
                AND (cp.period_quarter=qp.period_quarter)
                AND (cp.period_start&gt;=qp.period_start))
        ORDER BY qp.period_start
        LOOP
                RETURN NEXT _x.period_id;
        END LOOP;
     ELSE
        FOR _x IN SELECT yp.period_id AS period_id
                FROM period cp, period yp
                WHERE ((cp.period_id=pPeriodId)
                AND (cp.period_yearperiod_id=yp.period_yearperiod_id)
                AND (cp.period_start&gt;=yp.period_start))
        ORDER BY yp.period_start
        LOOP
                RETURN NEXT _x.period_id;
        END LOOP;
     END IF;
   END IF;
  RETURN;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getpkgheadid-text">getpkgheadid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  ppkgname ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (ppkgname IS NULL) THEN
    RETURN NULL;
  END IF;

  SELECT pkghead_id INTO _returnVal
  FROM pkghead
  WHERE (UPPER(pkghead_name)=UPPER(ppkgname));

  IF (_returnVal IS NULL) THEN
    RAISE EXCEPTION &#39;Package % not found.&#39;, ppkgname;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getplancodeid-text">getplancodeid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPlanCode ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pPlanCode IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT plancode_id INTO _returnVal
  FROM plancode
  WHERE (plancode_code=pPlanCode);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Plan Code % not found.&#39;, pPlanCode;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getpoheadid-text">getpoheadid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPurchaseOrderNumber ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pPurchaseOrderNumber IS NULL) THEN
    RETURN NULL;
  END IF;

  SELECT pohead_id INTO _returnVal
  FROM pohead
  WHERE (pohead_number=pPurchaseOrderNumber);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Purchase Order % not found.&#39;, pPurchaseOrderNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getpoitemid-text-integer">getpoitemid( text, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPurchaseOrderNumber	ALIAS FOR $1;
  pLineNumber 	    	ALIAS FOR $2;
  _returnVal 		INTEGER;
BEGIN
  IF (pPurchaseOrderNumber IS NULL OR pLineNumber IS NULL) THEN
    RETURN NULL;
  END IF;

  SELECT poitem_id INTO _returnVal
  FROM pohead, poitem
  WHERE ((pohead_number=pPurchaseOrderNumber)
  AND (poitem_pohead_id=pohead_id)
  AND (poitem_linenumber=pLineNumber));

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Purchase Order % not found.&#39;, pSalesOrderNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getprjid-text">getprjid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPrjNumber ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pPrjNumber IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT prj_id INTO _returnVal
  FROM prj
  WHERE (prj_number=pPrjNumber);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Project Number % not found.&#39;, pPrjNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getprodcatid-text">getprodcatid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pProdCat ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pProdCat IS NULL) THEN
    RETURN NULL;
  END IF;

  SELECT prodcat_id INTO _returnVal
  FROM prodcat
  WHERE (prodcat_code=pProdCat);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Product Category % not found.&#39;, pProdCat;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getprospectid-text">getprospectid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pProspectNumber ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pProspectNumber IS NULL) THEN
    RETURN NULL;
  END IF;

  SELECT prospect_id INTO _returnVal
    FROM prospect
   WHERE(UPPER(prospect_number)=UPPER(pProspectNumber));
  IF (_returnVal IS NULL) THEN
    RAISE EXCEPTION &#39;Prospect Number % found.&#39;, pProspectNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getquoteid-text">getquoteid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pQuoteNumber ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pQuoteNumber IS NULL) THEN
    RETURN NULL;
  END IF;

  SELECT quhead_id INTO _returnVal
  FROM quhead
  WHERE (quhead_number=CAST(pQuoteNumber AS integer));

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Quote Number % not found.&#39;, pQuoteNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getquotelineitemid-text-integer">getquotelineitemid( text, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pQuoteNumber ALIAS FOR $1;
  pLineNumber ALIAS FOR $2;
  _returnVal INTEGER;
BEGIN
  IF ((pQuoteNumber IS NULL) OR (pLineNumber IS NULL)) THEN
    RETURN NULL;
  END IF;

  SELECT quitem_id INTO _returnVal
  FROM quhead, quitem
  WHERE ((quhead_number=pQuoteNumber)
  AND (quhead_id=quitem_quhead_id)
  AND (quitem_linenumber=pLineNumber));

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Quote Line Item %-%not found.&#39;, pQuoteNumber,pLineNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getrevid-text-text-text">getrevid( text, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pType ALIAS FOR $1;
  pItemNumber ALIAS FOR $2;
  pRevision ALIAS FOR $3;
  _returnVal INTEGER;
BEGIN
  IF (pItemNumber IS NULL) THEN
    RETURN NULL;
  END IF;

  IF (NOT fetchMetricBool(&#39;RevControl&#39;)) THEN
    RETURN -1;
  ELSIF ( (pRevision IS NULL) OR (LENGTH(pRevision)=0) ) THEN
    SELECT getActiveRevId(pType, getItemId(pItemNumber)) INTO _returnVal;
  ELSE
    IF (pType=&#39;BOM&#39;) THEN
      SELECT rev_id INTO _returnVal
      FROM item, bomhead, rev
      WHERE ((item_id=bomhead_item_id)
      AND (bomhead_rev_id=rev_id)
      AND (UPPER(item_number)=UPPER(pItemNumber))
      AND (rev_number=pRevision));
    ELSIF (pType=&#39;BOO&#39;) THEN
      SELECT rev_id INTO _returnVal
      FROM item, boohead, rev
      WHERE ((item_id=boohead_item_id)
      AND (boohead_rev_id=rev_id)
      AND (UPPER(item_number)=UPPER(pItemNumber))
      AND (rev_number=pRevision));   
    ELSE
      RAISE EXCEPTION &#39;Invalid Revision Type.&#39;;
    END IF;
  END IF;
    
  IF (_returnVal IS NULL) THEN
    RAISE EXCEPTION &#39;% revision % for % not found.&#39;, pType, pRevision, pItemNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getrsnid-text">getrsnid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pRsnCode ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pRsnCode IS NULL) THEN
    RETURN NULL;
  END IF;

  SELECT rsncode_id INTO _returnVal
  FROM rsncode
  WHERE (rsncode_code=pRsnCode);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Reason Code % not found.&#39;, pRsnCode;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getsalescatid-text">getsalescatid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSalesCatName ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pSalesCatName IS NULL) THEN
    RETURN NULL;
  END IF;

  SELECT salescat_id INTO _returnVal
  FROM salescat
  WHERE (salescat_name=pSalesCatName);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Sales Category % not found.&#39;, pSalesCatName;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getsaleslineitemid-text">getsaleslineitemid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSalesOrderItem ALIAS FOR $1;
  _delpos INTEGER = 0;
  _order TEXT;
  _part TEXT;
  _ln INTEGER;
  _sn INTEGER;
BEGIN
  IF (pSalesOrderItem IS NULL) THEN
    RETURN NULL;
  END IF;
  _delpos := strpos(pSalesOrderItem, &#39;-&#39;);
  IF (_delpos &gt; 0) THEN
    _order := substr(pSalesOrderItem, 1, (_delpos - 1));
    _part := substr(pSalesOrderItem, (_delpos + 1));
    _delpos := strpos(_part, &#39;.&#39;);
    IF (_delpos &gt; 0) THEN
      _ln := CAST(substr(_part, 1, (_delpos - 1)) AS INTEGER);
      _sn := CAST(substr(_part, (_delpos + 1)) AS INTEGER);
    ELSE
      _ln := CAST(_part AS INTEGER);
      _sn := 0;
    END IF;
    RETURN getSalesLineItemId( _order, _ln, _sn );
  END IF;
  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getsaleslineitemid-text-integer">getsaleslineitemid( text, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN getSalesLineItemId($1, $2, 0);
END
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getsaleslineitemid-text-integer-integer">getsaleslineitemid( text, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSalesOrderNumber ALIAS FOR $1;
  pLineNumber ALIAS FOR $2;
  pSubNumber ALIAS FOR $3;
  _returnVal INTEGER;
BEGIN
  IF ((pSalesOrderNumber IS NULL) OR (pLineNumber IS NULL)) THEN
    RETURN NULL;
  END IF;

  SELECT coitem_id INTO _returnVal
  FROM cohead, coitem
  WHERE ((cohead_number=pSalesOrderNumber)
  AND (cohead_id=coitem_cohead_id)
  AND (coitem_linenumber=pLineNumber)
  AND (coitem_subnumber=pSubNumber));

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Sales Line Item %-%not found.&#39;, pSalesOrderNumber,pLineNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getsalesorderid-text">getsalesorderid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSalesOrderNumber ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pSalesOrderNumber IS NULL) THEN
    RETURN NULL;
  END IF;

  SELECT cohead_id INTO _returnVal
  FROM cohead
  WHERE (cohead_number=pSalesOrderNumber);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Sales Order Number % not found.&#39;, pSalesOrderNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getsalesrepid-text">getsalesrepid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSalesRepNumber ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pSalesRepNumber IS NULL) THEN
    RETURN NULL;
  END IF;

  SELECT salesrep_id INTO _returnVal
  FROM salesrep
  WHERE (salesrep_number=pSalesRepNumber);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Sales Rep Number % not found.&#39;, pSalesRepNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getshiftid-text">getshiftid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pShiftNumber ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (COALESCE(TRIM(pShiftNumber), &#39;&#39;) = &#39;&#39;) THEN
      RETURN NULL;
  END IF;

  SELECT shift_id INTO _returnVal
  FROM shift
  WHERE (UPPER(shift_number)=UPPER(pShiftNumber));

  IF (_returnVal IS NULL) THEN
    RAISE EXCEPTION &#39;Shift % not found.&#39;, pShiftNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getshipchrgid-text">getshipchrgid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pShipChrgName ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pShipChrgName IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT shipchrg_id INTO _returnVal
  FROM shipchrg
  WHERE (shipchrg_name=pShipChrgName);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Ship Charge % not found.&#39;, pShipChrgName;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getshipformid-text">getshipformid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pShipFormName ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pShipFormName IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT shipform_id INTO _returnVal
  FROM shipform
  WHERE (shipform_name=pShipFormName) LIMIT 1;

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Ship Form % not found.&#39;, pShipFormName;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getshipheadid-text">getshipheadid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pShipmentNumber ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pShipmentNumber IS NULL OR pShipmentNumber = &#39;&#39;) THEN
    RETURN NULL;
  END IF;

  SELECT shiphead_id INTO _returnVal
  FROM shiphead
  WHERE (shiphead_number=pShipmentNumber);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Shipment % not found.&#39;, pShipmentNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getshiptoid-text-text">getshiptoid( text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustNumber ALIAS FOR $1;
  pShiptoNumber ALIAS FOR $2;
  _returnVal INTEGER;
BEGIN
  IF ((pCustNumber IS NULL) OR (pShiptoNumber IS NULL)) THEN
	RETURN NULL;
  END IF;

  SELECT shipto_id INTO _returnVal
  FROM shiptoinfo
  WHERE ((shipto_cust_id=getCustId(pCustNumber,true))
  AND (UPPER(shipto_num)=UPPER(pShiptoNumber)));

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Shipto % not found.&#39;, pShiptoNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getshiptonumberfrominfo-text-text-text-text-text-text-text-text-text-text-text-text-text-boolean-boolean">getshiptonumberfrominfo( text, text, text, text, text, text, text, text, text, text, text, text, text, boolean, boolean )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _custname	TEXT	:= COALESCE(TRIM(UPPER( $1)), &#39;&#39;);
  _email	TEXT	:= COALESCE(TRIM(UPPER( $2)), &#39;&#39;);
  _company	TEXT	:= COALESCE(TRIM(UPPER( $3)), &#39;&#39;);
  _first	TEXT	:= COALESCE(TRIM(UPPER( $4)), &#39;&#39;);
  _last		TEXT	:= COALESCE(TRIM(UPPER( $5)), &#39;&#39;);
  _fullname	TEXT	:= COALESCE(TRIM(UPPER( $6)), &#39;&#39;);
  _addr1	TEXT	:= COALESCE(TRIM(UPPER( $7)), &#39;&#39;);
  _addr2	TEXT	:= COALESCE(TRIM(UPPER( $8)), &#39;&#39;);
  _addr3	TEXT	:= COALESCE(TRIM(UPPER( $9)), &#39;&#39;);
  _city		TEXT	:= COALESCE(TRIM(UPPER($10)), &#39;&#39;);
  _state	TEXT	:= COALESCE(TRIM(UPPER($11)), &#39;&#39;);
  _postalcode	TEXT	:= COALESCE(TRIM(UPPER($12)), &#39;&#39;);
  _country	TEXT	:= COALESCE(TRIM(UPPER($13)), &#39;&#39;);
  _generate	BOOLEAN	:= COALESCE($14, FALSE);
  _create	BOOLEAN	:= COALESCE($15, FALSE);

  _citytrunc	TEXT;
  _counter	INTEGER;
  _custid	INTEGER;
  _custnumber	TEXT;
  _candidate	TEXT;
  _r		RECORD;
  _statetrunc	TEXT;
BEGIN
  IF (_custname = &#39;&#39;) THEN
    _custname := getCustNameFromInfo(_email, _company, _first, _last,
				     _fullname, FALSE);
  END IF;

  SELECT COUNT(*) INTO _counter
  FROM cust, shiptoinfo, addr
  WHERE ((cust_name=_custname)
    AND  (cust_id=shipto_cust_id)
    AND  (shipto_addr_id=addr_id));

  IF (_counter = 1) THEN
    SELECT shipto_num INTO _candidate
    FROM cust, shiptoinfo, addr
    WHERE ((cust_name=_custname)
      AND  (cust_id=shipto_cust_id)
      AND  (shipto_addr_id=addr_id));

    RETURN _candidate;

  ELSIF (_counter &gt; 1) THEN
    SELECT shipto_num,
	   CASE WHEN (UPPER(addr_country)    = _country)    THEN 1 ELSE 0 END +
	   CASE WHEN (UPPER(addr_postalcode) = _postalcode) THEN 1 ELSE 0 END +
	   CASE WHEN (UPPER(addr_state)      = _state)      THEN 1 ELSE 0 END +
	   CASE WHEN (UPPER(addr_city)       = _city)       THEN 1 ELSE 0 END +
	   CASE WHEN (UPPER(addr_line3)      = _line3)      THEN 1 ELSE 0 END +
	   CASE WHEN (UPPER(addr_line2)      = _line2)      THEN 1 ELSE 0 END +
	   CASE WHEN (UPPER(addr_line1)      = _line1)      THEN 1 ELSE 0 END
	   AS maxquotient INTO _candidate, _counter
    FROM cust, shiptoinfo, addr
    WHERE ((cust_name=_custname)
      AND  (cust_id=shipto_cust_id)
      AND  (shipto_addr_id=addr_id))
    ORDER BY maxquotient
    LIMIT 1;

    RETURN _candidate;
  END IF;

  IF (_generate) THEN
    SELECT cust_number, cust_id INTO _custnumber, _custid
    FROM custinfo
    WHERE (cust_name=_custname);

    -- keep the number short
    _citytrunc := SUBSTRING(_city FOR 5);
    _statetrunc := SUBSTRING(_state FOR 5);

    IF (LENGTH(_citytrunc) &gt; 0 AND NOT EXISTS(SELECT UPPER(shipto_num)
		      FROM shiptoinfo
		      WHERE ((shipto_cust_id=_custid)
		        AND  (UPPER(shipto_num)=_citytrunc)) )) THEN
      _candidate := _citytrunc;
    ELSIF (LENGTH(_last || _citytrunc) &gt; 0 AND NOT EXISTS(SELECT UPPER(shipto_num)
		      FROM shiptoinfo
		      WHERE ((shipto_cust_id=_custid)
		        AND  (UPPER(shipto_num)=_last || _citytrunc)) )) THEN
      _candidate := _last || _citytrunc;
    ELSIF (LENGTH(_statetrunc) &gt; 0 AND NOT EXISTS(SELECT UPPER(shipto_num)
		   FROM shiptoinfo
		   WHERE ((shipto_cust_id=_custid)
		     AND  (UPPER(shipto_num)=_statetrunc)) )) THEN
      _candidate := _statetrunc;
    ELSIF (LENGTH(_last || _statetrunc) &gt; 0 AND NOT EXISTS(SELECT UPPER(shipto_num)
		   FROM shiptoinfo
		   WHERE ((shipto_cust_id=_custid)
		     AND  (UPPER(shipto_num)=_last || _statetrunc)) )) THEN
      _candidate := _last || _statetrunc;

    ELSIF (LENGTH(_citytrunc || _statetrunc) &gt; 0 AND NOT EXISTS(SELECT UPPER(shipto_num)
		      FROM shiptoinfo
		      WHERE ((shipto_cust_id=_custid)
		        AND  (UPPER(shipto_num)=_citytrunc || _statetrunc)) )) THEN
      _candidate := _citytrunc || _statetrunc;

    ELSE
      SELECT CAST(COALESCE(MAX(CAST(shipto_num AS INTEGER)), 0) + 1 AS TEXT)
	  INTO _candidate
      FROM shiptoinfo
      WHERE ((shipto_cust_id=_custid)
       AND   (shipto_num~&#39;^[0-9]*$&#39;));
    END IF;

    IF (_create) THEN
      INSERT INTO api.custshipto (
	customer_number, shipto_number, name,
	address1, address2, address3,
	city, state, postal_code, country, address_change,
	first, last, email,
	edi_profile
      ) VALUES (
	_custnumber, _candidate, _candidate,
	_addr1, _addr2, _addr3,
	_city, _state, _postalcode, _country, &#39;CHANGEONE&#39;,
	_first, _last, LOWER(_email),
	&#39;No EDI&#39;
      );
    END IF;

    RETURN _candidate;
  END IF;

  RETURN &#39;&#39;;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getshipviaid-text">getshipviaid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pShipViaCode ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pShipViaCode IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT shipvia_id INTO _returnVal
  FROM shipvia
  WHERE (shipvia_code=pShipViaCode);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;ShipVia Code % not found.&#39;, pShipViaCode;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getshipzoneid-text">getshipzoneid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pShipZoneName ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pShipZoneName IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT shipzone_id INTO _returnVal
  FROM shipzone
  WHERE (shipzone_name=pShipZoneName);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Ship Zone % not found.&#39;, pShipZoneName;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getsitetypeid-text">getsitetypeid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSiteType ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pSiteType IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT sitetype_id INTO _returnVal
  FROM sitetype
  WHERE (sitetype_name=pSiteType);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Site Type % not found.&#39;, pSiteType;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.gettaxauthid-text">gettaxauthid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTaxAuthCode ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pTaxAuthCode IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT taxauth_id INTO _returnVal
  FROM taxauth
  WHERE (taxauth_code=pTaxAuthCode);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Tax Authority % not found.&#39;, pTaxAuthCode;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.gettaxid-text">gettaxid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTaxCode ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pTaxCode IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT tax_id INTO _returnVal
  FROM tax
  WHERE (tax_code=pTaxCode);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Tax Code % not found.&#39;, pTaxCode;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.gettaxselection-integer-integer">gettaxselection( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTaxauthid ALIAS FOR $1;
  pTaxtypeid ALIAS FOR $2;
  _taxid INTEGER;

BEGIN
  IF( (COALESCE(pTaxauthid, -1) = -1) OR (COALESCE(pTaxtypeid,-1) = -1) ) THEN
    RETURN NULL;
  END IF;

  SELECT taxsel_tax_id
    INTO _taxid
    FROM taxsel
   WHERE ((taxsel_taxauth_id=pTaxauthid)
     AND  (taxsel_taxtype_id=pTaxtypeid));
  IF (NOT FOUND) THEN
    SELECT taxsel_tax_id
      INTO _taxid
      FROM taxsel
     WHERE ((taxsel_taxauth_id IS NULL)
       AND  (taxsel_taxtype_id=pTaxtypeid));
    IF (NOT FOUND) THEN
      SELECT taxsel_tax_id
        INTO _taxid
        FROM taxsel
       WHERE ((taxsel_taxauth_id=pTaxauthid)
         AND  (taxsel_taxtype_id IS NULL));
      IF (NOT FOUND) THEN
        SELECT taxsel_tax_id
          INTO _taxid
          FROM taxsel
         WHERE ((taxsel_taxauth_id IS NULL)
           AND  (taxsel_taxtype_id IS NULL));
        IF (NOT FOUND) THEN
          RETURN NULL;
        END IF;
      END IF;
    END IF;
  
  END IF;

  RETURN _taxid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.gettaxtypeid-text">gettaxtypeid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTaxType ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pTaxType IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT taxtype_id INTO _returnVal
  FROM taxtype
  WHERE (taxtype_name=pTaxType);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Tax Type % not found.&#39;, pTaxType;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.gettermsid-text">gettermsid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTermsCode ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pTermsCode IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT terms_id INTO _returnVal
  FROM terms
  WHERE (terms_code=pTermsCode);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Terms Code % not found.&#39;, pTermsCode;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getuomid-text">getuomid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUom ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pUom IS NULL) THEN
    RETURN NULL;
  END IF;

  SELECT uom_id INTO _returnVal
  FROM uom
  WHERE (uom_name=pUom);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Unit of Measure % not found.&#39;, pUom;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getuomtypeid-text">getuomtypeid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUomType ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pUomType IS NULL) THEN
	RETURN NULL;
  END IF;

  SELECT uomtype_id INTO _returnVal
  FROM uomtype
  WHERE (UPPER(uomtype_name)=UPPER(pUomType));

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Unit of Measuer Type % not found.&#39;, pUomType;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getuomtypeid-textARRAY">getuomtypeid( text[] )</a>
		</h2>
<h3>Returns: integer[]</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUomTypes ALIAS FOR $1;
  _returnVal INTEGER[];
  _val INTEGER;
  _i INTEGER;
BEGIN
  IF (pUomTypes IS NULL) OR (ARRAY_UPPER(pUomTypes,1) = 0) THEN
	RETURN NULL;
  END IF;

  FOR _i IN 1..ARRAY_UPPER(pUomTypes,1)
  LOOP
    SELECT uomtype_id INTO _val
    FROM uomtype
    WHERE (UPPER(uomtype_name)=UPPER(pUomTypes[_i]));

    IF (_val IS NULL) THEN
	RAISE EXCEPTION &#39;Unit of Measure Type % not found.&#39;, pUomTypes[_i];
    ELSE
      _returnVal[_i] := _val;
    END IF;
  END LOOP;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getusername-integer">getusername( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUserid ALIAS FOR $1;
  _username TEXT;

BEGIN

  SELECT usename INTO _username
  FROM pg_user
  WHERE (usesysid=pUserid);

  IF (FOUND) THEN
    RETURN _username;
  END IF;

  RETURN &#39;?&#39;;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getusrid-text">getusrid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUsername ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (COALESCE(TRIM(pUsername), &#39;&#39;) = &#39;&#39;) THEN
    RETURN NULL;
  END IF;

  SELECT usr_id INTO _returnVal
  FROM usr
  WHERE (UPPER(usr_username)=UPPER(pUsername));

  IF (_returnVal IS NULL) THEN
    RAISE EXCEPTION &#39;User % not found.&#39;, pUsername;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getvendaddrid-text-text">getvendaddrid( text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendNumber   ALIAS FOR $1;
  pVendAddrCode ALIAS FOR $2;
  _returnVal INTEGER;
BEGIN
  IF ( (pVendNumber IS NULL) OR (pVendAddrCode IS NULL) ) THEN
    RETURN NULL;
  END IF;

  SELECT vendaddr_id INTO _returnVal
  FROM vendaddr, vendinfo
  WHERE ( (vendaddr_code=pVendAddrCode)
    AND   (vend_id=vendaddr_vend_id)
    AND   (vend_number=pVendNumber) );

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Vendor Number % Address % not found.&#39;, pVendNumber, pVendAddrCode;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getvendid-text">getvendid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendNumber ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pVendNumber IS NULL) THEN
    RETURN NULL;
  END IF;

  SELECT vend_id INTO _returnVal
  FROM vend
  WHERE (vend_number=pVendNumber);

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Vendor Number % not found.&#39;, pVendNumber;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getvendtypeid-text">getvendtypeid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendTypeCode ALIAS FOR $1;
  _returnVal INTEGER;
BEGIN
  IF (pVendTypeCode IS NULL) THEN
    RETURN NULL;
  END IF;

  SELECT vendtype_id INTO _returnVal
  FROM vendtype
  WHERE (UPPER(vendtype_code)=UPPER(pVendTypeCode));

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Vendor Type % not found.&#39;, pVendTypeCode;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getwarehousid-text-text">getwarehousid( text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWarehousCode ALIAS FOR $1;
  pType ALIAS FOR $2;
  _active BOOL;
  _shipping BOOL;
  _returnVal INTEGER;
BEGIN
  IF (pWarehousCode IS NULL) THEN
	RETURN NULL;
  END IF;
 
  IF (UPPER(pType) NOT IN (&#39;ALL&#39;,&#39;ACTIVE&#39;,&#39;SHIPPING&#39;)) THEN
    	RAISE EXCEPTION &#39;Warehouse lookip type % not valid. Valid types are ALL, ACTIVE and SHIPPING&#39;, pType;
  END IF;

  SELECT warehous_id, warehous_active, warehous_shipping INTO _returnVal, _active, _shipping
  FROM site()
  WHERE (warehous_code=UPPER(pWarehousCode));

  IF (_returnVal IS NULL) THEN
    RAISE EXCEPTION &#39;Warehouse Code % not found.&#39;, pWarehousCode;
    ELSE IF ((pType=&#39;SHIPPING&#39;) AND (_shipping=false)) THEN
      RAISE EXCEPTION &#39;Warehouse Code % is not a vaild shipping warehouse.&#39;, pWarehousCode;
      ELSE IF ((pType IN (&#39;SHIPPING&#39;,&#39;ACTIVE&#39;)) AND (_active=false)) THEN
        RAISE EXCEPTION &#39;Warehouse Code % is inactive.&#39;, pWarehousCode;
      END IF;
    END IF;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.getwhsezoneid-text-text">getwhsezoneid( text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWhseCode ALIAS FOR $1;
  pWhseZoneName ALIAS FOR $2;
  _returnVal INTEGER;
BEGIN
  IF ((pWhseCode IS NULL) OR (pWhseZoneName IS NULL)) THEN
	RETURN NULL;
  END IF;

  SELECT whsezone_id INTO _returnVal
  FROM whsezone
  WHERE ( (whsezone_warehous_id=getWarehousId(pWhseCode, &#39;ACTIVE&#39;))
      AND (UPPER(whsezone_name)=UPPER(pWhseZoneName)) );

  IF (_returnVal IS NULL) THEN
	RAISE EXCEPTION &#39;Whsezone % not found.&#39;, pWhseZoneName;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.grantallmodulepriv-integer-text">grantallmodulepriv( integer, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUserId ALIAS FOR $1;
  pModuleName ALIAS FOR $2;
  _priv RECORD;
  _privCounter INTEGER;

BEGIN

  _privCounter := 0;

  FOR _priv IN SELECT priv_id
               FROM priv 
               WHERE (priv_module=pModuleName) LOOP

    IF (SELECT grantPriv(pUserId, _priv.priv_id)) THEN
      _privCounter := _privCounter + 1;
    END IF;

  END LOOP;

  RETURN _privCounter;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.grantallmodulepriv-text-text">grantallmodulepriv( text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUsername ALIAS FOR $1;
  pModuleName ALIAS FOR $2;
  _priv RECORD;
  _privCounter INTEGER;

BEGIN

  _privCounter := 0;

  FOR _priv IN SELECT priv_id
               FROM priv 
               WHERE (priv_module=pModuleName) LOOP

    IF (SELECT grantPriv(pUsername, _priv.priv_id)) THEN
      _privCounter := _privCounter + 1;
    END IF;

  END LOOP;

  RETURN _privCounter;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.grantallmoduleprivgroup-integer-text">grantallmoduleprivgroup( integer, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pGrpid ALIAS FOR $1;
  pModuleName ALIAS FOR $2;
  _priv RECORD;
  _privCounter INTEGER;

BEGIN

  _privCounter := 0;

  FOR _priv IN SELECT priv_id
               FROM priv 
               WHERE (priv_module=pModuleName) LOOP

    IF (SELECT grantPrivGroup(pGrpid, _priv.priv_id)) THEN
      _privCounter := _privCounter + 1;
    END IF;

  END LOOP;

  RETURN _privCounter;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.grantgroup-text-integer">grantgroup( text, integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUsername ALIAS FOR $1;
  pGrpid ALIAS FOR $2;
  _test INTEGER;

BEGIN

  SELECT usrgrp_id INTO _test
  FROM usrgrp
  WHERE ( (usrgrp_username=pUsername)
   AND (usrgrp_grp_id=pGrpid) );

  IF (FOUND) THEN
    RETURN FALSE;
  END IF;

  INSERT INTO usrgrp
  ( usrgrp_username, usrgrp_grp_id )
  VALUES
  ( pUsername, pGrpid );

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.grantpriv-integer-integer">grantpriv( integer, integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUserId ALIAS FOR $1;
  pPrivid ALIAS FOR $2;
  _test INTEGER;

BEGIN

  SELECT usrpriv_id INTO _test
  FROM usrpriv
  WHERE ((usrpriv_usr_id=pUserId)
   AND (usrpriv_priv_id=pPrivid));

  IF (FOUND) THEN
    RETURN FALSE;
  END IF;

  INSERT INTO usrpriv
  ( usrpriv_usr_id, usrpriv_priv_id )
  VALUES
  ( pUserId, pPrivid );

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.grantpriv-text-integer">grantpriv( text, integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUsername ALIAS FOR $1;
  pPrivid ALIAS FOR $2;
  _test INTEGER;

BEGIN

  SELECT usrpriv_id INTO _test
  FROM usrpriv
  WHERE ( (usrpriv_username=pUsername)
   AND (usrpriv_priv_id=pPrivid) );

  IF (FOUND) THEN
    RETURN FALSE;
  END IF;

  INSERT INTO usrpriv
  ( usrpriv_username, usrpriv_priv_id )
  VALUES
  ( pUsername, pPrivid );

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.grantprivgroup-integer-integer">grantprivgroup( integer, integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pGrpid ALIAS FOR $1;
  pPrivid ALIAS FOR $2;
  _test INTEGER;

BEGIN

  SELECT grppriv_id INTO _test
  FROM grppriv
  WHERE ( (grppriv_grp_id=pGrpid)
   AND (grppriv_priv_id=pPrivid) );

  IF (FOUND) THEN
    RETURN FALSE;
  END IF;

  INSERT INTO grppriv
  ( grppriv_grp_id, grppriv_priv_id )
  VALUES
  ( pGrpid, pPrivid );

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.hasalarms">hasalarms(  )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _whsId INTEGER := -1;
  _fromEmail TEXT := &#39;&#39;;
  _batchId INTEGER := -1;
  _msgId INTEGER;
  _alarm RECORD;
  _todoitem RECORD;
  _incdt RECORD;
  _prjtask RECORD;
  _recipient TEXT;
  _recipientPart INTEGER;
  _returnVal BOOLEAN := FALSE;
BEGIN

  FOR _alarm IN SELECT * FROM alarm
  WHERE ( (alarm_creator=CURRENT_USER)
   AND (CURRENT_TIMESTAMP &gt; alarm_trigger) ) LOOP
    _returnVal := TRUE;
    IF (_alarm.alarm_event) THEN
-- Event alarm
-- Loop thru the event recipients
      _recipientPart := 1;
      LOOP
        _recipient := SPLIT_PART(_alarm.alarm_event_recipient, &#39;,&#39;, _recipientPart);
        IF (LENGTH(_recipient) = 0) THEN
          EXIT;
        END IF;
-- Find the warehouse for the recipient
        SELECT usrpref_value  INTO _whsId
        FROM usrpref
        WHERE ( (usrpref_username = _recipient)
          AND   (usrpref_name = &#39;PreferredWarehouse&#39;) );
        IF (_alarm.alarm_source = &#39;TODO&#39;) THEN
          INSERT INTO evntlog ( evntlog_evnttime, evntlog_username, evntlog_evnttype_id,
                                evntlog_ordtype, evntlog_ord_id, evntlog_warehous_id, evntlog_number )
          SELECT CURRENT_TIMESTAMP, _recipient, evnttype_id,
                 &#39;T&#39;, todoitem_id, _whsId, (todoitem_name || &#39;-&#39; || todoitem_description)
          FROM evnttype, todoitem
          WHERE ( (todoitem_id=_alarm.alarm_source_id)
            AND   (evnttype_name=&#39;TodoAlarm&#39;) );
        END IF;
        IF (_alarm.alarm_source = &#39;INCDT&#39;) THEN
          INSERT INTO evntlog ( evntlog_evnttime, evntlog_username, evntlog_evnttype_id,
                                evntlog_ordtype, evntlog_ord_id, evntlog_warehous_id, evntlog_number )
          SELECT CURRENT_TIMESTAMP, _recipient, evnttype_id,
                 &#39;I&#39;, incdt_id, _whsId, (incdt_number || &#39;-&#39; || incdt_summary)
          FROM evnttype, incdt
          WHERE ( (incdt_id=_alarm.alarm_source_id)
            AND   (evnttype_name=&#39;IncidentAlarm&#39;) );
        END IF;
        IF (_alarm.alarm_source = &#39;J&#39;) THEN
          INSERT INTO evntlog ( evntlog_evnttime, evntlog_username, evntlog_evnttype_id,
                                evntlog_ordtype, evntlog_ord_id, evntlog_warehous_id, evntlog_number )
          SELECT CURRENT_TIMESTAMP, _recipient, evnttype_id,
                 &#39;J&#39;, prjtask_id, _whsId, (prj_number || &#39; &#39; || prj_name || &#39;-&#39; || prjtask_name)
          FROM evnttype, prjtask, prj
          WHERE ( (prjtask_id=_alarm.alarm_source_id)
            AND   (prj_id=prjtask_prj_id)
            AND   (evnttype_name=&#39;TaskAlarm&#39;) );
        END IF;
        _recipientPart := _recipientPart + 1;
      END LOOP;
    END IF;
    IF (_alarm.alarm_email) THEN
-- Email alarm
-- Loop thru the email recipients
      _recipientPart := 1;
      LOOP
        _recipient := SPLIT_PART(_alarm.alarm_email_recipient, &#39;,&#39;, _recipientPart);
        IF (LENGTH(_recipient) = 0) THEN
          EXIT;
        END IF;
-- Find the email address for the creator
        SELECT usr_email INTO _fromEmail
        FROM usr
        WHERE (usr_username = _alarm.alarm_creator);
        IF (_alarm.alarm_source = &#39;TODO&#39;) THEN
          SELECT * INTO _todoitem
          FROM todoitem
          WHERE (todoitem_id = _alarm.alarm_source_id);
          SELECT submitEmailToBatch(_fromEmail, _recipient, &#39;&#39;, (_todoitem.todoitem_name || &#39;-&#39; || _todoitem.todoitem_description),
                                    &#39;Alarm reminder for To-Do Item.&#39;,
                                    NULL, CURRENT_TIMESTAMP, FALSE) INTO _batchId;
        END IF;
        IF (_alarm.alarm_source = &#39;INCDT&#39;) THEN
          SELECT * INTO _incdt
          FROM incdt
          WHERE (incdt_id = _alarm.alarm_source_id);
          SELECT submitEmailToBatch(_fromEmail, _recipient, &#39;&#39;, (_incdt.incdt_number || &#39;-&#39; || _incdt.incdt_summary),
                                    &#39;Alarm reminder for Incident.&#39;,
                                    NULL, CURRENT_TIMESTAMP, FALSE) INTO _batchId;
        END IF;
        IF (_alarm.alarm_source = &#39;J&#39;) THEN
          SELECT * INTO _prjtask
          FROM prjtask JOIN prj ON (prj_id=prjtask_prj_id)
          WHERE (prjtask_id = _alarm.alarm_source_id);
          SELECT submitEmailToBatch(_fromEmail, _recipient, &#39;&#39;, (_prjtask.prj_number || &#39; &#39; || _prjtask.prj_name || &#39;-&#39; || _prjtask.prjtask_name),
                                    &#39;Alarm reminder for Project Task.&#39;,
                                    NULL, CURRENT_TIMESTAMP, FALSE) INTO _batchId;
        END IF;
        _recipientPart := _recipientPart + 1;
      END LOOP;
    END IF;
    IF (_alarm.alarm_sysmsg) THEN
-- System Message alarm
-- Loop thru the sysmsg recipients
      _recipientPart := 1;
      LOOP
        _recipient := SPLIT_PART(_alarm.alarm_sysmsg_recipient, &#39;,&#39;, _recipientPart);
        IF (LENGTH(_recipient) = 0) THEN
          EXIT;
        END IF;
        IF (_alarm.alarm_source = &#39;TODO&#39;) THEN
          SELECT * INTO _todoitem
          FROM todoitem
          WHERE (todoitem_id = _alarm.alarm_source_id);
          SELECT postMessage(_recipient, (&#39;ToDo - &#39; || _todoitem.todoitem_name || &#39;-&#39; || _todoitem.todoitem_description)) INTO _msgId;
        END IF;
        IF (_alarm.alarm_source = &#39;INCDT&#39;) THEN
          SELECT * INTO _incdt
          FROM incdt
          WHERE (incdt_id = _alarm.alarm_source_id);
          SELECT postMessage(_recipient, (&#39;Incident - &#39; || _incdt.incdt_number || &#39;-&#39; || _incdt.incdt_summary)) INTO _msgId;
        END IF;
        IF (_alarm.alarm_source = &#39;J&#39;) THEN
          SELECT * INTO _prjtask
          FROM prjtask JOIN prj ON (prj_id=prjtask_prj_id)
          WHERE (prjtask_id = _alarm.alarm_source_id);
          SELECT postMessage(_recipient, (&#39;Project Task - &#39; || _prjtask.prj_number || &#39; &#39; || _prjtask.prj_name || &#39;-&#39; || _prjtask.prjtask_name)) INTO _msgId;
        END IF;
        _recipientPart := _recipientPart + 1;
      END LOOP;
    END IF;
-- Delete alarm
    DELETE FROM alarm WHERE alarm_id=_alarm.alarm_id;
  END LOOP;
  RETURN _returnVal;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.hasevents">hasevents(  )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

  PERFORM evntlog_id
  FROM evntlog
  WHERE ( (evntlog_dispatched IS NULL)
   AND (evntlog_username=CURRENT_USER) )
  LIMIT 1;
  RETURN FOUND;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.hasmessages">hasmessages(  )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

  PERFORM msguser_id
  FROM msg, msguser
  WHERE ( (msguser_username=CURRENT_USER)
   AND (msguser_msg_id=msg_id)
   AND (CURRENT_TIMESTAMP BETWEEN msg_scheduled AND msg_expires)
   AND (msguser_viewed IS NULL) )
  LIMIT 1;
  RETURN FOUND;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.haspriv-text">haspriv( text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPrivName	ALIAS FOR $1;
  _result       INTEGER;
  _returnVal	BOOLEAN;

BEGIN
  SELECT priv_id INTO _result
    FROM priv, grppriv, usrgrp
   WHERE((usrgrp_grp_id=grppriv_grp_id)
     AND (grppriv_priv_id=priv_id)
     AND (priv_name=pPrivName)
     AND (usrgrp_username=CURRENT_USER));
  IF (FOUND) THEN
    RETURN true;
  END IF;

  SELECT COALESCE(usrpriv_id, 0) != 0 INTO _returnVal
  FROM priv LEFT OUTER JOIN
       usrpriv ON (priv_id=usrpriv_priv_id AND usrpriv_username = CURRENT_USER)
  WHERE (priv_name=pPrivName);
  IF (_returnVal IS NULL) THEN
    _returnVal := FALSE;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.hmac-bytea-bytea-text">hmac( bytea, bytea, text )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: C</h3>
        
        <pre>pg_hmac</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.hmac-text-text-text">hmac( text, text, text )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: C</h3>
        
        <pre>pg_hmac</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.implodewo-integer-boolean">implodewo( integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid ALIAS FOR $1;
  implodeChildren ALIAS FOR $2;
  resultCode INTEGER;
  _wotcCnt   INTEGER;
  _routings  BOOLEAN;

BEGIN
  SELECT metric_value=&#39;t&#39; INTO _routings
         FROM metric
         WHERE (metric_name=&#39;Routings&#39;);

  IF ((SELECT wo_id
       FROM wo
       WHERE ((wo_status=&#39;E&#39;)
        AND (wo_id=pWoid))) IS NULL) THEN
    RETURN 0;
  END IF;

  IF (_routings) THEN
    SELECT count(*) INTO _wotcCnt
    FROM wotc
    WHERE (wotc_wo_id=pWoid);
    IF (_wotcCnt &gt; 0) THEN
      RETURN -1;
    END IF;
  END IF;

--  Delete any created P/R&#39;s for this W/O
  PERFORM deletePr(&#39;W&#39;, womatl_id)
  FROM womatl
  WHERE (womatl_wo_id=pWoid);

  DELETE FROM womatl
  WHERE (womatl_id IN ( SELECT womatl_id
                        FROM womatl, wo
                        WHERE ((womatl_wo_id=wo_id)
                         AND (wo_status=&#39;E&#39;)
                         AND (wo_id=pWoid)) ));

  IF _routings THEN

    DELETE FROM wooper
    WHERE (wooper_id IN ( SELECT wooper_id
                          FROM wooper, wo
                          WHERE ((wooper_wo_id=wo_id)
                           AND (wo_status=&#39;E&#39;)
                           AND (wo_id=pWoid)) ));
  END IF;

  UPDATE wo
  SET wo_status=&#39;O&#39;
  WHERE (wo_id=pWoid);

  IF (implodeChildren) THEN
    resultCode := (SELECT MAX(implodeWo(wo_id, TRUE))
                   FROM wo
                   WHERE ((wo_ordtype=&#39;W&#39;)
                    AND (wo_ordid=pWoid)));

    resultCode := (SELECT MAX(deleteWo(wo_id, TRUE))
                   FROM wo
                   WHERE ((wo_ordtype=&#39;W&#39;)
                    AND (wo_ordid=pWoid)));
  END IF;

  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.indentedbom-integer">indentedbom( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  _revid INTEGER;

BEGIN

  SELECT getActiveRevId(&#39;BOM&#39;,pItemid) INTO _revid;

  RETURN indentedBOM(pItemid, _revid);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.indentedbom-integer-integer">indentedbom( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pRevisionid ALIAS FOR $2;
  _bomworkid INTEGER;
  _indexid INTEGER;
  _r RECORD;

BEGIN

--  Check on the temporary workspace
--  PERFORM maintainBOMWorkspace();

--  Grab a new index for this bomwork set
  SELECT NEXTVAL(&#39;misc_index_seq&#39;) INTO _indexid;

--  Step through all of the components of the passed pItemid
  FOR _r IN SELECT bomitem.*,
                   item_id,
                   itemuomtouom(bomitem_item_id, bomitem_uom_id, NULL,
                                bomitem_qtyper) AS qtyper,
                   stdcost(item_id) AS standardcost,
                   actcost(item_id) AS actualcost
  FROM bomitem(pItemId, pRevisionid), item
  WHERE ( (bomitem_item_id=item_id) ) LOOP

--  Insert the component and bomitem parameters
    SELECT NEXTVAL(&#39;bomwork_bomwork_id_seq&#39;) INTO _bomworkid;
    INSERT INTO bomwork
    ( bomwork_id, bomwork_set_id, bomwork_parent_id, bomwork_level,
      bomwork_parent_seqnumber, bomwork_seqnumber,
      bomwork_item_id, bomwork_createwo,
      bomwork_qtyper, bomwork_scrap, bomwork_issuemethod,
      bomwork_effective, bomwork_expires,
      bomwork_stdunitcost, bomwork_actunitcost,
      bomwork_char_id, bomwork_value, bomwork_notes, bomwork_ref,
      bomwork_bomitem_id, bomwork_ecn )
    VALUES
    ( _bomworkid, _indexid, -1, 1,
      0, _r.bomitem_seqnumber,
      _r.item_id, _r.bomitem_createwo,
      _r.qtyper, _r.bomitem_scrap, _r.bomitem_issuemethod,
      _r.bomitem_effective, _r.bomitem_expires,
      _r.standardcost, _r.actualcost,
      _r.bomitem_char_id, _r.bomitem_value, _r.bomitem_notes, _r.bomitem_ref,
      _r.bomitem_id, _r.bomitem_ecn );

--  Explode the components of the current component
    PERFORM explodeBOM(_r.item_id, _bomworkid, 1);

  END LOOP;

--  Return a key to the result
  RETURN _indexid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.indentedbom-integer-integer-integer-integer">indentedbom( integer, integer, integer, integer )</a>
		</h2>
<h3>Returns: SET OF bomdata</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pRevisionid ALIAS FOR $2;
  pExpiredDays ALIAS FOR $3;
  pFutureDays ALIAS FOR $4;
  _row bomdata%ROWTYPE;
  _bomworksetid INTEGER;
  _x RECORD;
  _check CHAR(1);
  _inactive BOOLEAN;
BEGIN
  _inactive := FALSE;

  IF (pRevisionid != -1) THEN
    --Is this a deactivated revision?
    SELECT rev_status INTO _check
    FROM rev
    WHERE ((rev_id=pRevisionid)
    AND (rev_status=&#39;I&#39;));
    IF (FOUND) THEN
      _inactive := TRUE;
    END IF;
  END IF;
 
  IF NOT (_inactive) THEN

    --We can explode this out based on current data
    SELECT indentedBOM(pItemid, pRevisionid) INTO _bomworksetid;  

    FOR _x IN
        SELECT bomwork_id, bomwork_parent_id, bomwork_level,
               bomworkSequence(bomwork_id) AS seq_ord,
               bomwork_seqnumber, item_id, item_number, uom_name,
               item_descrip1, item_descrip2,
               (item_descrip1 || &#39; &#39; || item_descrip2) AS itemdescription,
               bomwork_qtyper, bomwork_scrap, bomwork_createwo,
       CASE WHEN (bomwork_issuemethod=&#39;S&#39;) THEN &#39;Push&#39;
            WHEN (bomwork_issuemethod=&#39;L&#39;) THEN &#39;Pull&#39;
            WHEN (bomwork_issuemethod=&#39;M&#39;) THEN &#39;Mixed&#39;
            ELSE &#39;Special&#39;
       END AS issuemethod,
       bomwork_effective, bomwork_expires,
       (bomwork_expires &lt;= CURRENT_DATE) AS expired,
       (bomwork_effective &gt; CURRENT_DATE) AS future,
       bomwork_actunitcost AS actunitcost,
       bomwork_stdunitcost AS stdunitcost,
       (itemuomtouom(item_id, item_inv_uom_id, NULL, bomwork_qtyper * (1 + bomwork_scrap)) * bomwork_actunitcost) AS actextendedcost,
       (itemuomtouom(item_id, item_inv_uom_id, NULL, bomwork_qtyper * (1 + bomwork_scrap)) * bomwork_stdunitcost) AS stdextendedcost,
       bomwork_char_id,
       bomwork_value, bomwork_notes, bomwork_ref,
       bomwork_bomitem_id, bomwork_ecn
       FROM bomwork, item, uom 
       WHERE ( (bomwork_item_id=item_id)
       AND (item_inv_uom_id=uom_id)
       AND (bomwork_set_id=_bomworksetid) )
       AND (bomwork_expires &gt; (CURRENT_DATE - pExpiredDays))
       AND (bomwork_effective &lt;= (CURRENT_DATE + pFutureDays))
       UNION
       SELECT -1, -1, 1,&#39;0&#39;,
              NULL,-1, costelem_type AS bomdata_item_number, &#39;&#39;,
              &#39;&#39;, &#39;&#39;, &#39;&#39;,
              NULL, NULL, NULL,
              &#39;&#39;,
              NULL, NULL,
              false,false,
              currToBase(itemcost_curr_id, itemcost_actcost, CURRENT_DATE) AS actunitcost,
              itemcost_stdcost AS stdunitcost,
              currToBase(itemcost_curr_id, itemcost_actcost, CURRENT_DATE) AS actextendedcost,
              itemcost_stdcost AS stdextendedcost,
              NULL,NULL,NULL,NULL,NULL,NULL
       FROM itemcost, costelem 
       WHERE ( (itemcost_costelem_id=costelem_id)
       AND (NOT itemcost_lowlevel)
       AND (itemcost_item_id=pItemid) )
       ORDER BY seq_ord
    LOOP
        _row.bomdata_bomwork_id := _x.bomwork_id;
        _row.bomdata_bomwork_parent_id := _x.bomwork_parent_id;
        _row.bomdata_bomwork_level := _x.bomwork_level;
        _row.bomdata_bomwork_seqnumber := _x.bomwork_seqnumber;
        _row.bomdata_bomitem_id := _x.bomwork_bomitem_id;
        _row.bomdata_item_id := _x.item_id;
        _row.bomdata_item_number := _x.item_number;
        _row.bomdata_uom_name := _x.uom_name;
        _row.bomdata_item_descrip1 := _x.item_descrip1;
        _row.bomdata_item_descrip2 := _x.item_descrip2;
        _row.bomdata_itemdescription := _x.itemdescription;
        _row.bomdata_qtyper := _x.bomwork_qtyper;
        _row.bomdata_scrap := _x.bomwork_scrap;
        _row.bomdata_createchild := _x.bomwork_createwo;
        _row.bomdata_issuemethod := _x.issuemethod;
        _row.bomdata_effective := _x.bomwork_effective;
        _row.bomdata_expires := _x.bomwork_expires;
        _row.bomdata_expired := _x.expired;
        _row.bomdata_future := _x.future;
        _row.bomdata_actunitcost := _x.actunitcost;
        _row.bomdata_stdunitcost := _x.stdunitcost;
        _row.bomdata_actextendedcost := _x.actextendedcost;
        _row.bomdata_stdextendedcost := _x.stdextendedcost;
        _row.bomdata_ecn := _x.bomwork_ecn;
        _row.bomdata_char_id := _x.bomwork_char_id;
        _row.bomdata_value := _x.bomwork_value;
        _row.bomdata_notes := _x.bomwork_notes;
        _row.bomdata_ref := _x.bomwork_ref;
        RETURN NEXT _row;
    END LOOP;
    
    PERFORM deleteBOMWorkset(_bomworksetid);

  ELSE

-- Use historical snapshot for inactive revisions
    FOR _x IN
        SELECT bomhist_id, bomhist_parent_id, bomhist_level,
               bomhistSequence(bomhist_seq_id) AS seq_ord,
               bomhist_seqnumber, item_id, item_number, uom_name,
               item_descrip1, item_descrip2,
               (item_descrip1 || &#39; &#39; || item_descrip2) AS itemdescription,
               bomhist_qtyper,
               bomhist_scrap,
               bomhist_createwo,
       CASE WHEN (bomhist_issuemethod=&#39;S&#39;) THEN &#39;Push&#39;
            WHEN (bomhist_issuemethod=&#39;L&#39;) THEN &#39;Pull&#39;
            WHEN (bomhist_issuemethod=&#39;M&#39;) THEN &#39;Mixed&#39;
            ELSE &#39;Special&#39;
       END AS issuemethod,
       bomhist_effective,
       bomhist_expires,
       (bomhist_expires &lt;= CURRENT_DATE) AS expired,
       (bomhist_effective &gt; CURRENT_DATE) AS future,
       bomhist_actunitcost AS actunitcost,
       bomhist_stdunitcost AS stdunitcost,
       bomhist_qtyper * (1 + bomhist_scrap) * bomhist_actunitcost AS actextendedcost,
       bomhist_qtyper * (1 + bomhist_scrap) * bomhist_stdunitcost AS stdextendedcost,
       bomhist_char_id,
       bomhist_value, bomhist_notes, bomhist_ref 
       FROM bomhist, item, uom 
       WHERE ( (bomhist_item_id=item_id)
       AND (item_inv_uom_id=uom_id)
       AND (bomhist_rev_id=pRevisionid) )
       AND (bomhist_expires &gt; (CURRENT_DATE - pExpiredDays))
       AND (bomhist_effective &lt;= (CURRENT_DATE + pFutureDays))
       UNION
       SELECT -1, -1, 1,&#39;0&#39;,
              NULL,-1, costelem_type AS bomdata_item_number, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;,
              NULL, NULL, false, &#39;&#39;, NULL, NULL,false,false,
              bomhist_actunitcost AS actunitcost,
              bomhist_stdunitcost AS stdunitcost,
              bomhist_actunitcost AS actextendedcost,
              bomhist_stdunitcost AS stdextendedcost,
              NULL,NULL,NULL,NULL 
       FROM bomhist, costelem 
       WHERE ((bomhist_rev_id=pRevisionid)
       AND (costelem_id=bomhist_item_id))
       ORDER BY seq_ord
    LOOP
        _row.bomdata_bomwork_id := _x.bomhist_id;
        _row.bomdata_bomwork_parent_id := _x.bomhist_parent_id;
        _row.bomdata_bomwork_level := _x.bomhist_level;
        _row.bomdata_bomwork_seqnumber := _x.bomhist_seqnumber;
        _row.bomdata_bomitem_id := -1;
        _row.bomdata_item_id := _x.item_id;
        _row.bomdata_item_number := _x.item_number;
        _row.bomdata_uom_name := _x.uom_name;
        _row.bomdata_item_descrip1 := _x.item_descrip1;
        _row.bomdata_item_descrip2 := _x.item_descrip2;
        _row.bomdata_itemdescription := _x.itemdescription;
        _row.bomdata_qtyper := _x.bomhist_qtyper;
        _row.bomdata_scrap := _x.bomhist_scrap;
        _row.bomdata_createchild := _x.bomhist_createwo;
        _row.bomdata_issuemethod := _x.issuemethod;
        _row.bomdata_effective := _x.bomhist_effective;
        _row.bomdata_expires := _x.bomhist_expires;
        _row.bomdata_expired := _x.expired;
        _row.bomdata_future := _x.future;
        _row.bomdata_actunitcost := _x.actunitcost;
        _row.bomdata_stdunitcost := _x.stdunitcost;
        _row.bomdata_actextendedcost := _x.actextendedcost;
        _row.bomdata_stdextendedcost := _x.stdextendedcost;
        _row.bomdata_ecn := &#39;&#39;;
        _row.bomdata_char_id := _x.bomhist_char_id;
        _row.bomdata_value := _x.bomhist_value;
        _row.bomdata_notes := _x.bomhist_notes;
        _row.bomdata_ref := _x.bomhist_ref;
        RETURN NEXT _row;
    END LOOP;
  END IF;   

  RETURN;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.indentedwhereused-integer">indentedwhereused( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  _indexid INTEGER;
  _level INTEGER;

BEGIN

--  Check on the temporary workspace
--  PERFORM maintainBOMWorkspace();

  _indexid := (SELECT NEXTVAL(&#39;misc_index_seq&#39;));
  _level := 1;

  INSERT INTO bomwork
  ( bomwork_set_id, bomwork_parent_id,
    bomwork_level, bomwork_seqnumber,
    bomwork_item_id, bomwork_item_type, bomwork_createwo,
    bomwork_qtyper, bomwork_scrap, bomwork_issuemethod,
    bomwork_effective, bomwork_expires, bomwork_status,
    bomwork_stdunitcost, bomwork_actunitcost )
  SELECT _indexid, -1,
         1, bomitem_seqnumber,
         item_id, item_type, bomitem_createwo,
         itemuomtouom(bomitem_item_id, bomitem_uom_id, NULL, bomitem_qtyper), bomitem_scrap, bomitem_issuemethod,
         bomitem_effective, bomitem_expires, &#39;U&#39;,
         stdcost(item_id), actcost(item_id)
  FROM bomitem, item
  WHERE ((bomitem_item_id=pItemid)
    AND (bomitem_parent_item_id=item_id)
    AND (bomitem_rev_id=getActiveRevId(&#39;BOM&#39;,bomitem_parent_item_id)));

  WHILE ( ( SELECT count(*)
            FROM bomwork
            WHERE ((bomwork_item_type IN (&#39;M&#39;, &#39;F&#39;))
              AND (bomwork_status=&#39;U&#39;)
              AND (bomwork_set_id=_indexid)) ) &gt; 0) LOOP

    _level := _level + 1;

    INSERT INTO bomwork
    ( bomwork_set_id, bomwork_parent_id,
      bomwork_level, bomwork_seqnumber,
      bomwork_item_id, bomwork_item_type, bomwork_createwo,
      bomwork_qtyper,
      bomwork_scrap, bomwork_issuemethod,
      bomwork_effective, bomwork_expires, bomwork_status,
      bomwork_stdunitcost, bomwork_actunitcost )
    SELECT _indexid, bomwork_id,
           _level, bomitem_seqnumber,
           item_id, item_type, bomitem_createwo,
           (bomwork_qtyper * itemuomtouom(bomitem_item_id, bomitem_uom_id, NULL, bomitem_qtyper)),
           bomitem_scrap, bomitem_issuemethod,
           CASE WHEN bomitem_effective &lt; bomwork_effective THEN
             bomwork_effective
           ELSE bomitem_effective END, 
           CASE WHEN bomitem_expires &gt; bomwork_expires THEN
             bomwork_expires
           ELSE bomitem_expires END,
           &#39;N&#39;,
           stdcost(item_id), actcost(item_id)
    FROM bomitem, item, bomwork
    WHERE ((bomitem_item_id=bomwork_item_id)
      AND (bomitem_parent_item_id=item_id)
      AND (bomitem_rev_id=getActiveRevId(&#39;BOM&#39;,bomitem_parent_item_id))
      AND (bomwork_item_type IN (&#39;M&#39;, &#39;F&#39;))
      AND (bomwork_status=&#39;U&#39;)
      AND (CURRENT_DATE BETWEEN bomitem_effective AND (bomitem_expires - 1) ));

    UPDATE bomwork
    SET bomwork_status=&#39;C&#39;
    WHERE ((bomwork_status=&#39;U&#39;)
      AND (bomwork_set_id=_indexid));

    UPDATE bomwork
    SET bomwork_status=&#39;U&#39;
    WHERE ((bomwork_status=&#39;N&#39;)
      AND (bomwork_set_id=_indexid));

  END LOOP;

  RETURN _indexid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.initialdistribution-integer-integer">initialdistribution( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pLocationid ALIAS FOR $2;
  _itemlocid INTEGER;
  _invhistid INTEGER;
  _r RECORD;

BEGIN

--  Make sure the passed itemsite points to a real item
  IF ( ( SELECT (item_type IN (&#39;R&#39;, &#39;F&#39;,&#39;J&#39;))
         FROM itemsite, item
         WHERE ( (itemsite_item_id=item_id)
          AND (itemsite_id=pItemsiteid) ) ) ) THEN
    RETURN 0;
  END IF;

--  Reassign the location_id for all existing itemlocs if
--  the passed itemsite is already lot/serial controlled
  IF ( ( SELECT (itemsite_controlmethod IN (&#39;L&#39;, &#39;S&#39;))
         FROM itemsite
         WHERE (itemsite_id=pItemsiteid) ) ) THEN

    FOR _r IN SELECT itemloc_id, itemloc_ls_id, itemloc_qty
              FROM itemloc
              WHERE (itemloc_itemsite_id=pItemsiteid) LOOP

--  Create the RL transaction
      SELECT NEXTVAL(&#39;invhist_invhist_id_seq&#39;) INTO _invhistid;
      INSERT INTO invhist
      ( invhist_id, invhist_itemsite_id,
        invhist_transtype, invhist_invqty,
        invhist_qoh_before, invhist_qoh_after,
        invhist_comments,
        invhist_invuom, invhist_unitcost, invhist_hasdetail,
        invhist_costmethod, invhist_value_before, invhist_value_after ) 
      SELECT _invhistid, itemsite_id,
             &#39;RL&#39;, 0,
             _r.itemloc_qty, _r.itemloc_qty,
             &#39;Initial Distribution&#39;,
             uom_name, stdCost(item_id), TRUE,
             itemsite_costmethod, itemsite_value, itemsite_value
      FROM item, itemsite, uom
      WHERE ( (itemsite_item_id=item_id)
       AND (item_inv_uom_id=uom_id)
       AND (itemsite_controlmethod &lt;&gt; &#39;N&#39;)
       AND (itemsite_id=pItemsiteid) );

--  Update the itemloc
      UPDATE itemloc
      SET itemloc_location_id=pLocationid
      WHERE (itemloc_id=_r.itemloc_id);

--  Record the detail transaction
      INSERT INTO invdetail
      ( invdetail_invhist_id, invdetail_location_id, invdetail_ls_id,
        invdetail_qty, invdetail_qty_before, invdetail_qty_after )
      VALUES
      ( _invhistid, pLocationid, _r.itemloc_ls_id,
        _r.itemloc_qty, 0, _r.itemloc_qty );

--  Adjust QOH if this itemlocdist is to/from a non-netable location
      IF ( SELECT (NOT location_netable)
           FROM location
           WHERE (location_id=pLocationid) ) THEN

        INSERT INTO invhist
        ( invhist_itemsite_id,
          invhist_transtype, invhist_invqty,
          invhist_qoh_before, invhist_qoh_after,
          invhist_comments,
          invhist_invuom, invhist_unitcost,
          invhist_costmethod, invhist_value_before, invhist_value_after  ) 
        SELECT itemsite_id,
               &#39;NN&#39;, (_r.itemloc_qty * -1),
               _r.itemloc_qty, 0,
               &#39;Initial Distribution&#39;,
               uom_name, stdCost(item_id),
               itemsite_costmethod, itemsite_value, itemsite_value
        FROM itemsite, item, uom
        WHERE ( (itemsite_item_id=item_id)
         AND (item_inv_uom_id=uom_id)
         AND (itemsite_controlmethod &lt;&gt; &#39;N&#39;)
         AND (itemsite_id=pItemsiteid) );

        UPDATE itemsite
        SET itemsite_nnqoh = (itemsite_nnqoh + _r.itemloc_qty),
            itemsite_qtyonhand = (itemsite_qtyonhand - _r.itemloc_qty) 
        WHERE (itemsite_id=pItemsiteid);

      END IF;

    END LOOP;

  ELSE
--  The passed itemsite is not lot/serial controlled
--  Make sure that there are not any stagnent itemlocs
    DELETE FROM itemloc
    WHERE (itemloc_itemsite_id=pItemsiteid);

--  Create the RL transaction
    SELECT NEXTVAL(&#39;invhist_invhist_id_seq&#39;) INTO _invhistid;
    INSERT INTO invhist
    ( invhist_id, invhist_itemsite_id,
      invhist_transtype, invhist_invqty,
      invhist_qoh_before, invhist_qoh_after,
      invhist_comments,
      invhist_invuom, invhist_unitcost, invhist_hasdetail,
      invhist_costmethod, invhist_value_before, invhist_value_after  ) 
    SELECT _invhistid, itemsite_id,
           &#39;RL&#39;, 0,
           itemsite_qtyonhand, itemsite_qtyonhand,
           &#39;Initial Distribution&#39;,
           uom_name, stdCost(item_id), TRUE,
           itemsite_costmethod, itemsite_value, itemsite_value
    FROM item, itemsite, uom
    WHERE ( (itemsite_item_id=item_id)
     AND (item_inv_uom_id=uom_id)
     AND (itemsite_controlmethod &lt;&gt; &#39;N&#39;)
     AND (itemsite_id=pItemsiteid) );

--  Create the itemloc
    SELECT NEXTVAL(&#39;itemloc_itemloc_id_seq&#39;) INTO _itemlocid;
    INSERT INTO itemloc
    ( itemloc_id, itemloc_itemsite_id, itemloc_location_id,
      itemloc_expiration, itemloc_qty )
    SELECT _itemlocid, itemsite_id, pLocationid,
           endOfTime(), itemsite_qtyonhand
    FROM itemsite
    WHERE (itemsite_id=pItemsiteid);

--  Record the detail transaction
    INSERT INTO invdetail
    ( invdetail_invhist_id, invdetail_location_id,
      invdetail_qty, invdetail_qty_before, invdetail_qty_after )
    SELECT _invhistid, pLocationid,
           itemsite_qtyonhand, 0, itemsite_qtyonhand
    FROM itemsite
    WHERE (itemsite_id=pItemsiteid);

--  Adjust QOH if this itemlocdist is to/from a non-netable location
    IF ( SELECT (NOT location_netable)
         FROM location
         WHERE (location_id=pLocationid) ) THEN

      INSERT INTO invhist
      ( invhist_itemsite_id,
        invhist_transtype, invhist_invqty,
        invhist_qoh_before, invhist_qoh_after,
        invhist_comments,
        invhist_invuom, invhist_unitcost,
        invhist_costmethod, invhist_value_before, invhist_value_after  ) 
      SELECT itemsite_id,
             &#39;NN&#39;, (itemloc_qty * -1),
             itemloc_qty, 0,
             &#39;Initial Distribution&#39;,
             uom_name, stdCost(item_id),
             itemsite_costmethod, itemsite_value, itemsite_value
      FROM itemloc, itemsite, item, uom
      WHERE ( (itemsite_item_id=item_id)
       AND (item_inv_uom_id=uom_id)
       AND (itemsite_controlmethod &lt;&gt; &#39;N&#39;)
       AND (itemloc_itemsite_id=itemsite_id)
       AND (itemloc_id=_itemlocid) );

      UPDATE itemsite
      SET itemsite_nnqoh = itemsite_qtyonhand,
          itemsite_qtyonhand = 0 
      FROM itemloc
      WHERE ( (itemloc_itemsite_id=itemsite_id)
       AND (itemloc_id=_itemlocid) );

    END IF;

  END IF;

  RETURN _itemlocid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.insertarmemo-api.armemo">insertarmemo( api.armemo )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pNew ALIAS FOR $1;
  _result INTEGER;

BEGIN
  IF (pNew.document_type = &#39;Credit Memo&#39;) THEN
    SELECT createARCreditMemo( getCustId(pNew.customer_number),
                               pNew.document_number,
                               pNew.order_number,
                               pNew.document_date,
                               pNew.amount,
                               pNew.notes,
                               getRsnId(pNew.reason_code),
                               getSalescatId(pNew.alternate_prepaid_sales_category),
                               getGLAccntId(pNew.alternate_prepaid_account),
                               pNew.due_date,
                               getTermsId(pNew.terms),
                               getSalesrepId(pNew.sales_rep),
                               pNew.commission_due,
                               pNew.journal_number,
                               COALESCE(getCurrId(pNew.currency), baseCurrId()) ) INTO _result;
    IF (_result &lt;= 0) THEN
      RAISE EXCEPTION &#39;Function createARCreditMemo failed with result = %&#39;, _result;
    END IF;
  ELSE
    IF (pNew.document_type = &#39;Debit Memo&#39;) THEN
      SELECT createARDebitMemo( getCustId(pNew.customer_number),
                                pNew.journal_number,
                                pNew.document_number,
                                pNew.order_number,
                                pNew.document_date,
                                pNew.amount,
                                pNew.notes,
                                getRsnId(pNew.reason_code),
                                getSalescatId(pNew.alternate_prepaid_sales_category),
                                getGLAccntId(pNew.alternate_prepaid_account),
                                pNew.due_date,
                                getTermsId(pNew.terms),
                                getSalesrepId(pNew.sales_rep),
                                pNew.commission_due,
                                COALESCE(getCurrId(pNew.currency), baseCurrId()) ) INTO _result;
      IF (_result &lt;= 0) THEN
        RAISE EXCEPTION &#39;Function createARDebitMemo failed with result = %&#39;, _result;
      END IF;
    ELSE
      RAISE EXCEPTION &#39;Function insertARMemo failed, invalid Document Type&#39;;
    END IF;
  END IF;

  RETURN TRUE;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.insertccard-text-boolean-text-bytea-bytea-bytea-bytea-bytea-bytea-bytea-bytea-bytea-bytea-text">insertccard( text, boolean, text, bytea, bytea, bytea, bytea, bytea, bytea, bytea, bytea, bytea, bytea, text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        <p>This function is generally used to support the _custcreditcard API view</p>
        <pre>
DECLARE
  pCustomer ALIAS FOR $1;
  pActive ALIAS FOR $2;
  pType ALIAS FOR $3;
  pNumber ALIAS FOR $4;
  pName ALIAS FOR $5;
  pAddr1 ALIAS FOR $6;
  pAddr2 ALIAS FOR $7;
  pCity ALIAS FOR $8;
  pState ALIAS FOR $9;
  pPostal ALIAS FOR $10;
  pCountry ALIAS FOR $11;
  pMonth ALIAS FOR $12;
  pYear ALIAS FOR $13;
  pKey ALIAS FOR $14;
  _type CHAR;
  _number TEXT;
  _month INTEGER;
  _year INTEGER;
  _result INTEGER;

BEGIN
  --Initialize
  _number = pNumber;
  _month = pMonth;
  _year = pYear;

  -- Check Card holder info
  IF (pName IS NULL) THEN
      RAISE EXCEPTION &#39;The name of the card holder must be entered&#39;;
  END IF;
  IF (pAddr1 IS NULL OR pAddr1 = &#39;&#39;) THEN
      RAISE EXCEPTION &#39;The first address line must be entered&#39;;
  END IF;
  IF (pCity IS NULL OR pCity = &#39;&#39;) THEN
      RAISE EXCEPTION &#39;The city must be entered&#39;;
  END IF;
  IF (pState IS NULL OR pState = &#39;&#39;) THEN
      RAISE EXCEPTION &#39;The state must be entered&#39;;
  END IF;
  IF (pPostal IS NULL OR pPostal = &#39;&#39;) THEN
      RAISE EXCEPTION &#39;The zip code must be entered&#39;;
  END IF;
  IF (pCountry IS NULL OR pCountry = &#39;&#39;) THEN
      RAISE EXCEPTION &#39;The country must be entered&#39;;
  END IF;
  IF (pMonth IS NULL OR pMonth = &#39;&#39;) THEN
      RAISE EXCEPTION &#39;The Expiration Month must be entered&#39;;
  END IF;
  IF (_month &lt; 1 OR _month &gt; 12) THEN
      RAISE EXCEPTION &#39;Valid Expiration Months are 01 through 12&#39;;
  END IF;
  IF (LENGTH(pYear) &lt;&gt; 4) THEN
      RAISE EXCEPTION &#39;Valid Expiration Years are CCYY in format&#39;;
  END IF;
  IF (_year &lt; 1970 OR _year &gt; 2100) THEN
      RAISE EXCEPTION &#39;Valid Expiration Years are 1970 through 2100&#39;;
  END IF;
  
  -- Check Number Length
  IF ((NOT _number ~  &#39;[0-9]{13,16}&#39;) OR (LENGTH(_number) = 14) OR (LENGTH(_number) &gt; 16)) THEN
    RAISE EXCEPTION &#39;The credit card number must be all numeric (no spaces or hyphens) and must be 13, 15 or 16 characters in length&#39;;
  END IF;
 
  -- Convert Type
  IF (pType = &#39;Visa&#39;) THEN
    _type  = &#39;V&#39;;
  ELSE
    IF (pType = &#39;Master Card&#39;) THEN
      _type  = &#39;M&#39;;
    ELSE
      IF (pType = &#39;American Express&#39;) THEN
        _type  = &#39;A&#39;;
      ELSE
        IF (pType = &#39;Discover&#39;) THEN
          _type  = &#39;D&#39;;
        ELSE
          RAISE EXCEPTION &#39;You must select Master Card, Visa, American 
                            Express or Discover as the credit card type.&#39;;
        END IF;
      END IF;
    END IF;
  END IF;
  
  -- Check Card Specific Data
  SELECT editccnumber(_number, _type) INTO _result;

  IF (_result = -1) THEN
    RAISE EXCEPTION &#39;You must select Master Card, Visa, American 
                      Express or Discover as the credit card type.&#39;;
  END IF;
  IF (_result = -2) THEN
    RAISE EXCEPTION &#39;The length of a Master Card credit card number
                      has to be 16 digits.&#39;;
  END IF;
  IF (_result = -3) THEN
    RAISE EXCEPTION &#39;The length of a Visa credit card number
                      has to be either 13 or 16 digits.&#39;;
  END IF;
  IF (_result = -4) THEN
    RAISE EXCEPTION &#39;The length of an American Express credit card
                      number has to be 15 digits.&#39;;
  END IF;
  IF (_result = -5) THEN
    RAISE EXCEPTION &#39;The length of a Discover credit card number 
                      has to be 16 digits.&#39;;
  END IF;
   IF (_result = -6) THEN
    RAISE EXCEPTION &#39;The first two digits for a valid Master Card
                      number must be between 51 and 55&#39;;
  END IF;
  IF (_result = -7) THEN
    RAISE EXCEPTION &#39;The first digit for a valid Visa number must
                      be 4&#39;;
  END IF;
   IF (_result = -8) THEN
    RAISE EXCEPTION &#39;The first two digits for a valid American
                      Express number must be 34 or 37.&#39;;
  END IF;
  IF (_result = -9) THEN
    RAISE EXCEPTION &#39;The first four digits for a valid Discover
                      Express number must be 6011.&#39;;
  END IF;
  IF ((_result = -10) AND NOT fetchmetricbool(&#39;CCTest&#39;)) THEN
    RAISE EXCEPTION &#39;The credit card number that you have provided
                      is not valid.&#39;;
  END IF;
  IF (_result &lt; -10) THEN
    RAISE EXCEPTION &#39;Invalid Credit Card Information&#39;;
  END IF;

  -- Insert Record

  INSERT INTO ccard ( 
    ccard_seq, 
    ccard_cust_id,
    ccard_active, 
    ccard_name, 
    ccard_address1,
    ccard_address2,
    ccard_city, 
    ccard_state, 
    ccard_zip,
    ccard_country, 
    ccard_number,
    ccard_month_expired, 
    ccard_year_expired, 
    ccard_type)
    VALUES 
    ((SELECT COALESCE(MAX(ccard_seq), 0) + 10
      FROM ccard 
      WHERE (ccard_cust_id =getCustId(pCustomer))),
     getCustId(pCustomer),
     COALESCE(pActive),
     encrypt(setbytea(pName), setbytea(pKey), &#39;bf&#39;),
     encrypt(setbytea(pAddr1), setbytea(pKey), &#39;bf&#39;),
     encrypt(setbytea(pAddr2), setbytea(pKey), &#39;bf&#39;),
     encrypt(setbytea(pCity), setbytea(pKey), &#39;bf&#39;),
     encrypt(setbytea(pState), setbytea(pKey), &#39;bf&#39;),
     encrypt(setbytea(pPostal), setbytea(pKey), &#39;bf&#39;),
     encrypt(setbytea(pCountry), setbytea(pKey), &#39;bf&#39;),
     encrypt(setbytea(pNumber), setbytea(pKey), &#39;bf&#39;),
     encrypt(setbytea(pMonth), setbytea(pKey), &#39;bf&#39;),
     encrypt(setbytea(pYear), setbytea(pKey), &#39;bf&#39;),
     _type );

  RETURN true;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.insertcreditmemo-api.creditmemo">insertcreditmemo( api.creditmemo )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
	pNew ALIAS FOR $1;
BEGIN
	-- NOTE: (SELECT getCustId(...)) seems redundant, but it actually produces
	-- a HUGE performance increase because it makes the Postgres query planner
	-- use an index scan rather than an sequential table scan on cust_id
  INSERT INTO cmhead (
		cmhead_number,
		cmhead_posted,
		cmhead_invcnumber,
                cmhead_custponumber,
		cmhead_cust_id,
		cmhead_docdate,
		cmhead_shipto_id,
		cmhead_shipto_name,
		cmhead_shipto_address1,
		cmhead_shipto_address2,
		cmhead_shipto_address3,
		cmhead_shipto_city,
		cmhead_shipto_state,
		cmhead_shipto_zipcode,
		cmhead_shipto_country,
		cmhead_salesrep_id,
                cmhead_tax_id,
		cmhead_freight,
		cmhead_misc,
		cmhead_comments,
		cmhead_printed,
		cmhead_billtoname,
		cmhead_billtoaddress1,
		cmhead_billtoaddress2,
		cmhead_billtoaddress3,
		cmhead_billtocity,
		cmhead_billtostate,
		cmhead_billtozip,
		cmhead_billtocountry,
		cmhead_hold,
		cmhead_commission,
		cmhead_misc_accnt_id,
		cmhead_misc_descrip,
                cmhead_tax,
                cmhead_tax_ratea,
                cmhead_tax_rateb,
                cmhead_tax_ratec,
		cmhead_rsncode_id,
		cmhead_curr_id,
		cmhead_taxauth_id,
		cmhead_tax_curr_id,
		cmhead_adjtax_id,
                cmhead_adjtaxtype_id,
		cmhead_adjtax_pcta,
		cmhead_adjtax_pctb,
		cmhead_adjtax_pctc,
		cmhead_adjtax_ratea,
		cmhead_adjtax_rateb,
		cmhead_adjtax_ratec,
		cmhead_freighttax_id,
                cmhead_freighttaxtype_id,
		cmhead_freighttax_pcta,
		cmhead_freighttax_pctb,
		cmhead_freighttax_pctc,
		cmhead_freighttax_ratea,
		cmhead_freighttax_rateb,
		cmhead_freighttax_ratec,
                cmhead_gldistdate,
                cmhead_rahead_id
		)
	 SELECT
		(CASE -- use a case here so we don&#39;t unnecessarily fetch a new CM number
			WHEN pNew.memo_number IS NULL THEN fetchCMNumber()
			ELSE pNew.memo_number
		END),
		FALSE, -- posted
		pNew.apply_to,
		pNew.customer_po_number,
		cust_id,
		COALESCE(pNew.memo_date, CURRENT_DATE),
		COALESCE(shipto_id,-1),
		pNew.shipto_name,
		pNew.shipto_address1,
		pNew.shipto_address2,
		pNew.shipto_address3,
		pNew.shipto_city,
		pNew.shipto_state,
		pNew.shipto_postal_code,
		pNew.shipto_country,
		COALESCE(getSalesRepId(pNew.sales_rep),shipto_salesrep_id,cust_salesrep_id),
                NULL,
		COALESCE(pNew.freight, 0),
		COALESCE(pNew.misc_charge_amount, 0),
		pNew.notes,
		FALSE, -- printed
		pNew.billto_name,
		pNew.billto_address1,
		pNew.billto_address2,
		pNew.billto_address3,
		pNew.billto_city,
		pNew.billto_state,
		pNew.billto_postal_code,
		pNew.billto_country,
		COALESCE(pNew.on_hold, FALSE),
		COALESCE(pNew.commission, 0),
		COALESCE(getGlAccntId(pNew.misc_charge_credit_account),-1),
		pNew.misc_charge_description,
                0,
                0,
                0,
                0,
		(SELECT rsncode_id FROM rsncode WHERE rsncode_code = pNew.reason_code),
		COALESCE(getCurrId(pNew.currency),cust_curr_id,basecurrid()),
		CASE
			WHEN pNew.tax_authority = &#39;None&#39; THEN NULL
			ELSE COALESCE(getTaxAuthId(pNew.tax_authority),shipto_taxauth_id,cust_taxauth_id)
		END,
                CASE
                        WHEN pNew.tax_authority = &#39;None&#39; THEN COALESCE(getCurrId(pNew.currency),cust_curr_id,basecurrid())
                        ELSE (SELECT taxauth_curr_id FROM taxauth WHERE (taxauth_id=getTaxAuthId(pNew.tax_authority)))
                END,
		NULL,
                NULL,
                0,
                0,
                0,
		0,
		0,
		0,
		NULL,
                NULL,
                0,
                0,
                0,
		0,
		0,
		0,
                NULL,
                NULL
	FROM custinfo
		LEFT OUTER JOIN shiptoinfo ON (shipto_id=(SELECT CASE
			WHEN getShiptoId(pNew.customer_number,pNew.shipto_number) IS NOT NULL
				THEN getShiptoId(pNew.customer_number,pNew.shipto_number)
			ELSE (SELECT shipto_id FROM shiptoinfo WHERE shipto_cust_id=cust_id AND shipto_default)
		END))
	WHERE cust_id = (CASE
		WHEN pNew.customer_number IS NOT NULL THEN (SELECT getCustId(pNew.customer_number))
		ELSE (SELECT invchead_cust_id FROM invchead WHERE invchead_invcnumber = pNew.apply_to)
	END);
	RETURN TRUE;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.insertcreditmemoline-api.creditmemoline">insertcreditmemoline( api.creditmemoline )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pNew ALIAS FOR $1;
  _check INTEGER;
  _r RECORD;

BEGIN
  SELECT cmhead_id INTO _check
  FROM cmhead
  WHERE (cmhead_id=getCmheadId(pNew.memo_number, FALSE));
  IF (NOT FOUND) THEN
    RAISE EXCEPTION &#39;Credit Memo # % not found&#39;, pNew.memo_number;
  END IF;

  INSERT INTO cmitem ( cmitem_cmhead_id,
                       cmitem_linenumber,
                       cmitem_itemsite_id,
                       cmitem_qtycredit,
                       cmitem_qtyreturned,
                       cmitem_unitprice,
                       cmitem_comments,
                       cmitem_rsncode_id,
                       cmitem_tax_id,
                       cmitem_taxtype_id,
                       cmitem_tax_pcta,
                       cmitem_tax_pctb,
                       cmitem_tax_pctc,
                       cmitem_tax_ratea,
                       cmitem_tax_rateb,
                       cmitem_tax_ratec,
                       cmitem_qty_uom_id,
                       cmitem_qty_invuomratio,
                       cmitem_price_uom_id,
                       cmitem_price_invuomratio	)
  SELECT cmhead_id,
         COALESCE(pNew.line_number,
                  (SELECT (COALESCE(MAX(cmitem_linenumber), 0) + 1)
                   FROM cmitem WHERE (cmitem_cmhead_id=cmhead_id))),
         COALESCE(itemsite_id, -1),
         COALESCE(pNew.qty_to_credit, 0),
         COALESCE(pNew.qty_returned, 0),
         COALESCE(pNew.net_unit_price, 0),
         pNew.notes,
         getRsnId(pNew.reason_code),
         tax_id,
         taxtype_id,
         COALESCE(tax_ratea, 0),
         COALESCE(tax_rateb, 0),
         COALESCE(tax_ratec, 0),
         COALESCE(pNew.tax_amount_a,
                  (tax_ratea * COALESCE(pNew.net_unit_price,
                                        itemPrice(item_id,cmhead_cust_id,cmhead_shipto_id,pNew.qty_to_credit,cmhead_curr_id,cmhead_docdate))), 0),
         COALESCE(pNew.tax_amount_b,
                  (tax_rateb * COALESCE(pNew.net_unit_price,
                                        itemPrice(item_id,cmhead_cust_id,cmhead_shipto_id,pNew.qty_to_credit,cmhead_curr_id,cmhead_docdate))), 0),
         COALESCE(pNew.tax_amount_c,
                  (tax_ratec * COALESCE(pNew.net_unit_price,
                                        itemPrice(item_id,cmhead_cust_id,cmhead_shipto_id,pNew.qty_to_credit,cmhead_curr_id,cmhead_docdate))), 0),
         COALESCE(getUomId(pNew.qty_uom), item_inv_uom_id),
         CASE
           WHEN item_id IS NOT NULL THEN itemuomtouomratio(item_id, COALESCE(getUomId(pNew.qty_uom),item_inv_uom_id),item_inv_uom_id)
           ELSE 1
         END,
         COALESCE(getUomId(pNew.price_uom),item_price_uom_id),
         CASE
           WHEN item_id IS NOT NULL THEN itemuomtouomratio(item_id, COALESCE(getUomId(pNew.price_uom),item_price_uom_id),item_price_uom_id)
           ELSE 1
        END
  FROM cmhead LEFT OUTER JOIN item ON (item_id=getItemId(pNew.item_number))
              LEFT OUTER JOIN itemsite ON (itemsite_item_id=item_id AND itemsite_warehous_id=getWarehousId(pNew.recv_site, &#39;ALL&#39;))
              LEFT OUTER JOIN taxtype ON (taxtype_id=CASE WHEN pNew.tax_type IS NULL THEN getItemTaxType(item_id,cmhead_taxauth_id)
                                                          WHEN pNew.tax_type = &#39;None&#39; THEN NULL
                                                          ELSE getTaxTypeId(pNew.tax_type)
                                                     END)
              LEFT OUTER JOIN tax ON (tax_id=CASE WHEN pNew.tax_code IS NULL THEN getTaxSelection(cmhead_taxauth_id,getItemTaxType(item_id,cmhead_taxauth_id))
                                                  WHEN pNew.tax_code = &#39;None&#39; THEN NULL
                                                  ELSE getTaxId(pNew.tax_code)
                                             END)
  WHERE (cmhead_id=getCmheadId(pNew.memo_number, FALSE));

  RETURN TRUE;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.insertflgroup-integer-integer-integer-integer-boolean">insertflgroup( integer, integer, integer, integer, boolean )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pFlheadid  ALIAS FOR $1;
  pPeriodid  ALIAS FOR $2;
  pFlgrpid   ALIAS FOR $3;
  pLevel     ALIAS FOR $4;
  pSummarize ALIAS FOR $5;

BEGIN
  RETURN insertFlGroup(pFlheadid, pPeriodid, pFlgrpid, pLevel, pSummarize, NULL);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.insertflgroup-integer-integer-integer-integer-boolean-bpchar">insertflgroup( integer, integer, integer, integer, boolean, bpchar )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pFlheadid  ALIAS FOR $1;
  pPeriodid  ALIAS FOR $2;
  pFlgrpid   ALIAS FOR $3;
  pLevel     ALIAS FOR $4;
  pSummarize ALIAS FOR $5;
  pInterval ALIAS FOR $6;

  _subtotal BOOLEAN;
  _r RECORD;
  _g RECORD;

BEGIN

-- Check to see if this group wants a subtotal
  _subtotal := FALSE;
  IF (pFlgrpid != -1) THEN
    SELECT COALESCE(flgrp_subtotal, FALSE) INTO _subtotal
      FROM flgrp
     WHERE ((flgrp_flhead_id=pFlheadid)
       AND  (flgrp_id=pFlgrpid));
  END IF;

  FOR _r IN SELECT &#39;G&#39; AS type, flgrp_id AS type_id,
                   flgrp_order AS orderby,
                   flgrp_summarize AS summarize,
                   flgrp_subtract AS subtract,
                   CASE WHEN(flgrp_summarize AND (NOT flgrp_showstart)) THEN NULL
                        ELSE 0.00
                   END AS beginning,
                   CASE WHEN(flgrp_summarize AND (NOT flgrp_showend)) THEN NULL
                        ELSE 0.00
                   END AS ending,
                   CASE WHEN(flgrp_summarize AND (NOT flgrp_showdelta)) THEN NULL
                        ELSE 0.00
                   END AS debits,
                   CASE WHEN(flgrp_summarize AND (NOT flgrp_showdelta)) THEN NULL
                        ELSE 0.00
                   END AS credits,
                   CASE WHEN(flgrp_summarize AND (NOT flgrp_showbudget)) THEN NULL
                        ELSE 0.00
                   END AS budget,
                   CASE WHEN(flgrp_summarize AND (NOT flgrp_showdiff)) THEN NULL
                        ELSE 0.00
                   END AS diff,
                   CASE WHEN(flgrp_summarize AND (NOT flgrp_showcustom)) THEN NULL
                        ELSE 0.00
                   END AS custom,
                   CASE WHEN(flgrp_showstartprcnt) THEN 0.00
                        ELSE NULL
                   END AS beginningprcnt,
                   CASE WHEN(flgrp_showendprcnt) THEN 0.00
                        ELSE NULL
                   END AS endingprcnt,
                   CASE WHEN(flgrp_showdeltaprcnt) THEN 0.00
                        ELSE NULL
                   END AS debitsprcnt,
                   CASE WHEN(flgrp_showdeltaprcnt) THEN 0.00
                        ELSE NULL
                   END AS creditsprcnt,
                   CASE WHEN(flgrp_showbudgetprcnt) THEN 0.00
                        ELSE NULL
                   END AS budgetprcnt,
                   CASE WHEN(flgrp_showdiffprcnt) THEN 0.00
                        ELSE NULL
                   END AS diffprcnt,
                   CASE WHEN(flgrp_showcustomprcnt) THEN 0.00
                        ELSE NULL
                   END AS customprcnt,
                   -1 AS accnt_id,
                   &#39;&#39; AS accnt_number
              FROM flgrp
             WHERE ((flgrp_flgrp_id=pFlgrpid)
               AND  (flgrp_flhead_id=pFlheadid))
             UNION
            SELECT &#39;I&#39; AS type, flitem_id AS type_id,
                   flitem_order AS orderby,
                   FALSE AS summarize,
                   flitem_subtract AS subtract,
                   CASE WHEN (flitem_showstart AND (FIRST(trialbal_id) IS NULL)) THEN 0.00
                        WHEN (flitem_showstart) THEN normalizeTrialBal(FIRST(trialbal_id), &#39;B&#39;)
                        ELSE NULL
                   END AS beginning,
                   CASE WHEN (flitem_showend AND (LAST(trialbal_id) IS NULL)) THEN 0.00
                        WHEN (flitem_showend) THEN normalizeTrialBal(LAST(trialbal_id), &#39;E&#39;)
                        ELSE NULL
                   END AS ending,
                   CASE WHEN (flitem_showdelta) THEN SUM(trialbal_debits)
                        ELSE NULL
                   END AS debits,
                   CASE WHEN (flitem_showdelta) THEN SUM(trialbal_credits)
                        ELSE NULL
                   END AS credits,
                   CASE WHEN ((flitem_showbudget) AND (accnt_type IN (&#39;R&#39;,&#39;E&#39;)) AND flhead_type IN (&#39;I&#39;,&#39;C&#39;,&#39;A&#39;)) THEN COALESCE(SUM(budget_amount),0)
                        WHEN ((flitem_showbudget) AND (accnt_type IN (&#39;R&#39;,&#39;E&#39;)) AND flhead_type = &#39;B&#39; ) THEN
                                (SELECT COALESCE(SUM(b.budget_amount),0)
                                FROM budget b,
                                        (SELECT ytd.period_id AS ytd_period_id
                                        FROM period cp, period ytd
                                        WHERE ((cp.period_id = LAST(flitem_period_id))
                                        AND (ytd.period_start &lt;= cp.period_start)
                                AND (ytd.period_yearperiod_id = cp.period_yearperiod_id))) AS periods
                                WHERE ((b.budget_accnt_id=accnt_id)
                                AND (b.budget_period_id=ytd_period_id)))
                        WHEN ((flitem_showbudget) AND (accnt_type IN (&#39;A&#39;,&#39;L&#39;,&#39;Q&#39;)) AND flhead_type = &#39;C&#39;) THEN calccashbudget(accnt_id,LAST(flitem_period_id),pInterval)
                        ELSE COALESCE(LAST(budget_amount),0)
                   END AS budget,
                   CASE WHEN (flitem_showdiff AND (FIRST(trialbal_id) IS NULL)) THEN 0.00
                        WHEN (flitem_showdiff) THEN COALESCE(normalizeTrialBal(LAST(trialbal_id), &#39;E&#39;) - normalizeTrialBal(FIRST(trialbal_id), &#39;B&#39;), 0.00)
                        ELSE NULL
                   END AS diff,
                   CASE WHEN (NOT flitem_showcustom) THEN NULL
                        WHEN (flitem_custom_source=&#39;S&#39; AND (FIRST(trialbal_id) IS NOT NULL)) THEN normalizeTrialBal(FIRST(trialbal_id), &#39;B&#39;)
                        WHEN (flitem_custom_source=&#39;E&#39; AND (FIRST(trialbal_id) IS NOT NULL)) THEN normalizeTrialBal(LAST(trialbal_id), &#39;E&#39;)
                        WHEN (flitem_custom_source=&#39;D&#39;) THEN SUM(trialbal_debits)
                        WHEN (flitem_custom_source=&#39;C&#39;) THEN SUM(trialbal_credits)
                        WHEN (flitem_custom_source=&#39;B&#39;) THEN (
                                CASE
                                  WHEN (accnt_type IN (&#39;R&#39;,&#39;E&#39;)) THEN SUM(budget_amount)
                                  ELSE LAST(budget_amount)
                                END)
                        WHEN (flitem_custom_source=&#39;F&#39; AND  (FIRST(trialbal_id) IS NOT NULL)) THEN COALESCE(normalizeTrialBal(LAST(trialbal_id), &#39;E&#39;) - normalizeTrialBal(FIRST(trialbal_id), &#39;B&#39;), 0.00)
                        ELSE 0.00
                   END AS custom,
                   CASE WHEN(flitem_showstartprcnt) THEN 0.00
                        ELSE NULL
                   END AS beginningprcnt,
                   CASE WHEN(flitem_showendprcnt) THEN 0.00
                        ELSE NULL
                   END AS endingprcnt,
                   CASE WHEN(flitem_showdeltaprcnt) THEN 0.00
                        ELSE NULL
                   END AS debitsprcnt,
                   CASE WHEN(flitem_showdeltaprcnt) THEN 0.00
                        ELSE NULL
                   END AS creditsprcnt,
                   CASE WHEN(flitem_showbudgetprcnt) THEN 0.00
                        ELSE NULL
                   END AS budgetprcnt,
                   CASE WHEN(flitem_showdiffprcnt) THEN 0.00
                        ELSE NULL
                   END AS diffprcnt,
                   CASE WHEN(flitem_showcustomprcnt) THEN 0.00
                        ELSE NULL
                   END AS customprcnt,
                   accnt_id,
                   formatglaccount(accnt_id) AS accnt_number
              FROM
                (SELECT period_id AS flitem_period_id, period_start,flhead_type,flitem_id,flitem_order,flitem_subtract,flitem_showstart,flitem_showend,
                        flitem_showdelta,flitem_showbudget,flitem_showdiff,flitem_showcustom,
                        flitem_custom_source,flitem_showstartprcnt,flitem_showendprcnt,flitem_showdeltaprcnt,
                        flitem_showbudgetprcnt,flitem_showdiffprcnt,flitem_showcustomprcnt,
                        accnt_id,accnt_type,COALESCE(trialbal_id,getlasttrialbalid(accnt_id,period_id)) as trialbal_id,COALESCE(trialbal_debits,0) as trialbal_debits,
                        COALESCE(trialbal_credits,0) AS trialbal_credits,COALESCE(budget_amount,0) AS budget_amount
                   FROM (SELECT period_id, period_start, flhead_type, flitem_id,flitem_order,flitem_subtract,flitem_showstart,flitem_showend,
                                flitem_showdelta,flitem_showbudget,flitem_showdiff,flitem_showcustom,flitem_custom_source,flitem_showstartprcnt,
                                flitem_showendprcnt,flitem_showdeltaprcnt,flitem_showbudgetprcnt,flitem_showdiffprcnt,flitem_showcustomprcnt,
                                accnt_id, accnt_type
                        FROM  flitem,accnt,period,flhead
                        WHERE ((flitem_flhead_id=pFlheadid)
                        AND (flitem_flgrp_id=pFlgrpid)
                        AND (flhead_id=flitem_flhead_id)
                        AND (accnt_id IN (SELECT * FROM getFlitemAccntId(flitem_id)))
                        AND (period_id IN  (SELECT * FROM getperiodid(pPeriodId,pInterval))))
                        ORDER BY flitem_id
                        ) AS flitem
                   LEFT OUTER JOIN trialbal
                     ON ((trialbal_accnt_id=accnt_id)
                     AND (trialbal_period_id=period_id))
                   LEFT OUTER JOIN budget
                     ON ((budget_accnt_id=accnt_id)
                     AND (budget_period_id=period_id))
             ORDER BY period_start) AS data
             GROUP BY flhead_type,flitem_id,flitem_order,flitem_subtract,flitem_showstart,flitem_showend,
                flitem_showdelta,flitem_showbudget,flitem_showdiff,flitem_showcustom,
                flitem_custom_source,flitem_showstartprcnt,flitem_showendprcnt,flitem_showdeltaprcnt,
                flitem_showbudgetprcnt,flitem_showdiffprcnt,flitem_showcustomprcnt,accnt_id,accnt_type
             UNION
            SELECT &#39;S&#39; AS type, flspec_id AS type_id,
                   flspec_order AS orderby,
                   FALSE AS summarize,
                   flspec_subtract AS subtract,
                   CASE WHEN (flspec_showstart) THEN findSpecialFinancial(&#39;S&#39;, flspec_type, pPeriodid)
                        ELSE NULL
                   END AS beginning,
                   CASE WHEN (flspec_showend) THEN findSpecialFinancial(&#39;E&#39;, flspec_type, pPeriodid)
                        ELSE NULL
                   END AS ending,
                   CASE WHEN (flspec_showdelta) THEN findSpecialFinancial(&#39;D&#39;, flspec_type, pPeriodid)
                        ELSE NULL
                   END AS debits,
                   CASE WHEN (flspec_showdelta) THEN findSpecialFinancial(&#39;C&#39;, flspec_type, pPeriodid)
                        ELSE NULL
                   END AS credits,
                   CASE WHEN (flspec_showbudget) THEN findSpecialFinancial(&#39;B&#39;, flspec_type, pPeriodid)
                        ELSE NULL
                   END AS budget,
                   CASE WHEN (flspec_showdiff) THEN findSpecialFinancial(&#39;E&#39;, flspec_type, pPeriodid) - findSpecialFinancial(&#39;S&#39;, flspec_type, pPeriodid)
                        ELSE NULL
                   END AS diff,
                   CASE WHEN (NOT flspec_showcustom) THEN NULL
                        WHEN (flspec_custom_source=&#39;F&#39;) THEN findSpecialFinancial(&#39;E&#39;, flspec_type, pPeriodid) - findSpecialFinancial(&#39;S&#39;, flspec_type, pPeriodid)
                        WHEN (flspec_custom_source IN (&#39;S&#39;, &#39;E&#39;, &#39;D&#39;, &#39;C&#39;, &#39;B&#39;)) THEN findSpecialFinancial(flspec_custom_source, flspec_type, pPeriodid)
                        ELSE 0.00
                   END AS custom,
                   CASE WHEN(flspec_showstartprcnt) THEN 0.00
                        ELSE NULL
                   END AS beginningprcnt,
                   CASE WHEN(flspec_showendprcnt) THEN 0.00
                        ELSE NULL
                   END AS endingprcnt,
                   CASE WHEN(flspec_showdeltaprcnt) THEN 0.00
                        ELSE NULL
                   END AS debitsprcnt,
                   CASE WHEN(flspec_showdeltaprcnt) THEN 0.00
                        ELSE NULL
                   END AS creditsprcnt,
                   CASE WHEN(flspec_showbudgetprcnt) THEN 0.00
                        ELSE NULL
                   END AS budgetprcnt,
                   CASE WHEN(flspec_showdiffprcnt) THEN 0.00
                        ELSE NULL
                   END AS diffprcnt,
                   CASE WHEN(flspec_showcustomprcnt) THEN 0.00
                        ELSE NULL
                   END AS customprcnt,
                   -1 AS accnt_id,
                   &#39;&#39; AS accnt_number
              FROM flspec
             WHERE ((flspec_flgrp_id=pFlgrpid)
               AND  (flspec_flhead_id=pFlheadid))
          ORDER BY orderby, accnt_number LOOP

    IF (_r.type = &#39;G&#39;) THEN

-- Create a record for the items sub items to be attached to and be able to update the total
      INSERT INTO flrpt
             (flrpt_flhead_id, flrpt_period_id, flrpt_username,
              flrpt_order,
              flrpt_level, flrpt_type, flrpt_type_id,
              flrpt_beginning, flrpt_ending,
              flrpt_debits, flrpt_credits, flrpt_budget, flrpt_diff, flrpt_custom,
              flrpt_beginningprcnt, flrpt_endingprcnt,
              flrpt_debitsprcnt, flrpt_creditsprcnt, flrpt_budgetprcnt, flrpt_diffprcnt, flrpt_customprcnt,
              flrpt_parent_id, flrpt_interval)
      VALUES (pFlheadid, pPeriodid, CURRENT_USER,
              (COALESCE(( SELECT MAX(flrpt_order)
                            FROM flrpt
                           WHERE ((flrpt_flhead_id=pFlheadid)
                             AND  (flrpt_period_id=pPeriodid)
                             AND (flrpt_interval=pInterval)
                             AND  (flrpt_username=CURRENT_USER))
                        ), 1) + 1),
              pLevel, _r.type, _r.type_id,
              _r.beginning, _r.ending,
              _r.debits, _r.credits, _r.budget, _r.diff, _r.custom,
              _r.beginningprcnt, _r.endingprcnt,
              _r.debitsprcnt, _r.creditsprcnt, _r.budgetprcnt, _r.diffprcnt, _r.customprcnt,
              pFlgrpid, pInterval);

      PERFORM insertFlGroup(pFlheadid, pPeriodid, _r.type_id, (pLevel + 1), (pSummarize OR _r.summarize), pInterval);

-- Update the parent item
      SELECT COALESCE(flrpt_beginning, 0.00) AS beginning,
             COALESCE(flrpt_ending, 0.00) AS ending,
             COALESCE(flrpt_debits, 0.00) AS debits,
             COALESCE(flrpt_credits, 0.00) AS credits,
             COALESCE(flrpt_budget, 0.00) AS budget,
             COALESCE(flrpt_diff, 0.00) AS diff,
             COALESCE(flrpt_custom, 0.00) AS custom INTO _g
        FROM flrpt
       WHERE ((flrpt_flhead_id=pFlheadid)
         AND  (flrpt_period_id=pPeriodid)
          AND (flrpt_interval=pInterval)
         AND  (flrpt_username=CURRENT_USER)
         AND  (flrpt_type=_r.type)
         AND  (flrpt_type_id=_r.type_id));
      IF (_r.subtract) THEN
        UPDATE flrpt
           SET flrpt_beginning = flrpt_beginning - _g.beginning,
               flrpt_ending    = flrpt_ending    - _g.ending,
               flrpt_debits    = flrpt_debits    - _g.debits,
               flrpt_credits   = flrpt_credits   - _g.credits,
               flrpt_budget    = flrpt_budget    - _g.budget,
               flrpt_diff      = flrpt_diff      - _g.diff,
               flrpt_custom    = flrpt_custom    - _g.custom
         WHERE ((flrpt_flhead_id=pFlheadid)
           AND  (flrpt_period_id=pPeriodid)
           AND  (flrpt_interval=pInterval)
           AND  (flrpt_username=CURRENT_USER)
           AND  (flrpt_type=&#39;G&#39;)
           AND  (flrpt_type_id=pFlgrpid));
      ELSE
        UPDATE flrpt
           SET flrpt_beginning = flrpt_beginning + _g.beginning,
               flrpt_ending    = flrpt_ending    + _g.ending,
               flrpt_debits    = flrpt_debits    + _g.debits,
               flrpt_credits   = flrpt_credits   + _g.credits,
               flrpt_budget    = flrpt_budget    + _g.budget,
               flrpt_diff      = flrpt_diff      + _g.diff,
               flrpt_custom    = flrpt_custom    + _g.custom
         WHERE ((flrpt_flhead_id=pFlheadid)
           AND  (flrpt_period_id=pPeriodid)
           AND  (flrpt_interval=pInterval)
           AND  (flrpt_username=CURRENT_USER)
           AND  (flrpt_type=&#39;G&#39;)
           AND  (flrpt_type_id=pFlgrpid));
      END IF;

-- If we are summarizing then we need to remove the record we created now that we have updated the total
      IF (pSummarize) THEN
        DELETE FROM flrpt
         WHERE ((flrpt_flhead_id=pFlheadid)
          AND  (flrpt_period_id=pPeriodid)
          AND  (flrpt_interval=pInterval)
          AND  (flrpt_username=CURRENT_USER)
          AND  (flrpt_type=_r.type)
          AND  (flrpt_type_id=_r.type_id));
      END IF;

    ELSE
      IF (_r.type = &#39;I&#39; OR _r.type = &#39;S&#39; ) THEN

-- If we are not summarizing then create a new entry for this record
        IF (NOT pSummarize) THEN
          INSERT INTO flrpt
                 (flrpt_flhead_id, flrpt_period_id, flrpt_username,
                  flrpt_order,
                  flrpt_level, flrpt_type, flrpt_type_id,
                  flrpt_beginning, flrpt_ending,
                  flrpt_debits, flrpt_credits, flrpt_budget, flrpt_diff, flrpt_custom,
                  flrpt_beginningprcnt, flrpt_endingprcnt,
                  flrpt_debitsprcnt, flrpt_creditsprcnt, flrpt_budgetprcnt, flrpt_diffprcnt, flrpt_customprcnt,
                  flrpt_parent_id,flrpt_accnt_id,flrpt_interval)
          VALUES (pFlheadid, pPeriodid, CURRENT_USER,
                  (COALESCE(( SELECT MAX(flrpt_order)
                               FROM flrpt
                              WHERE ((flrpt_flhead_id=pFlheadid)
                                AND  (flrpt_period_id=pPeriodid)
                                AND  (flrpt_interval=pInterval)
                                AND  (flrpt_username=CURRENT_USER))
                            ), 1) + 1),
                  pLevel, _r.type, _r.type_id,
                  _r.beginning, _r.ending,
                  _r.debits, _r.credits, _r.budget, _r.diff, _r.custom,
                  _r.beginningprcnt, _r.endingprcnt,
                  _r.debitsprcnt, _r.creditsprcnt, _r.budgetprcnt, _r.diffprcnt, _r.customprcnt,
                  pFlgrpid,_r.accnt_id,pInterval);
        END IF;

-- Update the parent item
        IF (_r.subtract) THEN
          UPDATE flrpt
             SET flrpt_beginning = flrpt_beginning - COALESCE(_r.beginning, 0.00),
                 flrpt_ending    = flrpt_ending    - COALESCE(_r.ending, 0.00),
                 flrpt_debits    = flrpt_debits    - COALESCE(_r.debits, 0.00),
                 flrpt_credits   = flrpt_credits   - COALESCE(_r.credits, 0.00),
                 flrpt_budget    = flrpt_budget    - COALESCE(_r.budget, 0.00),
                 flrpt_diff      = flrpt_diff      - COALESCE(_r.diff, 0.00),
                 flrpt_custom    = flrpt_custom    - COALESCE(_r.custom, 0.00)
           WHERE ((flrpt_flhead_id=pFlheadid)
             AND  (flrpt_period_id=pPeriodid)
             AND  (flrpt_interval=pInterval)
             AND  (flrpt_username=CURRENT_USER)
             AND  (flrpt_type=&#39;G&#39;)
             AND  (flrpt_type_id=pFlgrpid));
        ELSE
          UPDATE flrpt
             SET flrpt_beginning = flrpt_beginning + COALESCE(_r.beginning, 0.00),
                 flrpt_ending    = flrpt_ending    + COALESCE(_r.ending, 0.00),
                 flrpt_debits    = flrpt_debits    + COALESCE(_r.debits, 0.00),
                 flrpt_credits   = flrpt_credits   + COALESCE(_r.credits, 0.00),
                 flrpt_budget    = flrpt_budget    + COALESCE(_r.budget, 0.00),
                 flrpt_diff      = flrpt_diff      + COALESCE(_r.diff, 0.00),
                 flrpt_custom    = flrpt_custom    + COALESCE(_r.custom, 0.00)
           WHERE ((flrpt_flhead_id=pFlheadid)
             AND  (flrpt_interval=pInterval)
             AND  (flrpt_period_id=pPeriodid)
             AND  (flrpt_username=CURRENT_USER)
             AND  (flrpt_type=&#39;G&#39;)
             AND  (flrpt_type_id=pFlgrpid));
        END IF;

      END IF;
    END IF;

  END LOOP;

  IF (NOT pSummarize) THEN
-- If this group wants a summarized line create it here.
    IF (_subtotal) THEN
      INSERT INTO flrpt
             (flrpt_flhead_id, flrpt_period_id, flrpt_username,
              flrpt_order,
              flrpt_level, flrpt_type, flrpt_type_id,
              flrpt_beginning, flrpt_ending,
              flrpt_debits, flrpt_credits, flrpt_budget, flrpt_diff, flrpt_custom,
              flrpt_beginningprcnt, flrpt_endingprcnt,
              flrpt_debitsprcnt, flrpt_creditsprcnt, flrpt_budgetprcnt, flrpt_diffprcnt, flrpt_customprcnt,
              flrpt_parent_id, flrpt_altname,flrpt_interval )
      SELECT pFlheadid, pPeriodid, CURRENT_USER,
             (COALESCE(( SELECT MAX(flrpt_order)
                           FROM flrpt
                          WHERE ((flrpt_flhead_id=pFlheadid)
                            AND  (flrpt_period_id=pPeriodid)
                            AND  (flrpt_interval=pInterval)
                            AND  (flrpt_username=CURRENT_USER))
                       ), 1) + 1),
             pLevel, &#39;T&#39;, -1,
             CASE WHEN (flgrp_showstart) THEN flrpt_beginning
                  ELSE NULL
             END,
             CASE WHEN (flgrp_showend) THEN flrpt_ending
                  ELSE NULL
             END,
             CASE WHEN (flgrp_showdelta) THEN flrpt_debits
                  ELSE NULL
             END,
             CASE WHEN (flgrp_showdelta) THEN flrpt_credits
                  ELSE NULL
             END,
             CASE WHEN (flgrp_showbudget) THEN flrpt_budget
                  ELSE NULL
             END,
             CASE WHEN (flgrp_showdiff) THEN flrpt_diff
                  ELSE NULL
             END,
             CASE WHEN (flgrp_showcustom) THEN flrpt_custom
                  ELSE NULL
             END,
             CASE WHEN (flgrp_showstartprcnt) THEN flrpt_beginningprcnt
                  ELSE NULL
             END,
             CASE WHEN (flgrp_showendprcnt) THEN flrpt_endingprcnt
                  ELSE NULL
             END,
             CASE WHEN (flgrp_showdeltaprcnt) THEN flrpt_debitsprcnt
                  ELSE NULL
             END,
             CASE WHEN (flgrp_showdeltaprcnt) THEN flrpt_creditsprcnt
                  ELSE NULL
             END,
             CASE WHEN (flgrp_showbudgetprcnt) THEN flrpt_budgetprcnt
                  ELSE NULL
             END,
             CASE WHEN (flgrp_showdiffprcnt) THEN flrpt_diffprcnt
                  ELSE NULL
             END,
             CASE WHEN (flgrp_showcustomprcnt) THEN flrpt_customprcnt
                  ELSE NULL
             END,
             pFlgrpid,
             CASE WHEN (flgrp_usealtsubtotal) THEN flgrp_altsubtotal
                  ELSE NULL
             END, pInterval
        FROM flrpt, flgrp
       WHERE ((flrpt_flhead_id=flgrp_flhead_id)
         AND  (flrpt_type_id=flgrp_id)
         AND  (flrpt_flhead_id=pFlheadid)
         AND  (flrpt_period_id=pPeriodid)
         AND  (flrpt_interval=pInterval)
         AND  (flrpt_username=CURRENT_USER)
         AND  (flrpt_type=&#39;G&#39;)
         AND  (flrpt_type_id=pFlgrpid));
    END IF;
  END IF;

  return TRUE;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.insertgltransaction-integer-text-text-text-text-integer-integer-integer-numeric-date">insertgltransaction( integer, text, text, text, text, integer, integer, integer, numeric, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pJournalNumber ALIAS FOR $1;
  pSource ALIAS FOR $2;
  pDocType ALIAS FOR $3;
  pDocNumber ALIAS FOR $4;
  pNotes ALIAS FOR $5;
  pCreditid ALIAS FOR $6;
  pDebitid ALIAS FOR $7;
  pMiscid ALIAS FOR $8;
  pAmount ALIAS FOR $9;
  pDistDate ALIAS FOR $10;
  _return INTEGER;

BEGIN

  SELECT insertGLTransaction( pJournalNumber, pSource, pDocType, pDocNumber, pNotes,
                              pCreditid, pDebitid, pMiscid, pAmount, pDistDate, TRUE) INTO _return;

  RETURN _return;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.insertgltransaction-integer-text-text-text-text-integer-integer-integer-numeric-date-boolean">insertgltransaction( integer, text, text, text, text, integer, integer, integer, numeric, date, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pJournalNumber ALIAS FOR $1;
  pSource ALIAS FOR $2;
  pDocType ALIAS FOR $3;
  pDocNumber ALIAS FOR $4;
  pNotes ALIAS FOR $5;
  pCreditid ALIAS FOR $6;
  pDebitid ALIAS FOR $7;
  pMiscid ALIAS FOR $8;
  pAmount ALIAS FOR $9;
  pDistDate ALIAS FOR $10;
  pPostTrialBal ALIAS FOR $11;
  _debitid INTEGER;
  _creditid INTEGER;
  _sequence INTEGER;
  _check INTEGER;

BEGIN

--  Is there anything to post?
--  ToDo - 2 should really be the scale of the base currency
  IF (round(pAmount, 2) = 0) THEN
    RETURN -3;
  END IF;

--  Validate pDebitid
  IF (pDebitid IN (SELECT accnt_id FROM accnt)) THEN
    _debitid := pDebitid;
  ELSE
    SELECT metric_value::INTEGER INTO _debitid
    FROM metric
    WHERE (metric_name=&#39;UnassignedAccount&#39;);
  END IF;

--  Validate pCreditid
  IF (pCreditid IN (SELECT accnt_id FROM accnt)) THEN
    _creditid := pCreditid;
  ELSE
    SELECT metric_value::INTEGER INTO _creditid
    FROM metric
    WHERE (metric_name=&#39;UnassignedAccount&#39;);
  END IF;

-- refuse to accept postings into closed periods if any of the accounts disallow it
  IF (SELECT NOT BOOL_AND(accnt_closedpost) AND
             BOOL_AND(COALESCE(period_closed, FALSE))
      FROM accnt LEFT OUTER JOIN
           period ON (pDistDate BETWEEN period_start AND period_end)
      WHERE (accnt_id IN (_creditid, _debitid))) THEN
    RAISE EXCEPTION &#39;Cannot post to closed period (%).&#39;, pDistDate;
    RETURN -4;  -- remove raise exception when all callers check return code
  END IF;

--  Grab a sequence for the pair
  SELECT fetchGLSequence() INTO _sequence;

--  First the credit
  INSERT INTO gltrans
  ( gltrans_journalnumber, gltrans_posted, gltrans_exported, gltrans_created, gltrans_date,
    gltrans_sequence, gltrans_accnt_id, gltrans_source,
    gltrans_doctype, gltrans_docnumber, gltrans_notes,
    gltrans_misc_id, gltrans_amount )
  VALUES
  ( pJournalNumber, FALSE, FALSE, CURRENT_TIMESTAMP, pDistDate,
    _sequence, _creditid, pSource,
    pDocType, pDocNumber, pNotes,
    pMiscid, pAmount );

--  Now the debit
  INSERT INTO gltrans
  ( gltrans_journalnumber, gltrans_posted, gltrans_exported, gltrans_created, gltrans_date,
    gltrans_sequence, gltrans_accnt_id, gltrans_source,
    gltrans_doctype, gltrans_docnumber, gltrans_notes,
    gltrans_misc_id, gltrans_amount )
  VALUES
  ( pJournalNumber, FALSE, FALSE, CURRENT_TIMESTAMP, pDistDate,
    _sequence, _debitid, pSource,
    pDocType, pDocNumber, pNotes,
    pMiscid, (pAmount * -1) );

  IF (pPostTrialBal) THEN
    PERFORM postIntoTrialBalance(_sequence);
  END IF;

  RETURN _sequence;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.insertgltransaction-text-text-text-text-integer-integer-integer-numeric-date">insertgltransaction( text, text, text, text, integer, integer, integer, numeric, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSource ALIAS FOR $1;
  pDocType ALIAS FOR $2;
  pDocNumber ALIAS FOR $3;
  pNotes ALIAS FOR $4;
  pCreditid ALIAS FOR $5;
  pDebitid ALIAS FOR $6;
  pMiscid ALIAS FOR $7;
  pAmount ALIAS FOR $8;
  pDistDate ALIAS FOR $9;
  _return INTEGER;

BEGIN

  SELECT insertGLTransaction( fetchJournalNumber(&#39;GL-MISC&#39;),
                              pSource, pDocType, pDocNumber, pNotes,
                              pCreditid, pDebitid, pMiscid, pAmount, pDistDate) INTO _return;

  RETURN _return;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.insertgltransaction-text-text-text-text-integer-integer-integer-numeric-date-boolean">insertgltransaction( text, text, text, text, integer, integer, integer, numeric, date, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSource ALIAS FOR $1;
  pDocType ALIAS FOR $2;
  pDocNumber ALIAS FOR $3;
  pNotes ALIAS FOR $4;
  pCreditid ALIAS FOR $5;
  pDebitid ALIAS FOR $6;
  pMiscid ALIAS FOR $7;
  pAmount ALIAS FOR $8;
  pDistDate ALIAS FOR $9;
  pPostTrialBal ALIAS FOR $10;
  _return INTEGER;

BEGIN

  SELECT insertGLTransaction( fetchJournalNumber(&#39;GL-MISC&#39;),
                              pSource, pDocType, pDocNumber, pNotes,
                              pCreditid, pDebitid, pMiscid, pAmount, pDistDate, pPostTrialBal) INTO _return;

  RETURN _return;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.insertintoglseries-integer-text-text-text-integer-numeric">insertintoglseries( integer, text, text, text, integer, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSequence ALIAS FOR $1;
  pSource ALIAS FOR $2;
  pDocType ALIAS FOR $3;
  pDocNumber ALIAS FOR $4;
  pAccntid ALIAS FOR $5;
  pAmount ALIAS FOR $6;
  _returnValue INTEGER;

BEGIN

  SELECT insertIntoGLSeries( pSequence, pSource, pDocType, pDocNumber,
                             pAccntid, pAmount, CURRENT_DATE, &#39;&#39; ) INTO _returnValue;

  RETURN _returnValue;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.insertintoglseries-integer-text-text-text-integer-numeric-date">insertintoglseries( integer, text, text, text, integer, numeric, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSequence ALIAS FOR $1;
  pSource ALIAS FOR $2;
  pDocType ALIAS FOR $3;
  pDocNumber ALIAS FOR $4;
  pAccntid ALIAS FOR $5;
  pAmount ALIAS FOR $6;
  pDistDate ALIAS FOR $7;
  _returnValue INTEGER;

BEGIN

  SELECT insertIntoGLSeries( pSequence, pSource, pDocType, pDocNumber,
                             pAccntid, pAmount, pDistDate, &#39;&#39; ) INTO _returnValue;

  RETURN _returnValue;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.insertintoglseries-integer-text-text-text-integer-numeric-date-text">insertintoglseries( integer, text, text, text, integer, numeric, date, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSequence ALIAS FOR $1;
  pSource ALIAS FOR $2;
  pDocType ALIAS FOR $3;
  pDocNumber ALIAS FOR $4;
  pAccntid ALIAS FOR $5;
  pAmount ALIAS FOR $6;
  pDistDate ALIAS FOR $7;
  pNotes ALIAS FOR $8;
  _glseriesid INTEGER;

BEGIN

--  Verify the target accnt
  IF ( (pAccntid IS NULL) OR (pAccntid = -1) ) THEN
    RETURN -1;
  END IF;

-- refuse to accept postings into closed periods if any of the accounts disallow it
  IF (SELECT NOT BOOL_AND(accnt_closedpost) AND
	     BOOL_AND(COALESCE(period_closed, FALSE))
      FROM accnt LEFT OUTER JOIN
	   period ON (pDistDate BETWEEN period_start AND period_end)
      WHERE (accnt_id = pAccntid)) THEN
    RAISE EXCEPTION &#39;Cannot post to closed period (%).&#39;, pDistDate;
    RETURN -4;	-- remove raise exception when all callers check return code
  END IF;

-- Insert into the glseries
  SELECT NEXTVAL(&#39;glseries_glseries_id_seq&#39;) INTO _glseriesid;
  INSERT INTO glseries
  ( glseries_id, glseries_sequence, glseries_source, glseries_doctype, glseries_docnumber,
    glseries_accnt_id, glseries_amount, glseries_distdate, glseries_notes )
  VALUES
  ( _glseriesid, pSequence, pSource, pDocType, pDocNumber,
    pAccntid, pAmount, pDistDate, pNotes );

  RETURN _glseriesid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.insertinvoice-api.invoice">insertinvoice( api.invoice )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
	pNew ALIAS FOR $1;
BEGIN
	-- NOTE: (SELECT getCustId(...)) seems redundant, but it actually produces
	-- a HUGE performance increase because it makes the Postgres query planner
	-- use an index scan rather than an sequential table scan on cust_id
	INSERT INTO invchead (
		invchead_invcnumber,
		invchead_ordernumber,
		invchead_invcdate,
		invchead_shipdate,
		invchead_orderdate,
		invchead_printed,
		invchead_posted,
		invchead_salesrep_id,
		invchead_commission,
		invchead_taxauth_id,
		invchead_terms_id,
		invchead_cust_id,
		invchead_billto_name,
		invchead_billto_address1,
		invchead_billto_address2,
		invchead_billto_address3,
		invchead_billto_city,
		invchead_billto_state,
		invchead_billto_zipcode,
		invchead_billto_country,
		invchead_billto_phone,
		invchead_shipto_id,
		invchead_shipto_name,
		invchead_shipto_address1,
		invchead_shipto_address2,
		invchead_shipto_address3,
		invchead_shipto_city,
		invchead_shipto_state,
		invchead_shipto_zipcode,
		invchead_shipto_country,
		invchead_shipto_phone,
		invchead_ponumber,
		invchead_shipvia,
		invchead_prj_id,
		invchead_fob,
		invchead_misc_descrip,
		invchead_misc_amount,
		invchead_misc_accnt_id,
		invchead_freight,
		invchead_curr_id,
		invchead_tax,
		invchead_tax_curr_id,
		invchead_adjtax_id,
		invchead_adjtax_ratea,
		invchead_adjtax_rateb,
		invchead_adjtax_ratec,
		invchead_freighttax_id,
		invchead_freighttax_ratea,
		invchead_freighttax_rateb,
		invchead_freighttax_ratec,
		invchead_payment,
		invchead_notes
	) SELECT
		(CASE -- use a case here so we don&#39;t unnecessarily fetch a new invoice number
			WHEN pNew.invoice_number IS NULL THEN CAST(fetchInvcNumber() AS TEXT)
			ELSE pNew.invoice_number
		END),
		pNew.order_number,
		COALESCE(pNew.invoice_date, CURRENT_DATE),
		pNew.ship_date,
		pNew.order_date,
		FALSE,
		FALSE,
		COALESCE(getSalesRepId(pNew.sales_rep),shipto_salesrep_id,cust_salesrep_id),
		COALESCE(pNew.commission, 0),
		CASE
			WHEN pNew.tax_authority = &#39;None&#39; THEN NULL
			ELSE COALESCE(getTaxAuthId(pNew.tax_authority),shipto_taxauth_id,cust_taxauth_id)
		END,
		COALESCE(getTermsId(pNew.terms),cust_terms_id),
		(SELECT getCustId(pNew.customer_number)),
		pNew.billto_name,
		pNew.billto_address1,
		pNew.billto_address2,
		pNew.billto_address3,
		pNew.billto_city,
		pNew.billto_state,
		pNew.billto_postal_code,
		pNew.billto_country,
		COALESCE(pNew.billto_phone, &#39;&#39;),
		COALESCE(shipto_id,-1),
		pNew.shipto_name,
		pNew.shipto_address1,
		pNew.shipto_address2,
		pNew.shipto_address3,
		pNew.shipto_city,
		pNew.shipto_state,
		pNew.shipto_postal_code,
		pNew.shipto_country,
		pNew.shipto_phone,
		COALESCE(pNew.po_number, &#39;&#39;),
		COALESCE(pNew.ship_via,shipto_shipvia,cust_shipvia),
		COALESCE(getPrjId(pNew.project_number),-1),
		COALESCE(pNew.fob,fetchDefaultFob((
			SELECT CAST(usrpref_value AS INTEGER) 
			FROM usrpref, whsinfo
			WHERE ((warehous_id=CAST(usrpref_value AS INTEGER))
				AND (warehous_shipping)
				AND (warehous_active)
				AND (usrpref_username=current_user)
				AND (usrpref_name=&#39;PreferredWarehouse&#39;)
			)
		))),
		pNew.misc_charge_description,
		COALESCE(pNew.misc_charge, 0),
		COALESCE(getGlAccntId(pNew.misc_charge_account_number),-1),
		COALESCE(pNew.freight, 0),
		COALESCE(getCurrId(pNew.currency),(
			SELECT cust_curr_id
			FROM custinfo
			WHERE (cust_id=(SELECT getCustId(pNew.customer_number)))
		),basecurrid()),
		0, -- invchead_tax has a NOT NULL constraint (will be recalculated by trigger)
		COALESCE(getCurrId(pNew.tax_currency),getCurrId(pNew.currency),(
			SELECT cust_curr_id
			FROM custinfo
			WHERE (cust_id=(SELECT getCustId(pNew.customer_number)))
		),basecurrid()),
		getTaxId(NULLIF(pNew.misc_tax_adjustment_code,&#39;None&#39;)),
		COALESCE(pNew.misc_tax_adjustment_amount_a,0),
		COALESCE(pNew.misc_tax_adjustment_amount_b,0),
		COALESCE(pNew.misc_tax_adjustment_amount_c,0),
		getTaxId(NULLIF(pNew.freight_tax_code,&#39;None&#39;)),
		COALESCE(pNew.freight_tax_amount_a,0),
		COALESCE(pNew.freight_tax_amount_b,0),
		COALESCE(pNew.freight_tax_amount_c,0),
		COALESCE(pNew.payment,0),
		COALESCE(pNew.notes,&#39;&#39;)
	FROM custinfo
		LEFT OUTER JOIN shiptoinfo ON (shipto_id=(SELECT CASE
			WHEN getShiptoId(pNew.customer_number,pNew.shipto_number) IS NOT NULL
				THEN getShiptoId(pNew.customer_number,pNew.shipto_number)
			ELSE (SELECT shipto_id FROM shiptoinfo WHERE shipto_cust_id=cust_id AND shipto_default)
		END))
	WHERE cust_id = (SELECT getCustId(pNew.customer_number));
	RETURN TRUE;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.insertinvoicelineitem-api.invoiceline">insertinvoicelineitem( api.invoiceline )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
	pNew ALIAS FOR $1;
	_r RECORD;
BEGIN
	INSERT INTO invcitem (
		invcitem_invchead_id,
		invcitem_linenumber,
		invcitem_item_id,
		invcitem_warehous_id,
		invcitem_custpn,
		invcitem_number,
		invcitem_descrip,
		invcitem_ordered,
		invcitem_billed,
		invcitem_custprice,
		invcitem_price,
		invcitem_notes,
		invcitem_salescat_id,
		invcitem_tax_id,
		invcitem_taxtype_id,
		invcitem_tax_pcta,
		invcitem_tax_pctb,
		invcitem_tax_pctc,
		invcitem_tax_ratea,
		invcitem_tax_rateb,
		invcitem_tax_ratec,
		invcitem_qty_uom_id,
		invcitem_qty_invuomratio,
		invcitem_price_uom_id,
		invcitem_price_invuomratio
	) SELECT
		invchead_id,
		COALESCE(pNew.line_number,(
			SELECT (COALESCE(MAX(invcitem_linenumber), 0) + 1)
			FROM invcitem WHERE (invcitem_invchead_id=invchead_id)
		)),
		COALESCE(item_id, -1),
		-1,
		pNew.customer_part_number,
		(CASE WHEN item_id IS NULL THEN pNew.misc_item_number ELSE NULL END),
		(CASE WHEN item_id IS NULL THEN pNew.misc_item_description ELSE NULL END),
		pNew.qty_ordered,
		COALESCE(pNew.qty_billed, 0),
		0, -- invcitem_custprice
		COALESCE(pNew.net_unit_price,itemPrice(item_id,invchead_cust_id,
			invchead_shipto_id,pNew.qty_ordered,invchead_curr_id,invchead_orderdate)),
		COALESCE(pNew.notes,&#39;&#39;),
		CASE
			WHEN item_id IS NULL THEN
				(SELECT salescat_id FROM salescat WHERE salescat_name = pNew.sales_category)
			ELSE NULL
		END,
		tax_id,
		taxtype_id,
		tax_ratea,
		tax_rateb,
		tax_ratec,
		COALESCE(pNew.tax_amount_a, (tax_ratea * COALESCE(pNew.net_unit_price,itemPrice(
			item_id,invchead_cust_id,invchead_shipto_id,pNew.qty_ordered,invchead_curr_id,invchead_orderdate))), 0),
		COALESCE(pNew.tax_amount_b, (tax_rateb * COALESCE(pNew.net_unit_price,itemPrice(
			item_id,invchead_cust_id,invchead_shipto_id,pNew.qty_ordered,invchead_curr_id,invchead_orderdate))), 0),
		COALESCE(pNew.tax_amount_c, (tax_ratec * COALESCE(pNew.net_unit_price,itemPrice(
			item_id,invchead_cust_id,invchead_shipto_id,pNew.qty_ordered,invchead_curr_id,invchead_orderdate))), 0),
		CASE
			WHEN item_id IS NOT NULL THEN
				COALESCE((SELECT uom_id FROM uom WHERE (uom_name=pNew.qty_uom)), item_price_uom_id)
			ELSE NULL
		END,
		CASE
			WHEN item_id IS NOT NULL THEN
				itemuomtouomratio(item_id,
					COALESCE((SELECT uom_id FROM uom WHERE uom_name=pNew.qty_uom),item_price_uom_id),
					item_price_uom_id
				)
			ELSE 1
		END,
		CASE
			WHEN item_id IS NOT NULL THEN
				COALESCE((SELECT uom_id FROM uom WHERE uom_name=pNew.price_uom),item_price_uom_id)
			ELSE NULL
		END,
		CASE
			WHEN item_id IS NOT NULL THEN
				itemuomtouomratio(item_id,
					COALESCE((SELECT uom_id FROM uom WHERE uom_name=pNew.price_uom),item_price_uom_id),
					item_price_uom_id
				)
			ELSE 1
		END
	FROM invchead
		LEFT OUTER JOIN item ON (item_id=getItemId(pNew.item_number))
		LEFT OUTER JOIN taxtype ON (taxtype_id=CASE
			WHEN pNew.tax_type IS NULL THEN getItemTaxType(item_id,invchead_taxauth_id)
			WHEN pNew.tax_type = &#39;None&#39; THEN NULL
			ELSE (SELECT taxtype_id FROM taxtype WHERE taxtype_name=pNew.tax_type)
		END)
		LEFT OUTER JOIN tax ON (tax_id=CASE 
			WHEN pNew.tax_code IS NULL THEN getTaxSelection(
				invchead_taxauth_id,getItemTaxType(item_id,invchead_taxauth_id))
			WHEN pNew.tax_code = &#39;None&#39; THEN NULL
			ELSE getTaxId(pNew.tax_code)
		END)
	WHERE (invchead_invcnumber=pNew.invoice_number) AND (invchead_posted=FALSE);
	RETURN TRUE;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.insertitemcost-integer-integer-integer-numeric-boolean">insertitemcost( integer, integer, integer, numeric, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
pItemId ALIAS FOR $1;
pCostElemId ALIAS FOR $2;
pCurrId ALIAS FOR $3;
pCost ALIAS FOR $4;
pPostToStandard ALIAS FOR $5;
_itemcost_id INTEGER;
_update_return INTEGER;
_postcost_return BOOLEAN;

--This function is used with the api.itemcost View for updating and inserting
--into the itemcosts table

BEGIN
  IF (pCost IS NULL OR pCost &lt; 0) THEN
    RAISE EXCEPTION &#39;itemcost Actual Cost Invalid &#39;, pCost;
  END IF;

-- Check for uniqueness
  SELECT itemcost_id INTO _itemcost_id
  FROM itemcost
  WHERE ( (itemcost_item_id = pItemId)
    AND   (itemcost_costelem_id = pCostElemId)
    AND   (NOT itemcost_lowlevel) );
  IF (FOUND) THEN
    RAISE EXCEPTION &#39;itemcost already exists for this Item and Cost Element&#39;;
  END IF;
  
  IF (pCost &gt; 0) THEN
    SELECT NEXTVAL(&#39;itemcost_itemcost_id_seq&#39;) INTO _itemcost_id;
    INSERT INTO itemcost
      ( itemcost_id, itemcost_item_id, itemcost_costelem_id, itemcost_lowlevel,
        itemcost_stdcost, itemcost_posted, itemcost_actcost, itemcost_updated, itemcost_curr_id )
    VALUES
      ( _itemcost_id, pItemId, pCostElemId, FALSE,
        0, startOfTime(), pCost, CURRENT_DATE, pCurrId );

    --Only Post Cost to standard if the parameter is set to true
    IF (pPostToStandard) THEN
      IF (NOT checkPrivilege(&#39;PostStandardCosts&#39;)) THEN
        RAISE EXCEPTION &#39;You do not have privileges to poststandard itemcosts. Set api.itemcost post_to_standard to false&#39;;
      END IF;
      SELECT postcost(_itemcost_id) INTO _postcost_return;       
      IF (NOT _postcost_return) THEN
        RETURN -2;
      END IF;
    END IF;
  ELSE 
    RETURN -1;
  END IF;

  RETURN _itemcost_id;
  
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.intervaltominutes-interval">intervaltominutes( interval )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: SQL</h3>
        
        <pre>
  SELECT (EXTRACT(DAY FROM $1) * 24 * 60 +
	  EXTRACT(HOUR FROM $1) * 60 +
	  EXTRACT(MINUTE FROM $1) +
	  ROUND((EXTRACT(SECOND FROM $1) / 60)::NUMERIC, 4))::NUMERIC AS result
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.invadjustment-integer-numeric-text-text">invadjustment( integer, numeric, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN invAdjustment($1, $2, $3, $4, CURRENT_TIMESTAMP, NULL);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.invadjustment-integer-numeric-text-text-timestamp-with-time-zone">invadjustment( integer, numeric, text, text, timestamp with time zone )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN invAdjustment($1, $2, $3, $4, $5, NULL);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.invadjustment-integer-numeric-text-text-timestamp-with-time-zone-numeric">invadjustment( integer, numeric, text, text, timestamp with time zone, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid     ALIAS FOR $1;
  pQty            ALIAS FOR $2;
  pDocumentNumber ALIAS FOR $3;
  pComments       ALIAS FOR $4;
  pGlDistTS       ALIAS FOR $5;
  pCostValue      ALIAS FOR $6;
  _invhistid      INTEGER;
  _itemlocSeries  INTEGER;

BEGIN

--  Make sure the passed itemsite points to a real item
  IF ( ( SELECT (item_type IN (&#39;R&#39;, &#39;F&#39;, &#39;J&#39;))
         FROM itemsite, item
         WHERE ( (itemsite_item_id=item_id)
          AND (itemsite_id=pItemsiteid) ) ) ) THEN
    RETURN 0;
  END IF;

  SELECT NEXTVAL(&#39;itemloc_series_seq&#39;) INTO _itemlocSeries;
  SELECT postInvTrans( itemsite_id, &#39;AD&#39;, pQty,
                       &#39;I/M&#39;, &#39;AD&#39;, pDocumentNumber, &#39;&#39;,
                       (&#39;Miscellaneous Adjustment for item &#39; || item_number || E&#39;\n&#39; ||  pComments),
                       costcat_asset_accnt_id, costcat_adjustment_accnt_id,
                       _itemlocSeries, pGlDistTS, pCostValue) INTO _invhistid
  FROM itemsite, item, costcat
  WHERE ( (itemsite_item_id=item_id)
   AND (itemsite_costcat_id=costcat_id)
   AND (itemsite_id=pItemsiteid) );

  RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.invexpense-integer-numeric-integer-text-text">invexpense( integer, numeric, integer, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
 RETURN invExpense($1, $2, $3, $4, $5, CURRENT_TIMESTAMP);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.invexpense-integer-numeric-integer-text-text-timestamp-with-time-zone">invexpense( integer, numeric, integer, text, text, timestamp with time zone )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pQty ALIAS FOR $2;
  pExpcatid ALIAS FOR $3;
  pDocumentNumber ALIAS FOR $4;
  pComments ALIAS FOR $5;
  pGlDistTS     ALIAS FOR $6;
  _invhistid INTEGER;
  _itemlocSeries INTEGER;

BEGIN

--  Make sure the passed itemsite points to a real item
  IF ( ( SELECT (item_type IN (&#39;R&#39;, &#39;F&#39;, &#39;J&#39;))
         FROM itemsite, item
         WHERE ( (itemsite_item_id=item_id)
          AND (itemsite_id=pItemsiteid) ) ) ) THEN
    RETURN 0;
  END IF;

  SELECT NEXTVAL(&#39;itemloc_series_seq&#39;) INTO _itemlocSeries;
  SELECT postInvTrans( itemsite_id, &#39;EX&#39;, pQty,
                       &#39;I/M&#39;, &#39;EX&#39;, pDocumentNumber, &#39;&#39;,
                       (&#39;Material Expense for item &#39; || item_number || E&#39;\n&#39; ||  pComments),
                       expcat_exp_accnt_id, costcat_asset_accnt_id,
                       _itemlocSeries, pGlDistTS) INTO _invhistid
  FROM itemsite, item, costcat, expcat
  WHERE ( (itemsite_item_id=item_id)
   AND (itemsite_costcat_id=costcat_id)
   AND (itemsite_id=pItemsiteid)
   AND (expcat_id=pExpcatid) );

  RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.invhisttrig">invhisttrig(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

  IF (NEW.invhist_qoh_after &lt; 0 AND NEW.invhist_costmethod = &#39;A&#39;) THEN
    RAISE EXCEPTION &#39;Invhist (%) is recording with average costing and is not allowed to have a negative quantity on hand.&#39;, NEW.itemsite_id;
  END IF;

  IF ( ( SELECT itemsite_freeze
         FROM itemsite
         WHERE (itemsite_id=NEW.invhist_itemsite_id) ) ) THEN
    NEW.invhist_posted = FALSE;
  END IF;

  -- never change the created timestamp, which defaults to CURRENT_TIMESTAMP
  IF (TG_OP != &#39;INSERT&#39;) THEN
    NEW.invhist_created = OLD.invhist_created;
  END IF;

  RETURN NEW;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.invreceipt-integer-numeric-text-text-text">invreceipt( integer, numeric, text, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN invReceipt($1, $2, $3, $4, $5, CURRENT_TIMESTAMP, NULL);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.invreceipt-integer-numeric-text-text-text-timestamp-with-time-zone">invreceipt( integer, numeric, text, text, text, timestamp with time zone )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN invReceipt($1, $2, $3, $4, $5, $6, NULL);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.invreceipt-integer-numeric-text-text-text-timestamp-with-time-zone-numeric">invreceipt( integer, numeric, text, text, text, timestamp with time zone, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pQty ALIAS FOR $2;
  pOrdernumber ALIAS FOR $3;
  pDocumentNumber ALIAS FOR $4;
  pComments ALIAS FOR $5;
  pGlDistTS     ALIAS FOR $6;
  pCostValue ALIAS FOR $7;
  _invhistid INTEGER;
  _itemlocSeries INTEGER;

BEGIN

--  Make sure the passed itemsite points to a real item
  IF ( ( SELECT (item_type IN (&#39;R&#39;, &#39;F&#39;, &#39;J&#39;))
         FROM itemsite, item
         WHERE ( (itemsite_item_id=item_id)
          AND (itemsite_id=pItemsiteid) ) ) ) THEN
    RETURN 0;
  END IF;

  SELECT NEXTVAL(&#39;itemloc_series_seq&#39;) INTO _itemlocSeries;
  SELECT postInvTrans( itemsite_id, &#39;RX&#39;, pQty,
                       &#39;I/M&#39;, &#39;RX&#39;, pDocumentNumber, &#39;&#39;,
                       (&#39;Miscellaneous Receipt for item &#39; || item_number || E&#39;\n&#39; ||  pComments),
                       costcat_asset_accnt_id, costcat_liability_accnt_id,
                       _itemlocSeries, pGlDistTS, pCostValue) INTO _invhistid
  FROM itemsite, item, costcat
  WHERE ( (itemsite_item_id=item_id)
   AND (itemsite_costcat_id=costcat_id)
   AND (itemsite_id=pItemsiteid) );

  RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.invreceiptissuetowomatl-integer-numeric-text-integer-text">invreceiptissuetowomatl( integer, numeric, text, integer, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pQty ALIAS FOR $2;
  pDocumentNumber ALIAS FOR $3;
  pWomatlid ALIAS FOR $4;
  pComments ALIAS FOR $5;
  _test INTEGER;
  _invhistid INTEGER;

BEGIN

--  Make sure the passed itemsite points to a real item
  IF ( ( SELECT (item_type IN (&#39;R&#39;, &#39;F&#39;, &#39;J&#39;))
         FROM itemsite, item
         WHERE ( (itemsite_item_id=item_id)
          AND (itemsite_id=pItemsiteid) ) ) ) THEN
    RETURN 0;
  END IF;

--  Verify the the passed womatl requires the passed itemsite
  SELECT womatl_id INTO _test
  FROM womatl, itemsite
  WHERE ( (womatl_itemsite_id=itemsite_id)
   AND (itemsite_id=pItemsiteid)
   AND (womatl_id=pWomatlid) );
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

--  Post the Receipt
  SELECT postInvTrans( itemsite_id, &#39;RX&#39;, pQty,
                       &#39;I/M&#39;, &#39;WO&#39;, formatWoNumber(womatl_wo_id), pDocumentNumber, pComments,
                       costcat_asset_accnt_id, costcat_liability_accnt_id, 0 ) INTO _invhistid
  FROM womatl, itemsite, costcat
  WHERE ( (itemsite_costcat_id=costcat_id)
   AND (itemsite_id=pItemsiteid)
   AND (womatl_id=pWomatlid) );

--  Post the Issue
  SELECT postInvTrans( ci.itemsite_id, &#39;IM&#39;, pQty,
                       &#39;I/M&#39;, &#39;WO&#39;, formatWoNumber(wo_id), pDocumentNumber, pComments,
                       pc.costcat_wip_accnt_id, cc.costcat_asset_accnt_id, 0 ) INTO _invhistid
  FROM itemsite AS ci, itemsite AS pi,
       costcat AS cc, costcat AS pc,
       womatl, wo
  WHERE ( (ci.itemsite_costcat_id=cc.costcat_id)
   AND (pi.itemsite_costcat_id=pc.costcat_id)
   AND (ci.itemsite_id=pItemsiteid)
   AND (womatl_wo_id=wo_id)
   AND (wo_itemsite_id=pi.itemsite_id)
   AND (womatl_id=pWomatlid) );

--  Increase the parent W/O&#39;s WIP value by the value of the issued components
  UPDATE wo
  SET wo_wipvalue = (wo_wipvalue + (CASE WHEN(itemsite_costmethod=&#39;A&#39;) THEN avgcost(itemsite_id) ELSE stdcost(itemsite_item_id) END * pQty)),
      wo_postedvalue = (wo_postedvalue + (CASE WHEN(itemsite_costmethod=&#39;A&#39;) THEN avgcost(itemsite_id) ELSE stdcost(itemsite_item_id) END * pQty))
  FROM itemsite, womatl
  WHERE ( (womatl_itemsite_id=itemsite_id)
   AND (womatl_wo_id=wo_id)
   AND (womatl_id=pWomatlid) );

  UPDATE womatl
     SET womatl_qtyiss = (womatl_qtyiss + itemuomtouom(itemsite_item_id, NULL, womatl_uom_id, pQty)),
         womatl_lastissue = CURRENT_DATE
    FROM itemsite
   WHERE((womatl_id=pWomatlid)
     AND (womatl_itemsite_id=itemsite_id));

  UPDATE wo
  SET wo_status=&#39;I&#39;
  FROM womatl
  WHERE ( (womatl_wo_id=wo_id)
   AND (wo_status &lt;&gt; &#39;I&#39;)
   AND (wo_id=pWomatlid) );

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.invscrap-integer-numeric-text-text">invscrap( integer, numeric, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN invScrap($1, $2, $3, $4, CURRENT_TIMESTAMP);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.invscrap-integer-numeric-text-text-timestamp-with-time-zone">invscrap( integer, numeric, text, text, timestamp with time zone )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pQty ALIAS FOR $2;
  pDocumentNumber ALIAS FOR $3;
  pComments ALIAS FOR $4;
  pGlDistTS     ALIAS FOR $5;
  _invhistid INTEGER;
  _itemlocSeries INTEGER;

BEGIN

--  Make sure the passed itemsite points to a real item
  IF ( ( SELECT (item_type IN (&#39;R&#39;, &#39;F&#39;, &#39;J&#39;))
         FROM itemsite, item
         WHERE ( (itemsite_item_id=item_id)
          AND (itemsite_id=pItemsiteid) ) ) ) THEN
    RETURN 0;
  END IF;

  SELECT NEXTVAL(&#39;itemloc_series_seq&#39;) INTO _itemlocSeries;
  SELECT postInvTrans( itemsite_id, &#39;SI&#39;, pQty,
                       &#39;I/M&#39;, &#39;SI&#39;, pDocumentNumber, &#39;&#39;,
                       (&#39;Material Scrap for item &#39; || item_number || E&#39;\n&#39; ||  pComments),
                       costcat_scrap_accnt_id, costcat_asset_accnt_id,
                       _itemlocSeries, pGlDistTS) INTO _invhistid
  FROM itemsite, item, costcat
  WHERE ( (itemsite_item_id=item_id)
   AND (itemsite_costcat_id=costcat_id)
   AND (itemsite_id=pItemsiteid) );

  RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.isnumeric-text">isnumeric( text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pText ALIAS FOR $1;
  _cursor INTEGER;

BEGIN

  IF ( (LENGTH(pText) = 0) OR (pText IS NULL) ) THEN
    RETURN FALSE;
  END IF;

  FOR _cursor IN 1..LENGTH(pText) LOOP
    IF (SUBSTRING(pText FROM _cursor FOR 1) NOT IN ( &#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;,
                                                     &#39;5&#39; ,&#39;6&#39; ,&#39;7&#39; ,&#39;8&#39; ,&#39;9&#39; )) THEN
      RETURN FALSE;
    END IF;
  END LOOP;

  RETURN TRUE;

END;

</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.issueallbalancetoshipping-integer">issueallbalancetoshipping( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN issueAllBalanceToShipping(&#39;SO&#39;, $1, 0, NULL);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.issueallbalancetoshipping-text-integer-integer-timestamp-with-time-zone">issueallbalancetoshipping( text, integer, integer, timestamp with time zone )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pordertype		ALIAS FOR $1;
  pheadid		ALIAS FOR $2;
  _itemlocSeries	INTEGER 		 := $3;
  _timestamp		TIMESTAMP WITH TIME ZONE := $4;
  _s			RECORD;

BEGIN
  IF (pordertype = &#39;SO&#39;) THEN
    FOR _s IN SELECT coitem_id,
		     noNeg(coitem_qtyord - coitem_qtyshipped + coitem_qtyreturned -
			   ( SELECT COALESCE(SUM(shipitem_qty), 0)
			     FROM shipitem, shiphead
			     WHERE ( (shipitem_orderitem_id=coitem_id)
			      AND (shipitem_shiphead_id=shiphead_id)
			      AND (NOT shiphead_shipped)
			      AND (shiphead_order_type=pordertype) ) ) ) AS balance
	      FROM coitem LEFT OUTER JOIN (itemsite JOIN item ON (itemsite_item_id=item_id)) ON (coitem_itemsite_id=itemsite_id)
	      WHERE ( (coitem_status NOT IN (&#39;C&#39;,&#39;X&#39;))
                AND (item_type != &#39;K&#39;)
	       AND (coitem_cohead_id=pheadid) ) LOOP

      IF (_s.balance &lt;&gt; 0) THEN
	_itemlocSeries := issueToShipping(pordertype, _s.coitem_id, _s.balance, _itemlocSeries, _timestamp);
	IF (_itemlocSeries &lt; 0) THEN
	  EXIT;
	END IF;
      END IF;
    END LOOP;

  ELSEIF (pordertype = &#39;TO&#39;) THEN
    FOR _s IN SELECT toitem_id,
		     noNeg( toitem_qty_ordered - toitem_qty_shipped -
			   ( SELECT COALESCE(SUM(shipitem_qty), 0)
			     FROM shipitem, shiphead
			     WHERE ( (shipitem_orderitem_id=toitem_id)
			      AND (shipitem_shiphead_id=shiphead_id)
			      AND (NOT shiphead_shipped)
			      AND (shiphead_order_type=pordertype) ) ) ) AS balance
	      FROM toitem
	      WHERE ( (toitem_status NOT IN (&#39;C&#39;,&#39;X&#39;))
	       AND (toitem_tohead_id=pheadid) ) LOOP

      IF (_s.balance &lt;&gt; 0) THEN
	_itemlocSeries := issueToShipping(pordertype, _s.toitem_id, _s.balance, _itemlocSeries, _timestamp);
	IF (_itemlocSeries &lt; 0) THEN
	  EXIT;
	END IF;
      END IF;
    END LOOP;

  ELSE
    RETURN -1;
  END IF;

  RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.issuelinebalancetoshipping-integer">issuelinebalancetoshipping( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN issueLineBalanceToShipping(&#39;SO&#39;, $1, NULl);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.issuelinebalancetoshipping-text-integer-timestamp-with-time-zone">issuelinebalancetoshipping( text, integer, timestamp with time zone )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pordertype		ALIAS FOR $1;
  pitemid		ALIAS FOR $2;
  ptimestamp		ALIAS FOR $3;
  _itemlocSeries	INTEGER := 0;
  _qty			NUMERIC;

BEGIN
  IF (pordertype = &#39;SO&#39;) THEN
    SELECT noNeg( coitem_qtyord - coitem_qtyshipped + coitem_qtyreturned - 
                ( SELECT COALESCE(SUM(shipitem_qty), 0)
                  FROM shipitem, shiphead
                  WHERE ((shipitem_orderitem_id=coitem_id)
                    AND  (shipitem_shiphead_id=shiphead_id)
                    AND  (NOT shiphead_shipped) ) ) ) INTO _qty
    FROM coitem
    WHERE (coitem_id=pitemid);
  ELSEIF (pordertype = &#39;TO&#39;) THEN
    SELECT noNeg( toitem_qty_ordered - toitem_qty_shipped - 
                ( SELECT COALESCE(SUM(shipitem_qty), 0)
                  FROM shipitem, shiphead
                  WHERE ( (shipitem_orderitem_id=toitem_id)
                   AND (shipitem_shiphead_id=shiphead_id)
                   AND (NOT shiphead_shipped) ) ) ) INTO _qty
    FROM toitem
    WHERE (toitem_id=pitemid);
  ELSE
    RETURN -1;
  END IF;

  IF (_qty &gt; 0) THEN
    _itemlocSeries := issueToShipping(pordertype, pitemid, _qty, 0, ptimestamp);
  END IF;

  RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.issues-text">issues( text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTransType ALIAS FOR $1;

BEGIN
  IF (pTransType IN (&#39;IM&#39;, &#39;IB&#39;, &#39;IT&#39;)) THEN
    RETURN TRUE;
  ELSE
    RETURN FALSE;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.issuetoshipping-integer-numeric">issuetoshipping( integer, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN issueToShipping(&#39;SO&#39;, $1, $2, 0, CURRENT_TIMESTAMP);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.issuetoshipping-integer-numeric-integer">issuetoshipping( integer, numeric, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN issueToShipping(&#39;SO&#39;, $1, $2, $3, CURRENT_TIMESTAMP);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.issuetoshipping-text-integer-numeric-integer-timestamp-with-time-zone">issuetoshipping( text, integer, numeric, integer, timestamp with time zone )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pordertype		ALIAS FOR $1;
  pitemid		ALIAS FOR $2;
  pQty			ALIAS FOR $3;
  _itemlocSeries	INTEGER			 := $4;
  _timestamp		TIMESTAMP WITH TIME ZONE := $5;
  _coholdtype		TEXT;
  _invhistid		INTEGER;
  _shipheadid		INTEGER;
  _shipnumber		INTEGER;
  _cntctid              INTEGER;
  _r                    RECORD;
  _p                    RECORD;
  _m                    RECORD;
  _value                NUMERIC;
  _warehouseid		 INTEGER;

BEGIN

  IF (_timestamp IS NULL) THEN
    _timestamp := CURRENT_TIMESTAMP;
  END IF;

  IF (_itemlocSeries = 0) THEN
    _itemlocSeries := NEXTVAL(&#39;itemloc_series_seq&#39;);
  END IF;

  IF (pordertype = &#39;SO&#39;) THEN

    -- Check site security
    SELECT warehous_id INTO _warehouseid
    FROM coitem,itemsite,site()
    WHERE ((coitem_id=pitemid)
    AND (itemsite_id=coitem_itemsite_id)
    AND (warehous_id=itemsite_warehous_id));
          
    IF (NOT FOUND) THEN
      RETURN 0;
    END IF;

    -- Check auto registration
    IF ( SELECT COALESCE(itemsite_autoreg, FALSE)
         FROM coitem JOIN itemsite ON (itemsite_id=coitem_itemsite_id)
         WHERE (coitem_id=pitemid) ) THEN
      SELECT COALESCE(crmacct_cntct_id_1, -1) INTO _cntctid
      FROM coitem JOIN cohead ON (cohead_id=coitem_cohead_id)
                  JOIN crmacct ON (crmacct_cust_id=cohead_cust_id)
      WHERE (coitem_id=pitemid);
      IF (_cntctid = -1) THEN
        RETURN -15;
      END IF;
    END IF; 
  
    SELECT shiphead_id INTO _shipheadid
    FROM shiphead, coitem
    WHERE ((shiphead_order_id=coitem_cohead_id)
      AND  (NOT shiphead_shipped)
      AND  (coitem_id=pitemid)
      AND  (shiphead_order_type=pordertype));
    IF (NOT FOUND) THEN
      SELECT NEXTVAL(&#39;shiphead_shiphead_id_seq&#39;) INTO _shipheadid;

      _shipnumber := fetchShipmentNumber();
      IF (_shipnumber &lt; 0) THEN
	RETURN -10;
      END IF;

      SELECT cohead_holdtype INTO _coholdtype
      FROM cohead, coitem
      WHERE ((cohead_id=coitem_cohead_id)
        AND  (coitem_id=pitemid));

      IF (_coholdtype = &#39;C&#39;) THEN
	RETURN -12;
      ELSIF (_coholdtype = &#39;P&#39;) THEN
	RETURN -13;
      ELSIF (_coholdtype = &#39;R&#39;) THEN
	RETURN -14;
      END IF;

      INSERT INTO shiphead
      ( shiphead_id, shiphead_number, shiphead_order_id, shiphead_order_type,
	shiphead_shipped,
	shiphead_sfstatus, shiphead_shipvia, shiphead_shipchrg_id,
	shiphead_freight, shiphead_freight_curr_id,
	shiphead_shipdate, shiphead_notes, shiphead_shipform_id )
      SELECT _shipheadid, _shipnumber, coitem_cohead_id, pordertype,
	     FALSE,
	     &#39;N&#39;, cohead_shipvia,
	     CASE WHEN (cohead_shipchrg_id &lt;= 0) THEN NULL
	          ELSE cohead_shipchrg_id
	     END,
	     cohead_freight, cohead_curr_id,
	     _timestamp::DATE, cohead_shipcomments,
	     CASE WHEN cohead_shipform_id = -1 THEN NULL
	          ELSE cohead_shipform_id
	     END
      FROM cohead, coitem
      WHERE ((coitem_cohead_id=cohead_id)
         AND (coitem_id=pitemid) );

      UPDATE pack
      SET pack_shiphead_id = _shipheadid,
	  pack_printed = FALSE
      FROM coitem
      WHERE ((pack_head_id=coitem_cohead_id)
	AND  (pack_shiphead_id IS NULL)
	AND  (pack_head_type=&#39;SO&#39;)
	AND  (coitem_id=pitemid));

    ELSE
      UPDATE pack
      SET pack_printed = FALSE
      FROM coitem
      WHERE ((pack_head_id=coitem_cohead_id)
	AND  (pack_shiphead_id=_shipheadid)
	AND  (pack_head_type=&#39;SO&#39;)
	AND  (coitem_id=pitemid));
    END IF;

    --See if this is inventory or job item and value accordingly
    SELECT coitem_itemsite_id, coitem_qty_invuomratio,
           item_id, item_type, itemsite_costmethod INTO _r
    FROM coitem, itemsite, item
    WHERE ((coitem_id=pitemid)
    AND (itemsite_id=coitem_itemsite_id)
    AND (itemsite_item_id=item_id));

    IF (_r.item_type != &#39;J&#39;) THEN
      -- This is inventory so handle with g/l transaction
      SELECT postInvTrans( itemsite_id, &#39;SH&#39;, pQty * coitem_qty_invuomratio,
			   &#39;S/R&#39;, porderType,
			   formatSoNumber(coitem_id), shiphead_number,
                           (&#39;Issue &#39; || item_number || &#39; to Shipping for customer &#39; || cohead_billtoname),
			   costcat_shipasset_accnt_id, costcat_asset_accnt_id,
			   _itemlocSeries, _timestamp ) INTO _invhistid
      FROM coitem, cohead, itemsite, item, costcat, shiphead
      WHERE ( (coitem_cohead_id=cohead_id)
       AND (coitem_itemsite_id=itemsite_id)
       AND (itemsite_item_id=item_id)
       AND (itemsite_costcat_id=costcat_id)
       AND (coitem_id=pitemid)
       AND (shiphead_id=_shipheadid) );

      SELECT (invhist_unitcost * invhist_invqty) INTO _value
      FROM invhist
      WHERE (invhist_id=_invhistid);
      
    ELSE
    -- This is a job so deal with costing and work order
    
       --Backflush eligble material
      FOR _m IN SELECT womatl_id, womatl_qtyper, womatl_scrap, womatl_qtywipscrap,
		     womatl_qtyreq - roundQty(item_fractional, womatl_qtyper * wo_qtyord) AS preAlloc
	      FROM womatl, wo, itemsite, item
	      WHERE ((womatl_issuemethod IN (&#39;L&#39;, &#39;M&#39;))
		AND  (womatl_wo_id=wo_id)
		AND  (womatl_itemsite_id=itemsite_id)
		AND  (itemsite_item_id=item_id)
		AND  (wo_ordtype = &#39;S&#39;)
		AND  (wo_ordid = pitemid))
      LOOP
        -- CASE says: don&#39;t use scrap % if someone already entered actual scrap
        SELECT issueWoMaterial(_m.womatl_id,
	  CASE WHEN _m.womatl_qtywipscrap &gt; _m.preAlloc THEN
	    pQty * _m.womatl_qtyper + (_m.womatl_qtywipscrap - _m.preAlloc)
	  ELSE
	    pQty * _m.womatl_qtyper * (1 + _m.womatl_scrap)
	  END, _itemlocSeries) INTO _itemlocSeries;

        UPDATE womatl
        SET womatl_issuemethod=&#39;L&#39;
        WHERE ( (womatl_issuemethod=&#39;M&#39;)
          AND (womatl_id=_m.womatl_id) );
    
      END LOOP;
      
      --Get Work Order Info
      SELECT
        wo_id, formatwonumber(wo_id) AS f_wonumber,wo_status, wo_qtyord, wo_qtyrcv,
        CASE WHEN (wo_cosmethod = &#39;D&#39;) THEN
          COALESCE(wo_wipvalue, 0)
        ELSE
          COALESCE(round((wo_wipvalue - (wo_postedvalue / wo_qtyord * (wo_qtyord - wo_qtyrcv - pQty))),2), 0)
        END AS value INTO _p
      FROM wo
      WHERE ((wo_ordtype = &#39;S&#39;)
      AND (wo_ordid = pitemid));
      IF (NOT FOUND) THEN
        RAISE EXCEPTION &#39;Work order % not found and can not be shipped&#39;,_p.f_wonumber;
      END IF;
      IF (_p.wo_status = &#39;C&#39;) THEN
        RAISE EXCEPTION &#39;Work order % is closed and can not be shipped&#39;,_p.f_wonumber;
      END IF;

  --  Distribute to G/L, debit Shipping Asset, credit WIP
      PERFORM MIN(insertGLTransaction( &#39;S/R&#39;, &#39;SO&#39;, formatSoNumber(pItemid), &#39;Issue to Shipping&#39;,
                                     costcat_wip_accnt_id,
				     costcat_shipasset_accnt_id,
                                     -1, _p.value, current_date )) 
      FROM itemsite, costcat
      WHERE ( (itemsite_costcat_id=costcat_id)
      AND (itemsite_id=_r.coitem_itemsite_id) );

  --  Update the work order about what happened
      UPDATE wo SET 
        wo_qtyrcv = wo_qtyrcv + pQty * _r.coitem_qty_invuomratio,
        wo_wipvalue = wo_wipvalue - _p.value,
        wo_status = 
          CASE WHEN (wo_qtyord - wo_qtyrcv - pQty &lt;= 0) THEN
            &#39;C&#39;
          ELSE
            wo_status
          END
      WHERE (wo_id=_p.wo_id);

      _value := _p.value;
    END IF;

    INSERT INTO shipitem
    ( shipitem_shiphead_id, shipitem_orderitem_id, shipitem_qty,
      shipitem_transdate, shipitem_trans_username, shipitem_invoiced,
      shipitem_value, shipitem_invhist_id )
    VALUES
    ( _shipheadid, pitemid, pQty,
      _timestamp, CURRENT_USER, FALSE,
      _value, 
      CASE WHEN _invhistid = -1 THEN
        NULL
      ELSE 
        _invhistid
      END );

    UPDATE coitem
       SET coitem_qtyreserved = noNeg(coitem_qtyreserved - pQty)
     WHERE(coitem_id=pitemid);

  ELSEIF (pordertype = &#39;TO&#39;) THEN

    -- Check site security
    IF (fetchMetricBool(&#39;MultiWhs&#39;)) THEN
      SELECT warehous_id INTO _warehouseid
      FROM toitem, tohead, site()
      WHERE ( (toitem_id=pitemid)
        AND   (tohead_id=toitem_tohead_id)
        AND   (warehous_id=tohead_src_warehous_id) );
          
      IF (NOT FOUND) THEN
        RETURN 0;
      END IF;
    END IF;

    SELECT postInvTrans( itemsite_id, &#39;SH&#39;, pQty, &#39;S/R&#39;,
			 pordertype, CAST(tohead_number AS text), &#39;&#39;, &#39;Issue to Shipping&#39;,
			 costcat_shipasset_accnt_id, costcat_asset_accnt_id,
			 _itemlocSeries, _timestamp) INTO _invhistid
    FROM tohead, toitem, itemsite, costcat
    WHERE ((tohead_id=toitem_tohead_id)
      AND  (itemsite_item_id=toitem_item_id)
      AND  (itemsite_warehous_id=tohead_src_warehous_id)
      AND  (itemsite_costcat_id=costcat_id)
      AND  (toitem_id=pitemid) );

    SELECT shiphead_id INTO _shipheadid
    FROM shiphead, toitem
    WHERE ((shiphead_order_id=toitem_tohead_id)
      AND  (NOT shiphead_shipped)
      AND  (toitem_id=pitemid)
      AND  (shiphead_order_type=pordertype));

    IF (NOT FOUND) THEN
      _shipheadid := NEXTVAL(&#39;shiphead_shiphead_id_seq&#39;);

      _shipnumber := fetchShipmentNumber();
      IF (_shipnumber &lt; 0) THEN
	RETURN -10;
      END IF;

      INSERT INTO shiphead
      ( shiphead_id, shiphead_number, shiphead_order_id, shiphead_order_type,
	shiphead_shipped,
	shiphead_sfstatus, shiphead_shipvia, shiphead_shipchrg_id,
	shiphead_freight, shiphead_freight_curr_id,
	shiphead_shipdate, shiphead_notes, shiphead_shipform_id )
      SELECT _shipheadid, _shipnumber, tohead_id, pordertype,
	     FALSE,
	     &#39;N&#39;, tohead_shipvia, tohead_shipchrg_id,
	     tohead_freight + SUM(toitem_freight), tohead_freight_curr_id,
	     _timestamp::DATE, tohead_shipcomments, tohead_shipform_id
      FROM tohead, toitem
      WHERE ((toitem_tohead_id=tohead_id)
         AND (tohead_id IN (SELECT toitem_tohead_id
			    FROM toitem
			    WHERE (toitem_id=pitemid))) )
      GROUP BY tohead_id, tohead_shipvia, tohead_shipchrg_id, tohead_freight,
	       tohead_freight_curr_id, tohead_shipcomments, tohead_shipform_id;
    END IF;

    INSERT INTO shipitem
    ( shipitem_shiphead_id, shipitem_orderitem_id, shipitem_qty,
      shipitem_transdate, shipitem_trans_username, shipitem_value,
      shipitem_invhist_id )
    SELECT
      _shipheadid, pitemid, pQty,
      _timestamp, CURRENT_USER, invhist_invqty * invhist_unitcost,
      _invhistid
    FROM toitem, item, invhist
    WHERE ((toitem_id=pitemid)
    AND (item_id=toitem_item_id)
    AND (invhist_id=_invhistid));

  ELSE
    RETURN -11;
  END IF;

  RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.issuewomaterial-integer-numeric">issuewomaterial( integer, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWomatlid ALIAS FOR $1;
  pQty ALIAS FOR $2;
  _itemlocSeries INTEGER;

BEGIN

  SELECT NEXTVAL(&#39;itemloc_series_seq&#39;) INTO _itemlocSeries;
  RETURN issueWoMaterial(pWomatlid, pQty, _itemlocSeries);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.issuewomaterial-integer-numeric-boolean">issuewomaterial( integer, numeric, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWomatlid ALIAS FOR $1;
  pQty ALIAS FOR $2;
  pMarkPush ALIAS FOR $3;
  _itemlocSeries INTEGER;

BEGIN

  SELECT issueWoMaterial(pWomatlid, pQty) INTO _itemlocSeries;
  IF (_itemlocSeries &lt; 0) THEN
    RETURN _itemlocSeries;
  END IF;

  IF (pMarkPush) THEN
    UPDATE womatl
    SET womatl_issuemethod=&#39;S&#39;
    WHERE ((womatl_issuemethod=&#39;M&#39;)
     AND (womatl_id=pWomatlid));
  END IF;

  RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.issuewomaterial-integer-numeric-integer">issuewomaterial( integer, numeric, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWomatlid ALIAS FOR $1;
  pQty ALIAS FOR $2;
  pItemlocSeries ALIAS FOR $3;
  _p RECORD;
  _invhistid INTEGER;
  _itemlocSeries INTEGER;

BEGIN

  SELECT item_id,
         itemsite_id AS c_itemsite_id,
         wo_itemsite_id AS p_itemsite_id,
         itemsite_loccntrl, itemsite_controlmethod,
         womatl_wo_id, womatl_qtyreq,
         roundQty(item_fractional, itemuomtouom(itemsite_item_id, womatl_uom_id, NULL, pQty)) AS qty,
         formatWoNumber(wo_id) AS woNumber,
         CASE WHEN(itemsite_costmethod=&#39;A&#39;) THEN avgcost(itemsite_id) ELSE stdcost(itemsite_item_id) END AS cost,
         womatl_issuemethod AS issueMethod INTO _p
  FROM wo, womatl, itemsite, item
  WHERE ( (womatl_wo_id=wo_id)
   AND (womatl_itemsite_id=itemsite_id)
   AND (itemsite_item_id=item_id)
   AND (womatl_id=pWomatlid) )
  FOR UPDATE;

  IF (pQty &lt; 0) THEN
    RETURN pItemlocSeries;
  END IF;

  IF (pItemlocSeries &lt;&gt; 0) THEN
    _itemlocSeries := pItemlocSeries;
  ELSE
    SELECT NEXTVAL(&#39;itemloc_series_seq&#39;) INTO _itemlocSeries;
  END IF;
  SELECT postInvTrans( ci.itemsite_id, &#39;IM&#39;, _p.qty,
                      &#39;W/O&#39;, &#39;WO&#39;, _p.woNumber, &#39;&#39;, (&#39;Material &#39; || item_number || &#39; Issue to Work Order&#39;),
                      pc.costcat_wip_accnt_id, cc.costcat_asset_accnt_id, _itemlocSeries ) INTO _invhistid
  FROM itemsite AS ci, itemsite AS pi,
       costcat AS cc, costcat AS pc,
       item
  WHERE ( (ci.itemsite_costcat_id=cc.costcat_id)
   AND (pi.itemsite_costcat_id=pc.costcat_id)
   AND (ci.itemsite_id=_p.c_itemsite_id)
   AND (pi.itemsite_id=_p.p_itemsite_id)
   AND (ci.itemsite_item_id=item_id) );

--  Create linkage to the transaction created
  IF (_invhistid != -1) THEN
    INSERT INTO womatlpost (womatlpost_womatl_id,womatlpost_invhist_id)
                VALUES (pWomatlid,_invhistid);
  END IF;

--  Increase the parent W/O&#39;s WIP value by the value of the issued components
  UPDATE wo
  SET wo_wipvalue = (wo_wipvalue + (_p.cost * _p.qty)),
      wo_postedvalue = (wo_postedvalue + (_p.cost * _p.qty))
  WHERE (wo_id=_p.womatl_wo_id);

  UPDATE womatl
  SET womatl_qtyiss = (womatl_qtyiss + pQty),
      womatl_lastissue = CURRENT_DATE
  WHERE (womatl_id=pWomatlid);

  UPDATE wo
  SET wo_status=&#39;I&#39;
  WHERE ( (wo_status &lt;&gt; &#39;I&#39;)
   AND (wo_id=_p.womatl_wo_id) );

  RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.issuewomaterial-integer-numeric-integer-boolean">issuewomaterial( integer, numeric, integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWomatlid ALIAS FOR $1;
  pQty ALIAS FOR $2;
  pItemlocSeries ALIAS FOR $3;
  pMarkPush ALIAS FOR $4;
  _itemlocSeries INTEGER;

BEGIN

  SELECT issueWoMaterial(pWomatlid, pQty, pItemlocSeries) INTO _itemlocSeries;

  IF (pMarkPush) THEN
    UPDATE womatl
    SET womatl_issuemethod=&#39;S&#39;
    WHERE ((womatl_issuemethod=&#39;M&#39;)
     AND (womatl_id=pWomatlid));
  END IF;

  RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.issuewomaterialbatch-integer">issuewomaterialbatch( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid ALIAS FOR $1;
  _itemlocSeries INTEGER;
  _r RECORD;
  _woNumber TEXT;

BEGIN

  SELECT NEXTVAL(&#39;itemloc_series_seq&#39;) INTO _itemlocSeries;

  FOR _r IN SELECT womatl_id, 
              CASE WHEN (womatl_qtyreq &gt;= 0) THEN
                roundQty(itemuomfractionalbyuom(item_id, womatl_uom_id), noNeg(womatl_qtyreq - womatl_qtyiss))
              ELSE
                roundQty(itemuomfractionalbyuom(item_id, womatl_uom_id), noNeg(womatl_qtyiss * -1)) 
              END AS qty
            FROM womatl, itemsite, item
            WHERE ( (womatl_itemsite_id=itemsite_id)
             AND (itemsite_item_id=item_id)
             AND (womatl_issuemethod IN (&#39;S&#39;, &#39;M&#39;))
             AND (womatl_wo_id=pWoid) ) LOOP

    IF (_r.qty &gt; 0) THEN
      SELECT issueWoMaterial(_r.womatl_id, _r.qty, _itemlocSeries, TRUE) INTO _itemlocSeries;
    END IF;

  END LOOP;

  RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.itemaltcapinvrat-integer">itemaltcapinvrat( integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;

BEGIN
  RETURN itemUOMRatioByType(pItemid, &#39;AltCapacity&#39;);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.itemaltcapuom-integer">itemaltcapuom( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;

BEGIN
  RETURN itemUOMByType(pItemid, &#39;AltCapacity&#39;);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.itemcapinvrat-integer">itemcapinvrat( integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;

BEGIN
  RETURN itemUOMRatioByType(pItemid, &#39;Capacity&#39;);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.itemcapuom-integer">itemcapuom( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;

BEGIN
  RETURN itemUOMByType(pItemid, &#39;Capacity&#39;);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.itemcharprice-integer-integer-text-integer-integer-numeric">itemcharprice( integer, integer, text, integer, integer, numeric )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pCharid ALIAS FOR $2;
  pCharValue ALIAS FOR $3;
  pCustid ALIAS FOR $4;
  pShiptoid ALIAS FOR $5;
  pQty ALIAS FOR $6;

BEGIN
  RETURN itemCharPrice(pItemid, pCharid, pCharValue, pCustid, pShiptoid, pQty, baseCurrId(), CURRENT_DATE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.itemcharprice-integer-integer-text-integer-integer-numeric-integer">itemcharprice( integer, integer, text, integer, integer, numeric, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pCharid ALIAS FOR $2;
  pCharValue ALIAS FOR $3;
  pCustid ALIAS FOR $4;
  pShiptoid ALIAS FOR $5;
  pQty ALIAS FOR $6;
  pCurrid ALIAS FOR $7;

BEGIN
  RETURN itemCharPrice(pItemid, pCharid, pCharValue, pCustid, pShiptoid, pQty, pCurrid, CURRENT_DATE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.itemcharprice-integer-integer-text-integer-integer-numeric-integer-date">itemcharprice( integer, integer, text, integer, integer, numeric, integer, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pCharid ALIAS FOR $2;
  pCharValue ALIAS FOR $3;
  pCustid ALIAS FOR $4;
  pShiptoid ALIAS FOR $5;
  pQty ALIAS FOR $6;
  pCurrid ALIAS FOR $7;
  pEffective ALIAS FOR $8;
  _price NUMERIC;
  _sales NUMERIC;
  _item RECORD;
  _iteminvpricerat NUMERIC;

BEGIN
-- Return the itemCharPrice in the currency passed in as pCurrid

-- Get a value here so we do not have to call the function several times
  SELECT iteminvpricerat(pItemid)
    INTO _iteminvpricerat;

-- First get a sales price if any so we when we find other prices
-- we can determine if we want that price or this price.
--  Check for a Sale Price
  SELECT currToCurr(ipshead_curr_id, pCurrid,
                      ipsprice_price - (ipsprice_price * cust_discntprcnt),
                      pEffective) INTO _sales
  FROM (
  SELECT ipsitem_ipshead_id AS ipsprice_ipshead_id,
         itemuomtouom(ipsitem_item_id, ipsitem_qty_uom_id, NULL, ipsitem_qtybreak) AS ipsprice_qtybreak,
         (ipsitemchar_price * itemuomtouomratio(ipsitem_item_id, NULL, ipsitem_price_uom_id)) * _iteminvpricerat AS ipsprice_price
    FROM ipsitem,ipsitemchar
   WHERE((ipsitem_item_id=pItemid)
    AND (ipsitemchar_char_id=pCharid)
    AND (ipsitemchar_value=pCharValue)
    AND (ipsitemchar_ipsitem_id=ipsitem_id))
       ) AS
        ipsprice, ipshead, sale, custinfo
  WHERE ( (ipsprice_ipshead_id=ipshead_id)
   AND (sale_ipshead_id=ipshead_id)
   AND (CURRENT_DATE BETWEEN sale_startdate AND sale_enddate)
   AND (ipsprice_qtybreak &lt;= pQty)
   AND (cust_id=pCustid) )
  ORDER BY ipsprice_qtybreak DESC, ipsprice_price ASC
  LIMIT 1;

--  Check for a Customer Shipto Price
  SELECT currToCurr(ipshead_curr_id, pCurrid, ipsprice_price, pEffective) INTO _price
  FROM (
  SELECT ipsitem_ipshead_id AS ipsprice_ipshead_id,
         itemuomtouom(ipsitem_item_id, ipsitem_qty_uom_id, NULL, ipsitem_qtybreak) AS ipsprice_qtybreak,
         (ipsitemchar_price * itemuomtouomratio(ipsitem_item_id, NULL, ipsitem_price_uom_id)) * _iteminvpricerat AS ipsprice_price
    FROM ipsitem,ipsitemchar
   WHERE ((ipsitem_item_id=pItemid)
    AND (ipsitemchar_char_id=pCharid)
    AND (ipsitemchar_value=pCharValue)
    AND (ipsitemchar_ipsitem_id=ipsitem_id))
       ) AS
        ipsprice, ipshead, ipsass
  WHERE ( (ipsprice_ipshead_id=ipshead_id)
   AND (ipsass_ipshead_id=ipshead_id)
   AND (CURRENT_DATE BETWEEN ipshead_effective AND (ipshead_expires - 1))
   AND (ipsprice_qtybreak &lt;= pQty)
   AND (ipsass_shipto_id != -1)
   AND (ipsass_shipto_id=pShiptoid) )
  ORDER BY ipsprice_qtybreak DESC, ipsprice_price ASC
  LIMIT 1;

  IF (_price IS NOT NULL) THEN
    IF ((_sales IS NOT NULL) AND (_sales &lt; _price)) THEN
      RETURN _sales;
    END IF;
    RETURN _price;
  END IF;

--  Check for a Customer Shipto Pattern Price
  SELECT currToCurr(ipshead_curr_id, pCurrid, ipsprice_price, pEffective) INTO _price
  FROM (
  SELECT ipsitem_ipshead_id AS ipsprice_ipshead_id,
         itemuomtouom(ipsitem_item_id, ipsitem_qty_uom_id, NULL, ipsitem_qtybreak) AS ipsprice_qtybreak,
         (ipsitemchar_price * itemuomtouomratio(ipsitem_item_id, NULL, ipsitem_price_uom_id)) * _iteminvpricerat AS ipsprice_price
    FROM ipsitem,ipsitemchar
   WHERE ((ipsitem_item_id=pItemid)
    AND (ipsitemchar_char_id=pCharid)
    AND (ipsitemchar_value=pCharValue)
    AND (ipsitemchar_ipsitem_id=ipsitem_id))
       ) AS
        ipsprice, ipshead, ipsass, shipto
  WHERE ( (ipsprice_ipshead_id=ipshead_id)
   AND (ipsass_ipshead_id=ipshead_id)
   AND (CURRENT_DATE BETWEEN ipshead_effective AND (ipshead_expires - 1))
   AND (ipsprice_qtybreak &lt;= pQty)
   AND (COALESCE(length(ipsass_shipto_pattern), 0) &gt; 0)
   AND (shipto_num ~ ipsass_shipto_pattern)
   AND (ipsass_cust_id=pCustid)
   AND (shipto_id=pShiptoid) )
  ORDER BY ipsprice_qtybreak DESC, ipsprice_price ASC
  LIMIT 1;

  IF (_price IS NOT NULL) THEN
    IF ((_sales IS NOT NULL) AND (_sales &lt; _price)) THEN
      RETURN _sales;
    END IF;
    RETURN _price;
  END IF;

--  Check for a Customer Price
  SELECT currToCurr(ipshead_curr_id, pCurrid, ipsprice_price, pEffective) INTO _price
  FROM (
  SELECT ipsitem_ipshead_id AS ipsprice_ipshead_id,
         itemuomtouom(ipsitem_item_id, ipsitem_qty_uom_id, NULL, ipsitem_qtybreak) AS ipsprice_qtybreak,
         (ipsitemchar_price * itemuomtouomratio(ipsitem_item_id, NULL, ipsitem_price_uom_id)) * _iteminvpricerat AS ipsprice_price
    FROM ipsitem,ipsitemchar
   WHERE ((ipsitem_item_id=pItemid)
    AND (ipsitemchar_char_id=pCharid)
    AND (ipsitemchar_value=pCharValue)
    AND (ipsitemchar_ipsitem_id=ipsitem_id))
       ) AS
        ipsprice, ipshead, ipsass
  WHERE ( (ipsprice_ipshead_id=ipshead_id)
   AND (ipsass_ipshead_id=ipshead_id)
   AND (CURRENT_DATE BETWEEN ipshead_effective AND (ipshead_expires - 1))
   AND (ipsprice_qtybreak &lt;= pQty)
   AND (COALESCE(length(ipsass_shipto_pattern), 0) = 0)
   AND (ipsass_cust_id=pCustid) )
  ORDER BY ipsprice_qtybreak DESC, ipsprice_price ASC
  LIMIT 1;

  IF (_price IS NOT NULL) THEN
    IF ((_sales IS NOT NULL) AND (_sales &lt; _price)) THEN
      RETURN _sales;
    END IF;
    RETURN _price;
  END IF;

--  Check for a Customer Type Price
  SELECT currToCurr(ipshead_curr_id, pCurrid, ipsprice_price, pEffective) INTO _price
  FROM (
  SELECT ipsitem_ipshead_id AS ipsprice_ipshead_id,
         itemuomtouom(ipsitem_item_id, ipsitem_qty_uom_id, NULL, ipsitem_qtybreak) AS ipsprice_qtybreak,
         (ipsitemchar_price * itemuomtouomratio(ipsitem_item_id, NULL, ipsitem_price_uom_id)) * _iteminvpricerat AS ipsprice_price
    FROM ipsitem,ipsitemchar
   WHERE((ipsitem_item_id=pItemid)
    AND (ipsitemchar_char_id=pCharid)
    AND (ipsitemchar_value=pCharValue)
    AND (ipsitemchar_ipsitem_id=ipsitem_id))
       ) AS
        ipsprice, ipshead, ipsass, custinfo
  WHERE ( (ipsprice_ipshead_id=ipshead_id)
   AND (ipsass_ipshead_id=ipshead_id)
   AND (ipsass_custtype_id=cust_custtype_id)
   AND (CURRENT_DATE BETWEEN ipshead_effective AND (ipshead_expires - 1))
   AND (ipsprice_qtybreak &lt;= pQty)
   AND (cust_id=pCustid) )
  ORDER BY ipsprice_qtybreak DESC, ipsprice_price ASC
  LIMIT 1;

  IF (_price IS NOT NULL) THEN
    IF ((_sales IS NOT NULL) AND (_sales &lt; _price)) THEN
      RETURN _sales;
    END IF;
    RETURN _price;
  END IF;

--  Check for a Customer Type Pattern Price
  SELECT currToCurr(ipshead_curr_id, pCurrid, ipsprice_price, pEffective) INTO _price
  FROM (
  SELECT ipsitem_ipshead_id AS ipsprice_ipshead_id,
         itemuomtouom(ipsitem_item_id, ipsitem_qty_uom_id, NULL, ipsitem_qtybreak) AS ipsprice_qtybreak,
         (ipsitemchar_price * itemuomtouomratio(ipsitem_item_id, NULL, ipsitem_price_uom_id)) * _iteminvpricerat AS ipsprice_price
    FROM ipsitem,ipsitemchar
   WHERE ((ipsitem_item_id=pItemid)
    AND (ipsitemchar_char_id=pCharid)
    AND (ipsitemchar_value=pCharValue)
    AND (ipsitemchar_ipsitem_id=ipsitem_id))
       ) AS
        ipsprice, ipshead, ipsass, custtype, custinfo
  WHERE ( (ipsprice_ipshead_id=ipshead_id)
   AND (ipsass_ipshead_id=ipshead_id)
   AND (coalesce(length(ipsass_custtype_pattern), 0) &gt; 0)
   AND (custtype_code ~ ipsass_custtype_pattern)
   AND (cust_custtype_id=custtype_id)
   AND (CURRENT_DATE BETWEEN ipshead_effective AND (ipshead_expires - 1))
   AND (ipsprice_qtybreak &lt;= pQty)
   AND (cust_id=pCustid) )
  ORDER BY ipsprice_qtybreak DESC, ipsprice_price ASC
  LIMIT 1;

  IF (_price IS NOT NULL) THEN
    IF ((_sales IS NOT NULL) AND (_sales &lt; _price)) THEN
      RETURN _sales;
    END IF;
    RETURN _price;
  END IF;

-- If we have not found another price yet and we have a
-- sales price we will use that.
  IF (_sales IS NOT NULL) THEN
    RETURN _sales;
  END IF;

--  Check for a list price
  SELECT MIN(currToLocal(pCurrid,
                       charass_price - (charass_price * COALESCE(cust_discntprcnt, 0)),
                       pEffective)) AS price,
         item_exclusive INTO _item
  FROM charass,item LEFT OUTER JOIN custinfo ON (cust_id=pCustid)
  WHERE ((item_id=pItemid)
   AND (charass_char_id=pCharid)
   AND (charass_value=pCharValue)
   AND (charass_target_type=&#39;I&#39;)
   AND (charass_target_id=item_id))
  GROUP BY item_exclusive;
  IF (FOUND) THEN
    IF (NOT _item.item_exclusive) THEN
      IF (_item.price &lt; 0) THEN
        RETURN 0;
      ELSE
        RETURN _item.price;
      END IF;
    ELSE
      RETURN 0;
    END IF;
  ELSE
    RETURN 0;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.itemcharprice-integer-integer-text-integer-numeric">itemcharprice( integer, integer, text, integer, numeric )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pCharid ALIAS FOR $2;
  pCharValue ALIAS FOR $3;
  pCustid ALIAS FOR $4;
  pQty ALIAS FOR $5;

BEGIN
  RETURN itemCharPrice(pItemid, pCharid, pCharValue, pCustid, -1, pQty, baseCurrId(), CURRENT_DATE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.itemcharvalue-integer-text">itemcharvalue( integer, text )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pCharName ALIAS FOR $2;
  _value TEXT;

BEGIN

  SELECT charass_value INTO _value
  FROM charass, char
  WHERE ( (charass_char_id=char_id)
   AND (charass_target_type=&#39;I&#39;)
   AND (charass_target_id=pItemid)
   AND (char_name=pCharName) );
  IF (NOT FOUND) THEN
    _value = &#39;&#39;;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.iteminventoryuominuse-integer">iteminventoryuominuse( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  _uomid INTEGER;
  _result INTEGER;
BEGIN
  SELECT item_inv_uom_id INTO _uomid
    FROM item
   WHERE(item_id=pItemid);

  SELECT itemuomconv_id INTO _result
    FROM itemuomconv
   WHERE(itemuomconv_item_id=pItemid)
   LIMIT 1;
  IF (FOUND) THEN
    RETURN TRUE;
  END IF;


  RETURN FALSE;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.iteminvpricerat-integer">iteminvpricerat( integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  _fromUomid INTEGER;
  _toUomid INTEGER;
  _ratio NUMERIC;
BEGIN

  IF(pItemid IS NULL) THEN
    RETURN 1.0;
  END IF;

  SELECT item_inv_uom_id, item_price_uom_id
    INTO _fromUomid, _toUomid
    FROM item
   WHERE(item_id=pItemid);

  IF(NOT FOUND) THEN
    RAISE EXCEPTION &#39;No item record found for item_id %&#39;, pItemid;
  END IF;

  IF(_fromUomid = _toUomid) THEN
    RETURN 1.0;
  END IF;

  -- Return the ration as inventory / price
  SELECT CASE WHEN(itemuomconv_from_uom_id=_fromUomid) THEN itemuomconv_from_value / itemuomconv_to_value
              ELSE itemuomconv_to_value / itemuomconv_from_value
         END
    INTO _ratio
    FROM itemuomconv
   WHERE((((itemuomconv_from_uom_id=_fromUomid) AND (itemuomconv_to_uom_id=_toUomid))
       OR ((itemuomconv_from_uom_id=_toUomid) AND (itemuomconv_to_uom_id=_fromUomid)))
     AND (itemuomconv_item_id=pItemid));

  IF(NOT FOUND) THEN
    RAISE EXCEPTION &#39;No itemuomconv record found for item_id % to item_price_uomid %&#39;, pItemid, _toUomid;
  END IF;
  
  RETURN _ratio;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.itemlocdistqty-integer-integer">itemlocdistqty( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pLocationid ALIAS FOR $1;
  pParentid ALIAS FOR $2;
  _qty NUMERIC;
  _tempQty NUMERIC;

BEGIN

  SELECT COALESCE(SUM(itemlocdist_qty), 0) INTO _qty
  FROM itemlocdist
  WHERE ( (itemlocdist_source_type=&#39;L&#39;)
   AND (itemlocdist_source_id=pLocationid)
   AND (itemlocdist_itemlocdist_id=pParentid) );

  SELECT COALESCE(SUM(itemlocdist_qty), 0) INTO _tempQty
  FROM itemlocdist, itemloc
  WHERE ( (itemlocdist_source_type=&#39;I&#39;)
   AND (itemlocdist_source_id=itemloc_id)
   AND (itemloc_location_id=pLocationid)
   AND (itemlocdist_itemlocdist_id=pParentid) );

  _qty := (_qty + _tempQty);

  RETURN _qty;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.itemlocdistqty-text-integer-integer">itemlocdistqty( text, integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTypes ALIAS FOR $1;
  pLocationid ALIAS FOR $2;
  pParentid ALIAS FOR $3;
  _qty NUMERIC := 0;
  _tempQty NUMERIC;

BEGIN

  IF (strpos(pTypes, &#39;L&#39;) &gt; 0) THEN
    SELECT COALESCE(SUM(itemlocdist_qty), 0) INTO _tempQty
    FROM itemlocdist
    WHERE ( (itemlocdist_source_type=&#39;L&#39;)
     AND (itemlocdist_source_id=pLocationid)
     AND (itemlocdist_itemlocdist_id=pParentid) );

    _qty := (_qty + _tempQty);
  END IF;

  IF (strpos(pTypes, &#39;I&#39;) &gt; 0) THEN
    SELECT COALESCE(SUM(itemlocdist_qty), 0) INTO _tempQty
    FROM itemlocdist, itemloc
    WHERE ( (itemlocdist_source_type=&#39;I&#39;)
     AND (itemlocdist_source_id=itemloc_id)
     AND (itemloc_location_id=pLocationid)
     AND (itemlocdist_itemlocdist_id=pParentid) );

    _qty := (_qty + _tempQty);
  END IF;

  RETURN _qty;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.itemprice-integer-integer-integer-numeric">itemprice( integer, integer, integer, numeric )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pCustid ALIAS FOR $2;
  pShiptoid ALIAS FOR $3;
  pQty ALIAS FOR $4;

BEGIN
  RETURN itemPrice(pItemid, pCustid, pShiptoid, pQty, baseCurrId(), CURRENT_DATE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.itemprice-integer-integer-integer-numeric-integer">itemprice( integer, integer, integer, numeric, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pCustid ALIAS FOR $2;
  pShiptoid ALIAS FOR $3;
  pQty ALIAS FOR $4;
  pCurrid ALIAS FOR $5;

BEGIN
  RETURN itemPrice(pItemId, pCustid, pShiptoid, pQty, pCurrid, CURRENT_DATE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.itemprice-integer-integer-integer-numeric-integer-date">itemprice( integer, integer, integer, numeric, integer, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pCustid ALIAS FOR $2;
  pShiptoid ALIAS FOR $3;
  pQty ALIAS FOR $4;
  pCurrid ALIAS FOR $5;
  pEffective ALIAS FOR $6;
  _price NUMERIC;
  _sales NUMERIC;
  _item RECORD;
  _iteminvpricerat NUMERIC;

BEGIN
-- Return the itemPrice in the currency passed in as pCurrid

-- Get a value here so we do not have to call the function several times
  SELECT iteminvpricerat(pItemid)
    INTO _iteminvpricerat;

-- First get a sales price if any so we when we find other prices
-- we can determine if we want that price or this price.
--  Check for a Sale Price
  SELECT currToCurr(ipshead_curr_id, pCurrid,
                      ipsprice_price - (ipsprice_price * cust_discntprcnt),
                      pEffective) INTO _sales
  FROM (
  SELECT ipsitem_ipshead_id AS ipsprice_ipshead_id,
         itemuomtouom(ipsitem_item_id, ipsitem_qty_uom_id, NULL, ipsitem_qtybreak) AS ipsprice_qtybreak,
         (ipsitem_price * itemuomtouomratio(ipsitem_item_id, NULL, ipsitem_price_uom_id)) * _iteminvpricerat AS ipsprice_price
    FROM ipsitem
   WHERE(ipsitem_item_id=pItemid)
   UNION
  SELECT ipsprodcat_ipshead_id AS ipsprice_ipshead_id,
         ipsprodcat_qtybreak AS ipsprice_qtybreak,
         CAST((item_listprice - (item_listprice * ipsprodcat_discntprcnt)) AS NUMERIC(16,4)) AS ipsprice_price
    FROM ipsprodcat JOIN item ON (ipsprodcat_prodcat_id=item_prodcat_id)
   WHERE(item_id=pItemid)  ) AS
        ipsprice, ipshead, sale, custinfo
  WHERE ( (ipsprice_ipshead_id=ipshead_id)
   AND (sale_ipshead_id=ipshead_id)
   AND (CURRENT_DATE BETWEEN sale_startdate AND sale_enddate)
   AND (ipsprice_qtybreak &lt;= pQty)
   AND (cust_id=pCustid) )
  ORDER BY ipsprice_qtybreak DESC, ipsprice_price ASC
  LIMIT 1;

--  Check for a Customer Shipto Price
  SELECT currToCurr(ipshead_curr_id, pCurrid, ipsprice_price, pEffective) INTO _price
  FROM (
  SELECT ipsitem_ipshead_id AS ipsprice_ipshead_id,
         itemuomtouom(ipsitem_item_id, ipsitem_qty_uom_id, NULL, ipsitem_qtybreak) AS ipsprice_qtybreak,
         (ipsitem_price * itemuomtouomratio(ipsitem_item_id, NULL, ipsitem_price_uom_id)) * _iteminvpricerat AS ipsprice_price
    FROM ipsitem
   WHERE(ipsitem_item_id=pItemid)
   UNION
  SELECT ipsprodcat_ipshead_id AS ipsprice_ipshead_id,
         ipsprodcat_qtybreak AS ipsprice_qtybreak,
         CAST((item_listprice - (item_listprice * ipsprodcat_discntprcnt)) AS NUMERIC(16,4)) AS ipsprice_price
    FROM ipsprodcat JOIN item ON (ipsprodcat_prodcat_id=item_prodcat_id)
   WHERE(item_id=pItemid)  ) AS
        ipsprice, ipshead, ipsass
  WHERE ( (ipsprice_ipshead_id=ipshead_id)
   AND (ipsass_ipshead_id=ipshead_id)
   AND (CURRENT_DATE BETWEEN ipshead_effective AND (ipshead_expires - 1))
   AND (ipsprice_qtybreak &lt;= pQty)
   AND (ipsass_shipto_id != -1)
   AND (ipsass_shipto_id=pShiptoid) )
  ORDER BY ipsprice_qtybreak DESC, ipsprice_price ASC
  LIMIT 1;

  IF (_price IS NOT NULL) THEN
    IF ((_sales IS NOT NULL) AND (_sales &lt; _price)) THEN
      RETURN _sales;
    END IF;
    RETURN _price;
  END IF;

--  Check for a Customer Shipto Pattern Price
  SELECT currToCurr(ipshead_curr_id, pCurrid, ipsprice_price, pEffective) INTO _price
  FROM (
  SELECT ipsitem_ipshead_id AS ipsprice_ipshead_id,
         itemuomtouom(ipsitem_item_id, ipsitem_qty_uom_id, NULL, ipsitem_qtybreak) AS ipsprice_qtybreak,
         (ipsitem_price * itemuomtouomratio(ipsitem_item_id, NULL, ipsitem_price_uom_id)) * _iteminvpricerat AS ipsprice_price
    FROM ipsitem
   WHERE(ipsitem_item_id=pItemid)
   UNION
  SELECT ipsprodcat_ipshead_id AS ipsprice_ipshead_id,
         ipsprodcat_qtybreak AS ipsprice_qtybreak,
         CAST((item_listprice - (item_listprice * ipsprodcat_discntprcnt)) AS NUMERIC(16,4)) AS ipsprice_price
    FROM ipsprodcat JOIN item ON (ipsprodcat_prodcat_id=item_prodcat_id)
   WHERE(item_id=pItemid)  ) AS
        ipsprice, ipshead, ipsass, shipto
  WHERE ( (ipsprice_ipshead_id=ipshead_id)
   AND (ipsass_ipshead_id=ipshead_id)
   AND (CURRENT_DATE BETWEEN ipshead_effective AND (ipshead_expires - 1))
   AND (ipsprice_qtybreak &lt;= pQty)
   AND (COALESCE(length(ipsass_shipto_pattern), 0) &gt; 0)
   AND (shipto_num ~ ipsass_shipto_pattern)
   AND (ipsass_cust_id=pCustid)
   AND (shipto_id=pShiptoid) )
  ORDER BY ipsprice_qtybreak DESC, ipsprice_price ASC
  LIMIT 1;

  IF (_price IS NOT NULL) THEN
    IF ((_sales IS NOT NULL) AND (_sales &lt; _price)) THEN
      RETURN _sales;
    END IF;
    RETURN _price;
  END IF;

--  Check for a Customer Price
  SELECT currToCurr(ipshead_curr_id, pCurrid, ipsprice_price, pEffective) INTO _price
  FROM (
  SELECT ipsitem_ipshead_id AS ipsprice_ipshead_id,
         itemuomtouom(ipsitem_item_id, ipsitem_qty_uom_id, NULL, ipsitem_qtybreak) AS ipsprice_qtybreak,
         (ipsitem_price * itemuomtouomratio(ipsitem_item_id, NULL, ipsitem_price_uom_id)) * _iteminvpricerat AS ipsprice_price
    FROM ipsitem
   WHERE(ipsitem_item_id=pItemid)
   UNION
  SELECT ipsprodcat_ipshead_id AS ipsprice_ipshead_id,
         ipsprodcat_qtybreak AS ipsprice_qtybreak,
         CAST((item_listprice - (item_listprice * ipsprodcat_discntprcnt)) AS NUMERIC(16,4)) AS ipsprice_price
    FROM ipsprodcat JOIN item ON (ipsprodcat_prodcat_id=item_prodcat_id)
   WHERE(item_id=pItemid)  ) AS
        ipsprice, ipshead, ipsass
  WHERE ( (ipsprice_ipshead_id=ipshead_id)
   AND (ipsass_ipshead_id=ipshead_id)
   AND (CURRENT_DATE BETWEEN ipshead_effective AND (ipshead_expires - 1))
   AND (ipsprice_qtybreak &lt;= pQty)
   AND (COALESCE(length(ipsass_shipto_pattern), 0) = 0)
   AND (ipsass_cust_id=pCustid) )
  ORDER BY ipsprice_qtybreak DESC, ipsprice_price ASC
  LIMIT 1;

  IF (_price IS NOT NULL) THEN
    IF ((_sales IS NOT NULL) AND (_sales &lt; _price)) THEN
      RETURN _sales;
    END IF;
    RETURN _price;
  END IF;

--  Check for a Customer Type Price
  SELECT currToCurr(ipshead_curr_id, pCurrid, ipsprice_price, pEffective) INTO _price
  FROM (
  SELECT ipsitem_ipshead_id AS ipsprice_ipshead_id,
         itemuomtouom(ipsitem_item_id, ipsitem_qty_uom_id, NULL, ipsitem_qtybreak) AS ipsprice_qtybreak,
         (ipsitem_price * itemuomtouomratio(ipsitem_item_id, NULL, ipsitem_price_uom_id)) * _iteminvpricerat AS ipsprice_price
    FROM ipsitem
   WHERE(ipsitem_item_id=pItemid)
   UNION
  SELECT ipsprodcat_ipshead_id AS ipsprice_ipshead_id,
         ipsprodcat_qtybreak AS ipsprice_qtybreak,
         CAST((item_listprice - (item_listprice * ipsprodcat_discntprcnt)) AS NUMERIC(16,4)) AS ipsprice_price
    FROM ipsprodcat JOIN item ON (ipsprodcat_prodcat_id=item_prodcat_id)
   WHERE(item_id=pItemid)  ) AS
        ipsprice, ipshead, ipsass, custinfo
  WHERE ( (ipsprice_ipshead_id=ipshead_id)
   AND (ipsass_ipshead_id=ipshead_id)
   AND (ipsass_custtype_id=cust_custtype_id)
   AND (CURRENT_DATE BETWEEN ipshead_effective AND (ipshead_expires - 1))
   AND (ipsprice_qtybreak &lt;= pQty)
   AND (cust_id=pCustid) )
  ORDER BY ipsprice_qtybreak DESC, ipsprice_price ASC
  LIMIT 1;

  IF (_price IS NOT NULL) THEN
    IF ((_sales IS NOT NULL) AND (_sales &lt; _price)) THEN
      RETURN _sales;
    END IF;
    RETURN _price;
  END IF;

--  Check for a Customer Type Pattern Price
  SELECT currToCurr(ipshead_curr_id, pCurrid, ipsprice_price, pEffective) INTO _price
  FROM (
  SELECT ipsitem_ipshead_id AS ipsprice_ipshead_id,
         itemuomtouom(ipsitem_item_id, ipsitem_qty_uom_id, NULL, ipsitem_qtybreak) AS ipsprice_qtybreak,
         (ipsitem_price * itemuomtouomratio(ipsitem_item_id, NULL, ipsitem_price_uom_id)) * _iteminvpricerat AS ipsprice_price
    FROM ipsitem
   WHERE(ipsitem_item_id=pItemid)
   UNION
  SELECT ipsprodcat_ipshead_id AS ipsprice_ipshead_id,
         ipsprodcat_qtybreak AS ipsprice_qtybreak,
         CAST((item_listprice - (item_listprice * ipsprodcat_discntprcnt)) AS NUMERIC(16,4)) AS ipsprice_price
    FROM ipsprodcat JOIN item ON (ipsprodcat_prodcat_id=item_prodcat_id)
   WHERE(item_id=pItemid)  ) AS
        ipsprice, ipshead, ipsass, custtype, custinfo
  WHERE ( (ipsprice_ipshead_id=ipshead_id)
   AND (ipsass_ipshead_id=ipshead_id)
   AND (coalesce(length(ipsass_custtype_pattern), 0) &gt; 0)
   AND (custtype_code ~ ipsass_custtype_pattern)
   AND (cust_custtype_id=custtype_id)
   AND (CURRENT_DATE BETWEEN ipshead_effective AND (ipshead_expires - 1))
   AND (ipsprice_qtybreak &lt;= pQty)
   AND (cust_id=pCustid) )
  ORDER BY ipsprice_qtybreak DESC, ipsprice_price ASC
  LIMIT 1;

  IF (_price IS NOT NULL) THEN
    IF ((_sales IS NOT NULL) AND (_sales &lt; _price)) THEN
      RETURN _sales;
    END IF;
    RETURN _price;
  END IF;

-- If we have not found another price yet and we have a
-- sales price we will use that.
  IF (_sales IS NOT NULL) THEN
    RETURN _sales;
  END IF;

--  Check for a list price
  SELECT MIN(currToLocal(pCurrid,
                       item_listprice - (item_listprice * COALESCE(cust_discntprcnt, 0)),
                       pEffective)) AS price,
         item_exclusive INTO _item
  FROM item LEFT OUTER JOIN custinfo ON (cust_id=pCustid)
  WHERE (item_id=pItemid)
  GROUP BY item_exclusive;
  IF (FOUND) THEN
    IF (NOT _item.item_exclusive) THEN
      IF (_item.price &lt; 0) THEN
        RETURN 0;
      ELSE
        RETURN _item.price;
      END IF;
    ELSE
      RETURN -9999;
    END IF;
  ELSE
    RETURN -9999;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.itemprice-integer-integer-numeric">itemprice( integer, integer, numeric )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pCustid ALIAS FOR $2;
  pQty ALIAS FOR $3;

BEGIN
  RETURN itemPrice(pItemid, pCustid, -1, pQty, baseCurrId(), CURRENT_DATE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.itemsellinguom-integer">itemsellinguom( integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;

BEGIN
  RETURN itemUOMByType(pItemid, &#39;Selling&#39;);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.itemuombytype-integer-text">itemuombytype( integer, text )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pUomtype ALIAS FOR $2;
  _uom TEXT;
BEGIN
  SELECT uom_name
    INTO _uom
    FROM item
    JOIN itemuomconv ON (itemuomconv_item_id=item_id)
    JOIN itemuom ON (itemuom_itemuomconv_id=itemuomconv_id)
    JOIN uomtype ON (itemuom_uomtype_id=uomtype_id)
    JOIN uom ON (itemuomconv_to_uom_id=uom_id)
   WHERE((item_id=pItemid)
     AND (uomtype_name=pUomtype))
   LIMIT 1;

  IF (NOT FOUND) THEN
    SELECT uom_name
      INTO _uom
      FROM item
      JOIN uom ON (item_inv_uom_id=uom_id)
     WHERE(item_id=pItemid);
  END IF;

  RETURN _uom;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.itemuomfractionalbytype-integer-text">itemuomfractionalbytype( integer, text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pUomtype ALIAS FOR $2;
  _frac BOOLEAN;
BEGIN
  SELECT itemuomconv_fractional
    INTO _frac
    FROM item
    JOIN itemuomconv ON (itemuomconv_item_id=item_id)
    JOIN itemuom ON (itemuom_itemuomconv_id=itemuomconv_id)
    JOIN uomtype ON (itemuom_uomtype_id=uomtype_id)
   WHERE((item_id=pItemid)
     AND (uomtype_name=pUomtype))
   LIMIT 1;

  IF (NOT FOUND) THEN
    SELECT item_fractional
      INTO _frac
      FROM item
      JOIN uom ON (item_inv_uom_id=uom_id)
     WHERE(item_id=pItemid);
  END IF;

  RETURN _frac;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.itemuomfractionalbyuom-integer-integer">itemuomfractionalbyuom( integer, integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pUomid ALIAS FOR $2;
  _frac BOOLEAN;
BEGIN
  SELECT itemuomconv_fractional
    INTO _frac
    FROM item
    JOIN itemuomconv ON (itemuomconv_item_id=item_id)
   WHERE((item_id=pItemid)
     AND ((itemuomconv_from_uom_id=item_inv_uom_id AND itemuomconv_to_uom_id=pUomid)
       OR (itemuomconv_to_uom_id=item_inv_uom_id AND itemuomconv_from_uom_id=pUomid)))
   LIMIT 1;

  IF (NOT FOUND) THEN
    SELECT item_fractional
      INTO _frac
      FROM item
      JOIN uom ON (item_inv_uom_id=uom_id)
     WHERE(item_id=pItemid);
  END IF;

  RETURN _frac;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.itemuomratiobytype-integer-text">itemuomratiobytype( integer, text )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pUomtype ALIAS FOR $2;
  _ratio NUMERIC;
BEGIN
  -- Return the ration as alternate / inventory uom
  SELECT CASE WHEN(itemuomconv_from_uom_id=item_inv_uom_id) THEN itemuomconv_to_value / itemuomconv_from_value
              ELSE itemuomconv_from_value / itemuomconv_to_value
         END
    INTO _ratio
    FROM item
    JOIN itemuomconv ON (itemuomconv_item_id=item_id)
    JOIN itemuom ON (itemuom_itemuomconv_id=itemuomconv_id)
    JOIN uomtype ON (itemuom_uomtype_id=uomtype_id)
   WHERE((item_id=pItemid)
     AND (uomtype_name=pUomtype))
   LIMIT 1;

  IF (NOT FOUND) THEN
    _ratio := 1.0;
  END IF;

  RETURN _ratio;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.itemuomtouom-integer-integer-integer-numeric">itemuomtouom( integer, integer, integer, numeric )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pUomidFrom ALIAS FOR $2;
  pUomidTo ALIAS FOR $3;
  pQtyFrom ALIAS FOR $4;

  _uomidFrom INTEGER;
  _uomidTo   INTEGER;
  _valueFrom NUMERIC;
  _valueTo   NUMERIC;
  _item      RECORD;
  _conv      RECORD;
  _frac      BOOLEAN;
BEGIN

  SELECT item_inv_uom_id, item_fractional
    INTO _item
    FROM item
   WHERE(item_id=pItemid);
  IF(NOT FOUND) THEN
    RAISE EXCEPTION &#39;No item record was found for item id %&#39;, pItemid;
  END IF;

  _uomidFrom := COALESCE(pUomidFrom, _item.item_inv_uom_id);
  _uomidTo   := COALESCE(pUomidTo,   _item.item_inv_uom_id);

  -- Should we round the qty here or not?
  IF(_uomidFrom = _uomidTo) THEN
    -- Both from/to are the same. If it is the item inv uom
    -- then use the item fractional value otherwise assume
    -- it is fractional for now so the user gets the same value back.
    IF(_uomidFrom = _item.item_inv_uom_id) THEN
      _frac := _item.item_fractional;
    ELSE
      _frac := true;
    END IF;
    RETURN roundQty(_frac, pQtyFrom);
  END IF;

  IF(_uomidFrom != _item.item_inv_uom_id AND _uomidTo != _item.item_inv_uom_id) THEN
    RAISE EXCEPTION &#39;Converting from/to a UOM where one is not the inventory UOM is currently not supported&#39;;
  END IF;

  SELECT itemuomconv_from_uom_id, itemuomconv_from_value,
         itemuomconv_to_uom_id, itemuomconv_to_value,
         itemuomconv_fractional
    INTO _conv
    FROM itemuomconv
   WHERE(((itemuomconv_from_uom_id=_uomidFrom AND itemuomconv_to_uom_id=_uomidTo)
       OR (itemuomconv_from_uom_id=_uomidTo AND itemuomconv_to_uom_id=_uomidFrom))
     AND (itemuomconv_item_id=pItemid));
  IF(NOT FOUND) THEN
    RAISE EXCEPTION &#39;A conversion for item_id % from uom_id % to uom_id % was not found.&#39;, pItemid, _uomidFrom, _uomidTo;
  END IF;

  IF(_conv.itemuomconv_from_uom_id=_uomidFrom) THEN
    _valueFrom := _conv.itemuomconv_from_value;
    _valueTo := _conv.itemuomconv_to_value;
  ELSE
    _valueFrom := _conv.itemuomconv_to_value;
    _valueTo := _conv.itemuomconv_from_value;
  END IF;

  -- If we are converting to the item inv uom use the item fractional value
  -- otherwise use the conversion fractional value.
  if(_uomidTo = _item.item_inv_uom_id) THEN
    _frac := _item.item_fractional;
  ELSE
    _frac := _conv.itemuomconv_fractional;
  END IF;

  RETURN roundQty(_frac, ((_valueTo/_valueFrom) * pQtyFrom));
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.itemuomtouomratio-integer-integer-integer">itemuomtouomratio( integer, integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pUomidFrom ALIAS FOR $2;
  pUomidTo ALIAS FOR $3;

  _uomidFrom INTEGER;
  _uomidTo   INTEGER;
  _valueFrom NUMERIC;
  _valueTo   NUMERIC;
  _item      RECORD;
  _conv      RECORD;
BEGIN

  SELECT item_inv_uom_id
    INTO _item
    FROM item
   WHERE(item_id=pItemid);
  IF(NOT FOUND) THEN
    RAISE EXCEPTION &#39;No item record was found for item id %&#39;, pItemid;
  END IF;

  _uomidFrom := COALESCE(pUomidFrom, _item.item_inv_uom_id);
  _uomidTo   := COALESCE(pUomidTo,   _item.item_inv_uom_id);

  IF(_uomidFrom = _uomidTo) THEN
    RETURN 1.0;
  END IF;

  IF(_uomidFrom != _item.item_inv_uom_id AND _uomidTo != _item.item_inv_uom_id) THEN
    RAISE EXCEPTION &#39;Converting from/to a UOM where one is not the inventory UOM is currently not supported&#39;;
  END IF;

  SELECT itemuomconv_from_uom_id, itemuomconv_from_value,
         itemuomconv_to_uom_id, itemuomconv_to_value
    INTO _conv
    FROM itemuomconv
   WHERE(((itemuomconv_from_uom_id=_uomidFrom AND itemuomconv_to_uom_id=_uomidTo)
       OR (itemuomconv_from_uom_id=_uomidTo AND itemuomconv_to_uom_id=_uomidFrom))
     AND (itemuomconv_item_id=pItemid));
  IF(NOT FOUND) THEN
    RAISE EXCEPTION &#39;A conversion for item_id % from uom_id % to uom_id % was not found.&#39;, pItemid, _uomidFrom, _uomidTo;
  END IF;

  IF(_conv.itemuomconv_from_uom_id=_uomidFrom) THEN
    _valueFrom := _conv.itemuomconv_from_value;
    _valueTo := _conv.itemuomconv_to_value;
  ELSE
    _valueFrom := _conv.itemuomconv_to_value;
    _valueTo := _conv.itemuomconv_from_value;
  END IF;

  RETURN (_valueTo/_valueFrom);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.last-anyelement">last( anyelement )</a>
		</h2>
<h3>Returns: anyelement</h3>
<h3>Language: INTERNAL</h3>
        
        <pre>aggregate_dummy</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.last-agg-anyelement-anyelement">last_agg( anyelement, anyelement )</a>
		</h2>
<h3>Returns: anyelement</h3>
<h3>Language: SQL</h3>
        
        <pre>
        SELECT $2;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.lockhead-text-integer">lockhead( text, integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  ptable	ALIAS FOR $1;
  pheadid	ALIAS FOR $2;
  _lock		RECORD;
  _stat		RECORD;

BEGIN

  SELECT headlock_head_id,
         headlock_username,
         headlock_procpid
    INTO _lock
    FROM headlock
   WHERE ((headlock_head_id=pheadid)
     AND  (headlock_table=ptable));

  IF (FOUND) THEN
-- Check to see if the lock is being held be an active user
    SELECT usename, procpid
      INTO _stat
      FROM pg_stat_activity
     WHERE ( (datname=current_database())
       AND   (usename=_lock.headlock_username)
       AND   (procpid=_lock.headlock_procpid) );
    IF (FOUND) THEN
-- Someone else has this record locked
      RETURN FALSE;
    ELSE
-- No currently logged in has this record locked so remove the lock record
-- and let the user requesting this lock continue
      DELETE FROM headlock
      WHERE ((headlock_head_id=pheadid)
       AND   (headlock_table=ptable));
    END IF;
  END IF;

  INSERT INTO headlock (headlock_table, headlock_head_id,
			headlock_username, headlock_procpid
	      ) VALUES (ptable, pheadid,
			CURRENT_USER, pg_backend_pid());

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.locksohead-integer">locksohead( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSoheadid ALIAS FOR $1;
  _lock RECORD;
  _stat RECORD;

BEGIN

  SELECT soheadlock_sohead_id,
         soheadlock_username,
         soheadlock_procpid
    INTO _lock
    FROM soheadlock
   WHERE (soheadlock_sohead_id=pSoheadid);
  IF (FOUND) THEN
-- Check to see if the lock is being held be an active user
    SELECT usename, procpid
      INTO _stat
      FROM pg_stat_activity
     WHERE ( (datname=current_database())
       AND   (usename=_lock.soheadlock_username)
       AND   (procpid=_lock.soheadlock_procpid) );
    IF (FOUND) THEN
-- Someone else has this record locked
      RETURN FALSE;
    ELSE
-- No currently logged in has this record locked so remove the lock record
-- and let the user requesting this lock continue
      DELETE FROM soheadlock WHERE (soheadlock_sohead_id=pSoheadid);
    END IF;
  END IF;

  INSERT INTO soheadlock VALUES(pSoheadid, CURRENT_USER, pg_backend_pid());

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.login">login(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE 
  _p RECORD;

BEGIN

  SELECT usr_id, usr_active INTO _p
  FROM usr
  WHERE (usr_username=CURRENT_USER);

  IF (NOT FOUND) THEN
    RETURN -1;

  ELSIF (NOT _p.usr_active) THEN
    RETURN -2;

  ELSE
    RETURN _p.usr_id;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.logwotcevent-integer-integer-text">logwotcevent( integer, integer, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
    pWoid	ALIAS FOR $1;
    pUsrid	ALIAS FOR $2;
    pEvntname	ALIAS FOR $3;
    _username	TEXT;

BEGIN
    SELECT usr_username INTO _username
    FROM usr
    WHERE usr_id = pUsrid;

    INSERT INTO evntlog
	( evntlog_evnttime, evntlog_username, evntlog_evnttype_id,
	  evntlog_ordtype, evntlog_ord_id, evntlog_warehous_id,
	  evntlog_number )
    SELECT CURRENT_TIMESTAMP, evntnot_username, evnttype_id,
	   &#39;W&#39;, wo_id, warehous_id,
	   (_username || &#39;/&#39; || wo_number)
    FROM wo, itemsite, warehous, evntnot, evnttype
    WHERE ((wo_id = pWoid)
      AND  (wo_itemsite_id = itemsite_id)
      AND  (itemsite_warehous_id=warehous_id)
      AND  (evntnot_evnttype_id=evnttype_id)
      AND  (evntnot_warehous_id=warehous_id)
      AND  (evnttype_name=pEvntname));

    RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.lowercost-integer-text">lowercost( integer, text )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid	ALIAS FOR $1;
  pCosttype	ALIAS FOR $2;

BEGIN
    RETURN lowerCost(pItemid, pCosttype, TRUE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.lowercost-integer-text-boolean">lowercost( integer, text, boolean )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pCosttype ALIAS FOR $2;
  pActual	ALIAS FOR $3;
  _type CHAR(1);
  _actCost	NUMERIC;
  _actCost1	NUMERIC;
  _actCost2	NUMERIC;
  _stdCost	NUMERIC;
  _stdCost1	NUMERIC;
  _stdCost2	NUMERIC;
  _cost		NUMERIC;
  _cost1	NUMERIC;
  _cost2	NUMERIC;

BEGIN

  SELECT item_type INTO _type
  FROM item
  WHERE (item_id=pItemid);

  -- find the lowercost in the base currency at the current conversion rate
  IF (_type IN (&#39;M&#39;, &#39;F&#39;, &#39;B&#39;, &#39;T&#39;)) THEN
    SELECT SUM( round(currToBase(itemcost_curr_id, itemcost_actcost, CURRENT_DATE),6) * itemuomtouom(bomitem_item_id, bomitem_uom_id, NULL, bomitem_qtyper * (1 + bomitem_scrap)) ),
           SUM( itemcost_stdcost * itemuomtouom(bomitem_item_id, bomitem_uom_id, NULL, bomitem_qtyper * (1 + bomitem_scrap)) )
	INTO _actCost, _stdCost
    FROM itemcost, costelem, bomitem(pItemid)
    WHERE ( (bomitem_parent_item_id=pItemid)
     AND (CURRENT_DATE BETWEEN bomitem_effective AND (bomitem_expires - 1))
     AND (bomitem_item_id=itemcost_item_id)
     AND (itemcost_costelem_id=costelem_id)
     AND (costelem_type=pCosttype) );

    IF (NOT FOUND) THEN
      _actCost := NULL;
      _stdCost := NULL;
    END IF;

    IF (pActual) THEN
	_cost  = _actCost;
    ELSE
	_cost  = _stdCost;
    END IF;

  ELSIF (_type IN (&#39;C&#39;)) THEN
    SELECT SUM(CASE WHEN (bbomitem_qtyper = 0) THEN 0
                    ELSE currToBase(itemcost_curr_id, itemcost_actcost, CURRENT_DATE) / bbomitem_qtyper * bbomitem_costabsorb
               END),
	   SUM(CASE WHEN (bbomitem_qtyper = 0) THEN 0
                    ELSE itemcost_stdcost / bbomitem_qtyper * bbomitem_costabsorb
               END)
	INTO _actCost1, _stdCost1
    FROM itemcost, costelem, bbomitem
    WHERE ( (bbomitem_item_id=pItemid)
     AND (CURRENT_DATE BETWEEN bbomitem_effective AND (bbomitem_expires - 1))
     AND (bbomitem_parent_item_id=itemcost_item_id)
     AND (itemcost_costelem_id=costelem_id)
     AND (costelem_type=pCosttype) );

    SELECT SUM(CASE WHEN (t.bbomitem_qtyper = 0) THEN 0
                    ELSE currToBase(itemcost_curr_id, itemcost_actcost, CURRENT_DATE) * s.bbomitem_qtyper / t.bbomitem_qtyper * t.bbomitem_costabsorb
               END),
	   SUM(CASE WHEN (t.bbomitem_qtyper = 0) THEN 0
                    ELSE itemcost_stdcost * s.bbomitem_qtyper / t.bbomitem_qtyper * t.bbomitem_costabsorb
               END)
	INTO _actCost2, _stdCost2
    FROM itemcost, costelem, bbomitem AS t, bbomitem AS s, item
    WHERE ( (t.bbomitem_item_id=pItemid)
     AND ( CURRENT_DATE BETWEEN s.bbomitem_effective
                        AND (s.bbomitem_expires - 1) )
     AND ( CURRENT_DATE BETWEEN t.bbomitem_effective
                        AND (t.bbomitem_expires - 1) )
     AND (s.bbomitem_parent_item_id=t.bbomitem_parent_item_id)
     AND (s.bbomitem_item_id=itemcost_item_id)
     AND (s.bbomitem_item_id=item_id)
     AND (item_type=&#39;Y&#39;)
     AND (itemcost_costelem_id=costelem_id)
     AND (costelem_type=pCosttype) );

    IF (pActual) THEN
	_cost  = _actCost;
	_cost1 = _actCost1;
	_cost2 = _actCost2;
    ELSE
	_cost  = _stdCost;
	_cost1 = _stdCost1;
	_cost2 = _stdCost2;	-- should this be std or act?
    END IF;

    IF (_cost1 IS NULL AND _cost2 IS NULL) THEN
	_cost = NULL;
    ELSE
        _cost = COALESCE(_cost1, 0) + COALESCE(_cost2, 0);
    END IF;

  ELSE
    RETURN NULL;
  END IF;

  RETURN round(_cost,6);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.maintainbomworkspace">maintainbomworkspace(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _test TEXT;

BEGIN

  SELECT tablename INTO _test
  FROM pg_tables
  WHERE (tablename=&#39;bomwork&#39;);
  IF (NOT FOUND) THEN
    CREATE TEMPORARY TABLE bomwork
    ( bomwork_id INTEGER, bomwork_set_id INTEGER, bomwork_parent_id INTEGER,
      bomwork_seqnumber INTEGER, bomwork_parent_seqnumber INTEGER,
      bomwork_item_id INTEGER, bomwork_item_type CHARACTER(1), bomwork_status CHARACTER(1),
      bomwork_qtyper NUMERIC(20, 8), bomwork_scrap NUMERIC(20, 10),
      bomwork_level INTEGER, bomwork_effective DATE, bomwork_expires DATE,
      bomwork_stdunitcost NUMERIC(16, 4), bomwork_actunitcost NUMERIC(16, 4),
      bomwork_createwo BOOLEAN, bomwork_issuemethod CHARACTER(1) );
    CREATE INDEX bomwork_set_id_idx ON bomwork(bomwork_set_id);
  END IF;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.markapcheckasposted-integer">markapcheckasposted( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RAISE NOTICE &#39;markAPCheckAsPosted() is deprecated - use markCheckAsPosted() instead&#39;;
  RETURN markCheckAsPosted($1);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.markapcheckasprinted-integer">markapcheckasprinted( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RAISE NOTICE &#39;markAPCheckAsPrinted() is deprecated - use markCheckAsPrinted()&#39;;
  RETURN markCheckAsPrinted($1);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.markcheckasposted-integer">markcheckasposted( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCheckid ALIAS FOR $1;

BEGIN

  UPDATE checkhead
  SET checkhead_posted=TRUE
  WHERE (checkhead_id=pCheckid);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.markcheckasprinted-integer">markcheckasprinted( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCheckid ALIAS FOR $1;

BEGIN

  UPDATE checkhead
  SET checkhead_printed=TRUE
  WHERE (checkhead_id=pCheckid);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.massexpirebomitem-integer-date-text">massexpirebomitem( integer, date, text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pExpireDate ALIAS FOR $2;
  pECN ALIAS FOR $3;

BEGIN

  UPDATE bomitem
  SET bomitem_expires=pExpireDate
  WHERE ( (bomitem_expires &gt;= CURRENT_DATE)
   AND (bomitem_item_id=pItemid)
   AND (bomitem_rev_id=getActiveRevId(&#39;BOM&#39;,bomitem_parent_item_id)) );

  RETURN TRUE;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.massreplacebomitem-integer-integer-date-text">massreplacebomitem( integer, integer, date, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pNewItemid ALIAS FOR $1;
  pOriginalItemid ALIAS FOR $2;
  pEffectiveDate ALIAS FOR $3;
  pECN ALIAS FOR $4;
  _effectiveDate DATE;
  _result		INTEGER;

BEGIN

  _effectiveDate := COALESCE(pEffectiveDate, CURRENT_DATE);

  IF (BOMContains(pOriginalItemid, pNewItemid) OR
      BOMContains(pNewItemid, pOriginalItemid)) THEN
    RETURN -1;
  END IF;

  INSERT INTO bomitem
  ( bomitem_parent_item_id, bomitem_seqnumber,
    bomitem_item_id, bomitem_qtyper, bomitem_uom_id,
    bomitem_scrap, bomitem_effective, bomitem_expires, bomitem_ecn,
    bomitem_createwo, bomitem_issuemethod, bomitem_subtype,
    bomitem_booitem_seq_id, bomitem_schedatwooper, bomitem_moddate, bomitem_rev_id )
  SELECT bomitem_parent_item_id, bomitem_seqnumber,
         pNewItemid, bomitem_qtyper, bomitem_uom_id,
         bomitem_scrap, _effectiveDate, endOfTime(), pECN,
         bomitem_createwo, bomitem_issuemethod, &#39;I&#39;,
         bomitem_booitem_seq_id, bomitem_schedatwooper, CURRENT_DATE, getActiveRevId(&#39;BOM&#39;,bomitem_parent_item_id)
  FROM bomitem
  WHERE ( (_effectiveDate &lt; bomitem_expires)
   AND (bomitem_item_id=pOriginalItemid)
   AND (bomitem_rev_id=getActiveRevId(&#39;BOM&#39;,bomitem_parent_item_id)) );

  UPDATE bomitem
  SET bomitem_expires=_effectiveDate
  WHERE ( (_effectiveDate &lt; bomitem_expires)
   AND (bomitem_item_id=pOriginalItemid)
   AND (bomitem_rev_id=getActiveRevid(&#39;BOM&#39;,bomitem_parent_item_id)) );

  RETURN 1;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.movebomitemdown-integer">movebomitemdown( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBomitemid ALIAS FOR $1;
  _nextBomitem RECORD;

BEGIN

  SELECT nextbomitem.bomitem_id, nextbomitem.bomitem_seqnumber AS next_seqnumber,
         thisbomitem.bomitem_seqnumber AS this_seqnumber INTO _nextBomitem
  FROM bomitem AS nextbomitem, bomitem AS thisbomitem
  WHERE ((nextbomitem.bomitem_seqnumber &gt; thisbomitem.bomitem_seqnumber)
   AND (nextbomitem.bomitem_parent_item_id=thisbomitem.bomitem_parent_item_id)
   AND (nextbomitem.bomitem_rev_id=thisbomitem.bomitem_rev_id)
   AND (thisbomitem.bomitem_id=pBomitemid))
  ORDER BY next_seqnumber
  LIMIT 1;

  IF (FOUND) THEN
--  Swap the seqnumber of the current bomitem and the next bomitem

    UPDATE bomitem
    SET bomitem_seqnumber=NULL
    WHERE (bomitem_id=_nextBomitem.bomitem_id);

    UPDATE bomitem
    SET bomitem_seqnumber=_nextBomitem.next_seqnumber
    WHERE (bomitem_id=pBomitemid);

    UPDATE bomitem
    SET bomitem_seqnumber=_nextBomitem.this_seqnumber
    WHERE (bomitem_id=_nextBomitem.bomitem_id);
  END IF;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.movebomitemup-integer">movebomitemup( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBomitemid ALIAS FOR $1;
  _nextBomitem RECORD;

BEGIN

  SELECT nextbomitem.bomitem_id AS bomitem_id, nextbomitem.bomitem_seqnumber AS next_seqnumber,
         thisbomitem.bomitem_seqnumber AS this_seqnumber INTO _nextBomitem
  FROM bomitem AS nextbomitem, bomitem AS thisbomitem
  WHERE ((nextbomitem.bomitem_seqnumber &lt; thisbomitem.bomitem_seqnumber)
   AND (nextbomitem.bomitem_parent_item_id=thisbomitem.bomitem_parent_item_id)
   AND (nextbomitem.bomitem_rev_id=thisbomitem.bomitem_rev_id)
   AND (thisbomitem.bomitem_id=pBomitemid))
  ORDER BY next_seqnumber DESC
  LIMIT 1;

  IF (FOUND) THEN
--  Swap the seqnumber of the current bomitem and the next bomitem

    UPDATE bomitem
    SET bomitem_seqnumber=NULL
    WHERE (bomitem_id=_nextBomitem.bomitem_id);

    UPDATE bomitem 
    SET bomitem_seqnumber=_nextBomitem.next_seqnumber
    WHERE (bomitem_id=pBomitemid);

    UPDATE bomitem
    SET bomitem_seqnumber=_nextBomitem.this_seqnumber
    WHERE (bomitem_id=_nextBomitem.bomitem_id);
  END IF;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.moveccarddown-integer">moveccarddown( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCcardid ALIAS FOR $1;
  _nextCcard RECORD;

BEGIN

  SELECT nextCcard.ccard_id, nextCcard.ccard_seq AS next_seqnumber,
         thisCcard.ccard_seq AS this_seqnumber INTO _nextCcard
  FROM Ccard AS nextCcard, Ccard AS thisCcard
  WHERE ((nextCcard.ccard_seq &gt; thisCcard.ccard_seq)
   AND (nextCcard.ccard_cust_id=thisCcard.ccard_cust_id)
   AND (thisCcard.ccard_id=pCcardid))
  ORDER BY next_seqnumber
  LIMIT 1;

  IF (FOUND) THEN
--  Swap the seqnumber of the current Ccard and the next Ccard

    UPDATE Ccard
    SET ccard_seq=_nextCcard.next_seqnumber
    WHERE (ccard_id=pCcardid);

    UPDATE Ccard
    SET ccard_seq=_nextCcard.this_seqnumber
    WHERE (ccard_id=_nextCcard.ccard_id);
  END IF;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.moveccardup-integer">moveccardup( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCcardid ALIAS FOR $1;
  _nextCcard RECORD;

BEGIN

  SELECT nextCcard.ccard_id AS ccard_id, nextCcard.ccard_seq AS next_seqnumber,
         thisCcard.ccard_seq AS this_seqnumber INTO _nextCcard
  FROM ccard AS nextCcard, ccard AS thisCcard
  WHERE ((nextCcard.ccard_seq &lt; thisCcard.ccard_seq)
   AND (nextCcard.ccard_cust_id=thisCcard.ccard_cust_id)
   AND (thisCcard.ccard_id=pCcardid))
  ORDER BY next_seqnumber DESC
  LIMIT 1;

  IF (FOUND) THEN
--  Swap the seqnumber of the current Ccard and the next Ccard

    UPDATE Ccard 
    SET ccard_seq=_nextCcard.next_seqnumber
    WHERE (ccard_id=pCcardid);

    UPDATE Ccard
    SET ccard_seq=_nextCcard.this_seqnumber
    WHERE (ccard_id=_nextCcard.ccard_id);
  END IF;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.moveflgroupdown-integer">moveflgroupdown( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pFlgrpid ALIAS FOR $1;
  _from RECORD;
  _to RECORD;

BEGIN

  SELECT flgrp_id AS id,
         flgrp_flhead_id AS flhead_id,
         flgrp_flgrp_id AS flgrp_id,
         flgrp_order AS ord INTO _from
    FROM flgrp
   WHERE (flgrp_id=pFlgrpid);
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  SELECT id, type, ord INTO _to
    FROM (SELECT flitem_id AS id, &#39;I&#39; AS type, flitem_order AS ord
            FROM flitem
           WHERE ((flitem_flgrp_id=_from.flgrp_id)
             AND  (flitem_flhead_id=_from.flhead_id))
           UNION
          SELECT flgrp_id AS id, &#39;G&#39; AS type, flgrp_order AS ord
            FROM flgrp
           WHERE ((flgrp_flgrp_id=_from.flgrp_id)
             AND  (flgrp_flhead_id=_from.flhead_id))
           UNION
          SELECT flspec_id AS id, &#39;S&#39; AS type, flspec_order AS ord
            FROM flspec
           WHERE ((flspec_flgrp_id=_from.flgrp_id)
             AND  (flspec_flhead_id=_from.flhead_id)) ) AS data
   WHERE (ord &gt; _from.ord)
   ORDER BY ord
   LIMIT 1;
  IF (FOUND) THEN
    UPDATE flgrp
       SET flgrp_order=_to.ord
     WHERE (flgrp_id=_from.id);

    IF (_to.type=&#39;I&#39;) THEN
      UPDATE flitem
         SET flitem_order=_from.ord
       WHERE (flitem_id=_to.id);
    ELSE
      IF (_to.type=&#39;G&#39;) THEN
        UPDATE flgrp
           SET flgrp_order=_from.ord
         WHERE (flgrp_id=_to.id);
      ELSE
        IF (_to.type=&#39;S&#39;) THEN
          UPDATE flspec
             SET flspec_order=_from.ord
           WHERE (flspec_id=_to.id);
        END IF;
      END IF;
    END IF;
  END IF;

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.moveflgroupup-integer">moveflgroupup( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pFlgrpid ALIAS FOR $1;
  _from RECORD;
  _to RECORD;

BEGIN

  SELECT flgrp_id AS id,
         flgrp_flhead_id AS flhead_id,
         flgrp_flgrp_id AS flgrp_id,
         flgrp_order AS ord INTO _from
    FROM flgrp
   WHERE (flgrp_id=pFlgrpid);
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  SELECT id, type, ord INTO _to
    FROM (SELECT flitem_id AS id, &#39;I&#39; AS type, flitem_order AS ord
            FROM flitem
           WHERE ((flitem_flgrp_id=_from.flgrp_id)
             AND  (flitem_flhead_id=_from.flhead_id))
           UNION
          SELECT flgrp_id AS id, &#39;G&#39; AS type, flgrp_order AS ord
            FROM flgrp
           WHERE ((flgrp_flgrp_id=_from.flgrp_id)
             AND  (flgrp_flhead_id=_from.flhead_id))
           UNION
          SELECT flspec_id AS id, &#39;S&#39; AS type, flspec_order AS ord
            FROM flspec
           WHERE ((flspec_flgrp_id=_from.flgrp_id)
             AND  (flspec_flhead_id=_from.flhead_id)) ) AS data
   WHERE (ord &lt; _from.ord)
   ORDER BY ord DESC
   LIMIT 1;
  IF (FOUND) THEN
    UPDATE flgrp
       SET flgrp_order=_to.ord
     WHERE (flgrp_id=_from.id);

    IF (_to.type=&#39;I&#39;) THEN
      UPDATE flitem
         SET flitem_order=_from.ord
       WHERE (flitem_id=_to.id);
    ELSE
      IF (_to.type=&#39;G&#39;) THEN
        UPDATE flgrp
           SET flgrp_order=_from.ord
         WHERE (flgrp_id=_to.id);
      ELSE
        IF (_to.type=&#39;S&#39;) THEN
          UPDATE flspec
             SET flspec_order=_from.ord
           WHERE (flspec_id=_to.id);
        END IF;
      END IF;
    END IF;
  END IF;

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.moveflitemdown-integer">moveflitemdown( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pFlitemid ALIAS FOR $1;
  _from RECORD;
  _to RECORD;

BEGIN

  SELECT flitem_id AS id,
         flitem_flhead_id AS flhead_id,
         flitem_flgrp_id AS flgrp_id,
         flitem_order AS ord INTO _from
    FROM flitem
   WHERE (flitem_id=pFlitemid);
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  SELECT id, type, ord INTO _to
    FROM (SELECT flitem_id AS id, &#39;I&#39; AS type, flitem_order AS ord
            FROM flitem
           WHERE ((flitem_flgrp_id=_from.flgrp_id)
             AND  (flitem_flhead_id=_from.flhead_id))
           UNION
          SELECT flgrp_id AS id, &#39;G&#39; AS type, flgrp_order AS ord
            FROM flgrp
           WHERE ((flgrp_flgrp_id=_from.flgrp_id)
             AND  (flgrp_flhead_id=_from.flhead_id))
           UNION
          SELECT flspec_id AS id, &#39;S&#39; AS type, flspec_order AS ord
            FROM flspec
           WHERE ((flspec_flgrp_id=_from.flgrp_id)
             AND  (flspec_flhead_id=_from.flhead_id)) ) AS data
   WHERE (ord &gt; _from.ord)
   ORDER BY ord
   LIMIT 1;
  IF (FOUND) THEN
    UPDATE flitem
       SET flitem_order=_to.ord
     WHERE (flitem_id=_from.id);

    IF (_to.type=&#39;I&#39;) THEN
      UPDATE flitem
         SET flitem_order=_from.ord
       WHERE (flitem_id=_to.id);
    ELSE
      IF (_to.type=&#39;G&#39;) THEN
        UPDATE flgrp
           SET flgrp_order=_from.ord
         WHERE (flgrp_id=_to.id);
      ELSE
        IF (_to.type=&#39;S&#39;) THEN
          UPDATE flspec
             SET flspec_order=_from.ord
           WHERE (flspec_id=_to.id);
        END IF;
      END IF;
    END IF;
  END IF;

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.moveflitemup-integer">moveflitemup( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pFlitemid ALIAS FOR $1;
  _from RECORD;
  _to RECORD;

BEGIN

  SELECT flitem_id AS id,
         flitem_flhead_id AS flhead_id,
         flitem_flgrp_id AS flgrp_id,
         flitem_order AS ord INTO _from
    FROM flitem
   WHERE (flitem_id=pFlitemid);
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  SELECT id, type, ord INTO _to
    FROM (SELECT flitem_id AS id, &#39;I&#39; AS type, flitem_order AS ord
            FROM flitem
           WHERE ((flitem_flgrp_id=_from.flgrp_id)
             AND  (flitem_flhead_id=_from.flhead_id))
           UNION
          SELECT flgrp_id AS id, &#39;G&#39; AS type, flgrp_order AS ord
            FROM flgrp
           WHERE ((flgrp_flgrp_id=_from.flgrp_id)
             AND  (flgrp_flhead_id=_from.flhead_id))
           UNION
          SELECT flspec_id AS id, &#39;S&#39; AS type, flspec_order AS ord
            FROM flspec
           WHERE ((flspec_flgrp_id=_from.flgrp_id)
             AND  (flspec_flhead_id=_from.flhead_id)) ) AS data
   WHERE (ord &lt; _from.ord)
   ORDER BY ord DESC
   LIMIT 1;
  IF (FOUND) THEN
    UPDATE flitem
       SET flitem_order=_to.ord
     WHERE (flitem_id=_from.id);

    IF (_to.type=&#39;I&#39;) THEN
      UPDATE flitem
         SET flitem_order=_from.ord
       WHERE (flitem_id=_to.id);
    ELSE
      IF (_to.type=&#39;G&#39;) THEN
        UPDATE flgrp
           SET flgrp_order=_from.ord
         WHERE (flgrp_id=_to.id);
      ELSE
        IF (_to.type=&#39;S&#39;) THEN
          UPDATE flspec
             SET flspec_order=_from.ord
           WHERE (flspec_id=_to.id);
        END IF;
      END IF;
    END IF;
  END IF;

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.moveflspecdown-integer">moveflspecdown( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pFlspecid ALIAS FOR $1;
  _from RECORD;
  _to RECORD;

BEGIN

  SELECT flspec_id AS id,
         flspec_flhead_id AS flhead_id,
         flspec_flgrp_id AS flgrp_id,
         flspec_order AS ord INTO _from
    FROM flspec
   WHERE (flspec_id=pFlspecid);
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  SELECT id, type, ord INTO _to
    FROM (SELECT flitem_id AS id, &#39;I&#39; AS type, flitem_order AS ord
            FROM flitem
           WHERE ((flitem_flgrp_id=_from.flgrp_id)
             AND  (flitem_flhead_id=_from.flhead_id))
           UNION
          SELECT flgrp_id AS id, &#39;G&#39; AS type, flgrp_order AS ord
            FROM flgrp
           WHERE ((flgrp_flgrp_id=_from.flgrp_id)
             AND  (flgrp_flhead_id=_from.flhead_id))
           UNION
          SELECT flspec_id AS id, &#39;S&#39; AS type, flspec_order AS ord
            FROM flspec
           WHERE ((flspec_flgrp_id=_from.flgrp_id)
             AND  (flspec_flhead_id=_from.flhead_id)) ) AS data
   WHERE (ord &gt; _from.ord)
   ORDER BY ord
   LIMIT 1;
  IF (FOUND) THEN
    UPDATE flspec
       SET flspec_order=_to.ord
     WHERE (flspec_id=_from.id);

    IF (_to.type=&#39;I&#39;) THEN
      UPDATE flitem
         SET flitem_order=_from.ord
       WHERE (flitem_id=_to.id);
    ELSE
      IF (_to.type=&#39;G&#39;) THEN
        UPDATE flgrp
           SET flgrp_order=_from.ord
         WHERE (flgrp_id=_to.id);
      ELSE
        IF (_to.type=&#39;S&#39;) THEN
          UPDATE flspec
             SET flspec_order=_from.ord
           WHERE (flspec_id=_to.id);
        END IF;
      END IF;
    END IF;
  END IF;

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.moveflspecup-integer">moveflspecup( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pFlspecid ALIAS FOR $1;
  _from RECORD;
  _to RECORD;

BEGIN

  SELECT flspec_id AS id,
         flspec_flhead_id AS flhead_id,
         flspec_flgrp_id AS flgrp_id,
         flspec_order AS ord INTO _from
    FROM flspec
   WHERE (flspec_id=pFlspecid);
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  SELECT id, type, ord INTO _to
    FROM (SELECT flitem_id AS id, &#39;I&#39; AS type, flitem_order AS ord
            FROM flitem
           WHERE ((flitem_flgrp_id=_from.flgrp_id)
             AND  (flitem_flhead_id=_from.flhead_id))
           UNION
          SELECT flgrp_id AS id, &#39;G&#39; AS type, flgrp_order AS ord
            FROM flgrp
           WHERE ((flgrp_flgrp_id=_from.flgrp_id)
             AND  (flgrp_flhead_id=_from.flhead_id))
           UNION
          SELECT flspec_id AS id, &#39;S&#39; AS type, flspec_order AS ord
            FROM flspec
           WHERE ((flspec_flgrp_id=_from.flgrp_id)
             AND  (flspec_flhead_id=_from.flhead_id)) ) AS data
   WHERE (ord &lt; _from.ord)
   ORDER BY ord DESC
   LIMIT 1;
  IF (FOUND) THEN
    UPDATE flspec
       SET flspec_order=_to.ord
     WHERE (flspec_id=_from.id);

    IF (_to.type=&#39;I&#39;) THEN
      UPDATE flitem
         SET flitem_order=_from.ord
       WHERE (flitem_id=_to.id);
    ELSE
      IF (_to.type=&#39;G&#39;) THEN
        UPDATE flgrp
           SET flgrp_order=_from.ord
         WHERE (flgrp_id=_to.id);
      ELSE
        IF (_to.type=&#39;S&#39;) THEN
          UPDATE flspec
             SET flspec_order=_from.ord
           WHERE (flspec_id=_to.id);
        END IF;
      END IF;
    END IF;
  END IF;

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.nextperiodbyinterval-integer-integer">nextperiodbyinterval( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPeriodid ALIAS FOR $1;
  pInterval ALIAS FOR $2;
  _periodid INTEGER;
BEGIN
  SELECT b.period_id INTO _periodid
    FROM period AS a, period AS b
   WHERE ((a.period_id=pPeriodid)
     AND  (b.period_start &gt;= a.period_start))
   ORDER BY b.period_start
   LIMIT 1 OFFSET pInterval;
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;
  RETURN _periodid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.nextprsubnumber-integer">nextprsubnumber( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPrNumber ALIAS FOR $1;
  _subNumber INTEGER;

BEGIN

  SELECT MAX(pr_subnumber) INTO _subNumber
  FROM pr
  WHERE (pr_number=pPrNumber);

  IF (_subNumber IS NULL)
    THEN _subNumber := 0;
  END IF;

  RETURN (_subNumber + 1);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.nextwosubnumber-integer">nextwosubnumber( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: SQL</h3>
        
        <pre>
SELECT COALESCE((MAX(wo_subnumber) + 1), 1)
FROM wo
WHERE (wo_number=($1));
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.noneg-numeric">noneg( numeric )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pValue ALIAS FOR $1;

BEGIN

  IF (pValue &lt; 0) THEN
    RETURN 0;
  ELSE
   RETURN pValue;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.nopos-numeric">nopos( numeric )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pValue ALIAS FOR $1;

BEGIN

  IF (pValue &gt; 0) THEN
    RETURN 0;
  ELSE
   RETURN pValue;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.normalizetrialbal-integer-bpchar">normalizetrialbal( integer, bpchar )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTrialbalid ALIAS FOR $1;
  pSide ALIAS FOR $2;
  _value NUMERIC;
  _r RECORD;

BEGIN

  SELECT accnt_type, trialbal_beginning, trialbal_ending INTO _r
  FROM trialbal, accnt
  WHERE ( (trialbal_accnt_id=accnt_id)
   AND (trialbal_id=pTrialbalid) );
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

-- If we are looking for the Ending Balance, cache it
  IF (pSide = &#39;E&#39;) THEN
    _value = _r.trialbal_ending;

--  We had better been looking for the Beginning Balance!
  ELSE
    _value = _r.trialbal_beginning;
  END IF;

--  If the accnt_type is Asset or Expense, swap the sense
  IF (_r.accnt_type IN (&#39;A&#39;, &#39;E&#39;)) THEN
    _value := (_value * -1);
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.numofdatabaseusers">numofdatabaseusers(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _count INTEGER;

BEGIN

  SELECT COUNT(*) INTO _count
  FROM pg_stat_activity
  WHERE (datid IN ( SELECT datid
                    FROM pg_stat_activity
                    WHERE (procpid=pg_backend_pid()) ) );
  IF (_count IS NULL) THEN
    _count := 0;
  END IF;

  RETURN _count;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.numofserverusers">numofserverusers(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _count INTEGER;

BEGIN

  SELECT COUNT(*) INTO _count
  FROM pg_stat_activity;
  IF (_count IS NULL) THEN
    _count := 0;
  END IF;

  RETURN _count;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.openaccountingperiod-integer">openaccountingperiod( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPeriodid ALIAS FOR $1;
  _r RECORD;

BEGIN

--  Check to make use that the period is closed
  IF ( ( SELECT (NOT period_closed)
         FROM period
         WHERE (period_id=pPeriodid) ) ) THEN
    RETURN -1;
  END IF;

--  Check to make use that the period is not frozen
  IF ( ( SELECT period_freeze
         FROM period
         WHERE (period_id=pPeriodid) ) ) THEN
    RETURN -2;
  END IF;

--  Reset the period_closed flag
  UPDATE period
  SET period_closed=FALSE
  WHERE (period_id=pPeriodid);

--  Post any unposted G/L Transactions into the new period
  FOR _r IN SELECT DISTINCT gltrans_sequence
            FROM gltrans, period
            WHERE ( (NOT gltrans_posted)
             AND (gltrans_date BETWEEN period_start AND period_end)
             AND (period_id=pPeriodid) ) LOOP
    PERFORM postIntoTrialBalance(_r.gltrans_sequence);
  END LOOP;

  RETURN pPeriodid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.openaccountingyearperiod-integer">openaccountingyearperiod( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPeriodid ALIAS FOR $1;
  _r RECORD;

BEGIN

--  Check to make use that the yearperiod is closed
  IF ( ( SELECT (NOT yearperiod_closed)
         FROM yearperiod
         WHERE (yearperiod_id=pPeriodid) ) ) THEN
    RETURN -1;
  END IF;

--  Reset the yearperiod_closed flag
  UPDATE yearperiod
  SET yearperiod_closed=FALSE
  WHERE (yearperiod_id=pPeriodid);

  RETURN pPeriodid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.openapitemsvalue-integer-integer">openapitemsvalue( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendid ALIAS FOR $1;
  pPeriodid ALIAS FOR $2;
  _value NUMERIC;

BEGIN

  SELECT SUM( CASE WHEN (apopen_doctype=&#39;C&#39;) THEN ((apopen_amount - apopen_paid) * -1)
                   ELSE (apopen_amount - apopen_paid)
              END )  INTO _value
  FROM apopen
  WHERE ( (apopen_open)
   AND (apopen_vend_id=pVendid)
   AND (apopen_duedate BETWEEN findPeriodStart(pPeriodid) AND findPeriodEnd(pPeriodid) ) );

  IF (_value IS NULL) THEN
    _value := 0;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.openaritemsvalue-integer-integer">openaritemsvalue( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pPeriodid ALIAS FOR $2;
  _value NUMERIC;

BEGIN

  SELECT SUM( CASE WHEN (aropen_doctype IN (&#39;C&#39;, &#39;R&#39;)) THEN ((aropen_amount - aropen_paid) * -1)
                   ELSE (aropen_amount - aropen_paid)
              END )  INTO _value
  FROM aropen
  WHERE ( (aropen_open)
    AND (aropen_cust_id=pCustid)
    AND (aropen_duedate BETWEEN findPeriodStart(pPeriodid) AND findPeriodEnd(pPeriodid)) );

  IF (_value IS NULL) THEN
    _value := 0;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.orderedbypo-integer-date-date">orderedbypo( integer, date, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pStartDate ALIAS FOR $2;
  pEndDate ALIAS FOR $3;
  _qty NUMERIC;

BEGIN

  SELECT COALESCE(SUM(noNeg(poitem_qty_ordered - poitem_qty_received) * poitem_invvenduomratio), 0.0) INTO _qty
  FROM poitem
  WHERE ( (poitem_itemsite_id=pItemsiteid)
    AND (poitem_status &lt;&gt; &#39;C&#39;)
    AND (poitem_duedate BETWEEN pStartDate AND pEndDate) );

  RETURN _qty;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.orderedbypo-integer-integer">orderedbypo( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pLookAhead ALIAS FOR $2;
  _qty NUMERIC;

BEGIN

  SELECT orderedByPo(pItemsiteid, startOfTime(), (CURRENT_DATE + pLookAhead)) INTO _qty;
  RETURN _qty;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.orderedbywo-integer-date-date">orderedbywo( integer, date, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pStartDate ALIAS FOR $2;
  pEndDate ALIAS FOR $3;
  _itemType CHARACTER(1);
  _qty NUMERIC;

BEGIN

  SELECT item_type INTO _itemType
  FROM itemsite, item
  WHERE ( (itemsite_item_id=item_id)
   AND (itemsite_id=pItemsiteid) );
  
  IF (_itemType = &#39;C&#39;) THEN
    SELECT COALESCE(SUM((noNeg(wo_qtyord - wo_qtyrcv) * brddist_stdqtyper)), 0.0) INTO _qty
    FROM wo, brddist
    WHERE ( (wo_status &lt;&gt; &#39;C&#39;)
     AND (brddist_wo_id=wo_id)
     AND (brddist_itemsite_id=pItemsiteid)
     AND (wo_duedate BETWEEN pStartDate AND pEndDate) );
  ELSE
    SELECT COALESCE(SUM(noNeg(wo_qtyord - wo_qtyrcv)), 0.0) INTO _qty
    FROM wo
    WHERE ( (wo_status &lt;&gt; &#39;C&#39;)
     AND (wo_itemsite_id=pItemsiteid)
     AND (wo_duedate BETWEEN pStartDate AND pEndDate) );
  END IF;

  RETURN _qty;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.orderedbywo-integer-integer">orderedbywo( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pLookAheadDays ALIAS FOR $2;

BEGIN

  RETURN orderedByWo(pItemsiteid, startOfTime(), (CURRENT_DATE + pLookAheadDays));

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.orderhead">orderhead(  )</a>
		</h2>
<h3>Returns: SET OF ordhead</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _row ordhead%ROWTYPE;
  _query TEXT;
BEGIN

  _query := &#39;
  SELECT DISTINCT * FROM (
  SELECT pohead_id		AS orderhead_id,
	 &#39;&#39;PO&#39;&#39;			AS orderhead_type,
	 pohead_number		AS orderhead_number,
	 pohead_status		AS orderhead_status,
	 pohead_orderdate	AS orderhead_orderdate,
	 (SELECT count(*)
	   FROM poitem
	   WHERE poitem_pohead_id=pohead_id) AS orderhead_linecount,
	 pohead_vend_id		AS orderhead_from_id,
	 vend_name		AS orderhead_from,
	 NULL			AS orderhead_to_id,
	 &#39;&#39;&#39;&#39;			AS orderhead_to,
	 pohead_curr_id		AS orderhead_curr_id,
	 pohead_agent_username	AS orderhead_agent_username,
	 pohead_shipvia		AS orderhead_shipvia
  FROM pohead LEFT OUTER JOIN vendinfo ON (pohead_vend_id=vend_id)
  UNION
  SELECT cohead_id		AS orderhead_id,
	 &#39;&#39;SO&#39;&#39;			AS orderhead_type,
	 cohead_number		AS orderhead_number,
	 COALESCE(coitem_status,&#39;&#39;C&#39;&#39;) AS orderhead_status,
	 cohead_orderdate	AS orderhead_orderdate,
	 (SELECT count(*)
	   FROM coitem
	   WHERE coitem_cohead_id=cohead_id) AS orderhead_linecount,
	 NULL			AS orderhead_from_id,
	 &#39;&#39;&#39;&#39;			AS orderhead_from,
	 cohead_cust_id		AS orderhead_to_id,
	 cust_name		AS orderhead_to,
	 cohead_curr_id		AS orderhead_curr_id,
	 &#39;&#39;&#39;&#39;			AS orderhead_agent_username,
	 cohead_shipvia		AS orderhead_shipvia
  FROM cohead LEFT OUTER JOIN custinfo ON (cohead_cust_id=cust_id)
              LEFT OUTER JOIN coitem ON ((cohead_id=coitem_cohead_id)
                                     AND (coitem_status=&#39;&#39;O&#39;&#39;))&#39;;

  IF (fetchmetricbool(&#39;MultiWhs&#39;)) THEN
    _query := _query || &#39;
    UNION
    SELECT tohead_id		AS orderhead_id,
	 &#39;&#39;TO&#39;&#39;			AS orderhead_type,
  	 tohead_number		AS orderhead_number,
	 tohead_status		AS orderhead_status,
	 tohead_orderdate	AS orderhead_orderdate,
	 (SELECT count(*)
	   FROM toitem
	   WHERE toitem_tohead_id=tohead_id) AS orderhead_linecount,
	 tohead_src_warehous_id	 AS orderhead_from_id,
	 tohead_srcname		AS orderhead_from,
	 tohead_dest_warehous_id AS orderhead_to_id,
	 tohead_destname	AS orderhead_to,
	 tohead_freight_curr_id	AS orderhead_curr_id,
	 tohead_agent_username	AS orderhead_agent_username,
	 tohead_shipvia		AS orderhead_shipvia
    FROM tohead&#39;;
  END IF;

  IF (fetchmetricbool(&#39;EnableReturnAuth&#39;)) THEN
    _query := _query || &#39;
  UNION
    SELECT rahead_id		AS orderhead_id,
	 &#39;&#39;RA&#39;&#39;			AS orderhead_type,
	 rahead_number		AS orderhead_number,
	 COALESCE(raitem_status,&#39;&#39;C&#39;&#39;) AS orderhead_status,
	 rahead_authdate	AS orderhead_orderdate,
	 (SELECT count(*)
	   FROM raitem
	   WHERE raitem_rahead_id=rahead_id) AS orderhead_linecount,
	 rahead_cust_id		AS orderhead_from_id,
	 cust_name		AS orderhead_from,
	 NULL			AS orderhead_to_id,
	 &#39;&#39;&#39;&#39;			AS orderhead_to,
	 rahead_curr_id		AS orderhead_curr_id,
	 &#39;&#39;&#39;&#39;			AS orderhead_agent_username,
	 &#39;&#39;&#39;&#39;			AS orderhead_shipvia
    FROM rahead LEFT OUTER JOIN custinfo ON (rahead_cust_id=cust_id)
              LEFT OUTER JOIN raitem ON ((rahead_id=raitem_rahead_id)
                                     AND (raitem_status=&#39;&#39;O&#39;&#39;))&#39;;
  END IF;

  _query := _query || &#39;) AS data ORDER BY orderhead_type, orderhead_number ;&#39;;
  
  FOR _row IN EXECUTE _query
  LOOP
    RETURN NEXT _row;
  END LOOP;

  RETURN;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.orderitem">orderitem(  )</a>
		</h2>
<h3>Returns: SET OF orditem</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _row orditem%ROWTYPE;
  _query TEXT;
BEGIN

  _query := &#39;
  SELECT poitem_id		AS orderitem_id,
	 &#39;&#39;PO&#39;&#39;			AS orderitem_orderhead_type,
	 poitem_pohead_id	AS orderitem_orderhead_id,
	 poitem_linenumber	AS orderitem_linenumber,
	 poitem_status		AS orderitem_status,
	 poitem_itemsite_id	AS orderitem_itemsite_id,
	 poitem_duedate		AS orderitem_scheddate,
	 poitem_qty_ordered	AS orderitem_qty_ordered,
	 poitem_qty_returned	AS orderitem_qty_shipped,
	 poitem_qty_received	AS orderitem_qty_received,
	 uom_id			AS orderitem_qty_uom_id,
	 poitem_invvenduomratio	AS orderitem_qty_invuomratio,
	 poitem_unitprice	AS orderitem_unitcost,
	 pohead_curr_id         AS orderitem_unitcost_curr_id,
	 poitem_freight		AS orderitem_freight,
	 poitem_freight_received AS orderitem_freight_received,
	 pohead_curr_id         AS orderitem_freight_curr_id

  FROM poitem LEFT OUTER JOIN pohead ON (poitem_pohead_id=pohead_id)
              LEFT OUTER JOIN uom ON (uom_name=poitem_vend_uom)
  UNION
  SELECT coitem_id		AS orderitem_id,
	 &#39;&#39;SO&#39;&#39;			AS orderitem_orderhead_type,
	 coitem_cohead_id	AS orderitem_orderhead_id,
	 coitem_linenumber	AS orderitem_linenumber,
	 coitem_status		AS orderitem_status,
	 coitem_itemsite_id	AS orderitem_itemsite_id,
	 coitem_scheddate	AS orderitem_scheddate,
	 coitem_qtyord		AS orderitem_qty_ordered,
	 coitem_qtyshipped	AS orderitem_qty_shipped,
	 coitem_qtyreturned	AS orderitem_qty_received,
	 coitem_qty_uom_id	AS orderitem_qty_uom_id,
	 coitem_qty_invuomratio	AS orderitem_qty_invuomratio,
	 coitem_unitcost	AS orderitem_unitcost,
	 basecurrid()		AS orderitem_unitcost_curr_id,
	 NULL			AS orderitem_freight,
	 NULL			AS orderitem_freight_received,
	 basecurrid()		AS orderitem_freight_curr_id
  FROM coitem&#39;;

  IF (fetchmetricbool(&#39;MultiWhs&#39;)) THEN
    _query := _query || &#39;
    UNION
    SELECT toitem_id		AS orderitem_id,
      &#39;&#39;TO&#39;&#39;			AS orderitem_orderhead_type,
      toitem_tohead_id	AS orderitem_orderhead_id,
      toitem_linenumber	AS orderitem_linenumber,
      toitem_status		AS orderitem_status,
      itemsite_id		AS orderitem_itemsite_id,
      toitem_duedate		AS orderitem_scheddate,
      toitem_qty_ordered	AS orderitem_qty_ordered,
      toitem_qty_shipped	AS orderitem_qty_shipped,
      toitem_qty_received	AS orderitem_qty_received,
      uom_id			AS orderitem_qty_uom_id,
      1			AS orderitem_qty_invuomratio,
      toitem_stdcost		AS orderitem_unitcost,
      basecurrid()		AS orderitem_unitcost_curr_id,
      toitem_freight		AS orderitem_freight,
      toitem_freight_received AS orderitem_freight_received,
      toitem_freight_curr_id	AS orderitem_freight_curr_id
    FROM tohead, itemsite, toitem LEFT OUTER JOIN uom ON (uom_name=toitem_uom)
    WHERE ((toitem_tohead_id=tohead_id)
     AND  (tohead_src_warehous_id=itemsite_warehous_id)
     AND  (toitem_item_id=itemsite_item_id)) &#39;;
  END IF;

  IF (fetchmetricbool(&#39;EnableReturnAuth&#39;)) THEN
    _query := _query || &#39;
    UNION
    SELECT raitem_id		AS orderitem_id,
      &#39;&#39;RA&#39;&#39;			AS orderitem_orderhead_type,
      raitem_rahead_id	AS orderitem_orderhead_id,
      raitem_linenumber	AS orderitem_linenumber,
      raitem_status		AS orderitem_status,
      raitem_itemsite_id	AS orderitem_itemsite_id,
      raitem_scheddate	AS orderitem_scheddate,
      raitem_qtyauthorized	AS orderitem_qty_ordered,
      0			AS orderitem_qty_shipped,
      raitem_qtyreceived	AS orderitem_qty_received,
      raitem_qty_uom_id	AS orderitem_qty_uom_id,
      raitem_qty_invuomratio	AS orderitem_qty_invuomratio,
      raitem_unitprice	AS orderitem_unitcost,
      basecurrid()		AS orderitem_unitcost_curr_id,
      NULL			AS orderitem_freight,
      NULL			AS orderitem_freight_received,
      basecurrid()		AS orderitem_freight_curr_id
    FROM raitem&#39;;
  END IF;
  
  FOR _row IN EXECUTE _query
  LOOP
    RETURN NEXT _row;
  END LOOP;

  RETURN;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.orderitemdata-text-integer-integer">orderitemdata( text, integer, integer )</a>
		</h2>
<h3>Returns: SET OF orderitemtype</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pOrdertype ALIAS FOR $1;
  pOrderheadid ALIAS FOR $2;
  pOrderitemid ALIAS FOR $3;
  _row orderitemtype%ROWTYPE;
  _set RECORD;

BEGIN

  IF(UPPER(pOrdertype)=&#39;PO&#39;) THEN
    FOR _set IN 
      SELECT poitem_id              AS orderitem_id,
             &#39;PO&#39;                   AS orderitem_orderhead_type,
             poitem_pohead_id       AS orderitem_orderhead_id,
             poitem_linenumber      AS orderitem_linenumber,
             poitem_status          AS orderitem_status,
             poitem_itemsite_id     AS orderitem_itemsite_id,
             poitem_duedate         AS orderitem_scheddate,
             poitem_qty_ordered     AS orderitem_qty_ordered,
             poitem_qty_returned    AS orderitem_qty_shipped,
             poitem_qty_received    AS orderitem_qty_received,
             uom_id                 AS orderitem_qty_uom_id,
             poitem_invvenduomratio AS orderitem_qty_invuomratio,
             poitem_unitprice       AS orderitem_unitcost,
             (SELECT pohead_curr_id FROM pohead WHERE pohead_id=poitem_pohead_id)
                                    AS orderitem_unitcost_curr_id,
             poitem_freight         AS orderitem_freight,
             poitem_freight_received AS orderitem_freight_received,
             (SELECT pohead_curr_id FROM pohead WHERE pohead_id=poitem_pohead_id)
                                    AS orderitem_freight_curr_id
        FROM poitem LEFT OUTER JOIN uom ON (uom_name=poitem_vend_uom)
       WHERE(((pOrderheadid IS NULL) OR (poitem_pohead_id=pOrderheadid))
         AND ((pOrderitemid IS NULL) OR (poitem_id=pOrderitemid))) LOOP
  
      _row.orderitem_id := _set.orderitem_id;
      _row.orderitem_orderhead_type := _set.orderitem_orderhead_type;
      _row.orderitem_orderhead_id := _set.orderitem_orderhead_id;
      _row.orderitem_linenumber := _set.orderitem_linenumber;
      _row.orderitem_status := _set.orderitem_status;
      _row.orderitem_itemsite_id := _set.orderitem_itemsite_id;
      _row.orderitem_scheddate := _set.orderitem_scheddate;
      _row.orderitem_qty_ordered := _set.orderitem_qty_ordered;
      _row.orderitem_qty_shipped := _set.orderitem_qty_shipped;
      _row.orderitem_qty_received := _set.orderitem_qty_received;
      _row.orderitem_qty_uom_id := _set.orderitem_qty_uom_id;
      _row.orderitem_qty_invuomratio := _set.orderitem_qty_invuomratio;
      _row.orderitem_unitcost := _set.orderitem_unitcost;
      _row.orderitem_unitcost_curr_id := _set.orderitem_unitcost_curr_id;
      _row.orderitem_freight := _set.orderitem_freight;
      _row.orderitem_freight_received := _set.orderitem_freight_received;
      _row.orderitem_freight_curr_id := _set.orderitem_freight_curr_id;

      RETURN NEXT _row;
    END LOOP;
  ELSEIF(UPPER(pOrdertype)=&#39;SO&#39;) THEN
    FOR _set IN 
      SELECT coitem_id              AS orderitem_id,
             &#39;SO&#39;                   AS orderitem_orderhead_type,
             coitem_cohead_id       AS orderitem_orderhead_id,
             coitem_linenumber      AS orderitem_linenumber,
             coitem_status          AS orderitem_status,
             coitem_itemsite_id     AS orderitem_itemsite_id,
             coitem_scheddate       AS orderitem_scheddate,
             coitem_qtyord          AS orderitem_qty_ordered,
             coitem_qtyshipped      AS orderitem_qty_shipped,
             coitem_qtyreturned     AS orderitem_qty_received,
             coitem_qty_uom_id      AS orderitem_qty_uom_id,
             coitem_qty_invuomratio AS orderitem_qty_invuomratio,
             coitem_unitcost        AS orderitem_unitcost,
             basecurrid()           AS orderitem_unitcost_curr_id,
             NULL                   AS orderitem_freight,
             NULL                   AS orderitem_freight_received,
             basecurrid()           AS orderitem_freight_curr_id
        FROM coitem
       WHERE(((pOrderheadid IS NULL) OR (coitem_cohead_id=pOrderheadid))
         AND ((pOrderitemid IS NULL) OR (coitem_id=pOrderitemid))) LOOP
  
      _row.orderitem_id := _set.orderitem_id;
      _row.orderitem_orderhead_type := _set.orderitem_orderhead_type;
      _row.orderitem_orderhead_id := _set.orderitem_orderhead_id;
      _row.orderitem_linenumber := _set.orderitem_linenumber;
      _row.orderitem_status := _set.orderitem_status;
      _row.orderitem_itemsite_id := _set.orderitem_itemsite_id;
      _row.orderitem_scheddate := _set.orderitem_scheddate;
      _row.orderitem_qty_ordered := _set.orderitem_qty_ordered;
      _row.orderitem_qty_shipped := _set.orderitem_qty_shipped;
      _row.orderitem_qty_received := _set.orderitem_qty_received;
      _row.orderitem_qty_uom_id := _set.orderitem_qty_uom_id;
      _row.orderitem_qty_invuomratio := _set.orderitem_qty_invuomratio;
      _row.orderitem_unitcost := _set.orderitem_unitcost;
      _row.orderitem_unitcost_curr_id := _set.orderitem_unitcost_curr_id;
      _row.orderitem_freight := _set.orderitem_freight;
      _row.orderitem_freight_received := _set.orderitem_freight_received;
      _row.orderitem_freight_curr_id := _set.orderitem_freight_curr_id;

      RETURN NEXT _row;
    END LOOP;
  ELSEIF(UPPER(pOrdertype)=&#39;RA&#39;) THEN
    FOR _set IN 
      SELECT raitem_id              AS orderitem_id,
             &#39;RA&#39;                   AS orderitem_orderhead_type,
             raitem_rahead_id       AS orderitem_orderhead_id,
             raitem_linenumber      AS orderitem_linenumber,
             raitem_status          AS orderitem_status,
             raitem_itemsite_id     AS orderitem_itemsite_id,
             raitem_scheddate       AS orderitem_scheddate,
             raitem_qtyauthorized   AS orderitem_qty_ordered,
             0                      AS orderitem_qty_shipped,
             raitem_qtyreceived     AS orderitem_qty_received,
             raitem_qty_uom_id      AS orderitem_qty_uom_id,
             raitem_qty_invuomratio AS orderitem_qty_invuomratio,
             raitem_unitprice       AS orderitem_unitcost,
             basecurrid()           AS orderitem_unitcost_curr_id,
             NULL                   AS orderitem_freight,
             NULL                   AS orderitem_freight_received,
             basecurrid()           AS orderitem_freight_curr_id
        FROM raitem
       WHERE(((pOrderheadid IS NULL) OR (raitem_rahead_id=pOrderheadid))
         AND ((pOrderitemid IS NULL) OR (raitem_id=pOrderitemid))) LOOP
  
      _row.orderitem_id := _set.orderitem_id;
      _row.orderitem_orderhead_type := _set.orderitem_orderhead_type;
      _row.orderitem_orderhead_id := _set.orderitem_orderhead_id;
      _row.orderitem_linenumber := _set.orderitem_linenumber;
      _row.orderitem_status := _set.orderitem_status;
      _row.orderitem_itemsite_id := _set.orderitem_itemsite_id;
      _row.orderitem_scheddate := _set.orderitem_scheddate;
      _row.orderitem_qty_ordered := _set.orderitem_qty_ordered;
      _row.orderitem_qty_shipped := _set.orderitem_qty_shipped;
      _row.orderitem_qty_received := _set.orderitem_qty_received;
      _row.orderitem_qty_uom_id := _set.orderitem_qty_uom_id;
      _row.orderitem_qty_invuomratio := _set.orderitem_qty_invuomratio;
      _row.orderitem_unitcost := _set.orderitem_unitcost;
      _row.orderitem_unitcost_curr_id := _set.orderitem_unitcost_curr_id;
      _row.orderitem_freight := _set.orderitem_freight;
      _row.orderitem_freight_received := _set.orderitem_freight_received;
      _row.orderitem_freight_curr_id := _set.orderitem_freight_curr_id;

      RETURN NEXT _row;
    END LOOP;
  ELSEIF(UPPER(pOrdertype)=&#39;TO&#39;) THEN
    FOR _set IN 
      SELECT toitem_id              AS orderitem_id,
             &#39;TO&#39;                   AS orderitem_orderhead_type,
             toitem_tohead_id       AS orderitem_orderhead_id,
             toitem_linenumber      AS orderitem_linenumber,
             toitem_status          AS orderitem_status,
             itemsite_id            AS orderitem_itemsite_id,
             toitem_duedate         AS orderitem_scheddate,
             toitem_qty_ordered     AS orderitem_qty_ordered,
             toitem_qty_shipped     AS orderitem_qty_shipped,
             toitem_qty_received    AS orderitem_qty_received,
             uom_id                 AS orderitem_qty_uom_id,
             1                      AS orderitem_qty_invuomratio,
             toitem_stdcost         AS orderitem_unitcost,
             basecurrid()           AS orderitem_unitcost_curr_id,
             toitem_freight         AS orderitem_freight,
             toitem_freight_received AS orderitem_freight_received,
             toitem_freight_curr_id AS orderitem_freight_curr_id
        FROM tohead, itemsite, toitem LEFT OUTER JOIN uom ON (uom_name=toitem_uom)
       WHERE((toitem_tohead_id=tohead_id)
         AND (tohead_src_warehous_id=itemsite_warehous_id)
         AND (toitem_item_id=itemsite_item_id)
         AND ((pOrderheadid IS NULL) OR (toitem_tohead_id=pOrderheadid))
         AND ((pOrderitemid IS NULL) OR (toitem_id=pOrderitemid))) LOOP
  
      _row.orderitem_id := _set.orderitem_id;
      _row.orderitem_orderhead_type := _set.orderitem_orderhead_type;
      _row.orderitem_orderhead_id := _set.orderitem_orderhead_id;
      _row.orderitem_linenumber := _set.orderitem_linenumber;
      _row.orderitem_status := _set.orderitem_status;
      _row.orderitem_itemsite_id := _set.orderitem_itemsite_id;
      _row.orderitem_scheddate := _set.orderitem_scheddate;
      _row.orderitem_qty_ordered := _set.orderitem_qty_ordered;
      _row.orderitem_qty_shipped := _set.orderitem_qty_shipped;
      _row.orderitem_qty_received := _set.orderitem_qty_received;
      _row.orderitem_qty_uom_id := _set.orderitem_qty_uom_id;
      _row.orderitem_qty_invuomratio := _set.orderitem_qty_invuomratio;
      _row.orderitem_unitcost := _set.orderitem_unitcost;
      _row.orderitem_unitcost_curr_id := _set.orderitem_unitcost_curr_id;
      _row.orderitem_freight := _set.orderitem_freight;
      _row.orderitem_freight_received := _set.orderitem_freight_received;
      _row.orderitem_freight_curr_id := _set.orderitem_freight_curr_id;

      RETURN NEXT _row;
    END LOOP;
  END IF;

  RETURN;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.packageisenabled-integer">packageisenabled( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: SQL</h3>
        
        <pre>
  SELECT COUNT(*) &gt;= 8
  FROM pg_inherits, pg_class, pg_namespace, pkghead
  WHERE ((inhrelid=pg_class.oid)
     AND (relnamespace=pg_namespace.oid)
     AND  (nspname=pkghead_name)
     AND  (pkghead_id=$1));
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.packageisenabled-text">packageisenabled( text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: SQL</h3>
        
        <pre>
  SELECT COUNT(*) &gt;= 8
  FROM pg_inherits, pg_class, pg_namespace
  WHERE ((inhrelid=pg_class.oid)
     AND (relnamespace=pg_namespace.oid)
     AND  (nspname=$1));
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.pgp-key-id-bytea">pgp_key_id( bytea )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: C</h3>
        
        <pre>pgp_key_id_w</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.pgp-pub-decrypt-bytea-bytea">pgp_pub_decrypt( bytea, bytea )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: C</h3>
        
        <pre>pgp_pub_decrypt_text</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.pgp-pub-decrypt-bytea-bytea-text">pgp_pub_decrypt( bytea, bytea, text )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: C</h3>
        
        <pre>pgp_pub_decrypt_text</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.pgp-pub-decrypt-bytea-bytea-text-text">pgp_pub_decrypt( bytea, bytea, text, text )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: C</h3>
        
        <pre>pgp_pub_decrypt_text</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.pgp-pub-decrypt-bytea-bytea-bytea">pgp_pub_decrypt_bytea( bytea, bytea )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: C</h3>
        
        <pre>pgp_pub_decrypt_bytea</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.pgp-pub-decrypt-bytea-bytea-bytea-text">pgp_pub_decrypt_bytea( bytea, bytea, text )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: C</h3>
        
        <pre>pgp_pub_decrypt_bytea</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.pgp-pub-decrypt-bytea-bytea-bytea-text-text">pgp_pub_decrypt_bytea( bytea, bytea, text, text )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: C</h3>
        
        <pre>pgp_pub_decrypt_bytea</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.pgp-pub-encrypt-text-bytea">pgp_pub_encrypt( text, bytea )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: C</h3>
        
        <pre>pgp_pub_encrypt_text</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.pgp-pub-encrypt-text-bytea-text">pgp_pub_encrypt( text, bytea, text )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: C</h3>
        
        <pre>pgp_pub_encrypt_text</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.pgp-pub-encrypt-bytea-bytea-bytea">pgp_pub_encrypt_bytea( bytea, bytea )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: C</h3>
        
        <pre>pgp_pub_encrypt_bytea</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.pgp-pub-encrypt-bytea-bytea-bytea-text">pgp_pub_encrypt_bytea( bytea, bytea, text )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: C</h3>
        
        <pre>pgp_pub_encrypt_bytea</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.pgp-sym-decrypt-bytea-text">pgp_sym_decrypt( bytea, text )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: C</h3>
        
        <pre>pgp_sym_decrypt_text</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.pgp-sym-decrypt-bytea-text-text">pgp_sym_decrypt( bytea, text, text )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: C</h3>
        
        <pre>pgp_sym_decrypt_text</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.pgp-sym-decrypt-bytea-bytea-text">pgp_sym_decrypt_bytea( bytea, text )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: C</h3>
        
        <pre>pgp_sym_decrypt_bytea</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.pgp-sym-decrypt-bytea-bytea-text-text">pgp_sym_decrypt_bytea( bytea, text, text )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: C</h3>
        
        <pre>pgp_sym_decrypt_bytea</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.pgp-sym-encrypt-text-text">pgp_sym_encrypt( text, text )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: C</h3>
        
        <pre>pgp_sym_encrypt_text</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.pgp-sym-encrypt-text-text-text">pgp_sym_encrypt( text, text, text )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: C</h3>
        
        <pre>pgp_sym_encrypt_text</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.pgp-sym-encrypt-bytea-bytea-text">pgp_sym_encrypt_bytea( bytea, text )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: C</h3>
        
        <pre>pgp_sym_encrypt_bytea</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.pgp-sym-encrypt-bytea-bytea-text-text">pgp_sym_encrypt_bytea( bytea, text, text )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: C</h3>
        
        <pre>pgp_sym_encrypt_bytea</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.pkgmaybemodified-name">pkgmaybemodified( name )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pschemaname ALIAS FOR $1;
  _returnval  BOOLEAN;
BEGIN
  SELECT pkghead_indev INTO _returnval
  FROM pkghead
  WHERE (pkghead_name=pschemaname);
  IF (NOT FOUND) THEN
    RETURN FALSE;
  END IF;
  RETURN _returnval;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postapcheck-integer">postapcheck( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RAISE NOTICE &#39;postAPCheck() is deprecated - use postCheck() instead&#39;;
  RETURN postCheck($1, fetchJournalNumber(&#39;AP-CK&#39;));
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postapcheck-integer-integer">postapcheck( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RAISE NOTICE &#39;postAPCheck() is deprecated - use postCheck() instead&#39;;
  RETURN postCheck($1, $2);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postapchecks-integer">postapchecks( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

  RAISE NOTICE &#39;postAPChecks() is deprecated - use postChecks() instead&#39;;
  RETURN postChecks($1);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postapcreditmemoapplication-integer">postapcreditmemoapplication( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pApopenid ALIAS FOR $1;
  _src RECORD;
  _r RECORD;
  _totalAmount NUMERIC := 0;
  _exchGain NUMERIC;

BEGIN

  SELECT apopen_docnumber, (apopen_amount - apopen_paid) AS balance,
         SUM(currtocurr(apcreditapply_curr_id, apopen_curr_id,
				 apcreditapply_amount, CURRENT_DATE)) AS toApply,
	 SUM(apcreditapply_amount) AS junk,
	 apopen_curr_rate INTO _src
  FROM apopen, apcreditapply
  WHERE ( (apcreditapply_source_apopen_id=apopen_id)
   AND (apopen_id=pApopenid) )
  GROUP BY apopen_docnumber, apopen_amount, apopen_paid,
	   apopen_curr_rate;
  IF (NOT FOUND) THEN
    RETURN -1;
  ELSIF (_src.toApply = 0) THEN
    RETURN -2;
  ELSIF (_src.toApply &gt; _src.balance) THEN
    RETURN -3;
  ELSIF (_src.toApply IS NULL AND _src.junk IS NOT NULL) THEN
    RETURN -4;		-- missing exchange rate
  ELSIF (_src.toApply IS NULL) THEN
    RETURN -6;		-- amount to apply is NULL for some unknown reason
  END IF;

  SELECT apopen_id, apopen_vend_id, apopen_docnumber, apopen_doctype, apopen_amount,
         apopen_curr_id, apopen_curr_rate, apopen_docdate, apopen_accnt_id INTO _src
  FROM apopen
  WHERE (apopen_id=pApopenid);
  IF (NOT FOUND) THEN
    RETURN -5;
  END IF;

  FOR _r IN SELECT apcreditapply_id, apcreditapply_target_apopen_id,
		   apcreditapply_amount AS apply_amountSource,
                   currToCurr(apcreditapply_curr_id, apopen_curr_id,
                              apcreditapply_amount, CURRENT_DATE) AS apply_amountTarget,
                   apopen_id, apopen_doctype, apopen_docnumber, apopen_curr_rate, apopen_docdate
            FROM apcreditapply, apopen
            WHERE ( (apcreditapply_source_apopen_id=pApopenid)
             AND (apcreditapply_target_apopen_id=apopen_id) ) LOOP

    IF (_r.apply_amountTarget IS NULL) THEN
      RETURN -4;	-- missing exchange rate
    END IF;

    IF (_r.apply_amountTarget &gt; 0) THEN

--  Update the apopen item to post the paid amount
      UPDATE apopen
      SET apopen_paid = (apopen_paid + _r.apply_amountTarget)
      WHERE (apopen_id=_r.apcreditapply_target_apopen_id);

      UPDATE apopen
      SET apopen_open = false,
        apopen_closedate = current_date
      WHERE ( (apopen_id=_r.apcreditapply_target_apopen_id)
        AND (apopen_amount &lt;= apopen_paid) );

--  Cache the running amount posted
      _totalAmount := (_totalAmount + _r.apply_amountSource);

--  Record the application
      INSERT INTO apapply
      ( apapply_vend_id, apapply_amount,
        apapply_source_apopen_id, apapply_source_doctype, apapply_source_docnumber,
        apapply_target_apopen_id, apapply_target_doctype, apapply_target_docnumber,
        apapply_postdate, apapply_journalnumber, apapply_username, apapply_curr_id )
      VALUES
      ( _src.apopen_vend_id, round(_r.apply_amountSource, 2),
        pApopenid, &#39;C&#39;, _src.apopen_docnumber,
        _r.apopen_id, _r.apopen_doctype, _r.apopen_docnumber,
        CURRENT_DATE, 0, CURRENT_USER, _src.apopen_curr_id );

    END IF;

--  Delete the posted apcreditapply record
    DELETE FROM apcreditapply
    WHERE (apcreditapply_id=_r.apcreditapply_id);

  END LOOP;

--  Record the amount posted and mark the source apopen as closed if it is completely posted
  UPDATE apopen
  SET apopen_paid = (apopen_paid + _totalAmount)
  WHERE (apopen_id=pApopenid);

  UPDATE apopen
  SET apopen_open = false,
    apopen_closedate = current_date
  WHERE ( (apopen_id=pApopenid)
    AND (apopen_amount &lt;= apopen_paid) );

  IF (_r.apopen_docdate &gt; _src.apopen_docdate) THEN
    _exchGain := (_totalAmount / round(_r.apopen_curr_rate,5) - _totalAmount / round(_src.apopen_curr_rate,5)) * -1;
  ELSE
    _exchGain := _totalAmount / round(_src.apopen_curr_rate,5) - _totalAmount / round(_r.apopen_curr_rate,5);
  END IF;

  PERFORM insertGLTransaction(fetchJournalNumber(&#39;AP-MISC&#39;), &#39;A/P&#39;, &#39;CM&#39;,
                            _src.apopen_docnumber, &#39;CM Application&#39;,
                            CASE WHEN (_src.apopen_accnt_id &gt; -1) THEN
				_src.apopen_accnt_id
			    ELSE findAPAccount(_src.apopen_vend_id)
			    END,
			    getGainLossAccntId(), -1,
                            _exchGain,
                            CURRENT_DATE);


  RETURN pApopenid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postapopenitems">postapopenitems(  )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

  UPDATE apopen
  SET apopen_posted=TRUE
  WHERE (NOT apopen_posted);

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postarcreditmemoapplication-integer">postarcreditmemoapplication( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pAropenid ALIAS FOR $1;
  _p RECORD;
  _r RECORD;
  _totalAmount NUMERIC := 0;
  _exchGain NUMERIC := 0;
  _result NUMERIC;

BEGIN

  SELECT aropen_docnumber,
         ROUND(aropen_amount - aropen_paid, 2) AS balance,
         aropen_open,
         ROUND(SUM(currToCurr(arcreditapply_curr_id, aropen_curr_id,
              COALESCE(arcreditapply_amount, 0), aropen_docdate)), 2) AS toApply INTO _p
  FROM aropen, arcreditapply
  WHERE ( (arcreditapply_source_aropen_id=aropen_id)
   AND (aropen_id=pAropenid) )
  GROUP BY aropen_docnumber, aropen_amount, aropen_paid, aropen_open;
  IF (NOT FOUND) THEN
    RETURN -1;
  ELSIF (_p.toApply = 0) THEN
    RETURN -2;
  ELSIF (_p.toApply &gt; _p.balance) THEN
    RETURN -3;
  END IF;

  SELECT aropen_cust_id, aropen_docnumber, aropen_doctype, aropen_amount,
         aropen_curr_id, aropen_docdate, aropen_accnt_id, aropen_cust_id INTO _p
  FROM aropen
  WHERE (aropen_id=pAropenid);
  IF (NOT FOUND) THEN
    RETURN -5;
  END IF;

  FOR _r IN SELECT arcreditapply_id, arcreditapply_target_aropen_id,
                   arcreditapply_amount AS arcreditapply_amountSource,
                   currToCurr(arcreditapply_curr_id, aropen_curr_id,
                              arcreditapply_amount, aropen_docdate) AS arcreditapply_amountTarget,
                   aropen_id, aropen_doctype, aropen_docnumber, aropen_docdate
            FROM arcreditapply, aropen
            WHERE ( (arcreditapply_source_aropen_id=pAropenid)
             AND (arcreditapply_target_aropen_id=aropen_id) ) LOOP

    IF (_r.arcreditapply_amountTarget IS NULL) THEN
      RETURN -4;
    END IF;

    IF (_r.arcreditapply_amountTarget &gt; 0) THEN

--  Update the aropen item to post the paid amount
      UPDATE aropen
      SET aropen_paid = round(aropen_paid + _r.arcreditapply_amountTarget, 2)
      WHERE (aropen_id=_r.arcreditapply_target_aropen_id);

      UPDATE aropen
      SET aropen_open = (round(aropen_amount, 2) &gt; round(aropen_paid, 2))
      WHERE (aropen_id=_r.arcreditapply_target_aropen_id);

--  Cache the running amount posted
      _totalAmount := (_totalAmount + _r.arcreditapply_amountSource);

--  Record the application
      INSERT INTO arapply
      ( arapply_cust_id,
        arapply_source_aropen_id, arapply_source_doctype, arapply_source_docnumber,
        arapply_target_aropen_id, arapply_target_doctype, arapply_target_docnumber,
        arapply_fundstype, arapply_refnumber,
        arapply_applied, arapply_closed, arapply_postdate, arapply_distdate,
        arapply_journalnumber, arapply_username, arapply_curr_id )
      VALUES
      ( _p.aropen_cust_id,
        pAropenid, _p.aropen_doctype, _p.aropen_docnumber,
        _r.aropen_id, _r.aropen_doctype, _r.aropen_docnumber,
        &#39;&#39;, &#39;&#39;,
        round(_r.arcreditapply_amountSource, 2), TRUE, CURRENT_DATE, CURRENT_DATE,
        0, CURRENT_USER, _p.aropen_curr_id );

    END IF;

--  Delete the posted arcreditapply record
    DELETE FROM arcreditapply
    WHERE (arcreditapply_id=_r.arcreditapply_id);

    _exchGain := round(currGain(_p.aropen_curr_id, _r.arcreditapply_amountSource,
                                _r.aropen_docdate, _p.aropen_docdate), 2);
    IF (_exchGain &lt;&gt; 0) THEN
        PERFORM insertGLTransaction(fetchJournalNumber(&#39;AR-MISC&#39;), &#39;A/R&#39;,
                                    &#39;CR&#39;, _p.aropen_doctype,
                                    _p.aropen_docnumber,
                                    getGainLossAccntId(),
                                    CASE WHEN (_p.aropen_accnt_id = -1) THEN
                                        findARAccount(_p.aropen_cust_id)
                                        ELSE _p.aropen_accnt_id
                                        END,
                                    -1, _exchGain * -1, CURRENT_DATE);
    END IF;

  END LOOP;

-- TODO: If this is a Customer Deposit (aropen_doctype=&#39;R&#39;)
--       the we need to convert the total to a base transaction
  IF(_p.aropen_doctype=&#39;R&#39;) THEN
    SELECT insertGLTransaction(fetchJournalNumber(&#39;AR-MISC&#39;), &#39;A/R&#39;,
                               &#39;CD&#39;, _p.aropen_doctype, _p.aropen_docnumber,
                               cr.accnt_id, db.accnt_id, -1,
                               currToBase(_p.aropen_curr_id, _totalAmount, _p.aropen_docdate),
                               CURRENT_DATE)
      INTO _result
      FROM accnt AS cr, accnt AS db
     WHERE ((db.accnt_id = findDeferredAccount(_p.aropen_cust_id))
       AND  (cr.accnt_id = findARAccount(_p.aropen_cust_id)) );
    IF(NOT FOUND OR _result &lt; 0) THEN
      RAISE EXCEPTION &#39;There was an error posting the Customer Deposit GL Transactions.&#39;;
    END IF;
  END IF;

--  Record the amount posted and mark the source aropen as closed if it is completely posted
  UPDATE aropen
  SET aropen_paid = round(aropen_paid + _totalAmount, 2)
  WHERE (aropen_id=pAropenid);

  UPDATE aropen
  SET aropen_open = (round(aropen_amount, 2) &gt; round(aropen_paid, 2))
  WHERE (aropen_id=pAropenid);

  RETURN pAropenid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postarmemo-integer">postarmemo( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pArmemoid ALIAS FOR $1;
  _p RECORD;
  _r RECORD;
  _posted NUMERIC := 0;

BEGIN

  SELECT armemo_docnumber, armemo_accnt_id, armemo_amount, armemo_curr_id,
         accnt_id AS ar_accnt_id INTO _p
  FROM armemo, accnt
  WHERE ( (findARAccount(armemo_cust_id)=accnt_id)
   AND (armemo_id=pArmemoid) );
  IF (NOT FOUND) THEN
    RETURN -5;
  END IF;

  FOR _r IN SELECT armemoitem_id, armemoitem_aropen_id, armemoitem_amount
            FROM armemoitem
            WHERE (armemoitem_armemo_id=pArmemoid) LOOP

--  Update the aropen item to post the paid amount
    UPDATE aropen
    SET aropen_paid = round(aropen_paid + currToCurr(_p.armemo_curr_id,
						     aropen_curr_id,
						     _r.armemoitem_amount,
						     aropen_docdate), 2)
    WHERE (aropen_id=_r.armemoitem_aropen_id);

    UPDATE aropen
    SET aropen_open = (round(aropen_amount, 2) &gt; round(aropen_paid, 2))
    WHERE (aropen_id=_r.armemoitem_aropen_id);

--  Cache the running amount posted
    _posted := (_posted + _r.armemoitem_amount);

--  Delete the posted armemoitem
    DELETE FROM armemoitem
    WHERE (armemoitem_id=_r.armemoitem_id);

  END LOOP;

-- ToDo: is CURRENT_DATE the right date to use for this currToBase?
  PERFORM insertGLTransaction( &#39;A/R&#39;, &#39;MM&#39;, _p.armemo_docnumber, &#39;Post A/R Credit Memo&#39;,
                               _p.ar_accnt_id, _p.armemo_accnt_id, -1,
			       currToBase(_p.armemo_curr_id, _posted,
					  CURRENT_DATE),
			       CURRENT_DATE );

--  Delete the armemo if it is completely posted
  IF (round(_posted, 2) = round(_p.armemo_amount, 2)) THEN
    DELETE FROM armemo
    WHERE (armemo_id=pArmemoid);
  ELSE
--  Reset the armemo amount
    UPDATE armemo
    SET armemo_amount = round(armemo_amount - _posted, 2)
    WHERE (armemo_id=pArmemoid);
  END IF;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postaropenitems">postaropenitems(  )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

  UPDATE aropen
  SET aropen_posted=TRUE
  WHERE (NOT aropen_posted);

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postbankadjustment-integer">postbankadjustment( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBankadjid ALIAS FOR $1;
  _sequence INTEGER;
  _r RECORD;

BEGIN

--  Post the G/L transaction
  SELECT insertGLTransaction( &#39;G/L&#39;, &#39;AD&#39;,
                              bankadj_docnumber, bankadjtype_name,
                              bankadjtype_accnt_id, bankaccnt_accnt_id, bankadj_id,
                              round(currToBase(bankaccnt_curr_id,
					 CASE WHEN(bankadjtype_iscredit) THEN
					     (bankadj_amount * -1)
					 ELSE bankadj_amount END,
					 bankadj_date), 2), bankadj_date ) INTO _sequence
    FROM bankadj, bankaccnt, bankadjtype
   WHERE ( (bankadj_bankaccnt_id=bankaccnt_id)
     AND   (bankadj_bankadjtype_id=bankadjtype_id)
     AND   (NOT bankadj_posted)
     AND   (bankadj_id=pBankadjid) );
  IF ( NOT FOUND ) THEN
    RETURN -1;
  END IF;

  IF (_sequence &gt;= 0) THEN
--  Update the bankadj record with this sequence and mark it posted
    UPDATE bankadj
       SET bankadj_sequence = _sequence,
           bankadj_posted = TRUE
     WHERE bankadj_id=pBankadjid;
  END IF;

  RETURN _sequence;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postbankreconciliation-integer">postbankreconciliation( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBankrecid ALIAS FOR $1;
  _accntid INTEGER;
  _sequence INTEGER;
  _gltransid INTEGER;
  _r RECORD;

BEGIN

-- Check the accnt information to make sure it is valid
  SELECT accnt_id INTO _accntid
    FROM bankrec, bankaccnt, accnt
   WHERE ( (bankaccnt_accnt_id=accnt_id)
     AND   (bankrec_bankaccnt_id=bankaccnt_id)
     AND   (bankrec_id=pBankrecid) );
  IF ( NOT FOUND ) THEN
    RETURN -1;
  END IF;

-- Delete any bankrecitem records that are not marked as cleared for cleanliness
  DELETE FROM bankrecitem
   WHERE ( (NOT bankrecitem_cleared)
     AND   (bankrecitem_bankrec_id=pBankrecid) );

-- Post any bankadj items that were marked as cleared and convert the bankrecitem
  FOR _r IN SELECT bankrecitem_id, bankrecitem_source_id
              FROM bankrecitem, bankadj
             WHERE ( (bankrecitem_source = &#39;AD&#39;)
               AND   (bankrecitem_source_id=bankadj_id)
               AND   (bankrecitem_cleared)
               AND   (NOT bankadj_posted)
               AND   (bankrecitem_bankrec_id=pBankrecid) ) LOOP

    SELECT postBankAdjustment(_r.bankrecitem_source_id) INTO _sequence;

    IF (_sequence &lt; 0) THEN
      RETURN -10;
    END IF;

    SELECT gltrans_id INTO _gltransid
      FROM gltrans
     WHERE ( (gltrans_sequence=_sequence)
       AND   (gltrans_accnt_id=_accntid) );
    IF ( NOT FOUND ) THEN
      RETURN -11;
    END IF;

    UPDATE bankrecitem
       SET bankrecitem_source = &#39;GL&#39;,
           bankrecitem_source_id=_gltransid
     WHERE (bankrecitem_id=_r.bankrecitem_id);

  END LOOP;

-- Mark all the gltrans items that have been cleared as reconciled.
  UPDATE gltrans
     SET gltrans_rec = TRUE
   WHERE ( (gltrans_id IN (SELECT bankrecitem_source_id
                             FROM bankrecitem
                            WHERE ((bankrecitem_source = &#39;GL&#39;)
                              AND  (bankrecitem_cleared)
                              AND  (bankrecitem_bankrec_id=pBankrecid) ) ) )
     AND   (gltrans_accnt_id=_accntid) ) ;

-- Mark the bankrec record as posted
  UPDATE bankrec
     SET bankrec_posted = TRUE
   WHERE (bankrec_id=pBankrecid);

  RETURN pBankrecid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postbillingselection-integer">postbillingselection( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCobmiscid ALIAS FOR $1;
  _invcheadid INTEGER;
  _invcitemid INTEGER;
  _qtyToInvoice	NUMERIC;
  _r		RECORD;
  _s		RECORD;

BEGIN

  IF ( ( SELECT cobmisc_posted
         FROM cobmisc
         WHERE (cobmisc_id=pCobmiscid) ) ) THEN
    RETURN -1;
  END IF;

  SELECT NEXTVAL(&#39;invchead_invchead_id_seq&#39;) INTO _invcheadid;

--  Give this selection a number if it has not been assigned one
  UPDATE cobmisc
  SET cobmisc_invcnumber=fetchInvcNumber()
  WHERE ( (cobmisc_invcnumber IS NULL)
   AND (cobmisc_id=pCobmiscid) );

--  Create the Invoice header
  INSERT INTO invchead
  ( invchead_id, invchead_cust_id, invchead_shipto_id,
    invchead_ordernumber, invchead_orderdate,
    invchead_posted, invchead_printed,
    invchead_invcnumber, invchead_invcdate, invchead_shipdate,
    invchead_ponumber, invchead_shipvia, invchead_fob,
    invchead_billto_name, invchead_billto_address1,
    invchead_billto_address2, invchead_billto_address3,
    invchead_billto_city, invchead_billto_state,
    invchead_billto_zipcode, invchead_billto_phone,
    invchead_billto_country,
    invchead_shipto_name, invchead_shipto_address1,
    invchead_shipto_address2, invchead_shipto_address3,
    invchead_shipto_city, invchead_shipto_state,
    invchead_shipto_zipcode, invchead_shipto_phone,
    invchead_shipto_country,
    invchead_salesrep_id, invchead_commission,
    invchead_terms_id,
    invchead_freight, invchead_tax,
    invchead_tax_ratea, invchead_tax_rateb, invchead_tax_ratec,
    invchead_misc_amount, invchead_misc_descrip, invchead_misc_accnt_id,
    invchead_payment, invchead_paymentref,
    invchead_notes, invchead_prj_id, invchead_curr_id,
    invchead_taxauth_id, invchead_tax_curr_id,
    invchead_adjtax_id, invchead_adjtaxtype_id,
    invchead_adjtax_pcta, invchead_adjtax_pctb, invchead_adjtax_pctc,
    invchead_adjtax_ratea, invchead_adjtax_rateb, invchead_adjtax_ratec,
    invchead_freighttax_id, invchead_freighttaxtype_id,
    invchead_freighttax_pcta, invchead_freighttax_pctb, invchead_freighttax_pctc,
    invchead_freighttax_ratea, invchead_freighttax_rateb, invchead_freighttax_ratec )
  SELECT _invcheadid,
         cohead_cust_id, cohead_shipto_id,
         cohead_number, cohead_orderdate,
         FALSE, FALSE,
         cobmisc_invcnumber, cobmisc_invcdate, cobmisc_shipdate,
         cohead_custponumber, cobmisc_shipvia, cohead_fob,
         cohead_billtoname, cohead_billtoaddress1,
         cohead_billtoaddress2, cohead_billtoaddress3,
         cohead_billtocity, cohead_billtostate,
         cohead_billtozipcode, cust_phone,
         cohead_billtocountry,
         cohead_shiptoname, cohead_shiptoaddress1,
         cohead_shiptoaddress2, cohead_shiptoaddress3,
         cohead_shiptocity, cohead_shiptostate,
         cohead_shiptozipcode, cohead_shiptophone,
         cohead_shiptocountry,
         cohead_salesrep_id, COALESCE(cohead_commission, 0),
         cohead_terms_id,
         cobmisc_freight, COALESCE(cobmisc_tax, 0),
         cobmisc_tax_ratea, cobmisc_tax_rateb, cobmisc_tax_ratec,
         cobmisc_misc, cobmisc_misc_descrip, cobmisc_misc_accnt_id,
         cobmisc_payment, cobmisc_paymentref,
         cobmisc_notes, cohead_prj_id, cobmisc_curr_id,
         cobmisc_taxauth_id, cobmisc_tax_curr_id,
         cobmisc_adjtax_id, cobmisc_adjtaxtype_id,
         cobmisc_adjtax_pcta, cobmisc_adjtax_pctb, cobmisc_adjtax_pctc,
         cobmisc_adjtax_ratea, cobmisc_adjtax_rateb, cobmisc_adjtax_ratec,
         cobmisc_freighttax_id, cobmisc_freighttaxtype_id,
         cobmisc_freighttax_pcta, cobmisc_freighttax_pctb, cobmisc_freighttax_pctc,
         cobmisc_freighttax_ratea, cobmisc_freighttax_rateb, cobmisc_freighttax_ratec
  FROM cobmisc, cohead, cust
  WHERE ( (cobmisc_cohead_id=cohead_id)
   AND (cohead_cust_id=cust_id)
   AND (cobmisc_id=pCobmiscid) );

--  Create the Invoice items
  FOR _r IN SELECT coitem_id, coitem_linenumber, coitem_subnumber, coitem_custpn,
                   coitem_qtyord, cobill_qty,
                   coitem_qty_uom_id, coitem_qty_invuomratio,
                   coitem_custprice, coitem_price,
                   coitem_price_uom_id, coitem_price_invuomratio,
                   coitem_memo,
                   itemsite_item_id, itemsite_warehous_id,
                   cobill_tax_id, cobill_taxtype_id,
                   cobill_tax_pcta, cobill_tax_pctb, cobill_tax_pctc,
                   cobill_tax_ratea, cobill_tax_rateb, cobill_tax_ratec
            FROM coitem, cobill, itemsite
            WHERE ( (cobill_coitem_id=coitem_id)
             AND (coitem_itemsite_id=itemsite_id)
             AND (cobill_cobmisc_id=pCobmiscid) ) LOOP

    SELECT NEXTVAL(&#39;invcitem_invcitem_id_seq&#39;) INTO _invcitemid;
    INSERT INTO invcitem
    ( invcitem_id, invcitem_invchead_id,
      invcitem_linenumber, invcitem_item_id, invcitem_warehous_id,
      invcitem_custpn, invcitem_number, invcitem_descrip,
      invcitem_ordered, invcitem_billed,
      invcitem_qty_uom_id, invcitem_qty_invuomratio,
      invcitem_custprice, invcitem_price,
      invcitem_price_uom_id, invcitem_price_invuomratio,
      invcitem_notes,
      invcitem_tax_id, invcitem_taxtype_id,
      invcitem_tax_pcta, invcitem_tax_pctb, invcitem_tax_pctc,
      invcitem_tax_ratea, invcitem_tax_rateb, invcitem_tax_ratec,
      invcitem_coitem_id )
    VALUES
    ( _invcitemid, _invcheadid,
      CASE WHEN(_r.coitem_subnumber &gt; 0) THEN (_r.coitem_linenumber * 1000) + _r.coitem_subnumber ELSE _r.coitem_linenumber END,
      _r.itemsite_item_id, _r.itemsite_warehous_id,
      _r.coitem_custpn, &#39;&#39;, &#39;&#39;,
      _r.coitem_qtyord, _r.cobill_qty,
      _r.coitem_qty_uom_id, _r.coitem_qty_invuomratio,
      _r.coitem_custprice, _r.coitem_price,
      _r.coitem_price_uom_id, _r.coitem_price_invuomratio,
      _r.coitem_memo,
      _r.cobill_tax_id, _r.cobill_taxtype_id,
      _r.cobill_tax_pcta, _r.cobill_tax_pctb, _r.cobill_tax_pctc,
      _r.cobill_tax_ratea, _r.cobill_tax_rateb, _r.cobill_tax_ratec,
      _r.coitem_id );

--  Find and mark any Lot/Serial invdetail records associated with this bill
--  This is obsolete, replaced by shipitem_invcitem_id
--    UPDATE invdetail SET invdetail_invcitem_id = _invcitemid
--     WHERE (invdetail_id IN (SELECT invdetail_id
--                               FROM coitem, cohead, invhist, invdetail
--                              WHERE ((coitem_cohead_id=cohead_id)
--                                AND  (invdetail_invhist_id=invhist_id)
--                                AND  (invhist_ordnumber = text(cohead_number||&#39;-&#39;||formatSoLineNumber(coitem_id)))
--                                AND  (invdetail_invcitem_id IS NULL)
--                                AND  (coitem_id=_r.coitem_id)) ) );

--  Mark any shipped, uninvoiced shipitems for the current coitem as invoiced
    _qtyToInvoice :=  _r.cobill_qty;
    FOR _s IN SELECT shipitem.*, shipitem_qty = _r.cobill_qty AS matched
	      FROM shipitem, shiphead
	      WHERE ((shipitem_shiphead_id=shiphead_id)
	        AND  (shipitem_orderitem_id=_r.coitem_id)
	        AND  (shiphead_shipped)
		AND  (shiphead_order_type=&#39;SO&#39;)
	        AND  (NOT shipitem_invoiced))
	      ORDER BY matched DESC, shipitem_qty DESC FOR UPDATE LOOP
      IF (_qtyToInvoice &gt;= _s.shipitem_qty) THEN
	UPDATE shipitem
	SET shipitem_invoiced=TRUE, shipitem_invcitem_id=_invcitemid
	WHERE (shipitem_id=_s.shipitem_id);
	_qtyToInvoice := _qtyToInvoice - _s.shipitem_qty;
      END IF;
      IF (_qtyToInvoice &lt;= 0) THEN
	EXIT;
      END IF;
    END LOOP;

  END LOOP;

  UPDATE cobill SET cobill_invcnum=cobmisc_invcnumber,
		    cobill_invcitem_id=invcitem_id
  FROM invcitem, coitem, cobmisc
  WHERE ((invcitem_linenumber=CASE WHEN(coitem_subnumber &gt; 0) THEN (coitem_linenumber * 1000) + coitem_subnumber ELSE coitem_linenumber END)
    AND  (coitem_id=cobill_coitem_id)
    AND  (cobmisc_id=cobill_cobmisc_id)
    AND  (cobill_cobmisc_id=pCobmiscid)
    AND  (invcitem_invchead_id=_invcheadid));

--  Close all requested coitem&#39;s
  IF ( ( SELECT cobmisc_closeorder
         FROM cobmisc
         WHERE (cobmisc_id=pCobmiscid) ) ) THEN
    UPDATE coitem
    SET coitem_status=&#39;C&#39;
    FROM cobmisc
    WHERE ( (coitem_status NOT IN (&#39;C&#39;, &#39;X&#39;))
     AND (coitem_cohead_id=cobmisc_cohead_id)
     AND (cobmisc_id=pCobmiscid) );
  ELSE
    UPDATE coitem
    SET coitem_status=&#39;C&#39;
    FROM cobill
    WHERE ( (cobill_coitem_id=coitem_id)
     AND (coitem_status &lt;&gt; &#39;X&#39;)
     AND (cobill_toclose)
     AND (cobill_cobmisc_id=pCobmiscid) );
  END IF;

--  Mark the cobmisc as posted
  UPDATE cobmisc
  SET cobmisc_posted=TRUE, cobmisc_invchead_id=_invcheadid
  WHERE (cobmisc_id=pCobmiscid);

--  All done
  RETURN _invcheadid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postbillingselectionconsolidated-integer">postbillingselectionconsolidated( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  _invcheadid INTEGER;
  _invcitemid INTEGER;
  _qtyToInvoice	NUMERIC;
  _r		RECORD;
  _s		RECORD;
  _c		RECORD;
  _i		RECORD;
  _count      INTEGER;
  _invcnumber INTEGER;
  _lastlinenumber INTEGER;

BEGIN
  _count := 0;

  FOR _c IN SELECT min(cobmisc_id) AS cobmisc_id, count(*) AS cnt,
-- there are the key values for consolidation
                   cohead_billtoname, cohead_billtoaddress1,
                   cohead_billtoaddress2, cohead_billtoaddress3,
                   cohead_billtocity, cohead_billtostate,
                   cohead_billtozipcode, cust_phone,
                   cohead_billtocountry,
                   cohead_salesrep_id, cohead_commission,
                   cohead_terms_id,
                   cobmisc_misc_accnt_id,
                   cohead_prj_id, cobmisc_curr_id,
                   cobmisc_taxauth_id, cobmisc_tax_curr_id,
                   cobmisc_adjtax_id, cobmisc_adjtaxtype_id,
                   cobmisc_adjtax_pcta, cobmisc_adjtax_pctb, cobmisc_adjtax_pctc,
                   cobmisc_freighttax_id, cobmisc_freighttaxtype_id,
                   cobmisc_freighttax_pcta, cobmisc_freighttax_pctb, cobmisc_freighttax_pctc,
-- the following are consolidated values to use in creating the header
                   MIN(cohead_number) AS cohead_number,
                   MIN(cohead_orderdate) AS cohead_orderdate,
                   MIN(cobmisc_invcdate) AS cobmisc_invcdate,
                   MIN(cobmisc_shipdate) AS cobmisc_shipdate,
                   SUM(cobmisc_freight) AS cobmisc_freight,
                   COALESCE(SUM(cobmisc_tax), 0) AS cobmisc_tax,
                   SUM(cobmisc_tax_ratea) AS cobmisc_tax_ratea,
                   SUM(cobmisc_tax_rateb) AS cobmisc_tax_rateb,
                   SUM(cobmisc_tax_ratec) AS cobmisc_tax_ratec,
                   SUM(cobmisc_misc) AS cobmisc_misc,
                   SUM(cobmisc_payment) AS cobmisc_payment,
                   SUM(cobmisc_adjtax_ratea) AS cobmisc_adjtax_ratea,
                   SUM(cobmisc_adjtax_rateb) AS cobmisc_adjtax_rateb,
                   SUM(cobmisc_adjtax_ratec) AS cobmisc_adjtax_ratec,
                   SUM(cobmisc_freighttax_ratea) AS cobmisc_freighttax_ratea,
                   SUM(cobmisc_freighttax_rateb) AS cobmisc_freighttax_rateb,
                   SUM(cobmisc_freighttax_ratec) AS cobmisc_freighttax_ratec
              FROM cobmisc, cohead, cust
             WHERE((cobmisc_cohead_id=cohead_id)
               AND (cohead_cust_id=cust_id)
               AND (NOT cobmisc_posted)
               AND (cohead_cust_id=pCustid))
          GROUP BY cohead_billtoname, cohead_billtoaddress1,
                   cohead_billtoaddress2, cohead_billtoaddress3,
                   cohead_billtocity, cohead_billtostate,
                   cohead_billtozipcode, cust_phone,
                   cohead_billtocountry,
                   cohead_salesrep_id, cohead_commission,
                   cohead_terms_id,
                   cobmisc_misc_accnt_id,
                   cohead_prj_id, cobmisc_curr_id,
                   cobmisc_taxauth_id, cobmisc_tax_curr_id,
                   cobmisc_adjtax_id, cobmisc_adjtaxtype_id,
                   cobmisc_adjtax_pcta, cobmisc_adjtax_pctb, cobmisc_adjtax_pctc,
                   cobmisc_freighttax_id, cobmisc_freighttaxtype_id,
                   cobmisc_freighttax_pcta, cobmisc_freighttax_pctb, cobmisc_freighttax_pctc LOOP

    IF(_c.cnt = 1) THEN
      PERFORM postBillingSelection(_c.cobmisc_id);
      _count := (_count + 1);
    ELSE
      SELECT NEXTVAL(&#39;invchead_invchead_id_seq&#39;), fetchInvcNumber() INTO _invcheadid, _invcnumber;
  
  --  Create the Invoice header
      INSERT INTO invchead
      ( invchead_id, invchead_cust_id, invchead_shipto_id,
        invchead_ordernumber, invchead_orderdate,
        invchead_posted, invchead_printed,
        invchead_invcnumber, invchead_invcdate, invchead_shipdate,
        invchead_ponumber, invchead_shipvia, invchead_fob,
        invchead_billto_name, invchead_billto_address1,
        invchead_billto_address2, invchead_billto_address3,
        invchead_billto_city, invchead_billto_state,
        invchead_billto_zipcode, invchead_billto_phone,
        invchead_billto_country,
        invchead_shipto_name, invchead_shipto_address1,
        invchead_shipto_address2, invchead_shipto_address3,
        invchead_shipto_city, invchead_shipto_state,
        invchead_shipto_zipcode, invchead_shipto_phone,
        invchead_shipto_country,
        invchead_salesrep_id, invchead_commission,
        invchead_terms_id,
        invchead_freight, invchead_tax,
        invchead_tax_ratea, invchead_tax_rateb, invchead_tax_ratec,
        invchead_misc_amount, invchead_misc_descrip, invchead_misc_accnt_id,
        invchead_payment, invchead_paymentref,
        invchead_notes, invchead_prj_id, invchead_curr_id,
        invchead_taxauth_id, invchead_tax_curr_id,
        invchead_adjtax_id, invchead_adjtaxtype_id,
        invchead_adjtax_pcta, invchead_adjtax_pctb, invchead_adjtax_pctc,
        invchead_adjtax_ratea, invchead_adjtax_rateb, invchead_adjtax_ratec,
        invchead_freighttax_id, invchead_freighttaxtype_id,
        invchead_freighttax_pcta, invchead_freighttax_pctb, invchead_freighttax_pctc,
        invchead_freighttax_ratea, invchead_freighttax_rateb, invchead_freighttax_ratec )
      VALUES(_invcheadid,
             pCustid, -1,
             NULL, _c.cohead_orderdate,
             FALSE, FALSE,
             _invcnumber, _c.cobmisc_invcdate, _c.cobmisc_shipdate,
             &#39;MULTIPLE&#39;, &#39;&#39;, &#39;&#39;,
             _c.cohead_billtoname, _c.cohead_billtoaddress1,
             _c.cohead_billtoaddress2, _c.cohead_billtoaddress3,
             _c.cohead_billtocity, _c.cohead_billtostate,
             _c.cohead_billtozipcode, _c.cust_phone,
             _c.cohead_billtocountry,
             &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;,
             _c.cohead_salesrep_id, COALESCE(_c.cohead_commission, 0),
             _c.cohead_terms_id,
             _c.cobmisc_freight, _c.cobmisc_tax,
             _c.cobmisc_tax_ratea, _c.cobmisc_tax_rateb, _c.cobmisc_tax_ratec,
             _c.cobmisc_misc, CASE WHEN(_c.cobmisc_misc &lt;&gt; 0) THEN &#39;Multiple&#39; ELSE &#39;&#39; END,
             _c.cobmisc_misc_accnt_id,
             _c.cobmisc_payment, &#39;&#39;,
             &#39;Multiple Sales Order # Invoice&#39;, _c.cohead_prj_id, _c.cobmisc_curr_id,
             _c.cobmisc_taxauth_id, _c.cobmisc_tax_curr_id,
             _c.cobmisc_adjtax_id, _c.cobmisc_adjtaxtype_id,
             _c.cobmisc_adjtax_pcta, _c.cobmisc_adjtax_pctb, _c.cobmisc_adjtax_pctc,
             _c.cobmisc_adjtax_ratea, _c.cobmisc_adjtax_rateb, _c.cobmisc_adjtax_ratec,
             _c.cobmisc_freighttax_id, _c.cobmisc_freighttaxtype_id,
             _c.cobmisc_freighttax_pcta, _c.cobmisc_freighttax_pctb, _c.cobmisc_freighttax_pctc,
             _c.cobmisc_freighttax_ratea, _c.cobmisc_freighttax_rateb, _c.cobmisc_freighttax_ratec);
  
    _lastlinenumber := 0;
    FOR _i IN SELECT cobmisc_id
                FROM cobmisc, cohead, cust
               WHERE((cobmisc_cohead_id=cohead_id)
                 AND (cohead_cust_id=cust_id)
                 AND (NOT cobmisc_posted)
                 AND (cohead_cust_id=pCustid)
                 AND (COALESCE(cohead_billtoname,&#39;&#39;)         = COALESCE(_c.cohead_billtoname,&#39;&#39;))
                 AND (COALESCE(cohead_billtoaddress1,&#39;&#39;)     = COALESCE(_c.cohead_billtoaddress1,&#39;&#39;))
                 AND (COALESCE(cohead_billtoaddress2,&#39;&#39;)     = COALESCE(_c.cohead_billtoaddress2,&#39;&#39;))
                 AND (COALESCE(cohead_billtoaddress3,&#39;&#39;)     = COALESCE(_c.cohead_billtoaddress3,&#39;&#39;))
                 AND (COALESCE(cohead_billtocity,&#39;&#39;)         = COALESCE(_c.cohead_billtocity,&#39;&#39;))
                 AND (COALESCE(cohead_billtostate,&#39;&#39;)        = COALESCE(_c.cohead_billtostate,&#39;&#39;))
                 AND (COALESCE(cohead_billtozipcode,&#39;&#39;)      = COALESCE(_c.cohead_billtozipcode,&#39;&#39;))
                 AND (COALESCE(cust_phone,&#39;&#39;)                = COALESCE(_c.cust_phone,&#39;&#39;))
                 AND (COALESCE(cohead_billtocountry,&#39;&#39;)      = COALESCE(_c.cohead_billtocountry,&#39;&#39;))
                 AND (COALESCE(cohead_salesrep_id, 0)        = COALESCE(_c.cohead_salesrep_id, 0))
                 AND (COALESCE(cohead_commission, 0)         = COALESCE(_c.cohead_commission, 0))
                 AND (COALESCE(cohead_terms_id, 0)           = COALESCE(_c.cohead_terms_id, 0))
                 AND (COALESCE(cobmisc_misc_accnt_id, 0)     = COALESCE(_c.cobmisc_misc_accnt_id, 0))
                 AND (COALESCE(cohead_prj_id, 0)             = COALESCE(_c.cohead_prj_id, 0))
                 AND (COALESCE(cobmisc_curr_id, 0)           = COALESCE(_c.cobmisc_curr_id, 0))
                 AND (COALESCE(cobmisc_taxauth_id, 0)        = COALESCE(_c.cobmisc_taxauth_id, 0))
                 AND (COALESCE(cobmisc_tax_curr_id, 0)       = COALESCE(_c.cobmisc_tax_curr_id, 0))
                 AND (COALESCE(cobmisc_adjtax_id, 0)         = COALESCE(_c.cobmisc_adjtax_id, 0))
                 AND (COALESCE(cobmisc_adjtaxtype_id, 0)     = COALESCE(_c.cobmisc_adjtaxtype_id, 0))
                 AND (COALESCE(cobmisc_adjtax_pcta, 0)       = COALESCE(_c.cobmisc_adjtax_pcta, 0))
                 AND (COALESCE(cobmisc_adjtax_pctb, 0)       = COALESCE(_c.cobmisc_adjtax_pctb, 0))
                 AND (COALESCE(cobmisc_adjtax_pctc, 0)       = COALESCE(_c.cobmisc_adjtax_pctc, 0))
                 AND (COALESCE(cobmisc_freighttax_id, 0)     = COALESCE(_c.cobmisc_freighttax_id, 0))
                 AND (COALESCE(cobmisc_freighttaxtype_id, 0) = COALESCE(_c.cobmisc_freighttaxtype_id, 0))
                 AND (COALESCE(cobmisc_freighttax_pcta, 0)   = COALESCE(_c.cobmisc_freighttax_pcta, 0))
                 AND (COALESCE(cobmisc_freighttax_pctb, 0)   = COALESCE(_c.cobmisc_freighttax_pctb, 0))
                 AND (COALESCE(cobmisc_freighttax_pctc, 0)   = COALESCE(_c.cobmisc_freighttax_pctc, 0))) LOOP

    --  Give this selection a number if it has not been assigned one
        UPDATE cobmisc
           SET cobmisc_invcnumber=_invcnumber
         WHERE(cobmisc_id=_i.cobmisc_id);
      
    --  Create the Invoice items
        FOR _r IN SELECT coitem_id, coitem_linenumber, coitem_subnumber, coitem_custpn,
                         coitem_qtyord, cobill_qty,
                         coitem_qty_uom_id, coitem_qty_invuomratio,
                         coitem_custprice, coitem_price,
                         coitem_price_uom_id, coitem_price_invuomratio,
                         coitem_memo,
                         itemsite_item_id, itemsite_warehous_id,
                         cobill_tax_id, cobill_taxtype_id,
                         cobill_tax_pcta, cobill_tax_pctb, cobill_tax_pctc,
                         cobill_tax_ratea, cobill_tax_rateb, cobill_tax_ratec
                    FROM coitem, cobill, itemsite
                   WHERE((cobill_coitem_id=coitem_id)
                     AND (coitem_itemsite_id=itemsite_id)
                     AND (cobill_cobmisc_id=_i.cobmisc_id) ) LOOP
      
          SELECT NEXTVAL(&#39;invcitem_invcitem_id_seq&#39;) INTO _invcitemid;
          INSERT INTO invcitem
          ( invcitem_id, invcitem_invchead_id,
            invcitem_linenumber, invcitem_item_id, invcitem_warehous_id,
            invcitem_custpn, invcitem_number, invcitem_descrip,
            invcitem_ordered, invcitem_billed,
            invcitem_qty_uom_id, invcitem_qty_invuomratio,
            invcitem_custprice, invcitem_price,
            invcitem_price_uom_id, invcitem_price_invuomratio,
            invcitem_notes,
            invcitem_tax_id, invcitem_taxtype_id,
            invcitem_tax_pcta, invcitem_tax_pctb, invcitem_tax_pctc,
            invcitem_tax_ratea, invcitem_tax_rateb, invcitem_tax_ratec,
            invcitem_coitem_id )
          VALUES
          ( _invcitemid, _invcheadid,
            _lastlinenumber + CASE WHEN(_r.coitem_subnumber &gt; 0) THEN (_r.coitem_linenumber * 1000) + _r.coitem_subnumber ELSE _r.coitem_linenumber END,
            _r.itemsite_item_id, _r.itemsite_warehous_id,
            _r.coitem_custpn, &#39;&#39;, &#39;&#39;,
            _r.coitem_qtyord, _r.cobill_qty,
            _r.coitem_qty_uom_id, _r.coitem_qty_invuomratio,
            _r.coitem_custprice, _r.coitem_price,
            _r.coitem_price_uom_id, _r.coitem_price_invuomratio,
            _r.coitem_memo,
            _r.cobill_tax_id, _r.cobill_taxtype_id,
            _r.cobill_tax_pcta, _r.cobill_tax_pctb, _r.cobill_tax_pctc,
            _r.cobill_tax_ratea, _r.cobill_tax_rateb, _r.cobill_tax_ratec,
            _r.coitem_id );
      
      --  Find and mark any Lot/Serial invdetail records associated with this bill
          UPDATE invdetail SET invdetail_invcitem_id = _invcitemid
           WHERE (invdetail_id IN (SELECT invdetail_id
                                     FROM coitem, cohead, invhist, invdetail
                                    WHERE ((coitem_cohead_id=cohead_id)
                                      AND  (invdetail_invhist_id=invhist_id)
                                      AND  (invhist_ordnumber = text(cohead_number||&#39;-&#39;||formatSoLineNumber(coitem_id)))
                                      AND  (invdetail_invcitem_id IS NULL)
                                      AND  (coitem_id=_r.coitem_id)) ) );
      
      --  Mark any shipped, uninvoiced shipitems for the current coitem as invoiced
          _qtyToInvoice :=  _r.cobill_qty;
          FOR _s IN SELECT shipitem.*, shipitem_qty = _r.cobill_qty AS matched
	            FROM shipitem, shiphead
	            WHERE ((shipitem_shiphead_id=shiphead_id)
	              AND  (shipitem_orderitem_id=_r.coitem_id)
	              AND  (shiphead_shipped)
		      AND  (shiphead_order_type=&#39;SO&#39;)
	              AND  (NOT shipitem_invoiced))
	            ORDER BY matched DESC, shipitem_qty DESC FOR UPDATE LOOP
            IF (_qtyToInvoice &gt;= _s.shipitem_qty) THEN
	      UPDATE shipitem
	      SET shipitem_invoiced=TRUE, shipitem_invcitem_id=_invcitemid
	      WHERE (shipitem_id=_s.shipitem_id);
	      _qtyToInvoice := _qtyToInvoice - _s.shipitem_qty;
            END IF;
            IF (_qtyToInvoice &lt;= 0) THEN
	      EXIT;
            END IF;
          END LOOP;
    
        END LOOP;
    
        UPDATE cobill SET cobill_invcnum=cobmisc_invcnumber,
		          cobill_invcitem_id=invcitem_id
        FROM invcitem, coitem, cobmisc
        WHERE ((invcitem_linenumber=(_lastlinenumber + CASE WHEN(_r.coitem_subnumber &gt; 0) THEN (_r.coitem_linenumber * 1000) + _r.coitem_subnumber ELSE _r.coitem_linenumber END))
          AND  (coitem_id=cobill_coitem_id)
          AND  (cobmisc_id=cobill_cobmisc_id)
          AND  (cobill_cobmisc_id=_i.cobmisc_id)
          AND  (invcitem_invchead_id=_invcheadid));
  
      --  Close all requested coitem&#39;s
        IF ( ( SELECT cobmisc_closeorder
               FROM cobmisc
               WHERE (cobmisc_id=_i.cobmisc_id) ) ) THEN
          UPDATE coitem
          SET coitem_status=&#39;C&#39;
          FROM cobmisc
          WHERE ( (coitem_status NOT IN (&#39;C&#39;, &#39;X&#39;))
           AND (coitem_cohead_id=cobmisc_cohead_id)
           AND (cobmisc_id=_i.cobmisc_id) );
        ELSE
          UPDATE coitem
          SET coitem_status=&#39;C&#39;
          FROM cobill
          WHERE ( (cobill_coitem_id=coitem_id)
           AND (coitem_status &lt;&gt; &#39;X&#39;)
           AND (cobill_toclose)
           AND (cobill_cobmisc_id=_i.cobmisc_id) );
        END IF;
      
      --  Mark the cobmisc as posted
        UPDATE cobmisc
        SET cobmisc_posted=TRUE, cobmisc_invchead_id=_invcheadid
        WHERE (cobmisc_id=_i.cobmisc_id);

      SELECT COALESCE(max(invcitem_linenumber),0) INTO _lastlinenumber
        FROM invcitem
       WHERE(invcitem_invchead_id=_invcheadid);
    
      --  All done
        _count := (_count + 1);
      END LOOP;
    END IF;
  END LOOP;
  RETURN _count;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postbillingselections">postbillingselections(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _counter INTEGER;
  _cobmisc RECORD;

BEGIN

  _counter := 0;

  FOR _cobmisc IN SELECT cobmisc_id
                  FROM cobmisc
                  WHERE (NOT cobmisc_posted) LOOP

    PERFORM postBillingSelection(_cobmisc.cobmisc_id);
    _counter := (_counter + 1);

  END LOOP;

  RETURN _counter;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postbillingselections-integer">postbillingselections( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN postBillingSelections($1, false);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postbillingselections-integer-boolean">postbillingselections( integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustTypeId ALIAS FOR $1;
  pConsolidate ALIAS FOR $2;
  _counter INTEGER;
  _tcounter INTEGER;
  _cobmisc RECORD;

BEGIN

  _counter := 0;

  IF (pConsolidate) THEN
    FOR _cobmisc IN SELECT DISTINCT cust_id
                      FROM cobmisc, cohead, custinfo
                     WHERE((NOT cobmisc_posted)
                       AND (cohead_id=cobmisc_cohead_id)
                       AND (cust_id=cohead_cust_id)
                       AND (cust_custtype_id=pCustTypeId)) LOOP

      SELECT postBillingSelectionConsolidated(_cobmisc.cust_id)
        INTO _tcounter;
      _counter := (_counter + _tcounter);
    END LOOP;
  ELSE
    FOR _cobmisc IN SELECT cobmisc_id
                      FROM cobmisc, cohead, custinfo
                     WHERE((NOT cobmisc_posted)
                       AND (cohead_id=cobmisc_cohead_id)
                       AND (cust_id=cohead_cust_id)
                       AND (cust_custtype_id=pCustTypeId)) LOOP
  
      PERFORM postBillingSelection(_cobmisc.cobmisc_id);
      _counter := (_counter + 1);

    END LOOP;
  END IF;

  RETURN _counter;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postcashreceipt-integer-integer">postcashreceipt( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCashrcptid ALIAS FOR $1;
  pJournalNumber ALIAS FOR $2;
  _p RECORD;
  _r RECORD;
  _postToAR NUMERIC;
  _postToMisc NUMERIC;
  _posted_base NUMERIC := 0;
  _posted NUMERIC := 0;
  _sequence INTEGER;
  _aropenid INTEGER;
  _arMemoNumber TEXT;
  _arAccntid INTEGER;
  _debitAccntid INTEGER;
  _exchGain NUMERIC;
  _comment      TEXT;

BEGIN
  _posted := 0;
  _posted_base := 0;

  SELECT fetchGLSequence() INTO _sequence;

  SELECT accnt_id INTO _arAccntid
  FROM cashrcpt, accnt, salescat
  WHERE ((cashrcpt_salescat_id=salescat_id)
    AND  (salescat_ar_accnt_id=accnt_id)
    AND  (cashrcpt_id=pCashrcptid));
  IF (NOT FOUND) THEN
    SELECT accnt_id INTO _arAccntid
    FROM cashrcpt, accnt
    WHERE ( (findARAccount(cashrcpt_cust_id)=accnt_id)
     AND (cashrcpt_id=pCashrcptid) );
    IF (NOT FOUND) THEN
      RETURN -5;
    END IF;
  END IF;

  SELECT cashrcpt_cust_id, (cust_number||&#39;-&#39;||cust_name) AS custnote,
         cashrcpt_fundstype, cashrcpt_docnumber,
         cashrcpt_distdate, cashrcpt_amount,
         currToBase(cashrcpt_curr_id, cashrcpt_amount, cashrcpt_distdate) AS cashrcpt_amount_base,
         cashrcpt_notes,
         cashrcpt_bankaccnt_id AS bankaccnt_id,
         accnt_id AS prepaid_accnt_id,
         cashrcpt_usecustdeposit,
         cashrcpt_curr_id INTO _p
  FROM accnt, cashrcpt LEFT OUTER JOIN cust ON (cashrcpt_cust_id=cust_id)
  WHERE ( (findPrepaidAccount(cashrcpt_cust_id)=accnt_id)
   AND (cashrcpt_id=pCashrcptid) );
  IF (NOT FOUND) THEN
    RETURN -7;
  END IF;

  IF (_p.cashrcpt_fundstype IN (&#39;A&#39;, &#39;D&#39;, &#39;M&#39;, &#39;V&#39;)) THEN
    IF NOT EXISTS(SELECT ccpay_id
                  FROM ccpay
                  WHERE ((ccpay_order_number=(SELECT CASE WHEN(TRIM(both from COALESCE(cashrcpt_docnumber, &#39;&#39;))=&#39;&#39;)
                                                          THEN text(cashrcpt_id)
                                                          ELSE cashrcpt_docnumber
                                                      END
                                                FROM cashrcpt
                                               WHERE cashrcpt_id=pCashrcptid))
                     AND (ccpay_status IN (&#39;C&#39;, &#39;A&#39;)))) THEN
      RETURN -8;
    END IF;
    _debitAccntid := findPrepaidAccount(_p.cashrcpt_cust_id);
  ELSE
    SELECT accnt_id INTO _debitAccntid
    FROM cashrcpt, bankaccnt, accnt
    WHERE ( (cashrcpt_bankaccnt_id=bankaccnt_id)
     AND (bankaccnt_accnt_id=accnt_id)
     AND (cashrcpt_id=pCashrcptid) );
    IF (NOT FOUND) THEN
      RETURN -6;
    END IF;
  END IF;

--  Determine the amount to post to A/R Open Items
  SELECT COALESCE(SUM(cashrcptitem_amount),0) INTO _postToAR
  FROM cashrcptitem
  WHERE (cashrcptitem_cashrcpt_id=pCashrcptid);
  IF (NOT FOUND) THEN
    _postToAR := 0;
  END IF;

--  Determine the amount to post to Misc. Distributions
  SELECT COALESCE(SUM(cashrcptmisc_amount),0) INTO _postToMisc
  FROM cashrcptmisc
  WHERE (cashrcptmisc_cashrcpt_id=pCashrcptid);
  IF (NOT FOUND) THEN
    _postToMisc := 0;
  END IF;

--  Check to see if the C/R is over applied
  IF ((_postToAR + _postToMisc) &gt; _p.cashrcpt_amount) THEN
    RETURN -1;
  END IF;

--  Distribute A/R Applications
  FOR _r IN SELECT aropen_id, aropen_doctype, aropen_docnumber, aropen_docdate,
                   aropen_duedate, aropen_curr_id,
                   round(aropen_amount - aropen_paid, 2) &lt;=
                        round(currToCurr(_p.cashrcpt_curr_id, aropen_curr_id,
                                   cashrcptitem_amount, aropen_docdate), 2)
                               AS closed,
                   cashrcptitem_id, cashrcptitem_amount,
                   currToBase(_p.cashrcpt_curr_id, cashrcptitem_amount,
                              aropen_docdate) AS cashrcptitem_amount_base
            FROM aropen, cashrcptitem
            WHERE ( (cashrcptitem_aropen_id=aropen_id)
             AND (cashrcptitem_cashrcpt_id=pCashrcptid) ) LOOP

--  Update the aropen item to post the paid amount
    UPDATE aropen
    SET aropen_paid = round(aropen_paid + currToCurr(_p.cashrcpt_curr_id,
                                                 _r.aropen_curr_id,
                                                 _r.cashrcptitem_amount,
                                                 _r.aropen_docdate), 2),
        aropen_open = (NOT _r.closed)
    WHERE (aropen_id=_r.aropen_id);

--  Cache the running amount posted
    _posted_base := _posted_base + _r.cashrcptitem_amount_base;
    _posted := _posted + _r.cashrcptitem_amount;

--  Record the cashrcpt application
    INSERT INTO arapply
    ( arapply_cust_id,
      arapply_source_aropen_id, arapply_source_doctype, arapply_source_docnumber,
      arapply_target_aropen_id, arapply_target_doctype, arapply_target_docnumber,
      arapply_fundstype, arapply_refnumber,
      arapply_applied, arapply_closed,
      arapply_postdate, arapply_distdate, arapply_journalnumber, arapply_username,
      arapply_curr_id )
    VALUES
    ( _p.cashrcpt_cust_id,
      -1, &#39;K&#39;, &#39;&#39;,
      _r.aropen_id, _r.aropen_doctype, _r.aropen_docnumber,
      _p.cashrcpt_fundstype, _p.cashrcpt_docnumber,
      round(_r.cashrcptitem_amount, 2), _r.closed,
      CURRENT_DATE, _p.cashrcpt_distdate, pJournalNumber, CURRENT_USER, _p.cashrcpt_curr_id );

    PERFORM insertIntoGLSeries( _sequence, &#39;A/R&#39;, &#39;CR&#39;,
                        (_r.aropen_doctype || &#39;-&#39; || _r.aropen_docnumber),
                        _arAccntid, round(_r.cashrcptitem_amount_base, 2),
                        _p.cashrcpt_distdate, _p.custnote );

    _exchGain := currGain(_p.cashrcpt_curr_id, _r.cashrcptitem_amount,
                          _r.aropen_docdate, _p.cashrcpt_distdate);
    IF (_exchGain &lt;&gt; 0) THEN
        PERFORM insertIntoGLSeries(_sequence, &#39;A/R&#39;, &#39;CR&#39;,
               _r.aropen_doctype || &#39;-&#39; || _r.aropen_docnumber,
               getGainLossAccntId(), round(_exchGain, 2) * -1,
               _p.cashrcpt_distdate, _p.custnote);
        _posted_base := _posted_base - _exchGain;
    END IF;

  END LOOP;

--  Distribute Misc. Applications
  FOR _r IN SELECT cashrcptmisc_id, cashrcptmisc_accnt_id, cashrcptmisc_amount,
                   currToBase(cashrcpt_curr_id, cashrcptmisc_amount,
                              cashrcpt_distdate) AS cashrcptmisc_amount_base,
                   cashrcptmisc_notes, cashrcpt_curr_id
            FROM cashrcptmisc JOIN
                 cashrcpt ON (cashrcptmisc_cashrcpt_id = cashrcpt_id)
            WHERE (cashrcptmisc_cashrcpt_id=pCashrcptid)  LOOP

--  Cache the running amount posted
    _posted_base := (_posted_base + _r.cashrcptmisc_amount_base);
    _posted := (_posted + _r.cashrcptmisc_amount);

--  Record the cashrcpt application
    INSERT INTO arapply
    ( arapply_cust_id,
      arapply_source_aropen_id, arapply_source_doctype, arapply_source_docnumber,
      arapply_target_aropen_id, arapply_target_doctype, arapply_target_docnumber,
      arapply_fundstype, arapply_refnumber,
      arapply_applied, arapply_closed,
      arapply_postdate, arapply_distdate, arapply_journalnumber, arapply_username,
      arapply_curr_id )
    VALUES
    ( _p.cashrcpt_cust_id,
      -1, &#39;K&#39;, &#39;&#39;,
      -1, &#39;Misc.&#39;, &#39;&#39;,
      _p.cashrcpt_fundstype, _p.cashrcpt_docnumber,
      round(_r.cashrcptmisc_amount, 2), TRUE,
      CURRENT_DATE, _p.cashrcpt_distdate, pJournalNumber, CURRENT_USER, _r.cashrcpt_curr_id );

    PERFORM insertIntoGLSeries( _sequence, &#39;A/R&#39;, &#39;CR&#39;, _r.cashrcptmisc_notes,
                                _r.cashrcptmisc_accnt_id,
                                round(_r.cashrcptmisc_amount_base, 2),
                                _p.cashrcpt_distdate, _p.custnote );

  END LOOP;

--  Post any remaining Cash to an A/R Cash Despoit (Credit Memo)
--  this credit memo may absorb an occasional currency exchange rounding error
  IF (round(_posted_base, 2) &lt; round(_p.cashrcpt_amount_base, 2)) THEN
    _comment := (&#39;Unapplied from &#39; || _p.cashrcpt_fundstype || &#39;-&#39; || _p.cashrcpt_docnumber);
    PERFORM insertIntoGLSeries( _sequence, &#39;A/R&#39;, &#39;CR&#39;,
                                _comment,
                                _p.prepaid_accnt_id,
                                round(_p.cashrcpt_amount_base, 2) -
                                                        round(_posted_base, 2),
                                _p.cashrcpt_distdate, _p.custnote );
    SELECT fetchArMemoNumber() INTO _arMemoNumber;
    IF(_p.cashrcpt_usecustdeposit) THEN
      -- TODO: post customer deposit
      PERFORM createARCashDeposit(_p.cashrcpt_cust_id, _arMemoNumber, &#39;&#39;,
                                  _p.cashrcpt_distdate, (_p.cashrcpt_amount - _posted),
                                  _comment, pJournalNumber, _p.cashrcpt_curr_id);
    ELSE
      PERFORM createARCreditMemo(_p.cashrcpt_cust_id, _arMemoNumber, &#39;&#39;,
                                 _p.cashrcpt_distdate, (_p.cashrcpt_amount - _posted),
                                 _comment, -1, -1, -1, _p.cashrcpt_distdate, -1, -1, 0,
                                 pJournalNumber, _p.cashrcpt_curr_id);
    END IF;

  ELSIF (round(_posted_base, 2) &gt; round(_p.cashrcpt_amount_base, 2)) THEN
    PERFORM insertIntoGLSeries(_sequence, &#39;A/R&#39;, &#39;CR&#39;,
                   &#39;Currency Exchange Rounding - &#39; || _p.cashrcpt_docnumber,
                   getGainLossAccntId(),
                   round(_posted_base, 2) - round(_p.cashrcpt_amount_base, 2),
                   _p.cashrcpt_distdate, _p.custnote);
  END IF;

--  Debit Cash
  PERFORM insertIntoGLSeries( _sequence, &#39;A/R&#39;, &#39;CR&#39;,
                    (_p.cashrcpt_fundstype || &#39;-&#39; || _p.cashrcpt_docnumber),
                     _debitAccntid, round(_p.cashrcpt_amount_base, 2) * -1,
                     _p.cashrcpt_distdate,
                     _p.custnote );

  PERFORM postGLSeries(_sequence, pJournalNumber);

--  Delete the posted cashrcpt
  DELETE FROM cashrcptitem
  WHERE (cashrcptitem_cashrcpt_id=pCashrcptid);

  DELETE FROM cashrcptmisc
  WHERE (cashrcptmisc_cashrcpt_id=pCashrcptid);

  DELETE FROM cashrcpt
  WHERE (cashrcpt_id=pCashrcptid);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postcccashreceipt-integer-integer">postcccashreceipt( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN postCCCashReceipt($1, NULL, NULL);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postcccashreceipt-integer-integer-text">postcccashreceipt( integer, integer, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCCpay        ALIAS FOR $1;
  pdocid        ALIAS FOR $2;
  pdoctype      ALIAS FOR $3;
  _aropenid     INTEGER;
  _c            RECORD;
  _cashrcptid   INTEGER;
  _ccOrderDesc  TEXT;
  _realaccnt    INTEGER;
  _return       INTEGER := 0;

BEGIN
  SELECT bankaccnt_accnt_id INTO _realaccnt
  FROM bankaccnt
  WHERE (bankaccnt_id=fetchmetricvalue(&#39;CCDefaultBank&#39;)::INTEGER);

  IF (NOT FOUND) THEN
    RETURN -10;
  END IF;

  SELECT * INTO _c
     FROM ccpay, ccard
     WHERE ( (ccpay_id = pCCpay)
       AND   (ccpay_ccard_id = ccard_id) );

  IF (NOT FOUND) THEN
    RETURN -11;
  END IF;

  _ccOrderDesc := (_c.ccard_type || &#39;-&#39; || _c.ccpay_order_number::TEXT ||
		   &#39;-&#39; || _c.ccpay_order_number_seq::TEXT);

  IF (pdoctype = &#39;cashrcpt&#39;) THEN
    IF (COALESCE(pdocid, -1) &lt; 0) THEN
      _cashrcptid := NEXTVAL(&#39;cashrcpt_cashrcpt_id_seq&#39;);
      INSERT INTO cashrcpt (
        cashrcpt_id, cashrcpt_cust_id,   cashrcpt_amount,     cashrcpt_curr_id,
        cashrcpt_fundstype, cashrcpt_docnumber,  cashrcpt_notes,
        cashrcpt_distdate,  cashrcpt_bankaccnt_id
      ) VALUES (
        _cashrcptid, _c.ccpay_cust_id,   _c.ccpay_amount,     _c.ccpay_curr_id,
        _c.ccard_type,      _c.ccpay_r_ordernum, _ccOrderDesc,
        CURRENT_DATE,       fetchmetricvalue(&#39;CCDefaultBank&#39;)::INTEGER);
      _return := _cashrcptid;
    ELSE
      UPDATE cashrcpt
      SET cashrcpt_cust_id=_c.ccpay_cust_id,
          cashrcpt_amount=_c.ccpay_amount,
          cashrcpt_curr_id=_c.ccpay_curr_id,
          cashrcpt_fundstype=_c.ccard_type,
          cashrcpt_docnumber=_c.ccpay_r_ordernum,
          cashrcpt_notes=_ccOrderDesc,
          cashrcpt_distdate=CURRENT_DATE,
          cashrcpt_bankaccnt_id=fetchmetricvalue(&#39;CCDefaultBank&#39;)::INTEGER
      WHERE (cashrcpt_id=pdocid);
      _return := pdocid;
    END IF;

  ELSIF (pdoctype = &#39;cohead&#39;) THEN
    _aropenid := createARCreditMemo(_c.ccpay_cust_id, fetchArMemoNumber(),
                                    &#39;&#39;, CURRENT_DATE, _c.ccpay_amount,
                                    &#39;Unapplied from &#39; || _ccOrderDesc );
    IF (_aropenid &lt; 0) THEN
      RETURN _aropenid;
    END IF;

    INSERT INTO payaropen (payaropen_ccpay_id, payaropen_aropen_id,
                           payaropen_amount,   payaropen_curr_id)
                  VALUES  (pccpay,             _aropenid,
                           _c.ccpay_amount,    _c.ccpay_curr_id);
    INSERT INTO aropenco (aropenco_aropen_id, aropenco_cohead_id,
                          aropenco_amount,    aropenco_curr_id)
                  VALUES (_aropenid,          pdocid,
                          _c.ccpay_amount,    _c.ccpay_curr_id);
    _return := _aropenid;
  END IF;

  PERFORM insertGLTransaction(fetchJournalNumber(&#39;C/R&#39;), &#39;A/R&#39;, &#39;CR&#39;,
                              _ccOrderDesc, 
                              &#39;Cash Receipt from Credit Card&#39;,
                              findPrepaidAccount(_c.ccpay_cust_id),
                              _realaccnt,
                              NULL,
			      ROUND(currToBase(_c.ccpay_curr_id,
					       _c.ccpay_amount,
					       _c.ccpay_transaction_datetime::DATE),2),
                              CURRENT_DATE);

  RETURN _return;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postcccredit-integer-text-integer">postcccredit( integer, text, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCCpay	ALIAS FOR $1;
  preftype      ALIAS FOR $2;
  prefid        ALIAS FOR $3;
  _amountclosed NUMERIC;
  _c		RECORD;
  _ccOrderDesc	TEXT;
  _closed       BOOLEAN;
  _glaccnt	INTEGER;
  _journalNum	INTEGER;
  _notes	TEXT := &#39;Credit Customer via Credit Card&#39;;
  _r		aropen%ROWTYPE;
  _sequence	INTEGER;

BEGIN
  SELECT bankaccnt_accnt_id INTO _glaccnt
  FROM bankaccnt
  WHERE bankaccnt_id = fetchMetricValue(&#39;CCDefaultBank&#39;);

  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  IF ((preftype = &#39;cohead&#39;) AND NOT EXISTS(SELECT cohead_id
					     FROM cohead
					     WHERE (cohead_id=prefid))) THEN
    RETURN -2;
  ELSIF ((preftype = &#39;aropen&#39;) AND NOT EXISTS(SELECT aropen_id
                                                FROM aropen
                                                WHERE (aropen_id=prefid))) THEN
    RETURN -2;
  END IF;

  SELECT * INTO _c
     FROM ccpay, ccard
     WHERE ( (ccpay_id = pCCpay)
       AND   (ccpay_ccard_id = ccard_id) );

  IF (NOT FOUND) THEN
    RETURN -3;
  END IF;

  IF (_c.ccpay_type != &#39;R&#39;) THEN
    RETURN -4;
  END IF;

  _sequence := fetchGLSequence();

  IF (_c.ccpay_r_ref IS NOT NULL) THEN
    _ccOrderDesc := (_c.ccard_type || &#39;-&#39; || _c.ccpay_r_ref);
  ELSE
    _ccOrderDesc := (_c.ccard_type || &#39;-&#39; || _c.ccpay_order_number::TEXT ||
		     &#39;-&#39; || COALESCE(_c.ccpay_order_number_seq::TEXT, &#39;&#39;));
  END IF;

  PERFORM insertIntoGLSeries(_sequence, &#39;A/R&#39;, &#39;CC&#39;, _ccOrderDesc,
			     findARAccount(_c.ccpay_cust_id),
			     ROUND(currToBase(_c.ccpay_curr_id,
					      _c.ccpay_amount,
					      _c.ccpay_transaction_datetime::DATE), 2) * -1,
			     CURRENT_DATE, _notes );

  PERFORM insertIntoGLSeries( _sequence, &#39;A/R&#39;, &#39;CC&#39;, _ccOrderDesc,
			      _glaccnt,
			      ROUND(currToBase(_c.ccpay_curr_id,
					       _c.ccpay_amount,
					       _c.ccpay_transaction_datetime::DATE),2),
			      CURRENT_DATE, _notes );

  PERFORM postGLSeries(_sequence, fetchJournalNumber(&#39;C/R&#39;) );

  IF (preftype = &#39;aropen&#39;) THEN
    SELECT * INTO _r
    FROM aropen
    WHERE (aropen_id=prefid);

  ELSE
    SELECT aropen.* INTO _r
    FROM aropen
    WHERE ((aropen_doctype IN (&#39;C&#39;, &#39;R&#39;))
      AND  (aropen_docnumber=_c.ccpay_r_ref)
      AND  (ROUND(aropen_amount - aropen_paid, 2) &lt;=
                ROUND(currToCurr(_c.ccpay_curr_id, aropen_curr_id,_c.ccpay_amount,
                                 _c.ccpay_transaction_datetime::DATE), 2))
          );
  END IF;

  IF (FOUND) THEN
    _amountclosed := ROUND(currToCurr(_c.ccpay_curr_id,
                                      _r.aropen_curr_id,
                                      _c.ccpay_amount,
                                      _c.ccpay_transaction_datetime::DATE), 2);
    _closed := ROUND(_r.aropen_paid + _amountclosed, 2) &gt;= ROUND(_r.aropen_amount, 2);
    UPDATE aropen
    SET aropen_paid=ROUND(aropen_paid + _amountclosed, 2),
	aropen_open=(NOT _closed)
    WHERE (aropen_id=_r.aropen_id);

    INSERT INTO arapply (
      arapply_cust_id,
      arapply_source_aropen_id, arapply_source_doctype, arapply_source_docnumber,
      arapply_target_aropen_id, arapply_target_doctype, arapply_target_docnumber,
      arapply_fundstype, arapply_refnumber,
      arapply_applied, arapply_closed,
      arapply_postdate, arapply_distdate, arapply_journalnumber, arapply_username,
      arapply_curr_id )
    VALUES
    ( _c.ccpay_cust_id,
      _r.aropen_id, _r.aropen_doctype, _r.aropen_docnumber,
      -1, &#39;R&#39;, &#39;Credit Card Credit&#39;,
      _c.ccard_type, _c.ccpay_order_number,
      ROUND(_c.ccpay_amount, 2), _closed,
      CURRENT_DATE, _c.ccpay_transaction_datetime::DATE, fetchJournalNumber(&#39;AR-CM&#39;), CURRENT_USER,
      _c.ccpay_curr_id );
  END IF;

  IF (preftype = &#39;cohead&#39;) THEN
    INSERT INTO payco (
      payco_ccpay_id, payco_cohead_id, payco_amount, payco_curr_id 
    ) VALUES (
      pCCpay, prefid, 0 - _c.ccpay_amount, _c.ccpay_curr_id
    );
  END IF;

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postccvoid-integer">postccvoid( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pccpayid ALIAS FOR $1;

BEGIN
  -- for now this is very simple: mark the ccpay record voided.
  -- in the future this might be expanded to back out changes to other tables
  -- but for now the VOID request is sent to the credit card processing company
  -- before those other tables are modified.

  UPDATE ccpay SET ccpay_status = &#39;V&#39; WHERE (ccpay_id=pccpayid);

  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postcheck-integer-integer">postcheck( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pcheckid		ALIAS FOR $1;
  _journalNumber	INTEGER := $2;
  _amount_base		NUMERIC := 0;
  _credit_glaccnt	INTEGER;
  _exchGain		NUMERIC := 0;
  _exchGainTmp		NUMERIC := 0;
  _gltransNote		TEXT;
  _p			RECORD;
  _r			RECORD;
  _sequence		INTEGER;
  _test                 INTEGER;
  _cm                   BOOLEAN;

BEGIN

  _cm := FALSE;

  SELECT fetchGLSequence() INTO _sequence;
  IF (_journalNumber IS NULL) THEN
    _journalNumber := fetchJournalNumber(&#39;AP-CK&#39;);
  END IF;

  SELECT checkhead.*,
         checkhead_amount / round(checkhead_curr_rate,5) AS checkhead_amount_base,
         bankaccnt_accnt_id AS bankaccntid,
         checkrecip.* INTO _p
  FROM bankaccnt, checkhead LEFT OUTER JOIN
       checkrecip ON ((checkrecip_type=checkhead_recip_type)
		  AND (checkrecip_id=checkhead_recip_id))
  WHERE ((checkhead_bankaccnt_id=bankaccnt_id)
    AND  (checkhead_id=pcheckid) );

  IF (_p.checkhead_posted) THEN
    RETURN -10;
  END IF;

  IF (_p.checkrecip_id IS NULL) THEN	-- outer join failed
    RETURN -11;
  END IF;

  IF (_p.checkhead_recip_type = &#39;C&#39;) THEN
    SELECT checkitem_id FROM checkitem INTO _test
    WHERE (checkitem_checkhead_id=pcheckid)
    LIMIT 1;
    IF (FOUND) THEN
      _cm := TRUE;
    END IF;
  END IF;

  _gltransNote := _p.checkrecip_number || &#39;-&#39; || _p.checkrecip_name;

  IF (_p.checkhead_misc AND NOT _cm) THEN
    IF (COALESCE(_p.checkhead_expcat_id, -1) &lt; 0) THEN
      IF (_p.checkhead_recip_type = &#39;V&#39;) THEN
	PERFORM createAPCreditMemo( _p.checkhead_recip_id, _journalNumber,
				    CAST(fetchAPMemoNumber() AS text), &#39;&#39;,
				    _p.checkhead_checkdate, _p.checkhead_amount,
				    _gltransNote || &#39; &#39; || _p.checkhead_notes,
				    -1, _p.checkhead_checkdate,
				    -1, _p.checkhead_curr_id );
	_credit_glaccnt := findAPPrepaidAccount(_p.checkhead_recip_id);

      ELSIF (_p.checkhead_recip_type = &#39;C&#39;) THEN
	PERFORM createARDebitMemo(_p.checkhead_recip_id, _journalNumber,
	  			     fetchARMemoNumber(),
				     _p.checkhead_checkdate, _p.checkhead_amount,
				     _gltransNote || &#39; &#39; || _p.checkhead_notes,
				     _p.checkhead_curr_id );
        _credit_glaccnt := findPrepaidAccount(_p.checkhead_recip_id);
      ELSIF (_p.checkhead_recip_type = &#39;T&#39;) THEN
	-- TODO: should we create a credit memo for the tax authority? how?
	_credit_glaccnt := _p.checkrecip_accnt_id;

      END IF; -- recip type

    ELSE
      IF (_cm) THEN
        _credit_glaccnt := findARAccount(_p.checkhead_recip_id);
      ELSE
        SELECT expcat_exp_accnt_id INTO _credit_glaccnt
        FROM expcat
        WHERE (expcat_id=_p.checkhead_expcat_id);
        IF (NOT FOUND) THEN
          RETURN -12;
        END IF;
      END IF;
    END IF;

    IF (COALESCE(_credit_glaccnt, -1) &lt; 0) THEN
      RETURN -13;
    END IF;

    PERFORM insertIntoGLSeries( _sequence, _p.checkrecip_gltrans_source, &#39;CK&#39;,
				CAST(_p.checkhead_number AS TEXT),
				_credit_glaccnt,
				round(_p.checkhead_amount_base, 2) * -1,
				_p.checkhead_checkdate, _gltransNote );

    _amount_base := _p.checkhead_amount_base;

  ELSE
    FOR _r IN SELECT checkitem_amount, checkitem_discount,
                     CASE WHEN (checkitem_apopen_id IS NOT NULL) THEN
                       checkitem_amount / round(apopen_curr_rate,5)
                     ELSE
                       currToBase(checkitem_curr_id,
                                  checkitem_amount,
                                  COALESCE(checkitem_docdate, _p.checkhead_checkdate)) 
                     END AS checkitem_amount_base,
                     apopen_id, apopen_doctype, apopen_docnumber,
                     aropen_id, aropen_doctype, aropen_docnumber,
                     checkitem_curr_id, checkitem_curr_rate, apopen_curr_rate,
                     COALESCE(checkitem_docdate, _p.checkhead_checkdate) AS docdate
              FROM (checkitem LEFT OUTER JOIN
		    apopen ON (checkitem_apopen_id=apopen_id)) LEFT OUTER JOIN
		    aropen ON (checkitem_aropen_id=aropen_id)
              WHERE (checkitem_checkhead_id=pcheckid) LOOP

      _exchGainTmp := 0;
      IF (_r.apopen_id IS NOT NULL) THEN
	--  take the discount if specified before we do anything else
        IF(_r.checkitem_discount &gt; 0.0) THEN
          PERFORM createAPDiscount(_r.apopen_id, _r.checkitem_discount);
        END IF;

        UPDATE apopen
        SET apopen_paid = round(apopen_paid + _r.checkitem_amount, 2),
            apopen_open = round(apopen_amount, 2) &gt;
			  round(apopen_paid + _r.checkitem_amount, 2),
            apopen_closedate = CASE WHEN (round(apopen_amount, 2) &lt;=
			                  round(apopen_paid + _r.checkitem_amount, 2)) THEN _p.checkhead_checkdate END
        WHERE (apopen_id=_r.apopen_id);

	--  Post the application
        INSERT INTO apapply
        ( apapply_vend_id, apapply_postdate, apapply_username,
          apapply_source_apopen_id, apapply_source_doctype, apapply_source_docnumber,
          apapply_target_apopen_id, apapply_target_doctype, apapply_target_docnumber,
          apapply_journalnumber, apapply_amount, apapply_curr_id )
        VALUES
        ( _p.checkhead_recip_id, _p.checkhead_checkdate, CURRENT_USER,
          _p.checkhead_id, &#39;K&#39;, _p.checkhead_number,
          _r.apopen_id, _r.apopen_doctype, _r.apopen_docnumber,
          _journalNumber, _r.checkitem_amount, _r.checkitem_curr_id );
      END IF; -- if check item&#39;s apopen_id is not null

      IF (_r.aropen_id IS NOT NULL) THEN
       UPDATE aropen
           SET aropen_paid = round(aropen_paid +
   				currToCurr(_r.checkitem_curr_id, aropen_curr_id,
   					   _r.checkitem_amount,
   					   _r.docdate), 2),
              aropen_open = round(aropen_amount, 2) &gt;
   			  round(aropen_paid +
   				currToCurr(_r.checkitem_curr_id, aropen_curr_id,
   					   _r.checkitem_amount,
   					   _r.docdate), 2)
          WHERE (aropen_id=_r.aropen_id);
    


	--  Post the application
        INSERT INTO arapply
        ( arapply_cust_id, arapply_postdate, arapply_distdate, arapply_username,
          arapply_source_aropen_id, arapply_source_doctype, arapply_source_docnumber,
          arapply_target_aropen_id, arapply_target_doctype, arapply_target_docnumber,
          arapply_journalnumber, arapply_applied, arapply_curr_id )
        VALUES
        ( _p.checkhead_recip_id, _p.checkhead_checkdate, _p.checkhead_checkdate, CURRENT_USER,
          _r.aropen_id,_r.aropen_doctype, _r.aropen_docnumber,
          -1, &#39;K&#39;,_p.checkhead_number ,
          _journalNumber, _r.checkitem_amount, _r.checkitem_curr_id );

      END IF; -- if check item&#39;s aropen_id is not null

      IF (_r.apopen_id IS NOT NULL) THEN
        SELECT apCurrGain(_r.apopen_id,_r.checkitem_curr_id, _r.checkitem_amount,
                        _p.checkhead_checkdate)
              INTO _exchGainTmp;
 --     ELSIF (_r.aropen_id IS NOT NULL) THEN
 --       SELECT arCurrGain(_r.aropen_id,_r.checkitem_curr_id, _r.checkitem_amount,
 --                       _p.checkhead_checkdate)
 --             INTO _exchGainTmp;
      END IF;
      _exchGain := _exchGain + _exchGainTmp;

      PERFORM insertIntoGLSeries( _sequence, _p.checkrecip_gltrans_source,
				  &#39;CK&#39;, CAST(_p.checkhead_number AS TEXT),
                                  _p.checkrecip_accnt_id,
                                  round(_r.checkitem_amount_base, 2) * -1,
                                  _p.checkhead_checkdate, _gltransNote );
      IF (_exchGainTmp &lt;&gt; 0) THEN
	PERFORM insertIntoGLSeries( _sequence, _p.checkrecip_gltrans_source,
				    &#39;CK&#39;, CAST(_p.checkhead_number AS TEXT),
				    getGainLossAccntId(), round(_exchGainTmp,2),
				    _p.checkhead_checkdate, _gltransNote );
      END IF;

      _amount_base := (_amount_base + _r.checkitem_amount_base);

    END LOOP;

    --  ensure that the check balances, attribute rounding errors to gain/loss
    IF round(_amount_base, 2) - round(_exchGain, 2) &lt;&gt; round(_p.checkhead_amount_base, 2) THEN
      IF round(_amount_base - _exchGain, 2) = round(_p.checkhead_amount_base, 2) THEN
	PERFORM insertIntoGLSeries( _sequence, _p.checkrecip_gltrans_source,
				    &#39;CK&#39;,
				    CAST(_p.checkhead_number AS TEXT),
                                    getGainLossAccntId(),
				    round(_amount_base, 2) -
				      round(_exchGain, 2) -
				      round(_p.checkhead_amount_base, 2),
				    _p.checkhead_checkdate, _gltransNote );
      ELSE
	RAISE EXCEPTION &#39;checkhead_id % does not balance (% - % &lt;&gt; %)&#39;, pcheckid,
	      _amount_base, _exchGain, _p.checkhead_amount_base;
      END IF;
    END IF;
  END IF;

  PERFORM insertIntoGLSeries( _sequence, _p.checkrecip_gltrans_source, &#39;CK&#39;,
			      CAST(_p.checkhead_number AS TEXT),
                              _p.bankaccntid,
			      round(_p.checkhead_amount_base, 2),
                              _p.checkhead_checkdate, _gltransNote );

  PERFORM postGLSeries(_sequence, _journalNumber);

  UPDATE gltrans
     SET gltrans_misc_id=pcheckid
   WHERE gltrans_sequence=_sequence;

  UPDATE checkhead
  SET checkhead_posted=TRUE,
      checkhead_journalnumber=_journalNumber
  WHERE (checkhead_id=pcheckid);

  RETURN _journalNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postchecks-integer">postchecks( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBankaccntid ALIAS FOR $1;
  _journalNumber INTEGER;

BEGIN

  SELECT fetchJournalNumber(&#39;AP-CK&#39;) INTO _journalNumber;

  PERFORM postCheck(checkhead_id, _journalNumber)
  FROM checkhead
  WHERE ( (NOT checkhead_void)
    AND   (NOT checkhead_posted)
    AND   (checkhead_printed)
    AND   (checkhead_bankaccnt_id=pBankaccntid) );

  RETURN _journalNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postcomment-integer-text-integer-text">postcomment( integer, text, integer, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCmnttypeid ALIAS FOR $1;
  pSource ALIAS FOR $2;
  pSourceid ALIAS FOR $3;
  pText ALIAS FOR $4;
  _commentid INTEGER;

BEGIN

  SELECT NEXTVAL(&#39;comment_comment_id_seq&#39;) INTO _commentid;

  INSERT INTO comment
  ( comment_id, comment_cmnttype_id, comment_source, comment_source_id,
    comment_date, comment_user, comment_text )
  VALUES
  ( _commentid, pCmnttypeid, pSource, pSourceid,
    CURRENT_TIMESTAMP, CURRENT_USER, pText );

  RETURN _commentid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postcost-integer">postcost( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemcostid ALIAS FOR $1;
  _p RECORD;

BEGIN

  SELECT round(currToBase(itemcost_curr_id, itemcost_actcost, CURRENT_DATE),6) AS newcost,
         itemcost_curr_id, CURRENT_DATE AS effective,
         item_number,
         itemcost_stdcost AS oldcost INTO _p
  FROM itemcost, item
  WHERE ((itemcost_item_id=item_id)
    AND  (itemcost_id=pItemcostid));

  IF (_p.newcost IS NULL) THEN
      RAISE EXCEPTION &#39;There is no valid Exchange Rate for this currency. (%, %)&#39;,
                  _p.itemcost_curr_id, _p.effective;
      RETURN FALSE;
  END IF;

  RETURN updateStdCost(pItemcostid, _p.newcost, _p.oldcost, &#39;Post Cost&#39;,
               (&#39;Post Actual Cost to Standard for item &#39; || _p.item_number));

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postcountslip-integer">postcountslip( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCntslipid ALIAS FOR $1;
  _p RECORD;
  _comments TEXT;
  _temp TEXT;

BEGIN

  SELECT itemsite_loccntrl, itemsite_controlmethod,
         cntslip_posted, cntslip_lotserial, cntslip_comments,
         cntslip_number, cntslip_qty INTO _p
  FROM cntslip, invcnt, itemsite
  WHERE ( (cntslip_cnttag_id=invcnt_id)
   AND (invcnt_itemsite_id=itemsite_id)
   AND (cntslip_id=pCntslipid) );

  IF (NOT _p.cntslip_posted) THEN
    SELECT ( &#39;
Count Slip #&#39; || _p.cntslip_number ||
             &#39; counted &#39; || formatQty(_p.cntslip_qty) ) INTO _comments;

--  Add the Location name if the itemsite is MLC
    IF (_p.itemsite_loccntrl) THEN
      SELECT ( &#39;, Location:&#39; || location_name ) INTO _temp
      FROM location, cntslip
      WHERE ( (cntslip_location_id=location_id)
       AND (cntslip_id=pCntslipid) );

      _comments := (_comments || _temp);
    END IF;

--  Add the Lot/Serial if the itemsite is Lot or Serial controlled
    IF (_p.itemsite_controlmethod = &#39;L&#39;) THEN
      _comments := (_comments || ( &#39;, Lot #:&#39; || _p.cntslip_lotserial));
    ELSIF (_p.itemsite_controlmethod = &#39;S&#39;) THEN
      _comments := (_comments || ( &#39;, Serial #:&#39; || _p.cntslip_lotserial));
    END IF;

    _comments := (_comments || &#39; &#39; || _p.cntslip_comments);

    UPDATE cntslip
    SET cntslip_posted=TRUE
    WHERE (cntslip_id=pCntslipid);

    UPDATE invcnt
    SET invcnt_qoh_after = ( COALESCE(invcnt_qoh_after, 0) + cntslip_qty),
        invcnt_comments = (invcnt_comments || _comments)
    FROM cntslip
    WHERE ( (cntslip_cnttag_id=invcnt_id)
     AND (cntslip_id=pCntslipid) );

    RETURN 1;

  ELSE
    RETURN -1;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postcounttag-integer-boolean">postcounttag( integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pInvcntid ALIAS FOR $1;
  pThaw ALIAS FOR $2;
  _invhistid INTEGER;
  _postDate TIMESTAMP;
  _runningQty NUMERIC;
  _errorCode INTEGER;
  _itemlocSeries INTEGER;
  _hasDetail BOOLEAN;
  _p RECORD;
  _itemloc RECORD;
  _cntslip RECORD;
  _lsid INTEGER;

BEGIN

  SELECT invcnt_id, invcnt_tagnumber, invcnt_qoh_after,
         invcnt_location_id,
         item_number,
         itemsite_id, itemsite_freeze,
         itemsite_qtyonhand,
         itemsite_loccntrl, itemsite_location_id,
         stdcost(itemsite_item_id) AS cost,
         itemsite_controlmethod INTO _p,
         itemsite_value
  FROM invcnt, itemsite, item
  WHERE ( (invcnt_itemsite_id=itemsite_id)
   AND (itemsite_item_id=item_id)
   AND (invcnt_qoh_after IS NOT NULL)
   AND (NOT invcnt_posted)
   AND (invcnt_id=pInvcntid) );
  IF (FOUND) THEN
-- If the invcnt_location_id is not null then
-- call a separate function so as not to affect
-- the existing functionality.
    IF (_p.invcnt_location_id IS NOT NULL) THEN
      RETURN postCountTagLocation(pInvcntid, pThaw);
    END IF;

    SELECT NEXTVAL(&#39;invhist_invhist_id_seq&#39;) INTO _invhistid;

    IF (_p.itemsite_freeze) THEN
      SELECT invcnt_tagdate INTO _postDate
      FROM invcnt
      WHERE (invcnt_id=pInvcntid) ;
    ELSE
      _postDate = CURRENT_TIMESTAMP;
    END IF;

    _hasDetail = FALSE;

--  Post the detail indicated by cntslips
    IF ( (_p.itemsite_loccntrl) OR
         (_p.itemsite_controlmethod IN (&#39;L&#39;, &#39;S&#39;)) ) THEN

      SELECT NEXTVAL(&#39;itemloc_series_seq&#39;) INTO _itemlocSeries;

--  Adjust any existing detail to 0
      FOR _itemloc IN SELECT itemloc_id, itemloc_location_id,
                             itemloc_ls_id, itemloc_qty
                      FROM itemloc
                      WHERE (itemloc_itemsite_id=_p.itemsite_id) LOOP

        _hasDetail = TRUE;

--  Create the itemlocdist flushing records
        INSERT INTO itemlocdist
        ( itemlocdist_series, itemlocdist_source_type, itemlocdist_source_id,
          itemlocdist_expiration,
          itemlocdist_itemsite_id, itemlocdist_invhist_id, itemlocdist_flush )
        VALUES
        ( _itemlocSeries, &#39;I&#39;, _itemloc.itemloc_id,
          endOfTime(),
          _p.itemsite_id, _invhistid, TRUE );

      END LOOP;

--  Clear the running detail Qty
      _runningQty := 0;

--  Adjust the detail to the cntslip indicated value
      FOR _cntslip IN SELECT cntslip_location_id, cntslip_lotserial,
                             cntslip_lotserial_expiration,
                             cntslip_lotserial_warrpurc,
                             SUM(cntslip_qty) AS qty,
                             itemsite_item_id
                      FROM cntslip, invcnt, itemsite
                      WHERE ((cntslip_cnttag_id=pInvcntid)
                      AND (cntslip_cnttag_id=invcnt_id)
                      AND (invcnt_itemsite_id=itemsite_id))
                      GROUP BY cntslip_location_id, cntslip_lotserial, 
                      cntslip_lotserial_expiration, cntslip_lotserial_warrpurc,itemsite_item_id LOOP

--  Handle the LotSerial
        IF (LENGTH(_cntslip.cntslip_lotserial)&gt;0) THEN
          SELECT ls_id INTO _lsid
          FROM ls
          WHERE ((ls_item_id=_cntslip.itemsite_item_id)
          AND (UPPER(ls_number)=UPPER(_cntslip.cntslip_lotserial)));

          IF (NOT FOUND) THEN
            _lsid := NEXTVAL(&#39;ls_ls_id_seq&#39;);
            INSERT INTO ls
            VALUES (_lsid,_cntslip.itemsite_item_id,UPPER(_cntslip.cntslip_lotserial));
          END IF;
        END IF;

--  Track the running Qty
        _runningQty := (_runningQty + _cntslip.qty);
        _hasDetail = TRUE;

--  Create the itemlocdist populating record
        INSERT INTO itemlocdist
        ( itemlocdist_series, itemlocdist_source_type, itemlocdist_source_id,
          itemlocdist_itemsite_id,
          itemlocdist_ls_id, itemlocdist_expiration, itemlocdist_warranty,
          itemlocdist_qty, itemlocdist_invhist_id )
        VALUES
        ( _itemlocSeries, &#39;L&#39;, _cntslip.cntslip_location_id,
          _p.itemsite_id,
          _lsid, COALESCE(_cntslip.cntslip_lotserial_expiration, endOfTime()),
          _cntslip.cntslip_lotserial_warrpurc,_cntslip.qty, _invhistid );

      END LOOP;

      IF (_runningQty &gt; _p.invcnt_qoh_after) THEN
--  The total Count Slip Qty is greater than the Count Tag Qty,
--  Don&#39;t post the Count.
        _errorCode = -1;

      ELSIF ( (_runningQty &lt; _p.invcnt_qoh_after) AND
              (_p.itemsite_controlmethod IN (&#39;L&#39;, &#39;S&#39;)) ) THEN
--  The total Count Slip Qty is less than the Count Tag Qty,
--  and the Item Site is Lot/Serial controlled.
--  Don&#39;t post the Count.
        _errorCode = -2;

      ELSIF (_runningQty &lt; _p.invcnt_qoh_after) THEN
        IF ( (NOT _p.itemsite_loccntrl) OR
             (_p.itemsite_location_id = -1) ) THEN
--  The total Count Slip Qty is less than the Count Tag Qty,
--  and there isn&#39;t a default location to post into.
--  Don&#39;t post the Count.
          _errorCode = -3;

        ELSIF ( SELECT (metric_value=&#39;f&#39;)
                FROM metric
                WHERE (metric_name=&#39;PostCountTagToDefault&#39;) ) THEN
--  The total Count Slip Qty is less than the Count Tag Qty,
--  and we don&#39;t post Count Tags to default Locations
--  Don&#39;t post the Count.
          _errorCode = -4;

        ELSE
--  Distribute the remaining qty into the default location.
          INSERT INTO itemlocdist
          ( itemlocdist_series, itemlocdist_source_type, itemlocdist_source_id,
            itemlocdist_itemsite_id,
            itemlocdist_expiration,
            itemlocdist_qty, itemlocdist_invhist_id )
          SELECT _itemlocSeries, &#39;L&#39;, _p.itemsite_location_id,
                 _p.itemsite_id,
                 endOfTime(),
                 (_p.invcnt_qoh_after - _runningQty), _invhistid;

          _hasDetail = TRUE;
          _errorCode = 0;
        END IF;
      ELSE
--  The Count Slip Qty. must equal the Count Tag Qty.
        _errorCode = 0;
      END IF;

--  If we shouldn&#39;t post the count then delete the itemlocdist records,
--  and return with the error.
      IF (_errorCode &lt;&gt; 0) THEN
        DELETE FROM itemlocdist
        WHERE (itemlocdist_series=_itemlocSeries);
  
        RETURN _errorCode;
      END IF;

    END IF;

--  Mod. the Count Tag.
    UPDATE invcnt
    SET invcnt_qoh_before=_p.itemsite_qtyonhand,
        invcnt_postdate=_postDate,
        invcnt_posted=TRUE,
        invcnt_invhist_id=_invhistid,
        invcnt_post_usr_id=currentUserId()
    WHERE (invcnt_id=pInvcntid);

--  Create the CC transaction
--  All counts are posted using Standard Cost method
    INSERT INTO invhist
     ( invhist_id, invhist_itemsite_id,
       invhist_transdate, invhist_transtype, invhist_invqty,
       invhist_qoh_before, invhist_qoh_after,
       invhist_docnumber, invhist_comments,
       invhist_invuom, invhist_unitcost, invhist_hasdetail,
       invhist_costmethod, invhist_value_before, invhist_value_after )
    SELECT _invhistid, itemsite_id,
           _postDate, &#39;CC&#39;, (invcnt_qoh_after - invcnt_qoh_before),
           invcnt_qoh_before, invcnt_qoh_after,
           invcnt_tagnumber, invcnt_comments,
           uom_name, _p.cost, _hasDetail,
           &#39;S&#39;, _p.itemsite_value, 
           _p.itemsite_value + (_p.cost * (invcnt_qoh_after - invcnt_qoh_before))
    FROM itemsite, invcnt, item, uom
    WHERE ( (invcnt_itemsite_id=itemsite_id)
     AND (itemsite_item_id=item_id)
     AND (item_inv_uom_id=uom_id)
     AND (itemsite_controlmethod &lt;&gt; &#39;N&#39;)
     AND (invcnt_id=pInvcntid) );

--  Update the QOH
    UPDATE itemsite
    SET itemsite_qtyonhand=_p.invcnt_qoh_after,
        itemsite_nnqoh = 0,
        itemsite_datelastcount=_postDate
    WHERE (itemsite_id=_p.itemsite_id);
 
--  Post the detail, if any
    IF (_hasDetail) THEN
      PERFORM distributeItemlocSeries(_itemlocSeries);
    END IF;

--  Thaw the itemsite if it&#39;s frozen
    IF (pThaw) THEN
      PERFORM thawItemSite(invcnt_itemsite_id) 
      FROM invcnt
      WHERE (invcnt_id=pInvcntid);
    END IF;

--  Distribute to G/L
    PERFORM insertGLTransaction( &#39;I/M&#39;, &#39;CT&#39;, _p.invcnt_tagnumber, (&#39;Post Count Tag #&#39; || _p.invcnt_tagnumber || &#39; for Item &#39; || _p.item_number),
                                 costcat_adjustment_accnt_id, costcat_asset_accnt_id, _invhistid,
                                 ( (_p.invcnt_qoh_after - _p.itemsite_qtyonhand) * _p.cost), CURRENT_DATE )
    FROM invcnt, itemsite, costcat
    WHERE ( (invcnt_itemsite_id=itemsite_id)
     AND (itemsite_costcat_id=costcat_id)
     AND (invcnt_id=pInvcntid) );

    RETURN 0;

  ELSE
    RETURN -9;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postcounttaglocation-integer-boolean">postcounttaglocation( integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pInvcntid ALIAS FOR $1;
  pThaw ALIAS FOR $2;
  _invhistid INTEGER;
  _postDate TIMESTAMP;
  _runningQty NUMERIC;
  _errorCode INTEGER;
  _itemlocSeries INTEGER;
  _hasDetail BOOLEAN;
  _p RECORD;
  _itemloc RECORD;
  _cntslip RECORD;
  _origLocQty NUMERIC;
  _netable BOOLEAN;
  _lsid INTEGER;
BEGIN

  SELECT invcnt_id, invcnt_tagnumber, invcnt_qoh_after,
         invcnt_location_id, invcnt_tagdate,
         item_number,
         itemsite_id, itemsite_freeze,
         itemsite_qtyonhand,
         itemsite_loccntrl, COALESCE(invcnt_location_id, -1) AS itemsite_location_id,
         stdcost(itemsite_item_id) AS cost,
         itemsite_controlmethod, itemsite_value INTO _p
  FROM invcnt, itemsite, item
  WHERE ( (invcnt_itemsite_id=itemsite_id)
   AND (itemsite_item_id=item_id)
   AND (invcnt_qoh_after IS NOT NULL)
   AND (NOT invcnt_posted)
   AND (invcnt_id=pInvcntid) );
  IF (NOT FOUND) THEN
    RETURN -9;
  END IF;

  SELECT COALESCE(SUM(itemloc_qty),0.0), location_netable INTO _origLocQty,_netable
    FROM itemloc,location
   WHERE ((itemloc_itemsite_id=_p.itemsite_id)
     AND  (location_id=itemloc_location_id)
     AND  (itemloc_location_id=_p.invcnt_location_id))
   GROUP BY location_netable;
  IF (NOT FOUND) THEN
    _origLocQty := 0.0;
    _netable := TRUE;
  END IF;

  SELECT NEXTVAL(&#39;invhist_invhist_id_seq&#39;) INTO _invhistid;

  IF (_p.itemsite_freeze) THEN
    _postDate := _p.invcnt_tagdate;
  ELSE
    _postDate := CURRENT_TIMESTAMP;
  END IF;

  _hasDetail = FALSE;

--  Post the detail indicated by cntslips
  IF ( (_p.itemsite_loccntrl) OR
       (_p.itemsite_controlmethod IN (&#39;L&#39;, &#39;S&#39;)) ) THEN

    SELECT NEXTVAL(&#39;itemloc_series_seq&#39;) INTO _itemlocSeries;

--  Adjust any existing detail to 0
    FOR _itemloc IN SELECT itemloc_id, itemloc_location_id,
                           itemloc_ls_id, itemloc_qty
                    FROM itemloc
                    WHERE ((itemloc_itemsite_id=_p.itemsite_id)
                      AND  (itemloc_location_id=_p.invcnt_location_id)) LOOP

      _hasDetail = TRUE;

--  Create the itemlocdist flushing records
      INSERT INTO itemlocdist
      ( itemlocdist_series, itemlocdist_source_type, itemlocdist_source_id,
        itemlocdist_expiration,
        itemlocdist_itemsite_id, itemlocdist_invhist_id, itemlocdist_flush )
      VALUES
      ( _itemlocSeries, &#39;I&#39;, _itemloc.itemloc_id,
        endOfTime(),
        _p.itemsite_id, _invhistid, TRUE );

    END LOOP;

--  Clear the running detail Qty
    _runningQty := 0;

--  Adjust the detail to the cntslip indicated value
    FOR _cntslip IN SELECT cntslip_location_id, cntslip_lotserial,
                           cntslip_lotserial_expiration,
                           cntslip_lotserial_warrpurc,
                           SUM(cntslip_qty) AS qty,
                           itemsite_item_id
                    FROM cntslip,invcnt,itemsite
                    WHERE ((cntslip_cnttag_id=pInvcntid)
                    AND (cntslip_cnttag_id=invcnt_id)
                    AND (invcnt_itemsite_id=itemsite_id))
                    GROUP BY cntslip_location_id, cntslip_lotserial, cntslip_lotserial_expiration,
                    cntslip_lotserial_warrpurc, itemsite_item_id LOOP

--  Handle the LotSerial
      IF (LENGTH(_cntslip.cntslip_lotserial)&gt;0) THEN
        SELECT ls_id INTO _lsid
        FROM ls
        WHERE ((ls_item_id=_cntslip.itemsite_item_id)
        AND (UPPER(ls_number)=UPPER(_cntslip.cntslip_lotserial)));

        IF (NOT FOUND) THEN
          _lsid := NEXTVAL(&#39;ls_ls_id_seq&#39;);
          INSERT INTO ls
          VALUES (_lsid,_cntslip.itemsite_item_id,UPPER(_cntslip.cntslip_lotserial));
        END IF;
      END IF;
       
--  Track the running Qty
      _runningQty := (_runningQty + _cntslip.qty);
      _hasDetail = TRUE;

--  Create the itemlocdist populating record
      INSERT INTO itemlocdist
      ( itemlocdist_series, itemlocdist_source_type, itemlocdist_source_id,
        itemlocdist_itemsite_id,
        itemlocdist_ls_id, itemlocdist_expiration, itemlocdist_warranty,
        itemlocdist_qty, itemlocdist_invhist_id )
      VALUES
      ( _itemlocSeries, &#39;L&#39;, _cntslip.cntslip_location_id,
        _p.itemsite_id,
        _lsid, COALESCE(_cntslip.cntslip_lotserial_expiration, endOfTime()),
        _cntslip.cntslip_lotserial_warrpurc,
        _cntslip.qty, _invhistid );

    END LOOP;

    IF (_runningQty &gt; _p.invcnt_qoh_after) THEN
--  The total Count Slip Qty is greater than the Count Tag Qty,
--  Don&#39;t post the Count.
      _errorCode = -1;

    ELSIF ( (_runningQty &lt; _p.invcnt_qoh_after) AND
            (_p.itemsite_controlmethod IN (&#39;L&#39;, &#39;S&#39;)) ) THEN
--  The total Count Slip Qty is less than the Count Tag Qty,
--  and the Item Site is Lot/Serial controlled.
--  Don&#39;t post the Count.
      _errorCode = -2;

    ELSIF (_runningQty &lt; _p.invcnt_qoh_after) THEN
      IF ( (NOT _p.itemsite_loccntrl) OR
           (_p.itemsite_location_id = -1) ) THEN
--  The total Count Slip Qty is less than the Count Tag Qty,
--  and there isn&#39;t a default location to post into.
--  Don&#39;t post the Count.
        _errorCode = -3;

      ELSIF ( SELECT (metric_value=&#39;f&#39;)
              FROM metric
              WHERE (metric_name=&#39;PostCountTagToDefault&#39;) ) THEN
--  The total Count Slip Qty is less than the Count Tag Qty,
--  and we don&#39;t post Count Tags to default Locations
--  Don&#39;t post the Count.
        _errorCode = -4;

      ELSE
--  Distribute the remaining qty into the default location.
        INSERT INTO itemlocdist
        ( itemlocdist_series, itemlocdist_source_type, itemlocdist_source_id,
          itemlocdist_itemsite_id,
          itemlocdist_ls_id, itemlocdist_expiration,
          itemlocdist_qty, itemlocdist_invhist_id )
        SELECT _itemlocSeries, &#39;L&#39;, _p.itemsite_location_id,
               _p.itemsite_id,
               _lsid, endOfTime(),
               (_p.invcnt_qoh_after - _runningQty), _invhistid;

        _hasDetail = TRUE;
        _errorCode = 0;
      END IF;
    ELSE
--  The Count Slip Qty. must equal the Count Tag Qty.
      _errorCode = 0;
    END IF;

--  If we shouldn&#39;t post the count then delete the itemlocdist records,
--  and return with the error.
    IF (_errorCode &lt;&gt; 0) THEN
      DELETE FROM itemlocdist
      WHERE (itemlocdist_series=_itemlocSeries);
  
      RETURN _errorCode;
    END IF;

  END IF;

--  Mod. the Count Tag.
  UPDATE invcnt
  SET invcnt_qoh_before=_origLocQty,
      invcnt_postdate=_postDate,
      invcnt_posted=TRUE,
      invcnt_invhist_id=_invhistid,
      invcnt_post_usr_id=currentUserId()
  WHERE (invcnt_id=pInvcntid);

--  Create the CC transaction
--  All counts are posted using Standard Cost method
  INSERT INTO invhist
   ( invhist_id, invhist_itemsite_id,
     invhist_transdate, invhist_transtype, invhist_invqty,
     invhist_qoh_before, invhist_qoh_after,
     invhist_docnumber, invhist_comments,
     invhist_invuom, invhist_unitcost, invhist_hasdetail,
     invhist_costmethod, invhist_value_before, invhist_value_after )
  SELECT _invhistid, itemsite_id,
         _postDate, &#39;CC&#39;, (invcnt_qoh_after - invcnt_qoh_before),
         invcnt_qoh_before, invcnt_qoh_after,
         invcnt_tagnumber, invcnt_comments,
         uom_name, _p.cost, _hasDetail,
         &#39;S&#39;, _p.itemsite_value,
         _p.itemsite_value + (_p.cost * (invcnt_qoh_after - invcnt_qoh_before))
  FROM itemsite, invcnt, item, uom
  WHERE ( (invcnt_itemsite_id=itemsite_id)
   AND (itemsite_item_id=item_id)
   AND (item_inv_uom_id=uom_id)
   AND (itemsite_controlmethod &lt;&gt; &#39;N&#39;)
   AND (invcnt_id=pInvcntid) );

--  Update the QOH
  IF (_netable) THEN
    UPDATE itemsite
    SET itemsite_qtyonhand= itemsite_qtyonhand + (_p.invcnt_qoh_after - _origLocQty),
        itemsite_datelastcount=_postDate
    WHERE (itemsite_id=_p.itemsite_id);
  ELSE
    UPDATE itemsite
    SET itemsite_nnqoh =  itemsite_nnqoh - _origLocQty,
	itemsite_qtyonhand = itemsite_qtyonhand + _p.invcnt_qoh_after,
        itemsite_datelastcount=_postDate
    WHERE (itemsite_id=_p.itemsite_id);
  END IF;
 
--  Post the detail, if any
  IF (_hasDetail) THEN
    PERFORM distributeItemlocSeries(_itemlocSeries);
  END IF;

--  Thaw the itemsite if it&#39;s frozen
  IF (pThaw) THEN
    PERFORM thawItemSite(invcnt_itemsite_id) 
    FROM invcnt
    WHERE (invcnt_id=pInvcntid);
  END IF;

--  Distribute to G/L
  PERFORM insertGLTransaction( &#39;I/M&#39;, &#39;CT&#39;, _p.invcnt_tagnumber, (&#39;Post Count Tag #&#39; || _p.invcnt_tagnumber || &#39; for Item &#39; || _p.item_number),
                               costcat_adjustment_accnt_id, costcat_asset_accnt_id, _invhistid,
                               ( (_p.invcnt_qoh_after - _origLocQty) * _p.cost), CURRENT_DATE )
  FROM invcnt, itemsite, costcat
  WHERE ( (invcnt_itemsite_id=itemsite_id)
   AND (itemsite_costcat_id=costcat_id)
   AND (invcnt_id=pInvcntid) );

  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postcounttags-integer-boolean">postcounttags( integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWarehousid ALIAS FOR $1;
  pThaw ALIAS FOR $2;
  _invcnt RECORD;
  _result INTEGER := 0;
  _return INTEGER := 0;

BEGIN

  FOR _invcnt IN SELECT invcnt_id
                 FROM invcnt, itemsite
                 WHERE ( (invcnt_itemsite_id=itemsite_id)
                  AND ( (pWarehousid=-1) OR (itemsite_warehous_id=pWarehousid) )
                  AND (invcnt_qoh_after IS NOT NULL)
                  AND (NOT invcnt_posted) ) LOOP
    SELECT postCountTag(_invcnt.invcnt_id, pThaw) INTO _result;
    IF (_result &lt; _return) THEN
      _return := _result;
    END IF;
  END LOOP;

  RETURN _return;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postcreditmemo-integer-integer">postcreditmemo( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCmheadid ALIAS FOR $1;
  pItemlocSeries ALIAS FOR $2;
  _return INTEGER;

BEGIN

  SELECT postCreditMemo(pCmheadid, fetchJournalNumber(&#39;AR-CM&#39;), pItemlocSeries) INTO _return;

  RETURN _return;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postcreditmemo-integer-integer-integer">postcreditmemo( integer, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCmheadid ALIAS FOR $1;
  pJournalNumber ALIAS FOR $2;
  pItemlocSeries ALIAS FOR $3;
  _r RECORD;
  _p RECORD;
  _aropenid INTEGER;
  _sequence INTEGER;
  _itemlocSeries INTEGER;
  _invhistid INTEGER;
  _test INTEGER;
  _totalAmount NUMERIC   := 0;
  _commissionDue NUMERIC := 0;
  _toApply NUMERIC;
  _toClose BOOLEAN;
  _glDate	DATE;
  _taxBaseValue	NUMERIC	:= 0;

BEGIN

--  Cache some parameters
  SELECT cmhead.*, findARAccount(cmhead_cust_id) AS ar_accnt_id INTO _p
  FROM cmhead
  WHERE (cmhead_id=pCmheadid);

  IF (_p.cmhead_posted) THEN
    RETURN -10;
  END IF;

  IF (_p.cmhead_hold) THEN
    RETURN -11;
  END IF;

  _glDate := COALESCE(_p.cmhead_gldistdate, _p.cmhead_docdate);

  _itemlocSeries = pItemlocSeries;

  SELECT fetchGLSequence() INTO _sequence;

  FOR _r IN SELECT cmitem.*,
                   (cmitem_unitprice / cmitem_price_invuomratio) AS unitprice,
                   ((cmitem_qtycredit * cmitem_qty_invuomratio) * (cmitem_unitprice / cmitem_price_invuomratio)) AS amount,
                   itemsite_id AS itemsite_id,
                   cmhead_number, cmhead_commission,
                   cmhead_cust_id AS cust_id,
                   cmhead_rahead_id,
                   stdCost(item_id) AS cost
            FROM cmhead, cmitem, itemsite, item
            WHERE ( (cmitem_cmhead_id=cmhead_id)
             AND (cmitem_itemsite_id=itemsite_id)
             AND (itemsite_item_id=item_id)
             AND (NOT cmhead_posted)
             AND (cmhead_id=pCmheadid)
             AND (cmitem_qtycredit &lt;&gt; 0 ) ) LOOP

--  Calcuate the Commission to be debited
    _commissionDue := (_commissionDue + (_r.amount * _r.cmhead_commission));

    IF (_r.amount &lt;&gt; 0) THEN
--  Debit the Sales Account for the current cmitem
      SELECT insertIntoGLSeries( _sequence, &#39;A/R&#39;, &#39;CM&#39;, _r.cmhead_number,
                                 CASE WHEN _r.cmhead_rahead_id IS NULL THEN
                                   salesaccnt_credit_accnt_id
                                 ELSE
                                   salesaccnt_returns_accnt_id
                                 END,
                               round(currToBase(_p.cmhead_curr_id,
                                                _r.amount * -1,
                                                _p.cmhead_docdate), 2),
                                 _glDate, _p.cmhead_billtoname) INTO _test
      FROM salesaccnt
      WHERE (salesaccnt_id=findSalesAccnt(_r.itemsite_id, _r.cust_id));
      IF (NOT FOUND) THEN
        PERFORM deleteGLSeries(_sequence);
        RETURN -12;
      END IF;
    END IF;

    _taxBaseValue := addTaxToGLSeries(_sequence, _p.cmhead_tax_curr_id,
				      &#39;A/R&#39;, &#39;CM&#39;, _p.cmhead_number,
				      _glDate, _p.cmhead_docdate,
				      _r.cmitem_tax_id,
				      0 - COALESCE(_r.cmitem_tax_ratea,0.0),
				      0 - COALESCE(_r.cmitem_tax_rateb,0.0),
				      0 - COALESCE(_r.cmitem_tax_ratec,0.0),
                                      (&#39;Tax liability for &#39; || _p.cmhead_billtoname));
    IF (_taxBaseValue IS NULL) THEN
      PERFORM deleteGLSeries(_sequence);
      RETURN -13;
    END IF;

--  Record Sales History for this C/M Item
    INSERT INTO cohist
    ( cohist_cust_id, cohist_itemsite_id, cohist_shipto_id, cohist_tax_id,
      cohist_shipdate, cohist_shipvia,
      cohist_ordernumber, cohist_ponumber, cohist_orderdate,
      cohist_doctype, cohist_invcnumber, cohist_invcdate,
      cohist_qtyshipped, cohist_unitprice, cohist_unitcost,
      cohist_salesrep_id, cohist_commission, cohist_commissionpaid,
      cohist_billtoname, cohist_billtoaddress1,
      cohist_billtoaddress2, cohist_billtoaddress3,
      cohist_billtocity, cohist_billtostate, cohist_billtozip,
      cohist_shiptoname, cohist_shiptoaddress1,
      cohist_shiptoaddress2, cohist_shiptoaddress3,
      cohist_shiptocity, cohist_shiptostate, cohist_shiptozip,
      cohist_curr_id,	cohist_taxtype_id,
      cohist_tax_pcta,	cohist_tax_pctb,	cohist_tax_pctc,
      cohist_tax_ratea,	cohist_tax_rateb,	cohist_tax_ratec)
    VALUES
    ( _p.cmhead_cust_id, _r.itemsite_id, _p.cmhead_shipto_id, _r.cmitem_tax_id,
      _p.cmhead_docdate, &#39;&#39;,
      _p.cmhead_number, _p.cmhead_custponumber, _p.cmhead_docdate,
      &#39;C&#39;, _p.cmhead_invcnumber, _p.cmhead_docdate,
      (_r.cmitem_qtycredit * _r.cmitem_qty_invuomratio * -1), _r.unitprice, _r.cost,
      _p.cmhead_salesrep_id, (_r.cmhead_commission * _r.amount * -1), FALSE,
      _p.cmhead_billtoname, _p.cmhead_billtoaddress1,
      _p.cmhead_billtoaddress2, _p.cmhead_billtoaddress3,
      _p.cmhead_billtocity, _p.cmhead_billtostate, _p.cmhead_billtozip,
      _p.cmhead_shipto_name, _p.cmhead_shipto_address1,
      _p.cmhead_shipto_address2, _p.cmhead_shipto_address3,
      _p.cmhead_shipto_city, _p.cmhead_shipto_state, _p.cmhead_shipto_zipcode,
      _p.cmhead_curr_id,	_r.cmitem_taxtype_id,
      _r.cmitem_tax_pcta,	_r.cmitem_tax_pctb,	_r.cmitem_tax_pctc,
      COALESCE(_r.cmitem_tax_ratea * -1,0.0), COALESCE(_r.cmitem_tax_rateb * -1,0.0), COALESCE(_r.cmitem_tax_ratec * -1,0.0));

    _totalAmount := _totalAmount + round(_r.amount, 2) + currToCurr(_p.cmhead_tax_curr_id,
							  _p.cmhead_curr_id,
							  COALESCE(_r.cmitem_tax_ratea,0.0) +
							  COALESCE(_r.cmitem_tax_rateb,0.0) +
							  COALESCE(_r.cmitem_tax_ratec,0.0),
							  _p.cmhead_docdate);

  END LOOP;

--  Credit the Misc. Account for Miscellaneous Charges
  IF (_p.cmhead_misc &lt;&gt; 0) THEN
    SELECT insertIntoGLSeries( _sequence, &#39;A/R&#39;, &#39;CM&#39;, _p.cmhead_number,
                               accnt_id, round(currToBase(_p.cmhead_curr_id,
                                                          _p.cmhead_misc * -1,
                                                          _p.cmhead_docdate), 2),
                               _glDate, _p.cmhead_billtoname) INTO _test
    FROM accnt
    WHERE (accnt_id=_p.cmhead_misc_accnt_id);

--  If the Misc. Charges Account was not found then punt
    IF (NOT FOUND) THEN
      PERFORM deleteGLSeries(_sequence);
      RETURN -14;
    END IF;

--  Record the Sales History for any Misc. Charge
    INSERT INTO cohist
    ( cohist_cust_id, cohist_itemsite_id, cohist_shipto_id, cohist_tax_id,
      cohist_misc_type, cohist_misc_descrip, cohist_misc_id,
      cohist_shipdate, cohist_shipvia,
      cohist_ordernumber, cohist_ponumber, cohist_orderdate,
      cohist_doctype, cohist_invcnumber, cohist_invcdate,
      cohist_qtyshipped, cohist_unitprice, cohist_unitcost,
      cohist_salesrep_id, cohist_commission, cohist_commissionpaid,
      cohist_billtoname, cohist_billtoaddress1,
      cohist_billtoaddress2, cohist_billtoaddress3,
      cohist_billtocity, cohist_billtostate, cohist_billtozip,
      cohist_shiptoname, cohist_shiptoaddress1,
      cohist_shiptoaddress2, cohist_shiptoaddress3,
      cohist_shiptocity, cohist_shiptostate, cohist_shiptozip,
      cohist_curr_id )
    VALUES
    ( _p.cmhead_cust_id, -1, _p.cmhead_shipto_id, _p.cmhead_adjtax_id,
      &#39;M&#39;, _p.cmhead_misc_descrip, _p.cmhead_misc_accnt_id,
      _p.cmhead_docdate, &#39;&#39;,
      _p.cmhead_number, _p.cmhead_custponumber, _p.cmhead_docdate,
      &#39;C&#39;, _p.cmhead_invcnumber, _p.cmhead_docdate,
      1, (_p.cmhead_misc * -1), (_p.cmhead_misc * -1),
      _p.cmhead_salesrep_id, 0, FALSE,
      _p.cmhead_billtoname, _p.cmhead_billtoaddress1,
      _p.cmhead_billtoaddress2, _p.cmhead_billtoaddress3,
      _p.cmhead_billtocity, _p.cmhead_billtostate, _p.cmhead_billtozip,
      _p.cmhead_shipto_name, _p.cmhead_shipto_address1,
      _p.cmhead_shipto_address2, _p.cmhead_shipto_address3,
      _p.cmhead_shipto_city, _p.cmhead_shipto_state, _p.cmhead_shipto_zipcode,
      _p.cmhead_curr_id );

--  Cache the Misc. Amount distributed
    _totalAmount := _totalAmount + _p.cmhead_misc;
  END IF;

  -- Credit Tax Adjustments
  IF (COALESCE(_p.cmhead_adjtax_ratea,0.0) != 0 OR COALESCE(_p.cmhead_adjtax_rateb,0.0) != 0 OR
      COALESCE(_p.cmhead_adjtax_ratec,0.0) != 0) THEN
    _taxBaseValue := addTaxToGLSeries(_sequence, _p.cmhead_tax_curr_id,
				      &#39;A/R&#39;, &#39;CM&#39;, _p.cmhead_number,
				      _glDate, _p.cmhead_docdate,
				      _p.cmhead_adjtax_id,
				      0 - COALESCE(_p.cmhead_adjtax_ratea,0.0),
				      0 - COALESCE(_p.cmhead_adjtax_rateb,0.0),
				      0 - COALESCE(_p.cmhead_adjtax_ratec,0.0),
                                      (&#39;Tax liability for &#39; || _p.cmhead_billtoname));
    IF (_taxBaseValue IS NULL) THEN
      PERFORM deleteGLSeries(_sequence);
      RETURN -15;
    END IF;

    _totalAmount := _totalAmount + currToCurr(_p.cmhead_tax_curr_id,
					      _p.cmhead_curr_id,
					      COALESCE(_p.cmhead_adjtax_ratea,0.0) +
					      COALESCE(_p.cmhead_adjtax_rateb,0.0) +
					      COALESCE(_p.cmhead_adjtax_ratec,0.0),
					      _p.cmhead_docdate);
  --  Record the Sales History for misc tax adjustment
    INSERT INTO cohist
    ( cohist_cust_id, cohist_itemsite_id, cohist_shipto_id, cohist_tax_id,
      cohist_misc_type, cohist_misc_descrip,
      cohist_shipdate, cohist_shipvia,
      cohist_ordernumber, cohist_ponumber, cohist_orderdate,
      cohist_doctype, cohist_invcnumber, cohist_invcdate,
      cohist_qtyshipped, cohist_unitprice, cohist_unitcost,
      cohist_salesrep_id, cohist_commission, cohist_commissionpaid,
      cohist_billtoname, cohist_billtoaddress1,
      cohist_billtoaddress2, cohist_billtoaddress3,
      cohist_billtocity, cohist_billtostate, cohist_billtozip,
      cohist_shiptoname, cohist_shiptoaddress1,
      cohist_shiptoaddress2, cohist_shiptoaddress3,
      cohist_shiptocity, cohist_shiptostate, cohist_shiptozip,
      cohist_curr_id,	cohist_taxtype_id,
      cohist_tax_pcta,	cohist_tax_pctb,	cohist_tax_pctc,
      cohist_tax_ratea,	cohist_tax_rateb,	cohist_tax_ratec)
    VALUES
    ( _p.cmhead_cust_id, -1, _p.cmhead_shipto_id, _p.cmhead_adjtax_id,
      &#39;T&#39;, &#39;Misc Tax Adjustment&#39;,
      _p.cmhead_docdate, &#39;&#39;,
      _p.cmhead_number, _p.cmhead_custponumber, _p.cmhead_docdate,
      &#39;C&#39;, _p.cmhead_invcnumber, _p.cmhead_docdate,
      0, 0, 0,
      _p.cmhead_salesrep_id, 0, FALSE,
      _p.cmhead_billtoname, _p.cmhead_billtoaddress1,
      _p.cmhead_billtoaddress2, _p.cmhead_billtoaddress3,
      _p.cmhead_billtocity, _p.cmhead_billtostate, _p.cmhead_billtozip,
      _p.cmhead_shipto_name, _p.cmhead_shipto_address1,
      _p.cmhead_shipto_address2, _p.cmhead_shipto_address3,
      _p.cmhead_shipto_city, _p.cmhead_shipto_state, _p.cmhead_shipto_zipcode,
      _p.cmhead_curr_id,      _p.cmhead_adjtaxtype_id,
      _p.cmhead_adjtax_pcta,  _p.cmhead_adjtax_pctb,  _p.cmhead_adjtax_pctc,
      COALESCE(_p.cmhead_adjtax_ratea * -1,0.0), COALESCE(_p.cmhead_adjtax_rateb * -1,0.0), COALESCE(_p.cmhead_adjtax_ratec * -1,0.0));

  END IF;

--  Debit the Freight Account
  IF (_p.cmhead_freight &lt;&gt; 0) THEN
    SELECT insertIntoGLSeries( _sequence, &#39;A/R&#39;, &#39;CM&#39;, _p.cmhead_number,
                               accnt_id,
                               round(currToBase(_p.cmhead_curr_id,
                                                _p.cmhead_freight * -1,
                                                _p.cmhead_docdate), 2),
                               _glDate, _p.cmhead_billtoname) INTO _test
    FROM accnt
    WHERE (accnt_id=findFreightAccount(_p.cmhead_cust_id));

--  If the Freight Charges Account was not found then punt
    IF (NOT FOUND) THEN
      PERFORM deleteGLSeries(_sequence);
      RETURN -16;
    END IF;

    _taxBaseValue := addTaxToGLSeries(_sequence, _p.cmhead_tax_curr_id,
				      &#39;A/R&#39;, &#39;CM&#39;, _p.cmhead_number,
				      _glDate, _p.cmhead_docdate,
				      _p.cmhead_freighttax_id,
				      0 - COALESCE(_p.cmhead_freighttax_ratea,0.0),
				      0 - COALESCE(_p.cmhead_freighttax_rateb,0.0),
				      0 - COALESCE(_p.cmhead_freighttax_ratec,0.0),
                                      (&#39;Tax liability for &#39; || _p.cmhead_billtoname));
    IF (_taxBaseValue IS NULL) THEN
      PERFORM deleteGLSeries(_sequence);
      RETURN -17;
    END IF;

--  Cache the Amount Distributed to Freight
    _totalAmount := _totalAmount + _p.cmhead_freight +
		    currToCurr(_p.cmhead_tax_curr_id, _p.cmhead_curr_id,
			       COALESCE(_p.cmhead_freighttax_ratea,0.0) +
			       COALESCE(_p.cmhead_freighttax_rateb,0.0) +
			       COALESCE(_p.cmhead_freighttax_ratec,0.0),
			       _p.cmhead_docdate);

--  Record the Sales History for any Freight
    INSERT INTO cohist
    ( cohist_cust_id, cohist_itemsite_id, cohist_shipto_id, cohist_tax_id,
      cohist_misc_type, cohist_misc_descrip,
      cohist_shipdate, cohist_shipvia,
      cohist_ordernumber, cohist_ponumber, cohist_orderdate,
      cohist_doctype, cohist_invcnumber, cohist_invcdate,
      cohist_qtyshipped, cohist_unitprice, cohist_unitcost,
      cohist_salesrep_id, cohist_commission, cohist_commissionpaid,
      cohist_billtoname, cohist_billtoaddress1,
      cohist_billtoaddress2, cohist_billtoaddress3,
      cohist_billtocity, cohist_billtostate, cohist_billtozip,
      cohist_shiptoname, cohist_shiptoaddress1,
      cohist_shiptoaddress2, cohist_shiptoaddress3,
      cohist_shiptocity, cohist_shiptostate, cohist_shiptozip,
      cohist_curr_id,	cohist_taxtype_id,
      cohist_tax_pcta,	cohist_tax_pctb,	cohist_tax_pctc,
      cohist_tax_ratea,	cohist_tax_rateb,	cohist_tax_ratec)
    VALUES
    ( _p.cmhead_cust_id, -1, _p.cmhead_shipto_id, _p.cmhead_freighttax_id,
      &#39;F&#39;, &#39;Freight Charge&#39;,
      _p.cmhead_docdate, &#39;&#39;,
      _p.cmhead_number, _p.cmhead_custponumber, _p.cmhead_docdate,
      &#39;C&#39;, _p.cmhead_invcnumber, _p.cmhead_docdate,
      1, (_p.cmhead_freight * -1), (_p.cmhead_freight * -1),
      _p.cmhead_salesrep_id, 0, FALSE,
      _p.cmhead_billtoname, _p.cmhead_billtoaddress1,
      _p.cmhead_billtoaddress2, _p.cmhead_billtoaddress3,
      _p.cmhead_billtocity, _p.cmhead_billtostate, _p.cmhead_billtozip,
      _p.cmhead_shipto_name, _p.cmhead_shipto_address1,
      _p.cmhead_shipto_address2, _p.cmhead_shipto_address3,
      _p.cmhead_shipto_city, _p.cmhead_shipto_state, _p.cmhead_shipto_zipcode,
      _p.cmhead_curr_id,	  _p.cmhead_freighttaxtype_id,
      _p.cmhead_freighttax_pcta,  _p.cmhead_freighttax_pctb,  _p.cmhead_freighttax_pctc,
      COALESCE(_p.cmhead_freighttax_ratea * -1,0.0), COALESCE(_p.cmhead_freighttax_rateb * -1,0.0), COALESCE(_p.cmhead_freighttax_ratec * -1,0.0));

  END IF;

--  Credit the A/R for the total Amount
  IF (_totalAmount &lt;&gt; 0) THEN
    IF (_p.ar_accnt_id != -1) THEN
      PERFORM insertIntoGLSeries( _sequence, &#39;A/R&#39;, &#39;CM&#39;, _p.cmhead_number,
                                  _p.ar_accnt_id,
                                  round(currToBase(_p.cmhead_curr_id,
                                                   _totalAmount,
                                                   _p.cmhead_docdate), 2),
                                  _glDate, _p.cmhead_billtoname);
    ELSE
      PERFORM deleteGLSeries(_sequence);
      RETURN -18;
    END IF;
  END IF;

--  Commit the GLSeries;
  PERFORM postGLSeries(_sequence, pJournalNumber);

  IF (_totalAmount &lt;&gt; 0) THEN
--  Create the Invoice aropen item
    SELECT NEXTVAL(&#39;aropen_aropen_id_seq&#39;) INTO _aropenid;
    INSERT INTO aropen
    ( aropen_id, aropen_username, aropen_journalnumber,
      aropen_open, aropen_posted,
      aropen_cust_id, aropen_ponumber,
      aropen_docnumber,
      aropen_applyto, aropen_doctype,
      aropen_docdate, aropen_duedate, aropen_distdate, aropen_terms_id,
      aropen_amount, aropen_paid,
      aropen_salesrep_id, aropen_commission_due, aropen_commission_paid,
      aropen_ordernumber, aropen_notes,
      aropen_rsncode_id, aropen_curr_id )
    SELECT _aropenid, CURRENT_USER, pJournalNumber,
           TRUE, FALSE,
           cmhead_cust_id, cmhead_custponumber,
           cmhead_number,
           CASE WHEN (cmhead_invcnumber=&#39;-1&#39;) THEN &#39;OPEN&#39;
                ELSE (cmhead_invcnumber::TEXT)
           END,
           &#39;C&#39;,
           cmhead_docdate, cmhead_docdate, _glDate, -1,
           _totalAmount, 0,
           cmhead_salesrep_id, (_commissionDue * -1), FALSE,
           cmhead_number::TEXT, cmhead_comments,
           cmhead_rsncode_id, cmhead_curr_id
    FROM cmhead
    WHERE (cmhead_id=pCmheadid);
  END IF;

-- Handle the Inventory and G/L Transactions for any returned Inventory
  FOR _r IN SELECT cmitem_itemsite_id AS itemsite_id, cmitem_id,
                   (cmitem_qtyreturned * cmitem_qty_invuomratio) AS qty,
                   cmhead_number, cmhead_cust_id AS cust_id, item_number
            FROM cmhead, cmitem, itemsite, item
            WHERE ( (cmitem_cmhead_id=cmhead_id)
             AND (cmitem_itemsite_id=itemsite_id)
             AND (itemsite_item_id=item_id)
             AND (cmitem_qtyreturned &lt;&gt; 0)
             AND (cmhead_id=pCmheadid) ) LOOP

--  Return credited stock to inventory
    IF (_itemlocSeries = 0) THEN
      SELECT NEXTVAL(&#39;itemloc_series_seq&#39;) INTO _itemlocSeries;
    END IF;
    SELECT postInvTrans( itemsite_id, &#39;RS&#39;, _r.qty,
                         &#39;S/O&#39;, &#39;CM&#39;, _r.cmhead_number, &#39;&#39;,
                         (&#39;Credit Return &#39; || _r.item_number),
                         costcat_asset_accnt_id, resolveCOSAccount(itemsite_id, _r.cust_id), _itemlocSeries ) INTO _invhistid
    FROM itemsite, costcat
    WHERE ( (itemsite_costcat_id=costcat_id)
     AND (itemsite_id=_r.itemsite_id) );

  END LOOP;

--  Update coitem to reflect the returned qty
  FOR _r IN SELECT cmitem_qtyreturned, cmitem_itemsite_id, cohead_id
            FROM cmitem, cmhead, invchead, cohead
            WHERE ( (cmitem_cmhead_id=cmhead_id)
             AND (cmhead_invcnumber=invchead_invcnumber)
             AND (invchead_ordernumber=cohead_number)
             AND (cmhead_id=pCmheadid) ) LOOP
    UPDATE coitem
    SET coitem_qtyreturned = (coitem_qtyreturned + _r.cmitem_qtyreturned)
    WHERE coitem_id IN ( SELECT coitem_id
                         FROM coitem
                         WHERE ( (coitem_cohead_id=_r.cohead_id)
                          AND (coitem_itemsite_id = _r.cmitem_itemsite_id) )
                         LIMIT 1 );
  END LOOP;

--  Mark the cmhead as posted
  UPDATE cmhead
  SET cmhead_posted=TRUE, cmhead_gldistdate=_glDate
  WHERE (cmhead_id=pCmheadid);

--  Find the apply-to document and make the application
  SELECT cmhead_number, cmhead_curr_id, cmhead_docdate,
         aropen_id, aropen_cust_id, aropen_docnumber,
         currToCurr(aropen_curr_id, cmhead_curr_id, aropen_amount - aropen_paid,
                    cmhead_docdate) AS balance INTO _p
  FROM aropen, cmhead
  WHERE ( (aropen_doctype=&#39;I&#39;)
   AND (aropen_docnumber=cmhead_invcnumber)
   AND (cmhead_id=pCmheadid) );
  IF (FOUND) THEN

    IF round(_totalAmount, 2) &lt;= round(_p.balance, 2) THEN
      _toApply = _totalAmount;
    ELSE
      _toApply = _p.balance;
    END IF;

    UPDATE aropen
    SET aropen_paid = round(aropen_paid + currToCurr(_p.cmhead_curr_id,
                                                     aropen_curr_id, _toApply,
                                                     _p.cmhead_docdate), 2)
    WHERE (aropen_id=_p.aropen_id);

--  Alter the new A/R Open Item to reflect the application
    UPDATE aropen
    SET aropen_paid = round(currToCurr(_p.cmhead_curr_id, aropen_curr_id,
                                       _toApply, _p.cmhead_docdate), 2)
    WHERE (aropen_id=_aropenid);

--  Record the application
    INSERT INTO arapply
    ( arapply_cust_id,
      arapply_source_aropen_id, arapply_source_doctype, arapply_source_docnumber,
      arapply_target_aropen_id, arapply_target_doctype, arapply_target_docnumber,
      arapply_fundstype, arapply_refnumber,
      arapply_applied, arapply_closed,
      arapply_postdate, arapply_distdate, arapply_journalnumber, arapply_curr_id )
    VALUES
    ( _p.aropen_cust_id,
      _aropenid, &#39;C&#39;, _p.cmhead_number,
      _p.aropen_id, &#39;I&#39;, _p.aropen_docnumber,
      &#39;&#39;, &#39;&#39;,
      round(_toApply, 2), _toClose,
      CURRENT_DATE, _p.cmhead_docdate, 0, _p.cmhead_curr_id );

  END IF;
    
  RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postcreditmemos-boolean">postcreditmemos( boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPostUnprinted ALIAS FOR $1;
  _cmhead RECORD;
  _result INTEGER;
  _return INTEGER        := 0;
  _itemlocSeries INTEGER := 0;

BEGIN

  _itemlocSeries := 0;

  FOR _cmhead IN SELECT cmhead_id
                 FROM cmhead
                 WHERE ( (NOT cmhead_posted)
                   AND   (NOT cmhead_hold)
                   AND   (checkCreditMemoSitePrivs(cmhead_id))
                   AND   ((pPostUnprinted) OR (cmhead_printed)) ) LOOP

    SELECT postCreditMemo(_cmhead.cmhead_id, _itemlocSeries) INTO _result;
    IF (_result &lt; _return) THEN
      _return := _result;
    END IF;

  END LOOP;

  RETURN _return;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postcreditmemos-boolean-integer">postcreditmemos( boolean, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPostUnprinted ALIAS FOR $1;
  pJournalNumber ALIAS FOR $2;
  _r RECORD;
  _itemlocSeries INTEGER := 0;

BEGIN

  _itemlocSeries := 0;

  FOR _r IN SELECT cmhead_id
            FROM cmhead
            WHERE ( (NOT cmhead_posted)
              AND   (NOT cmhead_hold)
              AND   (checkCreditMemoSitePrivs(cmhead_id))
              AND   ((pPostUnprinted) OR (cmhead_printed)) ) LOOP

    SELECT postCreditMemo(_r.cmhead_id, pJournalNumber, _itemlocSeries) INTO _itemlocSeries;

  END LOOP;

  RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postglseries-integer">postglseries( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSequence ALIAS FOR $1;
  _journalNumber INTEGER;
  _returnValue INTEGER;

BEGIN

  SELECT postGLSeries(pSequence, fetchJournalNumber(&#39;G/L&#39;)) INTO _returnValue;
  RETURN _returnValue;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postglseries-integer-integer">postglseries( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSequence ALIAS FOR $1;
  pJournalNumber ALIAS FOR $2;
  _returnValue INTEGER;

BEGIN

  SELECT postGLSeries(pSequence, pJournalNumber, true) INTO _returnValue;
  RETURN _returnValue;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postglseries-integer-integer-boolean">postglseries( integer, integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSequence 		ALIAS FOR $1;
  pJournalNumber 	ALIAS FOR $2;
  pPostZero		ALIAS FOR $3;
  _glseries RECORD;
  _transCount INTEGER := 0;
  _delta NUMERIC;
  _discrepAccntid INTEGER;
BEGIN

--  Make sure that we balance
  SELECT SUM(glseries_amount) INTO _delta
    FROM glseries
   WHERE (glseries_sequence=pSequence);
  IF ( _delta &lt;&gt; 0 ) THEN
    SELECT accnt_id INTO _discrepAccntid
      FROM accnt, metric
     WHERE ((metric_name=&#39;GLSeriesDiscrepancyAccount&#39;)
       AND  (accnt_id=CAST(metric_value AS INTEGER)));
    IF (NOT FOUND) THEN
      RETURN -5;
    END IF;
    INSERT INTO glseries
           ( glseries_sequence, glseries_source, glseries_doctype, glseries_docnumber,
             glseries_accnt_id, glseries_amount, glseries_distdate, glseries_notes )
    SELECT glseries_sequence, glseries_source, glseries_doctype, glseries_docnumber,
             _discrepAccntid, (_delta * -1), CURRENT_DATE, &#39;G/L Series Discrepancy&#39;
      FROM glseries
     WHERE (glseries_sequence=pSequence)
     LIMIT 1;
  END IF;

--  March through the glseries members, posting them one at a time
  FOR _glseries IN SELECT glseries_source, glseries_doctype, glseries_docnumber,
                          glseries_accnt_id, glseries_distdate, glseries_notes,
                          SUM(glseries_amount) as amount
                     FROM glseries
                    WHERE ((glseries_amount&lt;&gt;0.0)
                      AND  (glseries_sequence=pSequence))
                    GROUP BY glseries_source, glseries_doctype, glseries_docnumber,
                             glseries_accnt_id, glseries_distdate, glseries_notes LOOP

-- refuse to accept postings into closed periods if any of the accounts disallow it
    IF (SELECT NOT BOOL_AND(accnt_closedpost) AND
               BOOL_AND(COALESCE(period_closed, FALSE))
        FROM accnt LEFT OUTER JOIN
             period ON (_glseries.glseries_distdate BETWEEN period_start AND period_end)
        WHERE (accnt_id = _glseries.glseries_accnt_id)) THEN
      RAISE EXCEPTION &#39;Cannot post to closed period (%).&#39;, _glseries.glseries_distdate;
      RETURN -4;        -- remove raise exception when all callers check return code
    END IF;

    IF (_glseries.amount != 0 OR pPostZero) THEN
     INSERT INTO gltrans
      ( gltrans_posted, gltrans_exported, gltrans_created, gltrans_date,
        gltrans_sequence, gltrans_accnt_id, gltrans_source, gltrans_notes,
        gltrans_doctype, gltrans_docnumber, gltrans_amount, gltrans_journalnumber )
      VALUES
      ( FALSE, FALSE, CURRENT_TIMESTAMP, _glseries.glseries_distdate,
        pSequence, _glseries.glseries_accnt_id, _glseries.glseries_source, _glseries.glseries_notes,
        _glseries.glseries_doctype, _glseries.glseries_docnumber, _glseries.amount, pJournalNumber );

    _transCount := _transCount + 1;
    END IF;
  END LOOP;

--  Delete all of the posted glseries members
  DELETE FROM glseries
  WHERE (glseries_sequence=pSequence);

  PERFORM postIntoTrialBalance(pSequence);

  RETURN _transCount;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postglseriesnosumm-integer">postglseriesnosumm( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSequence ALIAS FOR $1;
  _journalNumber INTEGER;
  _returnValue INTEGER;

BEGIN

  SELECT postGLSeriesNoSumm(pSequence, fetchJournalNumber(&#39;G/L&#39;)) INTO _returnValue;
  RETURN _returnValue;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postglseriesnosumm-integer-integer">postglseriesnosumm( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSequence ALIAS FOR $1;
  pJournalNumber ALIAS FOR $2;
  _glseries RECORD;
  _transCount INTEGER := 0;

BEGIN

--  Make sure that we balance
  IF ( ( SELECT SUM(glseries_amount)
         FROM glseries
         WHERE (glseries_sequence=pSequence) ) &lt;&gt; 0 ) THEN
    RETURN -1;
  END IF;

--  March through the glseries members, posting them one at a time
  FOR _glseries IN SELECT glseries_source, glseries_doctype, glseries_docnumber,
                          glseries_accnt_id, glseries_distdate, glseries_notes,
                          glseries_amount as amount
                     FROM glseries
                    WHERE ((glseries_amount&lt;&gt;0.0)
                      AND  (glseries_sequence=pSequence)) LOOP

-- refuse to accept postings into closed periods if any of the accounts disallow it
    IF (SELECT NOT BOOL_AND(accnt_closedpost) AND
	       BOOL_AND(COALESCE(period_closed, FALSE))
	FROM accnt LEFT OUTER JOIN
	     period ON (_glseries.glseries_distdate BETWEEN period_start AND period_end)
	WHERE (accnt_id = _glseries.glseries_accnt_id)) THEN
      RAISE EXCEPTION &#39;Cannot post to closed period (%).&#39;, _glseries.glseries_distdate;
      RETURN -4;	-- remove raise exception when all callers check return code
    END IF;

    INSERT INTO gltrans
    ( gltrans_posted, gltrans_exported, gltrans_created, gltrans_date,
      gltrans_sequence, gltrans_accnt_id, gltrans_source, gltrans_notes,
      gltrans_doctype, gltrans_docnumber, gltrans_amount, gltrans_journalnumber )
    VALUES
    ( FALSE, FALSE, CURRENT_TIMESTAMP, _glseries.glseries_distdate,
      pSequence, _glseries.glseries_accnt_id, _glseries.glseries_source, _glseries.glseries_notes,
      _glseries.glseries_doctype, _glseries.glseries_docnumber, _glseries.amount, pJournalNumber );

    _transCount := _transCount + 1;

  END LOOP;

--  Delete all of the posted glseries members
  DELETE FROM glseries
  WHERE (glseries_sequence=pSequence);

  PERFORM postIntoTrialBalance(pSequence);
  
  RETURN _transCount;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postintotrialbalance-integer">postintotrialbalance( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSequence ALIAS FOR $1;
  _trialbalid INTEGER;
  _r RECORD;

BEGIN

--  March through all of the G/L Transactions for the passed sequence that are not posted
  FOR _r IN SELECT gltrans_id, gltrans_date, gltrans_accnt_id, gltrans_amount,
                   accnt_closedpost, accnt_forwardupdate, period_id, period_closed, period_freeze
            FROM accnt, gltrans LEFT OUTER JOIN period ON (gltrans_date BETWEEN period_start AND period_end)
            WHERE ( (gltrans_accnt_id=accnt_id)
             AND (NOT gltrans_posted)
             AND (gltrans_sequence=pSequence) ) LOOP

--  If we can post into a Trial Balance, do so
    IF ( (NOT _r.period_freeze) AND ( (NOT _r.period_closed) OR (_r.accnt_closedpost) ) ) THEN

--  Try to find an existing trialbal
      SELECT trialbal_id INTO _trialbalid
      FROM trialbal
      WHERE ( (trialbal_period_id=_r.period_id)
       AND (trialbal_accnt_id=_r.gltrans_accnt_id) );
      IF (FOUND) THEN

--  We found a trialbal, update it with the G/L Transaction
--  Note - two stage update to avoid any funny value caching logic
        IF (_r.gltrans_amount &gt; 0) THEN
          UPDATE trialbal
          SET trialbal_credits = (trialbal_credits + _r.gltrans_amount)
          WHERE (trialbal_id=_trialbalid);
        ELSE
          UPDATE trialbal
          SET trialbal_debits = (trialbal_debits + (_r.gltrans_amount * -1))
          WHERE (trialbal_id=_trialbalid);
        END IF;

        UPDATE trialbal
        SET trialbal_ending = (trialbal_beginning - trialbal_debits + trialbal_credits),
            trialbal_dirty=TRUE
        WHERE (trialbal_id=_trialbalid);
      ELSE

--  No existing trialbal, make one
        SELECT NEXTVAL(&#39;trialbal_trialbal_id_seq&#39;) INTO _trialbalid;
        INSERT INTO trialbal
        ( trialbal_id, trialbal_accnt_id, trialbal_period_id,
          trialbal_beginning, trialbal_dirty,
          trialbal_ending,
          trialbal_credits,
          trialbal_debits )
        VALUES
        ( _trialbalid, _r.gltrans_accnt_id, _r.period_id,
          0, TRUE,
          _r.gltrans_amount,
          CASE WHEN (_r.gltrans_amount &gt; 0) THEN _r.gltrans_amount
               ELSE 0
          END,
          CASE WHEN (_r.gltrans_amount &lt; 0) THEN (_r.gltrans_amount * -1)
               ELSE 0
          END );
      END IF;

--  Forward update if we should
      IF (_r.accnt_forwardupdate) THEN
        PERFORM forwardUpdateTrialBalance(_trialbalid);
      END IF;

--  Mark the G/L Transaction as posted
      UPDATE gltrans
      SET gltrans_posted=TRUE
      WHERE (gltrans_id=_r.gltrans_id);

    END IF;

  END LOOP;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postinvhist-integer">postinvhist( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pInvhistId ALIAS FOR $1;
  _r RECORD;
  _sense INTEGER;
BEGIN

    SELECT invhist_ordnumber, invhist_transtype, itemsite_warehous_id INTO _r
    FROM invhist, itemsite
    WHERE ((invhist_id=pInvhistId)
    AND (itemsite_id=invhist_itemsite_id));
  
    -- increase inventory: AD RM RT RP RR RS RX RB TR
    -- decrease inventory: IM IB IT SH SI EX
    -- TS and TR are special: shipShipment and recallShipment should not change
    -- QOH at the Transfer Order src whs (as this was done by issueToShipping)
    -- but postReceipt should change QOH at the transit whs
    IF (_r.invhist_transtype=&#39;TS&#39;) THEN
      _sense := CASE WHEN (SELECT tohead_trns_warehous_id=_r.itemsite_warehous_id
			   FROM tohead
			   WHERE (tohead_number=_r.invhist_ordnumber)) THEN -1
			   ELSE 0
			   END;
    ELSIF (_r.invhist_transtype=&#39;TR&#39;) THEN
      _sense := CASE WHEN (SELECT tohead_src_warehous_id=_r.itemsite_warehous_id
			   FROM tohead
			   WHERE (tohead_number=_r.invhist_ordnumber)) THEN 0
			   ELSE 1
			   END;
    ELSIF (_r.invhist_transtype IN (&#39;IM&#39;, &#39;IB&#39;, &#39;IT&#39;, &#39;SH&#39;, &#39;SI&#39;, &#39;EX&#39;)) THEN
      _sense := -1;
    ELSE
      _sense := 1;
    END IF;
    
    --Update itemsite qoh and change posted flag
    UPDATE itemsite SET 
      itemsite_qtyonhand = (itemsite_qtyonhand + (invhist_invqty * _sense)),
      itemsite_value = (itemsite_value + (invhist_invqty * invhist_unitcost * _sense))
    FROM invhist
    WHERE ( (itemsite_id=invhist_itemsite_id)
    AND (invhist_id=pInvhistId)
    AND (NOT invhist_posted) );

    --Flag as posted
    UPDATE invhist SET
      invhist_posted=TRUE
    WHERE ( (invhist_id=pInvhistId)
    AND (invhist_posted=FALSE) );

RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postinvoice-integer">postinvoice( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pInvcheadid ALIAS FOR $1;
  _return INTEGER;

BEGIN

  SELECT postInvoice(pInvcheadid, fetchJournalNumber(&#39;AR-IN&#39;)) INTO _return;

  RETURN _return;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postinvoice-integer-integer">postinvoice( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pInvcheadid ALIAS FOR $1;
  pJournalNumber ALIAS FOR $2;
  _aropenid NUMERIC;
  _amount NUMERIC;
  _roundedBase NUMERIC;
  _sequence INTEGER;
  _r RECORD;
  _p RECORD;
  _test INTEGER;
  _totalAmount          NUMERIC := 0;
  _totalRoundedBase     NUMERIC := 0;
  _totalAmountBase      NUMERIC := 0;
  _appliedAmount        NUMERIC := 0;
  _commissionDue        NUMERIC := 0;
  _tmpAccntId INTEGER;
  _tmpCurrId  INTEGER;
  _firstExchDate        DATE;
  _glDate		DATE;
  _exchGain             NUMERIC := 0;
  _taxBaseValue		NUMERIC := 0;

BEGIN

  IF ( ( SELECT invchead_posted
         FROM invchead
         WHERE (invchead_id=pInvcheadid) ) ) THEN
    RETURN -10;
  END IF;

--  Cache some parameters
  SELECT invchead.*, fetchGLSequence() AS sequence,
         findFreightAccount(invchead_cust_id) AS freightaccntid,
         findARAccount(invchead_cust_id) AS araccntid
       INTO _p 
  FROM invchead
  WHERE (invchead_id=pInvcheadid);

  _glDate := COALESCE(_p.invchead_gldistdate, _p.invchead_invcdate);

-- the 1st MC iteration used the cohead_orderdate so we could get curr exch
-- gain/loss between the sales and invoice dates, but see issue 3892.  leave
-- this condition TRUE until we make this configurable or decide not to.
  IF TRUE THEN
      _firstExchDate := _p.invchead_invcdate;
  ELSE
-- can we save a select by using: _firstExchDate := _p.invchead_orderdate;
      SELECT cohead_orderdate INTO _firstExchDate
      FROM cohead JOIN invchead ON (cohead_number = invchead_ordernumber)
      WHERE (invchead_id = pInvcheadid);
  END IF;

--  March through the non-misc invcitems
  FOR _r IN SELECT invcitem_billed, invcitem_qty_invuomratio, invcitem_price, 
                   invcitem_price_invuomratio,invcitem_tax_ratea,invcitem_tax_rateb,
                   invcitem_tax_pcta,invcitem_tax_pctb,invcitem_tax_pctc,
                   invcitem_tax_ratec,invcitem_tax_id,invcitem_taxtype_id,
                   itemsite_id, item_id,
                   (SUM(shipitem_value) / (invcitem_billed * invcitem_qty_invuomratio)) AS cost
            FROM item, invcitem 
              LEFT OUTER JOIN
		 itemsite ON ((invcitem_item_id=itemsite_item_id)
			     AND (invcitem_warehous_id=itemsite_warehous_id))
              LEFT OUTER JOIN
                 shipitem ON (invcitem_id=shipitem_invcitem_id)
            WHERE ((invcitem_item_id=item_id)
              AND  (invcitem_invchead_id=pInvcheadid) )
            GROUP BY invcitem_id, invcitem_billed, invcitem_qty_invuomratio, invcitem_price, 
                     invcitem_price_invuomratio,invcitem_tax_ratea,invcitem_tax_rateb,
                     invcitem_tax_pcta,invcitem_tax_pctb,invcitem_tax_pctc,
                     invcitem_tax_ratec,invcitem_tax_id,invcitem_taxtype_id,
                     itemsite_id,item_id LOOP

--  Cache the amount due for this line
    _amount := round(((_r.invcitem_billed * _r.invcitem_qty_invuomratio) * (_r.invcitem_price / _r.invcitem_price_invuomratio)), 2);

    IF (_amount &gt; 0) THEN
--  Credit the Sales Account for the invcitem item
      IF (_r.itemsite_id IS NULL) THEN
	SELECT salesaccnt_sales_accnt_id INTO _tmpAccntId
	FROM salesaccnt
	WHERE (salesaccnt_id=findSalesAccnt(_r.item_id, &#39;I&#39;,
					    _p.invchead_cust_id));
      ELSE
	SELECT salesaccnt_sales_accnt_id INTO _tmpAccntId
	FROM salesaccnt
	WHERE (salesaccnt_id=findSalesAccnt(_r.itemsite_id, &#39;IS&#39;,
					    _p.invchead_cust_id));
      END IF;

--  If the Sales Account Assignment was not found then punt
      IF (NOT FOUND) THEN
        PERFORM deleteGLSeries(_p.sequence);
        DELETE FROM cohist
         WHERE ((cohist_sequence=_p.sequence)
           AND  (cohist_invcnumber=_p.invchead_invcnumber));
        RETURN -11;
      END IF;

      _roundedBase := round(currToBase(_p.invchead_curr_id, _amount,
                                      _firstExchDate), 2);
      SELECT insertIntoGLSeries( _p.sequence, &#39;A/R&#39;, &#39;IN&#39;,
                                 _p.invchead_invcnumber, _tmpAccntId,
                                 _roundedBase, _glDate, _p.invchead_billto_name ) INTO _test;

      _totalAmount := (_totalAmount + _amount);
      _totalRoundedBase := _totalRoundedBase + _roundedBase;
      _commissionDue := (_commissionDue + (_amount * _p.invchead_commission));
    END IF;

    _taxBaseValue := addTaxToGLSeries(_p.sequence, COALESCE(_p.invchead_tax_curr_id,_p.invchead_curr_id),
				      &#39;A/R&#39;, &#39;IN&#39;, _p.invchead_invcnumber,
				      _glDate, _firstExchDate,
				      _r.invcitem_tax_id,
				      COALESCE(_r.invcitem_tax_ratea,0.0),
				      COALESCE(_r.invcitem_tax_rateb,0.0),
				      COALESCE(_r.invcitem_tax_ratec,0.0),
                                      (&#39;Tax liability for &#39; || _p.invchead_billto_name));
    IF (_taxBaseValue IS NULL) THEN
      PERFORM deleteGLSeries(_p.sequence);
      DELETE FROM cohist
       WHERE ((cohist_sequence=_p.sequence)
	 AND  (cohist_invcnumber=_p.invchead_invcnumber));
      RETURN -12;
    END IF;
    _totalAmount := _totalAmount + currToCurr(COALESCE(_p.invchead_tax_curr_id,_p.invchead_curr_id),
					      _p.invchead_curr_id,
					      COALESCE(_r.invcitem_tax_ratea,0.0) +
					      COALESCE(_r.invcitem_tax_rateb,0.0) +
					      COALESCE(_r.invcitem_tax_ratec,0.0),
					      _firstExchDate);
    _totalRoundedBase := _totalRoundedBase + _taxBaseValue;

--  Record Sales History for this S/O Item
    INSERT INTO cohist
    ( cohist_cust_id, cohist_itemsite_id, cohist_shipto_id, cohist_tax_id,
      cohist_shipdate, cohist_shipvia,
      cohist_ordernumber, cohist_ponumber, cohist_orderdate,
      cohist_doctype, cohist_invcnumber, cohist_invcdate,
      cohist_qtyshipped, cohist_unitprice, cohist_unitcost,
      cohist_salesrep_id, cohist_commission, cohist_commissionpaid,
      cohist_billtoname, cohist_billtoaddress1,
      cohist_billtoaddress2, cohist_billtoaddress3,
      cohist_billtocity, cohist_billtostate, cohist_billtozip,
      cohist_shiptoname, cohist_shiptoaddress1,
      cohist_shiptoaddress2, cohist_shiptoaddress3,
      cohist_shiptocity, cohist_shiptostate, cohist_shiptozip,
      cohist_curr_id, cohist_sequence, cohist_taxtype_id,
      cohist_tax_pcta, cohist_tax_pctb, cohist_tax_pctc,
      cohist_tax_ratea, cohist_tax_rateb, cohist_tax_ratec)
    VALUES
    ( _p.invchead_cust_id, _r.itemsite_id, _p.invchead_shipto_id, _r.invcitem_tax_id,
      _p.invchead_shipdate, _p.invchead_shipvia,
      _p.invchead_ordernumber, _p.invchead_ponumber, _p.invchead_orderdate,
      &#39;I&#39;, _p.invchead_invcnumber, _p.invchead_invcdate,
      (_r.invcitem_billed * _r.invcitem_qty_invuomratio), (_r.invcitem_price / _r.invcitem_price_invuomratio), _r.cost,
      _p.invchead_salesrep_id, (_p.invchead_commission * (_r.invcitem_billed * _r.invcitem_qty_invuomratio) * (_r.invcitem_price / _r.invcitem_price_invuomratio)), FALSE,
      _p.invchead_billto_name, _p.invchead_billto_address1,
      _p.invchead_billto_address2, _p.invchead_billto_address3,
      _p.invchead_billto_city, _p.invchead_billto_state, _p.invchead_billto_zipcode,
      _p.invchead_shipto_name, _p.invchead_shipto_address1,
      _p.invchead_shipto_address2, _p.invchead_shipto_address3,
      _p.invchead_shipto_city, _p.invchead_shipto_state,
      _p.invchead_shipto_zipcode, COALESCE(_p.invchead_tax_curr_id,_p.invchead_curr_id),
      _p.sequence, _r.invcitem_taxtype_id,
      _r.invcitem_tax_pcta, _r.invcitem_tax_pctb, _r.invcitem_tax_pctc,
      COALESCE(_r.invcitem_tax_ratea,0.0), COALESCE(_r.invcitem_tax_rateb,0.0), COALESCE(_r.invcitem_tax_ratec,0.0));

  END LOOP;

--  March through the misc invcitems
  FOR _r IN SELECT invcitem.*,
                   salescat_sales_accnt_id
            FROM invcitem, salescat
            WHERE ( (invcitem_item_id=-1)
             AND (invcitem_salescat_id=salescat_id)
             AND (invcitem_invchead_id=pInvcheadid) ) LOOP

--  Cache the amount due for this line and the commission due for such
    _amount := round((_r.invcitem_billed * _r.invcitem_price), 2);

    IF (_amount &gt; 0) THEN
--  Credit the Sales Account for the invcitem item
      _roundedBase = round(currToBase(_p.invchead_curr_id, _amount,
                                      _firstExchDate), 2);
      SELECT insertIntoGLSeries( _p.sequence, &#39;A/R&#39;, &#39;IN&#39;, _p.invchead_invcnumber,
                                 _r.salescat_sales_accnt_id, _roundedBase,
                                 _glDate, _p.invchead_billto_name ) INTO _test;
      IF (_test &lt; 0) THEN
        PERFORM deleteGLSeries(_p.sequence);
        DELETE FROM cohist
         WHERE ((cohist_sequence=_p.sequence)
           AND  (cohist_invcnumber=_p.invchead_invcnumber));
        RETURN _test;
      END IF;

      _totalAmount := (_totalAmount + _amount);
      _totalRoundedBase :=  _totalRoundedBase + _roundedBase;
      _commissionDue := (_commissionDue + (_amount * _p.invchead_commission));
    END IF;

    _taxBaseValue := addTaxToGLSeries(_p.sequence, COALESCE(_p.invchead_tax_curr_id,_p.invchead_curr_id),
				      &#39;A/R&#39;, &#39;IN&#39;, _p.invchead_invcnumber,
				      _glDate, _firstExchDate,
				      _r.invcitem_tax_id,
				      COALESCE(_r.invcitem_tax_ratea,0.0),
				      COALESCE(_r.invcitem_tax_rateb,0.0),
				      COALESCE(_r.invcitem_tax_ratec,0.0),
                                      (&#39;Tax liability for &#39; || _p.invchead_billto_name));
    IF (_taxBaseValue IS NULL) THEN
      PERFORM deleteGLSeries(_p.sequence);
      DELETE FROM cohist
       WHERE ((cohist_sequence=_p.sequence)
	 AND  (cohist_invcnumber=_p.invchead_invcnumber));
      RETURN -13;
    END IF;
    _totalAmount := _totalAmount + currToCurr(COALESCE(_p.invchead_tax_curr_id,_p.invchead_curr_id),
					      _p.invchead_curr_id,
					      COALESCE(_r.invcitem_tax_ratea,0.0) +
					      COALESCE(_r.invcitem_tax_rateb,0.0) +
					      COALESCE(_r.invcitem_tax_ratec,0.0),
					      _firstExchDate);
    _totalRoundedBase := _totalRoundedBase + _taxBaseValue;

--  Record Sales History for this S/O Item
    INSERT INTO cohist
    ( cohist_cust_id, cohist_itemsite_id, cohist_shipto_id, cohist_tax_id,
      cohist_misc_type, cohist_misc_descrip,
      cohist_shipdate, cohist_shipvia,
      cohist_ordernumber, cohist_ponumber, cohist_orderdate,
      cohist_doctype, cohist_invcnumber, cohist_invcdate,
      cohist_qtyshipped, cohist_unitprice, cohist_unitcost,
      cohist_salesrep_id, cohist_commission, cohist_commissionpaid,
      cohist_billtoname, cohist_billtoaddress1,
      cohist_billtoaddress2, cohist_billtoaddress3,
      cohist_billtocity, cohist_billtostate, cohist_billtozip,
      cohist_shiptoname, cohist_shiptoaddress1,
      cohist_shiptoaddress2, cohist_shiptoaddress3,
      cohist_shiptocity, cohist_shiptostate, cohist_shiptozip,
      cohist_curr_id, cohist_sequence, cohist_taxtype_id,
      cohist_tax_pcta, cohist_tax_pctb, cohist_tax_pctc,
      cohist_tax_ratea, cohist_tax_rateb, cohist_tax_ratec)
    VALUES
    ( _p.invchead_cust_id, -1, _p.invchead_shipto_id, _r.invcitem_tax_id,
      &#39;M&#39;, (_r.invcitem_number || &#39;-&#39; || _r.invcitem_descrip),
      _p.invchead_shipdate, _p.invchead_shipvia,
      _p.invchead_ordernumber, _p.invchead_ponumber, _p.invchead_orderdate,
      &#39;I&#39;, _p.invchead_invcnumber, _p.invchead_invcdate,
      _r.invcitem_billed, _r.invcitem_price, 0,
      _p.invchead_salesrep_id, (_p.invchead_commission * _r.invcitem_billed * _r.invcitem_price), FALSE,
      _p.invchead_billto_name, _p.invchead_billto_address1,
      _p.invchead_billto_address2, _p.invchead_billto_address3,
      _p.invchead_billto_city, _p.invchead_billto_state, _p.invchead_billto_zipcode,
      _p.invchead_shipto_name, _p.invchead_shipto_address1,
      _p.invchead_shipto_address2, _p.invchead_shipto_address3,
      _p.invchead_shipto_city, _p.invchead_shipto_state,
      _p.invchead_shipto_zipcode, COALESCE(_p.invchead_tax_curr_id,_p.invchead_curr_id),
      _p.sequence, _r.invcitem_taxtype_id,
      _r.invcitem_tax_pcta, _r.invcitem_tax_pctb, _r.invcitem_tax_pctc,
      COALESCE(_r.invcitem_tax_ratea,0.0), COALESCE(_r.invcitem_tax_rateb,0.0), COALESCE(_r.invcitem_tax_ratec,0.0));

  END LOOP;

--  Credit the Freight Account for Freight Charges
  IF (_p.invchead_freight &lt;&gt; 0) THEN
    IF (_p.freightaccntid &lt;&gt; -1) THEN
      _roundedBase = round(currToBase(_p.invchead_curr_id, _p.invchead_freight,
                                      _firstExchDate), 2);
      SELECT insertIntoGLSeries( _p.sequence, &#39;A/R&#39;, &#39;IN&#39;, _p.invchead_invcnumber,
                                 _p.freightaccntid, _roundedBase,
                                 _glDate, _p.invchead_billto_name ) INTO _test;

--  Cache the Freight Amount distributed
        _totalAmount := (_totalAmount + _p.invchead_freight);
        _totalRoundedBase := _totalRoundedBase + _roundedBase;
    ELSE
      _test := -14;
    END IF;

--  If the Freight Account was not found then punt
    IF (_test &lt; 0) THEN
      PERFORM deleteGLSeries(_p.sequence);
      DELETE FROM cohist
       WHERE ((cohist_sequence=_p.sequence)
         AND  (cohist_invcnumber=_p.invchead_invcnumber));
      RETURN _test;
    END IF;

    _taxBaseValue := addTaxToGLSeries(_p.sequence, COALESCE(_p.invchead_tax_curr_id,_p.invchead_curr_id),
				      &#39;A/R&#39;, &#39;IN&#39;, _p.invchead_invcnumber,
				      _glDate, _firstExchDate,
				      _p.invchead_freighttax_id,
				      COALESCE(_p.invchead_freighttax_ratea,0.0),
				      COALESCE(_p.invchead_freighttax_rateb,0.0),
				      COALESCE(_p.invchead_freighttax_ratec,0.0),
                                      (&#39;Tax liability for &#39; || _p.invchead_billto_name));
    IF (_taxBaseValue IS NULL) THEN
      PERFORM deleteGLSeries(_p.sequence);
      DELETE FROM cohist
       WHERE ((cohist_sequence=_p.sequence)
	 AND  (cohist_invcnumber=_p.invchead_invcnumber));
      RETURN -15;
    END IF;
    _totalAmount := _totalAmount + currToCurr(COALESCE(_p.invchead_tax_curr_id,_p.invchead_curr_id),
					      _p.invchead_curr_id,
					      COALESCE(_p.invchead_freighttax_ratea,0.0) +
					      COALESCE(_p.invchead_freighttax_rateb,0.0) +
					      COALESCE(_p.invchead_freighttax_ratec,0.0),
					      _firstExchDate);
    _totalRoundedBase := _totalRoundedBase + _taxBaseValue;

--  Record Sales History for the Freight
    INSERT INTO cohist
    ( cohist_cust_id, cohist_itemsite_id, cohist_shipto_id, cohist_tax_id,
      cohist_misc_type, cohist_misc_descrip,
      cohist_shipdate, cohist_shipvia,
      cohist_ordernumber, cohist_ponumber, cohist_orderdate,
      cohist_doctype, cohist_invcnumber, cohist_invcdate,
      cohist_qtyshipped, cohist_unitprice, cohist_unitcost,
      cohist_salesrep_id, cohist_commission, cohist_commissionpaid,
      cohist_billtoname, cohist_billtoaddress1,
      cohist_billtoaddress2, cohist_billtoaddress3,
      cohist_billtocity, cohist_billtostate, cohist_billtozip,
      cohist_shiptoname, cohist_shiptoaddress1,
      cohist_shiptoaddress2, cohist_shiptoaddress3,
      cohist_shiptocity, cohist_shiptostate, cohist_shiptozip,
      cohist_curr_id, cohist_sequence, cohist_taxtype_id,
      cohist_tax_pcta, cohist_tax_pctb, cohist_tax_pctc,
      cohist_tax_ratea, cohist_tax_rateb, cohist_tax_ratec)
    VALUES
    ( _p.invchead_cust_id, -1, _p.invchead_shipto_id, _p.invchead_freighttax_id,
      &#39;F&#39;, &#39;Freight&#39;,
      _p.invchead_shipdate, _p.invchead_shipvia,
      _p.invchead_ordernumber, _p.invchead_ponumber, _p.invchead_orderdate,
      &#39;I&#39;, _p.invchead_invcnumber, _p.invchead_invcdate,
      1, _p.invchead_freight, _p.invchead_freight,
      _p.invchead_salesrep_id, 0, FALSE,
      _p.invchead_billto_name, _p.invchead_billto_address1,
      _p.invchead_billto_address2, _p.invchead_billto_address3,
      _p.invchead_billto_city, _p.invchead_billto_state, _p.invchead_billto_zipcode,
      _p.invchead_shipto_name, _p.invchead_shipto_address1,
      _p.invchead_shipto_address2, _p.invchead_shipto_address3,
      _p.invchead_shipto_city, _p.invchead_shipto_state,
      _p.invchead_shipto_zipcode, COALESCE(_p.invchead_tax_curr_id,_p.invchead_curr_id),
      _p.sequence, _r.invcitem_taxtype_id,
      _p.invchead_freighttax_pcta, _p.invchead_freighttax_pctb, _p.invchead_freighttax_pctc,
      COALESCE(_p.invchead_freighttax_ratea,0.0), COALESCE(_p.invchead_freighttax_rateb,0.0), COALESCE(_p.invchead_freighttax_ratec,0.0));

  END IF;

--  Credit the Misc. Account for Miscellaneous Charges
  IF (_p.invchead_misc_amount &lt;&gt; 0) THEN
    _roundedBase := round(currToBase(_p.invchead_curr_id, _p.invchead_misc_amount,
                                     _firstExchDate), 2);
    SELECT insertIntoGLSeries( _p.sequence, &#39;A/R&#39;, &#39;IN&#39;, _p.invchead_invcnumber,
                               _p.invchead_misc_accnt_id, _roundedBase,
                               _glDate, _p.invchead_billto_name ) INTO _test;

--  If the Misc. Charges Account was not found then punt
    IF (_test &lt; 0) THEN
      PERFORM deleteGLSeries(_p.sequence);
      DELETE FROM cohist
       WHERE ((cohist_sequence=_p.sequence)
         AND  (cohist_invcnumber=_p.invchead_invcnumber));
      RETURN _test;
    END IF;

--  Cache the Misc. Amount distributed
    _totalAmount := (_totalAmount + _p.invchead_misc_amount);
    _totalRoundedBase := _totalRoundedBase + _roundedBase;

--  Record Sales History for the Misc. Charge
    INSERT INTO cohist
    ( cohist_cust_id, cohist_itemsite_id, cohist_shipto_id, cohist_tax_id,
      cohist_misc_type, cohist_misc_descrip, cohist_misc_id,
      cohist_shipdate, cohist_shipvia,
      cohist_ordernumber, cohist_ponumber, cohist_orderdate,
      cohist_doctype, cohist_invcnumber, cohist_invcdate,
      cohist_qtyshipped, cohist_unitprice, cohist_unitcost,
      cohist_salesrep_id, cohist_commission, cohist_commissionpaid,
      cohist_billtoname, cohist_billtoaddress1,
      cohist_billtoaddress2, cohist_billtoaddress3,
      cohist_billtocity, cohist_billtostate, cohist_billtozip,
      cohist_shiptoname, cohist_shiptoaddress1,
      cohist_shiptoaddress2, cohist_shiptoaddress3,
      cohist_shiptocity, cohist_shiptostate, cohist_shiptozip,
      cohist_curr_id, cohist_sequence )
    VALUES
    ( _p.invchead_cust_id, -1, _p.invchead_shipto_id, _p.invchead_adjtax_id,
      &#39;M&#39;, _p.invchead_misc_descrip, _p.invchead_misc_accnt_id,
      _p.invchead_shipdate, _p.invchead_shipvia,
      _p.invchead_ordernumber, _p.invchead_ponumber, _p.invchead_orderdate,
      &#39;I&#39;, _p.invchead_invcnumber, _p.invchead_invcdate,
      1, _p.invchead_misc_amount, _p.invchead_misc_amount,
      _p.invchead_salesrep_id, 0, FALSE,
      _p.invchead_billto_name, _p.invchead_billto_address1,
      _p.invchead_billto_address2, _p.invchead_billto_address3,
      _p.invchead_billto_city, _p.invchead_billto_state, _p.invchead_billto_zipcode,
      _p.invchead_shipto_name, _p.invchead_shipto_address1,
      _p.invchead_shipto_address2, _p.invchead_shipto_address3,
      _p.invchead_shipto_city, _p.invchead_shipto_state,
      _p.invchead_shipto_zipcode, _p.invchead_curr_id,
      _p.sequence );

  END IF;

  _taxBaseValue := addTaxToGLSeries(_p.sequence, COALESCE(_p.invchead_tax_curr_id,_p.invchead_curr_id),
				    &#39;A/R&#39;, &#39;IN&#39;, _p.invchead_invcnumber,
				    _glDate, _firstExchDate,
				    _p.invchead_adjtax_id,
				    COALESCE(_p.invchead_adjtax_ratea,0.0),
				    COALESCE(_p.invchead_adjtax_rateb,0.0),
				    COALESCE(_p.invchead_adjtax_ratec,0.0),
                                    (&#39;Tax liability for &#39; || _p.invchead_billto_name));
  IF (_taxBaseValue IS NULL) THEN
    PERFORM deleteGLSeries(_p.sequence);
    DELETE FROM cohist
     WHERE ((cohist_sequence=_p.sequence)
       AND  (cohist_invcnumber=_p.invchead_invcnumber));
    RETURN -16;
  END IF;
  _totalAmount := _totalAmount + currToCurr(COALESCE(_p.invchead_tax_curr_id,_p.invchead_curr_id),
					    _p.invchead_curr_id,
					    COALESCE(_p.invchead_adjtax_ratea,0.0) +
					    COALESCE(_p.invchead_adjtax_rateb,0.0) +
					    COALESCE(_p.invchead_adjtax_ratec,0.0),
					    _firstExchDate);
  _totalRoundedBase := _totalRoundedBase + _taxBaseValue;

--  Record Sales History for the Adj Tax
  INSERT INTO cohist
  ( cohist_cust_id, cohist_itemsite_id, cohist_shipto_id, cohist_tax_id,
    cohist_misc_type, cohist_misc_descrip,
    cohist_shipdate, cohist_shipvia,
    cohist_ordernumber, cohist_ponumber, cohist_orderdate,
    cohist_doctype, cohist_invcnumber, cohist_invcdate,
    cohist_qtyshipped, cohist_unitprice, cohist_unitcost,
    cohist_salesrep_id, cohist_commission, cohist_commissionpaid,
    cohist_billtoname, cohist_billtoaddress1,
    cohist_billtoaddress2, cohist_billtoaddress3,
    cohist_billtocity, cohist_billtostate, cohist_billtozip,
    cohist_shiptoname, cohist_shiptoaddress1,
    cohist_shiptoaddress2, cohist_shiptoaddress3,
    cohist_shiptocity, cohist_shiptostate, cohist_shiptozip,
    cohist_curr_id, cohist_sequence, cohist_taxtype_id,
    cohist_tax_pcta, cohist_tax_pctb, cohist_tax_pctc,
    cohist_tax_ratea, cohist_tax_rateb, cohist_tax_ratec)
  VALUES
  ( _p.invchead_cust_id, -1, _p.invchead_shipto_id, _p.invchead_adjtax_id,
    &#39;T&#39;, &#39;Misc Tax Adjustment&#39;,
    _p.invchead_shipdate, _p.invchead_shipvia,
    _p.invchead_ordernumber, _p.invchead_ponumber, _p.invchead_orderdate,
    &#39;I&#39;, _p.invchead_invcnumber, _p.invchead_invcdate,
    1, 0.0, 0.0,
    _p.invchead_salesrep_id, 0, FALSE,
    _p.invchead_billto_name, _p.invchead_billto_address1,
    _p.invchead_billto_address2, _p.invchead_billto_address3,
    _p.invchead_billto_city, _p.invchead_billto_state, _p.invchead_billto_zipcode,
    _p.invchead_shipto_name, _p.invchead_shipto_address1,
    _p.invchead_shipto_address2, _p.invchead_shipto_address3,
    _p.invchead_shipto_city, _p.invchead_shipto_state,
    _p.invchead_shipto_zipcode, COALESCE(_p.invchead_tax_curr_id,_p.invchead_curr_id),
    _p.sequence, _r.invcitem_taxtype_id,
    _p.invchead_adjtax_pcta, _p.invchead_adjtax_pctb, _p.invchead_adjtax_pctc,
    COALESCE(_p.invchead_adjtax_ratea,0.0), COALESCE(_p.invchead_adjtax_rateb,0.0), COALESCE(_p.invchead_adjtax_ratec,0.0));

-- ToDo: handle rounding errors
    _exchGain := currGain(_p.invchead_curr_id, _totalAmount,
                          _firstExchDate, _glDate);
    IF (_exchGain &lt;&gt; 0) THEN
        SELECT insertIntoGLSeries( _p.sequence, &#39;A/R&#39;, &#39;IN&#39;,
                                   _p.invchead_invcnumber, getGainLossAccntId(),
                                   round(_exchGain, 2) * -1,
                                   _glDate, _p.invchead_billto_name ) INTO _test ;
        IF (_test &lt; 0) THEN
          PERFORM deleteGLSeries(_p.sequence);
          DELETE FROM cohist
           WHERE ((cohist_sequence=_p.sequence)
             AND  (cohist_invcnumber=_p.invchead_invcnumber));
          RETURN _test;
        END IF;
    END IF;

--  Debit A/R for the total Amount
  IF (_totalRoundedBase &lt;&gt; 0) THEN
    IF (_p.araccntid != -1) THEN
      PERFORM insertIntoGLSeries( _p.sequence, &#39;A/R&#39;, &#39;IN&#39;, _p.invchead_invcnumber,
                                  _p.araccntid, round(_totalRoundedBase * -1, 2),
                                  _glDate, _p.invchead_billto_name );
    ELSE
      PERFORM deleteGLSeries(_p.sequence);
      DELETE FROM cohist
       WHERE ((cohist_sequence=_p.sequence)
         AND  (cohist_invcnumber=_p.invchead_invcnumber));
      RETURN -17;
    END IF;
  END IF;

--  Commit the GLSeries;
  SELECT postGLSeries(_p.sequence, pJournalNumber) INTO _test;
  IF (_test &lt; 0) THEN
    PERFORM deleteGLSeries(_p.sequence);
    DELETE FROM cohist
     WHERE ((cohist_sequence=_p.sequence)
       AND  (cohist_invcnumber=_p.invchead_invcnumber));
    RETURN _test;
  END IF;

  IF (round(_totalAmount, 2) &lt;&gt; 0) THEN
--  Create the Invoice aropen item
    SELECT nextval(&#39;aropen_aropen_id_seq&#39;) INTO _aropenid;
    INSERT INTO aropen
    ( aropen_id, aropen_username, aropen_journalnumber,
      aropen_open, aropen_posted,
      aropen_cust_id, aropen_ponumber,
      aropen_docnumber, aropen_applyto, aropen_doctype,
      aropen_docdate, aropen_duedate, aropen_distdate, aropen_terms_id,
      aropen_amount, aropen_paid,
      aropen_salesrep_id, aropen_commission_due, aropen_commission_paid,
      aropen_ordernumber, aropen_notes, aropen_cobmisc_id,
      aropen_curr_id )
    VALUES
    ( _aropenid, CURRENT_USER, pJournalNumber,
      TRUE, FALSE,
      _p.invchead_cust_id, _p.invchead_ponumber,
      _p.invchead_invcnumber, _p.invchead_invcnumber, &#39;I&#39;,
      _p.invchead_invcdate, determineDueDate(_p.invchead_terms_id, _p.invchead_invcdate), _glDate, _p.invchead_terms_id,
      round(_totalAmount, 2), 0, 
      _p.invchead_salesrep_id, _commissionDue, FALSE,
      _p.invchead_ordernumber::text, _p.invchead_notes, pInvcheadid,
      _p.invchead_curr_id );
  END IF;

--  Mark the invoice as posted
  UPDATE invchead
  SET invchead_posted=TRUE, invchead_gldistdate=_glDate
  WHERE (invchead_id=pInvcheadid);
 
  IF (_totalAmount &gt; 0) THEN
    -- get a list of allocated CMs
    FOR _r IN SELECT aropen_id,
		     CASE WHEN((aropen_amount - aropen_paid) &gt;=
				currToCurr(aropenco_curr_id, aropen_curr_id,
					  aropenco_amount, aropen_docdate)) THEN
			      currToCurr(aropenco_curr_id, aropen_curr_id,
					 aropenco_amount, aropen_docdate)
			  ELSE (aropen_amount - aropen_paid)
		     END AS balance,
		     aropen_curr_id
                FROM aropenco, aropen, cohead
               WHERE ( (aropenco_aropen_id=aropen_id)
                 AND   (aropenco_cohead_id=cohead_id)
                 AND   (cohead_number=_p.invchead_ordernumber) ) LOOP

      _appliedAmount := _r.balance;
      IF (_totalAmount &lt; currToCurr(_r.aropen_curr_id, _p.invchead_curr_id,
				    _appliedAmount, _firstExchDate)) THEN
        _appliedAmount := _totalAmount;
	_tmpCurrId := _p.invchead_curr_id;
      ELSE
	_tmpCurrId := _r.aropen_curr_id;
      END IF;

      -- ignore if no appliable balance
      IF (_appliedAmount &gt; 0) THEN
        -- create an arcreditapply record linking the source c/m and the target invoice
        -- for an amount that is equal to the balance on the invoice or the balance on
        -- c/m whichever is greater.
        INSERT INTO arcreditapply
              (arcreditapply_source_aropen_id, arcreditapply_target_aropen_id,
	       arcreditapply_amount, arcreditapply_curr_id)
        VALUES(_r.aropen_id, _aropenid, _appliedAmount, _tmpCurrId);

        -- call postARCreditMemoApplication(aropen_id of C/M)
        SELECT postARCreditMemoApplication(_r.aropen_id) into _test;

        -- if no error decrement the balance and contiue on
        IF (_test &gt;= 0) THEN
          _totalAmount := _totalAmount - currToCurr(_tmpCurrId, _p.invchead_curr_id,
						    _appliedAmount, _firstExchDate);
        END IF;
      END IF;
    END LOOP;
  END IF;

  RETURN pJournalNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postinvoices-boolean">postinvoices( boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPostUnprinted ALIAS FOR $1;
BEGIN
  RETURN postInvoices(pPostUnprinted, FALSE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postinvoices-boolean-boolean">postinvoices( boolean, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPostUnprinted ALIAS FOR $1;
  pInclZeros     ALIAS FOR $2;
  _journalNumber INTEGER;
  _counter INTEGER;
  _r RECORD;

BEGIN

  SELECT fetchJournalNumber(&#39;AR-IN&#39;) INTO _journalNumber;

  IF (pInclZeros) THEN
    PERFORM postInvoice(invchead_id, _journalNumber)
    FROM invchead
    WHERE ( (NOT invchead_posted)
     AND (checkInvoiceSitePrivs(invchead_id))
     AND (pPostUnprinted OR invchead_printed) );

  ELSE
    PERFORM postInvoice(invchead_id, _journalNumber)
       FROM invchead LEFT OUTER JOIN invcitem ON (invchead_id=invcitem_invchead_id) LEFT OUTER JOIN item ON (invcitem_item_id=item_id)  
      WHERE((NOT invchead_posted)
        AND (checkInvoiceSitePrivs(invchead_id))
        AND (pPostUnprinted OR invchead_printed))
      GROUP BY invchead_id, invchead_freight, invchead_tax, invchead_misc_amount
     HAVING (COALESCE(SUM(round((invcitem_billed * invcitem_qty_invuomratio) * (invcitem_price /  
              CASE WHEN (item_id IS NULL) THEN 1 
              ELSE invcitem_price_invuomratio END), 2)),0)
             + invchead_freight + invchead_tax + invchead_misc_amount) &gt; 0;
  END IF;

  RETURN _journalNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postinvtrans-integer-text-numeric-text-text-text-text-text-integer-integer-integer">postinvtrans( integer, text, numeric, text, text, text, text, text, integer, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN postInvTrans($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, CURRENT_TIMESTAMP, NULL);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postinvtrans-integer-text-numeric-text-text-text-text-text-integer-integer-integer-timestamp-with-time-zone">postinvtrans( integer, text, numeric, text, text, text, text, text, integer, integer, integer, timestamp with time zone )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN postInvTrans($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, NULL);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postinvtrans-integer-text-numeric-text-text-text-text-text-integer-integer-integer-timestamp-with-time-zone-numeric">postinvtrans( integer, text, numeric, text, text, text, text, text, integer, integer, integer, timestamp with time zone, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid	ALIAS FOR $1;
  pTransType	ALIAS FOR $2;
  pQty		ALIAS FOR $3;
  pModule	ALIAS FOR $4;
  pOrderType	ALIAS FOR $5;
  pOrderNumber	ALIAS FOR $6;
  pDocNumber	ALIAS FOR $7;
  pComments	ALIAS FOR $8;
  pDebitid	ALIAS FOR $9;
  pCreditid	ALIAS FOR $10;
  pItemlocSeries ALIAS FOR $11;
  _timestamp    TIMESTAMP WITH TIME ZONE := $12;
  pCostOvrld    ALIAS FOR $13;
  _creditid	 INTEGER;
  _debitid	 INTEGER;
  _glreturn	 INTEGER;
  _invhistid	 INTEGER;
  _r		 RECORD;
  _sense	 INTEGER;	-- direction in which to adjust inventory QOH
  _t		 RECORD;
  _xferwhsid	 INTEGER;

BEGIN

  SELECT CASE WHEN(itemsite_costmethod=&#39;A&#39;) THEN COALESCE(abs(pCostOvrld / pQty), avgcost(itemsite_id))
              ELSE stdCost(itemsite_item_id)
         END AS cost,
         itemsite_costmethod,
         itemsite_qtyonhand,
	 itemsite_warehous_id,
         ( (item_type IN (&#39;R&#39;,&#39;J&#39;)) OR (itemsite_controlmethod = &#39;N&#39;) ) AS nocontrol,
         (itemsite_controlmethod IN (&#39;L&#39;, &#39;S&#39;)) AS lotserial,
         (itemsite_loccntrl) AS loccntrl,
         (((NOT itemsite_controlmethod IN (&#39;L&#39;, &#39;S&#39;)) AND (NOT itemsite_loccntrl)) OR (pItemlocseries = 0)) AS post,
         itemsite_freeze AS frozen INTO _r
  FROM itemsite, item
  WHERE ( (itemsite_item_id=item_id)
    AND  (itemsite_id=pItemsiteid) );

  --  Post the Inventory Transactions
  IF (NOT _r.nocontrol) THEN

    SELECT NEXTVAL(&#39;invhist_invhist_id_seq&#39;) INTO _invhistid;

    IF ((_timestamp IS NULL) OR (CAST(_timestamp AS date)=CURRENT_DATE)) THEN
      _timestamp := CURRENT_TIMESTAMP;
    END IF;

    IF (pTransType = &#39;TS&#39; OR pTransType = &#39;TR&#39;) THEN
      SELECT * INTO _t FROM tohead WHERE (tohead_number=pOrderNumber);
      IF (pTransType = &#39;TS&#39;) THEN
	_xferwhsid := CASE
	    WHEN (_t.tohead_src_warehous_id=_r.itemsite_warehous_id) THEN _t.tohead_trns_warehous_id
	    WHEN (_t.tohead_trns_warehous_id=_r.itemsite_warehous_id AND pComments ~* &#39;recall&#39;) THEN _t.tohead_src_warehous_id
	    WHEN (_t.tohead_trns_warehous_id=_r.itemsite_warehous_id) THEN _t.tohead_dest_warehous_id
	    WHEN (_t.tohead_dest_warehous_id=_r.itemsite_warehous_id) THEN _t.tohead_trns_warehous_id
	    ELSE NULL
	    END;
      ELSIF (pTransType = &#39;TR&#39;) THEN
	_xferwhsid := CASE
	    WHEN (_t.tohead_src_warehous_id=_r.itemsite_warehous_id) THEN _t.tohead_trns_warehous_id
	    WHEN (_t.tohead_trns_warehous_id=_r.itemsite_warehous_id AND pComments ~* &#39;recall&#39;) THEN _t.tohead_dest_warehous_id
	    WHEN (_t.tohead_trns_warehous_id=_r.itemsite_warehous_id) THEN _t.tohead_src_warehous_id
	    WHEN (_t.tohead_dest_warehous_id=_r.itemsite_warehous_id) THEN _t.tohead_trns_warehous_id
	    ELSE NULL
	    END;
      END IF;
    END IF;


    -- increase inventory: AD RM RT RP RR RS RX RB TR
    -- decrease inventory: IM IB IT SH SI EX
    -- TS and TR are special: shipShipment and recallShipment should not change
    -- QOH at the Transfer Order src whs (as this was done by issueToShipping)
    -- but postReceipt should change QOH at the transit whs
    IF (pTransType=&#39;TS&#39;) THEN
      _sense := CASE WHEN (SELECT tohead_trns_warehous_id=_r.itemsite_warehous_id
			   FROM tohead
			   WHERE (tohead_number=pOrderNumber)) THEN -1
			   ELSE 0
			   END;
    ELSIF (pTransType=&#39;TR&#39;) THEN
      _sense := CASE WHEN (SELECT tohead_src_warehous_id=_r.itemsite_warehous_id
			   FROM tohead
			   WHERE (tohead_number=pOrderNumber)) THEN 0
			   ELSE 1
			   END;
    ELSIF (pTransType IN (&#39;IM&#39;, &#39;IB&#39;, &#39;IT&#39;, &#39;SH&#39;, &#39;SI&#39;, &#39;EX&#39;)) THEN
      _sense := -1;

    ELSE
      _sense := 1;
    END IF;

    IF((_r.itemsite_costmethod=&#39;A&#39;) AND (_r.itemsite_qtyonhand + (_sense * pQty)) &lt; 0) THEN
      -- Can not let average costed itemsites go negative
      RAISE EXCEPTION &#39;This transaction will cause an Average Costed item to go negative which is not allowed.&#39;;
      RETURN -2;
    END IF;

    INSERT INTO invhist
    ( invhist_id, invhist_itemsite_id, invhist_transtype, invhist_transdate,
      invhist_invqty, invhist_qoh_before,
      invhist_qoh_after,
      invhist_costmethod, invhist_value_before, invhist_value_after,
      invhist_ordtype, invhist_ordnumber, invhist_docnumber, invhist_comments,
      invhist_invuom, invhist_unitcost, invhist_xfer_warehous_id, invhist_posted )
    SELECT
      _invhistid, itemsite_id, pTransType, _timestamp,
      pQty, itemsite_qtyonhand,
      (itemsite_qtyonhand + (_sense * pQty)),
      itemsite_costmethod, itemsite_value, itemsite_value + (_r.cost * _sense * pQty),
      pOrderType, pOrderNumber, pDocNumber, pComments,
      uom_name, _r.cost, _xferwhsid, FALSE
    FROM itemsite, item, uom
    WHERE ( (itemsite_item_id=item_id)
     AND (item_inv_uom_id=uom_id)
     AND (itemsite_id=pItemsiteid) );

    --  If not lot/serial/location controlled or frozen Adjust QOH now, 
    --  otherwise it will happen later
    IF ((_r.post) AND (NOT _r.frozen)) THEN
      PERFORM postInvHist(_invhistid);
    END IF;

    IF (pCreditid IN (SELECT accnt_id FROM accnt)) THEN
      _creditid = pCreditid;
    ELSE
      SELECT warehous_default_accnt_id INTO _creditid
      FROM itemsite, warehous
      WHERE ( (itemsite_warehous_id=warehous_id)
        AND  (itemsite_id=pItemsiteid) );
    END IF;

    IF (pDebitid IN (SELECT accnt_id FROM accnt)) THEN
      _debitid = pDebitid;
    ELSE
      SELECT warehous_default_accnt_id INTO _debitid
      FROM itemsite, warehous
      WHERE ( (itemsite_warehous_id=warehous_id)
        AND  (itemsite_id=pItemsiteid) );
    END IF;

--  Post the G/L Transaction
    IF (_creditid &lt;&gt; _debitid) THEN
      SELECT insertGLTransaction(pModule, pOrderType, pOrderNumber, pComments,
				 _creditid, _debitid, _invhistid,
				 (_r.cost * pQty), _timestamp::DATE, _r.post) INTO _glreturn;
    END IF;

    --  Distribute this if this itemsite is controlled
    IF ( (_r.lotserial OR _r.loccntrl)
        AND (pItemlocSeries &gt; 0) ) THEN

      INSERT INTO itemlocdist
      ( itemlocdist_itemsite_id, itemlocdist_source_type,
        itemlocdist_reqlotserial,
        itemlocdist_distlotserial,
        itemlocdist_expiration,
        itemlocdist_qty,
        itemlocdist_series, itemlocdist_invhist_id,
        itemlocdist_order_type, itemlocdist_order_id )
      SELECT pItemsiteid, &#39;O&#39;,
             (((pQty * _sense) &gt; 0)  AND _r.lotserial),
	     ((pQty * _sense) &lt; 0),
             endOfTime(),
             (_sense * pQty),
             pItemlocSeries, _invhistid,
             pOrderType, 
             CASE 
               WHEN pOrderType=&#39;SO&#39; THEN
                 getSalesLineItemId(pOrderNumber)
               ELSE NULL
             END;

    -- These records will be used for posting G/L transactions to trial balance after records committed.
    -- If we try to do it now concurrency locking prevents any transacitons while
    -- user enters item distribution information.  Cant have that.
      INSERT INTO itemlocpost ( itemlocpost_glseq, itemlocpost_itemlocseries)
      VALUES ( _glreturn, pItemlocSeries );
    END IF;

    RETURN _invhistid;
  ELSE
    RETURN -1;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postitemlocseries-integer">postitemlocseries( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemlocseries ALIAS FOR $1;
  _result INTEGER;

BEGIN

  PERFORM postIntoTrialBalance(itemlocpost_glseq)
  FROM itemlocpost
  WHERE (itemlocpost_itemlocseries=pItemlocseries);

  DELETE FROM itemlocpost WHERE (itemlocpost_itemlocseries=pItemlocseries);

  RETURN TRUE;
  
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postmessage-text-text">postmessage( text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUsername ALIAS FOR $1;
  pText ALIAS FOR $2;
  _msgid INTEGER;

BEGIN

--  Validate the passed username
  PERFORM usr_id
  FROM usr
  WHERE (usr_username=pUsername);
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  SELECT NEXTVAL(&#39;msg_msg_id_seq&#39;) INTO _msgid;
  INSERT INTO msg
  (msg_id, msg_posted, msg_scheduled, msg_expires, msg_username, msg_text)
  VALUES
  (_msgid, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, endOfTime(), CURRENT_USER, pText);

  INSERT INTO msguser
  ( msguser_msg_id, msguser_username )
  VALUES
  ( _msgid, pUsername );

  RETURN _msgid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postmessage-timestamp-without-time-zone-timestamp-without-time-zone-text">postmessage( timestamp without time zone, timestamp without time zone, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pScheduled ALIAS FOR $1;
  pExpires ALIAS FOR $2;
  pText ALIAS FOR $3;
  _msgid INTEGER;

BEGIN

  SELECT NEXTVAL(&#39;msg_msg_id_seq&#39;) INTO _msgid;
  INSERT INTO msg
  (msg_id, msg_posted, msg_scheduled, msg_expires, msg_username, msg_text)
  VALUES
  (_msgid, CURRENT_TIMESTAMP, pScheduled, pExpires, CURRENT_USER, pText);

  INSERT INTO msguser
  ( msguser_msg_id, msguser_username )
  SELECT _msgid, usr_username
  FROM usr
  WHERE (usr_username &lt;&gt; CURRENT_USER);

  RETURN _msgid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postmessage-timestamp-without-time-zone-timestamp-without-time-zone-text-text">postmessage( timestamp without time zone, timestamp without time zone, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pScheduled ALIAS FOR $1;
  pExpires ALIAS FOR $2;
  pUsername ALIAS FOR $3;
  pText ALIAS FOR $4;
  _msgid INTEGER;

BEGIN

--  Validate the passed username
  PERFORM usr_id
  FROM usr
  WHERE (usr_username=pUsername);
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  SELECT NEXTVAL(&#39;msg_msg_id_seq&#39;) INTO _msgid;
  INSERT INTO msg
  (msg_id, msg_posted, msg_scheduled, msg_expires, msg_username, msg_text)
  VALUES
  (_msgid, CURRENT_TIMESTAMP, pScheduled, pExpires, CURRENT_USER, pText);

  INSERT INTO msguser
  ( msguser_msg_id, msguser_username )
  VALUES
  ( _msgid, pUsername );

  RETURN _msgid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postmiscconsumption-integer-numeric-integer-integer-integer-numeric-text-text">postmiscconsumption( integer, numeric, integer, integer, integer, numeric, text, text )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pQty ALIAS FOR $2;
  pParentItemid ALIAS FOR $3;
  pWIPAccntid ALIAS FOR $4;
  pItemlocSeries ALIAS FOR $5;
  pCarryCost ALIAS FOR $6;
  pDocNumber ALIAS FOR $7;
  pComments ALIAS FOR $8;
  _cost NUMERIC;
  _r RECORD;

BEGIN

  IF ( ( SELECT (item_type = &#39;F&#39;)
         FROM itemsite, item
         WHERE ( (itemsite_item_id=item_id)
          AND (itemsite_id=pItemsiteid) ) ) ) THEN

    _cost := 0;

    FOR _r IN SELECT cs.itemsite_id AS c_itemsite_id,
                     roundQty(item_fractional, (pQty * itemuomtouom(bomitem_item_id, bomitem_uom_id, NULL, bomitem_qtyper * (1 + bomitem_scrap)))) AS qty
              FROM itemsite AS cs, itemsite AS ps, item, bomitem
              WHERE ( (cs.itemsite_item_id=item_id)
               AND (cs.itemsite_warehous_id=ps.itemsite_warehous_id)
               AND (bomitem_parent_item_id=ps.itemsite_item_id)
               AND (bomitem_item_id=cs.itemsite_item_id)
               AND (bomitem_rev_id=getActiveRevId(&#39;BOM&#39;,bomitem_parent_item_id))
               AND (ps.itemsite_id=pItemsiteid) 
               AND (CURRENT_DATE BETWEEN bomitem_effective AND bomitem_expires) )
              ORDER BY bomitem_seqnumber LOOP

      SELECT postMiscConsumption( _r.c_itemsite_id, _r.qty, pParentItemid,
                                  pWIPAccntid, pItemlocSeries, _cost, pDocNumber, pComments ) INTO _cost;

    END LOOP;
  ELSE
    PERFORM postInvTrans( itemsite_id, &#39;IM&#39;, pQty,
                          &#39;W/O&#39;, &#39;WO&#39;, &#39;Misc.&#39;, pDocNumber,
                          (&#39;Consumed during Misc. Production of Item Number &#39; || item_number || &#39;\n&#39; || pComments),
                          pWIPAccntid, costcat_asset_accnt_id, pItemlocSeries )
    FROM itemsite, costcat, item
    WHERE ( (itemsite_costcat_id=costcat_id)
     AND (itemsite_id=pItemsiteid)
     AND (item_id=pParentItemid) );

    SELECT (pCarryCost + (stdcost(itemsite_item_id) * pQty)) INTO _cost
    FROM itemsite
    WHERE (itemsite_id=pItemsiteid);
  END IF;

  RETURN _cost;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postmisccount-integer-numeric-text">postmisccount( integer, numeric, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pQty ALIAS FOR $2;
  pComments ALIAS FOR $3;
  _invcntid INTEGER;
  _result INTEGER;

BEGIN

  SELECT invcnt_id INTO _invcntid
  FROM invcnt
  WHERE ( (NOT invcnt_posted)
   AND (invcnt_itemsite_id=pItemsiteid) );

  IF (_invcntid IS NULL) THEN
    _invcntid := NEXTVAL(&#39;invcnt_invcnt_id_seq&#39;);

    INSERT INTO invcnt
     ( invcnt_id, invcnt_itemsite_id, invcnt_tagdate,
       invcnt_qoh_before, invcnt_qoh_after,
       invcnt_tag_usr_id, invcnt_cntdate, invcnt_cnt_usr_id,
       invcnt_postdate, invcnt_post_usr_id, invcnt_posted,
       invcnt_priority, invcnt_comments )
    SELECT _invcntid, pItemsiteid, now(),
           itemsite_qtyonhand, pQty,
           currentUserId(), now(), currentUserId(),
           now(), currentUserId(), FALSE,
           FALSE, pComments
    FROM itemsite
    WHERE (itemsite_id=pItemsiteid);

    SELECT postCountTag(_invcntid, FALSE) INTO _result;
    IF (_result &lt; 0) THEN
      DELETE FROM invcnt
      WHERE (invcnt_id=_invcntid);
    END IF;

    RETURN _result;
  ELSE
    RETURN -2;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postmiscproduction-integer-numeric-boolean-text-text">postmiscproduction( integer, numeric, boolean, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pQty ALIAS FOR $2;
  pBackflush ALIAS FOR $3;
  pDocNumber ALIAS FOR $4;
  pComments ALIAS FOR $5;
  _p RECORD;
  _c RECORD;
  _invhistid INTEGER;
  _itemlocSeries INTEGER;
  _parentQty NUMERIC;
  _qty NUMERIC;
  _laborAndOverheadCost	NUMERIC;
  _machineOverheadCost NUMERIC;
  _componentCost NUMERIC := 0;
  _itemNumber TEXT;

BEGIN

  SELECT roundQty(item_fractional, pQty) INTO _parentQty
  FROM itemsite, item
  WHERE ( (itemsite_item_id=item_id)
   AND (itemsite_id=pItemsiteid) );

--  Cache some item and itemsite parameters
  SELECT item_number, item_id,
         itemsite_loccntrl, itemsite_controlmethod,
         accnt_id AS parentWIP INTO _p
  FROM itemsite, item, costcat, accnt
  WHERE ( (itemsite_item_id=item_id)
   AND (itemsite_id=pItemsiteid)
   AND (itemsite_costcat_id=costcat_id)
   AND (costcat_wip_accnt_id=accnt_id) );
  IF (NOT FOUND) THEN
    RETURN -1;
  END IF;

  SELECT NEXTVAL(&#39;itemloc_series_seq&#39;) INTO _itemlocSeries;
  SELECT postInvTrans( pItemsiteid, &#39;RM&#39;, _parentQty,
                       &#39;W/O&#39;, &#39;WO&#39;, &#39;Misc.&#39;, pDocNumber,
                       (&#39;Receive from Misc. Production for Item Number &#39; || _p.item_number || &#39;\n&#39; || pComments),
                       costcat_asset_accnt_id, costcat_wip_accnt_id, _itemlocSeries ) INTO _invhistid
  FROM itemsite, costcat
  WHERE ( (itemsite_costcat_id=costcat_id)
   AND (itemsite_id=pItemsiteid) );
  
  IF (pBackflush) THEN
    FOR _c IN SELECT cs.itemsite_id AS c_itemsite_id,
                     cs.itemsite_item_id AS c_item_id,
                     cs.itemsite_loccntrl AS c_itemsite_loccntrl,
                     cs.itemsite_controlmethod AS c_itemsite_controlmethod,
                     cs.itemsite_controlmethod AS c_controlmethod,
                     roundQty(item_fractional, (_parentQty * itemuomtouom(bomitem_item_id, bomitem_uom_id, NULL, bomitem_qtyper * (1 + bomitem_scrap)))) AS qty
              FROM itemsite AS ps, itemsite AS cs, item, bomitem
              WHERE ((cs.itemsite_item_id=item_id)
               AND (ps.itemsite_item_id=bomitem_parent_item_id)
               AND (bomitem_item_id=item_id)
               AND (bomitem_rev_id=getActiveRevId(&#39;BOM&#39;,bomitem_parent_item_id))
               AND (ps.itemsite_warehous_id=cs.itemsite_warehous_id)
               AND (ps.itemsite_id=pItemsiteid)
               AND (CURRENT_DATE BETWEEN bomitem_effective AND bomitem_expires))
              ORDER BY bomitem_seqnumber LOOP
  
      _componentCost := (_componentCost + postMiscConsumption( _c.c_itemsite_id, _c.qty,
                                                       _p.item_id, _p.parentWIP, _itemlocSeries,
                                                       0, pDocNumber, pComments ) );
    END LOOP;
  END IF;

  IF (fetchMetricBool(&#39;Routings&#39;)) THEN
    _laborAndOverheadCost := (directLaborCost(_p.item_id) + overheadCost(_p.item_id)) * _parentQty;

    PERFORM insertGLTransaction(&#39;W/O&#39;, &#39;WO&#39;, &#39;Misc.&#39;,
	      (&#39;Direct Labor And Overhead Costs of Post to Misc. Production for Item Number &#39; || _p.item_number),
	      costcat_laboroverhead_accnt_id, costcat_wip_accnt_id, _invhistid,
	      _laborAndOverheadCost, CURRENT_DATE)
    FROM itemsite, costcat
    WHERE ((itemsite_costcat_id=costcat_id)
      AND  (itemsite_id=pItemsiteid));

    IF fetchmetrictext(&#39;TrackMachineOverhead&#39;) = &#39;M&#39; THEN
      _machineOverheadCost := machineoverheadCost(_p.item_id) * _parentQty;
      PERFORM insertGLTransaction(&#39;W/O&#39;, &#39;WO&#39;, &#39;Misc.&#39;,
	      (&#39;Machine Overhead Costs of Post to Misc. Production for Item Number &#39; || _p.item_number),
	      costcat_laboroverhead_accnt_id, costcat_wip_accnt_id, _invhistid,
	      _machineOverheadCost, CURRENT_DATE)
      FROM itemsite, costcat
      WHERE ((itemsite_costcat_id=costcat_id)
      AND  (itemsite_id=pItemsiteid));
    ELSE
      _machineOverheadCost := 0;
    END IF;
  ELSE
    _laborAndOverheadCost := 0;
    _machineOverheadCost := 0;
  END IF;

--  Distribute to G/L - create Cost Variance, debit WIP
  PERFORM insertGLTransaction( &#39;W/O&#39;, &#39;WO&#39;, &#39;Misc.&#39;,
                               (&#39;Cost Variance of Post to Misc. Production for Item Number &#39; || _p.item_number),
                               costcat_invcost_accnt_id, costcat_wip_accnt_id, _invhistid,
			       stdcost(_p.item_id) * _parentQty - _laborAndOverheadCost - _machineOverheadCost - _componentCost,
                               CURRENT_DATE )
  FROM itemsite, costcat
  WHERE ( (itemsite_costcat_id=costcat_id)
   AND (itemsite_id=pItemsiteid) );

  RETURN _itemlocSeries;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postpogltransactions">postpogltransactions(  )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

  UPDATE gltrans
  SET gltrans_exported=TRUE
  WHERE ( (NOT gltrans_exported)
   AND (gltrans_source=&#39;A/P&#39;)
   AND (gltrans_doctype IN (&#39;VO&#39;)) );

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postporeceipt-integer-integer">postporeceipt( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN postReceipt($1, $2);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postporeceipts-integer">postporeceipts( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN postReceipts(&#39;PO&#39;, $1, NULL);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postporeturncreditmemo-integer">postporeturncreditmemo( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPorejectId ALIAS FOR $1;

BEGIN
  RETURN postPoReturnCreditMemo(pPorejectId, NULL);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postporeturncreditmemo-integer-numeric">postporeturncreditmemo( integer, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPorejectId ALIAS FOR $1;
  pAmount ALIAS FOR $2;
  _p RECORD;
  _a RECORD;
  _itemsiteId INTEGER;
  _docNumber TEXT;
  _sequence INTEGER;
  _journalNumber INTEGER;
  _apopenid INTEGER;
  _exchGainItem NUMERIC;
  _itemAmount_base NUMERIC;
  _itemAmount NUMERIC;
  _glseriesTotal NUMERIC;
  _tmpTotal NUMERIC;
  _test INTEGER;
  _exchDate DATE;

BEGIN
--Set things up
  SELECT NEXTVAL(&#39;apopen_apopen_id_seq&#39;) INTO _apopenid;
  SELECT fetchGLSequence() INTO _sequence;
  SELECT fetchJournalNumber(&#39;AP-MISC&#39;) INTO _journalNumber;
  SELECT fetchapmemonumber() INTO _docNumber;
  _glseriesTotal := 0;

--Get poreject data
  SELECT pohead_vend_id, pohead_number, pohead_curr_id, pohead_orderdate,
         poitem_id, poitem_itemsite_id,poitem_expcat_id,
        itemsite_costcat_id, poreject_qty, poreject_date,
        (&#39;Return of Item &#39; || COALESCE(item_number,poitem_vend_item_number)
           || &#39;, qty. &#39; || formatqty(poreject_qty)) AS notes,
        poreject_value AS value,
        currToBase(pohead_curr_id,(poitem_unitprice * poreject_qty),CURRENT_DATE) AS itemAmount_base,
        (poitem_unitprice * poreject_qty) AS itemAmount
        INTO _p
  FROM pohead, poreject, poitem
        LEFT OUTER JOIN itemsite ON (poitem_itemsite_id=itemsite_id)
        LEFT OUTER JOIN item ON (itemsite_item_id=item_id)
  WHERE ((poreject_poitem_id=poitem_id)
  AND (pohead_id=poitem_pohead_id)
  AND (poreject_id=pPorejectId));

  _itemAmount := _p.itemAmount;
  _itemAmount_base := _p.itemAmount_base;
  IF (pAmount IS NOT NULL) THEN
    _itemAmount := pAmount;
    _itemAmount_base := currToBase(_p.pohead_curr_id, pAmount, CURRENT_DATE);
  END IF;
  

--  Grab the G/L Accounts
  IF (_p.poitem_itemsite_id = -1) THEN
    SELECT pp.accnt_id AS pp_accnt_id,
           lb.accnt_id AS lb_accnt_id INTO _a
    FROM expcat, accnt AS pp, accnt AS lb
    WHERE ( (expcat_purchprice_accnt_id=pp.accnt_id)
     AND (expcat_liability_accnt_id=lb.accnt_id)
     AND (expcat_id=_p.poitem_expcat_id) );
    IF (NOT FOUND) THEN
      RAISE EXCEPTION &#39;Cannot Post Credit Memo due to unassigned G/L Accounts.&#39;;
    END IF;
  ELSE
    SELECT pp.accnt_id AS pp_accnt_id,
           lb.accnt_id AS lb_accnt_id INTO _a
    FROM costcat, accnt AS pp, accnt AS lb
    WHERE ( (costcat_purchprice_accnt_id=pp.accnt_id)
     AND (costcat_liability_accnt_id=lb.accnt_id)
     AND (costcat_id=_p.itemsite_costcat_id) );
    IF (NOT FOUND) THEN
      RAISE EXCEPTION &#39;Cannot Post Credit Memo due to unassigned G/L Accounts.&#39;;
    END IF;
  END IF;

--  Distribute from the clearing account
    PERFORM insertIntoGLSeries( _sequence, &#39;A/P&#39;, &#39;CM&#39;, _docNumber,
                _a.lb_accnt_id,
                round(_p.value, 2),
                current_date, _p.notes );
    _glseriesTotal := _glseriesTotal + round(_p.value, 2);

--  Distribute the remaining variance to the Purchase Price Variance account
    IF (round(_itemAmount_base, 2) &lt;&gt; round(_p.value, 2)) THEN
      _tmpTotal := round(_itemAmount_base, 2) - round(_p.value, 2);
      PERFORM insertIntoGLSeries( _sequence, &#39;A/P&#39;, &#39;CM&#39;, _docNumber,
                                  _a.pp_accnt_id,
                                  _tmpTotal,
                                  current_date, _p.notes );
        _glseriesTotal := _glseriesTotal + _tmpTotal;
    END IF;

--  Post the reject item for this P/O Item as Invoiced
    UPDATE poreject
    SET poreject_invoiced=TRUE
    WHERE poreject_id=pPorejectId;

--  Update the qty vouchered field
    UPDATE poitem
       SET poitem_qty_vouchered = (poitem_qty_vouchered - _p.poreject_qty)
     WHERE (poitem_id=_p.poitem_id);

--  Post to A/P

  SELECT insertIntoGLSeries( _sequence, &#39;A/P&#39;, &#39;CM&#39;, _docNumber,
                             accnt_id, round(_itemAmount_base, 2) *-1,
                             current_date, _p.notes ) INTO _test
  FROM accnt
  WHERE (findAPAccount(_p.pohead_vend_id)=accnt_id);
  IF (NOT FOUND) THEN
    RAISE EXCEPTION &#39;Cannot Post Credit Memo due to an unassigned A/P Account.&#39;;
  END IF;


-- Clean up loose ends

  _glseriesTotal := _glseriesTotal + round(_itemAmount_base, 2)*-1;

  IF (round(_glseriesTotal, 2) != 0) THEN
        PERFORM insertIntoGLSeries(_sequence, &#39;A/P&#39;, &#39;CM&#39;,
            &#39;Currency Exchange Rounding - &#39; || _docNumber,
            getGainLossAccntId(), round(_glseriesTotal, 2) * -1,
           current_date, _p.notes);
  END IF;

--  Post it all
  PERFORM postGLSeries(_sequence, _journalNumber);

  INSERT INTO apopen
  ( apopen_id, apopen_username, apopen_journalnumber,
    apopen_vend_id, apopen_docnumber, apopen_doctype, apopen_ponumber,
    apopen_docdate, apopen_duedate, apopen_distdate, apopen_terms_id,
    apopen_amount, apopen_paid, apopen_open, apopen_notes, apopen_accnt_id, apopen_curr_id,
    apopen_closedate )
  VALUES
  ( _apopenid, CURRENT_USER, _journalNumber,
    _p.pohead_vend_id, _docNumber, &#39;C&#39;, _p.pohead_number,
    CURRENT_DATE, CURRENT_DATE, CURRENT_DATE, -1,
    round(_itemAmount, 2), 0, (round(_itemAmount, 2) &lt;&gt; 0), _p.notes, -1, _p.pohead_curr_id,
    CASE WHEN (round(_itemAmount, 2) = 0) THEN _p.poreject_date END );

  RETURN _journalNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postporeturns-integer">postporeturns( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPoheadid ALIAS FOR $1;
  _itemlocSeries INTEGER;
  _p RECORD;
  _returnval	INTEGER;

BEGIN

  _itemlocSeries := 0;

  SELECT postPoReturns(pPoheadid,false) INTO _itemlocseries;

  RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postporeturns-integer-boolean">postporeturns( integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPoheadid ALIAS FOR $1;
  pCreateMemo ALIAS FOR $2;
  _itemlocSeries INTEGER;
  _p RECORD;
  _returnval	INTEGER;

BEGIN

  _itemlocSeries := 0;

  FOR _p IN SELECT pohead_number, pohead_curr_id, poreject_id,
		   poreject_poitem_id, poitem_id, poitem_expcat_id,
		   currToBase(pohead_curr_id, poitem_unitprice,
			      pohead_orderdate) AS poitem_unitprice_base,
                   COALESCE(itemsite_id, -1) AS itemsiteid, poitem_invvenduomratio,
		   COALESCE(stdcost(itemsite_id),currToBase(pohead_curr_id,poitem_unitprice,current_date)) AS stdcost,
                   SUM(poreject_qty) AS totalqty,
                   itemsite_item_id
            FROM poreject, pohead, poitem 
		LEFT OUTER JOIN itemsite ON (poitem_itemsite_id=itemsite_id)
            WHERE ( (poreject_poitem_id=poitem_id)
             AND (poitem_pohead_id=pohead_id)
             AND (pohead_id=pPoheadid)
             AND (NOT poreject_posted) )
            GROUP BY poreject_id, pohead_number, poreject_poitem_id, poitem_id,
		     poitem_expcat_id, poitem_unitprice, pohead_curr_id,
		     pohead_orderdate, itemsite_id, poitem_invvenduomratio,
                    itemsite_item_id LOOP

    IF (_p.itemsiteid = -1) THEN
        SELECT insertGLTransaction( &#39;S/R&#39;, &#39;PO&#39;, _p.pohead_number, &#39;Return Non-Inventory to P/O&#39;,
                                     expcat_liability_accnt_id, expcat_exp_accnt_id, -1,
                                     round(_p.poitem_unitprice_base * _p.totalqty * -1, 2),
				     CURRENT_DATE ) INTO _returnval
        FROM expcat
        WHERE (expcat_id=_p.poitem_expcat_id);

        UPDATE poreject
        SET poreject_posted=TRUE, poreject_value= round(_p.poitem_unitprice_base * _p.totalqty, 2)
        WHERE (poreject_id=_p.poreject_id);

    ELSE
      IF (_itemlocSeries = 0) THEN
        SELECT NEXTVAL(&#39;itemloc_series_seq&#39;) INTO _itemlocSeries;
      END IF;

      SELECT postInvTrans( itemsite_id, &#39;RP&#39;, (_p.totalqty * _p.poitem_invvenduomratio * -1),
                           &#39;S/R&#39;, &#39;PO&#39;, _p.pohead_number, &#39;&#39;, &#39;Return Inventory to P/O&#39;,
                           costcat_asset_accnt_id, costcat_liability_accnt_id, _itemlocSeries, CURRENT_TIMESTAMP, round(_p.poitem_unitprice_base * _p.totalqty * -1, 2) ) INTO _returnval
      FROM itemsite, costcat
      WHERE ( (itemsite_costcat_id=costcat_id)
       AND (itemsite_id=_p.itemsiteid) );

      UPDATE poreject
      SET poreject_posted=TRUE, poreject_value=(stdcost(_p.itemsite_item_id) *_p.totalqty * _p.poitem_invvenduomratio)
      WHERE (poreject_id=_p.poreject_id);

    END IF;

    IF (_returnval &lt; 0) THEN
      RETURN _returnval;
    END IF;


    UPDATE poitem
    SET poitem_qty_returned=(poitem_qty_returned + _p.totalqty),
	poitem_status=&#39;O&#39;
    WHERE (poitem_id=_p.poitem_id);

    IF (pCreateMemo) THEN
	SELECT postPoReturnCreditMemo(_p.poreject_id) INTO _returnval;
    END IF;

    IF (_returnval &lt; 0) THEN
      RETURN _returnval;
    END IF;

  END LOOP;

  RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postproduction-integer-numeric-boolean-boolean">postproduction( integer, numeric, boolean, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid ALIAS FOR $1;
  pQty ALIAS FOR $2;
  pBackflush ALIAS FOR $3;
  pBackflushOperations ALIAS FOR $4;
  _itemlocSeries INTEGER;

BEGIN

  SELECT postProduction( pWoid, pQty, pBackflush,
                         pBackflushOperations, 0, &#39;&#39;, &#39;&#39; ) INTO _itemlocSeries;

  RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postproduction-integer-numeric-boolean-boolean-integer">postproduction( integer, numeric, boolean, boolean, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid ALIAS FOR $1;
  pQty ALIAS FOR $2;
  pBackflush ALIAS FOR $3;
  pBackflushOperations ALIAS FOR $4;
  pItemlocSeries ALIAS FOR $5;

BEGIN

  RETURN postProduction(pWoid, pQty, pBackflush, pBackflushOperations, pItemlocSeries, &#39;&#39;, &#39;&#39;);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postproduction-integer-numeric-boolean-boolean-integer-text-text">postproduction( integer, numeric, boolean, boolean, integer, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid ALIAS FOR $1;
  pQty ALIAS FOR $2;
  pBackflush ALIAS FOR $3;
  pBackflushOperations ALIAS FOR $4;
  pItemlocSeries ALIAS FOR $5;
  pSuUser ALIAS FOR $6;
  pRnUser ALIAS FOR $7;
  _woNumber TEXT;
  _invhistid INTEGER;
  _itemlocSeries INTEGER;
  _r RECORD;
  _wooperitem RECORD;
  _parentQty NUMERIC;
  _qty NUMERIC;
  _brddistid INTEGER;
  _suTime NUMERIC;
  _rnTime NUMERIC;
  _check CHAR;
  _wipPost NUMERIC;
  _sense TEXT;
BEGIN

  IF (pQty = 0) THEN
    RETURN 0;
  ELSIF (pQty &gt; 0) THEN
    _sense = &#39;from&#39;;
  ELSE
    _sense = &#39;to&#39;;
  END IF;

  IF ( ( SELECT wo_status
         FROM wo
         WHERE (wo_id=pWoid) ) NOT IN  (&#39;R&#39;,&#39;E&#39;,&#39;I&#39;) ) THEN
    RETURN -1;
  END IF;

  --If this is item type Job then we are using the wrong function
  SELECT item_type INTO _check
  FROM wo,itemsite,item
  WHERE ((wo_id=pWoid)
  AND (wo_itemsite_id=itemsite_id)
  AND (itemsite_item_id=item_id)
  AND (item_type = &#39;J&#39;));
  IF (FOUND) THEN
    RAISE EXCEPTION &#39;Work orders for job items are posted when quantities are shipped on the associated sales order&#39;;
  END IF;
  
  SELECT formatWoNumber(pWoid) INTO _woNumber;

  SELECT roundQty(item_fractional, pQty) INTO _parentQty
  FROM wo, itemsite, item
  WHERE ((wo_itemsite_id=itemsite_id)
   AND (itemsite_item_id=item_id)
   AND (wo_id=pWoid));

--  Create the material receipt transaction
  IF (pItemlocSeries = 0) THEN
    SELECT NEXTVAL(&#39;itemloc_series_seq&#39;) INTO _itemlocSeries;
  ELSE
    _itemlocSeries = pItemlocSeries;
  END IF;

  IF (pBackflush) THEN
    FOR _r IN SELECT womatl_id, womatl_qtyper, womatl_scrap, womatl_qtywipscrap,
		     womatl_qtyreq - roundQty(item_fractional, womatl_qtyper * wo_qtyord) AS preAlloc
	      FROM womatl, wo, itemsite, item
	      WHERE ((womatl_issuemethod IN (&#39;L&#39;, &#39;M&#39;))
		AND  (womatl_wo_id=pWoid)
		AND  (womatl_wo_id=wo_id)
		AND  (womatl_itemsite_id=itemsite_id)
		AND  (itemsite_item_id=item_id)) LOOP
      -- CASE says: don&#39;t use scrap % if someone already entered actual scrap
      SELECT issueWoMaterial(_r.womatl_id,
			     CASE WHEN _r.womatl_qtywipscrap &gt; _r.preAlloc THEN
			       _parentQty * _r.womatl_qtyper + (_r.womatl_qtywipscrap - _r.preAlloc)
			     ELSE
			       _parentQty * _r.womatl_qtyper * (1 + _r.womatl_scrap)
			     END, _itemlocSeries) INTO _itemlocSeries;

      UPDATE womatl
      SET womatl_issuemethod=&#39;L&#39;
      WHERE ( (womatl_issuemethod=&#39;M&#39;)
       AND (womatl_id=_r.womatl_id) );

    END LOOP;
  END IF;


--  If request, backflush the wooper load
  IF (pBackflushOperations) THEN
    FOR _wooperitem IN SELECT wooper_id, wooper_sutime,
                              wooper_suconsumed, wooper_sucomplete,
                              wooper_rncomplete, wooper_rnqtyper,
                              wooper_invproduomratio,
                              wooper_wo_id, wooper_seqnumber
                       FROM wooper
                       WHERE (wooper_wo_id=pWoid)
                       ORDER BY wooper_seqnumber LOOP

--  Backflush any remaining Setup Time
      IF ( (NOT _wooperitem.wooper_sucomplete) AND
           ( noNeg(_wooperitem.wooper_sutime - 
             _wooperitem.wooper_suconsumed ) &gt; 0) ) THEN
        _suTime := _wooperitem.wooper_sutime;
        PERFORM postSutime(wooper_id, _suTime, TRUE, pSuUser)
        FROM wooper
        WHERE (wooper_id=_wooperitem.wooper_id);
      END IF;

--  Backflush Run Time for the reported Qty.
      IF ( (NOT _wooperitem.wooper_rncomplete) AND 
           (_wooperitem.wooper_invproduomratio &lt;&gt; 0) ) THEN

        _rnTime := (_wooperitem.wooper_rnqtyper / _wooperitem.wooper_invproduomratio * _parentQty);
        PERFORM postRntime(wooper_id, _rnTime, FALSE, pQty, pRnUser )
        FROM wooper
        WHERE (wooper_id=_wooperitem.wooper_id);

        UPDATE wooper
        SET wooper_qtyrcv = (COALESCE(wooper_qtyrcv,0) + _parentQty)
        WHERE (wooper_id=_wooperitem.wooper_id);

      END IF;

--  Insert the wooperpost record
      INSERT INTO wooperpost
             (wooperpost_wo_id, wooperpost_seqnumber,
              wooperpost_username, wooperpost_timestamp,
              wooperpost_qty, wooperpost_su_username, wooperpost_sutime,
              wooperpost_rn_username, wooperpost_rntime)
      VALUES (_wooperitem.wooper_wo_id, _wooperitem.wooper_seqnumber,
              CURRENT_USER, CURRENT_TIMESTAMP,
              _parentQty, pSuUser, _suTime, pRnUser, _rnTime);

    END LOOP;

  END IF;

  SELECT CASE 
           WHEN (wo_cosmethod = &#39;D&#39;) THEN 
             wo_wipvalue
           ELSE 
             round((wo_wipvalue - (wo_postedvalue / wo_qtyord * (wo_qtyord - wo_qtyrcv - pQty))),2)
         END INTO _wipPost
  FROM wo 
  WHERE (wo_id=pWoid);         

  SELECT postInvTrans( itemsite_id, &#39;RM&#39;, _parentQty, 
                       &#39;W/O&#39;, &#39;WO&#39;, _woNumber, &#39;&#39;, (&#39;Receive Inventory &#39; || item_number || &#39; &#39; || _sense || &#39; Manufacturing&#39;),
                       costcat_asset_accnt_id, costcat_wip_accnt_id, _itemlocSeries, CURRENT_DATE,
                       -- the following is only actually used when the item is average costed
                       _wipPost ) INTO _invhistid
  FROM wo, itemsite, item, costcat
  WHERE ( (wo_itemsite_id=itemsite_id)
   AND (itemsite_item_id=item_id)
   AND (itemsite_costcat_id=costcat_id)
   AND (wo_id=pWoid) );

--  Increase this W/O&#39;s received qty decrease its WIP value
  UPDATE wo
  SET wo_qtyrcv = (wo_qtyrcv + _parentQty),
      wo_wipvalue = (wo_wipvalue - (CASE WHEN (itemsite_costmethod=&#39;A&#39;) THEN _wipPost ELSE (stdcost(itemsite_item_id) * _parentQty)  END))
  FROM itemsite, item
  WHERE ((wo_itemsite_id=itemsite_id)
   AND (itemsite_item_id=item_id)
   AND (wo_id=pWoid));

--  Make sure the W/O is at issue status
  UPDATE wo
  SET wo_status=&#39;I&#39;
  WHERE (wo_id=pWoid);

--  If the parent Item is a Breeder, create or increment brddist
--  records for the Co-Products/By-Products
  IF ( ( SELECT (item_type=&#39;B&#39;)
         FROM wo, itemsite, item
         WHERE ( (wo_itemsite_id=itemsite_id)
          AND (itemsite_item_id=item_id)
          AND (wo_id=pWoid) ) ) ) THEN
    FOR _r IN SELECT cs.itemsite_id AS c_itemsite_id,
                     bbomitem_qtyper, (bbomitem_qtyper * _parentQty) AS qty
              FROM bbomitem, itemsite AS cs, itemsite AS ps, wo
              WHERE ( (bbomitem_parent_item_id=ps.itemsite_item_id)
               AND (bbomitem_item_id=cs.itemsite_item_id)
               AND (wo_itemsite_id=ps.itemsite_id)
               AND (cs.itemsite_warehous_id=ps.itemsite_warehous_id)
               AND (wo_id=pWoid) ) LOOP

      SELECT brddist_id INTO _brddistid
      FROM brddist
      WHERE ( (NOT brddist_posted)
       AND (brddist_wo_id=pWoid)
       AND (brddist_itemsite_id=_r.c_itemsite_id) );
      IF (FOUND) THEN
        UPDATE brddist
        SET brddist_wo_qty=(brddist_wo_qty + _parentQty),
            brddist_qty = (brddist_qty + _r.qty)
        WHERE (brddist_id=_brddistid);
      ELSE
        INSERT INTO brddist
        ( brddist_wo_id, brddist_wo_qty, brddist_itemsite_id,
          brddist_stdqtyper, brddist_qty, brddist_posted )
        VALUES
        ( pWoid, _parentQty, _r.c_itemsite_id,
          _r.bbomitem_qtyper, _r.qty, FALSE );
      END IF;

    END LOOP;
  END IF;
        

  RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postpurchaseorder-integer">postpurchaseorder( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPoheadid ALIAS FOR $1;

BEGIN

  IF ( ( SELECT (pohead_status=&#39;U&#39;)
         FROM pohead
         WHERE (pohead_id=pPoheadid) ) ) THEN

    UPDATE pohead
    SET pohead_status=&#39;O&#39;
    WHERE (pohead_id=pPoheadid);

  END IF;

  UPDATE poitem
  SET poitem_status=&#39;O&#39;
  WHERE (poitem_pohead_id=pPoheadid);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postreceipt-integer-integer">postreceipt( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  precvid		ALIAS FOR $1;
  _itemlocSeries	INTEGER := COALESCE($2, 0);
  _freightAccnt		INTEGER;
  _glDate		TIMESTAMP WITH TIME ZONE;
  _o			RECORD;
  _ordertypeabbr	TEXT;
  _r			RECORD;
  _ra			RECORD;
  _recvvalue		NUMERIC := 0;
  _tmp			INTEGER;
  _toitemitemid		INTEGER;

BEGIN
  SELECT recv_id, recv_order_type, recv_orderitem_id, recv_qty,
	 round(currToBase(recv_freight_curr_id, recv_freight, recv_date::DATE),
	       2) AS recv_freight_base,
	 recv_freight, recv_freight_curr_id, recv_date, recv_gldistdate,
	 itemsite_id, itemsite_item_id, item_inv_uom_id, itemsite_costmethod,
         vend_name
	 INTO _r
  FROM recv LEFT OUTER JOIN itemsite ON (recv_itemsite_id=itemsite_id)
            LEFT OUTER JOIN item ON (itemsite_item_id=item_id)
            LEFT OUTER JOIN vendinfo ON (recv_vend_id=vend_id)
  WHERE ((recv_id=precvid)
    AND  (NOT recv_posted));

  IF (NOT FOUND) THEN
    IF (_itemlocSeries = 0) THEN
      RETURN -10;
    END IF;
    RETURN _itemlocSeries;

  ELSEIF (_r.recv_qty &lt;= 0) THEN
    RETURN -11;

  ELSIF (_r.recv_order_type =&#39;PO&#39;) THEN
    _ordertypeabbr := (&#39;P/O for &#39; || _r.vend_name);
  ELSIF (_r.recv_order_type =&#39;RA&#39;) THEN
    _ordertypeabbr := &#39;R/A&#39;;
  ELSIF (_r.recv_order_type =&#39;TO&#39;) THEN
    _ordertypeabbr := &#39;T/O&#39;;
  ELSE
    RETURN -13;	-- don&#39;t know how to handle this order type
  END IF;

  SELECT orderhead_number, orderitem_id,
	 currToBase(orderitem_unitcost_curr_id, orderitem_unitcost,
		    recv_date::DATE) AS item_unitprice_base,
	 orderitem_qty_invuomratio AS invvenduomratio,
	 orderhead_orderdate AS orderdate INTO _o
  FROM recv, orderhead, orderitem
  WHERE ((recv_orderitem_id=orderitem_id)
    AND  (recv_order_type=orderitem_orderhead_type)
    AND  (orderitem_orderhead_id=orderhead_id)
    AND  (orderitem_orderhead_type=orderhead_type)
    AND  (NOT recv_posted)
    AND  (recv_id=precvid));

  IF (NOT FOUND) THEN
    IF (_itemlocSeries = 0) THEN
      RETURN -10;
    END IF;
    RETURN _itemlocSeries;
  END IF;

  IF (_itemlocSeries = 0) THEN
    _itemlocSeries := NEXTVAL(&#39;itemloc_series_seq&#39;);
  ELSEIF (_itemlocSeries &lt; 0) THEN
    RETURN _itemlocSeries;
  END IF;

  _glDate := COALESCE(_r.recv_gldistdate, _r.recv_date);

  IF (_r.itemsite_id = -1 OR _r.itemsite_id IS NULL) THEN
    IF (_r.recv_order_type != &#39;PO&#39;) THEN
      RETURN -14;	-- otherwise how to we get the accounts?
    END IF;

    SELECT insertGLTransaction( &#39;S/R&#39;, _r.recv_order_type, _o.orderhead_number,
				&#39;Receive Non-Inventory from &#39; || _ordertypeabbr,
				 expcat_liability_accnt_id,
				 expcat_exp_accnt_id, -1,
				 round((_o.item_unitprice_base * _r.recv_qty),2),
				 _glDate::DATE ) INTO _tmp
    FROM poitem, expcat
    WHERE((poitem_expcat_id=expcat_id)
      AND (poitem_id=_o.orderitem_id));

    IF (_tmp &lt; 0 AND _tmp != -3) THEN -- error but not 0-value transaction
      RETURN _tmp;
    END IF;

    SELECT insertGLTransaction( &#39;S/R&#39;, _r.recv_order_type, _o.orderhead_number,
				&#39;Receive Non-Inventory Freight from &#39; || _ordertypeabbr,
				 expcat_liability_accnt_id,
				 expcat_freight_accnt_id, -1,
				 _r.recv_freight_base,
				 _glDate::DATE ),
	   expcat_freight_accnt_id INTO _tmp, _freightAccnt
    FROM poitem, expcat
    WHERE((poitem_expcat_id=expcat_id)
      AND (poitem_id=_o.orderitem_id));

    IF (_tmp &lt; 0 AND _tmp != -3) THEN -- error but not 0-value transaction
      RETURN _tmp;
    END IF;

    _recvvalue := ROUND((_o.item_unitprice_base * _r.recv_qty),2);

    UPDATE poitem
    SET poitem_qty_received = (poitem_qty_received + _r.recv_qty),
	poitem_freight_received = (poitem_freight_received + _r.recv_freight_base)
    WHERE (poitem_id=_o.orderitem_id);

  ELSE	-- not ELSIF: some code is shared between diff order types
    IF (_r.recv_order_type = &#39;PO&#39;) THEN
      SELECT postInvTrans( itemsite_id, &#39;RP&#39;::TEXT,
			   (_r.recv_qty * _o.invvenduomratio),
			   &#39;S/R&#39;::TEXT,
			   _r.recv_order_type::TEXT, _o.orderhead_number::TEXT,
			   &#39;&#39;::TEXT,
			   &#39;Receive Inventory from &#39; || _ordertypeabbr,
			   costcat_asset_accnt_id, costcat_liability_accnt_id,
			   _itemlocSeries,
			   _glDate,
                           round((_o.item_unitprice_base * _r.recv_qty),2) -- always passing this in since it is ignored if it is not average costed item
			   ) INTO _tmp
      FROM itemsite, costcat
      WHERE ( (itemsite_costcat_id=costcat_id)
       AND (itemsite_id=_r.itemsite_id) );
      IF (NOT FOUND) THEN
	RAISE EXCEPTION &#39;Could not post inventory transaction: no cost category found for itemsite_id %&#39;,
	  _r.itemsite_id;
      ELSIF (_tmp &lt; -1) THEN -- less than -1 because -1 means it is a none controlled item
	IF(_tmp = -3) THEN
	  RETURN -12; -- The GL trans value was 0 which means we likely do not have a std cost
	END IF;
	RETURN _tmp;
      END IF;

      SELECT insertGLTransaction( &#39;S/R&#39;, _r.recv_order_type, _o.orderhead_number,
				  &#39;Receive Inventory Freight from &#39; || _o.orderhead_number,
				   costcat_liability_accnt_id,
				   costcat_freight_accnt_id, -1,
				   _r.recv_freight_base,
				   _glDate::DATE ),
	     costcat_freight_accnt_id INTO _tmp, _freightAccnt
      FROM itemsite, costcat
      WHERE ( (itemsite_costcat_id=costcat_id)
       AND (itemsite_id=_r.itemsite_id) );
      IF (NOT FOUND) THEN
	RAISE EXCEPTION &#39;Could not insert G/L transaction: no cost category found for itemsite_id %&#39;,
	  _r.itemsite_id;
      ELSIF (_tmp &lt; 0 AND _tmp != -3) THEN -- error but not 0-value transaction
	RETURN _tmp;
      END IF;

      UPDATE poitem
      SET poitem_qty_received = (poitem_qty_received + _r.recv_qty),
	  poitem_freight_received = (poitem_freight_received + _r.recv_freight_base)
      WHERE (poitem_id=_o.orderitem_id);

    ELSIF (_r.recv_order_type = &#39;RA&#39;) THEN
      SELECT rahead.*, raitem.* INTO _ra
	FROM rahead, raitem
      WHERE ((rahead_id=raitem_rahead_id)
        AND  (raitem_id=_r.recv_orderitem_id));

      SELECT postInvTrans(_r.itemsite_id, &#39;RR&#39;,
			  (_r.recv_qty * _o.invvenduomratio),
			  &#39;S/R&#39;,
			  _r.recv_order_type, _o.orderhead_number::TEXT,
			  _ra.rahead_number::TEXT || &#39;-&#39; || _ra.raitem_linenumber::TEXT,
			  &#39;Receive Inventory from &#39; || _ordertypeabbr,
			  costcat_asset_accnt_id,
			  CASE WHEN (_ra.raitem_warranty) THEN
			    resolveCOWAccount(_r.itemsite_id,_ra.rahead_cust_id)
			  ELSE
			    resolveCORAccount(_r.itemsite_id,_ra.rahead_cust_id)
			  END,
			  _itemlocSeries, _glDate) INTO _tmp
      FROM itemsite, costcat
      WHERE ( (itemsite_costcat_id=costcat_id)
       AND (itemsite_id=_r.itemsite_id) );

      IF (NOT FOUND) THEN
	RAISE EXCEPTION &#39;Could not post inventory transaction: no cost category found for itemsite_id %&#39;,
	  _r.itemsite_id;
      ELSIF (_tmp &lt; -1) THEN -- less than -1 because -1 means it is a none controlled item
	IF(_tmp = -3) THEN
	  RETURN -12; -- The GL trans value was 0 which means we likely do not have a std cost
	END IF;
	RETURN _tmp;
      END IF;

      INSERT INTO rahist (rahist_itemsite_id, rahist_date,
			  rahist_descrip,
			  rahist_qty, rahist_uom_id,
			  rahist_source, rahist_source_id, rahist_rahead_id
	) VALUES (_r.itemsite_id, _glDate,
		  &#39;Receive Inventory from &#39; || _ordertypeabbr,
		  _r.recv_qty * _o.invvenduomratio, _r.item_inv_uom_id,
		  &#39;RR&#39;, _r.recv_id, _ra.rahead_id
	);

      SELECT insertGLTransaction( &#39;S/R&#39;, _r.recv_order_type, _o.orderhead_number,
				  &#39;Receive Inventory Freight from &#39; || _o.orderhead_number,
				   costcat_liability_accnt_id,
				   costcat_freight_accnt_id, -1,
				   _r.recv_freight_base,
				   _glDate::DATE ),
	     costcat_freight_accnt_id INTO _tmp, _freightAccnt
      FROM itemsite, costcat
      WHERE ( (itemsite_costcat_id=costcat_id)
       AND (itemsite_id=_r.itemsite_id) );
      IF (_tmp &lt; 0 AND _tmp != -3) THEN -- error but not 0-value transaction
	RETURN _tmp;
      END IF;

      INSERT INTO rahist (rahist_date, rahist_descrip,
			  rahist_source, rahist_source_id,
			  rahist_curr_id, rahist_amount,
			  rahist_rahead_id
	) VALUES (_glDate, &#39;Receive Inventory Freight from &#39; || _ordertypeabbr,
		  &#39;RR&#39;, _r.recv_id, _r.recv_freight_curr_id, _r.recv_freight,
		  _ra.rahead_id
	);

      UPDATE raitem
      SET raitem_qtyreceived = (raitem_qtyreceived + _r.recv_qty)
      WHERE (raitem_id=_o.orderitem_id);

    ELSIF (_r.recv_order_type = &#39;TO&#39; AND fetchMetricBool(&#39;MultiWhs&#39;)) THEN
      SELECT interWarehouseTransfer(toitem_item_id, tohead_trns_warehous_id,
            tohead_dest_warehous_id, _r.recv_qty, 
            &#39;TR&#39;, tohead_number, &#39;Receive from Transit To Dest Warehouse&#39;, _itemlocSeries, _glDate ) INTO _tmp
      FROM tohead, toitem
      WHERE ((tohead_id=toitem_tohead_id)
        AND  (toitem_id=_r.recv_orderitem_id));     

      IF (_tmp &lt; 0) THEN
	RETURN _tmp;
      END IF;

      SELECT insertGLTransaction( &#39;S/R&#39;, _r.recv_order_type, _o.orderhead_number,
				  &#39;Receive Inventory Freight from &#39; || _o.orderhead_number,
				   costcat_toliability_accnt_id,
				   costcat_freight_accnt_id, -1,
				   _r.recv_freight_base,
				   _glDate::DATE ),
	     costcat_freight_accnt_id INTO _tmp, _freightAccnt
      FROM itemsite, costcat
      WHERE ( (itemsite_costcat_id=costcat_id)
       AND (itemsite_id=_r.itemsite_id) );
      IF (_tmp &lt; 0 AND _tmp != -3) THEN -- error but not 0-value transaction
	RETURN _tmp;
      END IF;

      UPDATE toitem
      SET toitem_qty_received = (toitem_qty_received + _r.recv_qty),
	  toitem_freight_received = (toitem_freight_received +
				      currToCurr(_r.recv_freight_curr_id,
						 toitem_freight_curr_id,
						 _r.recv_freight, _glDate::DATE))
      WHERE (toitem_id=_o.orderitem_id);

    END IF;

    IF(_r.itemsite_costmethod=&#39;A&#39;) THEN
      _recvvalue := ROUND((_o.item_unitprice_base * _r.recv_qty),2);
    ELSE
      _recvvalue := ROUND(stdcost(_r.itemsite_item_id) * _r.recv_qty * _o.invvenduomratio, 2);
    END IF;
  END IF;

  UPDATE recv
  SET recv_value=_recvvalue, recv_posted=TRUE, recv_gldistdate=_glDate::DATE
  WHERE (recv_id=precvid);

  RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postreceipts-text-integer-integer">postreceipts( text, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pordertype		ALIAS FOR $1;
  porderid		ALIAS FOR $2;
  _itemlocSeries	INTEGER	:= $3;
  _qtyToRecv		NUMERIC;
  _r			RECORD;
  _multiWhs             BOOLEAN;
  _returnauth           BOOLEAN;

BEGIN

  _multiWhs := fetchMetricBool(&#39;MultiWhs&#39;);
  _returnauth := fetchMetricBool(&#39;EnableReturnAuth&#39;);

  SELECT SUM(qtyToReceive(pordertype, recv_orderitem_id)) INTO _qtyToRecv
  FROM recv, orderitem
  WHERE ((recv_orderitem_id=orderitem_id)
    AND  (recv_order_type=pordertype)
    AND  (orderitem_orderhead_type=pordertype)
    AND  (orderitem_orderhead_id=porderid));

  IF (_qtyToRecv &lt;= 0) THEN
    RETURN -11;
  END IF;

  IF (_itemlocSeries IS NULL OR _itemlocSeries &lt;= 0) THEN
    _itemlocSeries := NEXTVAL(&#39;itemloc_series_seq&#39;);
  END IF;

  FOR _r IN SELECT postReceipt(recv_id, _itemlocSeries) AS postResult
	    FROM recv, orderitem
	    WHERE ((recv_orderitem_id=orderitem_id)
	      AND  (orderitem_orderhead_id=porderid)
	      AND  (orderitem_orderhead_type=pordertype)
	      AND  (NOT recv_posted)
-- Check for multiple users receiving the same order
              AND  (recv_trans_usr_name=CURRENT_USER)
	      AND  (recv_order_type=pordertype)) LOOP
    IF (_r.postResult &lt; 0 AND _r.postResult != -11) THEN
      RETURN _r.postResult; -- fail on 1st error but ignore lines with qty == 0
    END IF;
  END LOOP;

  RETURN _itemlocSeries;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postsogltransactions">postsogltransactions(  )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

  UPDATE gltrans
  SET gltrans_exported=TRUE
  WHERE ( (NOT gltrans_exported)
   AND (gltrans_source=&#39;A/R&#39;)
   AND (gltrans_doctype IN (&#39;IN&#39;, &#39;CM&#39;)) );

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.poststandardjournal-integer-date">poststandardjournal( integer, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pStdjrnlid ALIAS FOR $1;
  pDate ALIAS FOR $2;
  _returnValue INTEGER;

BEGIN

  SELECT postStandardJournal(pStdjrnlid, pDate, FALSE, fetchGLSequence()) INTO _returnValue;

  RETURN _returnValue;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.poststandardjournal-integer-date-boolean">poststandardjournal( integer, date, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pStdjrnlid ALIAS FOR $1;
  pDate ALIAS FOR $2;
  pReverse ALIAS FOR $3;
  _returnValue INTEGER;

BEGIN

  RETURN postStandardJournal(pStdjrnlid, pDate, pReverse, fetchGLSequence());

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.poststandardjournal-integer-date-boolean-integer">poststandardjournal( integer, date, boolean, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pStdjrnlid ALIAS FOR $1;
  pDate ALIAS FOR $2;
  pReverse ALIAS FOR $3;
  pGlSequence ALIAS FOR $4;

BEGIN

  INSERT INTO glseries
  ( glseries_sequence, glseries_source, glseries_doctype, glseries_docnumber,
    glseries_notes, glseries_accnt_id, glseries_amount, glseries_distdate )
  SELECT pGlSequence, &#39;G/L&#39;, &#39;ST&#39;, stdjrnl_name,
         stdjrnlitem_notes, stdjrnlitem_accnt_id,
         CASE WHEN (pReverse=TRUE) THEN (stdjrnlitem_amount * -1)
              ELSE stdjrnlitem_amount
         END,
         pDate
  FROM stdjrnlitem, stdjrnl
  WHERE ( (stdjrnlitem_stdjrnl_id=stdjrnl_id)
   AND (stdjrnl_id=pStdjrnlid) );

  RETURN pGlSequence;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.poststandardjournal-integer-date-integer">poststandardjournal( integer, date, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pStdjrnlid ALIAS FOR $1;
  pDate ALIAS FOR $2;
  pGlSequence ALIAS FOR $3;

BEGIN

  RETURN postStandardJournal(pStdjrnlid, pDate, FALSE, pGLSequence);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.poststandardjournalgroup-integer-date">poststandardjournalgroup( integer, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pStdjrnlgrpid ALIAS FOR $1;
  pDate ALIAS FOR $2;
BEGIN
  RETURN postStandardJournalGroup(pStdjrnlgrpid, pDate, FALSE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.poststandardjournalgroup-integer-date-boolean">poststandardjournalgroup( integer, date, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pStdjrnlgrpid ALIAS FOR $1;
  pDate ALIAS FOR $2;
  pReverse ALIAS FOR $3;
  _r RECORD;
  _glSequence INTEGER := -1;

BEGIN

  FOR _r IN SELECT stdjrnlgrpitem_id, stdjrnlgrpitem_stdjrnl_id
            FROM stdjrnlgrpitem
            WHERE ( (stdjrnlgrpitem_stdjrnlgrp_id=pStdjrnlgrpid)
             AND (CURRENT_DATE BETWEEN stdjrnlgrpitem_effective AND (stdjrnlgrpitem_expires - 1))
             AND ( (stdjrnlgrpitem_toapply = -1)
              OR (stdjrnlgrpitem_toapply &gt; stdjrnlgrpitem_applied) ) ) LOOP

    IF (_glSequence = -1) THEN
      SELECT fetchGLSequence() INTO _glSequence;
    END IF;

    PERFORM postStandardJournal(_r.stdjrnlgrpitem_stdjrnl_id, pDate, pReverse, _glSequence);

    UPDATE stdjrnlgrpitem
    SET stdjrnlgrpitem_applied=(stdjrnlgrpitem_applied + 1)
    WHERE (stdjrnlgrpitem_id=_r.stdjrnlgrpitem_id);

  END LOOP;

  RETURN _glSequence;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postvoucher-integer-boolean">postvoucher( integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVoheadid ALIAS FOR $1;
  pPostCosts ALIAS FOR $2;
  _result INTEGER;

BEGIN

  SELECT postVoucher(pVoheadid, fetchJournalNumber(&#39;AP-VO&#39;), pPostCosts) INTO _result;

  RETURN _result;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postvoucher-integer-integer-boolean">postvoucher( integer, integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVoheadid ALIAS FOR $1;
  pJournalNumber ALIAS FOR $2;
  pPostCosts ALIAS FOR $3;
  _sequence INTEGER;
  _totalAmount_base NUMERIC;
  _totalAmount NUMERIC;
  _itemAmount_base NUMERIC;
  _itemAmount NUMERIC;
  _test INTEGER;
  _a RECORD;
  _d RECORD;
  _g RECORD;
  _p RECORD;
  _costx RECORD;
  _pPostCosts BOOLEAN;
  _pExplain BOOLEAN;
  _pLowLevel BOOLEAN;
  _exchGainFreight NUMERIC;
  _firstExchDateFreight	DATE;
  _tmpTotal		NUMERIC;
  _glDate		DATE;

BEGIN

  _pPostCosts := TRUE;
  _totalAmount_base := 0;
  _totalAmount := 0;
  SELECT fetchGLSequence() INTO _sequence;

--  Cache Voucher Infomation
  SELECT vohead.*,
	 vend_number || &#39;-&#39; || vend_name || &#39; &#39; || vohead_reference
							  AS glnotes,
	 COALESCE(pohead_orderdate, vohead_docdate) AS pohead_orderdate,
	 COALESCE(pohead_curr_id, vohead_curr_id) AS pohead_curr_id INTO _p
  FROM vendinfo, vohead LEFT OUTER JOIN pohead ON (vohead_pohead_id = pohead_id)
  WHERE ( (vohead_id=pVoheadid)
  AND (vend_id=vohead_vend_id) );

  _glDate := COALESCE(_p.vohead_gldistdate, _p.vohead_distdate);

--  If the vohead_distdate is NULL, assume that this is a NULL vohead and quietly delete it
  IF (_p.vohead_distdate IS NULL) THEN
    PERFORM deletevoucher (pVoheadid);
    RETURN 0;
  END IF;
  IF (_p.vohead_amount &lt;= 0) THEN
    RAISE EXCEPTION &#39;Cannot Post Voucher #% for a negative or zero amount (%).&#39;,
			_p.vohead_number, _p.vohead_amount;
  END IF;

-- there is no currency gain/loss on items, see issue 3892,
-- but there might be on freight, which is first encountered at p/o receipt
  SELECT recv_date::DATE INTO _firstExchDateFreight
      FROM recv
      WHERE (recv_vohead_id = pVoheadid);

  SELECT SUM(vodist_amount) INTO _tmpTotal
    FROM vodist
   WHERE (vodist_vohead_id=pVoheadid);
  IF (_tmpTotal IS NULL OR _tmpTotal &lt;= 0) THEN
    RAISE EXCEPTION &#39;Cannot Post Voucher #% with negative or zero distributions (%).&#39;,
			_p.vohead_number, _tmpTotal;
  END IF;
  IF (_tmpTotal &gt; _p.vohead_amount) THEN
    RAISE EXCEPTION &#39;Cannot Post Voucher #% with distributions greater than the voucher amount (% &gt; %).&#39;,
			_p.vohead_number, _tmpTotal, _p.vohead_amount;
  END IF;

  SELECT DISTINCT poitem_linenumber INTO _test
    FROM vodist, voitem, poitem 
   WHERE ( (vodist_poitem_id=poitem_id)
     AND   (voitem_poitem_id=poitem_id)
     AND   (voitem_vohead_id=vodist_vohead_id)
     AND   ((poitem_qty_received - poitem_qty_returned - poitem_qty_vouchered) = 0)
     AND   (vodist_vohead_id=pVoheadid) )
   LIMIT 1;
  IF (FOUND) THEN
    RAISE EXCEPTION &#39;Cannot Post Voucher #% as one or more of the line items have already been fully vouchered. Check P/O Line #%.&#39;,
         _p.vohead_number, _test;
  END IF;

--  Loop through the vodist records for the passed vohead that
--  are posted against a P/O Item
  FOR _g IN SELECT DISTINCT poitem_id, voitem_qty, poitem_expcat_id,
                            poitem_invvenduomratio,
                            COALESCE(itemsite_id, -1) AS itemsiteid,
                            COALESCE(itemsite_costcat_id, -1) AS costcatid,
                            COALESCE(itemsite_item_id, -1) AS itemsite_item_id,
                            (SELECT SUM(value) 
                             FROM (
                                SELECT SUM(recv_value) AS value
                                FROM recv
                                WHERE (recv_voitem_id=voitem_id)
                             UNION
                                SELECT SUM(poreject_value)*-1 AS value
                                FROM poreject
                                WHERE (poreject_voitem_id=voitem_id)) as data)
                           AS value_base,
			   (poitem_freight_received - poitem_freight_vouchered) /
			       (poitem_qty_received - poitem_qty_returned - poitem_qty_vouchered) * voitem_qty AS vouchered_freight,
                            currToBase(_p.pohead_curr_id,
				       (poitem_freight_received - poitem_freight_vouchered) /
				       (poitem_qty_received - poitem_qty_returned - poitem_qty_vouchered) * voitem_qty,
				        _firstExchDateFreight ) AS vouchered_freight_base,
			    voitem_freight,
			    currToBase(_p.vohead_curr_id, voitem_freight,
                                       _p.vohead_distdate) AS voitem_freight_base
            FROM vodist, voitem,
                 poitem LEFT OUTER JOIN itemsite ON (poitem_itemsite_id=itemsite_id)
            WHERE ( (vodist_poitem_id=poitem_id)
             AND (voitem_poitem_id=poitem_id)
             AND (voitem_vohead_id=vodist_vohead_id)
             AND (vodist_vohead_id=pVoheadid)) LOOP

--  Grab the G/L Accounts
    IF (_g.costcatid = -1) THEN
      SELECT pp.accnt_id AS pp_accnt_id,
             lb.accnt_id AS lb_accnt_id INTO _a
      FROM expcat, accnt AS pp, accnt AS lb
      WHERE ( (expcat_purchprice_accnt_id=pp.accnt_id)
       AND (expcat_liability_accnt_id=lb.accnt_id)
       AND (expcat_id=_g.poitem_expcat_id) );
      IF (NOT FOUND) THEN
        RAISE EXCEPTION &#39;Cannot Post Voucher #% due to unassigned G/L Accounts.&#39;, _p.vohead_number;
      END IF;
    ELSE
      SELECT pp.accnt_id AS pp_accnt_id,
             lb.accnt_id AS lb_accnt_id INTO _a
      FROM costcat, accnt AS pp, accnt AS lb
      WHERE ( (costcat_purchprice_accnt_id=pp.accnt_id)
       AND (costcat_liability_accnt_id=lb.accnt_id)
       AND (costcat_id=_g.costcatid) );
      IF (NOT FOUND) THEN
        RAISE EXCEPTION &#39;Cannot Post Voucher #% due to unassigned G/L Accounts.&#39;, _p.vohead_number;
      END IF;
    END IF;

--  Clear the Item Amount accumulator
    _itemAmount_base := 0;
    _itemAmount := 0;

--  Figure out the total posted value for this line item
    FOR _d IN SELECT vodist_id, vodist_amount,
		     _p.vohead_curr_id, vodist_costelem_id,
		     currToBase(_p.vohead_curr_id, vodist_amount,
				_p.vohead_distdate) AS vodist_amount_base
              FROM vodist
              WHERE ( (vodist_vohead_id=pVoheadid)
               AND (vodist_poitem_id=_g.poitem_id) ) LOOP

       _pExplain := TRUE;
       SELECT * INTO _costx
         FROM itemcost
        WHERE ( (itemcost_item_id = _g.itemsite_item_id)
          AND   (itemcost_costelem_id = _d.vodist_costelem_id) );

       IF (FOUND) THEN
         _pExplain := _costx.itemcost_lowlevel;
       END IF;

--  Post the cost to the Actual if requested
--      IF ( (pPostCosts) AND (_d.vodist_costelem_id &lt;&gt; -1) ) THEN
      IF ( (_d.vodist_costelem_id &lt;&gt; -1) AND (_g.itemsite_item_id &lt;&gt; -1) ) THEN
        PERFORM updateCost( _g.itemsite_item_id, _d.vodist_costelem_id,
                            _pExplain, (_d.vodist_amount / (_g.voitem_qty * _g.poitem_invvenduomratio)),
			    _p.vohead_curr_id );
      END IF;

--  Add the Distribution Amount to the Item Amount
      _itemAmount_base := _itemAmount_base + ROUND(_d.vodist_amount_base, 2);
      _itemAmount := _itemAmount + _d.vodist_amount;

    END LOOP;

--  Distribute from the clearing account
    PERFORM insertIntoGLSeries( _sequence, &#39;A/P&#39;, &#39;VO&#39;, text(_p.vohead_number),
		_a.lb_accnt_id,
		round(_g.value_base + _g.vouchered_freight_base, 2) * -1,
		_glDate, _p.glnotes );

--  Attribute the correct portion to currency gain/loss
    _exchGainFreight := 0;
    SELECT currGain(_p.pohead_curr_id, _g.vouchered_freight,
		    _firstExchDateFreight, _p.vohead_distdate )
		    INTO _exchGainFreight;
    IF (round(_exchGainFreight, 2) &lt;&gt; 0) THEN
	PERFORM insertIntoGLSeries(_sequence, &#39;A/P&#39;, &#39;VO&#39;,
	    text(_p.vohead_number),
	    getGainLossAccntId(), round(_exchGainFreight, 2),
	   _glDate, _p.glnotes);
    END IF;

--  Distribute the remaining variance to the Purchase Price Variance account
    IF (round(_itemAmount_base, 2) &lt;&gt; round(_g.value_base, 2)) THEN
      _tmpTotal := round(_itemAmount_base, 2) - round(_g.value_base, 2);
      PERFORM insertIntoGLSeries( _sequence, &#39;A/P&#39;, &#39;VO&#39;, text(_p.vohead_number),
			          _a.pp_accnt_id,
			          _tmpTotal * -1,
			          _glDate, _p.glnotes );
    END IF;

--  Distribute the remaining freight variance to the Purchase Price Variance account
    IF (round(_g.voitem_freight_base + _exchGainFreight, 2) &lt;&gt; round(_g.vouchered_freight_base, 2)) THEN
      _tmpTotal := round(_g.voitem_freight_base + _exchGainFreight, 2) - round(_g.vouchered_freight_base, 2);
      PERFORM insertIntoGLSeries( _sequence, &#39;A/P&#39;, &#39;VO&#39;, text(_p.vohead_number),
	      _a.pp_accnt_id,
	      _tmpTotal * -1,
	      _glDate, _p.glnotes );
    END IF;

--  Add the distribution amount to the total amount to distribute
    _totalAmount_base := (_totalAmount_base + _itemAmount_base + _g.voitem_freight_base);
    _totalAmount := (_totalAmount + _itemAmount + _g.voitem_freight);

--  Post all the Tagged Receivings for this P/O Item as Invoiced and
--  record the purchase and receive costs
--  Comment out because recv cost is set at receiving now.
    UPDATE recv
    SET recv_invoiced=TRUE,
	recv_recvcost_curr_id=basecurrid(),
        recv_recvcost=round(_g.value_base / _g.voitem_qty, 2)
    FROM poitem
    WHERE ((recv_orderitem_id=poitem_id)
      AND  (recv_order_type=&#39;PO&#39;)
      AND  (recv_orderitem_id=_g.poitem_id)
      AND  (recv_vohead_id=pVoheadid) );

--  Post all the Tagged Rejections for this P/O Item as Invoiced
    UPDATE poreject
    SET poreject_invoiced=TRUE
    WHERE ( (poreject_poitem_id=_g.poitem_id)
     AND (poreject_vohead_id=pVoheadid) );

--  Update the qty and freight vouchered fields
    UPDATE poitem
       SET poitem_qty_vouchered = (poitem_qty_vouchered + _g.voitem_qty),
           poitem_freight_vouchered = (poitem_freight_vouchered + _g.voitem_freight)
     WHERE (poitem_id=_g.poitem_id);

  END LOOP;

--  Loop through the vodist records for the passed vohead that
--  are not posted against a P/O Item
  FOR _d IN SELECT vodist_id,
		   currToBase(_p.vohead_curr_id, vodist_amount,
			      _p.vohead_distdate) AS vodist_amount_base,
		   vodist_amount,
		   vodist_accnt_id, vodist_expcat_id
            FROM vodist
            WHERE ( (vodist_vohead_id=pVoheadid)
             AND (vodist_poitem_id=-1) ) LOOP

--  Distribute from the misc. account
    IF (_d.vodist_accnt_id = -1) THEN
      PERFORM insertIntoGLSeries( _sequence, &#39;A/P&#39;, &#39;VO&#39;, text(_p.vohead_number),
			  expcat_exp_accnt_id,
			  round(_d.vodist_amount_base, 2) * -1,
			  _glDate, _p.glnotes )
         FROM expcat
        WHERE (expcat_id=_d.vodist_expcat_id);
    ELSE
      PERFORM insertIntoGLSeries( _sequence, &#39;A/P&#39;, &#39;VO&#39;, text(_p.vohead_number),
			  _d.vodist_accnt_id,
			  round(_d.vodist_amount_base, 2) * -1,
			  _glDate, _p.glnotes );
    END IF;

--  Add the Distribution Amount to the Total Amount
    _totalAmount_base := _totalAmount_base + ROUND(_d.vodist_amount_base, 2);
    _totalAmount := _totalAmount + _d.vodist_amount;

  END LOOP;

  SELECT insertIntoGLSeries( _sequence, &#39;A/P&#39;, &#39;VO&#39;, text(vohead_number),
                             accnt_id, round(_totalAmount_base, 2),
			     _glDate, _p.glnotes ) INTO _test
  FROM vohead, accnt
  WHERE ( (findAPAccount(vohead_vend_id)=accnt_id)
    AND (vohead_id=pVoheadid) );
  IF (NOT FOUND) THEN
    RAISE EXCEPTION &#39;Cannot Post Voucher #% due to an unassigned A/P Account.&#39;, _p.vohead_number;
  END IF;

  PERFORM postGLSeries(_sequence, pJournalNumber);

--  Create the A/P Open Item
  INSERT INTO apopen
  ( apopen_journalnumber, apopen_docdate, apopen_duedate, apopen_distdate, apopen_open,
    apopen_terms_id, apopen_vend_id, apopen_doctype,
    apopen_docnumber, apopen_invcnumber, apopen_ponumber, apopen_reference,
    apopen_amount, apopen_paid, apopen_notes, apopen_username, apopen_posted,
    apopen_curr_id )
-- TODO: 
  SELECT pJournalNumber, vohead_docdate, vohead_duedate, _glDate, TRUE,
         vohead_terms_id, vohead_vend_id, &#39;V&#39;,
         vohead_number, vohead_invcnumber, COALESCE(TEXT(pohead_number), &#39;Misc.&#39;), vohead_reference,
         round(_totalAmount, 2), 0, &#39;&#39;, CURRENT_USER, FALSE, vohead_curr_id
  FROM vohead LEFT OUTER JOIN pohead ON (vohead_pohead_id=pohead_id)
  WHERE (vohead_id=pVoheadid);

--  Close all of the P/O Items that should be closed by this Voucher
  UPDATE poitem
  SET poitem_status=&#39;C&#39;
  FROM voitem
  WHERE ( (voitem_poitem_id=poitem_id)
   AND (voitem_close)
   AND (voitem_vohead_id=pVoheadid) );

--  Check the P/O items and if they are all closed go ahead
--  and close the P/O head.
  IF ( (SELECT (count(*) &lt; 1)
          FROM vohead, poitem
         WHERE ((vohead_pohead_id=poitem_pohead_id)
           AND  (poitem_status&lt;&gt;&#39;C&#39;)
           AND  (vohead_id=pVoheadid) ) ) ) THEN
    PERFORM closePo(vohead_pohead_id)
       FROM vohead
      WHERE (vohead_id=pVoheadid);
  END IF;

--  Set the vohead as posted
  UPDATE vohead
  SET vohead_posted=TRUE, vohead_gldistdate=_glDate
  WHERE (vohead_id=pVoheadid);

  RETURN pJournalNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.postvouchers-boolean">postvouchers( boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPostCosts ALIAS FOR $1;
  _journalNumber INTEGER;
  _return INTEGER;

BEGIN

  SELECT fetchJournalNumber(&#39;AP-VO&#39;) INTO _journalNumber;

  PERFORM postVoucher(vohead_id, _journalNumber, pPostCosts)
  FROM vohead
  WHERE (NOT vohead_posted);

  RETURN _journalNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.purgecreditmemos-date">purgecreditmemos( date )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCutoffDate ALIAS FOR $1;

BEGIN

  DELETE FROM cmitem
  WHERE (cmitem_id IN ( SELECT cmitem_id
                        FROM cmitem, cmhead
                        WHERE ( (cmitem_cmhead_id=cmhead_id)
                          AND   (cmhead_posted)
                          AND   (cmhead_printed)
                          AND   (cmhead_docdate&lt;=pCutoffDate)
                          AND   (checkCreditMemoSitePrivs(cmhead_id)) ) ) );

  DELETE FROM cmhead
  WHERE ( (cmhead_posted)
    AND   (cmhead_printed)
    AND   (cmhead_docdate&lt;=pCutoffDate)
    AND   (checkCreditMemoSitePrivs(cmhead_id)) );

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.purgeinvoicerecords-date">purgeinvoicerecords( date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCutoffDate ALIAS FOR $1;

BEGIN

-- Remove the shipitem records
  DELETE FROM shipitem
  WHERE (shipitem_invcitem_id IN (SELECT invcitem_id 
                                  FROM invcitem 
                                  WHERE invcitem_invchead_id IN ( SELECT invchead_id
                                     FROM invchead
                                     WHERE ( (invchead_invcdate &lt;= pCutoffDate)
                                     AND   (checkInvoiceSitePrivs(invchead_id))
                                     AND   (invchead_posted) ) ) ) );

-- Remove the cobill and cobmisc records
  DELETE FROM cobill
  WHERE (cobill_cobmisc_id IN ( SELECT cobmisc_id
                                FROM cobmisc, invchead
                                WHERE ( (invchead_invcnumber=cobmisc_invcnumber::TEXT)
                                  AND   (checkInvoiceSitePrivs(invchead_id))
                                  AND   (cobmisc_invcdate &lt;= pCutoffDate)
                                  AND   (cobmisc_posted)) ) );

  DELETE FROM cobmisc
  WHERE ( (checkInvoiceSitePrivs(getInvcheadId(cobmisc_invcnumber::TEXT)))
    AND   (cobmisc_invcdate &lt;= pCutoffDate)
    AND   (cobmisc_posted) );

-- Remove the invchead and invcitem records
  DELETE FROM invcitem
  WHERE (invcitem_invchead_id IN ( SELECT invchead_id
                                   FROM invchead
                                   WHERE ( (invchead_invcdate &lt;= pCutoffDate)
                                     AND   (checkInvoiceSitePrivs(invchead_id))
                                     AND   (invchead_posted) ) ) );

  DELETE FROM invchead
  WHERE ( (invchead_invcdate &lt;= pCutoffDate)
    AND   (checkInvoiceSitePrivs(invchead_id))
    AND   (invchead_posted) );

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.purgepostedcountslips-date-integer">purgepostedcountslips( date, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCutoffDate ALIAS FOR $1;
  pWarehousid ALIAS FOR $2;

BEGIN

  IF (pWarehousid = -1) THEN
    DELETE FROM cntslip
    WHERE (cntslip_id IN ( SELECT cntslip_id
                           FROM cntslip, invcnt
                           WHERE ( (cntslip_cnttag_id=invcnt_id)
                            AND (invcnt_posted)
                            AND (cntslip_posted)
                            AND (date(invcnt_postdate) &lt;= pCutoffDate) ) ) );

  ELSE
    DELETE FROM cntslip
    WHERE (cntslip_id IN ( SELECT cntslip_id
                           FROM invcnt, itemsite
                           WHERE ( (cntslip_cnttag_id=invcnt_id)
                            AND (invcnt_posted)
                            AND (cntslip_posted)
                            AND (invcnt_itemsite_id=itemsite_id)
                            AND (date(invcnt_postdate) &lt;= pCutoffDate)
                            AND (itemsite_warehous_id=pWarehousid) ) ) );
  END IF;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.purgepostedcounttags-date-integer">purgepostedcounttags( date, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCutoffDate ALIAS FOR $1;
  pWarehousid ALIAS FOR $2;

BEGIN

  IF (pWarehousid = -1) THEN
    DELETE FROM cntslip
    WHERE (cntslip_cnttag_id IN ( SELECT invcnt_id
                                  FROM invcnt
                                  WHERE ( (invcnt_posted)
                                   AND (date(invcnt_postdate) &lt;= pCutoffDate) ) ) );

    DELETE FROM invcnt
    WHERE ((invcnt_posted)
     AND (date(invcnt_postdate) &lt;= pCutoffDate));

  ELSE
    DELETE FROM cntslip
    WHERE (cntslip_cnttag_id IN ( SELECT invcnt_id
                                  FROM invcnt, itemsite
                                  WHERE ( (invcnt_posted)
                                   AND (invcnt_itemsite_id=itemsite_id)
                                   AND (date(invcnt_postdate) &lt;= pCutoffDate)
                                   AND (itemsite_warehous_id=pWarehousid) ) ) );

    DELETE FROM invcnt
    WHERE (invcnt_id IN ( SELECT invcnt_id 
                          FROM invcnt, itemsite
                          WHERE ( (invcnt_posted)
                           AND (invcnt_itemsite_id=itemsite_id)
                           AND (date(invcnt_postdate) &lt;= pCutoffDate)
                           AND (itemsite_warehous_id=pWarehousid) ) ) );
  END IF;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.purgeshipments-date">purgeshipments( date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pcutoff ALIAS FOR $1;

BEGIN

  -- TODO: add support for transfer orders shipments (which are never invoiced)
  DELETE FROM shipitem
  WHERE ((SELECT shiphead_shipped
	  FROM shiphead
	  WHERE (shipitem_shiphead_id=shiphead_id))
    AND  (shipitem_invoiced)
    AND  (DATE(shipitem_shipdate) &lt;= pcutoff));

  RETURN 0;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.qtyallocated-integer-date">qtyallocated( integer, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pDate ALIAS FOR $2;

BEGIN

  RETURN qtyAllocated(pItemsiteid, startOfTime(), pDate);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.qtyallocated-integer-date-date">qtyallocated( integer, date, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pStartDate ALIAS FOR $2;
  pEndDate ALIAS FOR $3;

BEGIN
 
  IF ( SELECT metric_value
	FROM metric
	WHERE ((metric_name = &#39;MultiWhs&#39;)
	AND (metric_value = &#39;t&#39;))) THEN
    IF ( SELECT item_sold
         FROM itemsite, item
         WHERE ((itemsite_item_id=item_id)
         AND (itemsite_id=pItemsiteid)) ) THEN
      RETURN (allocatedForTo(pItemsiteid, pStartDate, pEndDate) +
	      allocatedForWo(pItemsiteid, pStartDate, pEndDate) +
	      allocatedForSo(pItemsiteid, pStartDate, pEndDate));
    ELSE
      RETURN (allocatedForTo(pItemsiteid, pStartDate, pEndDate) +
	      allocatedForWo(pItemsiteid, pStartDate, pEndDate));
    END IF;
  ELSE
    IF ( SELECT item_sold
         FROM itemsite, item
         WHERE ((itemsite_item_id=item_id)
         AND (itemsite_id=pItemsiteid)) ) THEN
      RETURN (allocatedForWo(pItemsiteid, pStartDate, pEndDate) +
	      allocatedForSo(pItemsiteid, pStartDate, pEndDate));
    ELSE
      RETURN (allocatedForWo(pItemsiteid, pStartDate, pEndDate));
    END IF;
  END IF;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.qtyallocated-integer-integer">qtyallocated( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pLookAheaddays ALIAS FOR $2;

BEGIN

  RETURN qtyAllocated(pItemsiteid, startOfTime(), (CURRENT_DATE + pLookAheadDays));

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.qtyatshipping-integer">qtyatshipping( integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN qtyAtShipping(&#39;SO&#39;, $1);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.qtyatshipping-text-integer">qtyatshipping( text, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pordertype	ALIAS FOR $1;
  plineitemid	ALIAS FOR $2;
  _qty NUMERIC;

BEGIN

  IF (pordertype NOT IN (&#39;SO&#39;, &#39;TO&#39;)) THEN
    RAISE EXCEPTION &#39;% is not a valid order type&#39;, pordertype;
  END IF;

  SELECT COALESCE(SUM(shipitem_qty), 0.0) INTO _qty
  FROM shipitem, shiphead
  WHERE ((shipitem_shiphead_id=shiphead_id)
    AND  (NOT shipitem_shipped)
    AND  (shiphead_order_type=pordertype)
    AND  (shipitem_orderitem_id=plineitemid) );

  RETURN _qty;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.qtyavailable-integer-date">qtyavailable( integer, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pDate ALIAS FOR $2;

BEGIN

  RETURN ( ( SELECT itemsite_qtyonhand
             FROM itemsite
             WHERE (itemsite_id=pItemsiteid) ) +
           (SELECT qtyOrdered(pItemsiteid, (pDate - CURRENT_DATE))) -
           (SELECT qtyAllocated(pItemsiteid, (pDate - CURRENT_DATE))) );
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.qtyavailable-integer-integer">qtyavailable( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pLookAheadDays ALIAS FOR $2;

BEGIN

  RETURN ( ( SELECT itemsite_qtyonhand
             FROM itemsite
             WHERE (itemsite_id=pItemsiteid) ) +
           (SELECT qtyOrdered(pItemsiteid, pLookAheadDays)) -
           (SELECT qtyAllocated(pitemsiteid, pLookAheadDays)) );
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.qtyinshipment-text-integer-integer">qtyinshipment( text, integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pordertype	ALIAS FOR $1;
  plineitemid	ALIAS FOR $2;
  pshipheadid   ALIAS FOR $3;
  _qty NUMERIC;

BEGIN

  IF (pordertype NOT IN (&#39;SO&#39;, &#39;TO&#39;)) THEN
    RAISE EXCEPTION &#39;% is not a valid order type&#39;, pordertype;
  END IF;

  IF (pshipheadid IS NULL) THEN
    RAISE EXCEPTION &#39;Cannot calculate quantity in a shipment with a NULL shipment&#39;;
  END IF;

  SELECT SUM(COALESCE(shipitem_qty, 0.0)) INTO _qty
  FROM shipitem, shiphead
  WHERE ((shipitem_shiphead_id=shiphead_id)
      AND (shiphead_order_type=pordertype)
      AND (shipitem_orderitem_id=plineitemid)
      AND (shiphead_id=pshipheadid));

  IF (NOT FOUND) THEN
    RAISE NOTICE &#39;Quantity of % item % is 0 because shipment % does not exist.&#39;,
                  pordertype, plineitemid, pshipheadid;
  END IF;

  RETURN _qty;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.qtylocation-integer-integer-date-date-integer-text-integer">qtylocation( integer, integer, date, date, integer, text, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pLocationId  ALIAS FOR $1;
  pLsId        ALIAS FOR $2;
  pExpiration  ALIAS FOR $3;
  pWarranty    ALIAS FOR $4;
  pItemsiteId  ALIAS FOR $5;
  pOrderType   ALIAS FOR $6;
  pOrderId     ALIAS FOR $7;
  _qty         NUMERIC = 0.0;
  _qtyReserved NUMERIC = 0.0;

BEGIN
-- Summarize itemloc qty for this location/itemsite
  SELECT COALESCE(SUM(itemloc_qty), 0) INTO _qty
    FROM itemloc
   WHERE ( (itemloc_itemsite_id=pItemsiteId)
     AND (itemloc_location_id=pLocationId)
     AND (COALESCE(itemloc_ls_id, -1)=COALESCE(pLsId, itemloc_ls_id, -1))
     AND (COALESCE(itemloc_expiration, endoftime())=COALESCE(pExpiration, itemloc_expiration, endoftime()))
     AND (COALESCE(itemloc_warrpurc, endoftime())=COALESCE(pWarranty, itemloc_warrpurc, endoftime())) );

-- Summarize itemlocrsrv qty for this location/itemsite
-- that is reserved for a different order
  IF (fetchMetricBool(&#39;EnableSOReservationsByLocation&#39;)) THEN
    SELECT COALESCE(SUM(itemlocrsrv_qty), 0) INTO _qtyReserved
      FROM itemloc JOIN itemlocrsrv ON ( (itemlocrsrv_itemloc_id=itemloc_id)
                                    AND  ((itemlocrsrv_source &lt;&gt; COALESCE(pOrderType, &#39;&#39;)) OR
                                          (itemlocrsrv_source_id &lt;&gt; COALESCE(pOrderId, -1))) )
     WHERE ( (itemloc_itemsite_id=pItemsiteId)
       AND (itemloc_location_id=pLocationId)
       AND (COALESCE(itemloc_ls_id, -1)=COALESCE(pLsId, itemloc_ls_id, -1))
       AND (COALESCE(itemloc_expiration, endoftime())=COALESCE(pExpiration, itemloc_expiration, endoftime()))
       AND (COALESCE(itemloc_warrpurc, endoftime())=COALESCE(pWarranty, itemloc_warrpurc, endoftime())) );
  END IF;

  RETURN (_qty - _qtyReserved);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.qtyordered-integer-date">qtyordered( integer, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pDate ALIAS FOR $2;

BEGIN

  RETURN qtyOrdered(pItemsiteid, startOfTime(), pDate);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.qtyordered-integer-date-date">qtyordered( integer, date, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pStartDate ALIAS FOR $2;
  pEndDate ALIAS FOR $3;
  _itemType TEXT;

BEGIN

  SELECT item_type INTO _itemType
  FROM item, itemsite
  WHERE ( (itemsite_item_id=item_id)
   AND (itemsite_id=pItemsiteid) );

  IF ( SELECT metric_value
	FROM metric
	WHERE ((metric_name = &#39;MultiWhs&#39;)
	AND (metric_value = &#39;t&#39;))) THEN
    RETURN orderedByPo(pItemsiteid, pStartDate, pEndDate) +
           orderedByWo(pItemsiteid, pStartDate, pEndDate) +
           orderedByTo(pItemsiteid, pStartDate, pEndDate);
  ELSE
    RETURN orderedByPo(pItemsiteid, pStartDate, pEndDate) +
           orderedByWo(pItemsiteid, pStartDate, pEndDate);

  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.qtyordered-integer-integer">qtyordered( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pLookahead ALIAS FOR $2;
  _itemType TEXT;
  _result NUMERIC;

BEGIN

  RETURN qtyOrdered(pItemsiteid, startOfTime(), (CURRENT_DATE + pLookahead));

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.qtytoreceive-text-integer">qtytoreceive( text, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pordertype	ALIAS FOR $1;
  porderitemid	ALIAS FOR $2;
  _qty		NUMERIC;

BEGIN
  IF (pordertype = &#39;TO&#39; AND NOT fetchMetricBool(&#39;MultiWhs&#39;)) THEN
    RETURN 0;
  END IF;

  IF (pordertype = &#39;RA&#39; AND NOT fetchMetricBool(&#39;EnableReturnAuth&#39;)) THEN
    RETURN 0;
  END IF;

  SELECT SUM(recv_qty) INTO _qty
  FROM recv
  WHERE ((recv_orderitem_id=porderitemid)
    AND  (NOT recv_posted)
    AND  (recv_order_type=pordertype));

  RETURN COALESCE(_qty, 0.0);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.recalculatecmheadtaxtotal-integer">recalculatecmheadtaxtotal( integer )</a>
		</h2>
<h3>Returns: void</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCmheadid ALIAS FOR $1;
  _r RECORD;
BEGIN
  SELECT COALESCE(cmhead_adjtax_ratea, 0.0) +
	 COALESCE(cmhead_freighttax_ratea, 0.0) +
	 COALESCE(SUM(COALESCE(cmitem_tax_ratea, 0.0)), 0.0) AS rateA,
         COALESCE(cmhead_adjtax_rateb, 0.0) +
	 COALESCE(cmhead_freighttax_rateb, 0.0) +
	 COALESCE(SUM(COALESCE(cmitem_tax_rateb, 0.0)), 0.0) AS rateB,
         COALESCE(cmhead_adjtax_ratec, 0.0) +
	 COALESCE(cmhead_freighttax_ratec, 0.0) +
	 COALESCE(SUM(COALESCE(cmitem_tax_ratec, 0.0)), 0.0) AS rateC
    INTO _r
    FROM cmhead LEFT OUTER JOIN cmitem ON (cmitem_cmhead_id=cmhead_id)
   WHERE (cmhead_id=pCmheadid)
   GROUP BY cmhead_adjtax_ratea, cmhead_freighttax_ratea,
            cmhead_adjtax_rateb, cmhead_freighttax_rateb,
            cmhead_adjtax_ratec, cmhead_freighttax_ratec;
  -- cmhead_tax and cmhead_tax_rate[abc] have been retained for
  -- backward-compatibility, so put them in the invoice currency
  IF (FOUND) THEN
    UPDATE cmhead
       SET cmhead_tax = _r.rateA + _r.rateB + _r.rateC,
           cmhead_tax_ratea = _r.rateA,
           cmhead_tax_rateb = _r.rateB,
           cmhead_tax_ratec = _r.rateC
     WHERE (cmhead_id=pCmheadid);
  END IF;

  RETURN;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.recalculatecobmisctaxtotal-integer">recalculatecobmisctaxtotal( integer )</a>
		</h2>
<h3>Returns: void</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCobmiscid ALIAS FOR $1;
  _r RECORD;
BEGIN
  SELECT COALESCE(cobmisc_adjtax_ratea, 0.0) + COALESCE(cobmisc_freighttax_ratea, 0.0) + COALESCE(SUM(COALESCE(cobill_tax_ratea, 0.0)), 0.0) AS rateA,
         COALESCE(cobmisc_adjtax_rateb, 0.0) + COALESCE(cobmisc_freighttax_rateb, 0.0) + COALESCE(SUM(COALESCE(cobill_tax_rateb, 0.0)), 0.0) AS rateB,
         COALESCE(cobmisc_adjtax_ratec, 0.0) + COALESCE(cobmisc_freighttax_ratec, 0.0) + COALESCE(SUM(COALESCE(cobill_tax_ratec, 0.0)), 0.0) AS rateC
    INTO _r
    FROM cobmisc LEFT OUTER JOIN cobill ON (cobill_cobmisc_id=cobmisc_id)
   WHERE (cobmisc_id=pCobmiscid)
   GROUP BY cobmisc_adjtax_ratea, cobmisc_freighttax_ratea,
            cobmisc_adjtax_rateb, cobmisc_freighttax_rateb,
            cobmisc_adjtax_ratec, cobmisc_freighttax_ratec;
  IF (FOUND) THEN
    UPDATE cobmisc
       SET cobmisc_tax = _r.rateA + _r.rateB + _r.rateC,
           cobmisc_tax_ratea = _r.rateA,
           cobmisc_tax_rateb = _r.rateB,
           cobmisc_tax_ratec = _r.rateC
     WHERE (cobmisc_id=pCobmiscid);
  END IF;

  RETURN;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.recalculateinvcheadtaxtotal-integer">recalculateinvcheadtaxtotal( integer )</a>
		</h2>
<h3>Returns: void</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pInvcheadid ALIAS FOR $1;
  _r RECORD;
BEGIN
  SELECT COALESCE(invchead_adjtax_ratea, 0.0) +
	 COALESCE(invchead_freighttax_ratea, 0.0) +
	 COALESCE(SUM(COALESCE(invcitem_tax_ratea, 0.0)), 0.0) AS rateA,
         COALESCE(invchead_adjtax_rateb, 0.0) +
	 COALESCE(invchead_freighttax_rateb, 0.0) +
	 COALESCE(SUM(COALESCE(invcitem_tax_rateb, 0.0)), 0.0) AS rateB,
         COALESCE(invchead_adjtax_ratec, 0.0) +
	 COALESCE(invchead_freighttax_ratec, 0.0) +
	 COALESCE(SUM(COALESCE(invcitem_tax_ratec, 0.0)), 0.0) AS rateC
    INTO _r
    FROM invchead LEFT OUTER JOIN invcitem ON (invcitem_invchead_id=invchead_id)
   WHERE (invchead_id=pInvcheadid)
   GROUP BY invchead_adjtax_ratea, invchead_freighttax_ratea,
            invchead_adjtax_rateb, invchead_freighttax_rateb,
            invchead_adjtax_ratec, invchead_freighttax_ratec;
  -- invchead_tax and invchead_tax_rate[abc] have been retained for
  -- backward-compatibility, so put them in the invoice currency
  IF (FOUND) THEN
    UPDATE invchead
       SET invchead_tax = currToCurr(invchead_tax_curr_id, invchead_curr_id,
			    _r.rateA + _r.rateB + _r.rateC, invchead_invcdate),
           invchead_tax_ratea = currToCurr(invchead_tax_curr_id,
				invchead_curr_id, _r.rateA, invchead_invcdate),
           invchead_tax_rateb = currToCurr(invchead_tax_curr_id,
				invchead_curr_id, _r.rateB, invchead_invcdate),
           invchead_tax_ratec = currToCurr(invchead_tax_curr_id,
				invchead_curr_id, _r.rateC, invchead_invcdate)
     WHERE (invchead_id=pInvcheadid);
  END IF;

  RETURN;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.recallshipment-integer">recallshipment( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN recallShipment($1, CURRENT_TIMESTAMP);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.recallshipment-integer-timestamp-with-time-zone">recallshipment( integer, timestamp with time zone )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pshipheadid		ALIAS FOR $1;
  _timestamp		TIMESTAMP WITH TIME ZONE := $2;
  _allInvoiced		BOOLEAN;
  _co			RECORD;
  _cobill		RECORD;
  _h			RECORD;
  _invhistid		INTEGER;
  _itemlocSeries	INTEGER;
  _qty			NUMERIC;
  _qtyToBill		NUMERIC;
  _shiphead		RECORD;
  _to			RECORD;
  _ti			RECORD;
  _value                NUMERIC;

BEGIN

  IF (_timestamp IS NULL) THEN
    _timestamp := CURRENT_TIMESTAMP;
  END IF;

  SELECT * INTO _shiphead
  FROM shiphead
  WHERE (shiphead_id=pshipheadid);
  IF (NOT FOUND OR NOT _shiphead.shiphead_shipped) THEN
    RETURN -1;
  END IF;

  IF (_shiphead.shiphead_order_type = &#39;SO&#39;) THEN
    SELECT cohead_number AS head_number, cohead_cust_id AS cust_id INTO _h
      FROM cohead
     WHERE (cohead_id=_shiphead.shiphead_order_id);
    IF (NOT FOUND) THEN
      RETURN -1;
    END IF;

    SELECT COALESCE(BOOL_AND(shipitem_invoiced), FALSE) INTO _allInvoiced
     FROM cobill, shipitem
    WHERE ((cobill_coitem_id=shipitem_orderitem_id)
      AND  (shipitem_shiphead_id=pshipheadid));

    IF (_allInvoiced AND NOT hasPriv(&#39;RecallInvoicedShipment&#39;)) THEN
      RETURN -2;
    END IF;

    FOR _co IN SELECT coitem_id, coitem_itemsite_id, coitem_qty_invuomratio, coitem_warranty, coitem_cos_accnt_id
                 FROM coitem
                WHERE(coitem_id IN (SELECT shipitem_orderitem_id
                                      FROM shipitem, shiphead
                                     WHERE((shipitem_shiphead_id=shiphead_id)
                                       AND (shiphead_shipped)
                                       AND (shiphead_id=pshipheadid)))) FOR UPDATE LOOP

      SELECT SUM(shipitem_qty),SUM(shipitem_value) INTO _qty, _value
      FROM shipitem
      WHERE ( (shipitem_orderitem_id=_co.coitem_id)
       AND (shipitem_shiphead_id=pshipheadid) );

      UPDATE coitem
      SET coitem_qtyshipped = (coitem_qtyshipped - _qty)
      WHERE (coitem_id=_co.coitem_id);

      _qtyToBill := _qty;
      FOR _cobill IN SELECT cobill_id, cobill_qty
			 FROM cobill, shipitem
			WHERE ((cobill_coitem_id=shipitem_orderitem_id)
			  AND  (shipitem_shiphead_id=pshipheadid)
			  AND  (cobill_coitem_id=_co.coitem_id)) FOR UPDATE LOOP

	UPDATE cobill
	SET cobill_qty = noNeg(cobill_qty - _qtyToBill)
	WHERE (cobill_id=_cobill.cobill_id);

	_qtyToBill = _qtyToBill - _cobill.cobill_qty;
	EXIT WHEN (_qtyToBill &lt;= 0.0);
      END LOOP;

  --  Distribute to G/L, debit Shipping Asset, credit COS
      PERFORM insertGLTransaction( &#39;S/R&#39;, _shiphead.shiphead_order_type,
				   _h.head_number::TEXT, &#39;Recall Shipment&#39;,
                                   CASE WHEN(COALESCE(_co.coitem_cos_accnt_id, -1) != -1) THEN _co.coitem_cos_accnt_id
                                        WHEN(_co.coitem_warranty = TRUE) THEN resolveCOWAccount(itemsite_id, _h.cust_id)
				        ELSE resolveCOSAccount(itemsite_id, _h.cust_id)
                                   END,
                                   costcat_shipasset_accnt_id, -1,
				   _value,
				   _timestamp::DATE )
      FROM itemsite, costcat
      WHERE ( (itemsite_costcat_id=costcat_id)
       AND (itemsite_id=_co.coitem_itemsite_id) );

    END LOOP;

  ELSEIF (_shiphead.shiphead_order_type = &#39;TO&#39;) THEN
    SELECT * INTO _to
      FROM tohead
     WHERE (tohead_id=_shiphead.shiphead_order_id);
    IF (NOT FOUND) THEN
      RETURN -1;
    END IF;

    FOR _ti IN SELECT toitem_id, toitem_item_id,
		      toitem_qty_received, toitem_qty_ordered, SUM(shipitem_qty) AS qty
	      FROM toitem, shipitem
	      WHERE ((toitem_id=shipitem_orderitem_id)
		AND  (shipitem_shiphead_id=pshipheadid))
	      GROUP BY toitem_id, toitem_item_id,
		       toitem_qty_received, toitem_qty_ordered LOOP

      -- don&#39;t allow recall if it&#39;s already been received at the dest
      IF (_ti.qty &gt; _ti.toitem_qty_ordered - _ti.toitem_qty_received) THEN
	RETURN -3;
      END IF;

      IF (SELECT (itemsite_loccntrl OR itemsite_controlmethod IN (&#39;L&#39;, &#39;S&#39;))
	  FROM itemsite
	  WHERE ((itemsite_item_id=_ti.toitem_item_id)
	    AND  (itemsite_warehous_id=_to.tohead_trns_warehous_id))) THEN
	IF (_itemlocSeries = 0 OR _itemlocSeries IS NULL) THEN
	  _itemlocSeries := NEXTVAL(&#39;itemloc_series_seq&#39;);
	END IF;
      END IF;
      
      SELECT postInvTrans(si.itemsite_id, &#39;TS&#39;, _ti.qty, &#39;I/M&#39;,
			  _shiphead.shiphead_order_type, _to.tohead_number,
			  _to.tohead_number,
			  &#39;Recall Shipment from Transit To Src Warehouse&#39;,
			  tc.costcat_shipasset_accnt_id,
			  sc.costcat_asset_accnt_id,
			  _itemlocSeries, _timestamp) INTO _invhistid
      FROM itemsite AS ti, costcat AS tc,
	   itemsite AS si, costcat AS sc
      WHERE ( (ti.itemsite_costcat_id=tc.costcat_id)
        AND  (si.itemsite_costcat_id=sc.costcat_id)
        AND  (ti.itemsite_item_id=_ti.toitem_item_id)
        AND  (si.itemsite_item_id=_ti.toitem_item_id)
        AND  (ti.itemsite_warehous_id=_to.tohead_src_warehous_id)
        AND  (si.itemsite_warehous_id=_to.tohead_trns_warehous_id) );

      IF (_invhistid &lt; 0) THEN
	RETURN _invhistid;
      END IF;

      -- record inventory history and qoh changes at transit warehouse but
      -- there is only one g/l account to touch
      SELECT postInvTrans(ti.itemsite_id, &#39;TR&#39;, _ti.qty, &#39;I/M&#39;,
			  _shiphead.shiphead_order_type, _to.tohead_number,
			  _to.tohead_number,
			  &#39;Recall Shipment from Transit To Src Warehouse&#39;,
			  tc.costcat_asset_accnt_id,
			  tc.costcat_asset_accnt_id,
			  _itemlocSeries, _timestamp,
			  (invhist_invqty * invhist_unitcost)) INTO _invhistid
      FROM itemsite AS ti, costcat AS tc, invhist
      WHERE ((ti.itemsite_costcat_id=tc.costcat_id)
        AND  (ti.itemsite_item_id=_ti.toitem_item_id)
        AND  (ti.itemsite_warehous_id=_to.tohead_src_warehous_id)
        AND  (invhist_id=_invhistid));

      IF (_invhistid &lt; 0) THEN
	RETURN _invhistid;
      END IF;

      UPDATE toitem
      SET toitem_qty_shipped = (toitem_qty_shipped - _ti.qty)
      WHERE (toitem_id=_ti.toitem_id);

      UPDATE shipitem SET shipitem_shipdate=NULL, shipitem_shipped=FALSE
      WHERE ((shipitem_orderitem_id=_ti.toitem_id)
        AND  (shipitem_shiphead_id=pshipheadid));

      DELETE FROM recv
	WHERE ((recv_orderitem_id=_ti.toitem_id)
	  AND  (recv_order_type=&#39;TO&#39;)
	  AND  (NOT recv_posted));

    END LOOP;

  END IF;

  UPDATE shiphead
  SET shiphead_shipped=FALSE
  WHERE (shiphead_id=pshipheadid);

  RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.recallwo-integer-boolean">recallwo( integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid ALIAS FOR $1;
  recallChildren ALIAS FOR $2;
  returnCode INTEGER;

BEGIN

  UPDATE wo
  SET wo_status=&#39;E&#39;
  WHERE ((wo_status=&#39;R&#39;)
   AND (wo_id=pWoid));

  IF (recallChildren) THEN
    returnCode := (SELECT MAX(recallWo(wo_id, TRUE))
                   FROM wo
                   WHERE ((wo_ordtype=&#39;W&#39;)
                    AND (wo_ordid=pWoid)));
  END IF;

  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.receipts-text">receipts( text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTransType ALIAS FOR $1;

BEGIN
  IF (pTransType IN (&#39;RM&#39;, &#39;RB&#39;, &#39;RT&#39;, &#39;RP&#39;, &#39;RR&#39;, &#39;RX&#39;, &#39;TR&#39;)) THEN
    RETURN TRUE;
  ELSE
    RETURN FALSE;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.releaseapmemonumber-integer">releaseapmemonumber( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pNumber ALIAS FOR $1;
  _test INTEGER;

BEGIN

--  Check to see if a A/R Open Item exists with the passed number
  SELECT apopen_id INTO _test
  FROM apopen
  WHERE ( (apopen_doctype IN (&#39;D&#39;, &#39;C&#39;))
   AND (apopen_docnumber=CAST(pNumber AS TEXT)) );

  IF (FOUND) THEN
    RETURN FALSE;
  END IF;

--  Check to see if APMemoNumber orderseq has been incremented past the passed number
  SELECT orderseq_number INTO _test
  FROM orderseq
  WHERE (orderseq_name=&#39;APMemoNumber&#39;);

  IF ((_test - 1) &lt;&gt; pNumber) THEN
    RETURN FALSE;
  END IF;

--  Decrement the orderseq, releasing the passed number
  UPDATE orderseq
  SET orderseq_number = (orderseq_number - 1)
  WHERE (orderseq_name=&#39;APMemoNumber&#39;);

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.releasearmemonumber-integer">releasearmemonumber( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pNumber ALIAS FOR $1;
  _test INTEGER;

BEGIN

--  Check to see if a A/R Open Item exists with the passed number
  SELECT aropen_id INTO _test
  FROM aropen
  WHERE ( (aropen_doctype IN (&#39;D&#39;, &#39;C&#39;, &#39;R&#39;))
   AND (aropen_docnumber=CAST(pNumber AS TEXT)) );

  IF (FOUND) THEN
    RETURN FALSE;
  END IF;

--  Check to see if ARMemoNumber orderseq has been incremented past the passed number
  SELECT orderseq_number INTO _test
  FROM orderseq
  WHERE (orderseq_name=&#39;ARMemoNumber&#39;);

  IF ((_test - 1) &lt;&gt; pNumber) THEN
    RETURN FALSE;
  END IF;

--  Decrement the orderseq, releasing the passed number
  UPDATE orderseq
  SET orderseq_number = (orderseq_number - 1)
  WHERE (orderseq_name=&#39;ARMemoNumber&#39;);

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.releasecmnumber-integer">releasecmnumber( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN releasecmnumber(CAST($1 AS TEXT));
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.releasecmnumber-text">releasecmnumber( text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCmNumber ALIAS FOR $1;
  _test INTEGER;

BEGIN

--  Check to see if a C/M exists with the passed C/M Number
  SELECT cmhead_id INTO _test
  FROM cmhead
  WHERE (cmhead_number=pCmNumber);

  IF (FOUND) THEN
    RETURN FALSE;
  END IF;

--  Check to see if CmNumber orderseq has been incremented past the passed S/O Number
  SELECT orderseq_number INTO _test
  FROM orderseq
  WHERE (orderseq_name=&#39;CmNumber&#39;);

  IF (CAST(_test   AS INTEGER) - 1 &lt;&gt;
      CAST(pCmNumber AS INTEGER)) THEN
    RETURN FALSE;
  END IF;

--  Decrement the CmNumber orderseq, releasing the passed C/M Number
  UPDATE orderseq
  SET orderseq_number = (orderseq_number - 1)
  WHERE (orderseq_name=&#39;CmNumber&#39;);

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.releasecrmaccountnumber-integer">releasecrmaccountnumber( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pNumber ALIAS FOR $1;
  _test INTEGER;

BEGIN

--  Check to see if a Inident exists with the passed Number
  SELECT id INTO _test
    FROM ( SELECT crmacct_id AS id
             FROM crmacct
            WHERE(crmacct_number=text(pNumber))
            UNION
           SELECT cust_id
             FROM custinfo
            WHERE (cust_number=text(pNumber))
            UNION
           SELECT prospect_id
             FROM prospect
            WHERE (prospect_number=text(pNumber))
            UNION
           SELECT vend_id
             FROM vendinfo
            WHERE (vend_number=text(pNumber))
            UNION
           SELECT taxauth_id
             FROM taxauth
            WHERE (taxauth_code=text(pNumber))
         ) AS data;

  IF (FOUND) THEN
    RETURN FALSE;
  END IF;

--  Check to see if Number orderseq has been incremented past the passed Number
  SELECT orderseq_number INTO _test
    FROM orderseq
   WHERE (orderseq_name=&#39;CRMAccountNumber&#39;);

  IF ((_test - 1) &lt;&gt; pNumber) THEN
    RETURN FALSE;
  END IF;

--  Decrement the Number orderseq, releasing the passed Number
  UPDATE orderseq
     SET orderseq_number = (orderseq_number - 1)
   WHERE (orderseq_name=&#39;CRMAccountNumber&#39;);

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.releaseheadlock-text-integer">releaseheadlock( text, integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  ptable	ALIAS FOR $1;
  pheadid	ALIAS FOR $2;

BEGIN
  DELETE FROM headlock
   WHERE ( (headlock_head_id=pheadid)
     AND   (headlock_table=ptable)
     AND   (headlock_username=CURRENT_USER)
     AND   (headlock_procpid=pg_backend_pid()) );

  RETURN TRUE;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.releaseincidentnumber-integer">releaseincidentnumber( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pNumber ALIAS FOR $1;

BEGIN

  RETURN (releaseNumber(&#39;IncidentNumber&#39;, pNumber) = 1);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.releaseinvcnumber-integer">releaseinvcnumber( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN releaseInvcNumber(CAST($1 AS TEXT));
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.releaseinvcnumber-text">releaseinvcnumber( text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pNumber ALIAS FOR $1;
  _test INTEGER;

BEGIN

--  Check to see if a Invoice exists with the passed Number
  SELECT invchead_id INTO _test
  FROM invchead
  WHERE (invchead_invcnumber=pNumber);

  IF (FOUND) THEN
    RETURN FALSE;
  END IF;

--  Check to see if InvcNumber orderseq has been incremented past the passed Number
  SELECT orderseq_number INTO _test
  FROM orderseq
  WHERE (orderseq_name=&#39;InvcNumber&#39;);

  IF (CAST(_test   AS INTEGER) - 1 &lt;&gt;
      CAST(pNumber AS INTEGER)) THEN
    RETURN FALSE;
  END IF;

--  Decrement the InvcNumber orderseq, releasing the passed Invc Number
  UPDATE orderseq
  SET orderseq_number = (orderseq_number - 1)
  WHERE (orderseq_name=&#39;InvcNumber&#39;);

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.releasenumber-text-integer">releasenumber( text, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  psequence	ALIAS FOR $1;
  pnumber	ALIAS FOR $2;
  _isManual     BOOLEAN;
  _test		INTEGER;
  _number	TEXT;
  _table	TEXT;
  _numcol	TEXT;

BEGIN
  -- get the current state of the sequence
  SELECT orderseq_number, orderseq_table, orderseq_numcol
      INTO _number, _table, _numcol
  FROM orderseq
  WHERE (orderseq_name=psequence);
  IF (NOT FOUND) THEN
    RAISE EXCEPTION &#39;Invalid orderseq_name %&#39;, psequence;
  END IF;

  -- check if an order exists with the given order number
  EXECUTE &#39;SELECT &#39; || quote_ident(_numcol) ||
	  &#39; FROM &#39;  || quote_ident(_table) ||
	  &#39; WHERE (&#39; || quote_ident(_numcol) || &#39;=&#39; ||
          quote_literal(_number) || &#39;);&#39;
  INTO _test;

  -- check if order seq has been incremented past the given order number
  -- S/O code reads: IF ((_test - 1) &lt;&gt; pSoNumber) THEN
  -- but the following /should/ address bug 4020 (can&#39;t reproduce it to test)
  IF (FOUND AND ((_test - 1) &gt; pnumber)) THEN
    RETURN 0;
  END IF;

  SELECT metric_value = &#39;M&#39; INTO _isManual
  FROM metric
  WHERE (metric_name = CASE WHEN psequence=&#39;CmNumber&#39; THEN &#39;CMNumberGeneration&#39;
                            WHEN psequence=&#39;SoNumber&#39; THEN &#39;CONumberGeneration&#39;
                            WHEN psequence=&#39;InvcNumber&#39; THEN &#39;InvcNumberGeneration&#39;
                            WHEN psequence=&#39;PoNumber&#39; THEN &#39;PONumberGeneration&#39;
                            WHEN psequence=&#39;PrNumber&#39; THEN &#39;PrNumberGeneration&#39;
                            WHEN psequence=&#39;QuNumber&#39; THEN &#39;QUNumberGeneration&#39;
                            WHEN psequence=&#39;RaNumber&#39; THEN &#39;RANumberGeneration&#39;
                       --   WHEN psequence=&#39;??Number&#39; THEN &#39;ShipmentNumberGeneration&#39;
                            WHEN psequence=&#39;ToNumber&#39; THEN &#39;TONumberGeneration&#39;
                            WHEN psequence=&#39;VcNumber&#39; THEN &#39;VoucherNumberGeneration&#39;
                            WHEN psequence=&#39;WoNumber&#39; THEN &#39;WONumberGeneration&#39;
                            ELSE NULL
                       END);

  -- release the given order number for reuse
  IF (NOT FOUND OR NOT _isManual) THEN
    UPDATE orderseq
    SET orderseq_number = (orderseq_number - 1)
    WHERE (orderseq_name=psequence);
  ELSE
    RAISE NOTICE &#39;cannot update orderseq&#39;;
  END IF;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.releaseponumber-integer">releaseponumber( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN releasePoNumber(CAST($1 AS TEXT));
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.releaseponumber-text">releaseponumber( text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPoNumber ALIAS FOR $1;
  _test INTEGER;

BEGIN

--  Check to see if a P/O exists with the passed P/O Number
  SELECT pohead_id INTO _test
  FROM pohead
  WHERE (pohead_number=pPoNumber);

  IF (FOUND) THEN
    RETURN FALSE;
  END IF;

--  Check to see if PoNumber orderseq has been incremented past the passed P/O Number
  SELECT orderseq_number INTO _test
  FROM orderseq
  WHERE (orderseq_name=&#39;PoNumber&#39;);

  IF (CAST(_test - 1 AS TEXT) &lt;&gt; pPoNumber) THEN
    RETURN FALSE;
  END IF;

--  Decrement the PoNumber orderseq, releasing the passed P/O Number
  UPDATE orderseq
  SET orderseq_number = (orderseq_number - 1)
  WHERE (orderseq_name=&#39;PoNumber&#39;);

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.releaseprnumber-integer">releaseprnumber( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pNumber ALIAS FOR $1;
  _test INTEGER;

BEGIN

--  Check to see if a P/R exists with the passed P/R Number
  SELECT pr_id INTO _test
  FROM pr
  WHERE (pr_number=pNumber);

  IF (FOUND) THEN
    RETURN FALSE;
  END IF;

--  Check to see if the PrNumber orderseq has been incremented past the
--  passed P/R Number
  SELECT orderseq_number INTO _test
  FROM orderseq
  WHERE (orderseq_name=&#39;PrNumber&#39;);

  IF ((_test - 1) &lt;&gt; pNumber) THEN
    RETURN FALSE;
  END IF;

--  Decrement the PrNumber orderseq, releasing the passed P/R Number
  UPDATE orderseq
  SET orderseq_number = (orderseq_number - 1)
  WHERE (orderseq_name=&#39;PrNumber&#39;);

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.releasequnumber-integer">releasequnumber( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pQuNumber ALIAS FOR $1;
  _test INTEGER;

BEGIN

--  Check to see if a Quote exists with the passed Quote Number
  SELECT quhead_id INTO _test
  FROM quhead
  WHERE (quhead_number=pQuNumber);

  IF (FOUND) THEN
    RETURN FALSE;
  END IF;

--  Check to see if QuNumber orderseq has been incremented past the
--  passed Quote Number
  SELECT orderseq_number INTO _test
  FROM orderseq
  WHERE (orderseq_name=&#39;QuNumber&#39;);

  IF ((_test - 1) &lt;&gt; pQuNumber) THEN
    RETURN FALSE;
  END IF;

--  Decrement the QuNumber orderseq, releasing the passed Quote Number
  UPDATE orderseq
  SET orderseq_number = (orderseq_number - 1)
  WHERE (orderseq_name=&#39;QuNumber&#39;);

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.releaseshipmentnumber-integer">releaseshipmentnumber( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pNumber ALIAS FOR $1;
  _test INTEGER;

BEGIN

--  Check to see if a Shipment exists with the passed number
  SELECT shiphead_id INTO _test
  FROM shiphead
  WHERE (shiphead_number=pNumber);

  IF (FOUND) THEN
    RETURN FALSE;
  END IF;

--  Check to see if ShipmentNumber orderseq has been incremented past the passed number
  SELECT orderseq_number INTO _test
  FROM orderseq
  WHERE (orderseq_name=&#39;ShipmentNumber&#39;);

  IF ((_test - 1) &lt;&gt; pNumber) THEN
    RETURN FALSE;
  END IF;

--  Decrement the orderseq, releasing the passed number
  UPDATE orderseq
  SET orderseq_number = (orderseq_number - 1)
  WHERE (orderseq_name=&#39;ShipmentNumber&#39;);

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.releasesohead-integer">releasesohead( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSoheadid ALIAS FOR $1;

BEGIN

  DELETE FROM soheadlock
   WHERE ( (soheadlock_sohead_id=pSoheadid)
     AND   (soheadlock_username=CURRENT_USER)
     AND   (soheadlock_procpid=pg_backend_pid()) );

  RETURN TRUE;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.releasesonumber-integer">releasesonumber( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSoNumber ALIAS FOR $1;
  _test INTEGER;

BEGIN
--  Check to see if a S/O exists with the passed S/O Number
  SELECT cohead_id INTO _test
  FROM cohead
  WHERE (cohead_number=CAST(pSoNumber AS text));

  IF (FOUND) THEN
    RETURN FALSE;
  END IF;

--  Check to see if SoNumber orderseq has been incremented past the passed S/O Number
  SELECT orderseq_number INTO _test
  FROM orderseq
  WHERE (orderseq_name=&#39;SoNumber&#39;);

  IF ((_test - 1) &lt;&gt; pSoNumber) THEN
    RETURN FALSE;
  END IF;

--  Decrement the SoNumber orderseq, releasing the passed S/O Number
  UPDATE orderseq
  SET orderseq_number = (orderseq_number - 1)
  WHERE (orderseq_name=&#39;SoNumber&#39;);

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.releaseunusedbillingheader-integer">releaseunusedbillingheader( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCobmiscid ALIAS FOR $1;
  _p RECORD;

BEGIN

  IF ( ( SELECT cobmisc_posted
         FROM cobmisc
         WHERE (cobmisc_id=pCobmiscid) ) ) THEN
    RETURN -1;
  END IF;

  SELECT cobill_id INTO _p
    FROM cobill
   WHERE (cobill_cobmisc_id=pCobmiscid)
   LIMIT 1;
  IF (FOUND) THEN
    RETURN -2;
  END IF;

  DELETE FROM cobmisc
  WHERE (cobmisc_id=pCobmiscid);

  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.releasevonumber-integer">releasevonumber( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVoNumber ALIAS FOR $1;
  _test INTEGER;

BEGIN

--  Check to see if a Voucher exists with the passed Voucher Number
  SELECT vohead_id INTO _test
  FROM vohead
  WHERE (vohead_number=text(pVoNumber));

  IF (FOUND) THEN
    RETURN FALSE;
  END IF;

--  Check to see if VcNumber orderseq has been incremented past the passed Voucher Number
  SELECT orderseq_number INTO _test
  FROM orderseq
  WHERE (orderseq_name=&#39;VcNumber&#39;);

  IF ((_test - 1) &lt;&gt; pVoNumber) THEN
    RETURN FALSE;
  END IF;

--  Decrement the VcNumber orderseq, releasing the passed Voucher Number
  UPDATE orderseq
  SET orderseq_number = (orderseq_number - 1)
  WHERE (orderseq_name=&#39;VcNumber&#39;);

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.releasewo-integer-boolean">releasewo( integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid ALIAS FOR $1;
  releaseChildren ALIAS FOR $2;
  returnCode INTEGER;
BEGIN
  UPDATE wo
  SET wo_status=&#39;R&#39;
  WHERE ((wo_status=&#39;E&#39;)
   AND (wo_id=pWoid));

  IF (releaseChildren) THEN
    returnCode := (SELECT MAX(releaseWo(wo_id, TRUE))
                   FROM wo
                   WHERE ((wo_ordtype=&#39;W&#39;)
                    AND (wo_ordid=pWoid)));
  END IF;

  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.releasewonumber-integer">releasewonumber( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoNumber ALIAS FOR $1;
  _test INTEGER;

BEGIN

--  Check to see if a W/O exists with the passed W/O Number
  SELECT wo_id INTO _test
  FROM wo
  WHERE (wo_number=pWoNumber);

  IF (FOUND) THEN
    RETURN FALSE;
  END IF;

--  Check to see if WoNumber orderseq has been incremented past the passed W/O Number
  SELECT orderseq_number INTO _test
  FROM orderseq
  WHERE (orderseq_name=&#39;WoNumber&#39;);

  IF ((_test - 1) &lt;&gt; pWoNumber) THEN
    RETURN FALSE;
  END IF;

--  Decrement the WoNumber orderseq, releasing the passed W/O Number
  UPDATE orderseq
  SET orderseq_number = (orderseq_number - 1)
  WHERE (orderseq_name=&#39;WoNumber&#39;);

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.relocateinventory-integer-integer-integer-numeric-text">relocateinventory( integer, integer, integer, numeric, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN relocateInventory($1, $2, $3, $4, $5, CURRENT_TIMESTAMP);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.relocateinventory-integer-integer-integer-numeric-text-timestamp-with-time-zone">relocateinventory( integer, integer, integer, numeric, text, timestamp with time zone )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSourceItemlocid      ALIAS FOR $1;
  pTargetLocationid     ALIAS FOR $2;
  pItemsiteid           ALIAS FOR $3;
  pQty                  ALIAS FOR $4;
  pComments             ALIAS FOR $5;
  _GlDistTS             TIMESTAMP WITH TIME ZONE := $6;
  _targetItemlocid      INTEGER;
  _invhistid            INTEGER;
  _p RECORD;
  _qty NUMERIC;

BEGIN

    IF ((_GlDistTS IS NULL) OR (CAST(_GlDistTS AS date)=CURRENT_DATE)) THEN
      _GlDistTS := CURRENT_TIMESTAMP;
    END IF;

--  Make sure the passed itemsite points to a real item
  IF ( ( SELECT (item_type IN (&#39;R&#39;, &#39;F&#39;, &#39;J&#39;))
         FROM itemsite, item
         WHERE ( (itemsite_item_id=item_id)
          AND (itemsite_id=pItemsiteid) ) ) ) THEN
    RETURN 0;
  END IF;

--  Cache some parameters
  SELECT itemloc_ls_id,
         itemloc_itemsite_id AS itemsiteid,
         itemloc_expiration,
         itemloc_warrpurc,
         itemloc_qty,
         sourceloc.location_netable AS sourcenet,
         targetloc.location_netable AS targetnet INTO _p
  FROM itemloc, location AS sourceloc, location AS targetloc
  WHERE ( (itemloc_location_id=sourceloc.location_id)
   AND (targetloc.location_id=pTargetLocationid)
   AND (itemloc_id=pSourceItemlocid) );

--  Check to make sure the qty being transfered exists
  IF (_p.itemloc_qty &lt; pQty) THEN
    RETURN -1;
  END IF;

--  Create the RL transaction
  SELECT NEXTVAL(&#39;invhist_invhist_id_seq&#39;) INTO _invhistid;
  INSERT INTO invhist
  ( invhist_id, invhist_itemsite_id,
    invhist_transtype, invhist_invqty,
    invhist_qoh_before, invhist_qoh_after,
    invhist_comments,   invhist_transdate,
    invhist_invuom, invhist_unitcost, invhist_costmethod,
    invhist_value_before, invhist_value_after) 
  SELECT _invhistid, itemsite_id,
         &#39;RL&#39;, 0,
         itemsite_qtyonhand, itemsite_qtyonhand,
         pComments, _GlDistTS,
         uom_name,
         CASE WHEN (itemsite_costmethod=&#39;A&#39;) THEN avgcost(itemsite_id)
              ELSE stdCost(item_id)
         END, itemsite_costmethod,
         itemsite_value, itemsite_value
  FROM item, itemsite, uom
  WHERE ((itemsite_item_id=item_id)
   AND (item_inv_uom_id=uom_id)
   AND (itemsite_controlmethod &lt;&gt; &#39;N&#39;)
   AND (itemsite_id=pItemsiteid));

--  Relocate the inventory from the source and record the transactions
  INSERT INTO invdetail
  ( invdetail_invhist_id, invdetail_location_id, invdetail_ls_id,
    invdetail_qty, invdetail_qty_before, invdetail_qty_after,
    invdetail_expiration, invdetail_warrpurc )
  SELECT _invhistid, itemloc_location_id, itemloc_ls_id,
         (pQty * -1), itemloc_qty, (itemloc_qty - pQty),
         itemloc_expiration, itemloc_warrpurc
  FROM itemloc
  WHERE (itemloc_id=pSourceItemlocid);

  UPDATE itemloc
  SET itemloc_qty=(itemloc_qty - pQty)
  FROM itemsite
  WHERE ( (itemloc_itemsite_id=itemsite_id)
   AND (NOT itemsite_freeze)
   AND (itemloc_id=pSourceItemlocid) );

--  Check to see if there is anything left at the source Itemloc and delete if not
  DELETE FROM itemloc
  WHERE ( (itemloc_qty=0)
   AND (itemloc_id=pSourceItemlocid) );

--  Check to see if any of the current Lot/Serial #/Expiration exists at the target location
  SELECT itemloc_id INTO _targetItemlocid
  FROM itemloc 
  WHERE ( (COALESCE(itemloc_ls_id, -1)=COALESCE(_p.itemloc_ls_id,-1))
   AND (itemloc_expiration=_p.itemloc_expiration)
   AND (COALESCE(itemloc_warrpurc,endOfTime())=COALESCE(_p.itemloc_warrpurc,endOfTime()))
   AND (itemloc_itemsite_id=pItemsiteid)
   AND (itemloc_location_id=pTargetLocationid) );

  IF (NOT FOUND) THEN
    SELECT NEXTVAL(&#39;itemloc_itemloc_id_seq&#39;) INTO _targetItemlocid;
    INSERT INTO itemloc
    ( itemloc_id, itemloc_itemsite_id, itemloc_location_id,
      itemloc_ls_id, itemloc_expiration, itemloc_warrpurc, itemloc_qty )
    VALUES
    ( _targetItemlocid, pItemsiteid, pTargetLocationid,
      _p.itemloc_ls_id, _p.itemloc_expiration, _p.itemloc_warrpurc, 0 );
  END IF;

--  Relocate the inventory to the resultant target and record the transactions
  INSERT INTO invdetail
  ( invdetail_invhist_id, invdetail_location_id, invdetail_ls_id,
    invdetail_qty, invdetail_qty_before, invdetail_qty_after,
    invdetail_expiration, invdetail_warrpurc )
  SELECT _invhistid, pTargetLocationid, _p.itemloc_ls_id,
         pQty, itemloc_qty, (itemloc_qty + pQty), 
         _p.itemloc_expiration, _p.itemloc_warrpurc
  FROM itemloc
  WHERE (itemloc_id=_targetItemlocid);

  UPDATE itemloc
  SET itemloc_qty=(itemloc_qty + pQty)
  FROM itemsite
  WHERE ( (itemloc_itemsite_id=itemsite_id)
   AND (NOT itemsite_freeze)
   AND (itemloc_id=_targetItemlocid) );

  UPDATE invhist
  SET invhist_hasdetail=TRUE
  WHERE (invhist_id=_invhistid);

--  Post in incomming or outgoing NN transaction if required
  IF (_p.sourcenet &lt;&gt; _p.targetnet) THEN
    IF (_p.targetnet) THEN
      _qty = (pQty * -1);
    ELSE
      _qty = pQty;
    END IF;

    INSERT INTO invhist
    ( invhist_itemsite_id,
      invhist_transtype, invhist_invqty,
      invhist_qoh_before, invhist_qoh_after,
      invhist_docnumber, invhist_comments, invhist_transdate,
      invhist_invuom, invhist_unitcost, invhist_costmethod,
      invhist_value_before, invhist_value_after) 
    SELECT itemsite_id,
           &#39;NN&#39;, (_qty * -1),
           itemsite_qtyonhand, (itemsite_qtyonhand - _qty),
           &#39;&#39;, &#39;&#39;, _GlDistTS,
           uom_name,
           CASE WHEN (itemsite_costmethod=&#39;A&#39;) THEN avgcost(itemsite_id)
                ELSE stdCost(item_id)
           END, itemsite_costmethod,
           itemsite_value, itemsite_value
    FROM item, itemsite, uom
    WHERE ( (itemsite_item_id=item_id)
     ANd (item_inv_uom_id=uom_id)
     AND (itemsite_controlmethod &lt;&gt; &#39;N&#39;)
     AND (itemsite_id=_p.itemsiteid) );

    UPDATE itemsite
    SET itemsite_qtyonhand = (itemsite_qtyonhand - _qty),
        itemsite_nnqoh = (itemsite_nnqoh + _qty)
    WHERE (itemsite_id=_p.itemsiteid);
  END IF;

--  Return the invhist_id
  RETURN _invhistid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.reorderdate-integer-integer-boolean">reorderdate( integer, integer, boolean )</a>
		</h2>
<h3>Returns: date</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pLookAhead ALIAS FOR $2;
  pIncludePlanned ALIAS FOR $3;
  _runningAvailability NUMERIC;
  _reorderLevel NUMERIC;
  _availability RECORD;

BEGIN

--  Make sure that we know how to handle the passed part
  IF ( SELECT (NOT (item_type IN (&#39;M&#39;, &#39;P&#39;)))
       FROM item, itemsite
       WHERE ( (itemsite_item_id=item_id)
        AND (itemsite_id=pItemsiteid) ) ) THEN
    RETURN NULL;
  END IF;

--  Load the initial QOH
  SELECT itemsite_qtyonhand INTO _runningAvailability
  FROM itemsite
  WHERE (itemsite_id=pItemsiteid);

--  Grab the Reorder Level, if any
  IF ( ( SELECT itemsite_useparams
         FROM itemsite
         WHERE (itemsite_id=pItemsiteid) ) ) THEN
    SELECT itemsite_reorderlevel INTO _reorderLevel
    FROM itemsite
    WHERE (itemsite_id=pItemsiteid);
  ELSE
    _reorderLevel := 0;
  END IF;

--  If we are already below the Reorder Level then we should order ASAP
  IF (_runningAvailability &lt;= _reorderLevel) THEN
    RETURN CURRENT_DATE;
  END IF;

--  Grab all of the availability trigger points
  FOR _availability IN SELECT 1 AS seq,
                              wo_duedate AS orderdate,
                              (noNeg(wo_qtyord - wo_qtyrcv)) AS balance
                       FROM wo
                       WHERE ((wo_status IN (&#39;O&#39;, &#39;E&#39;, &#39;R&#39;, &#39;I&#39;))
                        AND (wo_duedate &lt;= (CURRENT_DATE + pLookAhead))
                        AND (wo_itemsite_id=pItemsiteid))

                      UNION SELECT 2 AS seq,
                                   womatl_duedate AS orderdate,
                                   (noNeg(itemuomtouom(itemsite_item_id, womatl_uom_id, NULL, womatl_qtyreq - womatl_qtyiss)) * -1) AS balance
                      FROM womatl, wo, itemsite
                      WHERE ((wo_status IN (&#39;O&#39;, &#39;E&#39;, &#39;R&#39;, &#39;I&#39;))
                       AND (womatl_wo_id=wo_id)
                       AND (womatl_itemsite_id=itemsite_id)
                       AND (womatl_duedate &lt;= (CURRENT_DATE + pLookahead))
                       AND (womatl_itemsite_id=pItemsiteid))

                      UNION SELECT 1 AS seq,
                                   poitem_duedate AS orderdate,
                                   (noNeg(poitem_qty_ordered - poitem_qty_received) * poitem_invvenduomratio) AS balance
                      FROM pohead, poitem
                      WHERE ((poitem_pohead_id=pohead_id)
                       AND (poitem_status = &#39;O&#39;)
                       AND (poitem_duedate &lt;= (CURRENT_DATE + pLookAhead))
                       AND (poitem_itemsite_id=pItemsiteid))

                      UNION SELECT 2 AS seq,
                                   coitem_scheddate AS orderdate,
                                   (noNeg(coitem_qtyord - coitem_qtyshipped + coitem_qtyreturned) * -1) AS balance
                      FROM coitem, cohead
                      WHERE ((coitem_status = &#39;O&#39;)
                       AND (coitem_cohead_id=cohead_id)
                       AND (coitem_scheddate &lt;= (CURRENT_DATE + pLookAhead))
                       AND (coitem_itemsite_id=pItemsiteid))

                      UNION SELECT 2 AS seq,
                                   planord_startdate AS orderdate,
                                   (planreq_qty * -1) AS balance
                      FROM planreq, planord
                      WHERE ( (pIncludePlanned)
                       AND (planreq_source=&#39;P&#39;)
                       AND (planreq_source_id=planord_id)
                       AND (planord_startdate &lt;= (CURRENT_DATE + pLookAhead))
                       AND (planord_itemsite_id=pItemsiteid) )

                      UNION SELECT 1 AS seq,
                                   planord_duedate AS orderdate,
                                   planord_qty AS balance
                      FROM planord
                      WHERE ( (pIncludePlanned)
                       AND (planord_duedate &lt;= (CURRENT_DATE + pLookAhead))
                       AND (planord_itemsite_id=pItemsiteid) )

                      ORDER BY orderdate, seq LOOP

--  Calculate the new projected availability
    _runningAvailability := (_runningAvailability + _availability.balance);

--  Check to see if the project availability drop below the reorder level
    IF (_runningAvailability &lt; _reorderLevel) THEN
      RETURN _availability.orderdate;
    END IF;

  END LOOP;

--  The reorder level was not reached within the look ahead period
  RETURN NULL;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.replaceallvoidedapchecks-integer">replaceallvoidedapchecks( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RAISE NOTICE &#39;replaceAllVoidedAPChecks() is deprecated - use replaceAllVoidedChecks() instead&#39;;
  RETURN replaceAllVoidedChecks($1);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.replaceallvoidedchecks-integer">replaceallvoidedchecks( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBankaccntid	ALIAS FOR $1;
  _returnValue	INTEGER := 0;

BEGIN

  SELECT MIN(replaceVoidedCheck(checkhead_id)) INTO _returnValue
    FROM checkhead
    WHERE ( (checkhead_void)
     AND (NOT checkhead_posted)
     AND (NOT checkhead_replaced)
     AND (NOT checkhead_deleted)
     AND (checkhead_bankaccnt_id=pBankaccntid) );

  RETURN _returnValue;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.replacevoidedapcheck-integer">replacevoidedapcheck( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RAISE NOTICE &#39;replaceVoidedAPCheck() is deprecated - use replaceVoidedCheck()&#39;;
  RETURN replaceVoidedCheck($1);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.replacevoidedcheck-integer">replacevoidedcheck( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCheckid	ALIAS FOR $1;
  _newCheckid	INTEGER;

BEGIN
  IF ( ( SELECT ( (NOT checkhead_void) OR checkhead_posted OR checkhead_replaced )
         FROM checkhead
         WHERE (checkhead_id=pCheckid) ) ) THEN
    RETURN -1;
  END IF;

  -- has someone created a new check for one of the items while this was void?
  IF EXISTS (SELECT dup.checkitem_id
             FROM checkitem orig, checkitem dup, checkhead AS duphead
             WHERE ((COALESCE(orig.checkitem_aropen_id,-1)=COALESCE(dup.checkitem_aropen_id,-1))
                AND (COALESCE(orig.checkitem_apopen_id,-1)=COALESCE(dup.checkitem_apopen_id,-1))
                AND (orig.checkitem_checkhead_id!=dup.checkitem_checkhead_id)
                AND (dup.checkitem_checkhead_id=duphead.checkhead_id)
                AND (NOT duphead.checkhead_void)
                AND (orig.checkitem_checkhead_id=pCheckid))) THEN
    RETURN -2;
  END IF;

  SELECT NEXTVAL(&#39;checkhead_checkhead_id_seq&#39;) INTO _newCheckid;

  INSERT INTO checkhead
  ( checkhead_id, checkhead_recip_id, checkhead_recip_type,
    checkhead_bankaccnt_id, checkhead_checkdate,
    checkhead_number, checkhead_amount,
    checkhead_for, checkhead_journalnumber,
    checkhead_notes,
    checkhead_misc, checkhead_expcat_id, checkhead_curr_id )
  SELECT _newCheckid, checkhead_recip_id, checkhead_recip_type,
	 checkhead_bankaccnt_id, checkhead_checkdate,
	 -1, -- fetchNextCheckNumber(checkhead_bankaccnt_id),
         checkhead_amount,
	 checkhead_for, checkhead_journalnumber,
         checkhead_notes || &#39;
Replaces voided check &#39; || checkhead_number,
	 checkhead_misc, checkhead_expcat_id, checkhead_curr_id
  FROM checkhead
  WHERE (checkhead_id=pCheckid);

  INSERT INTO checkitem
  ( checkitem_checkhead_id, checkitem_amount, checkitem_discount,
    checkitem_ponumber, checkitem_vouchernumber, checkitem_invcnumber,
    checkitem_apopen_id, checkitem_aropen_id,
    checkitem_docdate, checkitem_curr_id, checkitem_curr_rate )
  SELECT _newCheckid, checkitem_amount, checkitem_discount,
         checkitem_ponumber, checkitem_vouchernumber, checkitem_invcnumber,
	 checkitem_apopen_id, checkitem_aropen_id,
	 checkitem_docdate, checkitem_curr_id, checkitem_curr_rate
  FROM checkitem
  WHERE (checkitem_checkhead_id=pCheckid);

  UPDATE checkhead
  SET checkhead_replaced=TRUE
  WHERE (checkhead_id=pCheckid);

  RETURN _newCheckid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.reportbatchitemerror-integer-text">reportbatchitemerror( integer, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBatchid ALIAS FOR $1;
  pExitStatus ALIAS FOR $2;

BEGIN

  UPDATE batch
  SET batch_completed=CURRENT_TIMESTAMP,
      batch_exitstatus=pExitStatus
  WHERE (batch_id=pBatchid);

  RETURN pBatchid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.reprioritizewo-integer-integer-boolean">reprioritizewo( integer, integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid ALIAS FOR $1;
  pPriority ALIAS FOR $2;
  pChangeChildren ALIAS FOR $3;
  _status CHAR(1);
  _result INTEGER;

BEGIN

  SELECT wo_status INTO _status
  FROM wo
  WHERE (wo_id=pWoid);

  IF (NOT (_status IN (&#39;O&#39;, &#39;E&#39;,&#39;R&#39;,&#39;I&#39;))) THEN
    return -1;
  END IF;

  UPDATE wo
  SET wo_priority=pPriority
  WHERE (wo_id=pWoid);

  IF ( (_status IN (&#39;E&#39;,&#39;R&#39;,&#39;I&#39;)) AND (pChangeChildren) ) THEN
    SELECT COALESCE(MIN(reprioritizeWo(wo_id, pPriority, TRUE)), 1) INTO _result
    FROM wo
    WHERE ( (wo_ordtype=&#39;W&#39;)
     AND (wo_ordid=pWoid) );
  ELSE
    _result = 1;
  END IF;

  RETURN _result;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.reschedulebatchitem-integer-timestamp-with-time-zone">reschedulebatchitem( integer, timestamp with time zone )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBatchid ALIAS FOR $1;
  pScheduled ALIAS FOR $2;

BEGIN

  UPDATE batch
  SET batch_scheduled=pScheduled,
      batch_started=NULL,
      batch_completed=NULL
  WHERE (batch_id=pBatchid);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.reschedulebatchitem-integer-timestamp-with-time-zone-bpchar">reschedulebatchitem( integer, timestamp with time zone, bpchar )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBatchid ALIAS FOR $1;
  pScheduled ALIAS FOR $2;
  pInterval ALIAS FOR $3;

BEGIN

  UPDATE batch
  SET batch_scheduled=pScheduled,
      batch_reschedinterval=pInterval,
      batch_started=NULL,
      batch_completed=NULL
  WHERE (batch_id=pBatchid);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.resetdbobjperms">resetdbobjperms(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _count        INTEGER := 0;
BEGIN
  SELECT SUM(resetDBObjPerms(nspname || &#39;.&#39; || relname)) INTO _count
  FROM pg_catalog.pg_class, pg_catalog.pg_namespace
  WHERE (relkind IN (&#39;r&#39;, &#39;S&#39;, &#39;v&#39;)
    AND  (relnamespace=pg_namespace.oid)
    AND  (nspname IN (&#39;public&#39;, &#39;api&#39;)));

  RETURN _count;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.resetdbobjperms-text">resetdbobjperms( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pObjname      ALIAS FOR $1;
BEGIN
  EXECUTE &#39;ALTER TABLE &#39;   || pObjname || &#39; OWNER TO &#39; || CURRENT_USER || &#39;;&#39;;
  EXECUTE &#39;REVOKE ALL ON &#39; || pObjname || &#39; FROM PUBLIC;&#39;;
  EXECUTE &#39;GRANT  ALL ON &#39; || pObjname || &#39; TO GROUP openmfg;&#39;;
  RETURN 1;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.resetlowlevelcode-integer">resetlowlevelcode( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE

    pItemId ALIAS FOR $1;
    _result	INTEGER;
    _counterNum	INTEGER	:= 1;
    _feedBackNum INTEGER := 1;
    _r                  RECORD;

BEGIN
    DELETE FROM costUpdate;

    IF pItemId = -1 THEN 	-- -1 is an invalid item_id =&gt; do them all
	INSERT INTO costUpdate ( costUpdate_item_id, costUpdate_item_type )
			SELECT item_id, item_type
			FROM   item;

        -- Recalculate the Item Lowlevel codes
        WHILE _feedBackNum &gt; 0 LOOP
            SELECT updateLowlevel(_counterNum) INTO _feedBackNum;
            _counterNum := _counterNum + 1;
        END LOOP;

    ELSE
	INSERT INTO costUpdate ( costUpdate_item_id, costUpdate_item_type )
			SELECT item_id, item_type
			FROM   item
                        WHERE (item_id=pItemId);
      FOR _r IN SELECT item_id, bomdata_bomwork_level, item_type
                FROM item,
                     indentedBOM(pItemId, getActiveRevId(&#39;BOM&#39;,pItemId),0,0)
                WHERE (bomdata_item_id=item_id)
                ORDER BY bomdata_bomwork_level LOOP

        -- this only works because of the ORDER BY in the loop SELECT
        UPDATE costUpdate
        SET costupdate_lowlevel_code = _r.bomdata_bomwork_level
        WHERE (costupdate_item_id=_r.item_id);

        IF (NOT FOUND) THEN
          INSERT INTO costUpdate (
            costUpdate_item_id, costUpdate_lowlevel_code, costUpdate_item_type
          ) VALUES (
            _r.item_id, _r.bomdata_bomwork_level, _r.item_type
          );
        END IF;
      END LOOP;

    END IF;

    SELECT count(*) INTO _result
    FROM costUpdate;

    RETURN _result;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.resetqohbalance-integer">resetqohbalance( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN resetQOHBalance($1, CURRENT_TIMESTAMP);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.resetqohbalance-integer-timestamp-with-time-zone">resetqohbalance( integer, timestamp with time zone )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid   ALIAS FOR $1;
  pGlDistTS     ALIAS FOR $2;
  _invhistid    INTEGER;

BEGIN

  IF ( ( SELECT ( (itemsite_controlmethod IN (&#39;L&#39;, &#39;S&#39;)) OR
                  (item_type IN (&#39;R&#39;, &#39;J&#39;)) OR
                  (itemsite_loccntrl) OR
                  (itemsite_qtyonhand &gt; 0) )
         FROM itemsite, item
         WHERE ( (itemsite_item_id=item_id)
          AND (itemsite_id=pItemsiteid) ) ) ) THEN
    RETURN 0;
  END IF;

  SELECT postInvTrans( itemsite_id, &#39;AD&#39;, (itemsite_qtyonhand * -1),
                       &#39;I/M&#39;, &#39;&#39;, &#39;&#39;, &#39;RESET&#39;,
                       &#39;Reset QOH Balance to 0&#39;,
                       costcat_asset_accnt_id, costcat_adjustment_accnt_id,
                       0, pGlDistTS ) INTO _invhistid
  FROM itemsite, costcat
  WHERE ( (itemsite_costcat_id=costcat_id)
   AND (itemsite_id=pItemsiteid) );

  RETURN _invhistid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.resolvecosaccount-integer-integer">resolvecosaccount( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pCustid ALIAS FOR $2;
  _salesaccntid INTEGER;
  _accntid INTEGER;

BEGIN

  SELECT findSalesAccnt(pItemsiteid, pCustid) INTO _salesaccntid;
  IF (_salesaccntid = -1) THEN
    SELECT metric_value::INTEGER INTO _accntid
    FROM metric
    WHERE (metric_name=&#39;UnassignedAccount&#39;);
  ELSE
    SELECT salesaccnt_cos_accnt_id INTO _accntid
    FROM salesaccnt
    WHERE (salesaccnt_id=_salesaccntid);
  END IF;

  RETURN _accntid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.resolvecowaccount-integer-integer">resolvecowaccount( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pCustid ALIAS FOR $2;
  _salesaccntid INTEGER;
  _accntid INTEGER;

BEGIN

  SELECT findSalesAccnt(pItemsiteid, pCustid) INTO _salesaccntid;
  IF (_salesaccntid = -1) THEN
    SELECT metric_value::INTEGER INTO _accntid
    FROM metric
    WHERE (metric_name=&#39;UnassignedAccount&#39;);
  ELSE
    SELECT salesaccnt_cow_accnt_id INTO _accntid
    FROM salesaccnt
    WHERE (salesaccnt_id=_salesaccntid);
  END IF;

  RETURN _accntid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.resolvecreditaccount-integer-integer">resolvecreditaccount( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pCustid ALIAS FOR $2;
  _salesaccntid INTEGER;
  _accntid INTEGER;

BEGIN

  SELECT findSalesAccnt(pItemsiteid, pCustid) INTO _salesaccntid;
  IF (_salesaccntid = -1) THEN
    SELECT metric_value::INTEGER INTO _accntid
    FROM metric
    WHERE (metric_name=&#39;UnassignedAccount&#39;);
  ELSE
    SELECT salesaccnt_credit_accnt_id INTO _accntid
    FROM salesaccnt
    WHERE (salesaccnt_id=_salesaccntid);
  END IF;

  RETURN _accntid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.resolvesalesaccount-integer-integer">resolvesalesaccount( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pCustid ALIAS FOR $2;
  _salesaccntid INTEGER;
  _accntid INTEGER;

BEGIN

  SELECT findSalesAccnt(pItemsiteid, pCustid) INTO _salesaccntid;
  IF (_salesaccntid = -1) THEN
    SELECT metric_value::INTEGER INTO _accntid
    FROM metric
    WHERE (metric_name=&#39;UnassignedAccount&#39;);
  ELSE
    SELECT salesaccnt_sales_accnt_id INTO _accntid
    FROM salesaccnt
    WHERE (salesaccnt_id=_salesaccntid);
  END IF;

  RETURN _accntid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.restoresaleshistory-integer">restoresaleshistory( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pAsohistid ALIAS FOR $1;

BEGIN

  INSERT INTO cohist ( cohist_id, cohist_cust_id, cohist_itemsite_id,
                       cohist_shipdate, cohist_invcdate, cohist_duedate, cohist_promisedate,
                       cohist_ordernumber, cohist_invcnumber,
                       cohist_qtyshipped, cohist_unitprice, cohist_unitcost,
                       cohist_billtoname, cohist_billtoaddress1, cohist_billtoaddress2,
                       cohist_billtoaddress3, cohist_billtocity, cohist_billtostate, cohist_billtozip,
                       cohist_shiptoname, cohist_shiptoaddress1, cohist_shiptoaddress2,
                       cohist_shiptoaddress3, cohist_shiptocity, cohist_shiptostate, cohist_shiptozip,
                       cohist_shipto_id, cohist_shipvia, cohist_salesrep_id, cohist_tax_id,
                       cohist_misc_type, cohist_misc_descrip, cohist_misc_id,
                       cohist_commission, cohist_commissionpaid,
                       cohist_doctype, cohist_orderdate, cohist_imported,
		       cohist_ponumber, cohist_curr_id )
  SELECT asohist_id, asohist_cust_id, asohist_itemsite_id,
         asohist_shipdate, asohist_invcdate, asohist_duedate, asohist_promisedate,
         asohist_ordernumber::INTEGER, asohist_invcnumber::INTEGER,
         asohist_qtyshipped, asohist_unitprice, asohist_unitcost,
         asohist_billtoname, asohist_billtoaddress1, asohist_billtoaddress2,
         asohist_billtoaddress3, asohist_billtocity, asohist_billtostate, asohist_billtozip,
         asohist_shiptoname, asohist_shiptoaddress1, asohist_shiptoaddress2,
         asohist_shiptoaddress3, asohist_shiptocity, asohist_shiptostate, asohist_shiptozip,
         asohist_shipto_id, asohist_shipvia, asohist_salesrep_id, asohist_tax_id,
         asohist_misc_type, asohist_misc_descrip, asohist_misc_id,
         asohist_commission, asohist_commissionpaid,
         asohist_doctype, asohist_orderdate, asohist_imported,
	 asohist_ponumber, asohist_curr_id
  FROM asohist
  WHERE (asohist_id=pAsohistid);

  DELETE FROM asohist
  WHERE (asohist_id=pAsohistid);

  RETURN pAsohistid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.returncompleteshipment-integer">returncompleteshipment( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN returnCompleteShipment($1, 0, CURRENT_TIMESTAMP);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.returncompleteshipment-integer-integer-timestamp-with-time-zone">returncompleteshipment( integer, integer, timestamp with time zone )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pshipheadid		ALIAS FOR $1;
  _itemlocSeries	INTEGER			 := $2;
  _timestamp		TIMESTAMP WITH TIME ZONE := $3;
  _r RECORD;

BEGIN
  FOR _r IN SELECT shipitem_id
            FROM shipitem, shiphead
            WHERE ( (shipitem_shiphead_id=shiphead_id)
             AND (NOT shiphead_shipped)
             AND (shiphead_id=pshipheadid) ) LOOP
    _itemlocSeries := returnShipmentTransaction(_r.shipitem_id, _itemlocSeries, _timestamp);
  END LOOP;

  DELETE FROM pack
   WHERE(pack_shiphead_id=pshipheadid);
  DELETE FROM shiphead
  WHERE (shiphead_id=pshipheadid);

  RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.returnitemshipments-integer">returnitemshipments( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN returnItemShipments(&#39;SO&#39;, $1, 0, CURRENT_TIMESTAMP);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.returnitemshipments-integer-integer">returnitemshipments( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN returnItemShipments(&#39;SO&#39;, $1, $2, CURRENT_TIMESTAMP);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.returnitemshipments-text-integer-integer-timestamp-with-time-zone">returnitemshipments( text, integer, integer, timestamp with time zone )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pordertype		ALIAS FOR $1;
  pitemid		ALIAS FOR $2;
  _itemlocSeries	INTEGER				:= $3;
  _timestamp		TIMESTAMP WITH TIME ZONE	:= $4;
  _qty NUMERIC;
  _value NUMERIC;
  _invhistid INTEGER;
  _itemtype CHAR(1);
  _oldinvhistid INTEGER;
  _itemlocdistid INTEGER;
  _r RECORD;
  _m RECORD;
  _ils INTEGER;

BEGIN

  SELECT COALESCE(SUM(shipitem_qty), 0),COALESCE(SUM(shipitem_value),0), MAX(shipitem_invhist_id) INTO _qty, _value, _oldinvhistid
  FROM shipitem, shiphead
  WHERE ((shipitem_shiphead_id=shiphead_id)
    AND  (NOT shiphead_shipped)
    AND  (shiphead_order_type=pordertype)
    AND  (shipitem_orderitem_id=pitemid) );

  IF (_qty &lt;&gt; 0) THEN
    IF (_itemlocSeries = 0) THEN
      _itemlocSeries := NEXTVAL(&#39;itemloc_series_seq&#39;);
    END IF;  
  
  --  If no inventory history, the transaction predates new lot/serial return functionality and have
  --  to handle the old way
    IF (_oldinvhistid IS NULL)  THEN
      _ils := _itemlocSeries;
    ELSE
      _ils := 0;
    END IF;

    IF (pordertype = &#39;SO&#39;) THEN
      IF (SELECT (item_type != &#39;J&#39;)
          FROM coitem, itemsite, item
          WHERE ((coitem_id=pItemid)
          AND (coitem_itemsite_id=itemsite_id)
          AND (itemsite_item_id=item_id))) THEN
        SELECT postInvTrans( itemsite_id, &#39;RS&#39;, _qty * coitem_qty_invuomratio,
			  &#39;S/R&#39;, pordertype, formatSoNumber(pitemid),
			  shiphead_number, &#39;Return from Shipping&#39;,
			  costcat_asset_accnt_id, costcat_shipasset_accnt_id,
			  _ils, _timestamp, _value ) INTO _invhistid
        FROM coitem, itemsite, costcat, shiphead, shipitem
        WHERE ( (coitem_itemsite_id=itemsite_id)
         AND (itemsite_costcat_id=costcat_id)
         AND (coitem_id=pitemid)
         AND (shiphead_order_type=pordertype)
         AND (shiphead_id=shipitem_shiphead_id)
         AND (shipitem_orderitem_id=pitemid) );
      
      ELSE
        SELECT insertGLTransaction( &#39;S/R&#39;, &#39;RS&#39;, formatSoNumber(pItemid), &#39;Return from Shipping&#39;,
                                     costcat_shipasset_accnt_id,
				     costcat_wip_accnt_id,
                                     -1, _value, current_date ) INTO _invhistid
        FROM coitem, itemsite, costcat
        WHERE ( (coitem_itemsite_id=itemsite_id)
         AND (itemsite_costcat_id=costcat_id)
         AND (coitem_id=pitemid) )
        GROUP BY costcat_shipasset_accnt_id,costcat_wip_accnt_id;

  --  Reverse Backflush eligble material
      FOR _m IN SELECT womatl_id, womatl_qtyper, womatl_scrap, womatl_qtywipscrap,
		     womatl_qtyreq - roundQty(item_fractional, womatl_qtyper * wo_qtyord) AS preAlloc
	      FROM womatl, wo, itemsite, item
	      WHERE ((womatl_issuemethod = &#39;L&#39;)
		AND  (womatl_wo_id=wo_id)
		AND  (womatl_itemsite_id=itemsite_id)
		AND  (itemsite_item_id=item_id)
		AND  (wo_ordtype = &#39;S&#39;)
		AND  (wo_ordid = pitemid))
      LOOP
        -- CASE says: don&#39;t use scrap % if someone already entered actual scrap
        SELECT returnWoMaterial(_m.womatl_id,
	  CASE WHEN _m.womatl_qtywipscrap &gt; _m.preAlloc THEN
	    _qty * _m.womatl_qtyper + (_m.womatl_qtywipscrap - _m.preAlloc)
	  ELSE
	    _qty * _m.womatl_qtyper * (1 + _m.womatl_scrap)
	  END, _itemlocSeries) INTO _itemlocSeries;

        UPDATE womatl
        SET womatl_issuemethod=&#39;L&#39;
        WHERE ( (womatl_issuemethod=&#39;M&#39;)
          AND (womatl_id=_m.womatl_id) );
    
      END LOOP;

  --  Update the work order about what happened
        UPDATE wo SET 
          wo_qtyrcv = wo_qtyrcv - _qty * coitem_qty_invuomratio,
          wo_wipvalue = wo_wipvalue + _value,
          wo_status =&#39;I&#39;
        FROM coitem
        WHERE ((wo_ordtype = &#39;S&#39;)
        AND (wo_ordid = pItemid)
        AND (coitem_id = pItemid));
      END IF;

    ELSEIF (pordertype = &#39;TO&#39;) THEN
      SELECT postInvTrans( itemsite_id, &#39;RS&#39;, _qty,
			  &#39;S/R&#39;, pordertype, tohead_number,
			  &#39;&#39;, &#39;Return from Shipping&#39;,
			  costcat_asset_accnt_id, costcat_shipasset_accnt_id,
			  _ils, _timestamp, _value ) INTO _invhistid
      FROM toitem, tohead, itemsite, costcat
      WHERE ((toitem_item_id=itemsite_item_id)
        AND  (toitem_tohead_id=tohead_id)
	AND  (tohead_src_warehous_id=itemsite_warehous_id)
        AND  (itemsite_costcat_id=costcat_id)
        AND  (toitem_id=pitemid) );

    ELSE
      RETURN -11;
    END IF;

  --  Find out if there is location or lot/serial detail to undo and handle it 
    FOR _r IN 
      SELECT  itemsite_id, invdetail_ls_id, (invdetail_qty * -1) AS invdetail_qty,
        invdetail_location_id, invdetail_expiration,
        (itemsite_controlmethod IN (&#39;L&#39;, &#39;S&#39;)) AS lotserial,
        (itemsite_loccntrl) AS loccntrl
      FROM shiphead, shipitem, invdetail, invhist, itemsite
      WHERE ( (shipitem_invhist_id=invhist_id)
        AND  (invhist_id=invdetail_invhist_id)
        AND  (invhist_itemsite_id=itemsite_id)
        AND  (shipitem_shiphead_id=shiphead_id)
        AND  (NOT shiphead_shipped)
        AND  (shiphead_order_type=pordertype)
        AND  (shipitem_orderitem_id=pitemid) )
    LOOP
      _itemlocdistid := nextval(&#39;itemlocdist_itemlocdist_id_seq&#39;);
          
      IF (( _r.lotserial) AND (NOT _r.loccntrl))  THEN          
        INSERT INTO itemlocdist
          ( itemlocdist_id, itemlocdist_source_type, itemlocdist_source_id,
            itemlocdist_itemsite_id, itemlocdist_ls_id, itemlocdist_expiration,
            itemlocdist_qty, itemlocdist_series, itemlocdist_invhist_id ) 
          VALUES (_itemlocdistid, &#39;L&#39;, -1,
                  _r.itemsite_id, _r.invdetail_ls_id,  COALESCE(_r.invdetail_expiration,startoftime()),
                  _r.invdetail_qty, _itemlocSeries, _invhistid );

        INSERT INTO lsdetail 
          ( lsdetail_itemsite_id, lsdetail_ls_id, lsdetail_created,
            lsdetail_source_type, lsdetail_source_id, lsdetail_source_number ) 
          VALUES ( _r.itemsite_id, _r.invdetail_ls_id, CURRENT_TIMESTAMP,
                   &#39;I&#39;, _itemlocdistid, &#39;&#39;);

        PERFORM distributeitemlocseries(_itemlocSeries);
      ELSE
        INSERT INTO itemlocdist
          ( itemlocdist_id, itemlocdist_source_type, itemlocdist_source_id,
            itemlocdist_itemsite_id, itemlocdist_ls_id, itemlocdist_expiration,
            itemlocdist_qty, itemlocdist_series, itemlocdist_invhist_id ) 
        VALUES (_itemlocdistid, &#39;O&#39;, -1,
                _r.itemsite_id, _r.invdetail_ls_id, COALESCE(_r.invdetail_expiration,startoftime()),
                _r.invdetail_qty, _itemlocSeries, _invhistid );
 
        INSERT INTO itemlocdist
          ( itemlocdist_itemlocdist_id, itemlocdist_source_type, itemlocdist_source_id,
            itemlocdist_itemsite_id, itemlocdist_ls_id, itemlocdist_expiration,
            itemlocdist_qty) 
        VALUES (_itemlocdistid, &#39;L&#39;, _r.invdetail_location_id,
                _r.itemsite_id, _r.invdetail_ls_id, COALESCE(_r.invdetail_expiration,startoftime()),
                _r.invdetail_qty);

        PERFORM distributetolocations(_itemlocdistid);
      END IF;
    END LOOP;

    UPDATE shiphead
    SET shiphead_sfstatus=&#39;D&#39;
    FROM shipitem
    WHERE ((shipitem_shiphead_id=shiphead_id)
      AND  (shiphead_sfstatus=&#39;P&#39;)
      AND  (shiphead_order_type=pordertype)
      AND  (shipitem_orderitem_id=pitemid) );

    DELETE FROM shipitem
    WHERE (shipitem_id IN ( SELECT shipitem_id
			    FROM shipitem, shiphead
			    WHERE ((shipitem_shiphead_id=shiphead_id)
			      AND  (NOT shiphead_shipped)
			      AND  (shiphead_order_type=pordertype)
			      AND  (shipitem_orderitem_id=pitemid)) ) );

    RETURN _ils;
  ELSE
    RETURN 0;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.returnshipmenttransaction-integer">returnshipmenttransaction( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN returnShipmentTransaction($1, 0, CURRENT_TIMESTAMP);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.returnshipmenttransaction-integer-integer">returnshipmenttransaction( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN returnShipmentTransaction($1, $2, CURRENT_TIMESTAMP);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.returnshipmenttransaction-integer-integer-timestamp-with-time-zone">returnshipmenttransaction( integer, integer, timestamp with time zone )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pshipitemid		ALIAS FOR $1;
  _itemlocSeries	INTEGER			 := $2;
  _timestamp		TIMESTAMP WITH TIME ZONE := $3;
  _invhistid		INTEGER;
  _orderitemid		INTEGER;
  _ordertype		TEXT;
  _qty			NUMERIC;
  _ils                 INTEGER;
  _r                   RECORD;
  _m                   RECORD;
  _itemlocdistid       INTEGER;
  _value               NUMERIC;

BEGIN
  SELECT DISTINCT shiphead_order_type, shipitem_orderitem_id, shipitem_qty, shipitem_invhist_id, shipitem_value INTO
		_ordertype, _orderitemid, _qty, _invhistid, _value
  FROM shiphead, shipitem
  WHERE ((shiphead_id=shipitem_shiphead_id)
    AND  (shipitem_id=pshipitemid));

  IF (_itemlocSeries = 0) THEN
    _itemlocSeries := NEXTVAL(&#39;itemloc_series_seq&#39;);
  END IF;
  
  --  If no inventory history, the transaction predates new lot/serial return functionality and have
  --  to handle the old way
  IF (_invhistid IS NULL)  THEN
    _ils := _itemlocSeries;
  ELSE
    _ils := 0;
  END IF;

  IF (_ordertype = &#39;SO&#39;) THEN

    IF (SELECT (item_type != &#39;J&#39;)
        FROM coitem, itemsite, item
        WHERE ((coitem_id=_orderitemid)
          AND (coitem_itemsite_id=itemsite_id)
          AND (itemsite_item_id=item_id))) THEN
      SELECT postInvTrans( itemsite_id, &#39;RS&#39;, _qty * coitem_qty_invuomratio,
			 &#39;S/R&#39;, _ordertype, formatSoNumber(coitem_id), shiphead_number,
			 &#39;Return from Shipping&#39;,
			 costcat_asset_accnt_id, costcat_shipasset_accnt_id,
			 _ils, _timestamp, _value ) INTO _invhistid
      FROM coitem, itemsite, costcat, shiphead, shipitem
      WHERE ((_orderitemid=coitem_id)
      AND  (coitem_itemsite_id=itemsite_id)
      AND  (itemsite_costcat_id=costcat_id)
      AND  (shiphead_id=shipitem_shiphead_id)
      AND  (shipitem_id=pshipitemid));
      
    ELSE
      SELECT insertGLTransaction( &#39;S/R&#39;, &#39;RS&#39;, formatSoNumber(_orderitemid), &#39;Return from Shipping&#39;,
                                     costcat_shipasset_accnt_id,
				     costcat_wip_accnt_id,
                                     -1, _value, current_date ) INTO _invhistid
      FROM coitem, itemsite, costcat
      WHERE ( (coitem_itemsite_id=itemsite_id)
       AND (itemsite_costcat_id=costcat_id)
       AND (coitem_id=pshipitemid) )
      GROUP BY costcat_shipasset_accnt_id,costcat_wip_accnt_id;
      
   --  Reverse Backflush eligble material
      FOR _m IN SELECT womatl_id, womatl_qtyper, womatl_scrap, womatl_qtywipscrap,
		     womatl_qtyreq - roundQty(item_fractional, womatl_qtyper * wo_qtyord) AS preAlloc
	      FROM womatl, wo, itemsite, item, shipitem
	      WHERE ((womatl_issuemethod = &#39;L&#39;)
		AND  (womatl_wo_id=wo_id)
		AND  (womatl_itemsite_id=itemsite_id)
		AND  (itemsite_item_id=item_id)
		AND  (wo_ordtype = &#39;S&#39;)
		AND  (wo_ordid = shipitem_orderitem_id)
		AND  (shipitem_id=pshipitemid))
      LOOP
        -- CASE says: don&#39;t use scrap % if someone already entered actual scrap
        SELECT returnWoMaterial(_m.womatl_id,
	  CASE WHEN _m.womatl_qtywipscrap &gt; _m.preAlloc THEN
	    _qty * _m.womatl_qtyper + (_m.womatl_qtywipscrap - _m.preAlloc)
	  ELSE
	    _qty * _m.womatl_qtyper * (1 + _m.womatl_scrap)
	  END, _itemlocSeries) INTO _itemlocSeries;

        UPDATE womatl
        SET womatl_issuemethod=&#39;L&#39;
        WHERE ( (womatl_issuemethod=&#39;M&#39;)
          AND (womatl_id=_m.womatl_id) );
    
      END LOOP;


  --  Update the work order about what happened
      UPDATE wo SET 
        wo_qtyrcv = wo_qtyrcv - _qty * coitem_qty_invuomratio,
        wo_wipvalue = wo_wipvalue + _value,
        wo_status =&#39;I&#39;
      FROM coitem
      WHERE ((wo_ordtype = &#39;S&#39;)
      AND (wo_ordid = _orderitemid)
      AND (coitem_id = _orderitemid));
    END IF;

  ELSEIF (_ordertype = &#39;TO&#39;) THEN
    SELECT postInvTrans( itemsite_id, &#39;RS&#39;, _qty,
			&#39;S/R&#39;, _ordertype, tohead_number, &#39;&#39;,
			&#39;Return from Shipping&#39;,
			costcat_asset_accnt_id, costcat_shipasset_accnt_id,
			_itemlocSeries, _timestamp, _value ) INTO _invhistid
    FROM toitem, tohead, itemsite, costcat
    WHERE ((toitem_item_id=itemsite_item_id)
      AND  (toitem_tohead_id=tohead_id)
      AND  (tohead_src_warehous_id=itemsite_warehous_id)
      AND  (itemsite_costcat_id=costcat_id)
      AND  (toitem_id=_orderitemid) );

  END IF;

  --  Find out if there is location or lot/serial detail to undo and handle it 
  FOR _r IN 
    SELECT  itemsite_id, invdetail_ls_id, (invdetail_qty * -1) AS invdetail_qty,
      invdetail_location_id, invdetail_expiration,
      (itemsite_controlmethod IN (&#39;L&#39;, &#39;S&#39;)) AS lotserial,
      (itemsite_loccntrl) AS loccntrl
    FROM shipitem, invdetail, invhist, itemsite
    WHERE ( (shipitem_invhist_id=invhist_id)
      AND  (invhist_id=invdetail_invhist_id)
      AND  (invhist_itemsite_id=itemsite_id)
      AND  (shipitem_id=pshipitemid) )
  LOOP
    _itemlocdistid := nextval(&#39;itemlocdist_itemlocdist_id_seq&#39;);
          
    IF (( _r.lotserial) AND (NOT _r.loccntrl))  THEN          
      INSERT INTO itemlocdist
        ( itemlocdist_id, itemlocdist_source_type, itemlocdist_source_id,
          itemlocdist_itemsite_id, itemlocdist_ls_id, itemlocdist_expiration,
          itemlocdist_qty, itemlocdist_series, itemlocdist_invhist_id ) 
        VALUES (_itemlocdistid, &#39;L&#39;, -1,
                _r.itemsite_id, _r.invdetail_ls_id,  COALESCE(_r.invdetail_expiration,startoftime()),
                _r.invdetail_qty, _itemlocSeries, _invhistid );

      INSERT INTO lsdetail 
        ( lsdetail_itemsite_id, lsdetail_ls_id, lsdetail_created,
          lsdetail_source_type, lsdetail_source_id, lsdetail_source_number ) 
        VALUES ( _r.itemsite_id, _r.invdetail_ls_id, CURRENT_TIMESTAMP,
                 &#39;I&#39;, _itemlocdistid, &#39;&#39;);

      PERFORM distributeitemlocseries(_itemlocSeries);
    ELSE
      INSERT INTO itemlocdist
        ( itemlocdist_id, itemlocdist_source_type, itemlocdist_source_id,
          itemlocdist_itemsite_id, itemlocdist_ls_id, itemlocdist_expiration,
          itemlocdist_qty, itemlocdist_series, itemlocdist_invhist_id ) 
      VALUES (_itemlocdistid, &#39;O&#39;, -1,
              _r.itemsite_id, _r.invdetail_ls_id, COALESCE(_r.invdetail_expiration,startoftime()),
              _r.invdetail_qty, _itemlocSeries, _invhistid );
 
      INSERT INTO itemlocdist
        ( itemlocdist_itemlocdist_id, itemlocdist_source_type, itemlocdist_source_id,
          itemlocdist_itemsite_id, itemlocdist_ls_id, itemlocdist_expiration,
          itemlocdist_qty) 
      VALUES (_itemlocdistid, &#39;L&#39;, _r.invdetail_location_id,
              _r.itemsite_id, _r.invdetail_ls_id, COALESCE(_r.invdetail_expiration,startoftime()),
              _r.invdetail_qty);

      PERFORM distributetolocations(_itemlocdistid);
    END IF;
  END LOOP;

  UPDATE shiphead
  SET shiphead_sfstatus=&#39;D&#39;
  FROM shipitem
  WHERE ( (shipitem_shiphead_id=shiphead_id)
   AND (shiphead_sfstatus=&#39;P&#39;)
   AND (shipitem_id=pshipitemid) );

  DELETE FROM shipitem
  WHERE (shipitem_id=pshipitemid);

  RETURN _ils;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.returnwomaterial-integer-numeric">returnwomaterial( integer, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWomatlid ALIAS FOR $1;
  pQty ALIAS FOR $2;
  _itemlocSeries INTEGER;

BEGIN

  SELECT NEXTVAL(&#39;itemloc_series_seq&#39;) INTO _itemlocSeries;
  RETURN returnWoMaterial(pWomatlid, pQty, _itemlocSeries);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.returnwomaterial-integer-numeric-integer">returnwomaterial( integer, numeric, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWomatlid ALIAS FOR $1;
  pQty ALIAS FOR $2;
  pItemlocSeries ALIAS FOR $3;
  _woNumber TEXT;
  _invhistid INTEGER;
  _itemlocSeries INTEGER;
  _qty NUMERIC;

BEGIN

  _itemlocSeries := 0;
  
  IF ( SELECT (
         CASE WHEN (womatl_qtyreq &gt;= 0) THEN
           womatl_qtyiss &lt; pQty
         ELSE
           womatl_qtyiss &gt; pQty
         END )
       FROM womatl
       WHERE ( womatl_id=pWomatlid ) ) THEN
    RETURN pItemlocSeries;
  END IF;

  SELECT itemuomtouom(itemsite_item_id, womatl_uom_id, NULL, pQty)
    INTO _qty
    FROM womatl, itemsite
   WHERE((womatl_itemsite_id=itemsite_id)
     AND (womatl_id=pWomatlid));
  IF (NOT FOUND) THEN
    _qty := pQty;
  END IF;

  SELECT formatWoNumber(womatl_wo_id) INTO _woNumber
  FROM womatl
  WHERE (womatl_id=pWomatlid);

  IF (pItemlocSeries = 0) THEN
    SELECT NEXTVAL(&#39;itemloc_series_seq&#39;) INTO _itemlocSeries;
  ELSE
    _itemlocSeries = pItemlocSeries;
  END IF;
  SELECT postInvTrans( ci.itemsite_id, &#39;IM&#39;, (_qty * -1), 
                       &#39;W/O&#39;, &#39;WO&#39;, _woNumber, &#39;&#39;,
                       (&#39;Return &#39; || item_number || &#39; from Work Order&#39;),
                       pc.costcat_wip_accnt_id, cc.costcat_asset_accnt_id, _itemlocSeries, CURRENT_DATE,
                      (SELECT (SUM(invhist_value_before - invhist_value_after) / SUM(invhist_qoh_before - invhist_qoh_after) ) FROM invhist, womatlpost WHERE((womatlpost_womatl_id=womatl_id) AND (womatlpost_invhist_id=invhist_id) and (invhist_qoh_before &gt; invhist_qoh_after))) * _qty
                     ) INTO _invhistid
    FROM womatl, wo,
         itemsite AS ci, costcat AS cc,
         itemsite AS pi, costcat AS pc,
         item
   WHERE((womatl_itemsite_id=ci.itemsite_id)
     AND (ci.itemsite_costcat_id=cc.costcat_id)
     AND (womatl_wo_id=wo_id)
     AND (wo_itemsite_id=pi.itemsite_id)
     AND (pi.itemsite_costcat_id=pc.costcat_id)
     AND (ci.itemsite_item_id=item_id)
     AND (womatl_id=pWomatlid) );

--  Create linkage to the transaction created
  IF (_invhistid != -1) THEN
    INSERT INTO womatlpost (womatlpost_womatl_id,womatlpost_invhist_id)
                VALUES (pWomatlid,_invhistid);
  END IF;

--  Decrease the parent W/O&#39;s WIP value by the value of the returned components
  UPDATE wo
  SET wo_wipvalue = (wo_wipvalue - (CASE WHEN(itemsite_costmethod=&#39;A&#39;) THEN avgcost(itemsite_id) ELSE stdcost(itemsite_item_id) END * _qty)),
      wo_postedvalue = (wo_postedvalue - (CASE WHEN(itemsite_costmethod=&#39;A&#39;) THEN avgcost(itemsite_id) ELSE stdcost(itemsite_item_id) END * _qty))
  FROM womatl, itemsite
  WHERE ( (wo_id=womatl_wo_id)
   AND (womatl_itemsite_id=itemsite_id)
   AND (womatl_id=pWomatlid) );

  UPDATE womatl
  SET womatl_qtyiss = (womatl_qtyiss - pQty),
      womatl_lastreturn = CURRENT_DATE
  WHERE (womatl_id=pWomatlid);

  RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.returnwomaterialbatch-integer">returnwomaterialbatch( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid ALIAS FOR $1;
  _itemlocSeries INTEGER;
  _woid INTEGER;
  _r RECORD;

BEGIN

  SELECT wo_id INTO _woid
  FROM wo
  WHERE ( (wo_status IN (&#39;E&#39;,&#39;I&#39;))
   AND (wo_id=pWoid) );

  IF (FOUND) THEN
    SELECT NEXTVAL(&#39;itemloc_series_seq&#39;) INTO _itemlocSeries;

    FOR _r IN SELECT womatl_id, 
                CASE WHEN wo_qtyord &gt;= 0 THEN
                  womatl_qtyiss
                ELSE
                  ((womatl_qtyreq - womatl_qtyiss) * -1)
                END AS qty
              FROM wo, womatl, itemsite
              WHERE ((wo_id=womatl_wo_id)
              AND (womatl_itemsite_id=itemsite_id)
              AND ( (wo_qtyord &lt; 0) OR (womatl_issuemethod IN (&#39;S&#39;,&#39;M&#39;)) )
              AND (womatl_wo_id=pWoid)) LOOP

      IF (_r.qty != 0) THEN
        PERFORM returnWoMaterial(_r.womatl_id, _r.qty, _itemlocSeries);
      END IF;

    END LOOP;

--  Reset the W/O Status to E
    UPDATE wo
    SET wo_status=&#39;E&#39;
    WHERE (wo_id=pWoid);

    RETURN _itemlocSeries;

  ELSE 
    RETURN -1;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.reverseglseries-integer-date-text">reverseglseries( integer, date, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSequence ALIAS FOR $1;
  pDistDate ALIAS FOR $2;
  pNotes ALIAS FOR $3;

BEGIN
  INSERT INTO gltrans (gltrans_created, gltrans_posted, gltrans_exported,
                       gltrans_date, gltrans_sequence, gltrans_accnt_id,
                       gltrans_source, gltrans_docnumber, gltrans_misc_id,
                       gltrans_amount, gltrans_notes, gltrans_journalnumber,
                       gltrans_doctype)
               SELECT  CURRENT_TIMESTAMP, FALSE, FALSE,
                       pDistDate, gltrans_sequence, gltrans_accnt_id,
                       gltrans_source, gltrans_docnumber, gltrans_misc_id,
                       (gltrans_amount * -1), pNotes, gltrans_journalnumber,
                       gltrans_doctype
                  FROM gltrans
                 WHERE (gltrans_sequence=pSequence);

  PERFORM postIntoTrialBalance(pSequence);

  RETURN pSequence;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.revokeallmodulepriv-integer-text">revokeallmodulepriv( integer, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUserId ALIAS FOR $1;
  pModuleName ALIAS FOR $2;

BEGIN

  DELETE FROM usrpriv
  WHERE (usrpriv_id IN ( SELECT usrpriv_id
                         FROM usrpriv, priv
                         WHERE ((usrpriv_priv_id=priv_id)
                          AND (usrpriv_usr_id=pUserId)
                          AND (priv_module=pModuleName)) ));

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.revokeallmodulepriv-text-text">revokeallmodulepriv( text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUsername ALIAS FOR $1;
  pModuleName ALIAS FOR $2;

BEGIN

  DELETE FROM usrpriv
  WHERE (usrpriv_id IN ( SELECT usrpriv_id
                         FROM usrpriv, priv
                         WHERE ( (usrpriv_priv_id=priv_id)
                          AND (usrpriv_username=pUsername)
                          AND (priv_module=pModuleName) ) ) );

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.revokeallmoduleprivgroup-integer-text">revokeallmoduleprivgroup( integer, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pGrpid ALIAS FOR $1;
  pModuleName ALIAS FOR $2;

BEGIN

  DELETE FROM grppriv
  WHERE (grppriv_id IN ( SELECT grppriv_id
                         FROM grppriv, priv
                         WHERE ( (grppriv_priv_id=priv_id)
                          AND (grppriv_grp_id=pGrpid)
                          AND (priv_module=pModuleName) ) ) );

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.revokegroup-text-integer">revokegroup( text, integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUsername ALIAS FOR $1;
  pGrpid ALIAS FOR $2;

BEGIN

  DELETE FROM usrgrp
  WHERE ( (usrgrp_username=pUsername)
   AND (usrgrp_grp_id=pGrpid) );

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.revokepriv-integer-integer">revokepriv( integer, integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUserId ALIAS FOR $1;
  pPrivid ALIAS FOR $2;

BEGIN

  DELETE FROM usrpriv
  WHERE ((usrpriv_usr_id=pUserId)
   AND (usrpriv_priv_id=pPrivid));

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.revokepriv-text-integer">revokepriv( text, integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUsername ALIAS FOR $1;
  pPrivid ALIAS FOR $2;

BEGIN

  DELETE FROM usrpriv
  WHERE ( (usrpriv_username=pUsername)
   AND (usrpriv_priv_id=pPrivid) );

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.revokeprivgroup-integer-integer">revokeprivgroup( integer, integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pGrpid ALIAS FOR $1;
  pPrivid ALIAS FOR $2;

BEGIN

  DELETE FROM grppriv
  WHERE ( (grppriv_grp_id=pGrpid)
   AND (grppriv_priv_id=pPrivid) );

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.rollupactualcost-integer">rollupactualcost( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
    pItemid ALIAS FOR $1;

BEGIN
    RETURN rollUpSorACost(pitemid, TRUE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.rollupsoracost-integer-boolean">rollupsoracost( integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid	ALIAS FOR $1;
  pActual	ALIAS FOR $2;
  _counter INTEGER;
  _setid INTEGER;
  _consumers RECORD;

BEGIN

  _counter := 0;

  SELECT indentedWhereUsed(pItemid) INTO _setid;

  FOR _consumers IN SELECT bomwork_item_id
                    FROM bomwork
                    WHERE (bomwork_set_id=_setid)
                    ORDER BY bomwork_level LOOP
    PERFORM updateSorACost( _consumers.bomwork_item_id, costelem_type, TRUE,
			    lowerCost(_consumers.bomwork_item_id,
				      costelem_type, pActual),
			    pActual )
    FROM costelem
    WHERE (costelem_sys);

    PERFORM updateLowerUserCosts(_consumers.bomwork_item_id, pActual);

    _counter := _counter + 1;

  END LOOP;

  PERFORM deleteBOMWorkset(_setid);

  RETURN _counter;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.rollupstandardcost-integer">rollupstandardcost( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
    pItemid ALIAS FOR $1;

BEGIN
    RETURN rollUpSorACost(pItemid, FALSE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.roundcost-numeric">roundcost( numeric )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _pCost ALIAS FOR $1;

  _scale INTEGER;

BEGIN
  IF (_pCost IS NULL) THEN
    RETURN NULL;
  END IF;

  SELECT locale_cost_scale INTO _scale
  FROM locale, usr
  WHERE ((usr_locale_id=locale_id)
     AND (usr_username=CURRENT_USER));

  RETURN ROUND(_pCost, _scale);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.roundqty-boolean-numeric">roundqty( boolean, numeric )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _fractional ALIAS FOR $1;
  _qty ALIAS FOR $2;

BEGIN
  IF (_fractional) THEN
    RETURN _qty;
  ELSE

    IF (TRUNC(_qty) &lt; _qty) THEN
      RETURN (TRUNC(_qty) + 1);
    ELSE
      RETURN _qty;
    END IF;

  END IF;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.roundup-numeric">roundup( numeric )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE

  pValue ALIAS FOR $1;
  _checkValue integer;

BEGIN

  _checkValue := pValue::integer;

  IF (_checkValue::numeric &lt; pValue) THEN
    RETURN (_checkValue + 1)::numeric;
  ELSE
    RETURN _checkValue::numeric;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.salesbycustomerbyitemsite-integer-integer-integer">salesbycustomerbyitemsite( integer, integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pItemsiteid ALIAS FOR $2;
  pPeriodid ALIAS FOR $3;
  _value NUMERIC;
  _startDate DATE;
  _endDate DATE;

BEGIN

  _startDate := findPeriodStart(pPeriodid);
  _endDate := findPeriodEnd(pPeriodid);

-- returns in base currency
  SELECT SUM(currToBase(cohist_curr_id, cohist_qtyshipped * cohist_unitprice, cohist_invcdate)) INTO _value
  FROM cohist, itemsite, item
  WHERE ( (cohist_itemsite_id&lt;&gt;pItemsiteid)
   AND (cohist_itemsite_id=itemsite_id)
   AND (itemsite_item_id=item_id)
   AND (cohist_cust_id=pCustid)
   AND (cohist_invcdate BETWEEN _startDate AND _endDate) );

  IF (_value IS NULL) THEN
    _value := 0;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.saveaddr-integer-text-text-text-text-text-text-text-text-boolean-text-text">saveaddr( integer, text, text, text, text, text, text, text, text, boolean, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pAddrId ALIAS FOR $1;
  pNumber ALIAS FOR $2;
  pAddr1 ALIAS FOR $3;
  pAddr2 ALIAS FOR $4;
  pAddr3 ALIAS FOR $5;
  pCity ALIAS FOR $6;
  pState ALIAS FOR $7;
  pPostalCode ALIAS FOR $8;
  pCountry ALIAS FOR $9;
  pActive ALIAS FOR $10;
  pNotes ALIAS FOR $11;
  pFlag ALIAS FOR $12;
  _addrId INTEGER;
  _addrNumber INTEGER;
  _flag TEXT;
  _p RECORD;
  _cnt INTEGER;
  _notes TEXT;

BEGIN
  --Validate
  IF ((pFlag IS NULL) OR (pFlag = &#39;&#39;) OR (pFlag = &#39;CHECK&#39;) OR (pFlag = &#39;CHANGEONE&#39;) OR (pFlag = &#39;CHANGEALL&#39;)) THEN
    IF (pFlag=&#39;&#39;) THEN
      _flag := &#39;CHECK&#39;;
    ELSE
      _flag := COALESCE(pFlag,&#39;CHECK&#39;);
    END IF;
  ELSE
	RAISE EXCEPTION &#39;Invalid Flag (%). Valid flags are CHECK, CHANGEONE or CHANGEALL&#39;, pFlag;
  END IF;

  _notes := COALESCE(pNotes,&#39;&#39;);
  
  --If there is nothing here, get out
  IF ( (pNumber = &#39;&#39; OR pNumber IS NULL)
    AND (pAddr1 = &#39;&#39; OR pAddr1 IS NULL)
    AND (pAddr2 = &#39;&#39; OR pAddr2 IS NULL)
    AND (pAddr3 = &#39;&#39; OR pAddr3 IS NULL)
    AND (pCity = &#39;&#39; OR pCity IS NULL)
    AND (pState = &#39;&#39; OR pState IS NULL)
    AND (pPostalCode = &#39;&#39; OR pPostalCode IS NULL)
    AND (pCountry = &#39;&#39; OR pCountry IS NULL) ) THEN
    RETURN NULL;
  
  END IF;
  
  _addrId := COALESCE(pAddrId,-1);

  --If we have an ID see if anything has changed, if not get out
  IF (_addrId &gt;= 0) THEN
    SELECT * FROM addr INTO _p
    WHERE ((pAddrId=addr_id)
    AND (pNumber=addr_number)
    AND (pAddr1=addr_line1)
    AND (pAddr2=addr_line2)
    AND (pAddr3=addr_line3)
    AND (pCity=addr_city)
    AND (pState=addr_state)
    AND (pPostalCode=addr_postalcode)
    AND (pCountry=addr_country)
    AND (pActive=addr_active)
    AND (_notes=COALESCE(addr_notes,&#39;&#39;)));
    IF (FOUND) THEN
      RETURN _addrId;
    END IF;
  END IF;
 
  --Check to see if duplicate address exists

    SELECT addr_id, addr_notes INTO _p
    FROM addr 
    WHERE ((_addrId &lt;&gt; addr_id)
    AND  (COALESCE(UPPER(addr_line1),&#39;&#39;) = COALESCE(UPPER(pAddr1),&#39;&#39;))
    AND  (COALESCE(UPPER(addr_line2),&#39;&#39;) = COALESCE(UPPER(pAddr2),&#39;&#39;))
    AND  (COALESCE(UPPER(addr_line3),&#39;&#39;) = COALESCE(UPPER(pAddr3),&#39;&#39;))
    AND  (COALESCE(UPPER(addr_city),&#39;&#39;) = COALESCE(UPPER(pCity),&#39;&#39;))
    AND  (COALESCE(UPPER(addr_state),&#39;&#39;) = COALESCE(UPPER(pState),&#39;&#39;))
    AND  (COALESCE(UPPER(addr_postalcode),&#39;&#39;) = COALESCE(UPPER(pPostalcode),&#39;&#39;))
    AND  (COALESCE(UPPER(addr_country),&#39;&#39;) = COALESCE(UPPER(pCountry),&#39;&#39;)));
    IF (FOUND) THEN
	--Note:  To prevent overwriting of existing notes, the application
	--needs to load any existing notes for a matching address before altering them.
	IF (_notes &lt;&gt; _p.addr_notes) THEN
		UPDATE addr 
		SET addr_notes=addr_notes || &#39;
&#39; || _notes
		WHERE addr_id=_p.addr_id;
	END IF;
        RETURN _p.addr_id;  --A matching address exits
    END IF;
 
  IF (_addrId &lt; 0) THEN
    _flag := &#39;CHANGEONE&#39;;
  END IF;

  IF (_flag = &#39;CHECK&#39;) THEN
    SELECT COUNT(*) INTO _cnt FROM (
	SELECT cntct_id, &#39;cntct&#39; FROM cntct 
		WHERE cntct_addr_id = _addrId 
	UNION 
	SELECT vend_id, &#39;vendinfo&#39; FROM vendinfo
		WHERE vend_addr_id = _addrId 
	UNION 
	SELECT shipto_id, &#39;shiptoinfo&#39; FROM shiptoinfo
		WHERE shipto_addr_id = _addrId 
	UNION 
	SELECT vendaddr_id, &#39;vendaddrinfo&#39; FROM vendaddrinfo
		WHERE vendaddr_addr_id = _addrId 
	UNION 
	SELECT warehous_id, &#39;whsinfo&#39; FROM whsinfo
	WHERE warehous_addr_id = _addrId) AS useQ;
    IF _cnt &gt; 1 THEN
      RETURN -2;
    ELSIF (SELECT COUNT(addr_id)=0 FROM addr WHERE (addr_id=_addrId)) THEN
      _flag := &#39;CHANGEONE&#39;;
    ELSE
      _flag := &#39;CHANGEALL&#39;;
    END IF;
  END IF;

  IF (_flag = &#39;CHANGEALL&#39;) THEN
   
    UPDATE addr SET
      addr_number = pNumber,
      addr_line1 = pAddr1, addr_line2 = pAddr2, addr_line3 = pAddr3,
      addr_city = pCity, addr_state = pState,
      addr_postalcode = pPostalcode, addr_country = pCountry,
      addr_active = pActive, addr_notes = pNotes
    WHERE addr_id = _addrId;
    RETURN _addrId;

  ELSE
    SELECT NEXTVAL(&#39;addr_addr_id_seq&#39;) INTO _addrId;
    
    _addrNumber := fetchNextNumber(&#39;AddressNumber&#39;);

    INSERT INTO addr ( addr_id, addr_number,
    addr_line1, addr_line2, addr_line3, 
    addr_city, addr_state, addr_postalcode, addr_country, 
    addr_active, addr_notes  
    ) VALUES ( _addrId, _addrNumber,
    pAddr1, pAddr2, pAddr3, 
    pCity, pState, pPostalcode, pCountry,
    pActive, _notes);
    RETURN _addrId;
	
  END IF;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.saveaddr-integer-text-text-text-text-text-text-text-text-text">saveaddr( integer, text, text, text, text, text, text, text, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pAddrId ALIAS FOR $1;
  pNumber ALIAS FOR $2;
  pAddr1 ALIAS FOR $3;
  pAddr2 ALIAS FOR $4;
  pAddr3 ALIAS FOR $5;
  pCity ALIAS FOR $6;
  pState ALIAS FOR $7;
  pPostalCode ALIAS FOR $8;
  pCountry ALIAS FOR $9;
  pFlag ALIAS FOR $10;
  _returnVal INTEGER;

BEGIN
 
  SELECT saveAddr(pAddrId,pNumber, pAddr1,pAddr2,pAddr3,pCity,pState,pPostalCode,pCountry,true,&#39;&#39;,pFlag) INTO _returnVal;
  
  RETURN _returnVal;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.savealarm-integer-text-date-time-without-time-zone-integer-text-boolean-text-boolean-text-boolean-text-text-integer-text">savealarm( integer, text, date, time without time zone, integer, text, boolean, text, boolean, text, boolean, text, text, integer, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pAlarmId ALIAS FOR $1;
  pAlarmNumber ALIAS FOR $2;
  pDate ALIAS FOR $3;
  pTime ALIAS FOR $4;
  pOffset ALIAS FOR $5;
  pQualifier ALIAS FOR $6;
  pEvent ALIAS FOR $7;
  pEventRecipient ALIAS FOR $8;
  pEmail ALIAS FOR $9;
  pEmailRecipient ALIAS FOR $10;
  pSysmsg ALIAS FOR $11;
  pSysmsgRecipient ALIAS FOR $12;
  pSource ALIAS FOR $13;
  pSourceId ALIAS FOR $14;
  pFlag ALIAS FOR $15;
  _alarmId INTEGER;
  _alarmNumber TEXT;
  _alarmTime TIMESTAMP;
  _alarmInterval INTERVAL;
  _alarmTrigger TIMESTAMP;
  _isNew BOOLEAN;
  _flag TEXT;
  _alarmCount INTEGER := 0;
  _debug BOOLEAN := false;

BEGIN
  IF (_debug) THEN
    RAISE NOTICE &#39;pAlarmId = %&#39;, pAlarmId;
    RAISE NOTICE &#39;pAlarmNumber = %&#39;, pAlarmNumber;
    RAISE NOTICE &#39;pDate = %&#39;, pDate;
    RAISE NOTICE &#39;pTime = %&#39;, pTime;
    RAISE NOTICE &#39;pOffset = %&#39;, pOffset;
    RAISE NOTICE &#39;pQualifier = %&#39;, pQualifier;
    RAISE NOTICE &#39;pEvent = %&#39;, pEvent;
    RAISE NOTICE &#39;pEventRecipient = %&#39;, pEventRecipient;
    RAISE NOTICE &#39;pEmail = %&#39;, pEmail;
    RAISE NOTICE &#39;pEmailRecipient = %&#39;, pEmailRecipient;
    RAISE NOTICE &#39;pSysmsg = %&#39;, pSysmsg;
    RAISE NOTICE &#39;pSysmsgRecipient = %&#39;, pSysmsgRecipient;
    RAISE NOTICE &#39;pSource = %&#39;, pSource;
    RAISE NOTICE &#39;pSourceId = %&#39;, pSourceId;
    RAISE NOTICE &#39;pFlag = %&#39;, pFlag;
  END IF;
  --Validate
  IF ((pFlag IS NULL) OR (pFlag = &#39;&#39;) OR (pFlag = &#39;CHECK&#39;) OR (pFlag = &#39;CHANGEONE&#39;) OR (pFlag = &#39;CHANGEALL&#39;)) THEN
    IF (pFlag=&#39;&#39;) THEN
      _flag := &#39;CHECK&#39;;
    ELSE
      _flag := COALESCE(pFlag,&#39;CHECK&#39;);
    END IF;
  ELSE
	RAISE EXCEPTION &#39;Invalid Flag (%). Valid flags are CHECK, CHANGEONE or CHANGEALL&#39;, pFlag;
  END IF;
  
  --If there is nothing here get out
  IF ( (pAlarmId IS NULL OR pAlarmId = -1)
	AND (pOffset IS NULL)
        AND (pSourceId IS NULL)
	AND (COALESCE(pQualifier, &#39;&#39;) = &#39;&#39;)
	AND (COALESCE(pEventRecipient, &#39;&#39;) = &#39;&#39;)
	AND (COALESCE(pEmailRecipient, &#39;&#39;) = &#39;&#39;)
	AND (COALESCE(pSysmsgRecipient, &#39;&#39;) = &#39;&#39;)
	AND (COALESCE(pSource, &#39;&#39;) = &#39;&#39;) ) THEN
	
	RETURN NULL;

  END IF;
  
  IF (pAlarmId IS NULL OR pAlarmId = -1) THEN 
    _isNew := true;
    _alarmId := nextval(&#39;alarm_alarm_id_seq&#39;);
    _alarmNumber := fetchNextNumber(&#39;AlarmNumber&#39;);
  ELSE
    SELECT COUNT(alarm_id) INTO _alarmCount
      FROM alarm
      WHERE ((alarm_id=pAlarmId)
      AND (alarm_source=pSource)
      AND (alarm_source_id=pSourceId));

    -- ask whether new or update if name changes
    -- but only if this isn&#39;t a new record with a pre-allocated id
    IF (_alarmCount &lt; 1 AND _flag = &#39;CHECK&#39;) THEN
      IF (EXISTS(SELECT alarm_id
                 FROM alarm
                 WHERE (alarm_id=pAlarmId))) THEN
        RETURN -10;
      ELSE
        _isNew := true;
        _alarmNumber := fetchNextNumber(&#39;AlarmNumber&#39;);
      END IF;
    ELSIF (_flag = &#39;CHANGEONE&#39;) THEN
      _isNew := true;
      _alarmId := nextval(&#39;alarm_alarm_id_seq&#39;);
      _alarmNumber := fetchNextNumber(&#39;AlarmNumber&#39;);
    END IF;
  END IF;

  _alarmNumber := COALESCE(_alarmNumber,pAlarmNumber,fetchNextNumber(&#39;AlarmNumber&#39;));

  _alarmTime := COALESCE(pDate, CURRENT_DATE) + COALESCE(pTime, CURRENT_TIME);
  IF (COALESCE(pOffset, 0) &gt; 0) THEN
    _alarmInterval := CASE WHEN (pQualifier IN (&#39;MB&#39;, &#39;MA&#39;)) THEN CAST(pOffset AS TEXT) || &#39; minutes&#39;
                           WHEN (pQualifier IN (&#39;HB&#39;, &#39;HA&#39;)) THEN CAST(pOffset AS TEXT) || &#39; hours&#39;
                           WHEN (pQualifier IN (&#39;DB&#39;, &#39;DA&#39;)) THEN CAST(pOffset AS TEXT) || &#39; days&#39;
                           ELSE &#39;&#39;
                     END;
    _alarmTrigger := CASE WHEN (pQualifier IN (&#39;MB&#39;, &#39;HB&#39;, &#39;DB&#39;)) THEN _alarmTime - _alarmInterval 
                          WHEN (pQualifier IN (&#39;MA&#39;, &#39;HA&#39;, &#39;DA&#39;)) THEN _alarmTime + _alarmInterval
                          ELSE _alarmTime
                     END; 
  ELSE
    _alarmTrigger := _alarmTime;
  END IF;

  IF (_isNew) THEN
    _alarmId := COALESCE(_alarmId,pAlarmId,nextval(&#39;alarm_alarm_id_seq&#39;));
 
    INSERT INTO alarm (
      alarm_id,alarm_number,
      alarm_event, alarm_email, alarm_sysmsg, alarm_trigger,
      alarm_time, alarm_time_offset, alarm_time_qualifier,
      alarm_creator, alarm_event_recipient, alarm_email_recipient, alarm_sysmsg_recipient,
      alarm_source, alarm_source_id )
    VALUES (
      _alarmId, _alarmNumber,
      pEvent, pEmail, pSysmsg, _alarmTrigger,
      _alarmTime, pOffset, pQualifier,
      CURRENT_USER, pEventRecipient, pEmailRecipient, pSysmsgRecipient,
      pSource, pSourceId );

    RETURN _alarmId;

  ELSE
    UPDATE alarm SET
      alarm_number=_alarmNumber,
      alarm_event=COALESCE(pEvent, alarm_event),
      alarm_email=COALESCE(pEmail, alarm_event),
      alarm_sysmsg=COALESCE(pSysmsg, alarm_event),
      alarm_trigger=_alarmTrigger,
      alarm_time=_alarmTime,
      alarm_time_offset=COALESCE(pOffset, alarm_time_offset),
      alarm_time_qualifier=COALESCE(pQualifier, alarm_time_qualifier),
      alarm_event_recipient=COALESCE(pEventRecipient, alarm_event_recipient),
      alarm_email_recipient=COALESCE(pEmailRecipient, alarm_email_recipient),
      alarm_sysmsg_recipient=COALESCE(pSysmsgRecipient, alarm_sysmsg_recipient)
    WHERE (alarm_id=pAlarmId);
    
    RETURN pAlarmId;

  END IF;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.savebomhead-integer-text-date-text-numeric-numeric">savebomhead( integer, text, date, text, numeric, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pRevision ALIAS FOR $2;
  pRevisionDate ALIAS FOR $3;
  pDocumentNumber ALIAS FOR $4;
  pBatchSize ALIAS FOR $5;
  pRequiredQtyPer ALIAS FOR $6;
  _seq INTEGER;
  _p RECORD;
  _revid INTEGER;
  
BEGIN

  IF (NOT fetchMetricBool(&#39;RevControl&#39;)) THEN -- Deal with BOM if Rev Control Turned off
    SELECT bomhead_id INTO _seq
    FROM bomhead 
    WHERE (bomhead_item_id=pItemid);

    IF (NOT FOUND) THEN  -- No bomhead exists
      _seq := NEXTVAL(&#39;bomhead_bomhead_id_seq&#39;);
      
      INSERT INTO bomhead 
        (bomhead_id,bomhead_item_id,bomhead_docnum,bomhead_revision,
        bomhead_revisiondate,bomhead_batchsize,bomhead_requiredqtyper,bomhead_rev_id)
        VALUES 
        (_seq,pItemid, pDocumentNumber, pRevision, pRevisionDate, pBatchSize, pRequiredQtyPer,-1);   
    ELSE
      UPDATE bomhead SET
        bomhead_revision	= pRevision,
        bomhead_revisiondate	= pRevisionDate,
        bomhead_docnum		= pDocumentNumber,
        bomhead_batchsize	= pBatchSize,
        bomhead_requiredqtyper = pRequiredQtyPer
      WHERE (bomhead_id=_seq);
    END IF;
    
    RETURN _seq;
  ELSE  -- Deal with Revision Control
    IF (COALESCE(pRevision,&#39;&#39;) = &#39;&#39; AND getActiveRevId(&#39;BOM&#39;,pItemid) != -1) THEN 
        RAISE EXCEPTION &#39;Revision Control records exist for item.  You must provide a new or existing revision number.&#39;;
    END IF;
    
    SELECT * INTO _p
    FROM bomhead
      LEFT OUTER JOIN rev ON (bomhead_rev_id=rev_id),
      item
    WHERE ((bomhead_item_id=pItemid)
    AND (COALESCE(bomhead_revision,&#39;&#39;)=COALESCE(pRevision,&#39;&#39;))
    AND (bomhead_item_id=item_id));

    IF (NOT FOUND) THEN  -- This is a new bomhead record
      IF LENGTH(pRevision) &gt; 0 THEN  -- We need to create a revision record   
        SELECT createbomrev(pItemid, pRevision) INTO _revid;
        
        UPDATE bomhead SET
          bomhead_revisiondate		= pRevisiondate,
          bomhead_docnum		= pDocumentNumber,
          bomhead_batchsize		= pBatchsize,
          bomhead_requiredqtyper	= pRequiredqtyper
        WHERE (bomhead_rev_id=_revid);
        
        SELECT bomhead_id INTO _seq
        FROM bomhead
        WHERE (bomhead_rev_id=_revid);
        
        RETURN _seq;      
      ELSE  -- Just create a regular bom header record
       _seq := NEXTVAL(&#39;bomhead_bomhead_id_seq&#39;);
       
       INSERT INTO bomhead 
        (bomhead_id,bomhead_item_id,bomhead_docnum,bomhead_revision,
        bomhead_revisiondate,bomhead_batchsize,bomhead_requiredqtyper,bomhead_rev_id)
        VALUES 
        (_seq,pItemid, pDocumentNumber, pRevision, pRevisionDate, pBatchSize, pRequiredQtyPer,-1);
        
        RETURN _seq;      
        
      END IF;
    ELSE  -- We need to update a record
      IF (_p.rev_status = &#39;I&#39;) THEN
        RAISE EXCEPTION &#39;Revision % for % is inactive.  Update not allowed.&#39;, _p.rev_number, _p.item_number;

      ELSIF (COALESCE(pRevision,&#39;&#39;) = COALESCE(_p.bomhead_revision,&#39;&#39;)) THEN  -- No change, just update
        UPDATE bomhead SET
          bomhead_revisiondate		= pRevisiondate,
          bomhead_docnum		= pDocumentNumber,
          bomhead_batchsize		= pBatchSize,
          bomhead_requiredqtyper	= pRequiredqtyper
        WHERE (bomhead_id=_p.bomhead_id);

        RETURN _p.bomhead_id;
        
      ELSE -- Need a new revision
        SELECT createbomrev(pItemid, pRevision) INTO _revid;
        
        UPDATE bomhead SET
          bomhead_revisiondate		= pRevisiondate,
          bomhead_docnum		= pDocumentNumber,
          bomhead_batchsize		= pBatchSize,
          bomhead_requiredqtyper	= pRequiredqtyper
        WHERE (bomhead_rev_id=_revid);

        SELECT bomhead_id INTO _seq
        FROM bomhead
        WHERE (bomhead_rev_id=_revid);
        
        RETURN _seq;
      END IF;
    END IF;
  END IF;

  RETURN _seq;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.savecntct-integer-text-integer-integer-text-text-text-text-text-text-boolean-text-text-text-text-text-text-text-text">savecntct( integer, text, integer, integer, text, text, text, text, text, text, boolean, text, text, text, text, text, text, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCntctId ALIAS FOR $1;
  pContactNumber ALIAS FOR $2;
  pCrmAcctId ALIAS FOR $3;
  pAddrId ALIAS FOR $4;
  pHonorific ALIAS FOR $5;
  pFirstName ALIAS FOR $6;
  pMiddleName ALIAS FOR $7;
  pLastName ALIAS FOR $8;
  pSuffix ALIAS FOR $9;
  pInitials ALIAS FOR $10;
  pActive ALIAS FOR $11;
  pPhone ALIAS FOR $12;
  pPhone2 ALIAS FOR $13;
  pFax ALIAS FOR $14;
  pEmail ALIAS FOR $15;
  pWebAddr ALIAS FOR $16;
  pNotes ALIAS FOR $17;
  pTitle ALIAS FOR $18;
  pFlag ALIAS FOR $19;
  _returnVal INTEGER;

BEGIN
  
  SELECT saveCntct( pCntctId, pContactNumber, pCrmAcctId, pAddrId, pHonorific, pFirstName, pMiddleName, pLastName, pSuffix, pInitials, 
	pActive, pPhone, pPhone2, pFax, pEmail, pWebAddr, pNotes, pTitle, pFlag, NULL) INTO _returnVal;
  RETURN _returnVal;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.savecntct-integer-text-integer-integer-text-text-text-text-text-text-boolean-text-text-text-text-text-text-text-text-text">savecntct( integer, text, integer, integer, text, text, text, text, text, text, boolean, text, text, text, text, text, text, text, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCntctId ALIAS FOR $1;
  pContactNumber ALIAS FOR $2;
  pCrmAcctId ALIAS FOR $3;
  pAddrId ALIAS FOR $4;
  pHonorific ALIAS FOR $5;
  pFirstName ALIAS FOR $6;
  pMiddleName ALIAS FOR $7;
  pLastName ALIAS FOR $8;
  pSuffix ALIAS FOR $9;
  pInitials ALIAS FOR $10;
  pActive ALIAS FOR $11;
  pPhone ALIAS FOR $12;
  pPhone2 ALIAS FOR $13;
  pFax ALIAS FOR $14;
  pEmail ALIAS FOR $15;
  pWebAddr ALIAS FOR $16;
  pNotes ALIAS FOR $17;
  pTitle ALIAS FOR $18;
  pFlag ALIAS FOR $19;
  pOwnerUsername ALIAS FOR $20;
  _cntctId INTEGER;
  _cntctNumber TEXT;
  _isNew BOOLEAN;
  _flag TEXT;
  _contactCount INTEGER := 0;

BEGIN
  --Validate
  IF ((pFlag IS NULL) OR (pFlag = &#39;&#39;) OR (pFlag = &#39;CHECK&#39;) OR (pFlag = &#39;CHANGEONE&#39;) OR (pFlag = &#39;CHANGEALL&#39;)) THEN
    IF (pFlag=&#39;&#39;) THEN
      _flag := &#39;CHECK&#39;;
    ELSE
      _flag := COALESCE(pFlag,&#39;CHECK&#39;);
    END IF;
  ELSE
	RAISE EXCEPTION &#39;Invalid Flag (%). Valid flags are CHECK, CHANGEONE or CHANGEALL&#39;, pFlag;
  END IF;
  
  --If there is nothing here get out
  IF ( (pCntctId IS NULL OR pCntctId = -1)
	AND (pAddrId IS NULL)
	AND (COALESCE(pFirstName, &#39;&#39;) = &#39;&#39;)
	AND (COALESCE(pMiddleName, &#39;&#39;) = &#39;&#39;)
	AND (COALESCE(pLastName, &#39;&#39;) = &#39;&#39;)
	AND (COALESCE(pSuffix, &#39;&#39;) = &#39;&#39;)
	AND (COALESCE(pHonorific, &#39;&#39;) = &#39;&#39;)
	AND (COALESCE(pInitials, &#39;&#39;) = &#39;&#39;)
	AND (COALESCE(pPhone, &#39;&#39;) = &#39;&#39;)
	AND (COALESCE(pPhone2, &#39;&#39;) = &#39;&#39;)
	AND (COALESCE(pFax, &#39;&#39;) = &#39;&#39;)
	AND (COALESCE(pEmail, &#39;&#39;) = &#39;&#39;)
	AND (COALESCE(pWebAddr, &#39;&#39;) = &#39;&#39;)
	AND (COALESCE(pNotes, &#39;&#39;) = &#39;&#39;)
	AND (COALESCE(pTitle, &#39;&#39;) = &#39;&#39;) ) THEN
	
	RETURN NULL;

  END IF;
  
  IF (pCntctId IS NULL OR pCntctId = -1) THEN 
    _isNew := true;
    _cntctId := nextval(&#39;cntct_cntct_id_seq&#39;);
    _cntctNumber := COALESCE(pContactNumber,fetchNextNumber(&#39;ContactNumber&#39;));
  ELSE
    SELECT COUNT(cntct_id) INTO _contactCount
      FROM cntct
      WHERE ((cntct_id=pCntctId)
      AND (cntct_first_name=pFirstName)
      AND (cntct_last_name=pLastName));

    -- ask whether new or update if name changes
    -- but only if this isn&#39;t a new record with a pre-allocated id
    IF (_contactCount &lt; 1 AND _flag = &#39;CHECK&#39;) THEN
      IF (EXISTS(SELECT cntct_id
                 FROM cntct
                 WHERE (cntct_id=pCntctId))) THEN
        RETURN -10;
      ELSE
        _isNew := true;
        _cntctNumber := fetchNextNumber(&#39;ContactNumber&#39;);
      END IF;
    ELSIF (_flag = &#39;CHANGEONE&#39;) THEN
      _isNew := true;
      _cntctId := nextval(&#39;cntct_cntct_id_seq&#39;);
      _cntctNumber := fetchNextNumber(&#39;ContactNumber&#39;);
    ELSIF (_flag = &#39;CHANGEALL&#39;) THEN
      _isNew := false;
    END IF;
  END IF;

  IF (pContactNumber = &#39;&#39;) THEN
    _cntctNumber := fetchNextNumber(&#39;ContactNumber&#39;);
  ELSE
    _cntctNumber := COALESCE(_cntctNumber,pContactNumber,fetchNextNumber(&#39;ContactNumber&#39;));
  END IF;

  IF (_isNew) THEN
    _cntctId := COALESCE(_cntctId,pCntctId,nextval(&#39;cntct_cntct_id_seq&#39;));
 
    INSERT INTO cntct (
      cntct_id,cntct_number,
      cntct_crmacct_id,cntct_addr_id,cntct_first_name,
      cntct_last_name,cntct_honorific,cntct_initials,
      cntct_active,cntct_phone,cntct_phone2,
      cntct_fax,cntct_email,cntct_webaddr,
      cntct_notes,cntct_title,cntct_middle,cntct_suffix, cntct_owner_username ) 
    VALUES (
      _cntctId, COALESCE(_cntctNumber,fetchNextNumber(&#39;ContactNumber&#39;)) ,pCrmAcctId,pAddrId,
      pFirstName,pLastName,pHonorific,
      pInitials,COALESCE(pActive,true),pPhone,pPhone2,pFax,
      pEmail,pWebAddr,pNotes,pTitle,pMiddleName,pSuffix,pOwnerUsername );

    RETURN _cntctId;

  ELSE
    UPDATE cntct SET
      cntct_number=COALESCE(_cntctNumber,fetchNextNumber(&#39;ContactNumber&#39;)),
      cntct_crmacct_id=COALESCE(pCrmAcctId,cntct_crmacct_id),
      cntct_addr_id=COALESCE(pAddrId,cntct_addr_id),
      cntct_first_name=COALESCE(pFirstName,cntct_first_name),
      cntct_last_name=COALESCE(pLastName,cntct_last_name),
      cntct_honorific=COALESCE(pHonorific,cntct_honorific),
      cntct_initials=COALESCE(pInitials,cntct_initials),
      cntct_active=COALESCE(pActive,cntct_active),
      cntct_phone=COALESCE(pPhone,cntct_phone),
      cntct_phone2=COALESCE(pPhone2,cntct_phone2),
      cntct_fax=COALESCE(pFax,cntct_fax),
      cntct_email=COALESCE(pEmail,cntct_email),
      cntct_webaddr=COALESCE(pWebAddr,cntct_webaddr),
      cntct_notes=COALESCE(pNotes,cntct_notes),
      cntct_title=COALESCE(pTitle,cntct_title),
      cntct_middle=COALESCE(pMiddleName,cntct_middle),
      cntct_suffix=COALESCE(pSuffix,cntct_suffix),
      cntct_owner_username=COALESCE(pOwnerUsername, cntct_owner_username) 
    WHERE (cntct_id=pCntctId);
    
    RETURN pCntctId;

  END IF;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.savecntct-integer-text-integer-text-text-text-text-text-text-text-text-text-text-text-text">savecntct( integer, text, integer, text, text, text, text, text, text, text, text, text, text, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCntctId ALIAS FOR $1;
  pContactNumber ALIAS FOR $2;
  pAddrId ALIAS FOR $3;
  pHonorific ALIAS FOR $4;
  pFirstName ALIAS FOR $5;
  pMiddleName ALIAS FOR $6;
  pLastName ALIAS FOR $7;
  pSuffix ALIAS FOR $8;
  pPhone ALIAS FOR $9;
  pPhone2 ALIAS FOR $10;
  pFax ALIAS FOR $11;
  pEmail ALIAS FOR $12;
  pWebAddr ALIAS FOR $13;
  pTitle ALIAS FOR $14;
  pFlag ALIAS FOR $15;
  _returnVal INTEGER;

BEGIN
  
  SELECT saveCntct(pCntctId,pContactNumber,NULL,pAddrId,pHonorific,pFirstName,pMiddleName,pLastName,pSuffix,NULL,NULL,pPhone,pPhone2,pFax,pEmail,pWebAddr,NULL,pTitle,pFlag) INTO _returnVal;
  
  RETURN _returnVal;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.saveimageass-text-integer-bpchar-integer">saveimageass( text, integer, bpchar, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSource 	ALIAS FOR $1;
  pSourceId 	ALIAS FOR $2;
  pPurpose 	ALIAS FOR $3;
  pImageid 	ALIAS FOR $4;
  _imageassId INTEGER = 0;

BEGIN

--  See if this link already exists
  SELECT imageass_id INTO _imageassId
  FROM imageass
  WHERE ((imageass_source_id=pSourceId)
  AND (imageass_source=pSource)
  AND (imageass_image_id=pImageId)
  AND (imageass_purpose=pPurpose));

  IF (FOUND) THEN
    RETURN _imageassId;
  END IF;
  
-- See if a record with this purpose already exists (item only)
  IF (pSource = &#39;I&#39; AND pPurpose != &#39;M&#39;) THEN
    SELECT imageass_id INTO _imageassId
    FROM imageass
    WHERE ((imageass_source_id=pSourceId)
    AND (imageass_source=pSource)
    AND (imageass_purpose=pPurpose));
  END IF;

  IF (_imageassId &gt; 0) THEN
    UPDATE imageass SET
      imageass_image_id=pImageId
    WHERE (imageass_id=_imageassId);
  ELSE
    _imageassId := NEXTVAL(&#39;imageass_imageass_id_seq&#39;);
    INSERT INTO imageass VALUES (_imageassId,pSourceId,pSource,pImageid,CASE WHEN pSource=&#39;I&#39; THEN pPurpose ELSE &#39;M&#39; END);
  END IF;
  
  RETURN _imageassId;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.saveipsitem-integer-integer-integer-numeric-numeric-integer-integer">saveipsitem( integer, integer, integer, numeric, numeric, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pIpsItemId	ALIAS FOR $1;
  pIpsHeadId	ALIAS FOR $2;
  pItemId	ALIAS FOR $3;
  pQtyBreak	ALIAS FOR $4;
  pPrice	ALIAS FOR $5;
  pQtyUomId	ALIAS FOR $6;
  pPriceUomId	ALIAS FOR $7;
  _ipsitemid	INTEGER;
  _new		BOOLEAN;
BEGIN

  -- Validation
  IF (SELECT COUNT(item_id)=0 FROM item WHERE (item_id=pItemId)) THEN
    RAISE EXCEPTION &#39;You must provide a valid Item&#39;;
  ELSIF (COALESCE(pQtyBreak,0) &lt; 0) THEN
    RAISE EXCEPTION &#39;Quantity can not be a negative value&#39;;
  ELSIF (COALESCE(pPrice,0) &lt; 0) THEN
    RAISE EXCEPTION &#39;Price must be a negative value&#39;;
  ELSIF ((pQtyUomId IS NOT NULL) AND (SELECT COUNT(item_id)=0 FROM
        (SELECT item_id
         FROM item
         WHERE ((item_id=pItemId)
           AND (item_inv_uom_id=pQtyUomId))
         UNION
         SELECT item_id
         FROM item,itemuomconv,itemuom,uomtype
         WHERE ((item_id=pItemId)
           AND (itemuomconv_item_id=item_id)
           AND (itemuomconv_from_uom_id=pQtyUomId)
           AND (itemuom_itemuomconv_id=itemuomconv_id)
           AND (itemuom_uomtype_id=uomtype_id)
           AND (uomtype_name=&#39;Selling&#39;))
         UNION
         SELECT item_id
         FROM item,itemuomconv,itemuom,uomtype
         WHERE ((item_id=pItemId)
           AND (itemuomconv_item_id=item_id)
           AND (itemuomconv_to_uom_id=pQtyUomId)
           AND (itemuom_itemuomconv_id=itemuomconv_id)
           AND (itemuom_uomtype_id=uomtype_id)
           AND (uomtype_name=&#39;Selling&#39;))) AS data)) THEN
    RAISE EXCEPTION &#39;Qty UOM Must be a valid Selling UOM for the Item&#39;;
  ELSIF ((pPriceUomId IS NOT NULL) AND (SELECT COUNT(item_id)=0 FROM
        (SELECT item_id
         FROM item
         WHERE ((item_id=pItemId)
           AND (item_inv_uom_id=pPriceUomId))
         UNION
         SELECT item_id
         FROM item,itemuomconv,itemuom,uomtype
         WHERE ((item_id=pItemId)
           AND (itemuomconv_item_id=item_id)
           AND (itemuomconv_from_uom_id=pPriceUomId)
           AND (itemuom_itemuomconv_id=itemuomconv_id)
           AND (itemuom_uomtype_id=uomtype_id)
           AND (uomtype_name=&#39;Selling&#39;))
         UNION
         SELECT item_id
         FROM item,itemuomconv,itemuom,uomtype
         WHERE ((item_id=pItemId)
           AND (itemuomconv_item_id=item_id)
           AND (itemuomconv_to_uom_id=pPriceUomId)
           AND (itemuom_itemuomconv_id=itemuomconv_id)
           AND (itemuom_uomtype_id=uomtype_id)
           AND (uomtype_name=&#39;Selling&#39;))) AS data)) THEN
    RAISE EXCEPTION &#39;Price UOM Must be a valid Selling UOM for the Item&#39;;
  END IF;

  _new := TRUE;

  IF (pIpsItemId IS NOT NULL) THEN
    SELECT ipsitem_id INTO _ipsitemid
    FROM ipsitem
    WHERE (ipsitem_id=pIpsItemId);

    IF (FOUND) THEN
      _new := FALSE;
    ELSE
      RAISE EXCEPTION &#39;Pricing Schedule Item not found.&#39;;
    END IF;
  ELSE
    SELECT ipsitem_id INTO _ipsitemid
    FROM ipsitem
    WHERE ((ipsitem_ipshead_id	= pIpsheadId)
      AND (ipsitem_item_id 	= pItemId)
      AND (ipsitem_qtybreak 	= pQtyBreak)
      AND (ipsitem_qty_uom_id = COALESCE(pQtyUomId,(SELECT item_inv_uom_id FROM item WHERE item_id = pItemId))) 
      AND (ipsitem_price_uom_id =
           CASE
             WHEN (pQtyUomId = (SELECT item_inv_uom_id FROM item WHERE item_id = pItemId)) THEN
               COALESCE(pPriceUomId,pQtyUomId,(SELECT item_inv_uom_id FROM item WHERE item_id = pItemId))
             ELSE
               COALESCE(pQtyUomId,(SELECT item_inv_uom_id FROM item WHERE item_id = pItemId))
           END));
  END IF;
  
  IF (FOUND) THEN
    _new := false;
  ELSE
    _ipsitemid := nextval(&#39;ipsitem_ipsitem_id_seq&#39;);
  END IF;
  
  IF (_new) THEN
    INSERT INTO ipsitem (
      ipsitem_id,
      ipsitem_ipshead_id, 
      ipsitem_item_id, 
      ipsitem_qtybreak, 
      ipsitem_price, 
      ipsitem_qty_uom_id, 
      ipsitem_price_uom_id) 
    VALUES (
      _ipsitemid,
      pIpsheadId,
      pItemId,
      pQtyBreak, 
      pPrice,
      COALESCE(pQtyUomId,(SELECT item_inv_uom_id FROM item WHERE item_id = pItemId)), 
      CASE
        WHEN (pQtyUomId = (SELECT item_inv_uom_id FROM item WHERE item_id = pItemId)) THEN
          COALESCE(pPriceUomId,pQtyUomId,(SELECT item_inv_uom_id FROM item WHERE item_id = pItemId))
        ELSE
          COALESCE(pQtyUomId,(SELECT item_inv_uom_id FROM item WHERE item_id = pItemId))
      END);
  ELSE 
    UPDATE ipsitem SET 
      ipsitem_qtybreak = pQtyBreak, 
      ipsitem_price = pPrice, 
      ipsitem_qty_uom_id = COALESCE(pQtyUomId,(SELECT item_inv_uom_id FROM item WHERE item_id = pItemId)), 
      ipsitem_price_uom_id =
      CASE
        WHEN (pQtyUomId = (SELECT item_inv_uom_id FROM item WHERE item_id = pItemId)) THEN
          COALESCE(pPriceUomId,pQtyUomId,(SELECT item_inv_uom_id FROM item WHERE item_id = pItemId))
        ELSE
          COALESCE(pQtyUomId,(SELECT item_inv_uom_id FROM item WHERE item_id = pItemId))
      END
    WHERE (ipsitem_id=_ipsitemid);
   END IF;

   RETURN _ipsitemid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.saveipsprodcat-integer-integer-integer-numeric-numeric">saveipsprodcat( integer, integer, integer, numeric, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pIpsProdcatId	ALIAS FOR $1;
  pIpsHeadId	ALIAS FOR $2;
  pProdCatId	ALIAS FOR $3;
  pQtyBreak	ALIAS FOR $4;
  pDiscount	ALIAS FOR $5;
  _ipsprodcatid	INTEGER;
  _new		BOOLEAN;
  
BEGIN

  -- Validation
  IF (SELECT COUNT(*)=0 FROM prodcat WHERE (prodcat_id=pProdcatId)) THEN
    RAISE EXCEPTION &#39;You must provide a valid Product Category&#39;;
  ELSIF (COALESCE(pQtyBreak,0) &lt; 0) THEN
    RAISE EXCEPTION &#39;Quantity can not be a negative value&#39;;
  ELSIF (COALESCE(pDiscount,0) &lt; 0) THEN
    RAISE EXCEPTION &#39;Discount must be a negative value&#39;;
  END IF;
    
  _new := TRUE;

  IF (pIpsProdcatId IS NOT NULL) THEN
    SELECT ipsprodcat_id INTO _ipsprodcatid
    FROM ipsprodcat
    WHERE (ipsprodcat_id=pIpsprodcatId);

    IF (FOUND) THEN
      _new := FALSE;
    ELSE
      RAISE EXCEPTION &#39;Pricing Schedule Product Category not found&#39;;
    END IF;
  ELSE
    SELECT ipsprodcat_id INTO _ipsprodcatid
    FROM ipsprodcat
    WHERE ((ipsprodcat_ipshead_id=pIpsheadId)
      AND (ipsprodcat_prodcat_id=pProdcatId)
      AND (ipsprodcat_qtybreak=pQtyBreak));

    IF (FOUND) THEN
      _new := false;
    ELSE
      _ipsprodcatid := nextval(&#39;ipsprodcat_ipsprodcat_id_seq&#39;);
    END IF;
  END IF;
  
  IF (_new) THEN
    INSERT INTO ipsprodcat (
      ipsprodcat_id,
      ipsprodcat_ipshead_id, 
      ipsprodcat_prodcat_id, 
      ipsprodcat_qtybreak, 
      ipsprodcat_discntprcnt) 
    VALUES (
      _ipsprodcatid,
      pIpsheadId,
      pProdcatId,
      pQtyBreak, 
      pDiscount * .01);
  ELSE 
    UPDATE ipsprodcat SET 
      ipsprodcat_qtybreak = pQtyBreak, 
      ipsprodcat_discntprcnt = pDiscount * .01
    WHERE (ipsprodcat_id=_ipsprodcatid);
  END IF;

  RETURN _ipsprodcatid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.saveitemimage-integer-bpchar-integer">saveitemimage( integer, bpchar, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pPurpose ALIAS FOR $2;
  pImageid ALIAS FOR $3;
  _itemimageId INTEGER;

BEGIN
-- See if a record with this purpose already exists
  SELECT imageass_id INTO _itemimageId
  FROM imageass
  WHERE ( (imageass_source=&#39;I&#39;)
    AND   (imageass_source_id=pItemid)
    AND   (imageass_purpose=pPurpose) );

  IF (FOUND) THEN
    UPDATE imageass SET imageass_image_id=pImageId
    WHERE (imageass_id=_itemimageId);
  ELSE
    _itemimageId := NEXTVAL(&#39;imageass_imageass_id_seq&#39;);
    INSERT INTO imageass VALUES (_itemimageId,pItemid,&#39;I&#39;,pImageid,pPurpose);
  END IF;
  
  RETURN _itemimageId;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.saveitemuomconv-integer-integer-numeric-integer-numeric-boolean-integerARRAY">saveitemuomconv( integer, integer, numeric, integer, numeric, boolean, integer[] )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemId ALIAS FOR $1;
  pFromUomId ALIAS FOR $2;
  pFromValue ALIAS FOR $3;
  pToUomId ALIAS FOR $4;
  pToValue ALIAS FOR $5;
  pFractional ALIAS FOR $6;
  pUomTypes ALIAS FOR $7;
  _p RECORD;
  _fromUomId INTEGER;
  _fromValue NUMERIC;
  _toUomId INTEGER;
  _toValue NUMERIC;
  _fractional BOOLEAN;
  _seq INTEGER;
  _i INTEGER;
  _uomtype TEXT;

BEGIN
-- Make sure we have some itemtypes
  IF (pUomTypes IS NULL) OR (ARRAY_UPPER(pUomTypes,1) = 0) THEN
	RAISE EXCEPTION &#39;You must include at least one item type.&#39;;
  END IF;

-- If this is a global UOM, over-ride with global data.
  SELECT * INTO _p
  FROM uomconv
  WHERE ((((uomconv_from_uom_id=pFromUomId)
  AND (uomconv_to_uom_id=pToUomId))
  OR ((uomconv_from_uom_id=pToUomId)
  AND (uomconv_to_uom_id=pFromUomId))));

  IF (FOUND) THEN
    _fromUomId := _p.uomconv_from_uom_id;
    _toUomId := _p.uomconv_to_uom_id;
    _fromValue := _p.uomconv_from_value;
    _toValue := _p.uomconv_to_value;
    _fractional := _p.uomconv_fractional;
    RAISE NOTICE &#39;Defaulted to global Unit of Measure conversion ratios.&#39;;
  ELSE
    _fromUomId := pFromUomId;
    _fromValue := pFromValue;
    _toUomId := pToUomId;
    _toValue := pToValue;
    _fractional := pFractional;
  END IF;

-- See if an item conversion exists going the other way
  SELECT f.uom_name AS f_uom, t.uom_name as t_uom INTO _p
  FROM itemuomconv,uom f, uom t
  WHERE ((itemuomconv_item_id=pItemId)
  AND (itemuomconv_from_uom_id=_toUomId)
  AND (itemuomconv_to_uom_id=_fromUomId)
  AND (f.uom_id=itemuomconv_from_uom_id)
  AND (t.uom_id=itemuomconv_to_uom_id));
  IF (FOUND) THEN
    RAISE EXCEPTION &#39;Unit of measure conversion already exists going from % to %.&#39;,_p.f_uom,_p.t_uom;
  END IF;

-- See if an item conversion record exists
  SELECT * INTO _p
  FROM itemuomconv
  WHERE ((itemuomconv_item_id=pItemId)
  AND (itemuomconv_from_uom_id=_fromUomId)
  AND (itemuomconv_to_uom_id=_toUomId));

-- Update if found
  IF (FOUND) THEN
    UPDATE itemuomconv SET
      itemuomconv_from_value=_fromValue,
      itemuomconv_to_value=_toValue,
      itemuomconv_fractional=_fractional
    WHERE (itemuomconv_id=_p.itemuomconv_id);
    _seq := _p.itemuomconv_id;
    
    --Delete old type list
    DELETE FROM itemuom WHERE itemuom_itemuomconv_id=_p.itemuomconv_id;
  ELSE
  
-- Otherwise create a new one
    SELECT NEXTVAL(&#39;itemuomconv_itemuomconv_id_seq&#39;) INTO _seq;
    INSERT INTO itemuomconv VALUES
      (_seq, pItemId,_fromUomId,_fromValue,_toUomId,_toValue,_fractional);
  END IF;
  
-- Build new type list
  FOR _i IN 1..ARRAY_UPPER(pUomTypes,1)
  LOOP
    SELECT uomtype_name INTO _uomtype
    FROM itemuomconv, itemuom, uomtype
    WHERE ((itemuom_uomtype_id=uomtype_id)
    AND (itemuomconv_id=itemuom_itemuomconv_id)
    AND (itemuomconv_item_id=pItemId)
    AND (uomtype_name != &#39;Selling&#39;)
    AND (itemuom_uomtype_id=pUomTypes[_i]));
    IF (FOUND) THEN
      RAISE EXCEPTION &#39;Unit of Measure Type % is already used on this item&#39;,_uomtype;
    ELSE
      INSERT INTO itemuom (itemuom_itemuomconv_id,itemuom_uomtype_id)
      VALUES (_seq,pUomTypes[_i]);
    END IF;
  END LOOP;
  
  RETURN _seq;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.savemetasql-text-text-text-text">savemetasql( text, text, text, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN saveMetasql($1, $2, $3, $4, true);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.savemetasql-text-text-text-text-boolean">savemetasql( text, text, text, text, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pGroup	ALIAS FOR $1;
  pName 	ALIAS FOR $2;
  pNotes	ALIAS FOR $3;
  pQuery	ALIAS FOR $4;
  pSystem       ALIAS FOR $5;
  _metasqlid	INTEGER;
  _schema       TEXT;
  _debug        BOOL    := true;
  
BEGIN

  --See if Query already exists
  SELECT metasql_id INTO _metasqlid
  FROM metasql
  WHERE ((metasql_group=pGroup)
     AND (metasql_name=pName));

  IF (FOUND) THEN
    IF (_debug) THEN RAISE NOTICE &#39;update metasql&#39;; END IF;
    UPDATE metasql SET
      metasql_group=pGroup,
      metasql_name=pName,
      metasql_notes=pNotes,
      metasql_query=pQuery
    WHERE (metasql_id=_metasqlid);
  ELSE
    _metasqlid := NEXTVAL(&#39;metasql_metasql_id_seq&#39;);

    BEGIN
      IF (_debug) THEN RAISE NOTICE &#39;attempting to insert into pkgmetasql&#39;; END IF;
      INSERT INTO pkgmetasql 
      VALUES (_metasqlid,pGroup,pName,pNotes,pQuery);
    EXCEPTION WHEN undefined_table THEN
                    IF (_debug) THEN RAISE NOTICE &#39;insert metasql&#39;; END IF;
                    INSERT INTO metasql 
                    VALUES (_metasqlid,pGroup,pName,pNotes,pQuery);
              WHEN OTHERS THEN RAISE EXCEPTION &#39;% %&#39;, SQLSTATE, SQLERRM;
    END;
  END IF;
 
  RETURN _metasqlid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.scraps-text">scraps( text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTransType ALIAS FOR $1;

BEGIN
  IF (pTransType IN (&#39;SI&#39;, &#39;SM&#39;, &#39;EX&#39;)) THEN
    RETURN TRUE;
  ELSE
    RETURN FALSE;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.scraptoplevel-integer-numeric">scraptoplevel( integer, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid		ALIAS FOR $1;
  pQty		ALIAS FOR $2;

BEGIN
  RETURN scrapTopLevel(pWoid, pQty, FALSE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.scraptoplevel-integer-numeric-boolean">scraptoplevel( integer, numeric, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoid		ALIAS FOR $1;
  pQty		ALIAS FOR $2;
  pIssueRepl	ALIAS FOR $3;
  _toIssue		NUMERIC;
  _itemlocSeries	INTEGER := 0;
  _p			RECORD;

BEGIN
    IF (pIssueRepl) THEN
      FOR _p IN SELECT womatl_id, (pQty * womatl_qtyper) AS toScrap,
		       womatl_qtyreq - roundQty(item_fractional, womatl_qtyper * wo_qtyord) AS preAlloc,
		       womatl_qtywipscrap
		FROM womatl, wo, itemsite, item
		WHERE ((womatl_wo_id=pWoid)
		  AND  (womatl_wo_id=wo_id)
		  AND  (womatl_itemsite_id=itemsite_id)
		  AND  (itemsite_item_id=item_id)) LOOP
	_toIssue := _p.toScrap - NoNeg(_p.preAlloc - _p.womatl_qtywipscrap);
	IF (_toIssue &gt; 0) THEN
	  _itemlocSeries := issueWoMaterial(_p.womatl_id, _toIssue, _itemlocSeries);
	  IF (_itemlocSeries &lt; 0) THEN
	    RETURN _itemlocSeries;
	  END IF;
	END IF;

	UPDATE womatl
	SET womatl_qtywipscrap=(womatl_qtywipscrap + _p.toScrap),
	    womatl_qtyiss=(womatl_qtyiss - _p.toScrap)
	WHERE (womatl_id=_p.womatl_id);
      END LOOP;
    END IF;

    -- BIG ASSUMPTION - the item to scrap has been received into inventory
    SELECT invScrap(itemsite_id, pQty, formatWoNumber(wo_id),
		    &#39;Top Level Item&#39;) INTO _itemlocSeries
    FROM wo, itemsite
    WHERE ((wo_id=pWoid)
      AND  (itemsite_id=wo_itemsite_id));

    RETURN _itemlocSeries;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.scrapwomaterial-integer-numeric">scrapwomaterial( integer, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWomatlid ALIAS FOR $1;
  pQty ALIAS FOR $2;

BEGIN
  RETURN scrapWoMaterial(pWomatlid, pQty, FALSE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.scrapwomaterial-integer-numeric-boolean">scrapwomaterial( integer, numeric, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWomatlid	ALIAS FOR $1;
  pQty		ALIAS FOR $2;
  pIssueRepl	ALIAS FOR $3;
  _toIssue		NUMERIC;
  _toScrap		NUMERIC;
  _preAlloc		NUMERIC;
  _wipScrap		NUMERIC;
  _itemlocSeries	INTEGER;
  _itemid               INTEGER;
  _uomid                INTEGER;
  _r                    RECORD;

BEGIN
  SELECT costcat_wip_accnt_id
    INTO _r
    FROM womatl, wo, itemsite, costcat
   WHERE((womatl_wo_id=wo_id)
     AND (wo_itemsite_id=itemsite_id)
     AND (itemsite_costcat_id=costcat_id)
     AND (womatl_id=pWomatlid));

  IF (pIssueRepl) THEN
    SELECT womatl_qtyreq - roundQty(itemuomfractionalbyuom(itemsite_item_id, womatl_uom_id), womatl_qtyper * wo_qtyord),
	   womatl_qtywipscrap, itemsite_item_id, womatl_uom_id INTO _preAlloc, _wipScrap, _itemid, _uomid
    FROM womatl, wo, itemsite, item
    WHERE ((womatl_id=pWomatlid)
      AND  (womatl_wo_id=wo_id)
      AND  (womatl_itemsite_id=itemsite_id)
      AND  (itemsite_item_id=item_id));
    _toIssue := pQty - NoNeg(_preAlloc - _wipScrap);

    IF (_toIssue &gt; 0) THEN
      _itemlocSeries := issueWoMaterial(pWomatlid, _toIssue);
      IF (_itemlocSeries &lt; 0) THEN
	RETURN -1;
      END IF;

      PERFORM insertGLTransaction( &#39;W/O&#39;, &#39;WO&#39;, formatWoNumber(womatl_wo_id),
                                   (&#39;Scrap &#39; || item_number || &#39; from Work Order&#39;),
				   _r.costcat_wip_accnt_id, costcat_mfgscrap_accnt_id, -1,
				   (stdCost(itemsite_item_id) * itemuomtouom(_itemid, _uomid, NULL, _toIssue)), CURRENT_DATE )
      FROM womatl, itemsite, item, costcat
      WHERE ( (womatl_itemsite_id=itemsite_id)
       AND (itemsite_item_id=item_id)
       AND (itemsite_costcat_id=costcat_id)
       AND (womatl_id=pWomatlid) );
    END IF;

    _toScrap = pQty;

  ELSIF ( ( SELECT (womatl_qtyiss &gt;= pQty)
	     FROM womatl
	     WHERE (womatl_id=pWomatlid) ) ) THEN

    --  Distribute to G/L
    PERFORM insertGLTransaction( &#39;W/O&#39;, &#39;WO&#39;, formatWoNumber(womatl_wo_id),
				 (&#39;Scrap &#39; || item_number || &#39; from Work Order&#39;),
				 _r.costcat_wip_accnt_id, costcat_mfgscrap_accnt_id, -1,
				 (stdCost(itemsite_item_id) * itemuomtouom(itemsite_item_id, womatl_uom_id, NULL, pQty)), CURRENT_DATE )
    FROM womatl, itemsite, item, costcat
    WHERE ( (womatl_itemsite_id=itemsite_id)
     AND (itemsite_item_id=item_id)
     AND (itemsite_costcat_id=costcat_id)
     AND (womatl_id=pWomatlid) );

    _toScrap = pQty;

  ELSE
    _toScrap = 0;
  END IF;

  IF (_toScrap &gt; 0) THEN
    UPDATE womatl
    SET womatl_qtywipscrap=(womatl_qtywipscrap + _toScrap),
	womatl_qtyiss=(womatl_qtyiss - _toScrap)
    WHERE (womatl_id=pWomatlid);

    RETURN pWomatlid;
  END IF;

  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.selectbalanceforbilling-integer">selectbalanceforbilling( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSoheadid ALIAS FOR $1;
  _returnval	BOOLEAN := TRUE;
  _doSelect BOOLEAN;
  _result INTEGER;
  _soitem RECORD;

BEGIN

  FOR _soitem IN SELECT cust_partialship, coitem_id,
                        coitem_linenumber,
                        COALESCE(item_type,&#39;&#39;) AS item_type,
                        SUM(coship_qty) AS qty,
                        ( (SUM(coship_qty) &gt;= (coitem_qtyord - coitem_qtyshipped + coitem_qtyreturned + SUM(coship_qty))) OR
                          (NOT cust_partialship) ) AS toclose
  FROM cohead, coship, cosmisc, cust,
       coitem LEFT OUTER JOIN (itemsite JOIN item ON (itemsite_item_id=item_id)) ON (coitem_itemsite_id=itemsite_id)
  WHERE ( (coitem_cohead_id=cohead_id)
   AND (cohead_cust_id=cust_id)
   AND (coship_coitem_id=coitem_id)
   AND (coship_cosmisc_id=cosmisc_id)
   AND (cosmisc_shipped)
   AND (NOT coship_invoiced)
   AND (cohead_id=pSoheadid) )
  GROUP BY cust_partialship, coitem_id,
           coitem_linenumber, item_type,
           coitem_qtyord, coitem_qtyshipped, coitem_qtyreturned LOOP

    _doSelect := true;
    IF(_soitem.item_type = &#39;K&#39;) THEN
      -- see if all the sub items are shipped
      SELECT coitem_id
        INTO _result
        FROM coitem
       WHERE((coitem_cohead_id=pSoheadid)
         AND (coitem_linenumber=_soitem.coitem_linenumber)
         AND (coitem_subnumber &gt; 0)
         AND ((coitem_qtyord - coitem_qtyshipped + coitem_qtyreturned) &gt; 0))
       LIMIT 1;
      IF( FOUND ) THEN
        _doSelect := false;
      END IF;
    END IF;

    IF (_doSelect) THEN
      -- do as much as we can but still report errors if they occur
      IF (selectForBilling(_soitem.coitem_id, _soitem.qty, _soitem.toclose) &lt; 0) THEN
        _returnval := FALSE;
      END IF;
    END IF;

  END LOOP;

  RETURN _returnval;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.selectdiscountitemsforpayment-integer-integer">selectdiscountitemsforpayment( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendid ALIAS FOR $1;
  pBankaccntid ALIAS FOR $2;
  _currid INTEGER;
  _r RECORD;

BEGIN

  SELECT bankaccnt_curr_id INTO _currid
  FROM bankaccnt
  WHERE (bankaccnt_id=pBankaccntid);

  FOR _r IN SELECT apopen_id
              FROM apopen, terms
             WHERE((CURRENT_DATE &lt;= (apopen_docdate + terms_discdays))
               AND (terms_discprcnt &gt; 0.0)
               AND (apopen_terms_id=terms_id)
               AND (apopen_open)
               AND (apopen_doctype IN (&#39;V&#39;, &#39;D&#39;))
               AND (apopen_vend_id=pVendid)
               AND (apopen_curr_id=_currid) ) LOOP
    PERFORM selectPayment(_r.apopen_id, pBankaccntid);
  END LOOP;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.selectdueitemsforpayment-integer-integer">selectdueitemsforpayment( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pVendid ALIAS FOR $1;
  pBankaccntid ALIAS FOR $2;
  _currid INTEGER;
  _r RECORD;

BEGIN

  SELECT bankaccnt_curr_id INTO _currid
  FROM bankaccnt
  WHERE (bankaccnt_id=pBankaccntid);

  FOR _r IN SELECT apopen_id
              FROM apopen
             WHERE((apopen_duedate &lt;= CURRENT_DATE)
               AND (apopen_open)
               AND (apopen_doctype IN (&#39;V&#39;, &#39;D&#39;))
               AND (apopen_vend_id=pVendid)
               AND (apopen_curr_id=_currid) ) LOOP
    PERFORM selectPayment(_r.apopen_id, pBankaccntid);
  END LOOP;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.selectforbilling-integer-numeric-boolean">selectforbilling( integer, numeric, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    pSoitemid	ALIAS FOR $1;
    pQty	ALIAS FOR $2;
    pClose	ALIAS FOR $3;
    _itemid	INTEGER := NULL;
    _taxauthid	INTEGER := NULL;
    _taxid	INTEGER := NULL;
    _taxtypeid	INTEGER := NULL;

  BEGIN
    SELECT cobmisc_taxauth_id, coitem_tax_id, item_id INTO _taxauthid, _taxid, _itemid
      FROM cobmisc, coitem, itemsite, item
     WHERE ( (cobmisc_cohead_id=coitem_cohead_id)
       AND   (NOT cobmisc_posted)
       AND   (coitem_itemsite_id=itemsite_id)
       AND   (itemsite_item_id=item_id)
       AND   (coitem_id=pSoitemid) )
     LIMIT 1;

    _taxtypeid := getItemTaxType(_itemid, _taxauthid);
    --IF (_taxtypeid IS NOT NULL) THEN
    --  _taxid := getTaxSelection(_taxauthid, _taxtypeid);
    --END IF;
    RETURN selectForBilling(pSoitemid, pQty, pClose, _taxtypeid, _taxid);
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.selectforbilling-integer-numeric-boolean-integer-integer">selectforbilling( integer, numeric, boolean, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSoitemid	ALIAS FOR $1;
  pQty		ALIAS FOR $2;
  pClose	ALIAS FOR $3;
  ptaxtypeid	ALIAS FOR $4;
  ptaxid	ALIAS FOR $5;

  _cobillid INTEGER;
  _r RECORD;
  _pcnta NUMERIC := 0.0;
  _pcntb NUMERIC := 0.0;
  _pcntc NUMERIC := 0.0;
BEGIN

-- Get some information
  SELECT cobmisc_id, cobmisc_taxauth_id,
         coitem_id, coitem_price,
         coitem_price_invuomratio AS invpricerat, coitem_qty_invuomratio, item_id
    INTO _r
    FROM cobmisc, coitem, itemsite, item, site()
   WHERE ( (cobmisc_cohead_id=coitem_cohead_id)
     AND   (NOT cobmisc_posted)
     AND   (coitem_itemsite_id=itemsite_id)
     AND   (itemsite_item_id=item_id)
     AND   (coitem_id=pSoitemid)
     AND   (itemsite_warehous_id=warehous_id) )
   LIMIT 1;

-- check to make sure the qty to bill for is not less than
-- the total un-invoiced shipped amount
  IF ( (SELECT (pQty &lt; SUM(coship_qty))
        FROM coship, cosmisc, coitem
        WHERE ( (coship_cosmisc_id=cosmisc_id)
         AND (cosmisc_cohead_id=coitem_cohead_id)
         AND (coship_coitem_id=coitem_id)
         AND (cosmisc_shipped)
         AND (NOT coship_invoiced)
         AND (coitem_id=pSoitemid) ) ) ) THEN
    RETURN -1;
  END IF;

  SELECT cobill_id INTO _cobillid
  FROM cobill, cobmisc, coitem
  WHERE ( (cobill_cobmisc_id=cobmisc_id)
   AND (cobmisc_cohead_id=coitem_cohead_id)
   AND (cobill_coitem_id=coitem_id)
   AND (NOT cobmisc_posted)
   AND (coitem_id=pSoitemid) );

  IF (FOUND) THEN
    UPDATE cobill
    SET cobill_selectdate=CURRENT_DATE,
        cobill_select_username=CURRENT_USER,
        cobill_qty=pQty, cobill_toclose=pClose,
	cobill_taxtype_id=ptaxtypeid,	cobill_tax_id=ptaxid,
        cobill_tax_ratea = calculateTax(ptaxid, round((pQty * _r.coitem_qty_invuomratio) * (_r.coitem_price / _r.invpricerat), 2), 0.0, &#39;A&#39;),
        cobill_tax_rateb = calculateTax(ptaxid, round((pQty * _r.coitem_qty_invuomratio) * (_r.coitem_price / _r.invpricerat), 2), 0.0, &#39;B&#39;),
        cobill_tax_ratec = calculateTax(ptaxid, round((pQty * _r.coitem_qty_invuomratio) * (_r.coitem_price / _r.invpricerat), 2), 0.0, &#39;C&#39;)
    WHERE (cobill_id=_cobillid);

  ELSE
    SELECT tax_ratea, tax_rateb, tax_ratec
      INTO _pcnta, _pcntb, _pcntc
      FROM tax
     WHERE (tax_id=ptaxid);

    SELECT NEXTVAL(&#39;cobill_cobill_id_seq&#39;) INTO _cobillid;
    INSERT INTO cobill
    ( cobill_id, cobill_coitem_id, cobill_cobmisc_id,
      cobill_selectdate, cobill_select_username,
      cobill_qty, cobill_toclose,
      cobill_tax_id, cobill_taxtype_id,
      cobill_tax_pcta, cobill_tax_pctb, cobill_tax_pctc,
      cobill_tax_ratea, cobill_tax_rateb, cobill_tax_ratec )
    VALUES
    ( _cobillid, _r.coitem_id, _r.cobmisc_id,
      CURRENT_DATE, CURRENT_USER,
      pQty, pClose,
      ptaxid, ptaxtypeid,
      _pcnta, _pcntb, _pcntc,
      calculateTax(ptaxid, round((pQty * _r.coitem_qty_invuomratio) * (_r.coitem_price / _r.invpricerat), 2), 0.0, &#39;A&#39;),
      calculateTax(ptaxid, round((pQty * _r.coitem_qty_invuomratio) * (_r.coitem_price / _r.invpricerat), 2), 0.0, &#39;B&#39;),
      calculateTax(ptaxid, round((pQty * _r.coitem_qty_invuomratio) * (_r.coitem_price / _r.invpricerat), 2), 0.0, &#39;C&#39;) );
  END IF;

  RETURN _cobillid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.selectpayment-integer-integer">selectpayment( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pApopenid ALIAS FOR $1;
  pBankaccntid ALIAS FOR $2;
  _p RECORD;
  _apselectid INTEGER;
  _amount NUMERIC;
  _discount NUMERIC;
BEGIN

  SELECT apopen_amount, apopen_paid,
         apopen_doctype, apopen_docdate,
         apopen_curr_id,
         apopen_amount - apopen_paid
           - COALESCE((SELECT SUM(currToCurr(checkitem_curr_id,
                                             apopen_curr_id,
                                             checkitem_amount + checkitem_discount,
                                             checkhead_checkdate))
                         FROM checkitem, checkhead
                        WHERE((checkitem_checkhead_id=checkhead_id)
                          AND (checkitem_apopen_id=apopen_id)
                          AND (NOT checkhead_void)
                          AND (NOT checkhead_posted)) ),0) AS balance,
         noNeg(apopen_amount * CASE WHEN (CURRENT_DATE &lt;= (apopen_docdate + terms_discdays)) THEN terms_discprcnt ELSE 0.0 END - discount_applied) AS discount_available
    INTO _p
    FROM apopen LEFT OUTER JOIN terms ON (apopen_terms_id=terms_id),
         (SELECT COALESCE(SUM(apapply_amount),0) AS discount_applied
            FROM apapply, apopen
           WHERE((apapply_target_apopen_id=pApopenid)
             AND (apapply_source_apopen_id=apopen_id)
             AND (apopen_discount)) ) AS data
   WHERE(apopen_id=pApopenid);
  IF(NOT FOUND OR (NOT _p.apopen_doctype IN (&#39;V&#39;,&#39;D&#39;))) THEN
    RETURN -1;
  END IF;

  _discount := round(_p.discount_available, 2);
  _amount := noNeg(round(_p.balance, 2) - _discount);

  IF (round(_p.balance,2) &lt; (_discount + _amount)) THEN
    RETURN -2;
  END IF;

  IF (_amount &gt; 0) THEN
    SELECT apselect_id INTO _apselectid
    FROM apselect
    WHERE (apselect_apopen_id=pApopenid);

    IF (FOUND) THEN
      UPDATE apselect
         SET apselect_amount=_amount,
             apselect_discount=_discount,
             apselect_curr_id = _p.apopen_curr_id
       WHERE(apselect_id=_apselectid);
    ELSE
      SELECT NEXTVAL(&#39;apselect_apselect_id_seq&#39;) INTO _apselectid;

      INSERT INTO apselect
      ( apselect_id, apselect_apopen_id,
        apselect_amount, apselect_discount,
        apselect_bankaccnt_id,
        apselect_curr_id, apselect_date )
      VALUES
      ( _apselectid, pApopenid,
        _amount, _discount,
        pBankaccntid,
        _p.apopen_curr_id, _p.apopen_docdate );
    END IF;
  ELSE
    _apselectid := 0;
  END IF;
  
  RETURN _apselectid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.selectuninvoicedshipment-integer">selectuninvoicedshipment( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCosmiscid ALIAS FOR $1;
  _cobmiscid INTEGER;
  _r RECORD;
  _cobillid INTEGER;
  _taxtypeid INTEGER := NULL;
  _taxid INTEGER := NULL;
  _pcnta NUMERIC := 0.0;
  _pcntb NUMERIC := 0.0;
  _pcntc NUMERIC := 0.0;
BEGIN

--  Grab all of the uninvoiced coship records
  FOR _r IN SELECT cohead_id, coitem_id, SUM(coship_qty) AS qty,
                   coitem_price, coitem_price_invuomratio AS invpricerat, coitem_qty_invuomratio, item_id,
                   ( ((coitem_qtyord - coitem_qtyshipped + coitem_qtyreturned) &lt;= 0)
                    OR (NOT cust_partialship) ) AS toclose, coitem_tax_id
            FROM cosmisc, coship, coitem, cohead, custinfo, itemsite, item
            WHERE ( (coship_cosmisc_id=cosmisc_id)
             AND (coship_coitem_id=coitem_id)
             AND (coitem_cohead_id=cohead_id)
             AND (cosmisc_shipped)
             AND (NOT coship_invoiced)
             AND (coitem_itemsite_id=itemsite_id)
             AND (itemsite_item_id=item_id)
             AND (cohead_cust_id=cust_id)
             AND (item_type != &#39;K&#39;)
             AND (cosmisc_id=pCosmiscid) )
            GROUP BY cohead_id, coitem_id, cust_partialship, coitem_tax_id,
                     coitem_qtyord, coitem_qtyshipped, coitem_qtyreturned,
                     coitem_price, invpricerat, coitem_qty_invuomratio, item_id
            UNION
            SELECT cohead_id, coitem_id, coitem_qtyord AS qty,
                   coitem_price, coitem_price_invuomratio AS invpricerat, coitem_qty_invuomratio, item_id,
                   ( ((SELECT count(*) FROM coitem AS sub WHERE sub.coitem_linenumber=kit.coitem_linenumber AND sub.coitem_subnumber &gt; 0 AND (coitem_qtyord - coitem_qtyshipped + coitem_qtyreturned) &gt; 0) &lt;= 0)
                    OR (NOT cust_partialship) ) AS toclose, coitem_tax_id
              FROM cosmisc, coitem AS kit, cohead, custinfo, itemsite, item
             WHERE((cosmisc_cohead_id=cohead_id)
               AND (coitem_cohead_id=cohead_id)
               AND (cosmisc_shipped)
               AND (coitem_itemsite_id=itemsite_id)
               AND (itemsite_item_id=item_id)
               AND (cohead_cust_id=cust_id)
               AND (item_type = &#39;K&#39;)
               AND (cosmisc_id=pCosmiscid) )
             GROUP BY cohead_id, coitem_id, cust_partialship, coitem_tax_id,
                      coitem_qtyord, coitem_qtyshipped, coitem_qtyreturned,
                      coitem_price, invpricerat, coitem_qty_invuomratio, item_id, coitem_linenumber LOOP

--  Check to see if a cobmisc head exists for this cohead
    SELECT createBillingHeader(_r.cohead_id) INTO _cobmiscid;

    SELECT cobill_id INTO _cobillid
      FROM cobill, cobmisc, coitem
     WHERE ((cobill_cobmisc_id=cobmisc_id)
       AND  (cobmisc_cohead_id=coitem_cohead_id)
       AND  (cobill_coitem_id=coitem_id)
       AND  (NOT cobmisc_posted)
       AND  (cobill_cobmisc_id=_cobmiscid)
       AND  (coitem_id=_r.coitem_id))
     LIMIT 1;
    IF (FOUND) THEN
      UPDATE cobill
         SET cobill_selectdate = CURRENT_DATE,
             cobill_select_username = CURRENT_USER,
             cobill_qty = cobill_qty + _r.qty,
             cobill_toclose = _r.toclose,
             cobill_tax_ratea = calculateTax(cobill_tax_id, round(((cobill_qty + _r.qty) * _r.coitem_qty_invuomratio) * (_r.coitem_price / _r.invpricerat), 2), 0.0, &#39;A&#39;),
             cobill_tax_rateb = calculateTax(cobill_tax_id, round(((cobill_qty + _r.qty) * _r.coitem_qty_invuomratio) * (_r.coitem_price / _r.invpricerat), 2), 0.0, &#39;B&#39;),
             cobill_tax_ratec = calculateTax(cobill_tax_id, round(((cobill_qty + _r.qty) * _r.coitem_qty_invuomratio) * (_r.coitem_price / _r.invpricerat), 2), 0.0, &#39;C&#39;)
       WHERE (cobill_id=_cobillid);
    ELSE
--  Now insert the cobill line
      _taxid := NULL;
      SELECT getItemTaxType(_r.item_id, cobmisc_taxauth_id) INTO _taxtypeid
        FROM cobmisc
       WHERE (cobmisc_id=_cobmiscid);
--      IF (_taxtypeid IS NOT NULL) THEN
--        SELECT getTaxSelection(cobmisc_taxauth_id, _taxtypeid) INTO _taxid
--          FROM cobmisc
--         WHERE (cobmisc_id=_cobmiscid);
        _taxid := _r.coitem_tax_id;
        SELECT tax_ratea, tax_rateb, tax_ratec
          INTO _pcnta, _pcntb, _pcntc
          FROM tax
         WHERE (tax_id=_taxid);
--      END IF;
      INSERT INTO cobill
      ( cobill_cobmisc_id, cobill_coitem_id,
        cobill_selectdate, cobill_select_username,
        cobill_qty, cobill_toclose,
        cobill_tax_id, cobill_taxtype_id,
        cobill_tax_pcta, cobill_tax_pctb, cobill_tax_pctc,
        cobill_tax_ratea, cobill_tax_rateb, cobill_tax_ratec )
      VALUES
      ( _cobmiscid, _r.coitem_id,
        CURRENT_DATE, CURRENT_USER,
        _r.qty, _r.toclose,
        _taxid, _taxtypeid,
        _pcnta, _pcntb, _pcntc,
        calculateTax(_taxid, round((_r.qty * _r.coitem_qty_invuomratio) * (_r.coitem_price / _r.invpricerat), 2), 0.0, &#39;A&#39;),
        calculateTax(_taxid, round((_r.qty * _r.coitem_qty_invuomratio) * (_r.coitem_price / _r.invpricerat), 2), 0.0, &#39;B&#39;),
        calculateTax(_taxid, round((_r.qty * _r.coitem_qty_invuomratio) * (_r.coitem_price / _r.invpricerat), 2), 0.0, &#39;C&#39;) );
    END IF;

  END LOOP;

  RETURN _cobmiscid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.selectuninvoicedshipments-integer">selectuninvoicedshipments( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWarehousid ALIAS FOR $1;
  _r RECORD;
  _recordCounter INTEGER := 0;

BEGIN

--  Grab all of the uninvoiced coship records
  FOR _r IN SELECT DISTINCT cosmisc_id
            FROM cosmisc, coship, coitem, itemsite
            WHERE ( (coship_cosmisc_id=cosmisc_id)
             AND (coship_coitem_id=coitem_id)
             AND (coitem_itemsite_id=itemsite_id)
             AND (coitem_status &lt;&gt; &#39;C&#39;)
             AND ( (pWarehousid = -1) OR (itemsite_warehous_id=pWarehousid) )
             AND (cosmisc_shipped)
             AND (NOT coship_invoiced)
             AND (coitem_id NOT IN ( SELECT cobill_coitem_id
                                     FROM cobmisc, cobill
                                     WHERE ((cobill_cobmisc_id=cobmisc_id)
                                      AND (NOT cobmisc_posted) ) ) ) ) LOOP

      PERFORM selectUninvoicedShipment(_r.cosmisc_id);

    _recordCounter := _recordCounter + 1;

  END LOOP;

  RETURN _recordCounter;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.selectuninvoicedshipments-integer-integer">selectuninvoicedshipments( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWarehousid ALIAS FOR $1;
  pCusttypeid ALIAS FOR $2;
  _r RECORD;
  _recordCounter INTEGER := 0;

BEGIN

--  Grab all of the uninvoiced coship records
  FOR _r IN SELECT DISTINCT cosmisc_id
            FROM cosmisc, coship, coitem, itemsite, cohead, cust
            WHERE ( (coship_cosmisc_id=cosmisc_id)
             AND (coship_coitem_id=coitem_id)
             AND (coitem_itemsite_id=itemsite_id)
             AND (coitem_status &lt;&gt; &#39;C&#39;)
             AND (coitem_cohead_id=cohead_id)
             AND (cohead_cust_id=cust_id)
             AND (cust_custtype_id=pCusttypeid)
             AND ( (pWarehousid = -1) OR (itemsite_warehous_id=pWarehousid) )
             AND (cosmisc_shipped)
             AND (NOT coship_invoiced)
             AND (coitem_id NOT IN ( SELECT cobill_coitem_id
                                     FROM cobmisc, cobill
                                     WHERE ((cobill_cobmisc_id=cobmisc_id)
                                      AND (NOT cobmisc_posted) ) ) ) ) LOOP

      PERFORM selectUninvoicedShipment(_r.cosmisc_id);

    _recordCounter := _recordCounter + 1;

  END LOOP;

  RETURN _recordCounter;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.selectuninvoicedshipments-integer-text">selectuninvoicedshipments( integer, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWarehousid ALIAS FOR $1;
  pCusttype ALIAS FOR $2;
  _r RECORD;
  _recordCounter INTEGER := 0;

BEGIN

--  Grab all of the uninvoiced coship records
  FOR _r IN SELECT DISTINCT cosmisc_id
            FROM cosmisc, coship, coitem, itemsite, cohead, cust, custtype
            WHERE ( (coship_cosmisc_id=cosmisc_id)
             AND (coship_coitem_id=coitem_id)
             AND (coitem_itemsite_id=itemsite_id)
             AND (coitem_status &lt;&gt; &#39;C&#39;)
             AND (coitem_cohead_id=cohead_id)
             AND (cohead_cust_id=cust_id)
             AND (cust_custtype_id=custtype_id)
             AND ( (pWarehousid = -1) OR (itemsite_warehous_id=pWarehousid) )
             AND (custtype_code ~ pCusttype)
             AND (cosmisc_shipped)
             AND (NOT coship_invoiced)
             AND (coitem_id NOT IN ( SELECT cobill_coitem_id
                                     FROM cobmisc, cobill
                                     WHERE ((cobill_cobmisc_id=cobmisc_id)
                                      AND (NOT cobmisc_posted) ) ) ) ) LOOP

      PERFORM selectUninvoicedShipment(_r.cosmisc_id);

    _recordCounter := _recordCounter + 1;

  END LOOP;

  RETURN _recordCounter;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setapjournalnumber">setapjournalnumber(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _journalNumber INTEGER;
  _r RECORD;

BEGIN

--  Fetch the next Journal Number
  SELECT fetchJournalNumber(&#39;A/P&#39;) INTO _journalNumber;

--  Walk through all of the A/P Open Items
  FOR _r IN SELECT apopen_id, apopen_docnumber
            FROM apopen
            WHERE (NOT apopen_posted) LOOP

--  Set the Journal Number for all of the G/L Transactions
--  for the A/P Open Item
    UPDATE gltrans
    SET gltrans_journalnumber=_journalNumber
    WHERE ( (gltrans_source=&#39;P/O&#39;)
     AND (gltrans_doctype IN (&#39;VO&#39;))
     AND (gltrans_docnumber=_r.apopen_docnumber)
     AND (NOT gltrans_exported) );

--  Set the Journal Number for the A/P Open Item
    UPDATE apopen
    SET apopen_journalnumber=_journalNumber
    WHERE (apopen_id=_r.apopen_id);

  END LOOP;

  RETURN _journalNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setarjournalnumber">setarjournalnumber(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _journalNumber INTEGER;
  _r RECORD;

BEGIN

--  Fetch the next Journal Number
  SELECT fetchJournalNumber(&#39;A/R&#39;) INTO _journalNumber;

--  Walk through all of the A/R Open Items
  FOR _r IN SELECT aropen_id, aropen_docnumber
            FROM aropen
            WHERE (NOT aropen_posted) LOOP

--  Set the Journal Number for all of the G/L Transactions
--  for the A/R Open Item
    UPDATE gltrans
    SET gltrans_journalnumber=_journalNumber
    WHERE ( (gltrans_source=&#39;S/O&#39;)
     AND (gltrans_doctype IN (&#39;CM&#39;, &#39;IN&#39;))
     AND (gltrans_docnumber=_r.aropen_docnumber)
     AND (NOT gltrans_exported) );

--  Set the Journal Number for the A/R Open Item
    UPDATE aropen
    SET aropen_journalnumber=_journalNumber
    WHERE (aropen_id=_r.aropen_id);

  END LOOP;

  RETURN _journalNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setbudget-integer-integer-integer-numeric">setbudget( integer, integer, integer, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBudgheadid ALIAS FOR $1;
  pPeriodid ALIAS FOR $2;
  pAccntid ALIAS FOR $3;
  pAmount ALIAS FOR $4;
  _budgetid INTEGER;

BEGIN

  SELECT budgitem_id INTO _budgetid
    FROM budgitem
   WHERE ((budgitem_period_id=pPeriodid)
     AND  (budgitem_budghead_id=pBudgheadid)
     AND  (budgitem_accnt_id=pAccntid));
  IF (FOUND) THEN
    UPDATE budgitem
       SET budgitem_amount = pAmount
     WHERE (budgitem_id=_budgetid);
  ELSE
    SELECT nextval(&#39;budgitem_budgitem_id_seq&#39;) INTO _budgetid;

    INSERT INTO budgitem
          (budgitem_id, budgitem_budghead_id, budgitem_period_id, budgitem_accnt_id, budgitem_amount)
    VALUES(_budgetid, pBudgheadid, pPeriodid, pAccntid, pAmount);
  END IF;

  RETURN _budgetid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setbudget-integer-integer-numeric">setbudget( integer, integer, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPeriodid ALIAS FOR $1;
  pAccntid ALIAS FOR $2;
  pAmount ALIAS FOR $3;

BEGIN
  RETURN setBudget(1, pPeriodid, pAccntid, pAmount);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setbytea-bytea">setbytea( bytea )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pMetricName ALIAS FOR $1;
  _value bytea;

BEGIN

  _value := pMetricName;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setbytea-text">setbytea( text )</a>
		</h2>
<h3>Returns: bytea</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pMetricName ALIAS FOR $1;
  _value bytea;

BEGIN

  _value := decode(pMetricName, &#39;escape&#39;);

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setgljournalnumber-date-date">setgljournalnumber( date, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pStartDate ALIAS FOR $1;
  pEndDate ALIAS FOR $2;
  _journalNumber INTEGER;

BEGIN

--  Fetch the next Journal Number
  SELECT fetchJournalNumber(&#39;G/L&#39;) INTO _journalNumber;

--  Set the Journal Number for all of the unposted G/L Transactions
--  in the passed date range.
  UPDATE gltrans
  SET gltrans_journalnumber=_journalNumber
  WHERE ( (NOT gltrans_exported)
    AND (gltrans_date BETWEEN pStartDate and pEndDate) );

  RETURN _journalNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setmetric-text-text">setmetric( text, text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pMetricName ALIAS FOR $1;
  pMetricValue ALIAS FOR $2;
  _metricid INTEGER;

BEGIN

  SELECT metric_id INTO _metricid
  FROM metric
  WHERE (metric_name=pMetricName);

  IF (FOUND) THEN
    UPDATE metric
    SET metric_value=pMetricValue
    WHERE (metric_id=_metricid);

  ELSE
    INSERT INTO metric
    (metric_name, metric_value)
    VALUES (pMetricName, pMetricValue);
  END IF;

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setmetricenc-text-text-text">setmetricenc( text, text, text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pMetricName ALIAS FOR $1;
  pMetricValue ALIAS FOR $2;
  pMetricEnc ALIAS FOR $3;
  _metricid INTEGER;
  _value bytea;
  _key bytea;

BEGIN

  _value = decode(pMetricValue, &#39;escape&#39;);
  _key = decode(pMetricEnc, &#39;escape&#39;);

  SELECT metricenc_id INTO _metricid
  FROM metricenc
  WHERE (metricenc_name=pMetricName);

  IF (FOUND) THEN
    UPDATE metricenc
    SET metricenc_value=encrypt(_value, _key, &#39;bf&#39;)
    WHERE (metricenc_id=_metricid);

  ELSE
    INSERT INTO metricenc
    (metricenc_name, metricenc_value)
    VALUES (pMetricName, encrypt(_value, _key, &#39;bf&#39;));
  END IF;

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setnextapmemonumber-integer">setnextapmemonumber( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pNumber ALIAS FOR $1;
  _orderseqid INTEGER;

BEGIN

  SELECT orderseq_id INTO _orderseqid
  FROM orderseq
  WHERE (orderseq_name=&#39;APMemoNumber&#39;);
  IF (FOUND) THEN
    UPDATE orderseq
    SET orderseq_number=pNumber
    WHERE (orderseq_id=_orderseqid);

  ELSE
    INSERT INTO orderseq
    (orderseq_name, orderseq_number)
    VALUES
    (&#39;APMemoNumber&#39;, pNumber);
  END IF;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setnextarmemonumber-integer">setnextarmemonumber( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pNumber ALIAS FOR $1;
  _orderseqid INTEGER;

BEGIN

  SELECT orderseq_id INTO _orderseqid
  FROM orderseq
  WHERE (orderseq_name=&#39;ARMemoNumber&#39;);
  IF (FOUND) THEN
    UPDATE orderseq
    SET orderseq_number=pNumber
    WHERE (orderseq_id=_orderseqid);

  ELSE
    INSERT INTO orderseq
    (orderseq_name, orderseq_number)
    VALUES
    (&#39;ARMemoNumber&#39;, pNumber);
  END IF;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setnextchecknumber-integer-integer">setnextchecknumber( integer, integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBankaccntid ALIAS FOR $1;
  pNextCheckNumber ALIAS FOR $2;

BEGIN

  UPDATE bankaccnt
  SET bankaccnt_nextchknum=pNextCheckNumber
  WHERE (bankaccnt_id=pBankaccntid);

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setnextcmnumber-integer">setnextcmnumber( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pNumber ALIAS FOR $1;
  _orderseqid INTEGER;

BEGIN

  SELECT orderseq_id INTO _orderseqid
  FROM orderseq
  WHERE (orderseq_name=&#39;CmNumber&#39;);

  IF (NOT FOUND) THEN
    SELECT NEXTVAL(&#39;orderseq_orderseq_id_seq&#39;) INTO _orderseqid;

    INSERT INTO orderseq (orderseq_id, orderseq_name, orderseq_number)
    VALUES (_orderseqid, &#39;CmNumber&#39;, pNumber);

  ELSE
    UPDATE orderseq
    SET orderseq_number=pNumber
    WHERE (orderseq_name=&#39;CmNumber&#39;);
  END IF;

  RETURN _orderseqid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setnextcrmaccountnumber-integer">setnextcrmaccountnumber( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pNumber ALIAS FOR $1;
  _orderseqid INTEGER;

BEGIN

  SELECT orderseq_id INTO _orderseqid
  FROM orderseq
  WHERE (orderseq_name=&#39;CRMAccountNumber&#39;);

  IF (NOT FOUND) THEN
    SELECT NEXTVAL(&#39;orderseq_orderseq_id_seq&#39;) INTO _orderseqid;

    INSERT INTO orderseq (orderseq_id, orderseq_name, orderseq_number)
    VALUES (_orderseqid, &#39;CRMAccountNumber&#39;, pNumber);

  ELSE
    UPDATE orderseq
    SET orderseq_number=pNumber
    WHERE (orderseq_name=&#39;CRMAccountNumber&#39;);
  END IF;

  RETURN _orderseqid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setnextincidentnumber-integer">setnextincidentnumber( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pNumber ALIAS FOR $1;
  _orderseqid INTEGER;

BEGIN

  SELECT orderseq_id INTO _orderseqid
  FROM orderseq
  WHERE (orderseq_name=&#39;IncidentNumber&#39;);

  IF (NOT FOUND) THEN
    SELECT NEXTVAL(&#39;orderseq_orderseq_id_seq&#39;) INTO _orderseqid;

    INSERT INTO orderseq (orderseq_id, orderseq_name, orderseq_number)
    VALUES (_orderseqid, &#39;IncidentNumber&#39;, pNumber);

  ELSE
    UPDATE orderseq
    SET orderseq_number=pNumber
    WHERE (orderseq_name=&#39;IncidentNumber&#39;);
  END IF;

  RETURN _orderseqid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setnextinvcnumber-integer">setnextinvcnumber( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pNumber ALIAS FOR $1;
  _orderseqid INTEGER;

BEGIN

  SELECT orderseq_id INTO _orderseqid
  FROM orderseq
  WHERE (orderseq_name=&#39;InvcNumber&#39;);

  IF (NOT FOUND) THEN
    SELECT NEXTVAL(&#39;orderseq_orderseq_id_seq&#39;) INTO _orderseqid;

    INSERT INTO orderseq (orderseq_id, orderseq_name, orderseq_number)
    VALUES (_orderseqid, &#39;InvcNumber&#39;, pNumber);

  ELSE
    UPDATE orderseq
    SET orderseq_number=pNumber
    WHERE (orderseq_name=&#39;InvcNumber&#39;);
  END IF;

  RETURN _orderseqid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setnextnumber-text-integer">setnextnumber( text, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  psequence	ALIAS FOR $1;
  pnumber	ALIAS FOR $2;
  _orderseqid	INTEGER;

BEGIN
  SELECT orderseq_id INTO _orderseqid
  FROM orderseq
  WHERE (orderseq_name=psequence);

  IF (NOT FOUND) THEN
    INSERT INTO orderseq (orderseq_name, orderseq_number,
			  orderseq_table, orderseq_numcol)
		  VALUES (psequence,     pnumber,
			  CASE WHEN (psequence=&#39;APMemoNumber&#39;) THEN &#39;apopen&#39;
			       WHEN (psequence=&#39;ARMemoNumber&#39;) THEN &#39;aropen&#39;
			       WHEN (psequence=&#39;CmNumber&#39;) THEN &#39;cmhead&#39;
			       WHEN (psequence=&#39;IncidentNumber&#39;) THEN &#39;incdt&#39;
			       WHEN (psequence=&#39;InvcNumber&#39;) THEN &#39;invchead&#39;
			       WHEN (psequence=&#39;JournalNumber&#39;) THEN &#39;gltrans&#39;
			       WHEN (psequence=&#39;PlanNumber&#39;) THEN &#39;planord&#39;
			       WHEN (psequence=&#39;PoNumber&#39;) THEN &#39;pohead&#39;
			       WHEN (psequence=&#39;PrNumber&#39;) THEN &#39;pr&#39;
			       WHEN (psequence=&#39;QuNumber&#39;) THEN &#39;quhead&#39;
			       WHEN (psequence=&#39;ShipmentNumber&#39;) THEN &#39;cosmisc&#39;
			       WHEN (psequence=&#39;SoNumber&#39;) THEN &#39;cohead&#39;
			       WHEN (psequence=&#39;ToNumber&#39;) THEN &#39;tohead&#39;
			       WHEN (psequence=&#39;VcNumber&#39;) THEN &#39;vohead&#39;
			       WHEN (psequence=&#39;WoNumber&#39;) THEN &#39;wo&#39;
			       ELSE &#39;&#39;
			  END,
			  CASE WHEN (psequence=&#39;APMemoNumber&#39;) THEN &#39;apopen_docnumber&#39;
			       WHEN (psequence=&#39;ARMemoNumber&#39;) THEN &#39;aropen_docnumber&#39;
			       WHEN (psequence=&#39;CmNumber&#39;) THEN &#39;cmhead_number&#39;
			       WHEN (psequence=&#39;IncidentNumber&#39;) THEN &#39;incdt_number&#39;
			       WHEN (psequence=&#39;InvcNumber&#39;) THEN &#39;invchead_invcnumber&#39;
			       WHEN (psequence=&#39;JournalNumber&#39;) THEN &#39;gltrans_journalnumber&#39;
			       WHEN (psequence=&#39;PlanNumber&#39;) THEN &#39;planord_number&#39;
			       WHEN (psequence=&#39;PoNumber&#39;) THEN &#39;pohead_number&#39;
			       WHEN (psequence=&#39;PrNumber&#39;) THEN &#39;pr_number&#39;
			       WHEN (psequence=&#39;QuNumber&#39;) THEN &#39;quhead_number&#39;
			       WHEN (psequence=&#39;ShipmentNumber&#39;) THEN &#39;cosmisc_number&#39;
			       WHEN (psequence=&#39;SoNumber&#39;) THEN &#39;cohead_number&#39;
			       WHEN (psequence=&#39;ToNumber&#39;) THEN &#39;tohead_number&#39;
			       WHEN (psequence=&#39;VcNumber&#39;) THEN &#39;vohead_number&#39;
			       WHEN (psequence=&#39;WoNumber&#39;) THEN &#39;wo_number&#39;
			       ELSE &#39;&#39;
			  END
			  );
  ELSE
    UPDATE orderseq
    SET orderseq_number=pnumber
    WHERE (orderseq_name=psequence);
  END IF;

  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setnextponumber-integer">setnextponumber( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pNumber ALIAS FOR $1;
  _orderseqid INTEGER;

BEGIN

  SELECT orderseq_id INTO _orderseqid
  FROM orderseq
  WHERE (orderseq_name=&#39;PoNumber&#39;);

  IF (NOT FOUND) THEN
    SELECT NEXTVAL(&#39;orderseq_orderseq_id_seq&#39;) INTO _orderseqid;
    INSERT INTO orderseq (orderseq_id, orderseq_name, orderseq_number)
    VALUES (_orderseqid, &#39;PoNumber&#39;, pNumber);

  ELSE
    UPDATE orderseq
    SET orderseq_number=pNumber
    WHERE (orderseq_name=&#39;PoNumber&#39;);
  END IF;

  RETURN _orderseqid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setnextprnumber-integer">setnextprnumber( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pNumber ALIAS FOR $1;
  _orderseqid INTEGER;

BEGIN

  SELECT orderseq_id INTO _orderseqid
  FROM orderseq
  WHERE (orderseq_name=&#39;PrNumber&#39;);

  IF (NOT FOUND) THEN
    SELECT NEXTVAL(&#39;orderseq_orderseq_id_seq&#39;) INTO _orderseqid;
    INSERT INTO orderseq (orderseq_id, orderseq_name, orderseq_number)
    VALUES (_orderseqid, &#39;PrNumber&#39;, pNumber);

  ELSE
    UPDATE orderseq
    SET orderseq_number=pNumber
    WHERE (orderseq_name=&#39;PrNumber&#39;);
  END IF;

  RETURN _orderseqid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setnextqunumber-integer">setnextqunumber( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pQuNumber ALIAS FOR $1;
  _orderseqid INTEGER;

BEGIN

  SELECT orderseq_id INTO _orderseqid
  FROM orderseq
  WHERE (orderseq_name=&#39;QuNumber&#39;);

  IF (NOT FOUND) THEN
    SELECT NEXTVAL(&#39;orderseq_orderseq_id_seq&#39;) INTO _orderseqid;

    INSERT INTO orderseq (orderseq_id, orderseq_name, orderseq_number)
    VALUES (_orderseqid, &#39;QuNumber&#39;, pQuNumber);

  ELSE
    UPDATE orderseq
    SET orderseq_number=pQuNumber
    WHERE (orderseq_name=&#39;QuNumber&#39;);
  END IF;

  RETURN _orderseqid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setnextsonumber-integer">setnextsonumber( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pSoNumber ALIAS FOR $1;
  _orderseqid INTEGER;

BEGIN

  SELECT orderseq_id INTO _orderseqid
  FROM orderseq
  WHERE (orderseq_name=&#39;SoNumber&#39;);

  IF (NOT FOUND) THEN
    SELECT NEXTVAL(&#39;orderseq_orderseq_id_seq&#39;) INTO _orderseqid;

    INSERT INTO orderseq (orderseq_id, orderseq_name, orderseq_number)
    VALUES (_orderseqid, &#39;SoNumber&#39;, pSoNumber);

  ELSE
    UPDATE orderseq
    SET orderseq_number=pSoNumber
    WHERE (orderseq_name=&#39;SoNumber&#39;);
  END IF;

  RETURN _orderseqid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setnextvcnumber-integer">setnextvcnumber( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pNumber ALIAS FOR $1;
  _orderseqid INTEGER;

BEGIN

  SELECT orderseq_id INTO _orderseqid
  FROM orderseq
  WHERE (orderseq_name=&#39;VcNumber&#39;);

  IF (NOT FOUND) THEN
    SELECT NEXTVAL(&#39;orderseq_orderseq_id_seq&#39;) INTO _orderseqid;
    INSERT INTO orderseq (orderseq_id, orderseq_name, orderseq_number)
    VALUES (_orderseqid, &#39;VcNumber&#39;, pNumber);

  ELSE
    UPDATE orderseq
    SET orderseq_number=pNumber
    WHERE (orderseq_name=&#39;VcNumber&#39;);
  END IF;

  RETURN _orderseqid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setnextwonumber-integer">setnextwonumber( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWoNumber ALIAS FOR $1;
  _orderseqid INTEGER;

BEGIN

  SELECT orderseq_id INTO _orderseqid
  FROM orderseq
  WHERE (orderseq_name=&#39;WoNumber&#39;);

  IF (NOT FOUND) THEN
    SELECT NEXTVAL(&#39;orderseq_orderseq_id_seq&#39;) INTO _orderseqid;

    INSERT INTO orderseq (orderseq_id, orderseq_name, orderseq_number)
    VALUES (_orderseqid, &#39;WoNumber&#39;, pWoNumber);

  ELSE
    UPDATE orderseq
    SET orderseq_number=pWoNumber
    WHERE (orderseq_name=&#39;WoNumber&#39;);
  END IF;

  RETURN _orderseqid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setusercancreateusers-text-boolean">setusercancreateusers( text, boolean )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUsername ALIAS FOR $1;
  pCreateUser ALIAS FOR $2;

BEGIN

  IF (pCreateUser) THEN
    EXECUTE &#39;ALTER USER &#39; || pUsername || &#39; CREATEUSER;&#39;;
  ELSE
    EXECUTE &#39;ALTER USER &#39; || pUsername || &#39; NOCREATEUSER;&#39;;
  END IF;

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setuserpreference-integer-text-text">setuserpreference( integer, text, text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUserid ALIAS FOR $1;
  pPrefName ALIAS FOR $2;
  pPrefValue ALIAS FOR $3;
  _usrprefid INTEGER;

BEGIN

  SELECT usrpref_id INTO _usrprefid
  FROM usrpref
  WHERE ((usrpref_usr_id=pUserid)
   AND (usrpref_name=pPrefName));

  IF (FOUND) THEN
    UPDATE usrpref
    SET usrpref_value=pPrefValue
    WHERE (usrpref_id=_usrprefid);

  ELSE
    INSERT INTO usrpref
    (usrpref_usr_id, usrpref_name, usrpref_value)
    VALUES
    (pUserid, pPrefName, pPrefValue);
  END IF;

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setuserpreference-text-text">setuserpreference( text, text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPrefName ALIAS FOR $1;
  pPrefValue ALIAS FOR $2;

BEGIN

  PERFORM setUserPreferences(CURRENT_USER, pPrefName, pPrefValue);
  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.setuserpreference-text-text-text">setuserpreference( text, text, text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUsername ALIAS FOR $1;
  pPrefName ALIAS FOR $2;
  pPrefValue ALIAS FOR $3;
  _usrprefid INTEGER;

BEGIN

  SELECT usrpref_id INTO _usrprefid
  FROM usrpref
  WHERE ( (usrpref_username=pUsername)
   AND (usrpref_name=pPrefName) );

  IF (FOUND) THEN
    UPDATE usrpref
    SET usrpref_value=pPrefValue
    WHERE (usrpref_id=_usrprefid);

  ELSE
    INSERT INTO usrpref
    (usrpref_username, usrpref_name, usrpref_value)
    VALUES
    (pUsername, pPrefName, pPrefValue);
  END IF;

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.shipments-text">shipments( text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTransType ALIAS FOR $1;

BEGIN
  IF (pTransType IN (&#39;SC&#39;, &#39;SV&#39;, &#39;SH&#39;, &#39;RS&#39;, &#39;TS&#39;)) THEN
    RETURN TRUE;
  ELSE
    RETURN FALSE;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.shipmentsbycustomervalue-integer-integer">shipmentsbycustomervalue( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pPeriodid ALIAS FOR $2;
  _value NUMERIC;
  _startDate DATE;
  _endDate DATE;

BEGIN

  _startDate := findPeriodStart(pPeriodid);
  _endDate := findPeriodEnd(pPeriodid);

-- returns in base currency
  SELECT SUM(currToBase(cohist_curr_id, cohist_qtyshipped * cohist_unitprice, cohist_invcdate)) INTO _value
  FROM cohist, itemsite, item
  WHERE ( (cohist_itemsite_id&lt;&gt;-1)
   AND (cohist_itemsite_id=itemsite_id)
   AND (itemsite_item_id=item_id)
   AND (cohist_cust_id=pCustid)
   AND (cohist_invcdate BETWEEN _startDate AND _endDate) );

  IF (_value IS NULL) THEN
    _value := 0;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.shipmentsbycustomervalue-integer-integer-integer">shipmentsbycustomervalue( integer, integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pPeriodid ALIAS FOR $2;
  pProdcatid ALIAS FOR $3;
  _value NUMERIC;
  _startDate DATE;
  _endDate DATE;

BEGIN

  _startDate := findPeriodStart(pPeriodid);
  _endDate := findPeriodEnd(pPeriodid);

-- returns in base currency
  SELECT SUM(currToBase(cohist_curr_id, cohist_qtyshipped * cohist_unitprice, cohist_invcdate)) INTO _value
  FROM cohist, itemsite, item
  WHERE ( (cohist_cust_id=pCustid)
   AND (cohist_itemsite_id=itemsite_id)
   AND (itemsite_item_id=item_id)
   AND (item_prodcat_id=pProdcatid)
   AND (cohist_invcdate BETWEEN _startDate AND _endDate) );

  IF (_value IS NULL) THEN
    _value := 0;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.shipmentsbycustomervalue-integer-integer-text">shipmentsbycustomervalue( integer, integer, text )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCustid ALIAS FOR $1;
  pPeriodid ALIAS FOR $2;
  pProdcat ALIAS FOR $3;
  _value NUMERIC;
  _startDate DATE;
  _endDate DATE;

BEGIN

  _startDate := findPeriodStart(pPeriodid);
  _endDate := findPeriodEnd(pPeriodid);

-- returns in base currency
  SELECT SUM(currToBase(cohist_curr_id, cohist_qtyshipped * cohist_unitprice, cohist_invcdate)) INTO _value
  FROM cohist, itemsite, item, prodcat
  WHERE ( (cohist_cust_id=pCustid)
   AND (cohist_itemsite_id=itemsite_id)
   AND (itemsite_item_id=item_id)
   AND (item_prodcat_id=prodcat_id)
   AND (prodcat_code ~ pProdcat)
   AND (cohist_invcdate BETWEEN _startDate AND _endDate) );

  IF (_value IS NULL) THEN
    _value := 0;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.shipmentsbyitemqty-integer-integer">shipmentsbyitemqty( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pPeriodid ALIAS FOR $2;
  _value NUMERIC;
  _startDate DATE;
  _endDate DATE;

BEGIN

  _startDate := findPeriodStart(pPeriodid);
  _endDate := findPeriodEnd(pPeriodid);

  SELECT SUM(cohist_qtyshipped) INTO _value
  FROM cohist
  WHERE ( (cohist_itemsite_id=pItemsiteid)
   AND (cohist_invcdate BETWEEN _startDate AND _endDate) );

  IF (_value IS NULL) THEN
    _value := 0;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.shipmentsbyitemvalue-integer-integer">shipmentsbyitemvalue( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pPeriodid ALIAS FOR $2;
  _value NUMERIC;
  _startDate DATE;
  _endDate DATE;

BEGIN

  _startDate := findPeriodStart(pPeriodid);
  _endDate := findPeriodEnd(pPeriodid);

-- returns in base currency
  SELECT SUM(currToBase(cohist_curr_id, cohist_qtyshipped * cohist_unitprice, cohist_invcdate)) INTO _value
  FROM cohist, itemsite, item
  WHERE ( (cohist_itemsite_id=itemsite_id)
   AND ( itemsite_item_id=item_id)
   AND ( itemsite_id=pItemsiteid)
   AND ( cohist_invcdate BETWEEN _startDate AND _endDate ) );

  IF (_value IS NULL) THEN
    _value := 0;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.shipshipment-integer">shipshipment( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN shipShipment($1, CURRENT_TIMESTAMP);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.shipshipment-integer-timestamp-with-time-zone">shipshipment( integer, timestamp with time zone )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pshipheadid		ALIAS FOR $1;
  _timestamp		TIMESTAMP WITH TIME ZONE := $2;

  _billedQty		NUMERIC;
  _c			RECORD;
  _coholdtype		TEXT;
  _gldate		DATE;
  _invhistid		INTEGER;
  _itemlocSeries	INTEGER;
  _newQty		NUMERIC;
  _result		INTEGER;
  _s			RECORD;
  _shipcomplete		BOOLEAN;
  _shiphead		RECORD;
  _stdcost		NUMERIC;
  _ti			RECORD;
  _to			RECORD;
  _variance           	NUMERIC;

BEGIN

  IF (_timestamp IS NULL) THEN
    _timestamp := CURRENT_TIMESTAMP;
  END IF;
  _gldate := _timestamp::DATE;

  SELECT * INTO _shiphead
  FROM shiphead WHERE (shiphead_id=pshipheadid);
  IF (NOT FOUND) THEN
    RETURN -50;
  END IF;

  IF (_shiphead.shiphead_order_type = &#39;SO&#39;) THEN

    SELECT cohead_shipcomplete, cohead_holdtype INTO _shipcomplete, _coholdtype
      FROM cohead, shiphead
     WHERE ((shiphead_order_id=cohead_id)
       AND  (NOT shiphead_shipped)
       AND  (shiphead_order_type=_shiphead.shiphead_order_type)
       AND  (shiphead_id=pshipheadid));

    IF (_coholdtype = &#39;C&#39;) THEN
      RETURN -12;
    ELSIF (_coholdtype = &#39;P&#39;) THEN
      RETURN -13;
    ELSIF (_coholdtype = &#39;R&#39;) THEN
      RETURN -14;
    ELSIF (_coholdtype = &#39;S&#39;) THEN
      RETURN -15;
    END IF;

    IF ( _shipcomplete ) THEN
      FOR _c IN SELECT (coitem_qtyord -
			(COALESCE(SUM(shipitem_qty),0) +
			 (coitem_qtyshipped - coitem_qtyreturned))) AS remain
		  FROM (coitem LEFT OUTER JOIN (itemsite JOIN item ON (itemsite_item_id=item_id)) ON (coitem_itemsite_id=itemsite_id)) LEFT OUTER JOIN
		       shipitem ON (shipitem_orderitem_id=coitem_id
		                AND shipitem_shiphead_id=pshipheadid)
		 WHERE ((coitem_status&lt;&gt;&#39;X&#39;)
                   AND  (item_type != &#39;K&#39;)
		   AND  (coitem_cohead_id=_shiphead.shiphead_order_id))
	      GROUP BY coitem_id, coitem_qtyshipped, coitem_qtyord,
		       coitem_qtyreturned LOOP
	IF (_c.remain &gt; 0) THEN
	  RETURN -99;
	END IF;
      END LOOP;
    END IF;

    FOR _c IN SELECT coitem_id, cohead_number, cohead_cust_id, cohead_billtoname,
		     itemsite_id, itemsite_item_id,
                     coitem_qty_invuomratio,
                     coitem_warranty, coitem_cos_accnt_id,
		     SUM(shipitem_qty) AS _qty,
                     SUM(shipitem_value) AS _value
	      FROM coitem, cohead, shiphead, shipitem, itemsite
	      WHERE ( (coitem_cohead_id=cohead_id)
	       AND (coitem_itemsite_id=itemsite_id)
	       AND (shiphead_order_id=cohead_id)
	       AND (shipitem_shiphead_id=shiphead_id)
	       AND (shipitem_orderitem_id=coitem_id)
	       AND (NOT shiphead_shipped)
	       AND (shiphead_id=pshipheadid) )
	      GROUP BY coitem_id, coitem_qty_invuomratio, cohead_number, cohead_cust_id, cohead_billtoname,
		       itemsite_id, itemsite_item_id, coitem_warranty, coitem_cos_accnt_id LOOP

      IF _c._value &gt; 0 THEN
  --    Distribute to G/L, credit Shipping Asset, debit COS
	SELECT MIN(insertGLTransaction( &#39;S/R&#39;, &#39;SH&#39;, _shiphead.shiphead_number, (&#39;Ship Shipment to Customer &#39; || _c.cohead_billtoname),
				     costcat_shipasset_accnt_id,
                                     CASE WHEN(COALESCE(_c.coitem_cos_accnt_id, -1) != -1) THEN _c.coitem_cos_accnt_id
                                          WHEN(_c.coitem_warranty=TRUE) THEN resolveCOWAccount(itemsite_id, _c.cohead_cust_id)
                                          ELSE resolveCOSAccount(itemsite_id, _c.cohead_cust_id)
                                     END,
                                     -1, _c._value, _gldate )) INTO _result
	FROM itemsite, costcat
	WHERE ( (itemsite_costcat_id=costcat_id)
	AND (itemsite_id=_c.itemsite_id) );

	IF (_result &lt; 0) THEN
	  RETURN _result;
	END IF;

      END IF;

      UPDATE coitem
      SET coitem_qtyshipped = (coitem_qtyshipped + _c._qty)
      WHERE (coitem_id=_c.coitem_id);

      -- check to see if we have more invoiced than shipped items
      -- if we do we will need to mark some of these records as invoiced
      SELECT noNeg(( SELECT COALESCE(SUM(cobill_qty), 0.0)
		     FROM cobill, cobmisc, coitem
		     WHERE ( (cobill_cobmisc_id=cobmisc_id)
		      AND (cobmisc_cohead_id=coitem_cohead_id)
		      AND (cobill_coitem_id=coitem_id)
		      AND (cobmisc_posted)
		      AND (coitem_id=_c.coitem_id) )
		   ) - ( SELECT COALESCE(SUM(shipitem_qty), 0.0)
			 FROM shipitem, shiphead, coitem
			 WHERE ( (shipitem_shiphead_id=shiphead_id)
			  AND (shiphead_order_id=coitem_cohead_id)
			  AND (shipitem_orderitem_id=coitem_id)
			  AND (shiphead_order_type=_shiphead.shiphead_order_type)
			  AND (shiphead_shipped)
			  AND (coitem_id=_c.coitem_id) )
		       ) ) INTO _billedQty;

      IF (_billedQty &gt; 0.0) THEN
	FOR _s IN SELECT shipitem_id, shipitem_qty
		  FROM shipitem, shiphead
		  WHERE ( (shipitem_shiphead_id=shiphead_id)
		   AND (shipitem_orderitem_id=_c.coitem_id)
		   AND (shiphead_order_type=_shiphead.shiphead_order_type)
		   AND (NOT shiphead_shipped)
		   AND (shiphead_id=pshipheadid) )
		  ORDER BY shipitem_qty LOOP

	  IF (_billedQty &gt; 0.0) THEN

	    IF (_billedQty &gt;= _s.shipitem_qty) THEN
	      UPDATE shipitem SET shipitem_invoiced=TRUE WHERE shipitem_id=_s.shipitem_id;
	    ELSE
	      _newQty := _s.shipitem_qty - _billedQty;
	      UPDATE shipitem SET shipitem_invoiced=TRUE, shipitem_qty=_billedQty WHERE shipitem_id=_s.shipitem_id;
	      INSERT INTO shipitem ( shipitem_orderitem_id, shipitem_shipdate,
		shipitem_qty, shipitem_transdate, shipitem_invoiced,
		shipitem_shiphead_id, shipitem_trans_username)
	      SELECT shipitem_orderitem_id, shipitem_shipdate,
		_newQty, shipitem_transdate, FALSE,
		shipitem_shiphead_id, shipitem_trans_username
	      FROM shipitem
	      WHERE (shipitem_id=_s.shipitem_id);
	    END IF;

	    _billedQty := _billedQty - _s.shipitem_qty;
	  END IF;
	END LOOP;
      END IF;

    END LOOP;

  ELSEIF (_shiphead.shiphead_order_type = &#39;TO&#39;) THEN
    IF (_shiphead.shiphead_shipped) THEN
      RETURN -8;
    END IF;

    SELECT tohead.* INTO _to
      FROM tohead
     WHERE (tohead_id=_shiphead.shiphead_order_id);

    IF ( _to.tohead_shipcomplete ) THEN
      -- use sufficientInventory...()?
      FOR _ti IN SELECT (toitem_qty_ordered -
			 (COALESCE(SUM(shipitem_qty),0) + toitem_qty_shipped)) AS remain
		  FROM toitem LEFT OUTER JOIN
		       shipitem ON (shipitem_orderitem_id=toitem_id)
		 WHERE ((toitem_status&lt;&gt;&#39;X&#39;)
		   AND  (toitem_tohead_id=_shiphead.shiphead_order_id))
	      GROUP BY toitem_qty_shipped, toitem_qty_ordered LOOP
	IF (_ti.remain &gt; 0) THEN
	  RETURN -99;
	END IF;
      END LOOP;
    END IF;

    FOR _ti IN SELECT toitem_id, toitem_item_id, SUM(shipitem_qty) AS qty, SUM(shipitem_value) AS value
		FROM toitem, shipitem
		WHERE ((toitem_tohead_id=_to.tohead_id)
		  AND  (shipitem_orderitem_id=toitem_id)
		  AND  (shipitem_shiphead_id=pshipheadid))
		GROUP BY toitem_id, toitem_item_id LOOP

      IF (NOT EXISTS(SELECT itemsite_id
		     FROM itemsite
		     WHERE ((itemsite_item_id=_ti.toitem_item_id)
		     AND  (itemsite_warehous_id = _to.tohead_trns_warehous_id))
		     )) THEN
	RETURN -6;
      END IF;

      --  Create an open itemloc record if this is a controlled item
      IF ( ( SELECT ((itemsite_loccntrl) OR (itemsite_controlmethod IN (&#39;L&#39;, &#39;S&#39;)))
	     FROM itemsite
	     WHERE ((itemsite_item_id=_ti.toitem_item_id)
	      AND (itemsite_warehous_id=_to.tohead_src_warehous_id)) ) ) THEN

	IF (_itemlocSeries = 0 OR _itemlocSeries IS NULL) THEN
	  _itemlocSeries := NEXTVAL(&#39;itemloc_series_seq&#39;);
	END IF;
      END IF;

      SELECT postInvTrans(si.itemsite_id, &#39;TS&#39;, _ti.qty, &#39;I/M&#39;,
			  _shiphead.shiphead_order_type, _to.tohead_number,
			  _to.tohead_number,
			  &#39;Ship from Src to Transit Warehouse&#39;,
			  tc.costcat_asset_accnt_id,
			  sc.costcat_shipasset_accnt_id,
			  _itemlocSeries, _timestamp, _ti.value) INTO _invhistid
      FROM itemsite AS ti, costcat AS tc,
	   itemsite AS si, costcat AS sc
      WHERE ( (ti.itemsite_costcat_id=tc.costcat_id)
        AND  (si.itemsite_costcat_id=sc.costcat_id)
        AND  (ti.itemsite_item_id=_ti.toitem_item_id)
        AND  (si.itemsite_item_id=_ti.toitem_item_id)
        AND  (ti.itemsite_warehous_id=_to.tohead_trns_warehous_id)
        AND  (si.itemsite_warehous_id=_to.tohead_src_warehous_id) );

      --We do not need to distribute lot/serial info for transit, post trans and discard dist detail
      PERFORM postIntoTrialBalance(itemlocpost_glseq) FROM itemlocpost WHERE (itemlocpost_itemlocseries=_itemlocSeries);
      PERFORM postInvHist(_invhistid);
      DELETE FROM itemlocdist WHERE (itemlocdist_series=_itemlocSeries);
      DELETE FROM itemlocpost WHERE (itemlocpost_itemlocSeries=_itemlocSeries);

      IF (_result &lt; 0) THEN
	RETURN _result;
      END IF;

      -- record inventory history and qoh changes at transit warehouse but
      -- there is only one g/l account to touch
      SELECT postInvTrans(ti.itemsite_id, &#39;TR&#39;, _ti.qty, &#39;I/M&#39;,
			  _shiphead.shiphead_order_type, _to.tohead_number,
			  _to.tohead_number,
			  &#39;Ship from Src to Transit Warehouse&#39;,
			  tc.costcat_asset_accnt_id,
			  tc.costcat_asset_accnt_id,
			  _itemlocSeries, _timestamp, 
			  _ti.value) INTO _invhistid
      FROM itemsite AS ti, costcat AS tc
      WHERE ((ti.itemsite_costcat_id=tc.costcat_id)
        AND  (ti.itemsite_item_id=_ti.toitem_item_id)
        AND  (ti.itemsite_warehous_id=_to.tohead_trns_warehous_id));
      --We do not need to distribute lot/serial info for transit, post trans and discard dist detail
      PERFORM postIntoTrialBalance(itemlocpost_glseq) FROM itemlocpost WHERE (itemlocpost_itemlocseries=_itemlocSeries);
      PERFORM postInvHist(_invhistid);
      DELETE FROM itemlocdist WHERE (itemlocdist_series=_itemlocSeries);
      DELETE FROM itemlocpost WHERE (itemlocpost_itemlocSeries=_itemlocSeries);

      --See if there was a change in values during the transfer, if so record the variance
      SELECT (invhist_invqty * invhist_unitcost - _ti.value) INTO _variance
      FROM invhist
      WHERE (invhist_id=_invhistid);

      IF (_variance &gt; 0) THEN
        PERFORM insertGLTransaction( &#39;S/R&#39;, _shiphead.shiphead_order_type, _to.tohead_number, 
                                     &#39;Transfer Order - Transfer Variance&#39;,
                                     tc.costcat_invcost_accnt_id, tc.costcat_asset_accnt_id, _invhistid,
                                     _variance,
                                     CAST(_timestamp AS DATE) )
        FROM itemsite AS ti, costcat AS tc
        WHERE ( (ti.itemsite_costcat_id=tc.costcat_id)
        AND  (ti.itemsite_item_id=_ti.toitem_item_id)
        AND  (ti.itemsite_warehous_id=_to.tohead_trns_warehous_id) );
      END IF;

      IF (_result &lt; 0) THEN
	RETURN _result;
      END IF;

      UPDATE shipitem SET shipitem_shipdate=_timestamp, shipitem_shipped=TRUE
      WHERE ((shipitem_orderitem_id=_ti.toitem_id)
        AND  (shipitem_shiphead_id=pshipheadid));

      UPDATE toitem
      SET toitem_qty_shipped = (toitem_qty_shipped + _ti.qty)
      WHERE (toitem_id=_ti.toitem_id);
    END LOOP;
  END IF;

  UPDATE shiphead
  SET shiphead_shipped=TRUE, shiphead_shipdate=_gldate
  WHERE (shiphead_id=pshipheadid);

  RETURN _itemlocSeries;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.singlecharacteristicstostring-text-integer-text-text-integer">singlecharacteristicstostring( text, integer, text, text, integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTargetType ALIAS FOR $1;
  pTargetId ALIAS FOR $2;
  pValKeySep ALIAS FOR $3;
  pPairSep ALIAS FOR $4;
  pCharId ALIAS FOR $5;
  _string TEXT := &#39;&#39;;
  _extra BOOLEAN := false;
  _r RECORD;
BEGIN
  FOR _r IN SELECT char_name, charass_value
              FROM charass, char
             WHERE ((charass_char_id=char_id)
               AND  (charass_char_id=pCharId)
               AND  (charass_target_type=pTargetType)
               AND  (charass_target_id=pTargetId)) LOOP
    IF(_extra) THEN
      _string := _string || pPairSep;
    END IF;
    _extra := true;

    _string := _string || _r.char_name || pValKeySep || _r.charass_value;
  END LOOP;

  RETURN _string;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.singlelevelbom-integer-integer-integer-integer">singlelevelbom( integer, integer, integer, integer )</a>
		</h2>
<h3>Returns: SET OF bomdata</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pRevisionid ALIAS FOR $2;
  pExpiredDays ALIAS FOR $3;
  pFutureDays ALIAS FOR $4;
  _row bomdata%ROWTYPE;
  _bomworksetid INTEGER;
  _x RECORD;
  _check CHAR(1);
  _inactive BOOLEAN;

BEGIN

  _inactive := FALSE;

  IF (pRevisionid != -1) THEN
    --Is this a deactivated revision?
    SELECT rev_status INTO _check
    FROM rev
    WHERE ((rev_id=pRevisionid)
    AND (rev_status=&#39;I&#39;));
    IF (FOUND) THEN
      _inactive := TRUE;
    END IF;
  END IF;
 
  IF NOT (_inactive) THEN
    FOR _x IN
        SELECT bomitem_id, bomitem_seqnumber, bomitem_seqnumber AS f_bomitem_seqnumber,
               item_id, item_number, uom_name,
               item_descrip1, item_descrip2,
               (item_descrip1 || &#39; &#39; || item_descrip2) AS itemdescription,
               itemuomtouom(bomitem_item_id, bomitem_uom_id, NULL,
                            bomitem_qtyper) AS qtyper,
               bomitem_scrap, bomitem_createwo,
               CASE WHEN (bomitem_issuemethod=&#39;S&#39;) THEN &#39;Push&#39;
                 WHEN (bomitem_issuemethod=&#39;L&#39;) THEN &#39;Pull&#39;
                 WHEN (bomitem_issuemethod=&#39;M&#39;) THEN &#39;Mixed&#39;
                 ELSE &#39;Special&#39;
               END AS issuemethod,
               bomitem_effective, bomitem_expires,
               CASE WHEN (bomitem_expires &lt;= CURRENT_DATE) THEN TRUE
                 ELSE FALSE
               END AS expired,
               CASE WHEN (bomitem_effective &gt; CURRENT_DATE) THEN TRUE
                 ELSE FALSE
               END AS future,
               actcost(bomitem_item_id) AS actunitcost,
               stdcost(bomitem_item_id) AS stdunitcost,
               (itemuomtouom(bomitem_item_id, bomitem_uom_id, NULL, bomitem_qtyper * (1 + bomitem_scrap)) * actcost(bomitem_item_id)) AS actextendedcost,
               (itemuomtouom(bomitem_item_id, bomitem_uom_id, NULL, bomitem_qtyper * (1 + bomitem_scrap)) * stdcost(bomitem_item_id)) AS stdextendedcost,
               bomitem_char_id, bomitem_value, bomitem_notes, bomitem_ref 
       FROM bomitem(pItemid,pRevisionid), item, uom 
       WHERE ( (item_inv_uom_id=uom_id)
       AND (bomitem_item_id=item_id)
       AND (bomitem_expires &gt; (CURRENT_DATE - pExpiredDays))
       AND (bomitem_effective &lt;= (CURRENT_DATE + pFutureDays)) )
       UNION
       SELECT -1, -1, NULL, -1, costelem_type AS bomdata_item_number, &#39;&#39;,
              &#39;&#39;, &#39;&#39;,
              &#39;&#39;,
              NULL,
              NULL, NULL,
              NULL,
              NULL, NULL,
              false,false,
              currToBase(itemcost_curr_id, itemcost_actcost, CURRENT_DATE) AS actunitcost,
              itemcost_stdcost AS stdunitcost,
              currToBase(itemcost_curr_id, itemcost_actcost, CURRENT_DATE) AS actextendedcost,
              itemcost_stdcost AS stdextendedcost,
              NULL, NULL, NULL, NULL
       FROM itemcost, costelem 
       WHERE ( (itemcost_costelem_id=costelem_id)
       AND (NOT itemcost_lowlevel)
       AND (itemcost_item_id=pItemid) )
       ORDER BY bomitem_seqnumber, bomitem_effective, item_number
    LOOP
        _row.bomdata_bomitem_id := _x.bomitem_id;
        _row.bomdata_bomwork_seqnumber := _x.f_bomitem_seqnumber;
        _row.bomdata_item_id := _x.item_id;
        _row.bomdata_item_number := _x.item_number;
        _row.bomdata_uom_name := _x.uom_name;
        _row.bomdata_item_descrip1 := _x.item_descrip1;
        _row.bomdata_item_descrip2 := _x.item_descrip2;
        _row.bomdata_itemdescription := _x.itemdescription;
        _row.bomdata_qtyper := _x.qtyper;
        _row.bomdata_scrap := _x.bomitem_scrap;
        _row.bomdata_createchild := _x.bomitem_createwo;
        _row.bomdata_issuemethod := _x.issuemethod;
        _row.bomdata_effective := _x.bomitem_effective;
        _row.bomdata_expires := _x.bomitem_expires;
        _row.bomdata_expired := _x.expired;
        _row.bomdata_future := _x.future;
        _row.bomdata_actunitcost := _x.actunitcost;
        _row.bomdata_stdunitcost := _x.stdunitcost;
        _row.bomdata_actextendedcost := _x.actextendedcost;
        _row.bomdata_stdextendedcost := _x.stdextendedcost;
        _row.bomdata_char_id := _x.bomitem_char_id;
        _row.bomdata_value := _x.bomitem_value;
        _row.bomdata_notes := _x.bomitem_notes;
        _row.bomdata_ref := _x.bomitem_ref;
        RETURN NEXT _row;
    END LOOP;

   ELSE

-- Use historical snapshot for inactive revisions
    FOR _x IN
        SELECT bomitem_id, bomitem_seqnumber, bomitem_seqnumber AS f_bomitem_seqnumber,
               item_id, item_number, uom_name,
               item_descrip1, item_descrip2,
               (item_descrip1 || &#39; &#39; || item_descrip2) AS itemdescription,
               itemuomtouom(bomitem_item_id, bomitem_uom_id, NULL, bomitem_qtyper) AS qtyper,
               bomitem_scrap, bomitem_createwo,
               CASE WHEN (bomitem_issuemethod=&#39;S&#39;) THEN &#39;Push&#39;
                 WHEN (bomitem_issuemethod=&#39;L&#39;) THEN &#39;Pull&#39;
                 WHEN (bomitem_issuemethod=&#39;M&#39;) THEN &#39;Mixed&#39;
                 ELSE &#39;Special&#39;
               END AS issuemethod,
               bomitem_effective, bomitem_expires,
               CASE WHEN (bomitem_expires &lt;= CURRENT_DATE) THEN TRUE
                 ELSE FALSE
               END AS expired,
               CASE WHEN (bomitem_effective &gt; CURRENT_DATE) THEN TRUE
                 ELSE FALSE
               END AS future,
               actcost(bomitem_item_id) AS actunitcost,
               stdcost(bomitem_item_id) AS stdunitcost,
               (itemuomtouom(bomitem_item_id, bomitem_uom_id, NULL, bomitem_qtyper * (1 + bomitem_scrap)) * actcost(bomitem_item_id)) AS actextendedcost,
               (itemuomtouom(bomitem_item_id, bomitem_uom_id, NULL, bomitem_qtyper * (1 + bomitem_scrap)) * stdcost(bomitem_item_id)) AS stdextendedcost,
               bomitem_char_id, bomitem_value, bomitem_notes, bomitem_ref 
       FROM bomitem(pItemid,pRevisionid), item, uom 
       WHERE ( (item_inv_uom_id=uom_id)
       AND (bomitem_item_id=item_id)
       AND (bomitem_expires &gt; (CURRENT_DATE - pExpiredDays))
       AND (bomitem_effective &lt;= (CURRENT_DATE + pFutureDays)) )
       UNION
       SELECT -1, -1, NULL, -1, costelem_type AS bomdata_item_number, &#39;&#39;,
              &#39;&#39;, &#39;&#39;,
              &#39;&#39;,
              NULL,
              NULL, NULL,
              NULL,
              NULL, NULL,
              false,false,
              bomhist_actunitcost AS actunitcost,
              bomhist_stdunitcost AS stdunitcost,
              bomhist_actunitcost AS actextendedcost,
              bomhist_stdunitcost AS stdextendedcost,
              NULL, NULL, NULL, NULL
       FROM bomhist, costelem 
       WHERE ( (bomhist_item_id=costelem_id)
       AND (bomhist_item_type=&#39;E&#39;)
       AND (bomhist_rev_id=pRevisionid) )
       ORDER BY bomitem_seqnumber, bomitem_effective, item_number
    LOOP
        _row.bomdata_bomitem_id := _x.bomitem_id;
        _row.bomdata_bomwork_seqnumber := _x.f_bomitem_seqnumber;
        _row.bomdata_item_id := _x.item_id;
        _row.bomdata_item_number := _x.item_number;
        _row.bomdata_uom_name := _x.uom_name;
        _row.bomdata_item_descrip1 := _x.item_descrip1;
        _row.bomdata_item_descrip2 := _x.item_descrip2;
        _row.bomdata_itemdescription := _x.itemdescription;
        _row.bomdata_qtyper := _x.qtyper;
        _row.bomdata_scrap := _x.bomitem_scrap;
        _row.bomdata_createchild := _x.bomitem_createwo;
        _row.bomdata_issuemethod := _x.issuemethod;
        _row.bomdata_effective := _x.bomitem_effective;
        _row.bomdata_expires := _x.bomitem_expires;
        _row.bomdata_expired := _x.expired;
        _row.bomdata_future := _x.future;
        _row.bomdata_actunitcost := _x.actunitcost;
        _row.bomdata_stdunitcost := _x.stdunitcost;
        _row.bomdata_actextendedcost := _x.actextendedcost;
        _row.bomdata_stdextendedcost := _x.stdextendedcost;
        _row.bomdata_char_id := _x.bomitem_char_id;
        _row.bomdata_value := _x.bomitem_value;
        _row.bomdata_notes := _x.bomitem_notes;
        _row.bomdata_ref := _x.bomitem_ref;
        RETURN NEXT _row;
    END LOOP;
  END IF;

  RETURN;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.site">site(  )</a>
		</h2>
<h3>Returns: SET OF whsinfo</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _row whsinfo%ROWTYPE;
  _r RECORD;

BEGIN

  IF ( (fetchMetricBool(&#39;MultiWhs&#39;)) AND
       (SELECT (COUNT(usrpref_id)=1)
        FROM usrpref
        WHERE ((usrpref_name=&#39;selectedSites&#39;)
        AND (usrpref_value=&#39;t&#39;)
        AND (usrpref_username=current_user))) ) THEN

    FOR _r IN SELECT *
            FROM whsinfo,usrsite
            WHERE ((warehous_id=usrsite_warehous_id)
            AND (usrsite_username=current_user))
    LOOP
      _row.warehous_id:=_r.warehous_id;
      _row.warehous_code:=_r.warehous_code;
      _row.warehous_descrip:=_r.warehous_descrip;
      _row.warehous_fob:=_r.warehous_fob;
      _row.warehous_active:=_r.warehous_active;
      _row.warehous_counttag_prefix:=_r.warehous_counttag_prefix;
      _row.warehous_counttag_number:=_r.warehous_counttag_number;
      _row.warehous_bol_prefix:=_r.warehous_bol_prefix;
      _row.warehous_bol_number:=_r.warehous_bol_number;
      _row.warehous_shipping:=_r.warehous_shipping;
      _row.warehous_useslips:=_r.warehous_useslips;
      _row.warehous_usezones:=_r.warehous_usezones;
      _row.warehous_aislesize:=_r.warehous_aislesize;
      _row.warehous_racksize:=_r.warehous_racksize;
      _row.warehous_binsize:=_r.warehous_binsize;
      _row.warehous_binalpha:=_r.warehous_binalpha;
      _row.warehous_locationsize:=_r.warehous_locationsize;
      _row.warehous_locationalpha:=_r.warehous_locationalpha;
      _row.warehous_enforcearbl:=_r.warehous_enforcearbl;
      _row.warehous_default_accnt_id:=_r.warehous_default_accnt_id;
      _row.warehous_shipping_commission:=_r.warehous_shipping_commission;
      _row.warehous_cntct_id:=_r.warehous_cntct_id;
      _row.warehous_addr_id:=_r.warehous_addr_id;
      _row.warehous_taxauth_id:=_r.warehous_taxauth_id;
      _row.warehous_transit:=_r.warehous_transit;
      _row.warehous_shipform_id:=_r.warehous_shipform_id;
      _row.warehous_shipvia_id:=_r.warehous_shipvia_id;
      _row.warehous_shipcomments:=_r.warehous_shipcomments;
      _row.warehous_costcat_id:=_r.warehous_costcat_id;
      _row.warehous_sitetype_id:=_r.warehous_sitetype_id;
             
      RETURN NEXT _row;
    END LOOP;
  ELSE
    FOR _r IN SELECT *
            FROM whsinfo
    LOOP
      _row.warehous_id:=_r.warehous_id;
      _row.warehous_code:=_r.warehous_code;
      _row.warehous_descrip:=_r.warehous_descrip;
      _row.warehous_fob:=_r.warehous_fob;
      _row.warehous_active:=_r.warehous_active;
      _row.warehous_counttag_prefix:=_r.warehous_counttag_prefix;
      _row.warehous_counttag_number:=_r.warehous_counttag_number;
      _row.warehous_bol_prefix:=_r.warehous_bol_prefix;
      _row.warehous_bol_number:=_r.warehous_bol_number;
      _row.warehous_shipping:=_r.warehous_shipping;
      _row.warehous_useslips:=_r.warehous_useslips;
      _row.warehous_usezones:=_r.warehous_usezones;
      _row.warehous_aislesize:=_r.warehous_aislesize;
      _row.warehous_racksize:=_r.warehous_racksize;
      _row.warehous_binsize:=_r.warehous_binsize;
      _row.warehous_binalpha:=_r.warehous_binalpha;
      _row.warehous_locationsize:=_r.warehous_locationsize;
      _row.warehous_locationalpha:=_r.warehous_locationalpha;
      _row.warehous_enforcearbl:=_r.warehous_enforcearbl;
      _row.warehous_default_accnt_id:=_r.warehous_default_accnt_id;
      _row.warehous_shipping_commission:=_r.warehous_shipping_commission;
      _row.warehous_cntct_id:=_r.warehous_cntct_id;
      _row.warehous_addr_id:=_r.warehous_addr_id;
      _row.warehous_taxauth_id:=_r.warehous_taxauth_id;
      _row.warehous_transit:=_r.warehous_transit;
      _row.warehous_shipform_id:=_r.warehous_shipform_id;
      _row.warehous_shipvia_id:=_r.warehous_shipvia_id;
      _row.warehous_shipcomments:=_r.warehous_shipcomments;
      _row.warehous_costcat_id:=_r.warehous_costcat_id;
      _row.warehous_sitetype_id:=_r.warehous_sitetype_id;
             
      RETURN NEXT _row;
    END LOOP;
  END IF;
  
  RETURN;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.snoozemessage-integer">snoozemessage( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pMsgid ALIAS FOR $1;
  snooze INTERVAL := &#39;10 minutes&#39;;

BEGIN

  UPDATE msg
  SET msg_scheduled=(msg_scheduled + snooze)
  WHERE (msg_id=pMsgid);

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.spellamount-numeric">spellamount( numeric )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN spellAmount($1, baseCurrId());
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.spellamount-numeric-integer">spellamount( numeric, integer )</a>
		</h2>
<h3>Returns: text</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pN ALIAS FOR $1;
  pCurrId ALIAS FOR $2;
  _t text;
  _dollars text;
  _cents text;
  _l integer;
  _p integer;
  _words text;
  _word text;
  _hundreds char;
  _tens char;
  _ones char;
  _fractionalPartName text;
  _curr curr_symbol%ROWTYPE;
BEGIN

  _t := ltrim(to_char(pN, &#39;999999999990D99&#39;),&#39; &#39;);
  _dollars := split_part(_t, &#39;.&#39;, 1);
  _cents := split_part(_t, &#39;.&#39;, 2);

  _p := 0;
  _l := length(_dollars);

  _words := &#39;&#39;;
  WHILE (_p &lt; _l) LOOP
    IF((_l - _p - 2) &lt; 1) THEN
      _hundreds := &#39;0&#39;;
    ELSE
      _hundreds := substr(_dollars, _l - _p - 2, 1);
    END IF;
    IF((_l - _p - 1) &lt; 1) THEN
      _tens := &#39;0&#39;;
    ELSE
      _tens := substr(_dollars, _l - _p - 1, 1);
    END IF;
    IF((_l - _p) &lt; 1) THEN
      _ones := &#39;0&#39;;
    ELSE
      _ones := substr(_dollars, _l - _p, 1);
    END IF;

    IF(_hundreds != &#39;0&#39; OR _tens != &#39;0&#39; OR _ones != &#39;0&#39;) THEN
      IF (_p = 3) THEN
        _words := &#39;thousand &#39; || _words;
      ELSIF (_p = 6) THEN
        _words := &#39;million &#39; || _words;
      ELSIF (_p = 9) THEN
        _words := &#39;billion &#39; || _words;
      END IF;

      _word := &#39;&#39;;
      IF(_tens = &#39;1&#39;) THEN
        IF(_ones = &#39;0&#39;) THEN
          _word := &#39;ten&#39;;
        ELSIF(_ones = &#39;1&#39;) THEN
          _word := &#39;eleven&#39;;
        ELSIF(_ones = &#39;2&#39;) THEN
          _word := &#39;twelve&#39;;
        ELSIF(_ones = &#39;3&#39;) THEN
          _word := &#39;thirteen&#39;;
        ELSIF(_ones = &#39;4&#39;) THEN
          _word := &#39;fourteen&#39;;
        ELSIF(_ones = &#39;5&#39;) THEN
          _word := &#39;fifteen&#39;;
        ELSIF(_ones = &#39;6&#39;) THEN
          _word := &#39;sixteen&#39;;
        ELSIF(_ones = &#39;7&#39;) THEN
          _word := &#39;seventeen&#39;;
        ELSIF(_ones = &#39;8&#39;) THEN
          _word := &#39;eighteen&#39;;
        ELSIF(_ones = &#39;9&#39;) THEN
          _word := &#39;nineteen&#39;;
        ELSE
          _word := &#39;ERROR&#39;;
        END IF;
      ELSE
        IF(_ones = &#39;1&#39;) THEN
          _word := &#39;one&#39;;
        ELSIF(_ones = &#39;2&#39;) THEN
          _word := &#39;two&#39;;
        ELSIF(_ones = &#39;3&#39;) THEN
          _word := &#39;three&#39;;
        ELSIF(_ones = &#39;4&#39;) THEN
          _word := &#39;four&#39;;
        ELSIF(_ones = &#39;5&#39;) THEN
          _word := &#39;five&#39;;
        ELSIF(_ones = &#39;6&#39;) THEN
          _word := &#39;six&#39;;
        ELSIF(_ones = &#39;7&#39;) THEN
          _word := &#39;seven&#39;;
        ELSIF(_ones = &#39;8&#39;) THEN
          _word := &#39;eight&#39;;
        ELSIF(_ones = &#39;9&#39;) THEN
          _word := &#39;nine&#39;;
        ELSIF(_ones != &#39;0&#39;) THEN
          _word := &#39;ERROR&#39;;
        END IF;

        if(_tens != &#39;0&#39;) THEN
          _word := &#39;-&#39; || _word;
        END IF;

        IF(_tens = &#39;2&#39;) THEN
          _word := &#39;twenty&#39; || _word;
        ELSIF(_tens = &#39;3&#39;) THEN
          _word := &#39;thirty&#39; || _word;
        ELSIF(_tens = &#39;4&#39;) THEN
          _word := &#39;forty&#39; || _word;
        ELSIF(_tens = &#39;5&#39;) THEN
          _word := &#39;fifty&#39; || _word;
        ELSIF(_tens = &#39;6&#39;) THEN
          _word := &#39;sixty&#39; || _word;
        ELSIF(_tens = &#39;7&#39;) THEN
          _word := &#39;seventy&#39; || _word;
        ELSIF(_tens = &#39;8&#39;) THEN
          _word := &#39;eighty&#39; || _word;
        ELSIF(_tens = &#39;9&#39;) THEN
          _word := &#39;ninety&#39; || _word;
        ELSIF(_tens != &#39;0&#39; AND _tens != &#39;1&#39;) THEN
          _word := &#39;ERROR&#39; || _word;
        END IF;
      END IF;
      if(_word != &#39;&#39;) THEN
        _words := _word || &#39; &#39; || _words;
      END IF;

      _word := &#39;&#39;;
      IF(_hundreds = &#39;1&#39;) THEN
        _word := &#39;one hundred&#39;;
      ELSIF(_hundreds = &#39;2&#39;) THEN
        _word := &#39;two hundred&#39;;
      ELSIF(_hundreds = &#39;3&#39;) THEN
        _word := &#39;three hundred&#39;;
      ELSIF(_hundreds = &#39;4&#39;) THEN
        _word := &#39;four hundred&#39;;
      ELSIF(_hundreds = &#39;5&#39;) THEN
        _word := &#39;five hundred&#39;;
      ELSIF(_hundreds = &#39;6&#39;) THEN
        _word := &#39;six hundred&#39;;
      ELSIF(_hundreds = &#39;7&#39;) THEN
        _word := &#39;seven hundred&#39;;
      ELSIF(_hundreds = &#39;8&#39;) THEN
        _word := &#39;eight hundred&#39;;
      ELSIF(_hundreds = &#39;9&#39;) THEN
        _word := &#39;nine hundred&#39;;
      ELSIF(_hundreds != &#39;0&#39;) THEN
        _words := &#39;ERROR&#39;;
      END IF;
      if(_word != &#39;&#39;) THEN
        _words := _word || &#39; &#39; || _words;
      END IF;
    END IF;

    _p := _p + 3;
  END LOOP;

  _words := rtrim(_words, &#39; &#39;);
  IF(_words = &#39;&#39;) THEN
    _words := &#39;zero&#39;;
  END IF;

  SELECT * INTO _curr
    FROM curr_symbol
    WHERE curr_id = pCurrId;

  IF(_words = &#39;one&#39;) AND TRIM(_curr.curr_name) ~ &#39;.*s&#39; THEN
    _word := rtrim(_curr.curr_name, &#39; s&#39;);
  ELSE
    _word := trim(_curr.curr_name);
  END IF;

  IF _curr.curr_abbr = &#39;USD&#39; OR _curr.curr_abbr = &#39;CAD&#39; THEN
      IF (_cents = &#39;1&#39;) THEN
        _fractionalPartName = &#39; cent&#39;;
      ELSE
        _fractionalPartName = &#39; cents&#39;;
      END IF;
  ELSE
    _fractionalPartName = &#39; / 100 &#39;;
  END IF;

  RETURN _words || &#39; &#39; || _word || &#39; and &#39; || _cents || _fractionalPartName;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.splitreceipt-integer-numeric-numeric">splitreceipt( integer, numeric, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  precvid	ALIAS FOR $1;
  pqty   	ALIAS FOR $2;
  pfreight	ALIAS FOR $3;
  _check       	RECORD;
  _seq      	INTEGER;

BEGIN
  -- validate
  IF (COALESCE(pQty,0) &lt;= 0) THEN
    RETURN -7;
  END IF;
  
  SELECT * INTO _check
  FROM recv
  WHERE (recv_id=precvid);

  IF (FOUND) THEN
    IF (_check.recv_order_type != &#39;PO&#39;) THEN
      RETURN -1;
    ELSIF ( NOT _check.recv_posted) THEN
      RETURN -2;
    ELSIF ( (_check.recv_invoiced)
         OR (_check.recv_vohead_id IS NOT NULL)
         OR (_check.recv_voitem_id IS NOT NULL) ) THEN
      RETURN -3;
    ELSIF (pqty &gt;= _check.recv_qty) THEN
      RETURN -4;
    ELSIF (COALESCE(pfreight,0) &gt; _check.recv_freight) THEN
      RETURN -5;
    END IF;
  ELSE
    RETURN -6;
  END IF;

  -- Create new receipt record
  _seq := nextval(&#39;recv_recv_id_seq&#39;);
  
  INSERT INTO recv
  SELECT _seq, recv_order_type,recv_order_number,
         recv_orderitem_id, recv_agent_username, recv_itemsite_id, recv_vend_id,
         recv_vend_item_number, recv_vend_item_descrip, recv_vend_uom,
         recv_purchcost, recv_purchcost_curr_id, recv_duedate, pqty, 
         recv_recvcost, recv_recvcost_curr_id, COALESCE(pfreight,0), recv_freight_curr_id, recv_date, 
         ROUND(recv_value/recv_qty * pqty, 2), TRUE, FALSE, NULL, NULL,
         recv_trans_usr_name, recv_notes, recv_gldistdate, precvid
  FROM recv
  WHERE (recv_id=precvid);

  --  Update qty and value of old record
  UPDATE recv SET
    recv_qty = recv_qty-pqty,
    recv_value = recv_value - ROUND(recv_value/recv_qty * pqty, 2),
    recv_freight = recv_freight - COALESCE(pfreight,0)
  WHERE (recv_id=precvid);

  RETURN _seq;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.startoftime">startoftime(  )</a>
		</h2>
<h3>Returns: date</h3>
<h3>Language: SQL</h3>
        
        <pre>
SELECT DATE(&#39;1970-01-01&#39;) AS return;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.stdcost-integer">stdcost( integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  _cost NUMERIC;

BEGIN

  SELECT SUM(itemcost_stdcost) INTO _cost
  FROM itemcost
  WHERE (itemcost_item_id=pItemid);

  IF (_cost IS NULL) THEN
    RETURN 0;
  ELSE
    RETURN _cost;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.sufficientinventorytoshipitem-text-integer">sufficientinventorytoshipitem( text, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pordertype    ALIAS FOR $1;
  porderitemid  ALIAS FOR $2;

BEGIN
  RETURN sufficientInventoryToShipItem(pordertype, porderitemid, NULL);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.sufficientinventorytoshipitem-text-integer-numeric">sufficientinventorytoshipitem( text, integer, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pordertype		ALIAS FOR $1;
  porderitemid		ALIAS FOR $2;
  pqty                  ALIAS FOR $3;
  _returnVal		INTEGER;
  _isqtyavail		BOOLEAN;

BEGIN
  IF (porderitemid IS NULL) THEN
    RETURN -1;
  END IF;

  IF (pordertype = &#39;SO&#39;) THEN
    IF ( SELECT fetchMetricBool(&#39;EnableSOReservations&#39;) ) THEN
      SELECT (((COALESCE(pqty, roundQty(item_fractional,
		      noNeg(coitem_qtyord - coitem_qtyshipped +
			    coitem_qtyreturned - qtyAtShipping(pordertype, coitem_id)
			   ))) - coitem_qtyreserved) * coitem_qty_invuomratio
		      ) &lt;= itemsite_qtyonhand)
              AND 
             (((COALESCE(pqty, roundQty(item_fractional,
		      noNeg(coitem_qtyord - coitem_qtyshipped +
			    coitem_qtyreturned - qtyAtShipping(pordertype, coitem_id)
			   ))) - coitem_qtyreserved) * coitem_qty_invuomratio
		      ) &lt;= qtyunreserved(itemsite_id))
        INTO _isqtyavail
        FROM coitem, itemsite, item
       WHERE ((coitem_itemsite_id=itemsite_id) 
         AND (coitem_status &lt;&gt; &#39;X&#39;)
         AND  (NOT ((item_type IN (&#39;R&#39;,&#39;J&#39;)) OR (itemsite_controlmethod = &#39;N&#39;))) 
         AND (itemsite_item_id=item_id) 
         AND (coitem_id=porderitemid));
    ELSE
      SELECT (COALESCE(pqty, roundQty(item_fractional,
		                      noNeg(coitem_qtyord - coitem_qtyshipped +
			              coitem_qtyreturned - qtyAtShipping(pordertype, coitem_id) - coitem_qtyreserved
			              ) * coitem_qty_invuomratio
		      )
              ) &lt;= itemsite_qtyonhand)
        INTO _isqtyavail
        FROM coitem, itemsite, item
       WHERE ((coitem_itemsite_id=itemsite_id) 
         AND (coitem_status &lt;&gt; &#39;X&#39;)
         AND  (NOT ((item_type IN (&#39;R&#39;,&#39;J&#39;)) OR (itemsite_controlmethod = &#39;N&#39;))) 
         AND (itemsite_item_id=item_id) 
         AND (coitem_id=porderitemid));
    END IF;
  ELSEIF (pordertype = &#39;TO&#39;) THEN
    SELECT (COALESCE(pqty, roundQty(item_fractional,
		                    noNeg(toitem_qty_ordered - toitem_qty_shipped - 
			            qtyAtShipping(pordertype, toitem_id)
		                    )
		    )
           ) &lt;= itemsite_qtyonhand) INTO _isqtyavail  
      FROM toitem, tohead, itemsite, item
     WHERE ((toitem_tohead_id=tohead_id)
       AND  (tohead_src_warehous_id=itemsite_warehous_id) 
       AND  (toitem_item_id=itemsite_item_id) 
       AND  (itemsite_warehous_id=tohead_src_warehous_id) 
       AND  (itemsite_item_id=item_id) 
       AND  (toitem_status &lt;&gt; &#39;X&#39;)
         AND  (NOT ((item_type IN (&#39;R&#39;,&#39;J&#39;)) OR (itemsite_controlmethod = &#39;N&#39;))) 
       AND  (toitem_id=porderitemid));
  ELSE
    RETURN -11;
  END IF;

  IF (NOT _isqtyavail) THEN
    RETURN -2;
  END IF;

  IF (pordertype = &#39;SO&#39;) THEN
    SELECT (COALESCE((SELECT SUM(itemloc_qty) 
			FROM itemloc 
		       WHERE (itemloc_itemsite_id=itemsite_id)), 0.0) &gt;= roundQty(item_fractional, 
			      COALESCE(pQty, noNeg( coitem_qtyord - coitem_qtyshipped + coitem_qtyreturned - 
			      qtyAtShipping(pordertype, coitem_id) )) * coitem_qty_invuomratio
			     )) INTO _isqtyavail 
      FROM coitem, itemsite, item
     WHERE ((coitem_itemsite_id=itemsite_id) 
       AND (itemsite_item_id=item_id) 
       AND (NOT ((item_type IN (&#39;J&#39;,&#39;R&#39;)) OR (itemsite_controlmethod = &#39;N&#39;))) 
       AND ((itemsite_controlmethod IN (&#39;L&#39;, &#39;S&#39;)) OR (itemsite_loccntrl)) 
       AND (coitem_id=porderitemid)); 

  ELSEIF (pordertype = &#39;TO&#39;) THEN
    SELECT (COALESCE((SELECT SUM(itemloc_qty) 
			FROM itemloc 
		       WHERE (itemloc_itemsite_id=itemsite_id)), 0.0) &gt;= roundQty(item_fractional, 
			      noNeg( toitem_qty_ordered - toitem_qty_shipped - 
			      qtyAtShipping(pordertype, toitem_id) )
			     )) INTO _isqtyavail 
      FROM toitem, tohead, itemsite, item
     WHERE ((toitem_tohead_id=tohead_id)
       AND  (tohead_src_warehous_id=itemsite_warehous_id) 
       AND  (toitem_item_id=itemsite_item_id) 
       AND  (itemsite_item_id=item_id) 
       AND  (toitem_status &lt;&gt; &#39;X&#39;)
       AND  (NOT ((item_type IN (&#39;R&#39;,&#39;J&#39;)) OR (itemsite_controlmethod = &#39;N&#39;))) 
       AND  ((itemsite_controlmethod IN (&#39;L&#39;, &#39;S&#39;)) OR (itemsite_loccntrl)) 
       AND  (toitem_id=porderitemid)); 
  END IF;
  
  IF (NOT _isqtyavail) THEN
    RETURN -3;
  END IF;

  RETURN 0;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.sufficientinventorytoshiporder-text-integer">sufficientinventorytoshiporder( text, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pordertype	ALIAS FOR $1;
  porderid	ALIAS FOR $2;
  _s		RECORD;
  _returnVal	INTEGER := 0;

BEGIN
  IF (pordertype = &#39;SO&#39;) THEN
    FOR _s IN SELECT coitem_id
	        FROM coitem
	       WHERE(coitem_cohead_id=porderid) LOOP
      _returnVal := sufficientInventoryToShipItem(pordertype, _s.coitem_id);
      EXIT WHEN (_returnVal &lt; 0);
    END LOOP;
  ELSEIF (pordertype = &#39;TO&#39;) THEN
    FOR _s IN SELECT toitem_id
	        FROM toitem
	       WHERE(toitem_tohead_id=porderid) LOOP
      _returnVal := sufficientInventoryToShipItem(pordertype, _s.toitem_id);
      EXIT WHEN (_returnVal &lt; 0);
    END LOOP;
  END IF;

  RETURN _returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.summarizedbom-integer">summarizedbom( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  _revid INTEGER;

BEGIN

  SELECT getActiveRevId(&#39;BOM&#39;,pItemid) INTO _revid;
  
  RETURN summarizedBOM(pItemid, _revid);

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.summarizedbom-integer-integer">summarizedbom( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pRevisionid ALIAS FOR $2;
  _bomworkid INTEGER;
  _indexid INTEGER;
  _r RECORD;

BEGIN

--  Check on the temporary workspace
--  PERFORM maintainBOMWorkspace();

--  Grab a new index for this bomwork set
  SELECT NEXTVAL(&#39;misc_index_seq&#39;) INTO _indexid;

--  Step through all of the components of the passed pItemid
  FOR _r IN SELECT bomitem_seqnumber,
                   item_id, item_type, bomitem_createwo,
                   itemuomtouom(bomitem_item_id, bomitem_uom_id, NULL,
                                bomitem_qtyper) AS qtyper,
                   bomitem_scrap, bomitem_issuemethod,
                   bomitem_effective, bomitem_expires,
                   stdcost(item_id) AS standardcost,
                   actcost(item_id) AS actualcost
  FROM bomitem(pItemid, pRevisionid), item
  WHERE (bomitem_item_id=item_id) LOOP

  IF (_r.item_type IN (&#39;M&#39;, &#39;F&#39;)) THEN
--  Explode the components of the current component
--      RAISE NOTICE &#39;Summarized BOM at Mfg/Phantom %&#39;, _r.item_id;
      PERFORM explodeSummarizedBOM( _r.item_id, -1, 1, _indexid, _r.bomitem_seqnumber,
                                    _r.qtyper, _r.bomitem_effective, _r.bomitem_expires );
  ELSE
--  Insert the component and bomitem parameters
--    RAISE NOTICE &#39;Summarized Explosion at Insert Item %&#39;, _r.item_id;
    SELECT NEXTVAL(&#39;bomwork_bomwork_id_seq&#39;) INTO _bomworkid;
    INSERT INTO bomwork
    ( bomwork_id, bomwork_set_id, bomwork_parent_id, bomwork_level,
      bomwork_parent_seqnumber, bomwork_seqnumber,
      bomwork_item_id, bomwork_createwo,
      bomwork_qtyper, bomwork_scrap, bomwork_issuemethod,
      bomwork_effective, bomwork_expires,
      bomwork_stdunitcost, bomwork_actunitcost )
    VALUES
    ( _bomworkid, _indexid, -1, 1,
      0, _r.bomitem_seqnumber,
      _r.item_id, _r.bomitem_createwo,
      _r.qtyper, _r.bomitem_scrap, _r.bomitem_issuemethod,
      _r.bomitem_effective, _r.bomitem_expires,
      _r.standardcost, _r.actualcost );
    END IF;

  END LOOP;

--  Return a key to the result
  RETURN _indexid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.summarizedbom-integer-integer-integer">summarizedbom( integer, integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pExpired ALIAS FOR $2;
  pFuture ALIAS FOR $3;
  _bomworkid INTEGER;
  _indexid INTEGER;
  _r RECORD;
BEGIN

--  Check on the temporary workspace
--  PERFORM maintainBOMWorkspace();

--  Grab a new index for this bomwork set
  SELECT NEXTVAL(&#39;misc_index_seq&#39;) INTO _indexid;

--  Step through all of the components of the passed pItemid
  FOR _r IN SELECT bomitem_seqnumber,
                   item_id, item_type, bomitem_createwo,
                   itemuomtouom(bomitem_item_id, bomitem_uom_id, NULL,
                                bomitem_qtyper) AS qtyper,
                   bomitem_scrap, bomitem_issuemethod,
                   bomitem_effective, bomitem_expires,
                   stdcost(item_id) AS standardcost,
                   actcost(item_id) AS actualcost
  FROM bomitem(pItemid), item
  WHERE ( (bomitem_item_id=item_id)
   AND (bomitem_expires &gt; (CURRENT_DATE - pExpired) )
   AND (bomitem_effective &lt;= (CURRENT_DATE + pFuture) ) ) LOOP

  IF (_r.item_type IN (&#39;M&#39;, &#39;F&#39;)) THEN
--  Explode the components of the current component
--      RAISE NOTICE &#39;Summarized BOM at Mfg/Phantom %&#39;, _r.item_id;
      PERFORM explodeSummarizedBOM( _r.item_id, -1, 1, _indexid, _r.bomitem_seqnumber,
                                    _r.qtyper, _r.bomitem_effective, _r.bomitem_expires );
  ELSE
--  Insert the component and bomitem parameters
--    RAISE NOTICE &#39;Summarized Explosion at Insert Item %&#39;, _r.item_id;
    SELECT NEXTVAL(&#39;bomwork_bomwork_id_seq&#39;) INTO _bomworkid;
    INSERT INTO bomwork
    ( bomwork_id, bomwork_set_id, bomwork_parent_id, bomwork_level,
      bomwork_parent_seqnumber, bomwork_seqnumber,
      bomwork_item_id, bomwork_createwo,
      bomwork_qtyper, bomwork_scrap, bomwork_issuemethod,
      bomwork_effective, bomwork_expires,
      bomwork_stdunitcost, bomwork_actunitcost )
    VALUES
    ( _bomworkid, _indexid, -1, 1,
      0, _r.bomitem_seqnumber,
      _r.item_id, _r.bomitem_createwo,
      _r.qtyper, _r.bomitem_scrap, _r.bomitem_issuemethod,
      _r.bomitem_effective, _r.bomitem_expires,
      _r.standardcost, _r.actualcost );
    END IF;

  END LOOP;

--  Return a key to the result
  RETURN _indexid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.summarizedbom-integer-integer-integer-integer">summarizedbom( integer, integer, integer, integer )</a>
		</h2>
<h3>Returns: SET OF bomdata</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pRevisionid ALIAS FOR $2;
  pExpiredDays  INTEGER := COALESCE($3, 0);
  pFutureDays   INTEGER := COALESCE($4, 0);
  _row bomdata%ROWTYPE;
  _bomworksetid INTEGER;
  _x RECORD;
  _check CHAR(1);
  _inactive BOOLEAN;

BEGIN
  _inactive := FALSE;

  IF (pRevisionid != -1) THEN
    --Is this a deactivated revision?
    SELECT rev_status INTO _check
    FROM rev
    WHERE ((rev_id=pRevisionid)
    AND (rev_status=&#39;I&#39;));
    IF (FOUND) THEN
      _inactive := TRUE;
    END IF;
  END IF;
 
  IF NOT (_inactive) THEN

    --We can explode this out based on current data
    SELECT indentedBOM(pItemid, pRevisionid) INTO _bomworksetid;  

    FOR _x IN
       SELECT item_number, uom_name,
               item_descrip1, item_descrip2,
               (item_descrip1 || &#39; &#39; || item_descrip2) AS itemdescription,
               SUM(bomwork_qtyper * (1 + bomwork_scrap)) AS qtyper,
       MAX(bomwork_actunitcost) AS actunitcost,
       MAX(bomwork_stdunitcost) AS stdunitcost,
       SUM(bomwork_actunitcost * bomwork_qtyper * (1 + bomwork_scrap)) AS actextendedcost,
       SUM(bomwork_stdunitcost * bomwork_qtyper * (1 + bomwork_scrap)) AS stdextendedcost,
       bomwork_effective,
       bomwork_expires,
       bomwork_effective &gt; CURRENT_DATE AS future,
       bomwork_expires  &lt;= CURRENT_DATE AS expired
       FROM bomwork, item, uom 
       WHERE ( (bomwork_item_id=item_id)
       AND (item_inv_uom_id=uom_id)
       AND (bomwork_set_id=_bomworksetid) )
       AND (bomwork_expires &gt; (CURRENT_DATE - pExpiredDays))
       AND (bomwork_effective &lt;= (CURRENT_DATE + pFutureDays))
       GROUP BY item_number, uom_name,
                item_descrip1, item_descrip2,
                bomwork_effective, bomwork_expires
       ORDER BY item_number
    LOOP
        _row.bomdata_item_number := _x.item_number;
        _row.bomdata_uom_name := _x.uom_name;
        _row.bomdata_item_descrip1 := _x.item_descrip1;
        _row.bomdata_item_descrip2 := _x.item_descrip2;
        _row.bomdata_itemdescription := _x.itemdescription;
        _row.bomdata_qtyper := _x.qtyper;
        _row.bomdata_actunitcost := _x.actunitcost;
        _row.bomdata_stdunitcost := _x.stdunitcost;
        _row.bomdata_actextendedcost := _x.actextendedcost;
        _row.bomdata_stdextendedcost := _x.stdextendedcost;
        _row.bomdata_effective := _x.bomwork_effective;
        _row.bomdata_expires := _x.bomwork_expires;
        _row.bomdata_future := _x.future;
        _row.bomdata_expired := _x.expired;
        RETURN NEXT _row;
    END LOOP;
    
    PERFORM deleteBOMWorkset(_bomworksetid);

  ELSE
   
-- Use historical snapshot for inactive revisions
    FOR _x IN
       SELECT item_number, uom_name,
               item_descrip1, item_descrip2,
               (item_descrip1 || &#39; &#39; || item_descrip2) AS itemdescription,
               SUM(bomhist_qtyper * (1 + bomhist_scrap)) AS qtyper,
       MAX(bomhist_actunitcost) AS actunitcost,
       MAX(bomhist_stdunitcost) AS stdunitcost,
       MAX(bomhist_actunitcost) * SUM(bomhist_qtyper * (1 + bomhist_scrap)) AS actextendedcost,
       MAX(bomhist_stdunitcost) * SUM(bomhist_qtyper * (1 + bomhist_scrap)) AS stdextendedcost
       FROM bomhist, item, uom 
       WHERE ( (bomhist_item_id=item_id)
       AND (item_inv_uom_id=uom_id)
       AND (bomhist_rev_id=pRevisionid) )
       AND (bomhist_expires &gt; (CURRENT_DATE - pExpiredDays))
       AND (bomhist_effective &lt;= (CURRENT_DATE + pFutureDays))
       GROUP BY item_number, uom_name,
                item_descrip1, item_descrip2
       ORDER BY item_number
    LOOP
        _row.bomdata_item_number := _x.item_number;
        _row.bomdata_uom_name := _x.uom_name;
        _row.bomdata_item_descrip1 := _x.item_descrip1;
        _row.bomdata_item_descrip2 := _x.item_descrip2;
        _row.bomdata_itemdescription := _x.itemdescription;
        _row.bomdata_qtyper := _x.qtyper;
        _row.bomdata_actunitcost := _x.actunitcost;
        _row.bomdata_stdunitcost := _x.stdunitcost;
        _row.bomdata_actextendedcost := _x.actextendedcost;
        _row.bomdata_stdextendedcost := _x.stdextendedcost;
        RETURN NEXT _row;
    END LOOP;

  END IF;

  RETURN;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.summarizetransactions-integer-date-date">summarizetransactions( integer, date, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pStartDate ALIAS FOR $2;
  pEndDate ALIAS FOR $3;
  _startDate DATE;
  _endDate DATE;
  _invhist RECORD;
  _itemuom TEXT;
  _transCounter INTEGER;

BEGIN

--  Cache the uom_name
  SELECT uom_name INTO _itemuom
  FROM itemsite, item, uom
  WHERE ((itemsite_item_id=item_id)
    AND (item_inv_uom_id=uom_id)
    AND (itemsite_id=pItemsiteid));

--  Can&#39;t summarize into the future...
  IF (pEndDate &gt; CURRENT_DATE) THEN
    _endDate := CURRENT_DATE;
  ELSE
    _endDate := pEndDate;
  END IF;

--  Verify date bounds
  IF (pStartDate &gt; pEndDate) THEN
    _startDate := pEndDate;
  ELSE
    _startDate := pStartDate;
  END IF;

--  Verify that history is not referenced elsewhere
  SELECT invhist_id INTO _transCounter
  FROM invhist JOIN womatlpost ON (womatlpost_invhist_id=invhist_id)
  WHERE ((invhist_itemsite_id=pItemsiteid)
    AND (invhist_transdate::DATE BETWEEN _startDate AND _endDate))
  LIMIT 1;
  IF (FOUND) THEN
    RETURN 0;
  END IF;

  SELECT invhist_id INTO _transCounter
  FROM invhist JOIN shipitem ON (shipitem_invhist_id=invhist_id)
  WHERE ((invhist_itemsite_id=pItemsiteid)
    AND (invhist_transdate::DATE BETWEEN _startDate AND _endDate))
  LIMIT 1;
  IF (FOUND) THEN
    RETURN 0;
  END IF;

  _transCounter := 0;

  FOR _invhist IN SELECT invhist_transtype, invhist_costmethod, SUM(invhist_invqty) AS qty
                  FROM invhist
                  WHERE ((invhist_itemsite_id=pItemsiteid)
                   AND (invhist_transdate::DATE BETWEEN _startDate AND _endDate))
                  GROUP BY invhist_transtype, invhist_costmethod LOOP

    DELETE FROM invhist
    WHERE ((invhist_transdate::DATE BETWEEN _startDate AND _endDate)
     AND (invhist_transtype=_invhist.invhist_transtype)
     AND (invhist_itemsite_id=pItemsiteid));

    INSERT INTO invhist
    ( invhist_itemsite_id, invhist_transdate, invhist_transtype,
      invhist_invqty, invhist_qoh_before, invhist_qoh_after,
      invhist_invuom, invhist_user, invhist_ordnumber,
      invhist_costmethod, invhist_value_before, invhist_value_after )
    VALUES
    ( pItemsiteid, _endDate, _invhist.invhist_transtype,
      _invhist.qty, 0, 0,
      _itemuom, CURRENT_USER, &#39;Summary&#39;,
      _invhist.invhist_costmethod, 0, 0 );

    _transCounter := (_transCounter + 1);

  END LOOP;

  RETURN _transCounter;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.summdemand-integer-date-date">summdemand( integer, date, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pStartDate ALIAS FOR $2;
  pEndDate ALIAS FOR $3;
  _value NUMERIC;

BEGIN

  SELECT SUM(wo_qtyord - wo_qtyrcv) INTO _value
  FROM wo
  WHERE ( (wo_itemsite_id=pItemsiteid)
   AND (wo_status IN (&#39;R&#39;, &#39;I&#39;))
   AND (wo_startdate::DATE BETWEEN pStartDate AND pEndDate) );

  IF (_value IS NULL) THEN
    _value := 0;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.summdemand-integer-integer">summdemand( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pCalitemid ALIAS FOR $2;
  _value NUMERIC;

BEGIN

  SELECT summDemand(pItemsiteid, findPeriodStart(pCalitemid), findPeriodEnd(pCalitemid)) INTO _value;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.summprod-integer-date-date">summprod( integer, date, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pStartDate ALIAS FOR $2;
  pEndDate ALIAS FOR $3;
  _value NUMERIC;

BEGIN

  SELECT SUM(invhist_invqty) INTO _value
  FROM invhist
  WHERE ( (invhist_itemsite_id=pItemsiteid)
   AND (invhist_transtype IN (&#39;RM&#39;, &#39;RB&#39;))
   AND (invhist_transdate::DATE BETWEEN pStartDate AND pEndDate) );

  IF (_value IS NULL) THEN
    _value := 0;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.summprod-integer-integer">summprod( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pCalitemid ALIAS FOR $2;
  _value NUMERIC;

BEGIN

  SELECT summProd(pItemsiteid, findPeriodStart(pCalitemid), findPeriodEnd(pCalitemid)) INTO _value;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.summtransa-integer-date-date">summtransa( integer, date, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pStartDate ALIAS FOR $2;
  pEndDate ALIAS FOR $3;
  _value NUMERIC;

BEGIN

  SELECT SUM(invhist_invqty) INTO _value
  FROM invhist
  WHERE ((invhist_transdate::DATE BETWEEN pStartDate AND pEndDate)
   AND (invhist_transtype IN (&#39;AD&#39;, &#39;CC&#39;))
   AND (invhist_itemsite_id=pItemsiteid));

  IF (_value IS NULL) THEN
    _value := 0;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.summtransa-integer-integer">summtransa( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pCalitemid ALIAS FOR $2;
  _value NUMERIC;

BEGIN

  SELECT summTransA(pItemsiteid, findPeriodStart(pCalitemid), findPeriodEnd(pCalitemid)) INTO _value;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.summtransc-integer-date-date">summtransc( integer, date, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pStartDate ALIAS FOR $2;
  pEndDAte ALIAS FOR $3;
  _value NUMERIC;

BEGIN

  SELECT SUM(invhist_invqty) INTO _value
  FROM invhist
  WHERE ((invhist_transdate::DATE BETWEEN pStartDate AND pEndDate)
   AND (invhist_transtype IN (&#39;SI&#39;))
   AND (invhist_itemsite_id=pItemsiteid));

  IF (_value IS NULL) THEN
    _value := 0;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.summtransc-integer-integer">summtransc( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pCalitemid ALIAS FOR $2;
  _value NUMERIC;

BEGIN

  SELECT summTransC(pItemsiteid, findPeriodStart(pCalitemid), findPeriodEnd(pCalitemid)) INTO _value;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.summtransi-integer-date-date">summtransi( integer, date, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pStartDate ALIAS FOR $2;
  pEndDate ALIAS FOR $3;
  _value NUMERIC;

BEGIN

  SELECT SUM(invhist_invqty) INTO _value
  FROM invhist
  WHERE ((invhist_transdate::DATE BETWEEN pStartDate AND pEndDate)
   AND (invhist_transtype IN (&#39;IM&#39;, &#39;IC&#39;))
   AND (invhist_itemsite_id=pItemsiteid));

  IF (_value IS NULL) THEN
    _value := 0;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.summtransi-integer-integer">summtransi( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pCalitemid ALIAS FOR $2;
  _value NUMERIC;

BEGIN

  SELECT summTransI(pItemsiteid, findPeriodStart(pCalitemid), findPeriodEnd(pCalitemid)) INTO _value;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.summtransr-integer-date-date">summtransr( integer, date, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pStartDate ALIAS FOR $2;
  pEndDate ALIAS FOR $3;
  _value NUMERIC;

BEGIN

  SELECT SUM(invhist_invqty) INTO _value
  FROM invhist
  WHERE ((invhist_transdate::DATE BETWEEN pStartDate AND pEndDate)
   AND (invhist_transtype IN (&#39;RM&#39;, &#39;RP&#39;, &#39;RX&#39;))
   AND (invhist_itemsite_id=pItemsiteid) );

  IF (_value IS NULL) THEN
    _value := 0;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.summtransr-integer-integer">summtransr( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pCalitemid ALIAS FOR $2;
  _value NUMERIC;

BEGIN

  SELECT summTransR(pItemsiteid, findPeriodStart(pCalitemid), findPeriodEnd(pCalitemid)) INTO _value;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.summtranss-integer-date-date">summtranss( integer, date, date )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pStartDate ALIAS FOR $2;
  pEndDate ALIAS FOR $3;
  _value NUMERIC;

BEGIN

  SELECT SUM( CASE WHEN (invhist_transtype = &#39;RS&#39;) THEN (invhist_invqty * -1)
                   ELSE (invhist_invqty)
              END ) INTO _value
  FROM invhist
  WHERE ( (invhist_transdate::DATE BETWEEN pStartDate AND pEndDate)
   AND (invhist_transtype IN (&#39;SC&#39;, &#39;SH&#39;, &#39;SV&#39;, &#39;RS&#39;))
   AND (invhist_itemsite_id=pItemsiteid) );

  IF (_value IS NULL) THEN
    _value := 0;
  END IF;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.summtranss-integer-integer">summtranss( integer, integer )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pCalitemid ALIAS FOR $2;
  _value NUMERIC;

BEGIN

  SELECT summTransS(pItemsiteid, findPeriodStart(pCalitemid), findPeriodEnd(pCalitemid)) INTO _value;

  RETURN _value;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.thawaccountingperiod-integer">thawaccountingperiod( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pPeriodid ALIAS FOR $1;
  _r RECORD;

BEGIN

--  Check to make use that the period is frozen
  IF ( ( SELECT (NOT period_freeze)
         FROM period
         WHERE (period_id=pPeriodid) ) ) THEN
    RETURN -2;
  END IF;

--  Reset the period_freeze flag
  UPDATE period
  SET period_freeze=FALSE
  WHERE (period_id=pPeriodid);

--  Post any unposted G/L Transactions into the period
  FOR _r IN SELECT DISTINCT gltrans_sequence
            FROM gltrans, accnt, period
            WHERE ( (gltrans_accnt_id=accnt_id)
             AND (NOT gltrans_posted)
             AND (accnt_closedpost)
             AND (gltrans_date BETWEEN period_start AND period_end)
             AND (period_id=pPeriodid) ) LOOP
    PERFORM postIntoTrialBalance(_r.gltrans_sequence);
  END LOOP;

  RETURN pPeriodid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.thawitemsite-integer">thawitemsite( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  _qoh NUMERIC;
  _itemlocid INTEGER;
  _itemloc RECORD;
  _invhist RECORD;
  _coarse RECORD;
  _fine RECORD;

BEGIN

  IF ( SELECT itemsite_freeze
       FROM itemsite
       WHERE (itemsite_id=pItemsiteid) ) THEN

    SELECT invhist_id INTO _invhist
    FROM invhist
    WHERE ( (invhist_itemsite_id=pItemsiteid)
     AND (NOT invhist_posted) )
    LIMIT 1;
    IF (NOT FOUND) THEN
      UPDATE itemsite
      SET itemsite_freeze=FALSE
      WHERE (itemsite_id=pItemsiteid);
   END IF;

--  Run through any invdetail if this itemsite is still MLC and/or Lot/Serial
    IF ( SELECT ( (itemsite_loccntrl) OR
                  (itemsite_controlmethod IN (&#39;L&#39;, &#39;S&#39;)) )
         FROM itemsite
         WHERE (itemsite_id=pItemsiteid) ) THEN

--  Grab all of the itemsite/location/lot/serial combinations
--  that have unposted detail
      FOR _coarse IN SELECT DISTINCT invdetail_location_id, invdetail_ls_id
                     FROM invhist, invdetail
                     WHERE ( (invdetail_invhist_id=invhist_id)
                      AND (NOT invhist_posted)
                      AND (invhist_itemsite_id=pItemsiteid) )
                     ORDER BY invdetail_location_id, invdetail_ls_id LOOP

--  Cache the initial qty of the itemloc specified by the
--  itemsite/location/lot/serial
        SELECT itemloc_id, itemloc_qty INTO _itemloc
        FROM itemloc
        WHERE ( (itemloc_itemsite_id=pItemsiteid)
         AND (itemloc_location_id=_coarse.invdetail_location_id)
         AND (COALESCE(itemloc_ls_id,-1)=COALESCE(_coarse.invdetail_ls_id,-1)) );

--  If the itemloc in question cannot be found, create it
        IF (NOT FOUND) THEN
          SELECT NEXTVAL(&#39;itemloc_itemloc_id_seq&#39;) INTO _itemlocid;
          INSERT INTO itemloc
          ( itemloc_id, itemloc_itemsite_id,
            itemloc_location_id, itemloc_ls_id,
            itemloc_qty, itemloc_expiration )
          VALUES
          ( _itemlocid, pItemsiteid,
            _coarse.invdetail_location_id, _coarse.invdetail_ls_id,
            0, endOfTime() );

          _qoh := 0;

        ELSE
          _itemlocid := _itemloc.itemloc_id;
          _qoh := _itemloc.itemloc_qty;
        END IF;

--  Now step through each unposted invdetail record for a given
--  itemsite/location/lot/serial
        FOR _fine IN SELECT invdetail_id, invdetail_qty
                     FROM invhist, invdetail
                     WHERE ( (invdetail_invhist_id=invhist_id)
                      AND (NOT invhist_posted)
                      AND (invhist_itemsite_id=pItemsiteid)
                      AND (invdetail_location_id=_coarse.invdetail_location_id)
                      AND (COALESCE(invdetail_ls_id,-1)=COALESCE(_coarse.invdetail_ls_id,-1)) )
                     ORDER BY invhist_transdate LOOP

--  Update the running qoh fields in the detail record
          UPDATE invdetail
          SET invdetail_qty_before = _qoh,
              invdetail_qty_after = (_qoh + invdetail_qty)
          WHERE (invdetail_id=_fine.invdetail_id);

--  Update the running qoh
          _qoh = (_qoh + _fine.invdetail_qty);

        END LOOP;

--  If the running qoh end up at 0, delete the itemloc in question
        IF (_qoh = 0) THEN
          DELETE FROM itemloc
          WHERE (itemloc_id=_itemlocid);

--  Otherwise, update the itemloc in question with the resultant qty
        ELSE
          UPDATE itemloc
          SET itemloc_qty=_qoh
          WHERE (itemloc_id=_itemlocid);
        END IF;

      END LOOP;

    END IF; 

--  Cache the inital qoh of the itemsite
    SELECT itemsite_qtyonhand INTO _qoh
    FROM itemsite
    WHERE (itemsite_id=pItemsiteid);

--  We have to un-freeze the itemsite before update-ing its QOH
--  so that that itemsite trigger won&#39;t block the QOH update.
--  Also so the invhist trigger won&#39;t block the posted update.

    UPDATE itemsite
    SET itemsite_freeze=FALSE
    WHERE (itemsite_id=pItemsiteid);

    FOR _invhist IN SELECT invhist_id, invhist_qoh_before, invhist_qoh_after
                    FROM invhist
                    WHERE ((invhist_itemsite_id=pItemsiteid)
                     AND (NOT invhist_posted))
                    ORDER BY invhist_transdate LOOP

      UPDATE invhist
      SET invhist_qoh_before = _qoh,
          invhist_qoh_after = ( _qoh +
                                _invhist.invhist_qoh_after -
                                _invhist.invhist_qoh_before ),
          invhist_posted = TRUE
      WHERE (invhist_id=_invhist.invhist_id);

      _qoh := (_qoh + _invhist.invhist_qoh_after - _invhist.invhist_qoh_before);

    END LOOP;

    UPDATE itemsite
    SET itemsite_qtyonhand = _qoh
    WHERE (itemsite_id=pItemsiteid);

  END IF;

  RETURN pItemsiteid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.todoitemmove-integer-integer">todoitemmove( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    ptodoItemId ALIAS FOR $1;
    pHowFar     ALIAS FOR $2;   -- -1 moves toward front of list, +1 toward back
    _howFar     INTEGER := pHowFar;
    _usr_id     INTEGER;
    _currseq    INTEGER;
  BEGIN
    SELECT todoitem_usr_id, todoitem_seq INTO _usr_id, _currseq
    FROM todoitem
    WHERE todoitem_id = ptodoItemId;

    IF NOT FOUND THEN
      RETURN -1;
    END IF;

    IF (_currseq + pHowFar &lt;= 0) THEN
      _howFar = 1 - _currseq;   -- move to beginning
    END IF;

    UPDATE todoitem
    SET todoitem_seq=todoitem_seq - _howFar
    WHERE todoitem_seq &gt;= _currseq + _howFar
      AND todoitem_id != ptodoItemId
      AND todoitem_usr_id = _usr_id
      AND todoitem_status != &#39;C&#39;;

    UPDATE todoitem
    SET todoitem_seq=_currseq + _howFar
    WHERE todoitem_id = ptodoItemId;

    RETURN 0;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.todoitemmovedown-integer">todoitemmovedown( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    ptodoItemId ALIAS FOR $1;
  BEGIN
    RETURN todoItemMove(ptodoItemId, 1);        -- move toward end of list
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.todoitemmoveup-integer">todoitemmoveup( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    ptodoItemId ALIAS FOR $1;
  BEGIN
    RETURN todoItemMove(ptodoItemId, -1);       -- move toward front of list
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.togglebankreccleared-integer-text-integer">togglebankreccleared( integer, text, integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pBankrecid ALIAS FOR $1;
  pSource    ALIAS FOR $2;
  pSourceid  ALIAS FOR $3;
  _cleared BOOLEAN;
  _r RECORD;

BEGIN

  SELECT bankrecitem_id, bankrecitem_cleared INTO _r
    FROM bankrecitem
   WHERE ( (bankrecitem_bankrec_id=pBankrecid)
     AND   (bankrecitem_source=pSource)
     AND   (bankrecitem_source_id=pSourceid) );
  IF ( NOT FOUND ) THEN
    _cleared := TRUE;
    INSERT INTO bankrecitem
    (bankrecitem_bankrec_id, bankrecitem_source,
     bankrecitem_source_id, bankrecitem_cleared)
    VALUES
    (pBankrecid, pSource, pSourceid, _cleared);
  ELSE
    _cleared := (NOT _r.bankrecitem_cleared);
    UPDATE bankrecitem
       SET bankrecitem_cleared=_cleared
     WHERE (bankrecitem_id=_r.bankrecitem_id);
  END IF;

  RETURN _cleared;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.tonumeric-text-numeric">tonumeric( text, numeric )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pText ALIAS FOR $1;
  pDefault ALIAS FOR $2;

BEGIN

  IF (isNumeric(pText)) THEN
    RETURN TO_NUMBER(pText, &#39;999999999999&#39;);
  ELSE
    RETURN pDefault;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.transitwhs">transitwhs(  )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _id	INTEGER;

BEGIN
  _id = fetchMetricValue(&#39;TransitWarehouse&#39;);

  IF (_id IS NOT NULL
      AND EXISTS(SELECT warehous_id FROM whsinfo WHERE (warehous_id=_id)) ) THEN
    RETURN _id;
  END IF;

  SELECT warehous_id INTO _id FROM whsinfo WHERE warehous_transit;

  IF (NOT FOUND) THEN
    _id := NEXTVAL(&#39;warehous_warehous_id_seq&#39;);

    INSERT INTO whsinfo (
      warehous_id,
      warehous_code,
      warehous_descrip,
      --warehous_fob,
      warehous_active,
      --warehous_counttag_prefix,
      --warehous_counttag_number,
      --warehous_bol_prefix,
      --warehous_bol_number,
      warehous_shipping,
      warehous_useslips,
      warehous_usezones,
      --warehous_aislesize,
      --warehous_aislealpha,
      --warehous_racksize,
      --warehous_rackalpha,
      --warehous_binsize,
      --warehous_binalpha,
      --warehous_locationsize,
      --warehous_locationalpha,
      warehous_enforcearbl,
      warehous_default_accnt_id,
      --warehous_shipping_commission,
      --warehous_cntct_id,
      --warehous_addr_id,
      warehous_taxauth_id
     ) VALUES (
       _id,
      &#39;TRANSIT&#39;,
      &#39;Intermediate Warehouse for Inter-Warehouse Transfers&#39;,
      --text,
      TRUE,
      --text, 
      --integer, 
      --text, 
      --integer, 
      TRUE,
      FALSE,
      FALSE,
      --integer, 
      --boolean, 
      --integer, 
      --boolean, 
      --integer, 
      --boolean, 
      --integer, 
      --boolean, 
      FALSE,
      fetchMetricValue(&#39;UnassignedAccount&#39;),
      --numeric(8,4) default 0.00,
      --integer, 
      --integer, 
      NULL
    );
  END IF;

  PERFORM setMetric(&#39;TransitWarehouse&#39;, _id);

  RETURN _id;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.transtype-text-integer">transtype( text, integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTransType ALIAS FOR $1;
  pTargetType ALIAS FOR $2;

BEGIN

  IF (pTargetType = 255) THEN
    RETURN TRUE;
  ELSIF (pTargetType = 1) THEN
    RETURN receipts(pTransType);
  ELSIF (pTargetType = 2) THEN
    RETURN issues(pTransType);
  ELSIF (pTargetType = 4) THEN
    RETURN shipments(pTransType);
  ELSIF (pTargetType = 8) THEN
    RETURN adjustments(pTransType);
  ELSIF (pTargetType = 16) THEN
    RETURN transfers(pTransType);
  ELSIF (pTargetType = 32) THEN
    RETURN scraps(pTransType);
  ELSE
    RETURN TRUE;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.triggeritemcost">triggeritemcost(  )</a>
		</h2>
<h3>Returns: &quot;trigger&quot;</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN

  IF (TG_OP = &#39;UPDATE&#39;) THEN
    IF (NEW.itemcost_actcost &lt;&gt; OLD.itemcost_actcost OR
        NEW.itemcost_curr_id &lt;&gt; OLD.itemcost_curr_id) THEN
      INSERT INTO costhist
      ( costhist_item_id, costhist_costelem_id, costhist_type,
        costhist_lowlevel, costhist_user_id, costhist_date,
        costhist_oldcost, costhist_newcost,
	costhist_oldcurr_id, costhist_newcurr_id )
      VALUES
      ( NEW.itemcost_item_id, NEW.itemcost_costelem_id, &#39;A&#39;,
        NEW.itemcost_lowlevel, currentUserId(), CURRENT_TIMESTAMP,
        OLD.itemcost_actcost, NEW.itemcost_actcost,
	OLD.itemcost_curr_id, NEW.itemcost_curr_id );
    END IF;

    IF (NEW.itemcost_stdcost &lt;&gt; OLD.itemcost_stdcost) THEN
      INSERT INTO costhist
      ( costhist_item_id, costhist_costelem_id, costhist_type,
        costhist_lowlevel, costhist_user_id, costhist_date,
        costhist_oldcost, costhist_newcost ,
	costhist_oldcurr_id, costhist_newcurr_id )
      VALUES
      ( NEW.itemcost_item_id, NEW.itemcost_costelem_id, &#39;S&#39;,
        NEW.itemcost_lowlevel, currentUserId(), CURRENT_TIMESTAMP,
        OLD.itemcost_stdcost, NEW.itemcost_stdcost,
	baseCurrId(), baseCurrId() );
    END IF;

    RETURN NEW;

  ELSIF (TG_OP = &#39;INSERT&#39;) THEN
    INSERT INTO costhist
    ( costhist_item_id, costhist_costelem_id, costhist_type,
      costhist_lowlevel, costhist_user_id, costhist_date,
      costhist_oldcost, costhist_newcost ,
      costhist_oldcurr_id, costhist_newcurr_id )
    VALUES
    ( NEW.itemcost_item_id, NEW.itemcost_costelem_id, &#39;N&#39;,
      NEW.itemcost_lowlevel, currentUserId(), CURRENT_TIMESTAMP,
      0::numeric, NEW.itemcost_actcost,
      0, NEW.itemcost_curr_id );

    RETURN NEW;

  ELSIF (TG_OP = &#39;DELETE&#39;) THEN
    INSERT INTO costhist
    ( costhist_item_id, costhist_costelem_id, costhist_type,
      costhist_lowlevel, costhist_user_id, costhist_date,
      costhist_oldcost, costhist_newcost ,
      costhist_oldcurr_id, costhist_newcurr_id )
    VALUES
    ( OLD.itemcost_item_id, OLD.itemcost_costelem_id, &#39;D&#39;,
      OLD.itemcost_lowlevel, currentUserId(), CURRENT_TIMESTAMP,
      OLD.itemcost_stdcost, 0::numeric,
      OLD.itemcost_curr_id, 0 );

    RETURN OLD;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.unwoclockout-integer">unwoclockout( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pWotcid	ALIAS FOR $1;
  _wotc_timein	TIMESTAMP WITH TIME ZONE;

BEGIN
  SELECT wotc_timein INTO _wotc_timein
  FROM wotc
  WHERE (wotc_id=pWotcid);

  IF (NOT FOUND) THEN
    RETURN -1;
  ELSIF (_wotc_timein IS NULL) THEN	-- clocked out without ever clocking in
    DELETE FROM wotc WHERE (wotc_id=pWotcid);
  ELSE
    UPDATE wotc
    SET wotc_timeout=NULL
    WHERE (wotc_id=pWotcid);
  END IF;

  RETURN pWotcid;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.uomusedforitem-integer">uomusedforitem( integer )</a>
		</h2>
<h3>Returns: SET OF uom</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pitemid       ALIAS FOR $1;
  _row          uom%ROWTYPE;
BEGIN
  FOR _row IN SELECT DISTINCT *
              FROM uom
              WHERE uom_id IN (
                SELECT bomitem_uom_id AS uom_id 
                FROM bomitem 
                WHERE (bomitem_item_id=pitemid)
                UNION 
                SELECT cmitem_qty_uom_id 
                FROM cmitem, itemsite 
                WHERE ((cmitem_itemsite_id=itemsite_id)
                   AND (itemsite_item_id=pitemid))
                UNION 
                SELECT cmitem_price_uom_id 
                FROM cmitem, itemsite 
                WHERE ((cmitem_itemsite_id=itemsite_id)
                   AND (itemsite_item_id=pitemid))
                UNION 
                SELECT coitem_qty_uom_id 
                FROM coitem, itemsite 
                WHERE ((coitem_itemsite_id=itemsite_id)
                   AND (itemsite_item_id=pitemid))
                UNION 
                SELECT coitem_price_uom_id 
                FROM coitem, itemsite 
                WHERE ((coitem_itemsite_id=itemsite_id)
                   AND (itemsite_item_id=pitemid))
                UNION 
                SELECT invcitem_qty_uom_id 
                FROM invcitem 
                WHERE ((invcitem_item_id=pitemid))
                UNION 
                SELECT invcitem_price_uom_id 
                FROM invcitem 
                WHERE ((invcitem_item_id=pitemid))
                UNION 
                SELECT ipsitem_qty_uom_id 
                FROM ipsitem 
                WHERE (ipsitem_item_id=pitemid)
                UNION 
                SELECT ipsitem_price_uom_id 
                FROM ipsitem 
                WHERE (ipsitem_item_id=pitemid)
                UNION 
                SELECT quitem_qty_uom_id 
                FROM quitem, itemsite 
                WHERE ((quitem_itemsite_id=itemsite_id)
                   AND (itemsite_item_id=pitemid))
                UNION 
                SELECT quitem_price_uom_id 
                FROM quitem, itemsite 
                WHERE ((quitem_itemsite_id=itemsite_id)
                   AND (itemsite_item_id=pitemid))
                UNION 
                SELECT womatl_uom_id 
                FROM womatl, itemsite 
                WHERE ((womatl_itemsite_id=itemsite_id)
                   AND (itemsite_item_id=pitemid))
  ) LOOP
    RETURN NEXT _row;
  END LOOP;

  IF (fetchmetricbool(&#39;MultiWhs&#39;)) THEN
    FOR _row IN SELECT DISTINCT *
                FROM uom
                WHERE uom_id IN (
                  SELECT rahist_uom_id 
                  FROM rahist, itemsite 
                  WHERE ((rahist_itemsite_id=itemsite_id)
                     AND (itemsite_item_id=pitemid))
    ) LOOP
      RETURN NEXT _row;
    END LOOP;
  END IF;

  RETURN;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updateabcclass-integer-integer-numeric-numeric-date-date">updateabcclass( integer, integer, numeric, numeric, date, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pClasscodeid ALIAS FOR $1;
  pWarehousid ALIAS FOR $2;
  pACutoff ALIAS FOR $3;
  pBCutoff ALIAS FOR $4;
  pStartDate ALIAS FOR $5;
  pEndDate ALIAS FOR $6;
  _updateCount INTEGER;
  _totalValue NUMERIC;
  _cumulativeValue NUMERIC;
  _itemsite RECORD;

BEGIN

  SELECT COUNT(*) INTO _updateCount
  FROM itemsite, item
  WHERE ( (itemsite_item_id=item_id)
   AND ((item_classcode_id=pClasscodeid) OR (pClasscodeid=-1))
   AND ((itemsite_warehous_id=pWarehousid) OR (pWarehousid=-1)) );

  IF (_updateCount IS NULL) THEN
    _updateCount := 0;
  ELSE

    UPDATE itemsite
    SET itemsite_abcclass=&#39;T&#39;
    FROM item
    WHERE ( (itemsite_item_id=item_id)
     AND ((item_classcode_id=pClasscodeid) OR (pClasscodeid=-1))
     AND ((itemsite_warehous_id=pWarehousid) OR (pWarehousid=-1)) );

    SELECT SUM(ABS(invhist_qoh_before - invhist_qoh_after) * invhist_unitcost) INTO _totalValue
    FROM invhist, itemsite, item
    WHERE ( (invhist_itemsite_id=itemsite_id)
     AND (itemsite_item_id=item_id)
     AND (invhist_analyze)
     AND (invhist_transtype ~ &#39;^[IR]&#39;)
     AND ((item_classcode_id=pClasscodeid) OR (pClasscodeid=-1))
     AND (invhist_transdate::DATE BETWEEN pStartDate AND pEndDate)
     AND ((itemsite_warehous_id=pWarehousid) OR (pWarehousid=-1)) );

    IF (_totalValue IS NULL) THEN
      UPDATE itemsite
      SET itemsite_abcclass=&#39;A&#39;
      WHERE (itemsite_abcclass=&#39;T&#39;);
    ELSE

      _cumulativeValue := 0;

      FOR _itemsite IN SELECT itemsite_id, item_number,
                              SUM(ABS(invhist_qoh_before - invhist_qoh_after) * invhist_unitcost) AS value
                       FROM invhist, itemsite, item
                       WHERE ( (invhist_itemsite_id=itemsite_id)
                        AND (itemsite_item_id=item_id)
                        AND (invhist_analyze)
                        AND (invhist_transtype ~ &#39;^[IR]&#39;)
                        AND ((item_classcode_id=pClasscodeid) OR (pClasscodeid=-1))
                        AND (invhist_transdate::DATE BETWEEN pStartDate AND pEndDate)
                        AND ((itemsite_warehous_id=pWarehousid) OR (pWarehousid=-1)) )
                       GROUP BY itemsite_id, item_number
                       ORDER BY value DESC LOOP

        IF (_itemsite.value IS NOT NULL) THEN
          _cumulativeValue := _cumulativeValue + _itemsite.value;
        END IF;

        IF ((_cumulativeValue / _totalValue) &lt;= pACutoff) THEN
          UPDATE itemsite
          SET itemsite_abcclass=&#39;A&#39;
          WHERE (itemsite_id=_itemsite.itemsite_id);
        ELSE
          IF ((_cumulativeValue / _totalValue) &lt;= pBCutoff) THEN
            UPDATE itemsite
            SET itemsite_abcclass=&#39;B&#39;
            WHERE (itemsite_id=_itemsite.itemsite_id);
          ELSE
            UPDATE itemsite
            SET itemsite_abcclass=&#39;C&#39;
            WHERE (itemsite_id=_itemsite.itemsite_id);
          END IF;
        END IF;

      END LOOP;

      UPDATE itemsite
      SET itemsite_abcclass=&#39;C&#39;
      WHERE (itemsite_abcclass=&#39;T&#39;);
    END IF;

  END IF;

  RETURN _updateCount;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updateabcclass-integer-numeric-numeric-date-date">updateabcclass( integer, numeric, numeric, date, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pClasscodeid ALIAS FOR $1;
  pACutoff ALIAS FOR $2;
  pBCutoff ALIAS FOR $3;
  pStartDate ALIAS FOR $4;
  pEndDate ALIAS FOR $5;
  _result INTEGER;

BEGIN

  SELECT updateABCClass(pClassCodeid, -1, pACutoff, pBCutoff, pStartDate, pEndDate) INTO _result;
  RETURN _result;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updateabcclass-text-integer-numeric-numeric-date-date">updateabcclass( text, integer, numeric, numeric, date, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pClassCodePattern ALIAS FOR $1;
  pWarehousid ALIAS FOR $2;
  pACutoff ALIAS FOR $3;
  pBCutoff ALIAS FOR $4;
  pStartDate ALIAS FOR $5;
  pEndDate ALIAS FOR $6;
  _updateCount INTEGER;
  _totalValue NUMERIC;
  _cumulativeValue NUMERIC;
  _itemsite RECORD;

BEGIN

  SELECT COUNT(*) INTO _updateCount
  FROM itemsite, item, classcode
  WHERE ( (itemsite_item_id=item_id)
   AND (item_classcode_id=classcode_id)
   AND (itemsite_autoabcclass)
   AND (classcode_code ~ pClassCodePattern)
   AND ((itemsite_warehous_id=pWarehousid) OR (pWarehousid=-1)) );

  IF (_updateCount IS NULL) THEN
    RETURN 0;
  ELSE

    UPDATE itemsite
    SET itemsite_abcclass=&#39;T&#39;
    FROM item, classcode
    WHERE ( (itemsite_item_id=item_id)
     AND (item_classcode_id=classcode_id)
     AND (itemsite_autoabcclass)
     AND (classcode_code ~ pClassCodePattern)
     AND ((itemsite_warehous_id=pWarehousid) OR (pWarehousid=-1)) );

    SELECT SUM(ABS(invhist_qoh_before - invhist_qoh_after) * invhist_unitcost) INTO _totalValue
    FROM invhist, itemsite, item, classcode
    WHERE ( (invhist_itemsite_id=itemsite_id)
     AND (itemsite_item_id=item_id)
     AND (item_classcode_id=classcode_id)
     AND (invhist_analyze)
     AND (invhist_transtype ~ &#39;^[IR]&#39;)
     AND (itemsite_autoabcclass)
     AND (classcode_code ~ pClassCodePattern)
     AND (invhist_transdate::DATE BETWEEN pStartDate AND pEndDate)
     AND ((itemsite_warehous_id=pWarehousid) OR (pWarehousid=-1)) );

    IF (_totalValue IS NULL) THEN
      UPDATE itemsite
      SET itemsite_abcclass=&#39;A&#39;
      WHERE (itemsite_abcclass=&#39;T&#39;);
    ELSE

      _cumulativeValue := 0;

      FOR _itemsite IN SELECT itemsite_id, item_number,
                              SUM(ABS(invhist_qoh_before - invhist_qoh_after) * invhist_unitcost) AS value
                       FROM invhist, itemsite, item, classcode
                       WHERE ( (invhist_itemsite_id=itemsite_id)
                        AND (itemsite_item_id=item_id)
                        AND (item_classcode_id=classcode_id)
                        AND (invhist_analyze)
                        AND (invhist_transtype ~ &#39;^[IR]&#39;)
                        AND (itemsite_autoabcclass)
                        AND (classcode_code ~ pClassCodePattern)
                        AND (invhist_transdate::DATE BETWEEN pStartDate AND pEndDate)
                        AND ((itemsite_warehous_id=pWarehousid) OR (pWarehousid=-1)) )
                       GROUP BY itemsite_id, item_number
                       ORDER BY value DESC LOOP

        IF (_itemsite.value IS NOT NULL) THEN
          _cumulativeValue := _cumulativeValue + _itemsite.value;
        END IF;

        IF ((_cumulativeValue / _totalValue) &lt;= pACutoff) THEN
          UPDATE itemsite
          SET itemsite_abcclass=&#39;A&#39;
          WHERE (itemsite_id=_itemsite.itemsite_id);
        ELSE
          IF ((_cumulativeValue / _totalValue) &lt;= pBCutoff) THEN
            UPDATE itemsite
            SET itemsite_abcclass=&#39;B&#39;
            WHERE (itemsite_id=_itemsite.itemsite_id);
          ELSE
            UPDATE itemsite
            SET itemsite_abcclass=&#39;C&#39;
            WHERE (itemsite_id=_itemsite.itemsite_id);
          END IF;
        END IF;

      END LOOP;

      UPDATE itemsite
      SET itemsite_abcclass=&#39;C&#39;
      WHERE (itemsite_abcclass=&#39;T&#39;);
    END IF;

  END IF;

  RETURN _updateCount;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updateabcclass-text-numeric-numeric-date-date">updateabcclass( text, numeric, numeric, date, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pClassCodePattern ALIAS FOR $1;
  pACutoff ALIAS FOR $2;
  pBCutoff ALIAS FOR $3;
  pStartDate ALIAS FOR $4;
  pEndDate ALIAS FOR $5;
  _result INTEGER;

BEGIN

  SELECT updateABCClass(pClassCodePattern, -1, pACutoff, pBCutoff, pStartDate, pEndDate) INTO _result;
  RETURN _result;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updatecharassignment-text-integer-integer-text">updatecharassignment( text, integer, integer, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTargetType ALIAS FOR $1;
  pTargetId ALIAS FOR $2;
  pCharId ALIAS FOR $3;
  pValue ALIAS FOR $4;
  _charassid INTEGER;

BEGIN

  SELECT updateCharAssignment(pTargetType, pTargetId, pCharId, pValue, 0) INTO _charassid;

  RETURN _charassid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updatecharassignment-text-integer-integer-text-numeric">updatecharassignment( text, integer, integer, text, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pTargetType ALIAS FOR $1;
  pTargetId ALIAS FOR $2;
  pCharId ALIAS FOR $3;
  pValue ALIAS FOR $4;
  pPrice ALIAS FOR $5;
  _charassid INTEGER;
  _charassprice NUMERIC;
  _explodedJob BOOLEAN = FALSE;
  _value TEXT;

BEGIN

  -- Check for Valid Assignment
  IF (pTargetType=&#39;SI&#39;) THEN
    SELECT (item_type=&#39;J&#39; AND wo_status != &#39;O&#39;) INTO _explodedJob
        FROM coitem,itemsite,item,wo
        WHERE ((coitem_id=pTargetId)
        AND (itemsite_id=coitem_itemsite_id)
        AND (item_id=itemsite_item_id)
        AND (wo_ordtype=&#39;S&#39;)
        AND (wo_ordid=coitem_id));
  END IF;
  
  SELECT charass_id,charass_value INTO _charassid, _value
    FROM charass
   WHERE ((charass_target_type=pTargetType)
     AND  (charass_target_id=pTargetId)
     AND  (charass_char_id=pCharId) )
   LIMIT 1;
  IF (FOUND) THEN
    IF (_explodedJob AND pValue != _value) THEN
      RAISE EXCEPTION  &#39;Characteristic may not be updated for Job Item with exploded Work Order.&#39;;
    ELSIF(COALESCE(pValue, &#39;&#39;)!=&#39;&#39;) THEN
        UPDATE charass
        SET charass_value = pValue,
            charass_price = pPrice
        WHERE (charass_id=_charassid);
    ELSE
      DELETE
        FROM charass
       WHERE (charass_id=_charassid);
      _charassid := 0;
    END IF;
  ELSE
    IF (_explodedJob) THEN
      RAISE EXCEPTION  &#39;Characteristics may not be updated for Job Item with exploded Work Order.&#39;;
    ELSIF(COALESCE(pValue, &#39;&#39;)!=&#39;&#39;) THEN
      SELECT nextval(&#39;charass_charass_id_seq&#39;) INTO _charassid;
      INSERT INTO charass
            (charass_id, charass_target_type, charass_target_id,
             charass_char_id, charass_value, charass_price)
      VALUES(_charassid, pTargetType, pTargetId,
             pCharId, pValue, pPrice);
    ELSE
      _charassid := 0;
    END IF;
  END IF;

  RETURN _charassid;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updatecost-integer-integer-boolean-numeric">updatecost( integer, integer, boolean, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  returnVal INTEGER;

BEGIN
  SELECT updateCost($1, $2, $3, $4, baseCurrId()) INTO returnVal;
  RETURN returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updatecost-integer-integer-boolean-numeric-integer">updatecost( integer, integer, boolean, numeric, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pCostelemid ALIAS FOR $2;
  pLevel ALIAS FOR $3;
  pCost ALIAS FOR $4;
  pCurrid ALIAS FOR $5;
  _cost NUMERIC;
  _currId INTEGER;
  _p RECORD;
  _itemcostid INTEGER;

BEGIN

  IF (pCost IS NULL) THEN
    _cost = 0;
  ELSE
    _cost = pCost;
  END IF;

  IF (pCurrId IS NULL) THEN
    _currId := baseCurrID();
  ELSE
    _currId := pCurrId;
  END IF;

  SELECT itemcost_id, itemcost_stdcost INTO _p
  FROM itemcost
  WHERE ((itemcost_costelem_id=pCostelemid)
   AND (itemcost_item_id=pItemid)
   AND (itemcost_lowlevel=pLevel) );

  IF (NOT FOUND) THEN
    IF (_cost &gt; 0) THEN
      SELECT NEXTVAL(&#39;itemcost_itemcost_id_seq&#39;) INTO _itemcostid;
      INSERT INTO itemcost
      ( itemcost_id, itemcost_item_id, itemcost_costelem_id, itemcost_lowlevel,
        itemcost_stdcost, itemcost_posted, itemcost_actcost, itemcost_updated,
        itemcost_curr_id )
      VALUES
      ( _itemcostid, pItemid, pCostelemid, pLevel,
        0, startOfTime(), _cost, CURRENT_DATE,
        _currId );

      RETURN _itemcostid;

    ELSE
      RETURN -1;
    END IF;

  ELSIF ( (_p.itemcost_stdcost &gt; 0) OR (_cost &gt; 0) ) THEN
    UPDATE itemcost
    SET itemcost_actcost=_cost,
        itemcost_curr_id = _currId,
        itemcost_updated=CURRENT_DATE
    WHERE (itemcost_id=_p.itemcost_id);

    RETURN _p.itemcost_id;

  ELSE
    DELETE FROM itemcost
    WHERE (itemcost_id=_p.itemcost_id);
 
    RETURN -1;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updatecost-integer-numeric">updatecost( integer, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemcostid ALIAS FOR $1;
  pCost ALIAS FOR $2;

BEGIN
  RETURN updateCost(pItemcostid, pCost, baseCurrId());
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updatecost-integer-numeric-integer">updatecost( integer, numeric, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
    pItemcostid ALIAS FOR $1;
    pCost ALIAS FOR $2;
    pCurrId ALIAS FOR $3;

BEGIN
  IF ( ( SELECT (itemcost_stdcost &gt; 0)
           FROM itemcost
          WHERE (itemcost_id=pItemcostid) )  OR
        (pCost &gt; 0) ) THEN
    UPDATE itemcost
       SET itemcost_actcost=pCost, itemcost_updated=CURRENT_DATE,
           itemcost_curr_id=pCurrId
     WHERE (itemcost_id=pItemcostid);

    RETURN pItemcostid;

  ELSE
    DELETE FROM itemcost
     WHERE (itemcost_id=pItemcostid);

    RETURN -1;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updatecost-integer-text-boolean-numeric">updatecost( integer, text, boolean, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  returnVal INTEGER;

BEGIN
  SELECT updateCost($1, $2, $3, $4, baseCurrId()) INTO returnVal;
  RETURN returnVal;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updatecost-integer-text-boolean-numeric-integer">updatecost( integer, text, boolean, numeric, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pCosttype ALIAS FOR $2;
  pLevel ALIAS FOR $3;
  pCost ALIAS FOR $4;
  pCurrid ALIAS FOR $5;
  _cost NUMERIC;
  _currId INTEGER;
  _p RECORD;
  _itemcostid INTEGER;

BEGIN

  IF (pCost IS NULL) THEN
    _cost = 0;
  ELSE
    _cost = pCost;
  END IF;

  IF (pCurrId IS NULL) THEN
    _currId := baseCurrID();
  ELSE
    _currId := pCurrId;
  END IF;

  SELECT itemcost_id, itemcost_stdcost INTO _p
  FROM itemcost, costelem
  WHERE ( (itemcost_costelem_id=costelem_id)
   AND (itemcost_item_id=pItemid)
   AND (itemcost_lowlevel=pLevel)
   AND (costelem_type=pCosttype) );

  IF (NOT FOUND) THEN
    IF (_cost &gt; 0) THEN
      SELECT NEXTVAL(&#39;itemcost_itemcost_id_seq&#39;) INTO _itemcostid;
      INSERT INTO itemcost
      ( itemcost_id, itemcost_item_id, itemcost_costelem_id, itemcost_lowlevel,
        itemcost_stdcost, itemcost_posted, itemcost_actcost, itemcost_updated,
        itemcost_curr_id )
      SELECT _itemcostid, pItemid, costelem_id, pLevel,
             0, startOfTime(), _cost, CURRENT_DATE,
             _currId
      FROM costelem
      WHERE (costelem_type=pCosttype);

      RETURN _itemcostid;

    ELSE
      RETURN -1;
    END IF;

  ELSIF ( (_p.itemcost_stdcost &gt; 0) OR (_cost &gt; 0) ) THEN
    UPDATE itemcost
    SET itemcost_actcost=_cost,
        itemcost_curr_id = _currId,
        itemcost_updated=CURRENT_DATE
    WHERE (itemcost_id=_p.itemcost_id);

    RETURN _p.itemcost_id;

  ELSE
    DELETE FROM itemcost
    WHERE (itemcost_id=_p.itemcost_id);
 
    RETURN -1;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updatecreditmemoline-api.creditmemoline-api.creditmemoline">updatecreditmemoline( api.creditmemoline, api.creditmemoline )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pNew ALIAS FOR $1;
  pOld ALIAS FOR $2;
  _check INTEGER;
  _r RECORD;

BEGIN
  SELECT cmitem_id INTO _check
  FROM cmitem
  WHERE ( (cmitem_cmhead_id=getCmheadId(pOld.memo_number, FALSE)) AND (cmitem_linenumber=pOld.line_number) );
  IF (NOT FOUND) THEN
    RAISE EXCEPTION &#39;Credit Memo # % Line Number # not found&#39;, pOld.memo_number, pOld.line_number;
  END IF;

  UPDATE cmitem
    SET cmitem_itemsite_id=COALESCE(itemsite_id, -1),
        cmitem_qtycredit=pNew.qty_to_credit,
        cmitem_qtyreturned=pNew.qty_returned,
        cmitem_unitprice=pNew.net_unit_price,
        cmitem_comments=pNew.notes,
        cmitem_rsncode_id=getRsnId(pNew.reason_code),
        cmitem_tax_id=tax_id,
        cmitem_taxtype_id=taxtype_id,
        cmitem_tax_pcta=tax_ratea,
        cmitem_tax_pctb=tax_rateb,
        cmitem_tax_pctc=tax_ratec,
        cmitem_tax_ratea=COALESCE(pNew.tax_amount_a,
                                  (tax_ratea * COALESCE(pNew.net_unit_price,
                                                        itemPrice(item_id,cmhead_cust_id,cmhead_shipto_id,pNew.qty_to_credit,cmhead_curr_id,cmhead_docdate))), 0),
        cmitem_tax_rateb=COALESCE(pNew.tax_amount_b, 
                                  (tax_rateb * COALESCE(pNew.net_unit_price,
                                                        itemPrice(item_id,cmhead_cust_id,cmhead_shipto_id,pNew.qty_to_credit,cmhead_curr_id,cmhead_docdate))), 0),
        cmitem_tax_ratec=COALESCE(pNew.tax_amount_c,
                                  (tax_ratec * COALESCE(pNew.net_unit_price,
                                                        itemPrice(item_id,cmhead_cust_id,cmhead_shipto_id,pNew.qty_to_credit,cmhead_curr_id,cmhead_docdate))), 0),
        cmitem_qty_uom_id=COALESCE(getUomId(pNew.qty_uom), item_inv_uom_id),
        cmitem_qty_invuomratio=CASE WHEN item_id IS NOT NULL THEN itemuomtouomratio(item_id, COALESCE(getUomId(pNew.qty_uom),item_inv_uom_id),item_inv_uom_id)
                                    ELSE 1
                               END,
        cmitem_price_uom_id=COALESCE(getUomId(pNew.price_uom),item_price_uom_id),
        cmitem_price_invuomratio=CASE WHEN item_id IS NOT NULL THEN itemuomtouomratio(item_id, COALESCE(getUomId(pNew.price_uom),item_price_uom_id),item_price_uom_id)
                                      ELSE 1
                                 END
  FROM cmhead LEFT OUTER JOIN item ON (item_id=getItemId(pNew.item_number))
              LEFT OUTER JOIN itemsite ON (itemsite_item_id=item_id AND
                                           itemsite_warehous_id=getWarehousId(pNew.recv_site, &#39;ALL&#39;))
              LEFT OUTER JOIN taxtype ON (taxtype_id=CASE WHEN pNew.tax_type IS NULL THEN getItemTaxType(item_id,cmhead_taxauth_id)
                                                          WHEN pNew.tax_type = &#39;None&#39; THEN NULL
                                                          ELSE getTaxTypeId(pNew.tax_type)
                                                     END)
              LEFT OUTER JOIN tax ON (tax_id=CASE WHEN pNew.tax_code IS NULL THEN getTaxSelection(cmhead_taxauth_id,getItemTaxType(item_id,cmhead_taxauth_id))
                                                  WHEN pNew.tax_code = &#39;None&#39; THEN NULL
                                                  ELSE getTaxId(pNew.tax_code)
                                             END)
  WHERE cmitem_cmhead_id=cmhead_id
    AND cmhead_number=pOld.memo_number
    AND cmitem_linenumber=pOld.line_number
    AND cmhead_posted=FALSE;

  RETURN TRUE;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updatecustomprivs">updatecustomprivs(  )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  _r RECORD;
BEGIN

  FOR _r IN SELECT priv_id
              FROM priv
             WHERE ((priv_name IN (SELECT priv_name
                                     FROM priv
                                    WHERE (priv_module=&#39;Custom&#39;)
                                   EXCEPT
                                   SELECT (&#39;Custom&#39;||cmd_privname)
                                     FROM cmd))
               AND  (priv_module=&#39;Custom&#39;)) LOOP
    -- TODO: something here
    DELETE FROM grppriv WHERE grppriv_priv_id=_r.priv_id;
    DELETE FROM usrpriv WHERE usrpriv_priv_id=_r.priv_id;
    DELETE FROM priv WHERE priv_id=_r.priv_id;
  END LOOP;

  FOR _r IN SELECT (&#39;Custom&#39;||cmd_privname) AS privname
              FROM cmd
            EXCEPT
            SELECT priv_name
              FROM priv
             WHERE (priv_module=&#39;Custom&#39;) LOOP
    -- TODO: something here
    INSERT INTO priv (priv_module, priv_name, priv_descrip)
              VALUES (&#39;Custom&#39;, _r.privname, &#39;Auto Generated Custom Priv.&#39;);
  END LOOP;

  RETURN TRUE;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updateinvoicelineitem-api.invoiceline-api.invoiceline">updateinvoicelineitem( api.invoiceline, api.invoiceline )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
	pNew ALIAS FOR $1;
	pOld ALIAS FOR $2;
	_r RECORD;
BEGIN
	UPDATE invcitem SET
		invcitem_linenumber=pNew.line_number,
		invcitem_item_id=COALESCE(item_id, -1),
		invcitem_custpn=pNew.customer_part_number,
		invcitem_number=(CASE WHEN item_id IS NULL THEN pNew.misc_item_number ELSE NULL END),
		invcitem_descrip=(CASE WHEN item_id IS NULL THEN pNew.misc_item_description ELSE NULL END),
		invcitem_ordered=pNew.qty_ordered,
		invcitem_billed=COALESCE(pNew.qty_billed, 0),
		invcitem_price=COALESCE(pNew.net_unit_price,itemPrice(item_id,invchead_cust_id,
			invchead_shipto_id,pNew.qty_ordered,invchead_curr_id,invchead_orderdate)),
		invcitem_notes=COALESCE(pNew.notes,&#39;&#39;),
		invcitem_salescat_id=CASE
			WHEN item_id IS NULL THEN
				(SELECT salescat_id FROM salescat WHERE salescat_name = pNew.sales_category)
			ELSE NULL
		END,
		invcitem_taxtype_id=taxtype_id,
		invcitem_tax_id=tax_id,
		invcitem_tax_pcta=tax_ratea,
		invcitem_tax_pctb=tax_rateb,
		invcitem_tax_pctc=tax_ratec,
		invcitem_tax_ratea=COALESCE(pNew.tax_amount_a, (tax_ratea * COALESCE(pNew.net_unit_price,itemPrice(
			item_id,invchead_cust_id,invchead_shipto_id,pNew.qty_ordered,invchead_curr_id,invchead_orderdate))), 0),
		invcitem_tax_rateb=COALESCE(pNew.tax_amount_b, (tax_rateb * COALESCE(pNew.net_unit_price,itemPrice(
			item_id,invchead_cust_id,invchead_shipto_id,pNew.qty_ordered,invchead_curr_id,invchead_orderdate))), 0),
		invcitem_tax_ratec=COALESCE(pNew.tax_amount_c, (tax_ratec * COALESCE(pNew.net_unit_price,itemPrice(
			item_id,invchead_cust_id,invchead_shipto_id,pNew.qty_ordered,invchead_curr_id,invchead_orderdate))), 0),
		invcitem_qty_uom_id=CASE
			WHEN item_id IS NOT NULL THEN
				COALESCE((SELECT uom_id FROM uom WHERE (uom_name=pNew.qty_uom)), item_price_uom_id)
			ELSE NULL
		END,
		invcitem_qty_invuomratio=CASE
			WHEN item_id IS NOT NULL THEN
				itemuomtouomratio(item_id,
					COALESCE((SELECT uom_id FROM uom WHERE uom_name=pNew.qty_uom),item_price_uom_id),
					item_price_uom_id
				)
			ELSE 1
		END,
		invcitem_price_uom_id=CASE
			WHEN item_id IS NOT NULL THEN
				COALESCE((SELECT uom_id FROM uom WHERE uom_name=pNew.price_uom),item_price_uom_id)
			ELSE NULL
		END,
		invcitem_price_invuomratio=CASE
			WHEN item_id IS NOT NULL THEN
				itemuomtouomratio(item_id,
					COALESCE((SELECT uom_id FROM uom WHERE uom_name=pNew.price_uom),item_price_uom_id),
					item_price_uom_id
				)
			ELSE 1
		END
	FROM invchead
		LEFT OUTER JOIN item ON (item_id=getItemId(pNew.item_number))
		LEFT OUTER JOIN taxtype ON (taxtype_id=CASE
			WHEN pNew.tax_type IS NULL THEN getItemTaxType(item_id,invchead_taxauth_id)
			WHEN pNew.tax_type = &#39;None&#39; THEN NULL
			ELSE (SELECT taxtype_id FROM taxtype WHERE taxtype_name=pNew.tax_type)
		END)
		LEFT OUTER JOIN tax ON (tax_id=CASE 
			WHEN pNew.tax_code IS NULL THEN getTaxSelection(
				invchead_taxauth_id,getItemTaxType(item_id,invchead_taxauth_id))
			WHEN pNew.tax_code = &#39;None&#39; THEN NULL
			ELSE getTaxId(pNew.tax_code)
		END)
	WHERE invcitem_invchead_id=invchead_id
		AND invcitem_linenumber=pOld.line_number
		AND invchead_invcnumber=pOld.invoice_number
		AND invchead_posted=FALSE;
	RETURN TRUE;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updateitemcost-integer-integer-integer-numeric-boolean">updateitemcost( integer, integer, integer, numeric, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
pItemId ALIAS FOR $1;
pCostElemId ALIAS FOR $2;
pCurrId ALIAS FOR $3;
pCost ALIAS FOR $4;
pPostToStandard ALIAS FOR $5;
_itemcost_id INTEGER;
_update_return INTEGER;
_postcost_return BOOLEAN;

--This function is used with the api.itemcost View for updating
--the itemcost table

BEGIN
  SELECT itemcost_id INTO _itemcost_id
  FROM itemcost
  WHERE ( (itemcost_item_id = pItemId) AND (itemcost_costelem_id = pCostElemId) );

  IF (NOT FOUND) THEN
    RAISE EXCEPTION &#39;itemcost % not found for. &#39;, pItemId || &#39; &amp; &#39; || pCostElemId;
  END IF;

  IF (pCost IS NULL OR pCost &lt; 0) THEN
    RAISE EXCEPTION &#39;itemcost Actual Cost Invalid &#39;, pCost;
  END IF;
  
  IF (pCost &gt; 0) THEN
    UPDATE itemcost
    SET itemcost_actcost=pCost,
        itemcost_curr_id = pCurrId
    WHERE (itemcost_id=_itemcost_id);

    --Only Post Cost to standard if the parameter is set to true
    IF (pPostToStandard) THEN
      IF (NOT checkPrivilege(&#39;PostStandardCosts&#39;)) THEN
        RAISE EXCEPTION &#39;You do not have privileges to poststandard itemcosts. Set api.itemcost post_to_standard to false&#39;;
      END IF;
      SELECT postcost(_itemcost_id) INTO _postcost_return;       
      IF (NOT _postcost_return) THEN
        RETURN -2;
      END IF;
    END IF;
  ELSE 
    RETURN -1;
  END IF;

  RETURN _itemcost_id;
  
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updateitemsiteleadtime-integer-integer">updateitemsiteleadtime( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pPad ALIAS FOR $2;
  _p RECORD;
  _materialLeadTime INTEGER;
  _productionLeadTime INTEGER;
  _leadTime INTEGER;

BEGIN

  SELECT item_type, itemsite_supply INTO _p
  FROM item, itemsite
  WHERE ( (itemsite_item_id=item_id)
   AND (itemsite_id=pitemsiteid) );
  
  IF ( (_p.item_type IN (&#39;M&#39;, &#39;P&#39;, &#39;J&#39;)) AND
       (_p.itemsite_supply) ) THEN

    IF (_p.item_type IN (&#39;M&#39;,&#39;J&#39;)) THEN
      SELECT COALESCE(MAX(component.itemsite_leadtime), 0) INTO _materialLeadTime
      FROM bomitem, itemsite AS parent, itemsite AS component
      WHERE ( (bomitem_parent_item_id=parent.itemsite_item_id)
       AND (bomitem_rev_id=getActiveRevId(&#39;BOM&#39;,bomitem_parent_item_id))
       AND (bomitem_item_id=component.itemsite_item_id)
       AND (parent.itemsite_warehous_id=component.itemsite_warehous_id)
       AND (parent.itemsite_id=pItemsiteid) );

      SELECT COALESCE(MAX(booitem_execday), 0) INTO _productionLeadTime
      FROM booitem, itemsite
      WHERE ( (booitem_item_id=itemsite_item_id)
       AND (booitem_rev_id=getActiveRevId(&#39;BOO&#39;,booitem_item_id))
       AND (itemsite_id=pItemsiteid) );

      _leadTime := (_materialLeadTime + _productionLeadTime + pPad);

    ELSIF (_p.item_type IN (&#39;P&#39;)) THEN
      SELECT COALESCE(MAX(itemsrc_leadtime), 0) INTO _leadTime
      FROM itemsrc, itemsite
      WHERE ( (itemsite_item_id=itemsrc_item_id)
       AND (itemsite_id=pItemsiteid) );

      _leadTime := (_leadTime + pPad);
    END IF;

  ELSE
    _leadTime = pPad;
  END IF;

  UPDATE itemsite
  SET itemsite_leadtime=_leadTime
  WHERE (itemsite_id=pItemsiteid);

  RETURN _leadTime;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updatelistprice-integer-numeric">updatelistprice( integer, numeric )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;
  pUpdateBy ALIAS FOR $2;

BEGIN

  UPDATE item
  SET item_listprice = (item_listprice * pUpdateBy)
  WHERE (item_id=pItemid);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updatelowerusercosts-integer">updatelowerusercosts( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid ALIAS FOR $1;

BEGIN
    RETURN updateLowerUserCosts(pItemid, TRUE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updatelowerusercosts-integer-boolean">updatelowerusercosts( integer, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid	ALIAS FOR $1;
  pUpdateActual	ALIAS FOR $2;
  _bomitem RECORD;
  _type CHAR(1);

BEGIN

  SELECT item_type INTO _type
  FROM item
  WHERE (item_id=pItemid);

  IF (_type IN (&#39;M&#39;, &#39;F&#39;, &#39;B&#39;, &#39;T&#39;)) THEN
    FOR _bomitem IN SELECT DISTINCT costelem_type
                    FROM ( SELECT costelem_type
                           FROM itemcost, costelem, bomitem(pItemid)
                           WHERE ( ( CURRENT_DATE BETWEEN bomitem_effective
                                               AND (bomitem_expires - 1) )
                            AND (NOT costelem_sys)
                            AND (bomitem_item_id=itemcost_item_id)
                            AND (itemcost_costelem_id=costelem_id) ) 

                           UNION SELECT costelem_type
                           FROM itemcost, costelem
                           WHERE ( (itemcost_costelem_id=costelem_id)
                            AND (itemcost_item_id=pItemid) ) ) AS data LOOP

      PERFORM updateSorACost( pItemid, _bomitem.costelem_type,
			      TRUE, lowerCost(pItemid, _bomitem.costelem_type, pUpdateActual),
			      pUpdateActual);
    END LOOP;

  ELSIF (_type = &#39;C&#39;) THEN
    FOR _bomitem IN SELECT DISTINCT costelem_type
                    FROM ( SELECT costelem_type
                           FROM itemcost, costelem, bbomitem
                           WHERE ( (bbomitem_item_id=pItemid)
                            AND ( CURRENT_DATE BETWEEN bbomitem_effective
                                               AND (bbomitem_expires - 1) )
                            AND (NOT costelem_sys)
                            AND (bbomitem_item_id=itemcost_item_id)
                            AND (itemcost_costelem_id=costelem_id) ) 

                           UNION SELECT costelem_type
                           FROM itemcost, costelem,
                                bbomitem AS t, bbomitem AS s
                           WHERE ( (t.bbomitem_item_id=pItemid)
                            AND ( CURRENT_DATE BETWEEN s.bbomitem_effective
                                               AND (s.bbomitem_expires - 1) )
                            AND ( CURRENT_DATE BETWEEN t.bbomitem_effective
                                               AND (t.bbomitem_expires - 1) )
                            AND (s.bbomitem_parent_item_id=t.bbomitem_parent_item_id)
                            AND (NOT costelem_sys)
                            AND (s.bbomitem_item_id=itemcost_item_id)
                            AND (itemcost_costelem_id=costelem_id) ) ) AS data LOOP

      PERFORM updateSorACost( pItemid, _bomitem.costelem_type,
			      TRUE, lowerCost(pItemid, _bomitem.costelem_type, pUpdateActual),
			      pUpdateActual);
    END LOOP;
  END IF;

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updatelowlevel-integer">updatelowlevel( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE

  pLowlevel ALIAS FOR $1;
  _num_back INTEGER;

BEGIN

  UPDATE costUpdate SET costUpdate_lowlevel_code = (pLowlevel + 1)
    WHERE costUpdate_item_id IN (
	  SELECT bomitem_item_id
	  FROM bomitem JOIN costUpdate ON (bomitem_parent_item_id = costUpdate_item_id)
	  WHERE ((costUpdate_lowlevel_code = pLowlevel)
            AND  (bomitem_rev_id=getActiveRevId(&#39;BOM&#39;,bomitem_parent_item_id))
	    AND  (CURRENT_DATE BETWEEN bomitem_effective
                                               AND (bomitem_expires - 1))))
      AND costUpdate_lowlevel_code &gt;= pLowlevel;

  GET DIAGNOSTICS _num_back = ROW_COUNT;

  RETURN _num_back;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updateoutlevel-integer-integer-integerARRAY">updateoutlevel( integer, integer, integer[] )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pDays ALIAS FOR $2;
  pPeriods ALIAS FOR $3;
  _cursor INTEGER;
  _periodid INTEGER;
  _usage NUMERIC;
  _totalUsage NUMERIC;
  _totalDays INTEGER;
  _outLevel NUMERIC;
  _averageUsage NUMERIC;

BEGIN

  _cursor := 1;
  _totalUsage := 0;
  _totalDays := 0;

  _periodid = pPeriods[_cursor];
  WHILE (_periodid IS NOT NULL) LOOP
    SELECT COALESCE(SUM(invhist_invqty), 0) INTO _usage
    FROM invhist
    WHERE ( (invhist_itemsite_id=pItemsiteid)
     AND ( invhist_transdate::DATE BETWEEN findPeriodStart(_periodid)
                                   AND findPeriodEnd(_periodid) )
     AND (invhist_transtype IN (&#39;SH&#39;, &#39;IM&#39;)) );

    _totalUsage := (_totalUsage + _usage);

    _totalDays := ( _totalDays + ( findPeriodEnd(_periodid) -
                                   findPeriodStart(_periodid) + 1 ) );

    _cursor := (_cursor + 1);
    _periodid = pPeriods[_cursor];
  END LOOP;

  IF (_totalDays &gt; 0) THEN
    _outLevel := round(_totalUsage / _totalDays * pDays);

    IF (_outLevel &gt; 0) THEN
      UPDATE itemsite
      SET itemsite_ordertoqty = _outLevel
      WHERE (itemsite_id=pItemsiteid);
    ELSE
      UPDATE itemsite
      SET itemsite_ordertoqty = 0
      WHERE (itemsite_id=pItemsiteid);
    END IF;

    RETURN TRUE;
  ELSE
    RETURN FALSE;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updateprice-integer-bpchar-numeric">updateprice( integer, bpchar, numeric )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pIpsitemid ALIAS FOR $1;
  pUpdateType ALIAS FOR $2;
  pUpdateBy ALIAS FOR $3;

BEGIN

  IF (pUpdateType IN(&#39;V&#39;)) THEN
    UPDATE ipsitem
    SET ipsitem_price = (ipsitem_price + pUpdateBy)
    WHERE (ipsitem_id=pIpsitemid);
    RETURN 1;
  ELSE
    UPDATE ipsitem
    SET ipsitem_price = (ipsitem_price * pUpdateBy)
    WHERE (ipsitem_id=pIpsitemid);
    RETURN 1;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updateprice-integer-numeric">updateprice( integer, numeric )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pIpsitemid ALIAS FOR $1;
  pUpdateBy ALIAS FOR $2;

BEGIN

  RETURN updatePrice(pIpsitemid, &#39;P&#39;, pUpdateBy);
  
END;

</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updatereorderlevel-integer-integer-integerARRAY">updatereorderlevel( integer, integer, integer[] )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pDays ALIAS FOR $2;
  pPeriods ALIAS FOR $3;
  _cursor INTEGER;
  _periodid INTEGER;
  _usage NUMERIC;
  _totalUsage NUMERIC;
  _totalDays INTEGER;
  _reorderLevel NUMERIC;
  _averageUsage NUMERIC;

BEGIN

  _cursor := 1;
  _totalUsage := 0;
  _totalDays := 0;

  _periodid = pPeriods[_cursor];
  WHILE (_periodid IS NOT NULL) LOOP
    SELECT COALESCE(SUM(invhist_invqty), 0) INTO _usage
    FROM invhist
    WHERE ( (invhist_itemsite_id=pItemsiteid)
     AND ( invhist_transdate::DATE BETWEEN findPeriodStart(_periodid)
                                   AND findPeriodEnd(_periodid) )
     AND (invhist_transtype IN (&#39;SH&#39;, &#39;IM&#39;)) );

    _totalUsage := (_totalUsage + _usage);

    _totalDays := ( _totalDays + ( findPeriodEnd(_periodid) -
                                   findPeriodStart(_periodid) + 1 ) );

    _cursor := (_cursor + 1);
    _periodid = pPeriods[_cursor];
  END LOOP;

  IF (_totalDays &gt; 0) THEN
    _reorderLevel := round(_totalUsage / _totalDays * pDays);

    IF (_reorderLevel &gt; 0) THEN
      UPDATE itemsite
      SET itemsite_reorderlevel = _reorderLevel
      WHERE (itemsite_id=pItemsiteid);
    ELSE
      UPDATE itemsite
      SET itemsite_reorderlevel = 0
      WHERE (itemsite_id=pItemsiteid);
    END IF;

    RETURN TRUE;
  ELSE
    RETURN FALSE;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updatereorderlevel-integerARRAY-integer-boolean-integerARRAY">updatereorderlevel( integer[], integer, boolean, integer[] )</a>
		</h2>
<h3>Returns: SET OF reordlvl</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteids 		ALIAS FOR $1;
  pDays 		ALIAS FOR $2;
  pAddLeadtime		ALIAS FOR $3;
  pPeriodIds 		ALIAS FOR $4;
  _icursor 		INTEGER := 1;
  _pcursor 		INTEGER := 1;
  _totalUsage 		NUMERIC := 0;
  _totalDays 		INTEGER := 0;
  _reorderLevel 	NUMERIC := 0;
  _usage		NUMERIC;
  _averageUsage 	NUMERIC;
  _row reordlvl		%ROWTYPE;

BEGIN
  -- Validate
  IF (pItemsiteIds[1] IS NULL OR pPeriodIds[1] IS NULL) THEN
    RETURN;
  END IF;
  
  -- Calculate total days
  FOR _pcursor IN 1..ARRAY_UPPER(pPeriodIds,1) 
  LOOP
    _totalDays := ( _totalDays + ( findPeriodEnd(pPeriodIds[_pcursor]) -
                                      findPeriodStart(pPeriodIds[_pcursor]) + 1 ) );
  END LOOP;

  --  Loop through each itemsite id
  FOR _icursor IN 1..ARRAY_UPPER(pItemsiteIds,1)
  LOOP
      -- Get itemsite data
    SELECT itemsite_id,
      item_id,
      warehous_code,
      item_number,
      item_descrip1,
      itemsite_leadtime,
      0,
      itemsite_reorderlevel,
      0,
      0,
      0
      INTO _row
    FROM itemsite
      JOIN item ON (itemsite_item_id=item_id)
      JOIN whsinfo ON (itemsite_warehous_id=warehous_id)
    WHERE (itemsite_id=pItemsiteIds[_icursor]);

    IF (FOUND) THEN
      IF (pAddLeadtime) THEN
        _row.reordlvl_daysofstock := pDays + _row.reordlvl_leadtime;
      ELSE
        _row.reordlvl_daysofstock := pDays;
      END IF;
      
      --  Loop through each period id
      FOR _pcursor IN 1..ARRAY_UPPER(pPeriodIds,1) 
      LOOP
        -- Sum days and usage shipping and inventory transactions
        SELECT COALESCE(SUM(invhist_invqty), 0) INTO _usage
        FROM invhist
        WHERE ( (invhist_itemsite_id=pItemsiteIds[_icursor])
         AND ( invhist_transdate::DATE BETWEEN findPeriodStart(pPeriodIds[_pcursor])
                                       AND findPeriodEnd(pPeriodIds[_pcursor]) )
         AND (invhist_transtype IN (&#39;SH&#39;, &#39;IM&#39;)) );

        _totalUsage := (_totalUsage + _usage);

      END LOOP;

      -- Calculate reorder level
      IF (_totalDays &gt; 0) THEN
        _reorderLevel := round(_totalUsage / _totalDays * _row.reordlvl_daysofstock);
      END IF;
  
      IF (_reorderLevel &lt;= 0) THEN
        _reorderLevel := 0;
      END IF;

      -- Set values
      _row.reordlvl_total_days		:= _totalDays;
      _row.reordlvl_total_usage	:= _totalUsage;
      _row.reordlvl_calc_level		:= _reorderLevel;

      -- Return result
      RETURN NEXT _row;
    END IF;

    _usage		:= 0;
    _averageUsage	:= 0;
    _totalUsage		:= 0;
    _reorderLevel	:= 0;
  END LOOP;

  RETURN;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updatesoracost-integer-text-boolean-numeric-boolean">updatesoracost( integer, text, boolean, numeric, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemid	ALIAS FOR $1;
  pCosttype	ALIAS FOR $2;
  pLevel	ALIAS FOR $3;
  pCost		ALIAS FOR $4;
  pUpdateActual	ALIAS FOR $5;

BEGIN
    IF (pUpdateActual) THEN
	RETURN updateCost(pItemid, pCosttype, pLevel, pCost);
    ELSE
	RETURN updateStdCost(pItemid, pCosttype, pLevel, pCost);
    END IF;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updatestdcost-integer-numeric-numeric-text-text">updatestdcost( integer, numeric, numeric, text, text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
    pItemcostid	ALIAS FOR $1;
    pNewcost	ALIAS FOR $2;
    pOldcost	ALIAS FOR $3;
    pDocNumber	ALIAS FOR $4;
    pNotes	ALIAS FOR $5;
    _itemcostid	INTEGER;
    _r		RECORD;
    _newcost	NUMERIC;
    _oldcost	NUMERIC;

BEGIN
  IF (pNewcost IS NULL) THEN
    _newcost := 0;
  ELSE
    _newcost := pNewcost;
  END IF;
  IF (pOldcost IS NULL) THEN
    _oldcost := 0;
  ELSE
    _oldcost := pOldcost;
  END IF;

  IF (_newcost &gt; 0) THEN
    UPDATE itemcost
    SET itemcost_stdcost=_newcost,
        itemcost_posted=CURRENT_DATE
    WHERE (itemcost_id=pItemcostid);
  END IF;

--  Distribute to G/L, debit Inventory Asset, credit Inventory Cost Variance
  FOR _r IN SELECT itemsite_id, (itemsite_qtyonhand + itemsite_nnqoh) AS totalQty,
                   costcat_invcost_accnt_id, costcat_asset_accnt_id
            FROM itemcost, itemsite, costcat
            WHERE ( (itemsite_item_id=itemcost_item_id)
             AND (itemsite_costcat_id=costcat_id)
             AND (itemsite_costmethod != &#39;A&#39;)
             AND ((itemsite_qtyonhand + itemsite_nnqoh) &gt; 0)
             AND (itemcost_id=pItemcostid) ) LOOP
--    IF (_newcost &lt;&gt; _oldcost) THEN
--      RAISE NOTICE &#39;itemcost_id = %, Qty = %, Old Cost = %, New Cost = %&#39;, pItemcostid, _r.totalQty, _oldcost, _newcost;
--    END IF;
    PERFORM insertGLTransaction( &#39;P/D&#39;, &#39;&#39;, pDocNumber, pNotes,
                                 _r.costcat_invcost_accnt_id, _r.costcat_asset_accnt_id, _r.itemsite_id,
                                 ((_newcost - _oldcost) * _r.totalQty),
                                 CURRENT_DATE );
  END LOOP;

  IF (_newcost = 0) THEN
    DELETE FROM itemcost
    WHERE (itemcost_id=pItemcostid);

    RETURN FALSE;
  END IF;

  RETURN TRUE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updatestdcost-integer-text-boolean-numeric">updatestdcost( integer, text, boolean, numeric )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
    pItemid	ALIAS FOR $1;
    pCostType	ALIAS FOR $2;
    pLevel	ALIAS FOR $3;
    pCost	ALIAS FOR $4;
    _newCost	NUMERIC;
    _oldCost	NUMERIC := 0;
    _itemcostid	INTEGER;
    _updateRet	BOOLEAN;
    _itemNumber TEXT;

BEGIN
    IF (pCost IS NULL) THEN
	_newCost = 0;
    ELSE
	_newCost = pCost;
    END IF;

    SELECT itemcost_id, itemcost_stdCost, item_number
	INTO _itemcostid, _oldCost, _itemNumber
    FROM itemcost, costelem, item
    WHERE ((itemcost_costelem_id=costelem_id)
      AND  (itemcost_item_id=item_id)
      AND  (item_id=pItemid)
      AND  (itemcost_lowlevel=pLevel)
      AND  (costelem_type=pCosttype));
--    RAISE NOTICE &#39;updateStdCost(%, %, %, %) has itemcost_id % and stdcost %&#39;,
--    				pItemid, pCostType, plevel, _newCost, _itemcostid, _oldCost;

    IF (NOT FOUND) AND (_newCost &gt; 0) THEN
	SELECT NEXTVAL(&#39;itemcost_itemcost_id_seq&#39;) INTO _itemcostid;
	RAISE NOTICE &#39;updateStdCost() inserting itemcost_id %&#39;, _itemcostid;
	INSERT INTO itemcost
	    (itemcost_id, itemcost_item_id, itemcost_costelem_id,
	     itemcost_lowlevel, itemcost_stdcost, itemcost_posted,
	     itemcost_actcost, itemcost_updated)
	SELECT
	      _itemcostid, pItemid, costelem_id,
	      pLevel, _newCost, CURRENT_DATE,
	      0, CURRENT_DATE
	FROM costelem
	WHERE (costelem_type=pCosttype);
    END IF;

    IF (_itemcostid IS NOT NULL) THEN
	SELECT updateStdCost(_itemcostid, _newCost, _oldCost, &#39;Post Cost&#39;,
               (&#39;Set Standard Cost - &#39; || pCosttype || &#39; for item &#39; || _itemNumber)) INTO _updateRet;
	IF (_updateRet) THEN
	    RETURN _itemcostid;
	END IF;
    END IF;

    RETURN -1;
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updatetodoitem-integer-integer-text-text-integer-date-date-bpchar-date-date-integer-text-boolean">updatetodoitem( integer, integer, text, text, integer, date, date, bpchar, date, date, integer, text, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN updateTodoItem($1, $2, $3, $4, $5, NULL, NULL, $6, $7, $8, $9, $10, $11, $12, $13);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updatetodoitem-integer-integer-text-text-integer-integer-date-date-bpchar-date-date-integer-text-boolean">updatetodoitem( integer, integer, text, text, integer, integer, date, date, bpchar, date, date, integer, text, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RETURN updateTodoItem($1, $2, $3, $4, $5, $6, NULL, $7, $8, $9, $10, $11, $12, $13, $14);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updatetodoitem-integer-integer-text-text-integer-integer-integer-date-date-bpchar-date-date-integer-text-boolean">updatetodoitem( integer, integer, text, text, integer, integer, integer, date, date, bpchar, date, date, integer, text, boolean )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    ptodoitemid ALIAS FOR  $1;
    pusrid      ALIAS FOR  $2;
    pname       ALIAS FOR  $3;
    pdesc       ALIAS FOR  $4;
    pincdtid    ALIAS FOR  $5;
    pcrmacctid  ALIAS FOR  $6;
    pOpheadid   ALIAS FOR  $7;
    pstarted    ALIAS FOR  $8;
    pdue        ALIAS FOR  $9;
    pstatus     ALIAS FOR $10;
    passigned   ALIAS FOR $11;
    pcompleted  ALIAS FOR $12;
    pseq        ALIAS FOR $13;
    pnotes      ALIAS FOR $14;
    pactive     ALIAS FOR $15;

    _seq        INTEGER         := pseq;
    _curr       INTEGER; -- todoitem_id for this user with same seq value
    _max        INTEGER;
    _status     CHARACTER(1)    := pstatus;
    _incdtid    INTEGER         := pincdtid;
    _crmacctid  INTEGER         := pcrmacctid;
    _opheadid   INTEGER         := pOpheadid;
    _assigned   DATE            := passigned;
    _active     BOOL            := pactive;
    _result     INTEGER;

  BEGIN
    IF (pusrid IS NULL OR pusrid &lt;= 0) THEN
      RETURN -1;
    END IF;

    IF (pname IS NULL OR pname = &#39;&#39;) THEN
      RETURN -2;
    END IF;

    IF (pdue IS NULL) THEN
      RETURN -3;
    END IF;

    IF (ptodoitemid IS NULL OR ptodoitemid &lt;= 0) THEN
      RETURN -10;
    END IF;

    IF (pcompleted IS NOT NULL) THEN
      _status := &#39;C&#39;;
    ELSIF (pstatus IS NULL AND pstarted IS NOT NULL) THEN
      _status := &#39;I&#39;;
    ELSIF (pstatus IS NULL) THEN
      _status := &#39;N&#39;;
    END IF;

    IF (_incdtid &lt;= 0) THEN
      _incdtid := NULL;
    END IF;

    IF (_crmacctid &lt;= 0) THEN
      _crmacctid := NULL;
    END IF;

    IF (_opheadid &lt;= 0) THEN
      _opheadid := NULL;
    END IF;

    IF (_assigned IS NULL) THEN
      _assigned := CURRENT_DATE;
    END IF;

    IF (_seq IS NULL) THEN
      SELECT max(todoitem_seq) INTO _max
      FROM todoitem
      WHERE (todoitem_usr_id=pusrid);
      IF (_max IS NULL) THEN
        _seq := 1;
      ELSE
        _seq := _max + 1;
      END IF;
    END IF;
    IF (_seq &lt; 1) THEN
      _seq := 1;
    END IF;

    SELECT todoitem_id INTO _curr
    FROM todoitem
    WHERE ((todoitem_usr_id=pusrid)
      AND  (todoitem_seq=_seq));
    IF FOUND THEN
      PERFORM todoitemMove(_curr, 1);
    END IF;

    IF (_active IS NULL) THEN
      _active := TRUE;
    END IF;

    UPDATE todoitem SET
        todoitem_usr_id=pusrid, todoitem_name=pname, todoitem_description=pdesc,
        todoitem_incdt_id=_incdtid, todoitem_status=_status,
        todoitem_active=_active, todoitem_start_date=pstarted,
        todoitem_due_date=pdue, todoitem_assigned_date=_assigned,
        todoitem_completed_date=pcompleted, todoitem_seq=_seq,
        todoitem_notes=pnotes, todoitem_crmacct_id=_crmacctid,
        todoitem_ophead_id=_opheadid
    WHERE (todoitem_id=ptodoitemid);

    RETURN ptodoitemid;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.updatetodoitem-integer-integer-text-text-integer-integer-integer-date-date-bpchar-date-date-integer-text-boolean-text">updatetodoitem( integer, integer, text, text, integer, integer, integer, date, date, bpchar, date, date, integer, text, boolean, text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
  DECLARE
    ptodoitemid ALIAS FOR  $1;
    pusrid      ALIAS FOR  $2;
    pname       ALIAS FOR  $3;
    pdesc       ALIAS FOR  $4;
    pincdtid    ALIAS FOR  $5;
    pcrmacctid  ALIAS FOR  $6;
    pOpheadid   ALIAS FOR  $7;
    pstarted    ALIAS FOR  $8;
    pdue        ALIAS FOR  $9;
    pstatus     ALIAS FOR $10;
    passigned   ALIAS FOR $11;
    pcompleted  ALIAS FOR $12;
    ppriority   ALIAS FOR $13;
    pnotes      ALIAS FOR $14;
    pactive     ALIAS FOR $15;
    powner	ALIAS FOR $16;

    _priority   INTEGER         := ppriority;
    _status     CHARACTER(1)    := pstatus;
    _incdtid    INTEGER         := pincdtid;
    _crmacctid  INTEGER         := pcrmacctid;
    _opheadid   INTEGER         := pOpheadid;
    _assigned   DATE            := passigned;
    _active     BOOL            := pactive;
    _result     INTEGER;

  BEGIN
    IF (pusrid IS NULL OR pusrid &lt;= 0) THEN
      RETURN -1;
    END IF;

    IF (pname IS NULL OR pname = &#39;&#39;) THEN
      RETURN -2;
    END IF;

    IF (pdue IS NULL) THEN
      RETURN -3;
    END IF;

    IF (ptodoitemid IS NULL OR ptodoitemid &lt;= 0) THEN
      RETURN -10;
    END IF;

    IF (pcompleted IS NOT NULL) THEN
      _status := &#39;C&#39;;
    ELSIF (pstatus IS NULL AND pstarted IS NOT NULL) THEN
      _status := &#39;I&#39;;
    ELSIF (pstatus IS NULL) THEN
      _status := &#39;N&#39;;
    END IF;

    IF (_incdtid &lt;= 0) THEN
      _incdtid := NULL;
    END IF;

    IF (_crmacctid &lt;= 0) THEN
      _crmacctid := NULL;
    END IF;

    IF (_opheadid &lt;= 0) THEN
      _opheadid := NULL;
    END IF;

    IF (_priority &lt;= 0) THEN
      _priority := NULL;
    END IF;

    IF (_assigned IS NULL) THEN
      _assigned := CURRENT_DATE;
    END IF;

    IF (_active IS NULL) THEN
      _active := TRUE;
    END IF;

    UPDATE todoitem SET
        todoitem_usr_id=pusrid, todoitem_name=pname, todoitem_description=pdesc,
        todoitem_incdt_id=_incdtid, todoitem_status=_status,
        todoitem_active=_active, todoitem_start_date=pstarted,
        todoitem_due_date=pdue, todoitem_assigned_date=_assigned,
        todoitem_completed_date=pcompleted, todoitem_priority_id=_priority,
        todoitem_notes=pnotes, todoitem_crmacct_id=_crmacctid,
        todoitem_ophead_id=_opheadid, todoitem_owner_username=powner 
    WHERE (todoitem_id=ptodoitemid);

    RETURN ptodoitemid;
  END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.usedefaultlocation-integer">usedefaultlocation( integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  _p RECORD;

BEGIN

  SELECT itemsite_location_id,
         LENGTH(itemsite_location) AS locationlength INTO _p
  FROM itemsite
  WHERE (itemsite_id=pItemsiteid);

  IF (NOT FOUND) THEN
    RETURN FALSE;

  ELSIF (_p.itemsite_location_id &lt;&gt; -1) THEN
    RETURN TRUE;

  ELSIF (_p.locationlength &gt; 0) THEN
    RETURN TRUE;

  ELSE
    RETURN FALSE;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.usercancreateusers-text">usercancreateusers( text )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: SQL</h3>
        
        <pre>
SELECT usesuper FROM pg_user
WHERE usename=($1);
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.userid-text">userid( text )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pUsername ALIAS FOR $1;
  _userId INTEGER;

BEGIN

  SELECT usesysid INTO _userId
  FROM pg_user
  WHERE (usename=pUsername);

  IF (FOUND) THEN
    RETURN _userId;
  ELSE
    RETURN -1;
  END IF;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.validateorderqty-integer-numeric-boolean">validateorderqty( integer, numeric, boolean )</a>
		</h2>
<h3>Returns: numeric</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pItemsiteid ALIAS FOR $1;
  pQty ALIAS FOR $2;
  pManual ALIAS FOR $3;
  _p RECORD;
  _qty NUMERIC;

BEGIN

  _qty := pQty;

  SELECT itemsite_useparams,
         CASE WHEN (itemsite_useparams) THEN itemsite_useparamsmanual ELSE FALSE END AS itemsite_useparamsmanual,
         CASE WHEN (itemsite_useparams) THEN itemsite_minordqty ELSE 0.0 END AS itemsite_minordqty,
         CASE WHEN (itemsite_useparams) THEN itemsite_multordqty ELSE 0.0 END AS itemsite_multordqty,
         item_fractional, item_type INTO _p
  FROM itemsite, item
  WHERE ( (itemsite_item_id=item_id)
   AND (itemsite_id=pItemsiteid) );

  IF ( (pManual AND (_p.itemsite_useparamsmanual)) OR
       ((NOT pManual) AND (_p.itemsite_useparams)) ) THEN

    IF (_qty &lt; _p.itemsite_minordqty) THEN
      _qty := _p.itemsite_minordqty;
    END IF;

    IF ( (_p.itemsite_multordqty &gt; 0) AND ((_qty % _p.itemsite_multordqty) &gt; 0) ) THEN
      _qty := ((TRUNC(_qty / _p.itemsite_multordqty) * _p.itemsite_multordqty) + _p.itemsite_multordqty);
    END IF;

  END IF;

  _qty := roundQty(_p.item_fractional, _qty);

  RETURN _qty;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.validlocation-integer-integer">validlocation( integer, integer )</a>
		</h2>
<h3>Returns: boolean</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pLocationid ALIAS FOR $1;
  pItemsiteid ALIAS FOR $2;
  _p RECORD;
  
BEGIN

  SELECT location_restrict INTO _p
  FROM location, itemsite
  WHERE ( (location_warehous_id=itemsite_warehous_id)
    AND (itemsite_id=pItemsiteid)
    AND (location_id=pLocationid) );

  IF (FOUND) THEN
    IF (_p.location_restrict) THEN

      SELECT locitem_id INTO _p
      FROM locitem, itemsite
      WHERE ( (locitem_item_id=itemsite_item_id)
       AND (itemsite_id=pItemsiteid)
       AND (locitem_location_id=pLocationid) );

      IF (FOUND) THEN
        RETURN TRUE;
      END IF;

    ELSE
      RETURN TRUE;
    END IF;

  ELSE
    RETURN FALSE;
  END IF;

  RETURN FALSE;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.voidapcheck-integer">voidapcheck( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RAISE NOTICE &#39;voidAPCheck() is deprecated - use voidCheck() instead&#39;;
  RETURN voidCheck($1);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.voidapopenvoucher-integer">voidapopenvoucher( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pApopenid ALIAS FOR $1;
BEGIN
  RETURN voidApopenVoucher(pApopenid, fetchJournalNumber(&#39;AP-VO&#39;));
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.voidapopenvoucher-integer-integer">voidapopenvoucher( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pApopenid ALIAS FOR $1;
  pJournalNumber ALIAS FOR $2;
  _apopenid INTEGER;
  _apcreditapplyid INTEGER;
  _reference    TEXT;
  _result INTEGER;
  _sequence INTEGER;
  _totalAmount_base NUMERIC;
  _totalAmount NUMERIC;
  _itemAmount_base NUMERIC;
  _itemAmount NUMERIC;
  _test INTEGER;
  _a RECORD;
  _d RECORD;
  _g RECORD;
  _p RECORD;
  _n RECORD;
  _costx RECORD;
  _pExplain BOOLEAN;
  _pLowLevel BOOLEAN;
  _exchGainFreight NUMERIC;
  _firstExchDateFreight	DATE;
  _tmpTotal		NUMERIC;
  _glDate		DATE;

BEGIN

  _totalAmount_base := 0;
  _totalAmount := 0;
  SELECT fetchGLSequence() INTO _sequence;

--  Cache APOpen Information
  SELECT apopen.* INTO _n
  FROM apopen
  WHERE ( (apopen_doctype=&#39;V&#39;)
    AND   (apopen_id=pApopenid) );
  IF (NOT FOUND) THEN
    RAISE EXCEPTION &#39;Cannot Void Voucher #% as apopen not found&#39;, pApopenid;
  END IF;

--  Cache Voucher Infomation
  SELECT vohead.*,
	 vend_number || &#39;-&#39; || vend_name || &#39; &#39; || vohead_reference
							  AS glnotes,
	 COALESCE(pohead_orderdate, vohead_docdate) AS pohead_orderdate,
	 COALESCE(pohead_curr_id, vohead_curr_id) AS pohead_curr_id INTO _p
  FROM vohead JOIN vendinfo ON (vend_id=vohead_vend_id)
              LEFT OUTER JOIN pohead ON (vohead_pohead_id = pohead_id)
  WHERE (vohead_number=_n.apopen_docnumber);
  IF (NOT FOUND) THEN
    RAISE EXCEPTION &#39;Cannot Void Voucher #% as vohead not found&#39;, _n.apopen_docnumber;
  END IF;

  _glDate := COALESCE(_p.vohead_gldistdate, _p.vohead_distdate);

-- there is no currency gain/loss on items, see issue 3892,
-- but there might be on freight, which is first encountered at p/o receipt
  SELECT recv_date::DATE INTO _firstExchDateFreight
  FROM recv
  WHERE (recv_vohead_id = _p.vohead_id);

--  Loop through the vodist records for the passed vohead that
--  are posted against a P/O Item
  FOR _g IN SELECT DISTINCT poitem_id, voitem_qty, poitem_expcat_id,
                            poitem_invvenduomratio,
                            COALESCE(itemsite_id, -1) AS itemsiteid,
                            COALESCE(itemsite_costcat_id, -1) AS costcatid,
                            COALESCE(itemsite_item_id, -1) AS itemsite_item_id,
                            (SELECT SUM(value) 
                             FROM (
                                SELECT SUM(recv_value) AS value
                                FROM recv
                                WHERE (recv_voitem_id=voitem_id)
                             UNION
                                SELECT SUM(poreject_value)*-1 AS value
                                FROM poreject
                                WHERE (poreject_voitem_id=voitem_id)) as data)
                            AS value_base,
                            (poitem_freight_vouchered / poitem_qty_vouchered) * voitem_qty AS vouchered_freight,
                            currToBase(_p.pohead_curr_id, (poitem_freight_vouchered / poitem_qty_vouchered) * voitem_qty, _firstExchDateFreight ) AS vouchered_freight_base,
			    voitem_freight,
			    currToBase(_p.vohead_curr_id, voitem_freight,
                                       _p.vohead_distdate) AS voitem_freight_base
            FROM vodist, voitem,
                 poitem LEFT OUTER JOIN itemsite ON (poitem_itemsite_id=itemsite_id)
            WHERE ( (vodist_poitem_id=poitem_id)
             AND (voitem_poitem_id=poitem_id)
             AND (voitem_vohead_id=vodist_vohead_id)
             AND (vodist_vohead_id=_p.vohead_id)) LOOP

--  Grab the G/L Accounts
    IF (_g.costcatid = -1) THEN
      SELECT pp.accnt_id AS pp_accnt_id,
             lb.accnt_id AS lb_accnt_id INTO _a
      FROM expcat, accnt AS pp, accnt AS lb
      WHERE ( (expcat_purchprice_accnt_id=pp.accnt_id)
       AND (expcat_liability_accnt_id=lb.accnt_id)
       AND (expcat_id=_g.poitem_expcat_id) );
      IF (NOT FOUND) THEN
        RAISE EXCEPTION &#39;Cannot Void Voucher #% due to unassigned G/L Accounts.&#39;, _p.vohead_number;
      END IF;
    ELSE
      SELECT pp.accnt_id AS pp_accnt_id,
             lb.accnt_id AS lb_accnt_id INTO _a
      FROM costcat, accnt AS pp, accnt AS lb
      WHERE ( (costcat_purchprice_accnt_id=pp.accnt_id)
       AND (costcat_liability_accnt_id=lb.accnt_id)
       AND (costcat_id=_g.costcatid) );
      IF (NOT FOUND) THEN
        RAISE EXCEPTION &#39;Cannot Void Voucher #% due to unassigned G/L Accounts.&#39;, _p.vohead_number;
      END IF;
    END IF;

--  Clear the Item Amount accumulator
    _itemAmount_base := 0;
    _itemAmount := 0;

--  Figure out the total posted value for this line item
    FOR _d IN SELECT vodist_id, vodist_amount,
		     _p.vohead_curr_id, vodist_costelem_id,
		     currToBase(_p.vohead_curr_id, vodist_amount,
				_p.vohead_distdate) AS vodist_amount_base
              FROM vodist
              WHERE ( (vodist_vohead_id=_p.vohead_id)
               AND (vodist_poitem_id=_g.poitem_id) ) LOOP

       _pExplain := TRUE;
       SELECT * INTO _costx
         FROM itemcost
        WHERE ( (itemcost_item_id = _g.itemsite_item_id)
          AND   (itemcost_costelem_id = _d.vodist_costelem_id) );

       IF (FOUND) THEN
         _pExplain := _costx.itemcost_lowlevel;
       END IF;

--  Add the Distribution Amount to the Item Amount
      _itemAmount_base := _itemAmount_base + ROUND(_d.vodist_amount_base, 2);
      _itemAmount := _itemAmount + _d.vodist_amount;

    END LOOP;

--  Distribute from the clearing account
    PERFORM insertIntoGLSeries( _sequence, &#39;A/P&#39;, &#39;VO&#39;, text(_p.vohead_number),
                                _a.lb_accnt_id,
                                round(_g.value_base + _g.vouchered_freight_base, 2),
                                _glDate, _p.glnotes );

--  Attribute the correct portion to currency gain/loss
    _exchGainFreight := 0;
    SELECT currGain(_p.pohead_curr_id, _g.vouchered_freight,
		    _firstExchDateFreight, _p.vohead_distdate )
		    INTO _exchGainFreight;
    IF (round(_exchGainFreight, 2) &lt;&gt; 0) THEN
      PERFORM insertIntoGLSeries(_sequence, &#39;A/P&#39;, &#39;VO&#39;,
                                 text(_p.vohead_number),
                                 getGainLossAccntId(), round(_exchGainFreight, 2) * -1,
                                 _glDate, _p.glnotes);
    END IF;

--  Distribute the remaining variance to the Purchase Price Variance account
    IF (round(_itemAmount_base, 2) &lt;&gt; round(_g.value_base, 2)) THEN
      _tmpTotal := round(_itemAmount_base, 2) - round(_g.value_base, 2);
      PERFORM insertIntoGLSeries( _sequence, &#39;A/P&#39;, &#39;VO&#39;, text(_p.vohead_number),
                                  _a.pp_accnt_id,
                                  _tmpTotal,
                                  _glDate, _p.glnotes );
    END IF;

--  Distribute the remaining freight variance to the Purchase Price Variance account
    IF (round(_g.voitem_freight_base + _exchGainFreight, 2) &lt;&gt; round(_g.vouchered_freight_base, 2)) THEN
      _tmpTotal := round(_g.voitem_freight_base + _exchGainFreight, 2) - round(_g.vouchered_freight_base, 2);
      PERFORM insertIntoGLSeries( _sequence, &#39;A/P&#39;, &#39;VO&#39;, text(_p.vohead_number),
                                  _a.pp_accnt_id,
                                  _tmpTotal,
                                  _glDate, _p.glnotes );
    END IF;

--  Add the distribution amount to the total amount to distribute
    _totalAmount_base := (_totalAmount_base + _itemAmount_base + _g.voitem_freight_base);
    _totalAmount := (_totalAmount + _itemAmount + _g.voitem_freight);

--  Reverse the posting for all the Tagged Receivings for this P/O Item
    UPDATE recv
    SET recv_invoiced=FALSE,
        recv_recvcost_curr_id=basecurrid(),
        recv_recvcost=0,
        recv_vohead_id=NULL,
        recv_voitem_id=NULL
    FROM poitem
    WHERE ( (recv_orderitem_id=poitem_id)
      AND   (recv_order_type=&#39;PO&#39;)
      AND   (recv_orderitem_id=_g.poitem_id)
      AND   (recv_vohead_id=_p.vohead_id) );

--  Reverse the posting for all the Tagged Rejections for this P/O Item
    UPDATE poreject
    SET poreject_invoiced=FALSE,
        poreject_vohead_id=NULL,
        poreject_voitem_id=NULL
    WHERE ( (poreject_poitem_id=_g.poitem_id)
      AND   (poreject_vohead_id=_p.vohead_id) );

--  Update the qty and freight vouchered fields
    UPDATE poitem
       SET poitem_qty_vouchered = (poitem_qty_vouchered - _g.voitem_qty),
           poitem_freight_vouchered = (poitem_freight_vouchered - _g.voitem_freight)
    WHERE (poitem_id=_g.poitem_id);

  END LOOP;

--  Loop through the vodist records for the passed vohead that
--  are not posted against a P/O Item
  FOR _d IN SELECT vodist_id,
		   currToBase(_p.vohead_curr_id, vodist_amount,
			      _p.vohead_distdate) AS vodist_amount_base,
		   vodist_amount,
		   vodist_accnt_id, vodist_expcat_id
            FROM vodist
            WHERE ( (vodist_vohead_id=_p.vohead_id)
              AND   (vodist_poitem_id=-1) ) LOOP

--  Distribute from the misc. account
    IF (_d.vodist_accnt_id = -1) THEN
      PERFORM insertIntoGLSeries( _sequence, &#39;A/P&#39;, &#39;VO&#39;, text(_p.vohead_number),
                                  expcat_exp_accnt_id,
                                  round(_d.vodist_amount_base, 2),
                                  _glDate, _p.glnotes )
      FROM expcat
      WHERE (expcat_id=_d.vodist_expcat_id);
    ELSE
      PERFORM insertIntoGLSeries( _sequence, &#39;A/P&#39;, &#39;VO&#39;, text(_p.vohead_number),
                                  _d.vodist_accnt_id,
                                  round(_d.vodist_amount_base, 2),
                                  _glDate, _p.glnotes );
    END IF;

--  Add the Distribution Amount to the Total Amount
    _totalAmount_base := _totalAmount_base + ROUND(_d.vodist_amount_base, 2);
    _totalAmount := _totalAmount + _d.vodist_amount;

  END LOOP;

  SELECT insertIntoGLSeries( _sequence, &#39;A/P&#39;, &#39;VO&#39;, text(vohead_number),
                             accnt_id, round(_totalAmount_base, 2) * -1,
                             _glDate, _p.glnotes ) INTO _test
  FROM vohead, accnt
  WHERE ( (findAPAccount(vohead_vend_id)=accnt_id)
    AND   (vohead_id=_p.vohead_id) );
  IF (NOT FOUND) THEN
    RAISE EXCEPTION &#39;Cannot Void Voucher #% due to an unassigned A/P Account.&#39;, _p.vohead_number;
  END IF;

  PERFORM postGLSeries(_sequence, pJournalNumber);

--  Create the A/P Open Item
  SELECT NEXTVAL(&#39;apopen_apopen_id_seq&#39;) INTO _apopenid;
  _reference := (&#39;Void Voucher #&#39; || _n.apopen_docnumber);
  INSERT INTO apopen
  ( apopen_id, apopen_username, apopen_journalnumber,
    apopen_vend_id, apopen_docnumber, apopen_doctype, apopen_ponumber,
    apopen_docdate, apopen_duedate, apopen_distdate, apopen_terms_id, apopen_curr_id,
    apopen_amount, apopen_paid, apopen_open, apopen_notes, apopen_discount, apopen_curr_rate )
  SELECT _apopenid, CURRENT_USER, pJournalnumber,
         apopen_vend_id, apopen_docnumber, &#39;C&#39;, apopen_ponumber,
         CURRENT_DATE, CURRENT_DATE, CURRENT_DATE, -1, apopen_curr_id,
         apopen_amount - apopen_paid, 0, TRUE, _reference, TRUE, apopen_curr_rate
    FROM apopen
   WHERE (apopen_id=_n.apopen_id);

  SELECT apcreditapply_id INTO _apcreditapplyid
    FROM apcreditapply
   WHERE ( (apcreditapply_source_apopen_id=_apopenid)
     AND   (apcreditapply_target_apopen_id=_n.apopen_id) );
  IF (FOUND) THEN
    UPDATE apcreditapply
       SET apcreditapply_amount=_n.apopen_amount-_n.apopen_paid
     WHERE (apcreditapply_id=_apcreditapplyid);
  ELSE
    SELECT nextval(&#39;apcreditapply_apcreditapply_id_seq&#39;) INTO _apcreditapplyid;
    INSERT INTO apcreditapply
           ( apcreditapply_id, apcreditapply_source_apopen_id,
             apcreditapply_target_apopen_id, apcreditapply_amount,
             apcreditapply_curr_id )
    VALUES ( _apcreditapplyid, _apopenid, _n.apopen_id, _n.apopen_amount-_n.apopen_paid, _n.apopen_curr_id );
  END IF;

  SELECT postAPCreditMemoApplication(_apopenid) INTO _result;

  IF (_result &lt; 0) THEN
    RAISE EXCEPTION &#39;Credit application failed with result %.&#39;, _result;
  END IF;

--  Reopen all of the P/O Items that were closed by this Voucher
  UPDATE poitem
  SET poitem_status=&#39;O&#39;
  FROM voitem
  WHERE ( (voitem_poitem_id=poitem_id)
    AND   (voitem_close)
    AND   (voitem_vohead_id=_p.vohead_id) );

--  Reopen the P/O
  UPDATE pohead
  SET pohead_status=&#39;O&#39;
  WHERE (pohead_id=_p.vohead_pohead_id);

  RETURN pJournalNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.voidcheck-integer">voidcheck( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCheckid ALIAS FOR $1;

BEGIN

  IF ( SELECT (checkhead_void OR checkhead_posted OR checkhead_replaced
               OR (checkhead_ach_batch IS NOT NULL AND checkhead_printed))
       FROM checkhead
       WHERE (checkhead_id=pCheckid) ) THEN
    RETURN -1;
  END IF;

  UPDATE checkhead
  SET checkhead_void=TRUE
  WHERE (checkhead_id=pCheckid);

  RETURN 1;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.voidpostedapcheck-integer">voidpostedapcheck( integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RAISE NOTICE &#39;voidPostedAPCheck() is deprecated - use voidPostedCheck() instead&#39;;
  RETURN voidPostedCheck($1, fetchJournalNumber(&#39;AP-CK&#39;), CURRENT_DATE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.voidpostedapcheck-integer-integer">voidpostedapcheck( integer, integer )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RAISE NOTICE &#39;voidPostedAPCheck() is deprecated - use voidPostedCheck() instead&#39;;
  RETURN voidPostedCheck($1, $2, CURRENT_DATE);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.voidpostedapcheck-integer-integer-date">voidpostedapcheck( integer, integer, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
BEGIN
  RAISE NOTICE &#39;voidPostedAPCheck() is deprecated - use voidPostedCheck() instead&#39;;
  RETURN voidPostedCheck($1, $2, $3);
END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.voidpostedcheck-integer-integer-date">voidpostedcheck( integer, integer, date )</a>
		</h2>
<h3>Returns: integer</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pCheckid		ALIAS FOR $1;
  pJournalNumber	ALIAS FOR $2;
  pVoidDate		ALIAS FOR $3;
  _amount_base		NUMERIC := 0;
  _apopenid		INTEGER;
  _credit_glaccnt	INTEGER;
  _docnumber		TEXT;
  _exchGain		NUMERIC := 0;
  _exchGainTmp		NUMERIC := 0;
  _gltransNote		TEXT;
  _p			RECORD;
  _r			RECORD;
  _sequence		INTEGER;

BEGIN

  SELECT fetchGLSequence() INTO _sequence;

  SELECT checkhead.*,
         checkhead_amount / round(checkhead_curr_rate,5) AS checkhead_amount_base,
         bankaccnt_accnt_id AS bankaccntid,
	 checkrecip.* INTO _p
  FROM bankaccnt, checkhead LEFT OUTER JOIN
       checkrecip ON ((checkrecip_type=checkhead_recip_type)
		  AND (checkrecip_id=checkhead_recip_id))
  WHERE ((checkhead_bankaccnt_id=bankaccnt_id)
    AND  (checkhead_id=pCheckid));

  IF (NOT _p.checkhead_posted) THEN
    RETURN -10;
  END IF;

  IF (_p.checkrecip_id IS NULL) THEN	-- outer join failed
    RETURN -11;
  END IF;

  _gltransNote := &#39;Void Posted Check #&#39; || _p.checkhead_number || &#39; &#39; ||
		  _p.checkrecip_number || &#39;-&#39; || _p.checkrecip_name;

  IF (_p.checkhead_misc) THEN
    IF (COALESCE(_p.checkhead_expcat_id, -1) &lt; 0) THEN
      IF (_p.checkhead_recip_type = &#39;V&#39;) THEN
	PERFORM createAPDebitMemo(_p.checkhead_recip_id, pJournalNumber,
				  CAST(fetchAPMemoNumber() AS text), &#39;&#39;,
				  pVoidDate, _p.checkhead_amount,
				  _gltransNote || &#39; &#39;|| _p.checkhead_notes,
				  -1, pVoidDate, -1, _p.checkhead_curr_id );
	_credit_glaccnt := findAPPrepaidAccount(_p.checkhead_recip_id);

      ELSIF (_p.checkhead_recip_type = &#39;C&#39;) THEN
	PERFORM createARDebitMemo(_p.checkhead_recip_id, pJournalNumber,
				  fetchARMemoNumber(), &#39;&#39;,
				  pVoidDate, _p.checkhead_amount,
				  _gltransNote || &#39; &#39;|| _p.checkhead_notes,
				  -1, -1, -1, pVoidDate, -1, -1, 0.0,
				  _p.checkhead_curr_id );
	_credit_glaccnt := _p.checkrecip_accnt_id;

      ELSIF (_p.checkhead_recip_type = &#39;T&#39;) THEN
	-- TODO: should we create a debit memo for the tax authority? how?
	_credit_glaccnt := _p.checkrecip_accnt_id;

      END IF; -- recip type

    ELSE
      SELECT expcat_exp_accnt_id INTO _credit_glaccnt
      FROM expcat
      WHERE (expcat_id=_p.checkhead_expcat_id);
      IF (NOT FOUND) THEN
        RETURN -12;
      END IF;
    END IF;

    IF (COALESCE(_credit_glaccnt, -1) &lt; 0) THEN
      RETURN -13;
    END IF;

    PERFORM insertIntoGLSeries( _sequence, _p.checkrecip_gltrans_source, &#39;CK&#39;,
				text(_p.checkhead_number),
				_credit_glaccnt,
				round(_p.checkhead_amount_base, 2),
				pVoidDate, _gltransNote);

    _amount_base := _p.checkhead_amount_base;

  ELSE
    FOR _r IN SELECT checkitem_amount, checkitem_discount,
                     CASE WHEN (checkitem_apopen_id IS NOT NULL) THEN
                       checkitem_amount / round(apopen_curr_rate,5)
                     ELSE
                       currToBase(checkitem_curr_id,
                                  checkitem_amount,
                                  COALESCE(checkitem_docdate, _p.checkhead_checkdate)) 
                     END AS checkitem_amount_base,
                     apopen_id, apopen_doctype, apopen_docnumber, apopen_curr_rate,
                     aropen_id, aropen_doctype, aropen_docnumber,
                     checkitem_curr_id, checkitem_curr_rate,
                     COALESCE(checkitem_docdate, _p.checkhead_checkdate) AS docdate
              FROM (checkitem LEFT OUTER JOIN
		    apopen ON (checkitem_apopen_id=apopen_id)) LEFT OUTER JOIN
		    aropen ON (checkitem_aropen_id=aropen_id)
              WHERE (checkitem_checkhead_id=pcheckid) LOOP

      _exchGainTmp := 0;
      IF (_r.apopen_id IS NOT NULL) THEN
	-- undo the APDiscount Credit Memo if a discount was taken
        IF(_r.checkitem_discount &gt; 0) THEN
          SELECT NEXTVAL(&#39;apopen_apopen_id_seq&#39;) INTO _apopenid;
          SELECT fetchAPMemoNumber() INTO _docnumber;
          INSERT INTO apopen
          ( apopen_id, apopen_username, apopen_journalnumber,
            apopen_vend_id, apopen_docnumber, apopen_doctype, apopen_ponumber,
            apopen_docdate, apopen_duedate, apopen_distdate, apopen_terms_id,
            apopen_amount, apopen_paid, apopen_open,
	    apopen_notes,
	    apopen_accnt_id, apopen_curr_id, apopen_discount, apopen_curr_rate,
            apopen_closedate )
          VALUES
          ( _apopenid, CURRENT_USER, pJournalNumber,
            _p.checkhead_recip_id, _docnumber, &#39;D&#39;, &#39;&#39;,
            pVoidDate, pVoidDate, pVoidDate, -1,
            _r.checkitem_discount, _r.checkitem_discount, FALSE,
            (&#39;Reverse Posted Discount &#39; || _r.apopen_doctype || &#39; &#39; ||
	      _r.apopen_docnumber),
	    -1, _p.checkhead_curr_id, TRUE, _r.apopen_curr_rate,
            current_date );


          PERFORM insertIntoGLSeries( _sequence, _p.checkrecip_gltrans_source,
				      &#39;DS&#39;, _r.apopen_docnumber,
                                      findAPDiscountAccount(_p.checkhead_recip_id),
                                      round(_r.checkitem_discount / round(_r.apopen_curr_rate,5), 2) * -1,
                                      pVoidDate, _gltransNote);

          PERFORM insertIntoGLSeries( _sequence, _p.checkrecip_gltrans_source,
				      &#39;DS&#39;, _r.apopen_docnumber,
                                      findAPAccount(_p.checkhead_recip_id),
                                      round(_r.checkitem_discount / round(_r.apopen_curr_rate,5), 2),
                                      pVoidDate, _gltransNote);

	  --  Post the application
          INSERT INTO apapply
          ( apapply_vend_id, apapply_postdate, apapply_username,
            apapply_source_apopen_id, apapply_source_doctype, apapply_source_docnumber,
            apapply_target_apopen_id, apapply_target_doctype, apapply_target_docnumber,
            apapply_journalnumber, apapply_amount, apapply_curr_id )
          VALUES
          ( _p.checkhead_recip_id, pVoidDate, CURRENT_USER,
            _apopenid, &#39;D&#39;, _docnumber,
            _r.apopen_id, _r.apopen_doctype, _r.apopen_docnumber,
            pJournalNumber, (_r.checkitem_discount * -1), _r.checkitem_curr_id );
        END IF; -- discount was taken

        UPDATE apopen
       SET apopen_paid = round(apopen_paid -
				(_r.checkitem_amount + noNeg(_r.checkitem_discount)), 2),
            apopen_open = round(apopen_amount, 2) &gt;
			  round(apopen_paid -
				(_r.checkitem_amount + noNeg(_r.checkitem_discount)), 2),
            apopen_closedate = CASE WHEN (round(apopen_amount, 2) &gt;
			                  round(apopen_paid -
				           (_r.checkitem_amount + noNeg(_r.checkitem_discount)))) THEN NULL ELSE apopen_closedate END
        WHERE (apopen_id=_r.apopen_id);

	--  Post the application
        INSERT INTO apapply
        ( apapply_vend_id, apapply_postdate, apapply_username,
          apapply_source_apopen_id, apapply_source_doctype, apapply_source_docnumber,
          apapply_target_apopen_id, apapply_target_doctype, apapply_target_docnumber,
          apapply_journalnumber, apapply_amount, apapply_curr_id )
        VALUES
        ( _p.checkhead_recip_id, pVoidDate, CURRENT_USER,
          -1, &#39;K&#39;, _p.checkhead_number,
          _r.apopen_id, _r.apopen_doctype, _r.apopen_docnumber,
          pJournalNumber, (_r.checkitem_amount * -1), _r.checkitem_curr_id );
      END IF; -- if check item&#39;s apopen_id is not null

      IF (_r.aropen_id IS NOT NULL) THEN
        UPDATE aropen
        SET aropen_paid = round(aropen_paid -_r.checkitem_amount, 2),
            aropen_open = round(aropen_amount, 2) &gt;
			  round(aropen_paid - _r.checkitem_amount, 2)
        WHERE (aropen_id=_r.aropen_id);

	--  Post the application
        INSERT INTO arapply
        ( arapply_cust_id, arapply_postdate, arapply_distdate, arapply_username,
          arapply_source_aropen_id, arapply_source_doctype, arapply_source_docnumber,
          arapply_target_aropen_id, arapply_target_doctype, arapply_target_docnumber,
          arapply_journalnumber, arapply_applied, arapply_curr_id )
        VALUES
        ( _p.checkhead_recip_id, pVoidDate, pVoidDate, CURRENT_USER,
          -1, &#39;K&#39;, _p.checkhead_number,
          _r.aropen_id, _r.aropen_doctype, _r.aropen_docnumber,
          pJournalNumber, (_r.checkitem_amount * -1), _r.checkitem_curr_id );

      END IF; -- if check item&#39;s aropen_id is not null

--  calculate currency gain/loss
      SELECT apCurrGain(_r.apopen_id,_r.checkitem_curr_id, _r.checkitem_amount,
                      _p.checkhead_checkdate)
            INTO _exchGainTmp;
      _exchGain := _exchGain + _exchGainTmp;

      PERFORM insertIntoGLSeries( _sequence, _p.checkrecip_gltrans_source,
				  &#39;CK&#39;, text(_p.checkhead_number),
                                  _p.checkrecip_accnt_id,
                                  round(_r.checkitem_amount_base, 2),
                                  pVoidDate, _gltransNote);
      IF (_exchGainTmp &lt;&gt; 0) THEN
          PERFORM insertIntoGLSeries( _sequence, _p.checkrecip_gltrans_source,
				      &#39;CK&#39;, text(_p.checkhead_number),
				      getGainLossAccntId(),
				      round(_exchGainTmp, 2) * -1,
				      pVoidDate, _gltransNote);
      END IF;

      _amount_base := (_amount_base + _r.checkitem_amount_base);

    END LOOP;

    --  ensure that the check balances, attribute rounding errors to gain/loss
    IF round(_amount_base, 2) - round(_exchGain, 2) &lt;&gt; round(_p.checkhead_amount_base, 2) THEN
      IF round(_amount_base - _exchGain, 2) = round(_p.checkhead_amount_base, 2) THEN
	PERFORM insertIntoGLSeries( _sequence, _p.checkrecip_gltrans_source,
				    &#39;CK&#39;,
				    text(_p.checkhead_number), getGainLossAccntId(),
				    (round(_amount_base, 2) -
				     round(_exchGain, 2) -
				     round(_p.checkhead_amount_base, 2)) * -1,
				    pVoidDate, _gltransNote);
      ELSE
	RAISE EXCEPTION &#39;checkhead_id % does not balance (% - % &lt;&gt; %)&#39;, pCheckid,
	      _amount_base, _exchGain, _p.checkhead_amount_base;
      END IF;
    END IF;
  END IF;

  PERFORM insertIntoGLSeries( _sequence, _p.checkrecip_gltrans_source, &#39;CK&#39;,
			      text(_p.checkhead_number),
                              _p.bankaccntid,
			      round(_p.checkhead_amount_base, 2) * -1,
                              pVoidDate, _gltransNote);

  PERFORM postGLSeries(_sequence, pJournalNumber);

  UPDATE gltrans
     SET gltrans_misc_id=pCheckid
   WHERE gltrans_sequence=_sequence;

  UPDATE checkhead
  SET checkhead_posted=false,
      checkhead_void=true,
      checkhead_journalnumber=pJournalNumber
  WHERE (checkhead_id=pCheckid);

  RETURN pJournalNumber;

END;
</pre>
	
		<hr>
		<h2>Function:
			<a href="#public.schema">public</a>.<a name="public.function.woeffectivedate-date">woeffectivedate( date )</a>
		</h2>
<h3>Returns: date</h3>
<h3>Language: PLPGSQL</h3>
        
        <pre>
DECLARE
  pStartDate ALIAS FOR $1;

BEGIN

  IF (explodeWoEffective() = &#39;E&#39;) THEN
    RETURN CURRENT_DATE;
  ELSE
    RETURN pStartDate;
  END IF;

END;
</pre>
	


<p class="w3ref">Generated by <a href="http://www.rbt.ca/autodoc/">PostgreSQL Autodoc</a></p>
<p class="w3ref"><a href="http://validator.w3.org/check/referer">W3C HTML 4.01 Strict</a></p>
</body></html>
